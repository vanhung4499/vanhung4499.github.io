<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.12" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.46" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://vanhung4499.github.io/design/design-pattern/practical/creational/factory.html"><meta property="og:site_name" content="vanhung4499"><meta property="og:title" content="Factory Pattern Practice"><meta property="og:description" content="Factory Method Pattern: Xây dựng dịch vụ phát thưởng thống nhất cho nhiều loại hàng hóa khác nhau Giới thiệu "Code đẹp như nhau, nhưng chương trình kinh tởm thì được thăng chức ..."><meta property="og:type" content="article"><meta property="og:image" content="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240326130012.png"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2024-06-26T14:44:55.000Z"><meta property="article:author" content="Hung Nguyen"><meta property="article:tag" content="design-pattern"><meta property="article:modified_time" content="2024-06-26T14:44:55.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Factory Pattern Practice","image":["https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240326130012.png"],"dateModified":"2024-06-26T14:44:55.000Z","author":[{"@type":"Person","name":"Hung Nguyen","url":"https://vanhung4499.github.io","email":"vanhung4499@gmail.com"}]}</script><meta name="robots" content="all"><meta name="author" content="Hung Nguyen"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><meta name="keywords" content="Java, JVM, MySQL, Spring, Redis, MyBatis, SpringBoot, Frontend, Backend, Fullstack, DevOps, Hackintosh"><meta name="apple-mobile-web-app-capable" content="yes"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><title>Factory Pattern Practice | vanhung4499</title><meta name="description" content="Factory Method Pattern: Xây dựng dịch vụ phát thưởng thống nhất cho nhiều loại hàng hóa khác nhau Giới thiệu "Code đẹp như nhau, nhưng chương trình kinh tởm thì được thăng chức ...">
    <link rel="preload" href="/assets/style-CQc2aIVV.css" as="style"><link rel="stylesheet" href="/assets/style-CQc2aIVV.css">
    <link rel="modulepreload" href="/assets/app-C-_dXKvP.js"><link rel="modulepreload" href="/assets/factory.html-MQjqRz20.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="https://theme-hope-assets.vuejs.press/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">vanhung4499</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="Home"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->Home<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog.html" aria-label="Blog"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-blog" style=""></span><!--]-->Blog<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/dsa/" aria-label="Algorithm"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-lightbulb" style=""></span><!--]-->Algorithm<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Programming"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-code" style=""></span>Programming<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/java/" aria-label="Java"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-java" style=""></span><!--]-->Java<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/golang/" aria-label="Golang"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-golang" style=""></span><!--]-->Golang<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/js/" aria-label="JavaScript"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-js" style=""></span><!--]-->JavaScript<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/ts/" aria-label="TypeScript"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-t" style=""></span><!--]-->TypeScript<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/python/" aria-label="Python"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-python" style=""></span><!--]-->Python<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Database"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-database" style=""></span>Database<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/sql/" aria-label="SQL"><!---->SQL<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/mysql/" aria-label="MySQL"><!---->MySQL<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/mongodb/" aria-label="MongoDB"><!---->MongoDB<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/redis/" aria-label="Redis"><!---->Redis<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/elasticsearch/" aria-label="Elasticsearch"><!---->Elasticsearch<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Framework"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-server" style=""></span>Framework<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/backend/spring/" aria-label="Spring"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-java" style=""></span><!--]-->Spring<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/backend/nestjs/" aria-label="NestJS"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-js" style=""></span><!--]-->NestJS<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/backend/gin/" aria-label="Gin"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-golang" style=""></span><!--]-->Gin<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="DevOps"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-tools" style=""></span>DevOps<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/docker/" aria-label="Docker"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-docker" style=""></span><!--]-->Docker<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/kubernetes/" aria-label="Kubernetes"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-kubernetes" style=""></span><!--]-->Kubernetes<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/jenkins/" aria-label="Jenkins"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-jenkins" style=""></span><!--]-->Jenkins<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/git/" aria-label="Git"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-github" style=""></span><!--]-->Git<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/linux/" aria-label="Linux"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-linux" style=""></span><!--]-->Linux<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Design"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-paint-brush" style=""></span>Design<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/design/design-pattern/" aria-label="Design Pattern"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-paint-brush" style=""></span><!--]-->Design Pattern<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/design/system-design/" aria-label="System Design"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-gear" style=""></span><!--]-->System Design<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/projects/" aria-label="Projects"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-project-diagram" style=""></span><!--]-->Projects<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="About"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-circle-info" style=""></span>About<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/about/me.html" aria-label="Me"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-circle-info" style=""></span><!--]-->Me<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/about/" aria-label="Page"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-file" style=""></span><!--]-->Page<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/vanhung4499/vanhung4499.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">Search</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/design/design-pattern/overview.html" aria-label="Overview"><!---->Overview<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Patterns</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Practical</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Creational</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/design/design-pattern/practical/creational/abstract-factory.html" aria-label="Abstract Factory Pattern Practice"><!---->Abstract Factory Pattern Practice<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/design/design-pattern/practical/creational/builder.html" aria-label="Builder Pattern Practice"><!---->Builder Pattern Practice<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link vp-sidebar-page active" href="/design/design-pattern/practical/creational/factory.html" aria-label="Factory Pattern Practice"><!---->Factory Pattern Practice<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/design/design-pattern/practical/creational/prototype.html" aria-label="Prototype Pattern Practice"><!---->Prototype Pattern Practice<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/design/design-pattern/practical/creational/singleton.html" aria-label="Singleton Pattern Practice"><!---->Singleton Pattern Practice<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Structural</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Behavioral</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Factory Pattern Practice</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://vanhung4499.github.io" target="_blank" rel="noopener noreferrer">Hung Nguyen</a></span><span property="author" content="Hung Nguyen"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-06-26T14:44:55.000Z"></span><!----><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color6 clickable" role="navigation">design-pattern</span><!--]--><meta property="keywords" content="design-pattern"></span><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 17 min</span><meta property="timeRequired" content="PT17M"></span><span class="page-word-info" aria-label="Words🔠" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon" name="word"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>About 5048 words</span><meta property="wordCount" content="5048"></span><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#gioi-thieu">Giới thiệu</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#moi-truong-phat-trien">Môi trường phát triển</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#gioi-thieu-ve-mau-thiet-ke-factory-method">## Giới thiệu về Mẫu thiết kế Factory Method</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#mo-phong-viec-phat-thuong-nhieu-loai-hang-hoa">Mô phỏng việc phát thưởng nhiều loại hàng hóa</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#trien-khai-bang-cach-viet-code-long-nhau">Triển khai bằng cách viết code lồng nhau</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#cau-truc-du-an">Cấu trúc dự án</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#trien-khai-bang-if-else">Triển khai bằng if-else</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#kiem-thu">Kiểm thử</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#tai-cau-truc-factory-method-pattern">Tái cấu trúc: Factory Method Pattern</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#cau-truc-du-an-1">Cấu trúc dự án</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#trien-khai-code">Triển khai code</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#kiem-thu-1">Kiểm thử</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#tong-ket">Tổng kết</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="factory-method-pattern-xay-dung-dich-vu-phat-thuong-thong-nhat-cho-nhieu-loai-hang-hoa-khac-nhau" tabindex="-1"><a class="header-anchor" href="#factory-method-pattern-xay-dung-dich-vu-phat-thuong-thong-nhat-cho-nhieu-loai-hang-hoa-khac-nhau"><span>Factory Method Pattern: Xây dựng dịch vụ phát thưởng thống nhất cho nhiều loại hàng hóa khác nhau</span></a></h1><h2 id="gioi-thieu" tabindex="-1"><a class="header-anchor" href="#gioi-thieu"><span>Giới thiệu</span></a></h2><p>&quot;Code đẹp như nhau, nhưng chương trình kinh tởm thì được thăng chức và tăng lương.&quot;</p><p>Việc nói hay không nói, hầu hết các lập trình viên đều biết hoặc hiểu về mẫu thiết kế, nhưng hầu hết các bạn viết mã vẫn có thói quen tự do. Dù có bao nhiêu business logic cũng chỉ là một lớp với hàng nghìn dòng code, quá trình phát triển như vậy có thể tóm gọn trong ba bước: xác định thuộc tính, tạo phương thức, gọi interface, Done! Chỉ là việc phát triển ngắn hạn, nhưng tái cấu trúc là đập đi xây lại.</p><p>Mã nguồn tốt không chỉ để hoàn thành chức năng hiện tại, mà còn xem xét mở rộng sau này. Trên cấu trúc thiết kế là mềm dẻo, dễ đọc, dễ mở rộng, trong thực thi lĩnh vực cao độ gắn kết không để lộ chi tiết thực hiện không bị làm phiền bởi bên ngoài. Và điều này giống như trang trí nhà bạn với các loại nhà ba phòng ngủ (MVC), bốn phòng ngủ (DDD), bạn sẽ không cho phép một ngôi nhà giá hàng trăm nghìn đô la để dây cáp ống nước lộ ra ngoài, cũng như không cho phép đặt bồn cầu trong phòng bếp, bếp nướng lắp đặt trong phòng tắm.</p><p><strong>Ai phát minh ra mẫu thiết kế?</strong> Khái niệm về mẫu thiết kế ban đầu được <code>Christopher Alexander</code> đề xuất trong tác phẩm của ông, <code>Ngôn ngữ mẫu kiến trúc</code>. Cuốn sách này giới thiệu &quot;ngôn ngữ&quot; của thiết kế đô thị, cung cấp 253 mẫu mô tả về thành phố, khu phố, nhà ở, khu vườn, phòng và cấu trúc phương Tây, và đơn vị cơ bản của &quot;ngôn ngữ&quot; như vậy là mẫu. Sau đó, <code>Erich Gamma</code>, <code>John Vlissides</code>, <code>Ralph Johnson</code> và <code>Richard Helm</code> bốn tác giả đã chấp nhận khái niệm về mẫu. Vào năm 1994, họ đã xuất bản cuốn sách <code>Mẫu thiết kế: Cơ sở của phần mềm hướng đối tượng có thể tái sử dụng</code>.</p><p>Thực ra, một phần của người không đọc kỹ sách và tài liệu liên quan đến mẫu thiết kế, nhưng vẫn có thể viết code tốt. Điều này chủ yếu là do sau nhiều dự án trải qua và sự theo đuổi liên tục của thiết kế chương trình, đã trích xuất ra được kinh nghiệm. Và kinh nghiệm này cuối cùng sẽ gần như giống như nội dung được đề cập trong mẫu thiết kế, đòi hỏi sự kết hợp cao, kết hợp thấp, có thể mở rộng, có thể tái sử dụng. Bạn có thể gặp phải một số trải nghiệm tương tự, khi nghiên cứu mã nguồn của một số framework, bạn phát hiện ra rằng một số thiết kế trong đó giống như khi bạn phát triển.</p><p><strong>Tôi không học được mẫu thiết kế làm sao?</strong> Tiền đã bỏ ra, sách đã mua. Code vẫn là một chùm! Mẫu thiết kế được rút ra từ kinh nghiệm nhiều năm và trở thành tư duy hướng dẫn phát triển. Giống như tôi nói với bạn làm thế nào để đi xe đạp, lái xe, nhưng chỉ cần bạn không chạy hàng nghìn dặm, bạn chỉ có thể nhớ lý thuyết, muốn tham gia giao thông vẫn cảm thấy hoang mang!</p><p><strong>Vì vậy</strong>, ở phần đầu của loạt chủ đề mẫu thiết kế này, chúng tôi sẽ đưa bạn sử dụng ý tưởng về mẫu thiết kế để tối ưu hóa mã. Điều này giúp bạn học hỏi và tích lũy kinh nghiệm cho bản thân. Tất nhiên, ở đây cần phải thực hành nhiều hơn, chỉ khi <em>con người và phương tiện hoà hợp,</em> chúng ta mới có thể xây dựng được code hợp lý hơn dựa trên các mẫu thiết kế.</p><h2 id="moi-truong-phat-trien" tabindex="-1"><a class="header-anchor" href="#moi-truong-phat-trien"><span>Môi trường phát triển</span></a></h2><ol><li>JDK 1.8</li><li>Idea + Maven</li><li>Code: <a href="https://github.com/vanhung4499/practical-java-design" target="_blank" rel="noopener noreferrer">vanhung4499/practical-java-design</a></li></ol><table><thead><tr><th>Dự án</th><th>Mô tả</th></tr></thead><tbody><tr><td>demo-design-1-00</td><td>Dự án mô phỏng, cung cấp interface phát thưởng cho ba nhóm sản phẩm khác nhau</td></tr><tr><td>demo-design-1-01</td><td>Sử dụng mã nguồn lồng nhau để triển khai business requiremetnt, cũng là việc sử dụng ifelse</td></tr><tr><td>idemo-design-1-02</td><td>Tối ưu mã nguồn thông qua mấu thiết kể, tạo ra sự so sánh để học hỏi</td></tr></tbody></table><blockquote><p>[!info] Cách đánh thứ tự</p><ul><li>1-00, 1 đại diện cho mấu thiết kể đầu tiên, Factory Method Pattern</li><li>1-00, 00 đại diện cho tình huống mô phỏng</li><li>1-01, 01 đại diện cho phương pháp triển khai đầu tiên, tiếp theo là 02 03 và cứ thế</li></ul></blockquote><h2 id="gioi-thieu-ve-mau-thiet-ke-factory-method" tabindex="-1"><a class="header-anchor" href="#gioi-thieu-ve-mau-thiet-ke-factory-method"><span>## Giới thiệu về Mẫu thiết kế Factory Method</span></a></h2><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240326130012.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>Factory Pattern, còn được gọi là Factory Method Pattern, là một mẫu thiết kế tạo đối tượng, trong đó phương thức tạo đối tượng được cung cấp trong lớp cha, cho phép lớp con quyết định loại đối tượng được khởi tạo.</p><p>Mẫu thiết kế này cũng là một trong những mẫu thiết kế phổ biến nhất trong phát triển Java. Mục đích chính của nó là xác định một interface tạo đối tượng, để cho phép các lớp con tự quyết định khởi tạo đối tượng nào, mẫu thiết kế factory cho phép quá trình tạo ra trì hoãn cho lớp con.</p><p>Nói một cách đơn giản, mục đích của nó là cung cấp tính mở rộng của cấu trúc mã nguồn và che giấu logic cụ thể của từng lớp chức năng. Điều này giúp việc gọi từ bên ngoài trở nên đơn giản hơn, đồng thời cũng là cách loại bỏ nhiều trường hợp <code>ifelse</code>. Tất nhiên, điều này cũng có thể có một số nhược điểm, như số lượng lớp cần triển khai rất nhiều, cách thức quản lý như thế nào, làm thế nào để giảm thiểu chi phí phát triển. Tuy nhiên, những vấn đề này có thể được giảm bớt thông qua việc sử dụng kết hợp mẫu thiết kế sau này.</p><h2 id="mo-phong-viec-phat-thuong-nhieu-loai-hang-hoa" tabindex="-1"><a class="header-anchor" href="#mo-phong-viec-phat-thuong-nhieu-loai-hang-hoa"><span>Mô phỏng việc phát thưởng nhiều loại hàng hóa</span></a></h2><p>Để làm cho các ví dụ học tập trở nên gần gũi hơn với việc phát triển thực tế, ở đây chúng ta mô phỏng một doanh nghiệp trực tuyến trong một tình huống tiếp thị. Do tính phức tạp, thay đổi và tạm thời của tình huống tiếp thị, việc thiết kế yêu cầu sự chuyên sâu hơn, nếu không sẽ thường xuyên đối mặt với các hoạt động CRUD khẩn cấp, dẫn đến cấu trúc mã nguồn lộn xộn và khó bảo trì.</p><p>Trong tình huống tiếp thị, thường xuyên có người dùng thực hiện một số thao tác: đăng ký, chia sẻ, đánh giá, mời đăng ký, v.v, để nhận điểm thưởng và cuối cùng sử dụng điểm thưởng để đổi hàng hoá, từ đó thúc đẩy buôn bán và thu hút người dùng mới.</p><p>Vì vậy, ở đây chúng ta mô phỏng việc phát thưởng nhiều loại hàng hóa trong quá trình đổi điểm thưởng, giả sử bây giờ chúng ta có ba loại interface hàng hóa sau:</p><table><thead><tr><th>STT</th><th>Loại</th><th>Interface</th></tr></thead><tbody><tr><td>1</td><td>Phiếu giảm giá</td><td><code>CouponResult sendCoupon(String uId, String couponNumber, String uuid)</code></td></tr><tr><td>2</td><td>Hàng hóa thực</td><td><code>Boolean deliverGoods(DeliverReq req)</code></td></tr><tr><td>3</td><td>Thẻ đổi Iqiyi của bên thứ ba</td><td><code>void grantToken(String bindMobileNumber, String cardId)</code></td></tr></tbody></table><p><strong>Từ các interface trên, ta có các thông tin sau:</strong></p><ul><li>Ba interface trả về khác nhau, có kiểu đối tượng, kiểu boolean và một kiểu rỗng.</li><li>Các tham số đầu vào khác nhau, việc gửi phiếu giảm giá cần thông tin khách hàng, số phiếu giảm giá, uuid; việc đổi thẻ cần ID thẻ, hàng hóa thực cần thông tin về địa chỉ giao hàng (chứa trong đối tượng).</li><li>Ngoài ra, có thể sẽ có thêm loại hàng hóa khác được thêm vào sau này do yêu cầu phát triển kinh doanh của bạn. Bởi vì mọi nhu cầu phát triển của bạn đều điều chỉnh theo sự mở rộng của doanh nghiệp đối với thị trường.</li></ul><h2 id="trien-khai-bang-cach-viet-code-long-nhau" tabindex="-1"><a class="header-anchor" href="#trien-khai-bang-cach-viet-code-long-nhau"><span>Triển khai bằng cách viết code lồng nhau</span></a></h2><p>Nếu không xem xét đến tính mở rộng, chỉ để đáp ứng yêu cầu một cách nhanh chóng, thì việc phát thưởng cho các loại như vậy chỉ cần sử dụng câu lệnh if-else để kiểm tra và gọi các interface khác nhau là đủ. Điều này có thể là cách thường được sử dụng bởi một số bạn mới bắt đầu lập trình. Tiếp theo, chúng ta sẽ triển khai business requirement theo cách này trước.</p><h3 id="cau-truc-du-an" tabindex="-1"><a class="header-anchor" href="#cau-truc-du-an"><span>Cấu trúc dự án</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">design-demo-1-01/</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">├──</span><span style="color:#032F62;--shiki-dark:#98C379;"> pom.xml</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">└──</span><span style="color:#032F62;--shiki-dark:#98C379;"> src</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    ├──</span><span style="color:#032F62;--shiki-dark:#98C379;"> main</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;"> └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> java</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;">     └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> com</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;">         └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> hnv99</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;">             └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> design</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;">                 ├──</span><span style="color:#032F62;--shiki-dark:#98C379;"> AwardReq.java</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;">                 ├──</span><span style="color:#032F62;--shiki-dark:#98C379;"> AwardRes.java</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;">                 └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> PrizeController.java</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> test</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">        └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> java</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">            └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> com</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">                └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> hnv99</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">                    └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> design</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">                        └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> ApiTest.java</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Cấu trúc dự án rất đơn giản, bao gồm một đối tượng đầu vào <code>AwardReq</code>, một đối tượng đầu ra <code>AwardRes</code>, và một lớp interface <code>PrizeController</code>.</li></ul><h3 id="trien-khai-bang-if-else" tabindex="-1"><a class="header-anchor" href="#trien-khai-bang-if-else"><span>Triển khai bằng if-else</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">public</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> PrizeController</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Logger</span><span style="color:#24292E;--shiki-dark:#E06C75;"> logger </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getLogger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">PrizeController</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">class</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> AwardRes</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> awardToUser</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">AwardReq</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        String</span><span style="color:#24292E;--shiki-dark:#E06C75;"> reqJson</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> JSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">toJSONString</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(req);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        AwardRes</span><span style="color:#24292E;--shiki-dark:#E06C75;"> awardRes</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        try</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">            logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Bắt đầu phát thưởng cho {}。req:{}&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getUId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(), reqJson);  </span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">            // Dựa vào loại phần thưởng khác nhau [1 phiếu giảm giá, 2 hàng hóa thực tế, 3 thẻ đổi thưởng bên thứ ba (ví dụ  Garena)]  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">            if</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getAwardType</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">() </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) {  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                CouponService</span><span style="color:#24292E;--shiki-dark:#E06C75;"> couponService</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> CouponService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                CouponResult</span><span style="color:#24292E;--shiki-dark:#E06C75;"> couponResult</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> couponService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">sendCoupon</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getUId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(), </span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getAwardNumber</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(), </span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getBizId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                if</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;0000&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">equals</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">couponResult</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getCode</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">())) {  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">                    awardRes </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> AwardRes</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;0000&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Phát thành công&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">                } </span><span style="color:#D73A49;--shiki-dark:#C678DD;">else</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">                    awardRes </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> AwardRes</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;0001&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">couponResult</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getInfo</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">                }            } </span><span style="color:#D73A49;--shiki-dark:#C678DD;">else</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> if</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getAwardType</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">() </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) {  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                GoodsService</span><span style="color:#24292E;--shiki-dark:#E06C75;"> goodsService</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> GoodsService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                DeliveryReq</span><span style="color:#24292E;--shiki-dark:#E06C75;"> deliverReq</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> DeliveryReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                deliverReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setUserName</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">queryUserName</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getUId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">()));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                deliverReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setUserPhone</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">queryUserPhoneNumber</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getUId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">()));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                deliverReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setSku</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getAwardNumber</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                deliverReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setOrderId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getBizId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                deliverReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setConsigneeUserName</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getExtMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;consigneeUserName&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                deliverReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setConsigneeUserPhone</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getExtMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;consigneeUserPhone&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                deliverReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setConsigneeUserAddress</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getExtMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;consigneeUserAddress&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                Boolean</span><span style="color:#24292E;--shiki-dark:#E06C75;"> isSuccess</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> goodsService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">deliverGoods</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(deliverReq);  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                if</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (isSuccess) {  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">                    awardRes </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> AwardRes</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;0000&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Phát thành công&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">                } </span><span style="color:#D73A49;--shiki-dark:#C678DD;">else</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">                    awardRes </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> AwardRes</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;0001&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Phát thất bại&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">                }            } </span><span style="color:#D73A49;--shiki-dark:#C678DD;">else</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> if</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getAwardType</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">() </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 3</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) {  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                String</span><span style="color:#24292E;--shiki-dark:#E06C75;"> bindMobileNumber</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> queryUserPhoneNumber</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getUId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                GarenaCardService</span><span style="color:#24292E;--shiki-dark:#E06C75;"> garenaCardService</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> GarenaCardService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                garenaCardService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">grantToken</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(bindMobileNumber, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getAwardNumber</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">                awardRes </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> AwardRes</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;0000&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Phát thành công&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">            }            </span><span style="color:#24292E;--shiki-dark:#E5C07B;">logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Hoàn tất việc phát thưởng cho {}。&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getUId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">        } </span><span style="color:#D73A49;--shiki-dark:#C678DD;">catch</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#24292E;--shiki-dark:#E5C07B;">Exception</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">) {  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">            logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">error</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Phát thưởng thất bại {}。req:{}&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">req</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getUId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(), reqJson, e);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">            awardRes </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> AwardRes</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;0001&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getMessage</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">        }  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> awardRes;  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">    }</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> queryUserName</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> uId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;Hung Nguyen&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">    }</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> queryUserPhoneNumber</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> uId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;012345678&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">    }}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trên đây là một đoạn code trực tiếp sử dụng if-else để triển khai business requirement. Nếu chỉ xem xét từ góc độ business, việc triển khai cũng như dự kiến đã thực hiện được.</p><p>Code này trong tình hình hiện tại không có vấn đề gì đáng lo ngại. Tuy nhiên nếu sau này code này phải trải qua một vài lần phát triển và mở rộng, việc phát triển code sẽ trở nên khó khăn. Chi phí tái cấu trúc cao, cần phải sửa lại các interface trước đó, thời gian kiểm tra dài, cần phải kiểm tra lại toàn bộ một lần. Đây cũng là lý do tại sao nhiều người không muốn tiếp nhận mã nguồn của người khác, và nếu nhận, họ sẽ bị ép buộc về thời gian phát triển. Do đó, có thể thấy rằng số lần sử dụng if-else như vậy sẽ tiếp tục tăng lên.</p><h3 id="kiem-thu" tabindex="-1"><a class="header-anchor" href="#kiem-thu"><span>Kiểm thử</span></a></h3><p>Viết một bài unit test để kiểm tra phương pháp xử lý trên. Phát triển thói quen viết unit test sẽ giúp bạn nâng cao chất lượng code.</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">public</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> ApiTest</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Logger</span><span style="color:#24292E;--shiki-dark:#E06C75;"> logger </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getLogger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">ApiTest</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">class</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">Test</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> test_awardToUser</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        PrizeController</span><span style="color:#24292E;--shiki-dark:#E06C75;"> prizeController</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> PrizeController</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        System</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">out</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="color:#005CC5;--shiki-dark:#56B6C2;">\r\n</span><span style="color:#032F62;--shiki-dark:#98C379;">Kiểm tra phát phiếu giảm giá</span><span style="color:#005CC5;--shiki-dark:#56B6C2;">\r\n</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">        // Kiểm tra phát phiếu giảm giá  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        AwardReq</span><span style="color:#24292E;--shiki-dark:#E06C75;"> req01</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> AwardReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        req01</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setUId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;10001&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        req01</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setAwardType</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#005CC5;--shiki-dark:#D19A66;">1</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        req01</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setAwardNumber</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;EGM1023938910232121323432&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        req01</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setBizId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;791098764902132&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        AwardRes</span><span style="color:#24292E;--shiki-dark:#E06C75;"> awardRes01</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> prizeController</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">awardToUser</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(req01);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Tham số yêu cầu: {}&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">JSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">toJSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(req01));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Kết quả kiểm tra: {}&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">JSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">toJSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(awardRes01));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        System</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">out</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="color:#005CC5;--shiki-dark:#56B6C2;">\r\n</span><span style="color:#032F62;--shiki-dark:#98C379;">Kiểm tra việc giao dịch hàng hoá thực</span><span style="color:#005CC5;--shiki-dark:#56B6C2;">\r\n</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">        // Kiểm tra giao dịch hàng hoá thực  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        AwardReq</span><span style="color:#24292E;--shiki-dark:#E06C75;"> req02</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> AwardReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        req02</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setUId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;10001&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        req02</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setAwardType</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#005CC5;--shiki-dark:#D19A66;">2</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        req02</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setAwardNumber</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;9820198721311&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        req02</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setBizId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;1023000020112221113&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        req02</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setExtMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#D73A49;--shiki-dark:#C678DD;">new</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> HashMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;() {{  
            put(&quot;consigneeUserName&quot;, &quot;Hung Nguyen&quot;);  
            put(&quot;consigneeUserPhone&quot;, &quot;012345678&quot;);  
            put(&quot;consigneeUserAddress&quot;, &quot;Thu Duc, HCMC&quot;);  
        }});  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        AwardRes</span><span style="color:#24292E;--shiki-dark:#E06C75;"> awardRes02</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> prizeController</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">awardToUser</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(req02);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Tham số yêu cầu: {}&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">JSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">toJSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(req02));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Kết quả kiểm tra: {}&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">JSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">toJSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(awardRes02));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        System</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">out</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="color:#005CC5;--shiki-dark:#56B6C2;">\r\n</span><span style="color:#032F62;--shiki-dark:#98C379;">Thẻ đổi thưởng bên thứ ba (Garena)</span><span style="color:#005CC5;--shiki-dark:#56B6C2;">\r\n</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        AwardReq</span><span style="color:#24292E;--shiki-dark:#E06C75;"> req03</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> AwardReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        req03</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setUId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;10001&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        req03</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setAwardType</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#005CC5;--shiki-dark:#D19A66;">3</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        req03</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setAwardNumber</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;AQY1xjkUodl8LO975GdfrYUio&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        AwardRes</span><span style="color:#24292E;--shiki-dark:#E06C75;"> awardRes03</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> prizeController</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">awardToUser</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(req03);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Tham số yêu cầu: {}&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">JSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">toJSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(req03));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Kết quả kiểm tra: {}&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">JSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">toJSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(awardRes03));    </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Kết quả:</strong></p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Kiểm</span><span style="color:#032F62;--shiki-dark:#98C379;"> tra</span><span style="color:#032F62;--shiki-dark:#98C379;"> phát</span><span style="color:#032F62;--shiki-dark:#98C379;"> phiếu</span><span style="color:#032F62;--shiki-dark:#98C379;"> giảm</span><span style="color:#032F62;--shiki-dark:#98C379;"> giá</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 20:58:32.171</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(PrizeController.java:21)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Bắt</span><span style="color:#032F62;--shiki-dark:#98C379;"> đầu</span><span style="color:#032F62;--shiki-dark:#98C379;"> phát</span><span style="color:#032F62;--shiki-dark:#98C379;"> thưởng</span><span style="color:#032F62;--shiki-dark:#98C379;"> cho</span><span style="color:#032F62;--shiki-dark:#98C379;"> 10001。req:{&quot;awardNumber&quot;:&quot;EGM1023938910232121323432&quot;,&quot;awardType&quot;:1,&quot;bizId&quot;:&quot;791098764902132&quot;,&quot;uId&quot;:&quot;10001&quot;}</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Mô</span><span style="color:#032F62;--shiki-dark:#98C379;"> phỏng</span><span style="color:#032F62;--shiki-dark:#98C379;"> việc</span><span style="color:#032F62;--shiki-dark:#98C379;"> phát</span><span style="color:#032F62;--shiki-dark:#98C379;"> phiếu</span><span style="color:#032F62;--shiki-dark:#98C379;"> giảm</span><span style="color:#032F62;--shiki-dark:#98C379;"> giá:</span><span style="color:#032F62;--shiki-dark:#98C379;"> 10001,</span><span style="color:#032F62;--shiki-dark:#98C379;"> EGM1023938910232121323432,</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 791098764902132</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 20:58:32.175</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(PrizeController.java:53)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Hoàn</span><span style="color:#032F62;--shiki-dark:#98C379;"> tất</span><span style="color:#032F62;--shiki-dark:#98C379;"> việc</span><span style="color:#032F62;--shiki-dark:#98C379;"> phát</span><span style="color:#032F62;--shiki-dark:#98C379;"> thưởng</span><span style="color:#032F62;--shiki-dark:#98C379;"> cho</span><span style="color:#032F62;--shiki-dark:#98C379;"> 10001。</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 20:58:32.176</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(ApiTest.java:27)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Tham</span><span style="color:#032F62;--shiki-dark:#98C379;"> số</span><span style="color:#032F62;--shiki-dark:#98C379;"> yêu</span><span style="color:#032F62;--shiki-dark:#98C379;"> cầu:</span><span style="color:#032F62;--shiki-dark:#98C379;"> {&quot;uId&quot;:&quot;10001&quot;,&quot;bizId&quot;:&quot;791098764902132&quot;,&quot;awardNumber&quot;:&quot;EGM1023938910232121323432&quot;,&quot;awardType&quot;:1}</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 20:58:32.178</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(ApiTest.java:28)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Kết</span><span style="color:#032F62;--shiki-dark:#98C379;"> quả</span><span style="color:#032F62;--shiki-dark:#98C379;"> kiểm</span><span style="color:#032F62;--shiki-dark:#98C379;"> tra:</span><span style="color:#032F62;--shiki-dark:#98C379;"> {&quot;code&quot;:&quot;0000&quot;,&quot;info&quot;:&quot;Phát thành công&quot;}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Kiểm</span><span style="color:#032F62;--shiki-dark:#98C379;"> tra</span><span style="color:#032F62;--shiki-dark:#98C379;"> việc</span><span style="color:#032F62;--shiki-dark:#98C379;"> giao</span><span style="color:#032F62;--shiki-dark:#98C379;"> dịch</span><span style="color:#032F62;--shiki-dark:#98C379;"> hàng</span><span style="color:#032F62;--shiki-dark:#98C379;"> hoá</span><span style="color:#032F62;--shiki-dark:#98C379;"> thực</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 20:58:32.179</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(PrizeController.java:21)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Bắt</span><span style="color:#032F62;--shiki-dark:#98C379;"> đầu</span><span style="color:#032F62;--shiki-dark:#98C379;"> phát</span><span style="color:#032F62;--shiki-dark:#98C379;"> thưởng</span><span style="color:#032F62;--shiki-dark:#98C379;"> cho</span><span style="color:#032F62;--shiki-dark:#98C379;"> 10001。req:{&quot;awardNumber&quot;:&quot;9820198721311&quot;,&quot;awardType&quot;:2,&quot;bizId&quot;:&quot;1023000020112221113&quot;,&quot;extMap&quot;:{&quot;consigneeUserName&quot;:&quot;Hung Nguyen&quot;,&quot;consigneeUserPhone&quot;:&quot;012345678&quot;,&quot;consigneeUserAddress&quot;:&quot;Thu Duc, HCMC&quot;},&quot;uId&quot;:&quot;10001&quot;}</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Mô</span><span style="color:#032F62;--shiki-dark:#98C379;"> phỏng</span><span style="color:#032F62;--shiki-dark:#98C379;"> việc</span><span style="color:#032F62;--shiki-dark:#98C379;"> giao</span><span style="color:#032F62;--shiki-dark:#98C379;"> hàng</span><span style="color:#032F62;--shiki-dark:#98C379;"> hàng</span><span style="color:#032F62;--shiki-dark:#98C379;"> hoá</span><span style="color:#032F62;--shiki-dark:#98C379;"> thực:</span><span style="color:#032F62;--shiki-dark:#98C379;"> {&quot;consigneeUserAddress&quot;:&quot;Thu Duc, HCMC&quot;,&quot;consigneeUserName&quot;:&quot;Hung Nguyen&quot;,&quot;consigneeUserPhone&quot;:&quot;012345678&quot;,&quot;orderId&quot;:&quot;1023000020112221113&quot;,&quot;sku&quot;:&quot;9820198721311&quot;,&quot;userName&quot;:&quot;Hung Nguyen&quot;,&quot;userPhone&quot;:&quot;012345678&quot;}</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 20:58:32.183</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(PrizeController.java:53)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Hoàn</span><span style="color:#032F62;--shiki-dark:#98C379;"> tất</span><span style="color:#032F62;--shiki-dark:#98C379;"> việc</span><span style="color:#032F62;--shiki-dark:#98C379;"> phát</span><span style="color:#032F62;--shiki-dark:#98C379;"> thưởng</span><span style="color:#032F62;--shiki-dark:#98C379;"> cho</span><span style="color:#032F62;--shiki-dark:#98C379;"> 10001。</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 20:58:32.183</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(ApiTest.java:44)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Tham</span><span style="color:#032F62;--shiki-dark:#98C379;"> số</span><span style="color:#032F62;--shiki-dark:#98C379;"> yêu</span><span style="color:#032F62;--shiki-dark:#98C379;"> cầu:</span><span style="color:#032F62;--shiki-dark:#98C379;"> {&quot;extMap&quot;:{&quot;consigneeUserName&quot;:&quot;Hung Nguyen&quot;,&quot;consigneeUserAddress&quot;:&quot;Thu Duc, HCMC&quot;,&quot;consigneeUserPhone&quot;:&quot;012345678&quot;},&quot;uId&quot;:&quot;10001&quot;,&quot;bizId&quot;:&quot;1023000020112221113&quot;,&quot;awardNumber&quot;:&quot;9820198721311&quot;,&quot;awardType&quot;:2}</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 20:58:32.183</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(ApiTest.java:45)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Kết</span><span style="color:#032F62;--shiki-dark:#98C379;"> quả</span><span style="color:#032F62;--shiki-dark:#98C379;"> kiểm</span><span style="color:#032F62;--shiki-dark:#98C379;"> tra:</span><span style="color:#032F62;--shiki-dark:#98C379;"> {&quot;code&quot;:&quot;0000&quot;,&quot;info&quot;:&quot;Phát thành công&quot;}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Thẻ</span><span style="color:#032F62;--shiki-dark:#98C379;"> đổi</span><span style="color:#032F62;--shiki-dark:#98C379;"> thưởng</span><span style="color:#032F62;--shiki-dark:#98C379;"> bên</span><span style="color:#032F62;--shiki-dark:#98C379;"> thứ</span><span style="color:#032F62;--shiki-dark:#98C379;"> ba</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (Garena)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 20:58:32.183</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(PrizeController.java:21)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Bắt</span><span style="color:#032F62;--shiki-dark:#98C379;"> đầu</span><span style="color:#032F62;--shiki-dark:#98C379;"> phát</span><span style="color:#032F62;--shiki-dark:#98C379;"> thưởng</span><span style="color:#032F62;--shiki-dark:#98C379;"> cho</span><span style="color:#032F62;--shiki-dark:#98C379;"> 10001。req:{&quot;awardNumber&quot;:&quot;AQY1xjkUodl8LO975GdfrYUio&quot;,&quot;awardType&quot;:3,&quot;uId&quot;:&quot;10001&quot;}</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Mô</span><span style="color:#032F62;--shiki-dark:#98C379;"> phỏng</span><span style="color:#032F62;--shiki-dark:#98C379;"> việc</span><span style="color:#032F62;--shiki-dark:#98C379;"> phát</span><span style="color:#032F62;--shiki-dark:#98C379;"> thẻ</span><span style="color:#032F62;--shiki-dark:#98C379;"> game</span><span style="color:#032F62;--shiki-dark:#98C379;"> Garena:</span><span style="color:#032F62;--shiki-dark:#98C379;"> 012345678,</span><span style="color:#032F62;--shiki-dark:#98C379;"> AQY1xjkUodl8LO975GdfrYUio</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 20:58:32.184</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(PrizeController.java:53)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Hoàn</span><span style="color:#032F62;--shiki-dark:#98C379;"> tất</span><span style="color:#032F62;--shiki-dark:#98C379;"> việc</span><span style="color:#032F62;--shiki-dark:#98C379;"> phát</span><span style="color:#032F62;--shiki-dark:#98C379;"> thưởng</span><span style="color:#032F62;--shiki-dark:#98C379;"> cho</span><span style="color:#032F62;--shiki-dark:#98C379;"> 10001。</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 20:58:32.184</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(ApiTest.java:54)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Tham</span><span style="color:#032F62;--shiki-dark:#98C379;"> số</span><span style="color:#032F62;--shiki-dark:#98C379;"> yêu</span><span style="color:#032F62;--shiki-dark:#98C379;"> cầu:</span><span style="color:#032F62;--shiki-dark:#98C379;"> {&quot;uId&quot;:&quot;10001&quot;,&quot;awardNumber&quot;:&quot;AQY1xjkUodl8LO975GdfrYUio&quot;,&quot;awardType&quot;:3}</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 20:58:32.184</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(ApiTest.java:55)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Kết</span><span style="color:#032F62;--shiki-dark:#98C379;"> quả</span><span style="color:#032F62;--shiki-dark:#98C379;"> kiểm</span><span style="color:#032F62;--shiki-dark:#98C379;"> tra:</span><span style="color:#032F62;--shiki-dark:#98C379;"> {&quot;code&quot;:&quot;0000&quot;,&quot;info&quot;:&quot;Phát thành công&quot;}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Kết quả chạy bình thường, đáp ứng mọi business requirement hiện tại và viết rất nhanh. Nhưng! Thực sự rất khó để bảo trì!</li></ul><h2 id="tai-cau-truc-factory-method-pattern" tabindex="-1"><a class="header-anchor" href="#tai-cau-truc-factory-method-pattern"><span>Tái cấu trúc: Factory Method Pattern</span></a></h2><p>Tiếp theo, chúng ta sẽ sử dụng Factory Method Pattern để tối ưu hóa mã, đây cũng được coi là một ví dụ nhỏ về <strong>Refactoring</strong>. Sau khi Refactoring, bạn sẽ thấy cấu trúc mã rõ ràng hơn và có khả năng mở rộng cho các yêu cầu nghiệp vụ mới trong tương lai. Tuy nhiên, trong thực tế, chúng ta sẽ tiếp tục hoàn thiện nó, phần hiện tại chỉ tóm tắt phần cốt lõi nhất để bạn dễ dàng học tập.</p><h3 id="cau-truc-du-an-1" tabindex="-1"><a class="header-anchor" href="#cau-truc-du-an-1"><span>Cấu trúc dự án</span></a></h3><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">design-demo-1-02/</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">├──</span><span style="color:#032F62;--shiki-dark:#98C379;"> pom.xml</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">└──</span><span style="color:#032F62;--shiki-dark:#98C379;"> src</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    ├──</span><span style="color:#032F62;--shiki-dark:#98C379;"> main</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;"> └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> java</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;">     └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> com</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;">         └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> hnv99</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;">             └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> design</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;">                 ├──</span><span style="color:#032F62;--shiki-dark:#98C379;"> StoreFactory.java</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;">                 └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> store</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;">                     ├──</span><span style="color:#032F62;--shiki-dark:#98C379;"> ICommodity.java</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;">                     └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> impl</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;">                         ├──</span><span style="color:#032F62;--shiki-dark:#98C379;"> CardCommodityService.java</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;">                         ├──</span><span style="color:#032F62;--shiki-dark:#98C379;"> CouponCommodityService.java</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    │  </span><span style="color:#032F62;--shiki-dark:#98C379;">                         └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> GoodsCommodityService.java</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> test</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">        └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> java</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">            └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> com</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">                └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> hnv99</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">                    └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> design</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">                        └──</span><span style="color:#032F62;--shiki-dark:#98C379;"> ApiTest.java</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Đầu tiên, hãy nhìn vào cấu trúc dự án trên, bạn có cảm nhận gì? Ví dụ: <ul><li>Nó có vẻ rõ ràng hơn.</li><li>Việc phân chia tầng lớp như vậy giúp mở rộng dễ dàng hơn.</li><li>Có thể tưởng tượng mỗi lớp thực hiện chức năng gì.</li></ul></li><li>Nếu bạn vẫn chưa hiểu tại sao cần sửa đổi như vậy, cũng không sao cả. Bởi vì bạn đang học hỏi sức mạnh của Factory Pattern thông qua bài viết này. Đồng thời, sau khi xem mã nguồn và thực hành vài lần, bạn sẽ dần dần nắm vững kỹ thuật của Factory Pattern.</li></ul><h3 id="trien-khai-code" tabindex="-1"><a class="header-anchor" href="#trien-khai-code"><span>Triển khai code</span></a></h3><h4 id="đinh-nghia-interface-phat-thuong" tabindex="-1"><a class="header-anchor" href="#đinh-nghia-interface-phat-thuong"><span>Định nghĩa Interface phát thưởng</span></a></h4><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">public</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> interface</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> ICommodity</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    void</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> sendCommodity</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> uId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> commodityId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> bizId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">Map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">extMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> throws</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Exception</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Tất cả các giải thưởng, dù là vật lý, ảo hay bên thứ ba, đều cần được xử lý thông qua chương trình của chúng tôi để triển khai interface này nhằm đảm bảo tính thống nhất của đầu vào và đầu ra sau cùng.</li><li>Các thông số đầu vào của interface bao gồm: <code>User ID</code>, <code>Prize ID</code>, <code>Business ID</code> và <code>Extra Field</code> được sử dụng để xử lý địa chỉ thu hoạch khi phát thưởng hàng hóa vật lý.</li></ul><h4 id="implement-icommodity-interface" tabindex="-1"><a class="header-anchor" href="#implement-icommodity-interface"><span>Implement ICommodity Interface</span></a></h4><h5 id="coupon-phieu-giam-gia" tabindex="-1"><a class="header-anchor" href="#coupon-phieu-giam-gia"><span><strong>Coupon (Phiếu giảm giá)</strong></span></a></h5><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">public</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> CouponCommodityService</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> ICommodity</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Logger</span><span style="color:#24292E;--shiki-dark:#E06C75;"> logger </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getLogger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">CouponCommodityService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">class</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> CouponService</span><span style="color:#24292E;--shiki-dark:#E06C75;"> couponService </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> CouponService</span><span style="color:#24292E;--shiki-dark:#E06C75;">()</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> sendCommodity</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> uId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> commodityId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> bizId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">Map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">extMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> throws</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Exception</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        CouponResult</span><span style="color:#24292E;--shiki-dark:#E06C75;"> couponResult</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> couponService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">sendCoupon</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(uId, commodityId, bizId);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Tham số yêu cầu[Phiếu giảm giá] =&gt; uId：{} commodityId：{} bizId：{} extMap：{}&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, uId, commodityId, bizId, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">JSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">toJSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(extMap));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Kết quả kiểm thử[Phiếu giảm giá]：{}&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">JSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">toJSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(couponResult));  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;0000&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">equals</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">couponResult</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getCode</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">())) </span><span style="color:#D73A49;--shiki-dark:#C678DD;">throw</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">couponResult</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getInfo</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">    }</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="goods-hang-hoa" tabindex="-1"><a class="header-anchor" href="#goods-hang-hoa"><span><strong>Goods (Hàng hóa)</strong></span></a></h5><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">public</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> GoodsCommodityService</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> ICommodity</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Logger</span><span style="color:#24292E;--shiki-dark:#E06C75;"> logger </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getLogger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">GoodsCommodityService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">class</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> GoodsService</span><span style="color:#24292E;--shiki-dark:#E06C75;"> goodsService </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> GoodsService</span><span style="color:#24292E;--shiki-dark:#E06C75;">()</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> sendCommodity</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> uId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> commodityId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> bizId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">Map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">extMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> throws</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Exception</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        DeliveryReq</span><span style="color:#24292E;--shiki-dark:#E06C75;"> deliveryReq</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> DeliveryReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        deliveryReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setUserName</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">queryUserName</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(uId));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        deliveryReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setUserPhone</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">queryUserPhoneNumber</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(uId));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        deliveryReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setSku</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(commodityId);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        deliveryReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setOrderId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(bizId);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        deliveryReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setConsigneeUserName</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">extMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;consigneeUserName&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        deliveryReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setConsigneeUserPhone</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">extMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;consigneeUserPhone&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        deliveryReq</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">setConsigneeUserAddress</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">extMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;consigneeUserAddress&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        Boolean</span><span style="color:#24292E;--shiki-dark:#E06C75;"> isSuccess</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> goodsService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">deliverGoods</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(deliveryReq);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Tham số yêu cầu[Phiếu giảm giá] =&gt; uId：{} commodityId：{} bizId：{} extMap：{}&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, uId, commodityId, bizId, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">JSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">toJSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(extMap));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Kết quả kiểm thử[Phiếu giảm giá]：{}&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, isSuccess);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">isSuccess) </span><span style="color:#D73A49;--shiki-dark:#C678DD;">throw</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Phát hàng hóa thất bại&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">    }</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> queryUserName</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> uId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;Hung Nguyen&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">    }</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> queryUserPhoneNumber</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> uId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;012345678&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">    }</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="card-the" tabindex="-1"><a class="header-anchor" href="#card-the"><span><strong>Card (Thẻ)</strong></span></a></h5><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">public</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> CardCommodityService</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> ICommodity</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Logger</span><span style="color:#24292E;--shiki-dark:#E06C75;"> logger </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getLogger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">CardCommodityService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">class</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // Giả lập việc chèn  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> GarenaCardService</span><span style="color:#24292E;--shiki-dark:#E06C75;"> garenaCardService </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> GarenaCardService</span><span style="color:#24292E;--shiki-dark:#E06C75;">()</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> sendCommodity</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> uId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> commodityId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> bizId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">Map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;">extMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> throws</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Exception</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        String</span><span style="color:#24292E;--shiki-dark:#E06C75;"> mobile</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> queryUserMobile</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(uId);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        garenaCardService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">grantToken</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(mobile, bizId);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Tham số yêu cầu[Thẻ đổi thưởng Garena] =&gt; uId：{} commodityId：{} bizId：{} extMap：{}&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, uId, commodityId, bizId, </span><span style="color:#24292E;--shiki-dark:#E5C07B;">JSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">toJSON</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(extMap));  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        logger</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">info</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Kết quả kiểm thử[Thẻ đổi thưởng Garena]：Thành công&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">    }</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> queryUserMobile</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> uId</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;012345678&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">    }</span><span style="color:#24292E;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Có thể thấy mỗi loại phần thưởng được triển khai trong lớp riêng của nó, việc thêm, sửa đổi hoặc xóa sẽ không ảnh hưởng đến chức năng kiểm thử của các phần thưởng khác.</li><li>Các giải thưởng bổ sung sau đó chỉ cần điền theo cấu trúc này, rất dễ duy trì và mở rộng.</li><li>Sau khi thống nhất các tham số đầu vào và tham số đầu ra, người gọi không còn cần quan tâm đến logic bên trong của việc phân phối giải thưởng và có thể xử lý nó một cách thống nhất.</li></ul><h4 id="tao-storefactory" tabindex="-1"><a class="header-anchor" href="#tao-storefactory"><span>Tạo StoreFactory</span></a></h4><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">public</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="color:#6F42C1;--shiki-dark:#E5C07B;"> StoreFactory</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> ICommodity</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> getCommodityService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">Integer</span><span style="color:#E36209;--shiki-dark:#E06C75;font-style:inherit;--shiki-dark-font-style:italic;"> commodityType</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#005CC5;--shiki-dark:#D19A66;">null</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> ==</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> commodityType) </span><span style="color:#D73A49;--shiki-dark:#C678DD;">return</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#005CC5;--shiki-dark:#D19A66;">1</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> ==</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> commodityType) </span><span style="color:#D73A49;--shiki-dark:#C678DD;">return</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> CouponCommodityService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#005CC5;--shiki-dark:#D19A66;">2</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> ==</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> commodityType) </span><span style="color:#D73A49;--shiki-dark:#C678DD;">return</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> GoodsCommodityService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="color:#005CC5;--shiki-dark:#D19A66;">3</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> ==</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> commodityType) </span><span style="color:#D73A49;--shiki-dark:#C678DD;">return</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> CardCommodityService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">		throw</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Product or service type not found.&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">); </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Ở đây, chúng ta đã định nghĩa một lớp Factory cho cửa hàng, trong đó thực hiện các dịch vụ phát thưởng theo loại. Điều này giúp code của bạn trở nên sạch và dễ hiểu, và các mặt hàng mới sẽ được mở rộng ở đây. Nếu bạn không thích câu lệnh <code>if</code>, bạn cũng có thể sử dụng <code>switch</code> hoặc cấu trúc cấu hình <code>map</code> để làm cho mã nguồn sạch sẽ hơn.</li><li>Ngoài ra, nhiều phần mềm kiểm tra mã nguồn và yêu cầu viết mở rộng sau câu lệnh <code>if</code>, tuy nhiên ở đây chúng tôi không làm như vậy để làm cho logic trở nên sạch sẽ hơn. Trong thực tế, bạn có thể thêm dấu ngoặc vào sau câu lệnh <code>if</code> trong code thực tế.</li></ul><h3 id="kiem-thu-1" tabindex="-1"><a class="header-anchor" href="#kiem-thu-1"><span>Kiểm thử</span></a></h3><p><strong>Viết unit test:</strong></p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">public</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> test_commodity</span><span style="color:#24292E;--shiki-dark:#E06C75;">() throws Exception {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    StoreFactory</span><span style="color:#24292E;--shiki-dark:#E06C75;"> storeFactory </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> StoreFactory</span><span style="color:#24292E;--shiki-dark:#E06C75;">()</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // 1. Phiếu giảm giá</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    ICommodity</span><span style="color:#24292E;--shiki-dark:#E06C75;"> commodityService_1 </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> storeFactory</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getCommodityService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#005CC5;--shiki-dark:#D19A66;">1</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    commodityService_1</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">sendCommodity</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;10001&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;EGM1023938910232121323432&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;791098764902132&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#005CC5;--shiki-dark:#D19A66;">null</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // 2. Hàng hóa thực</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    ICommodity</span><span style="color:#24292E;--shiki-dark:#E06C75;"> commodityService_2 </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> storeFactory</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getCommodityService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#005CC5;--shiki-dark:#D19A66;">2</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    Map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> extMap </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> HashMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">()</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    extMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;consigneeUserName&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Hung Nguyen&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    extMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;consigneeUserPhone&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;15200292123&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    extMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;consigneeUserAddress&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Thu Duc, HCM&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    commodityService_2</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">sendCommodity</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;10001&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;9820198721311&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;1023000020112221113&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, extMap);</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // 3. Thẻ đổi thưởng của bên thứ ba (Garena)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    ICommodity</span><span style="color:#24292E;--shiki-dark:#E06C75;"> commodityService_3 </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> storeFactory</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">getCommodityService</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#005CC5;--shiki-dark:#D19A66;">3</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    commodityService_3</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">sendCommodity</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;10001&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;AQY1xjkUodl8LO975GdfrYUio&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#005CC5;--shiki-dark:#D19A66;">null</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#005CC5;--shiki-dark:#D19A66;">null</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Kết quả:</strong></p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Mô</span><span style="color:#032F62;--shiki-dark:#98C379;"> phỏng</span><span style="color:#032F62;--shiki-dark:#98C379;"> việc</span><span style="color:#032F62;--shiki-dark:#98C379;"> phát</span><span style="color:#032F62;--shiki-dark:#98C379;"> phiếu</span><span style="color:#032F62;--shiki-dark:#98C379;"> giảm</span><span style="color:#032F62;--shiki-dark:#98C379;"> giá:</span><span style="color:#032F62;--shiki-dark:#98C379;"> 10001,</span><span style="color:#032F62;--shiki-dark:#98C379;"> EGM1023938910232121323432,</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 791098764902132</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 23:35:26.176</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(CouponCommodityService.java:20)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Tham</span><span style="color:#032F62;--shiki-dark:#98C379;"> số</span><span style="color:#032F62;--shiki-dark:#98C379;"> yêu</span><span style="color:#032F62;--shiki-dark:#98C379;"> cầu[Phiếu</span><span style="color:#032F62;--shiki-dark:#98C379;"> giảm</span><span style="color:#032F62;--shiki-dark:#98C379;"> giá]</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#032F62;--shiki-dark:#98C379;"> uId：10001</span><span style="color:#032F62;--shiki-dark:#98C379;"> commodityId：EGM1023938910232121323432</span><span style="color:#032F62;--shiki-dark:#98C379;"> bizId：791098764902132</span><span style="color:#032F62;--shiki-dark:#98C379;"> extMap：null</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 23:35:26.205</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(CouponCommodityService.java:21)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Kết</span><span style="color:#032F62;--shiki-dark:#98C379;"> quả</span><span style="color:#032F62;--shiki-dark:#98C379;"> kiểm</span><span style="color:#032F62;--shiki-dark:#98C379;"> thử[Phiếu</span><span style="color:#032F62;--shiki-dark:#98C379;"> giảm</span><span style="color:#032F62;--shiki-dark:#98C379;"> giá]：{&quot;code&quot;:&quot;0000&quot;,&quot;info&quot;:&quot;Phát thành công&quot;}</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Mô</span><span style="color:#032F62;--shiki-dark:#98C379;"> phỏng</span><span style="color:#032F62;--shiki-dark:#98C379;"> việc</span><span style="color:#032F62;--shiki-dark:#98C379;"> giao</span><span style="color:#032F62;--shiki-dark:#98C379;"> hàng</span><span style="color:#032F62;--shiki-dark:#98C379;"> hàng</span><span style="color:#032F62;--shiki-dark:#98C379;"> hoá</span><span style="color:#032F62;--shiki-dark:#98C379;"> thực:</span><span style="color:#032F62;--shiki-dark:#98C379;"> {&quot;consigneeUserAddress&quot;:&quot;Thu Duc, HCM&quot;,&quot;consigneeUserName&quot;:&quot;Hung Nguyen&quot;,&quot;consigneeUserPhone&quot;:&quot;012345678&quot;,&quot;orderId&quot;:&quot;1023000020112221113&quot;,&quot;sku&quot;:&quot;9820198721311&quot;,&quot;userName&quot;:&quot;Hung Nguyen&quot;,&quot;userPhone&quot;:&quot;012345678&quot;}</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 23:35:26.209</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(GoodsCommodityService.java:30)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Tham</span><span style="color:#032F62;--shiki-dark:#98C379;"> số</span><span style="color:#032F62;--shiki-dark:#98C379;"> yêu</span><span style="color:#032F62;--shiki-dark:#98C379;"> cầu[Phiếu</span><span style="color:#032F62;--shiki-dark:#98C379;"> giảm</span><span style="color:#032F62;--shiki-dark:#98C379;"> giá]</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#032F62;--shiki-dark:#98C379;"> uId：10001</span><span style="color:#032F62;--shiki-dark:#98C379;"> commodityId：9820198721311</span><span style="color:#032F62;--shiki-dark:#98C379;"> bizId：1023000020112221113</span><span style="color:#032F62;--shiki-dark:#98C379;"> extMap：{&quot;consigneeUserName&quot;:&quot;Hung Nguyen&quot;,&quot;consigneeUserAddress&quot;:&quot;Thu Duc, HCM&quot;,&quot;consigneeUserPhone&quot;:&quot;012345678&quot;}</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 23:35:26.210</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(GoodsCommodityService.java:31)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Kết</span><span style="color:#032F62;--shiki-dark:#98C379;"> quả</span><span style="color:#032F62;--shiki-dark:#98C379;"> kiểm</span><span style="color:#032F62;--shiki-dark:#98C379;"> thử[Phiếu</span><span style="color:#032F62;--shiki-dark:#98C379;"> giảm</span><span style="color:#032F62;--shiki-dark:#98C379;"> giá]：</span><span style="color:#005CC5;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">Mô</span><span style="color:#032F62;--shiki-dark:#98C379;"> phỏng</span><span style="color:#032F62;--shiki-dark:#98C379;"> việc</span><span style="color:#032F62;--shiki-dark:#98C379;"> phát</span><span style="color:#032F62;--shiki-dark:#98C379;"> thẻ</span><span style="color:#032F62;--shiki-dark:#98C379;"> game</span><span style="color:#032F62;--shiki-dark:#98C379;"> Garena:</span><span style="color:#032F62;--shiki-dark:#98C379;"> 012345678,</span><span style="color:#032F62;--shiki-dark:#98C379;"> null</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 23:35:26.210</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(CardCommodityService.java:21)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Tham</span><span style="color:#032F62;--shiki-dark:#98C379;"> số</span><span style="color:#032F62;--shiki-dark:#98C379;"> yêu</span><span style="color:#032F62;--shiki-dark:#98C379;"> cầu[Thẻ</span><span style="color:#032F62;--shiki-dark:#98C379;"> đổi</span><span style="color:#032F62;--shiki-dark:#98C379;"> thưởng</span><span style="color:#032F62;--shiki-dark:#98C379;"> Garena]</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#032F62;--shiki-dark:#98C379;"> uId：10001</span><span style="color:#032F62;--shiki-dark:#98C379;"> commodityId：AQY1xjkUodl8LO975GdfrYUio</span><span style="color:#032F62;--shiki-dark:#98C379;"> bizId：null</span><span style="color:#032F62;--shiki-dark:#98C379;"> extMap：null</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">2024-03-25</span><span style="color:#032F62;--shiki-dark:#98C379;"> 23:35:26.210</span><span style="color:#032F62;--shiki-dark:#98C379;">	INFO</span><span style="color:#032F62;--shiki-dark:#98C379;">	main</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">		(CardCommodityService.java:22)	</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">	Kết</span><span style="color:#032F62;--shiki-dark:#98C379;"> quả</span><span style="color:#032F62;--shiki-dark:#98C379;"> kiểm</span><span style="color:#032F62;--shiki-dark:#98C379;"> thử[Thẻ</span><span style="color:#032F62;--shiki-dark:#98C379;"> đổi</span><span style="color:#032F62;--shiki-dark:#98C379;"> thưởng</span><span style="color:#032F62;--shiki-dark:#98C379;"> Garena]：Thành</span><span style="color:#032F62;--shiki-dark:#98C379;"> công</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Kết quả chạy bình thường, đáp ứng yêu cầu business requirement và đáp ứng tiêu chí của riêng tôi. Mã nguồn như vậy khi triển khai và chạy trực tuyến sẽ không khiến bạn lo lắng, không cảm thấy lo sợ có thể nhận cuộc gọi vào nửa đêm.</li><li>Ngoài ra, từ kết quả chạy thử nghiệm cũng có thể thấy rằng sau khi đóng gói, có thể thấy rõ sự hoàn thiện của toàn bộ bộ dịch vụ phân phối giải thưởng, đầu vào và kết quả là thống nhất.</li></ul><h2 id="tong-ket" tabindex="-1"><a class="header-anchor" href="#tong-ket"><span>Tổng kết</span></a></h2><ul><li>Từ việc tối ưu từ trên xuống dưới, có thể thấy rằng Factory Method Pattern không phức tạp, thậm chí sau khi bạn hiểu rõ, bạn sẽ thấy nó càng đơn giản hơn.</li><li>Về lợi ích của việc phát triển như vậy, bạn cũng có thể tổng kết ra các ưu điểm; <code>Tránh sự ràng buộc giữa người tạo và logic cụ thể của sản phẩm</code>, <code>Đáp ứng nguyên tắc trách nhiệm đơn lẻ, business logic được thực hiện trong lớp tương ứng của nó</code>, <code>Đáp ứng nguyên tắc mở và đóng, không cần thay đổi, người gọi có thể thêm các loại sản phẩm mới vào chương trình mà không cần sửa đổi</code>.</li><li>Tuy nhiên, điều này cũng có thể mang lại một số vấn đề, ví dụ: Nếu có rất nhiều loại sản phẩm, số lượng lớp con sẽ mở rộng rất nhanh. Do đó, cũng cần sử dụng các mẫu khác để tối ưu hóa, những điều này sẽ được đề cập dần dần trong các mẫu thiết kế sau này.</li><li>Bằng cách bắt đầu từ các ví dụ, việc hiểu về mẫu thiết kế thường dễ dàng hơn so với việc học lý thuyết, vì ví dụ là cách tốt nhất để rút ngắn khoảng cách từ lý thuyết đến thực hành. Nếu bạn đã có một số kiến thức, hãy thử áp dụng vào thực tế.</li></ul></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/vanhung4499/vanhung4499.github.io/edit/main/src/design/design-pattern/practical/creational/factory.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">Last update: </span><!----></div><div class="contributors"><span class="vp-meta-label">Contributors: </span><!--[--><!--[--><span class="vp-meta-info" title="email: vanhung4499@gmail.com">Hung Nguyen Van</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/design/design-pattern/practical/creational/builder.html" aria-label="Builder Pattern Practice"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->Builder Pattern Practice</div></a><a class="route-link auto-link next" href="/design/design-pattern/practical/creational/prototype.html" aria-label="Prototype Pattern Practice"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Prototype Pattern Practice<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright © 2024 Hung Nguyen </div></footer></div><!--]--><!--[--><!----><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-C-_dXKvP.js" defer></script>
  </body>
</html>
