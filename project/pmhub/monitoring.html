<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.15" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://vanhung4499.github.io/project/pmhub/monitoring.html"><meta property="og:site_name" content="VanHung4499"><meta property="og:title" content="Skywalking Monitoring"><meta property="og:description" content="PmHub - Distributed monitoring & tracing with Skywalking Bài viết này chủ yếu hướng dẫn cách sử dụng Skywalking trong PmHub để giám sát hiệu suất và truy vết phân tán. Nội dung ..."><meta property="og:type" content="article"><meta property="og:image" content="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917182929.png"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2024-10-02T17:20:50.000Z"><meta property="article:author" content="Hung Nguyen"><meta property="article:tag" content="java"><meta property="article:tag" content="microservice"><meta property="article:modified_time" content="2024-10-02T17:20:50.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Skywalking Monitoring","image":["https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917182929.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917183735.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917192542.png","https://skywalking.apache.org/images/home/architecture_2160x720.png","https://skywalking.apache.org/blog/2018-12-12-skywalking-service-mesh-ready/0081Kckwly1gl2ctge1g5j31pc0s8h04.jpg","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917201418.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917201438.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917201449.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917212727.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917212750.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917212849.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917220047.png"],"dateModified":"2024-10-02T17:20:50.000Z","author":[{"@type":"Person","name":"Hung Nguyen","url":"https://vanhung4499.github.io"}]}</script><meta name="referrer" content="no-referrer-when-downgrade"><link rel="alternate" type="application/rss+xml" href="https://vanhung4499.github.io/rss.xml" title="VanHung4499 RSS Feed"><title>Skywalking Monitoring | VanHung4499</title><meta name="description" content="PmHub - Distributed monitoring & tracing with Skywalking Bài viết này chủ yếu hướng dẫn cách sử dụng Skywalking trong PmHub để giám sát hiệu suất và truy vết phân tán. Nội dung ...">
    <link rel="preload" href="/assets/style-DFXXOFfS.css" as="style"><link rel="stylesheet" href="/assets/style-DFXXOFfS.css">
    <link rel="modulepreload" href="/assets/app-CmlOSuIY.js"><link rel="modulepreload" href="/assets/monitoring.html-CdraLVSZ.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container no-sidebar external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">VanHung4499</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="Home"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:home" width="1em" height="1em"></iconify-icon><!--]-->Home<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/wiki.html" aria-label="Wiki"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="carbon:wikis" width="1em" height="1em"></iconify-icon><!--]-->Wiki<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/dsa/" aria-label="Algorithms"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="hugeicons:algorithm" width="1em" height="1em"></iconify-icon><!--]-->Algorithms<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Programming"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:code" width="1em" height="1em"></iconify-icon>Programming<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/java/" aria-label="Java"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:java" width="1em" height="1em"></iconify-icon><!--]-->Java<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/golang/" aria-label="Golang"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:go" width="1em" height="1em"></iconify-icon><!--]-->Golang<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/js/" aria-label="JavaScript"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:javascript" width="1em" height="1em"></iconify-icon><!--]-->JavaScript<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/ts/" aria-label="TypeScript"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:typescript" width="1em" height="1em"></iconify-icon><!--]-->TypeScript<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/python/" aria-label="Python"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:python" width="1em" height="1em"></iconify-icon><!--]-->Python<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Database"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:database" width="1em" height="1em"></iconify-icon>Database<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/sql/" aria-label="SQL"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:sql-query" width="1em" height="1em"></iconify-icon><!--]-->SQL<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/mysql/" aria-label="MySQL"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:mysql" width="1em" height="1em"></iconify-icon><!--]-->MySQL<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/mongodb/" aria-label="MongoDB"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:mongodb" width="1em" height="1em"></iconify-icon><!--]-->MongoDB<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/redis/" aria-label="Redis"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:redis" width="1em" height="1em"></iconify-icon><!--]-->Redis<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/elasticsearch/" aria-label="Elasticsearch"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:elasticsearch" width="1em" height="1em"></iconify-icon><!--]-->Elasticsearch<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/elastic/" aria-label="Elastic Stack"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="cib:elastic-stack" width="1em" height="1em"></iconify-icon><!--]-->Elastic Stack<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Framework"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="simple-icons:framework" width="1em" height="1em"></iconify-icon>Framework<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/framework/spring/" aria-label="Spring"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Spring<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/framework/spring-boot/" aria-label="Spring Boot"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Spring Boot<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/framework/nestjs/" aria-label="NestJS"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:nestjs" width="1em" height="1em"></iconify-icon><!--]-->NestJS<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/framework/gin/" aria-label="Gin"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:gin" width="1em" height="1em"></iconify-icon><!--]-->Gin<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="DevOps"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon-plain:azuredevops" width="1em" height="1em"></iconify-icon>DevOps<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/docker/" aria-label="Docker"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:docker" width="1em" height="1em"></iconify-icon><!--]-->Docker<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/kubernetes/" aria-label="Kubernetes"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:kubernetes" width="1em" height="1em"></iconify-icon><!--]-->Kubernetes<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/jenkins/" aria-label="Jenkins"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:jenkins" width="1em" height="1em"></iconify-icon><!--]-->Jenkins<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/git/" aria-label="Git"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:git" width="1em" height="1em"></iconify-icon><!--]-->Git<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/linux/" aria-label="Linux"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:linux" width="1em" height="1em"></iconify-icon><!--]-->Linux<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Design"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="tdesign:system-sum" width="1em" height="1em"></iconify-icon>Design<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/design/design-pattern/" aria-label="Design Pattern"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="tabler:grid-pattern" width="1em" height="1em"></iconify-icon><!--]-->Design Pattern<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/design/system-design/" aria-label="System Design"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="icon-park-outline:system" width="1em" height="1em"></iconify-icon><!--]-->System Design<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Project"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="ant-design:project-outlined" width="1em" height="1em"></iconify-icon>Project<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/project/rouyi-vue-pro/" aria-label="Rouyi Vue Pro"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Rouyi Vue Pro<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/project/yudao-cloud/" aria-label="Yudao Cloud"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Yudao Cloud<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/interview/" aria-label="Interview"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:account-tie" width="1em" height="1em"></iconify-icon><!--]-->Interview<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="About"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:about" width="1em" height="1em"></iconify-icon>About<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/about-me.html" aria-label="About me"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="cib:about-me" width="1em" height="1em"></iconify-icon><!--]-->About me<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/about.html" aria-label="About"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:about" width="1em" height="1em"></iconify-icon><!--]-->About<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/vanhung4499/my-wiki" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">Search</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Skywalking Monitoring</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://vanhung4499.github.io" target="_blank" rel="noopener noreferrer">Hung Nguyen</a></span><span property="author" content="Hung Nguyen"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-10-02T17:20:50.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 12 min</span><meta property="timeRequired" content="PT12M"></span><span class="page-category-info" aria-label="Category🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color6 clickable" role="navigation">project</span><!--]--><meta property="articleSection" content="project"></span><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8 clickable" role="navigation">java</span><span class="page-tag-item color2 clickable" role="navigation">microservice</span><!--]--><meta property="keywords" content="java,microservice"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#tong-quan-ve-truy-vet-chuoi-dich-vu-phan-tan">Tổng quan về truy vết chuỗi dịch vụ phân tán</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#nguyen-ly-truy-vet-chuoi-dich-vu-phan-tan">Nguyên lý truy vết chuỗi dịch vụ phân tán</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#skywalking-la-gi">Skywalking là gì?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#tai-sao-chon-skywalking">Tại sao chọn Skywalking?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#kien-truc-cua-skywalking">Kiến trúc của Skywalking</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#cai-đat-may-chu">Cài đặt máy chủ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-sua-cau-hinh-config-application-yml">1. Sửa cấu hình config/application.yml</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-sua-cau-hinh-webapp-webapp-yml-hoac-application-yml">2. Sửa cấu hình webapp/webapp.yml (hoặc application.yml)</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#thuc-chien-du-an">Thực chiến dự án</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#cai-đat-phia-client">Cài đặt phía Client</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#giam-sat-log">Giám sát log</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#cau-hoi-phong-van">Câu hỏi phỏng vấn</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="pmhub-distributed-monitoring-tracing-with-skywalking" tabindex="-1"><a class="header-anchor" href="#pmhub-distributed-monitoring-tracing-with-skywalking"><span>PmHub - Distributed monitoring &amp; tracing with Skywalking</span></a></h1><p>Bài viết này chủ yếu hướng dẫn cách sử dụng <strong>Skywalking</strong> trong <strong>PmHub</strong> để giám sát hiệu suất và truy vết phân tán. Nội dung sẽ bắt đầu từ những kiến thức cơ bản, đến dự án thực tế và hướng dẫn tích hợp từ 0-1. Bài viết cũng sẽ chỉ ra cách dùng <strong>traceid</strong> để xác định các vấn đề trong chuỗi dịch vụ phân tán. Cuối cùng, sẽ có các câu hỏi giúp bạn <strong>nắm vững cách sử dụng thực tế Skywalking</strong>.</p><div class="hint-container info"><p class="hint-container-title">Info</p><p>Đã triển khai Skywalking để giám sát hiệu suất và truy vết phân tán cho PmHub, tích hợp các kênh thông báo qua email, v.v., giúp giảm khoảng 30% thời gian phản hồi của hệ thống, đảm bảo tính ổn định và dễ bảo trì.</p></div><h2 id="tong-quan-ve-truy-vet-chuoi-dich-vu-phan-tan" tabindex="-1"><a class="header-anchor" href="#tong-quan-ve-truy-vet-chuoi-dich-vu-phan-tan"><span>Tổng quan về truy vết chuỗi dịch vụ phân tán</span></a></h2><p>Trong hệ thống microservice, dịch vụ A gọi dịch vụ B, B lại gọi dịch vụ C, và C tiếp tục gọi D, điều này làm chuỗi dịch vụ trở nên rất phức tạp.</p><p>Một request từ client sẽ đi qua nhiều node dịch vụ khác nhau trong hệ thống để tạo ra kết quả cuối cùng. Mỗi yêu cầu như vậy sẽ hình thành một chuỗi dịch vụ phân tán phức tạp. Bất kỳ sự chậm trễ hoặc lỗi nào trong một node của chuỗi cũng có thể khiến request cuối cùng thất bại.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917182929.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>Trong hệ thống phân tán, cần có một cơ chế chuyên biệt để theo dõi các chuỗi này.</p><p>Hiện nay, các công cụ phổ biến cho việc này bao gồm <strong>Sleuth</strong>, <strong>Skywalking</strong>, và <strong>Zipkin</strong>. Tuy nhiên, <a href="https://spring.io/projects/spring-cloud-sleuth" target="_blank" rel="noopener noreferrer">Sleuth</a> đã thông báo sẽ thay đổi cấu trúc. 😂</p><blockquote><p>Spring Cloud Sleuth’s last minor version is 3.1. You can check the <a href="https://github.com/spring-cloud/spring-cloud-sleuth/tree/3.1.x" target="_blank" rel="noopener noreferrer">3.1.x</a> branch for the latest commits. The core of this project got moved to <a href="https://micrometer.io/docs/tracing" target="_blank" rel="noopener noreferrer">Micrometer Tracing</a> project and the instrumentations will be moved to <a href="https://micrometer.io/" target="_blank" rel="noopener noreferrer">Micrometer</a> and all respective projects (no longer all instrumentations will be done in a single repository).</p></blockquote><p>Dưới đây là một số giải pháp truy vết chuỗi dịch vụ phân tán đã phát triển trong ngành.</p><table><thead><tr><th>Tech</th><th>Mô tả</th></tr></thead><tbody><tr><td>Cat</td><td>Nguồn mở của Dianping, một nền tảng giám sát ứng dụng thời gian thực được phát triển dựa trên Java, bao gồm giám sát ứng dụng thời gian thực và giám sát kinh doanh. Giải pháp tích hợp là triển khai giám sát thông qua các điểm chôn mã, chẳng hạn như bộ chặn, bộ lọc, v.v. Nó rất xâm phạm vào mã và chi phí tích hợp cao. Rủi ro lớn hơn.</td></tr><tr><td>Zipkin</td><td>Được mã nguồn mở bởi Twitter, hệ thống theo dõi phân tán mã nguồn mở được sử dụng để thu thập dữ liệu thời gian của các dịch vụ nhằm giải quyết vấn đề độ trễ trong kiến ​​trúc microservice, bao gồm: thu thập, lưu trữ, tìm kiếm và hiển thị dữ liệu, kết hợp với spring-cloud-sleuth tương đối đơn giản dễ sử dụng và dễ tích hợp, nhưng chức năng của nó tương đối đơn giản.</td></tr><tr><td>Pinpoint</td><td>Pinpoint là một công cụ phân tích giám sát ứng dụng và phân tích chuỗi cuộc gọi nguồn mở dựa trên việc tiêm mã byte. Nó được đặc trưng bởi việc hỗ trợ nhiều plug-in khác nhau, các chức năng giao diện người dùng mạnh mẽ và không có sự xâm nhập mã ở đầu truy cập.</td></tr><tr><td>Skywalking</td><td>SkyWalking là một công cụ phân tích giám sát ứng dụng và phân tích chuỗi cuộc gọi mã nguồn mở của Trung Quốc dựa trên việc tiêm bytecode. Nó có đặc điểm là hỗ trợ nhiều plug-in khác nhau, chức năng giao diện người dùng mạnh mẽ và không có sự xâm nhập mã ở đầu truy cập.</td></tr></tbody></table><h2 id="nguyen-ly-truy-vet-chuoi-dich-vu-phan-tan" tabindex="-1"><a class="header-anchor" href="#nguyen-ly-truy-vet-chuoi-dich-vu-phan-tan"><span>Nguyên lý truy vết chuỗi dịch vụ phân tán</span></a></h2><p>Giả sử một chuỗi dịch vụ microservice có ba thành phần như hình dưới đây: <strong>Service 1</strong> gọi <strong>Service 2</strong>, <strong>Service 2</strong> gọi <strong>Service 3</strong> và <strong>Service 4</strong>.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917183735.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>Một chuỗi truy vết sẽ thêm <strong>Trace ID</strong> và <strong>Span ID</strong> vào mỗi lần gọi dịch vụ.</p><p>Chuỗi truy vết được xác định duy nhất qua <strong>Trace ID</strong>.</p><p><strong>Span</strong> xác định thông tin về mỗi lần yêu cầu, các <strong>span</strong> được liên kết với nhau qua <strong>Parent ID</strong>. <strong>Span</strong> đại diện cho một lần yêu cầu, và có thể hiểu đơn giản nó là thông tin của một lần gọi.</p><p>Một chuỗi truy vết được xác định qua <strong>Trace ID</strong>, mỗi <strong>Span</strong> đại diện cho thông tin của một lần yêu cầu và được liên kết với <strong>Parent ID</strong>.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917192542.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>1</td><td>Nút đầu tiên: Span ID = A, Parent ID = null, Service 1 nhận yêu cầu.</td></tr><tr><td>2</td><td>Nút thứ hai: Span ID = B, Parent ID = A, Service 1 gửi yêu cầu tới Service 2 và nhận phản hồi từ Service 2.</td></tr><tr><td>3</td><td>Nút thứ ba: Span ID = C, Parent ID = B, quá trình xử lý tại Service 2.</td></tr><tr><td>4</td><td>Nút thứ tư: Span ID = D, Parent ID = C, Service 2 gửi yêu cầu đến Service 3 và nhận phản hồi từ Service 3.</td></tr><tr><td>5</td><td>Nút thứ năm: Span ID = E, Parent ID = D, quá trình xử lý tại Service 3.</td></tr><tr><td>6</td><td>Nút thứ sáu: Span ID = F, Parent ID = C, Service 3 gửi yêu cầu đến Service 4 và nhận phản hồi từ Service 4.</td></tr><tr><td>7</td><td>Nút thứ bảy: Span ID = G, Parent ID = F, quá trình xử lý tại Service 4.</td></tr><tr><td>8</td><td>Qua Parent ID, có thể xác định được nút cha, giúp truy vết toàn bộ chuỗi dịch vụ.</td></tr></tbody></table><h3 id="skywalking-la-gi" tabindex="-1"><a class="header-anchor" href="#skywalking-la-gi"><span>Skywalking là gì?</span></a></h3><p><strong>Skywalking</strong> là một <strong>khung mã nguồn mở</strong> tuyệt vời, được open source vào năm 2015 và gia nhập Apache Incubator vào năm 2017. Chỉ trong hai năm ngắn ngủi, Skywalking đã được Apache đón nhận, chứng minh sức mạnh của nó. 👍</p><p>Skywalking hỗ trợ tích hợp với <strong>Dubbo</strong>, <strong>SpringCloud</strong>, <strong>SpringBoot</strong> mà <strong>không xâm phạm mã</strong>. Nó sử dụng <strong>GRPC</strong> cho giao tiếp, đảm bảo hiệu suất tốt. Skywalking được triển khai dưới dạng Java agent, hỗ trợ cảnh báo, giám sát JVM, và cung cấp các thống kê gọi toàn cục, cùng nhiều tính năng khác. Ngoài ra, cộng đồng phát triển của Skywalking cũng khá sôi động.</p><p>Trang web chính thức: <a href="https://skywalking.apache.org/" target="_blank" rel="noopener noreferrer">https://skywalking.apache.org/</a><br> Mã nguồn mở: <a href="https://github.com/apache/skywalking" target="_blank" rel="noopener noreferrer">https://github.com/apache/skywalking</a></p><h3 id="tai-sao-chon-skywalking" tabindex="-1"><a class="header-anchor" href="#tai-sao-chon-skywalking"><span>Tại sao chọn Skywalking?</span></a></h3><div class="hint-container info"><p class="hint-container-title">Info</p><p>Skywalking có nhiều ưu điểm so với Zipkin, chẳng hạn như:</p><ul><li>Skywalking sử dụng công nghệ tăng cường bytecode, không xâm phạm mã, trong khi Zipkin có tính xâm phạm cao.</li><li>Skywalking có nhiều tính năng phong phú hơn, các báo cáo thống kê và giao diện người dùng (UI) thân thiện hơn.</li></ul></div><h3 id="kien-truc-cua-skywalking" tabindex="-1"><a class="header-anchor" href="#kien-truc-cua-skywalking"><span>Kiến trúc của Skywalking</span></a></h3><p>Skywalking chủ yếu chia thành hai phần: <strong>máy chủ</strong> và <strong>máy khách</strong>. Máy chủ chạy độc lập, còn máy khách chính là các dịch vụ microservice của bạn. Chỉ cần thêm các gói jar và cấu hình là có thể sử dụng.</p><figure><img src="https://skywalking.apache.org/images/home/architecture_2160x720.png" alt="Sơ đồ kiến trúc" tabindex="0" loading="lazy"><figcaption>Sơ đồ kiến trúc</figcaption></figure><p>Sơ đồ kiến trúc cụ thể như sau:</p><figure><img src="https://skywalking.apache.org/blog/2018-12-12-skywalking-service-mesh-ready/0081Kckwly1gl2ctge1g5j31pc0s8h04.jpg" alt="arch" tabindex="0" loading="lazy"><figcaption>arch</figcaption></figure><p>Cụ thể, kiến trúc bao gồm bốn phần chính:</p><ol><li><strong>Agent</strong>: Thu thập dữ liệu log và gửi tới máy chủ OAP.</li><li><strong>OAP Server</strong>: Nhận dữ liệu về truy vết (Tracing) và số liệu (Metric) từ Agent, sau đó phân tích (Analysis Core), lưu trữ vào cơ sở dữ liệu ngoài (Storage), và cung cấp chức năng truy vấn (Query).</li><li><strong>UI</strong>: Cung cấp bảng điều khiển web để xem chuỗi dịch vụ, các chỉ số, hiệu suất, v.v.</li><li><strong>Storage</strong>: Lưu trữ dữ liệu, hỗ trợ nhiều loại cơ sở dữ liệu khác nhau.</li></ol><p>Sau khi hiểu sơ đồ kiến trúc, ta thấy rằng Agent chịu trách nhiệm thu thập log và truyền dữ liệu qua GRPC đến OAP để phân tích và lưu trữ vào cơ sở dữ liệu. Cuối cùng, UI sẽ hiển thị các báo cáo thống kê, quan hệ phụ thuộc dịch vụ và sơ đồ topology.</p><h3 id="cai-đat-may-chu" tabindex="-1"><a class="header-anchor" href="#cai-đat-may-chu"><span>Cài đặt máy chủ</span></a></h3><p>Tải xuống tại: <a href="https://skywalking.apache.org/downloads/" target="_blank" rel="noopener noreferrer">https://skywalking.apache.org/downloads/</a></p><p>Bạn có thể chọn phiên bản mới nhất để tải về, nhưng lưu ý:</p><div class="hint-container info"><p class="hint-container-title">Info</p><p>Vì PmHub hiện vẫn sử dụng <strong>JDK 8</strong>, trong khi <strong>Skywalking</strong> yêu cầu JDK 11 trở lên, nên để tránh các vấn đề không tương thích, khuyến nghị sử dụng phiên bản Skywalking thấp hơn. Ở đây, tôi sử dụng <strong>8.3.0</strong>. Sau này, nếu nâng cấp lên phiên bản JDK mới hơn, các vấn đề tương thích sẽ được giải quyết.</p></div><div class="hint-container info"><p class="hint-container-title">Info</p><p>Từ phiên bản <strong>Skywalking 8.7.0</strong> trở đi, mã của agent đã được tách khỏi Skywalking, bạn cần tự tải agent tương ứng từ trang web chính thức: <a href="https://skywalking.apache.org/downloads/" target="_blank" rel="noopener noreferrer">https://skywalking.apache.org/downloads/</a>.</p><p>Cách chọn phiên bản agent phù hợp có thể tìm thấy tại: <a href="https://skywalking.apache.org/docs/skywalking-java/v9.0.0/en/setup/service-agent/java-agent/readme/" target="_blank" rel="noopener noreferrer">https://skywalking.apache.org/docs/skywalking-java/v9.0.0/en/setup/service-agent/java-agent/readme/</a></p><p>Vì phiên bản máy chủ là <strong>9.5.0</strong>, agent tương ứng sẽ là <strong>9.0.0</strong>.</p></div><h3 id="_1-sua-cau-hinh-config-application-yml" tabindex="-1"><a class="header-anchor" href="#_1-sua-cau-hinh-config-application-yml"><span>1. Sửa cấu hình <code>config/application.yml</code></span></a></h3><p>Đây là tệp cấu hình của dịch vụ OAP, cần chỉnh sửa trung tâm đăng ký thành Nacos.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917201418.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>Chỉnh sửa cấu hình Nacos:</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917201438.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h3 id="_2-sua-cau-hinh-webapp-webapp-yml-hoac-application-yml" tabindex="-1"><a class="header-anchor" href="#_2-sua-cau-hinh-webapp-webapp-yml-hoac-application-yml"><span>2. Sửa cấu hình <code>webapp/webapp.yml</code> (hoặc <code>application.yml</code>)</span></a></h3><p>Đây là tệp cấu hình của dịch vụ UI, trong đó có một cấu hình <code>server.port</code>, đây là cổng của dịch vụ UI, mặc định là 8080. Hãy thay đổi thành 8888 để tránh xung đột cổng, như sau:</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917201449.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>Khởi động:</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">sh</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> startup.sh</span></span></code></pre></div><p>Tắt:</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">lsof</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> :8888</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">kill</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -9</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> pid</span></span></code></pre></div><p>Sau khi khởi động hoàn tất và không có lỗi, bạn có thể truy cập bằng trình duyệt qua địa chỉ: <a href="http://localhost:8888/" target="_blank" rel="noopener noreferrer">http://localhost:8888/</a></p><div class="hint-container warning"><p class="hint-container-title">Warning</p><p>Phiên bản mới cần ít nhất JDK 11 hỗ trợ.</p><p>Bạn cần quản lý nhiều phiên bản java trên một máy (linux/mac), bạn có thể sử dụng <a href="https://github.com/jenv/jenv" target="_blank" rel="noopener noreferrer">jenv</a>. Hãy tìm hiểu nó!</p></div><h2 id="thuc-chien-du-an" tabindex="-1"><a class="header-anchor" href="#thuc-chien-du-an"><span>Thực chiến dự án</span></a></h2><h3 id="cai-đat-phia-client" tabindex="-1"><a class="header-anchor" href="#cai-đat-phia-client"><span>Cài đặt phía Client</span></a></h3><p>Phía client, tức là cách một microservice tích hợp với Skywalking. Vì Skywalking sử dụng công nghệ tăng cường mã byte, nên nó không xâm nhập mã của microservice. Chỉ cần một microservice bình thường, không cần thêm bất kỳ phụ thuộc nào.</p><p>Để truyền dữ liệu, cần sử dụng agent do Skywalking cung cấp. Bạn chỉ cần chỉ định trong tham số khởi động như sau:</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">javaagent</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">Users</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">canghe</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">tools</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">skywalking</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">apache</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">skywalking</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">apm</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">bin</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">agent</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">skywalking</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">agent</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">jar</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Dskywalking</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">agent</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">service_name</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">pmhub</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">gateway</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Dskywalking</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">collector</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">backend_service</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">127.0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#FFFFFF;--shiki-dark:#FFFFFF;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#FFFFFF;--shiki-dark:#FFFFFF;">1</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">11800</span></span></code></pre></div><div class="hint-container info"><p class="hint-container-title">Info</p><ul><li><code>-javaagent</code>: Chỉ định đường dẫn đến tệp skywalking-agent.jar trong thư mục agent của Skywalking.</li><li><code>-Dskywalking.agent.service_name</code>: Chỉ định tên dịch vụ trong Skywalking, thông thường là <code>spring.application.name</code> của microservice.</li><li><code>-Dskywalking.collector.backend_service</code>: Chỉ định địa chỉ của dịch vụ OAP, nếu là local, cổng mặc định của dịch vụ OAP là 11800, vì vậy chỉ cần cấu hình thành <code>127.0.0.1:11800</code>.</li></ul><p>Lưu ý: Đường dẫn đến tệp jar của agent không được chứa ký tự đặc biệt hoặc khoảng trắng, nếu không sẽ không thể chạy thành công.</p></div><p>Lưu ý: Trong phiên bản mới của IntelliJ IDEA, bạn thêm VM options như sau:</p><p><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917212727.png" alt="image.png" loading="lazy"><br><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917212750.png" alt="image.png" loading="lazy"></p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917212849.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>Sau khi cấu hình xong, bạn có thể thấy dịch vụ đã được agent theo dõi.</p><h3 id="giam-sat-log" tabindex="-1"><a class="header-anchor" href="#giam-sat-log"><span>Giám sát log</span></a></h3><p>Trong giao diện người dùng của Skywalking có một module dành cho log, được sử dụng để thu thập log từ phía client. Mặc định, không có dữ liệu trong module này, vậy làm thế nào để truyền dữ liệu log vào Skywalking?</p><p>Có rất nhiều loại framework log, nổi tiếng như log4j, logback, log4j2. Sau đây là cách cấu hình với logback làm ví dụ.</p><p><strong>Chỉnh sửa mức độ log của agent:</strong></p><p>Để tránh việc in quá nhiều log info trên console, cần thay đổi mức độ log. Tệp cấu hình log của SkyWalking thường nằm trong <code>agent/config/agent.config</code>. Tìm và mở tệp này.</p><p>Tìm cấu hình sau và đặt mức độ log phù hợp, chẳng hạn như <code>ERROR</code> hoặc <code>WARN</code>, để giảm lượng log được ghi lại:</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240917220047.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p><strong>Thêm phụ thuộc:</strong></p><blockquote><p><strong>Vì mỗi microservice đều cần dùng đến cấu hình này, nên có thể đặt trong module chung để các dịch vụ khác chỉ cần tham chiếu.</strong></p></blockquote><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;!</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Nếu</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> bạn muốn lấy </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">TraceId</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> trong mã dự án</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> cần thêm phụ thuộc này </span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">org</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">apache</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">skywalking</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">apm</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">toolkit</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">trace</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">8.8</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#FFFFFF;--shiki-dark:#FFFFFF;">0</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;!</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Chức</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> năng tùy chỉnh liên quan</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> chẳng hạn như thẻ tùy chỉnh </span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">org</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">apache</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">skywalking</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">apm</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">toolkit</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">opentracing</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">8.8</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#FFFFFF;--shiki-dark:#FFFFFF;">0</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;!</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> plugin logback ghi log skywalking </span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">org</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">apache</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">skywalking</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">apm</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">toolkit</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">logback</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">x</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">8.8</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#FFFFFF;--shiki-dark:#FFFFFF;">0</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Thêm cấu hình thu thập log vào logback.xml:</strong></p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">xml version</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;1.0&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> encoding</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;UTF-8&quot;</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">configuration scan</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;true&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> scanPeriod</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;5 seconds&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    &lt;!</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Thu</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> thập log skywalking </span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">appender name</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;grpc-log&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> class</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;org.apache.skywalking.apm.toolkit.log.logback.v1.x.log.GRPCLogClientAppender&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">encoder class</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;ch.qos.logback.core.encoder.LayoutWrappingEncoder&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">            &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">layout class</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;org.apache.skywalking.apm.toolkit.log.logback.v1.x.mdc.TraceIdMDCPatternLogbackLayout&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">                &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">Pattern</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;%</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">d{yyyy</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">MM</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dd HH</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">mm</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ss</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">SSS</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">} [</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">%</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">X{tid}] [</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">%</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">thread] </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">%-</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">5level </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">%</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">logger{</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">36</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">} </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-%</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">msg</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">%</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">n</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">Pattern</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">            &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">layout</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">        &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">encoder</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">appender</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">root level</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;INFO&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">appender</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">ref ref</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;grpc-log&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">root</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">configuration</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Sau khi cấu hình xong, log sẽ hiển thị trực tiếp trên giao diện người dùng. Bạn có thể nhấp vào các trang như theo dõi chuỗi, phân tích hiệu năng để trải nghiệm công cụ mạnh mẽ này. Ngoài ra, có thể cấu hình cảnh báo tùy chỉnh, liên kết với email, việc này khá dễ dàng.</p><h2 id="cau-hoi-phong-van" tabindex="-1"><a class="header-anchor" href="#cau-hoi-phong-van"><span>Câu hỏi phỏng vấn</span></a></h2><p>Dưới đây là các câu hỏi phỏng vấn phổ biến mà nhà tuyển dụng có thể hỏi liên quan đến Skywalking và dự án PmHub.</p><p><strong>Q:</strong> Hãy giải thích Skywalking là gì? Nó đóng vai trò gì trong giám sát hiệu năng và theo dõi phân tán?</p><p><strong>A:</strong> Skywalking là một hệ thống mã nguồn mở APM (Application Performance Monitoring) và theo dõi phân tán. Nó giúp chúng ta giám sát hiệu năng của hệ thống phân tán, theo dõi toàn bộ chuỗi request, xác định các điểm nghẽn hiệu năng và điểm lỗi.</p><p><strong>Q:</strong> Khi chọn Skywalking làm công cụ giám sát hiệu năng, bạn đã xem xét những công cụ nào khác và tại sao lại chọn Skywalking?</p><p><strong>A:</strong> Chúng tôi đã xem xét Zipkin và Jaeger. Chúng tôi chọn Skywalking vì nó tích hợp cả giám sát hiệu năng và theo dõi phân tán, hỗ trợ nhiều ngôn ngữ và ít xâm phạm vào mã nguồn, phù hợp với dự án của chúng tôi.</p><p><strong>Q:</strong> Bạn đã tích hợp Skywalking để giám sát hiệu năng của PmHub như thế nào? Hãy mô tả quá trình thực hiện.</p><p><strong>A:</strong> Chúng tôi đã tích hợp agent của Skywalking vào PmHub, sử dụng Skywalking OAP để thu thập và lưu trữ dữ liệu. Các chỉ số như thời gian phản hồi, lưu lượng và tỷ lệ lỗi được cấu hình để theo dõi hiệu năng hệ thống.</p><p><strong>Q:</strong> Những chỉ số giám sát nào bạn sử dụng để đánh giá hiệu năng của PmHub?</p><p><strong>A:</strong> Chúng tôi theo dõi thời gian phản hồi, lưu lượng, tỷ lệ lỗi, chuỗi gọi và thời gian truy vấn cơ sở dữ liệu để hiểu rõ tình trạng và các điểm nghẽn hiệu năng.</p><p><strong>Q:</strong> Skywalking đã giúp bạn phân tích và giải quyết vấn đề hiệu năng như thế nào trong theo dõi phân tán?</p><p><strong>A:</strong> Skywalking giúp theo dõi toàn bộ chuỗi gọi của từng yêu cầu, từ đó xác định điểm nghẽn hiệu năng và lỗi. Qua phân tích chuỗi gọi, chúng tôi có thể tìm ra vấn đề ở microservice nào và xử lý nhanh chóng.</p><p><strong>Q:</strong> Bạn có thể kể một ví dụ về việc phát hiện và giải quyết vấn đề hiệu năng thông qua theo dõi phân tán không?</p><p><strong>A:</strong> Chúng tôi phát hiện một yêu cầu có thời gian phản hồi dài bất thường. Qua phân tích chuỗi gọi, chúng tôi nhận thấy vấn đề nằm ở truy vấn cơ sở dữ liệu thiếu chỉ mục. Sau khi tối ưu chỉ mục, hiệu năng truy vấn được cải thiện đáng kể.</p><p>Câu hỏi và câu trả lời này giúp đánh giá kinh nghiệm thực tế của ứng viên về tích hợp Skywalking, giám sát hiệu năng, theo dõi phân tán và tối ưu hóa hệ thống.</p></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/vanhung4499/my-wiki/edit/main/src/project/pmhub/monitoring.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">Last update: </span><!----></div><div class="contributors"><span class="vp-meta-label">Contributors: </span><!--[--><!--[--><span class="vp-meta-info" title="email: vanhung4499@gmail.com">Hung Nguyen Van</span><!--]--><!--]--></div></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper" style="display:none;--1ea755b8:;"><div class="footer-content"><div class="footer">Made with ❤️ by Hung Nguyen</div><div class="copyright">Copyright © 2016-2024 Hung Nguyen</div></div><span id="runtime_span"></span></footer></div><!--]--><!--[--><!----><!----><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CmlOSuIY.js" defer></script>
  </body>
</html>
