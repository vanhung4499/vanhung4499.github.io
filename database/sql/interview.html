<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.12" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.46" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://vanhung4499.github.io/database/sql/interview.html"><meta property="og:site_name" content="VanHung4499"><meta property="og:title" content="SQL DB Interview"><meta property="og:description" content="Ph·ªèng v·∫•n v·ªÅ C∆° s·ªü d·ªØ li·ªáu quan h·ªá Ch·ªâ m·ª•c v√† R√†ng bu·ªôc Ch·ªâ m·ª•c l√† g√¨? Ch·ªâ m·ª•c (Index) l√† m·ªôt c·∫•u tr√∫c ƒë∆∞·ª£c s·∫Øp x·∫øp c·ªßa m·ªôt ho·∫∑c nhi·ªÅu c·ªôt trong b·∫£ng c∆° s·ªü d·ªØ li·ªáu, ƒë∆∞·ª£c s·ª≠ d·ª•ng..."><meta property="og:type" content="article"><meta property="og:image" content="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721113211.png"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2024-06-28T15:54:38.000Z"><meta property="article:author" content="Hung Nguyen"><meta property="article:tag" content="db"><meta property="article:tag" content="sql"><meta property="article:tag" content="interview"><meta property="article:modified_time" content="2024-06-28T15:54:38.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"SQL DB Interview","image":["https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721113211.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721113624.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721113644.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/185b9c49-4c13-4241-a848-fbff85c03a64.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/acid.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721002023.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/202307210021321.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721002326.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721002333.png","https://raw.githubusercontent.com/dunwu/images/dev/snap/image-20200114211639899.png","https://raw.githubusercontent.com/dunwu/images/dev/snap/image-20200114211203589.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721153816.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/master-slave-proxy.png"],"dateModified":"2024-06-28T15:54:38.000Z","author":[{"@type":"Person","name":"Hung Nguyen","url":"https://vanhung4499.github.io"}]}</script><meta name="referrer" content="no-referrer-when-downgrade"><link rel="alternate" type="application/rss+xml" href="https://vanhung4499.github.io/rss.xml" title="VanHung4499 RSS Feed"><title>SQL DB Interview | VanHung4499</title><meta name="description" content="Ph·ªèng v·∫•n v·ªÅ C∆° s·ªü d·ªØ li·ªáu quan h·ªá Ch·ªâ m·ª•c v√† R√†ng bu·ªôc Ch·ªâ m·ª•c l√† g√¨? Ch·ªâ m·ª•c (Index) l√† m·ªôt c·∫•u tr√∫c ƒë∆∞·ª£c s·∫Øp x·∫øp c·ªßa m·ªôt ho·∫∑c nhi·ªÅu c·ªôt trong b·∫£ng c∆° s·ªü d·ªØ li·ªáu, ƒë∆∞·ª£c s·ª≠ d·ª•ng...">
    <link rel="preload" href="/assets/style-BqjKxtxe.css" as="style"><link rel="stylesheet" href="/assets/style-BqjKxtxe.css">
    <link rel="modulepreload" href="/assets/app-C7tm95bn.js"><link rel="modulepreload" href="/assets/interview.html-C1mGU93v.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">VanHung4499</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="Home"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:home" width="1em" height="1em"></iconify-icon><!--]-->Home<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/wiki.html" aria-label="Wiki"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="carbon:wikis" width="1em" height="1em"></iconify-icon><!--]-->Wiki<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/dsa/" aria-label="Algorithms"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="hugeicons:algorithm" width="1em" height="1em"></iconify-icon><!--]-->Algorithms<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Programming"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:code" width="1em" height="1em"></iconify-icon>Programming<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/java/" aria-label="Java"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:java" width="1em" height="1em"></iconify-icon><!--]-->Java<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/golang/" aria-label="Golang"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:go" width="1em" height="1em"></iconify-icon><!--]-->Golang<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/js/" aria-label="JavaScript"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:javascript" width="1em" height="1em"></iconify-icon><!--]-->JavaScript<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/ts/" aria-label="TypeScript"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:typescript" width="1em" height="1em"></iconify-icon><!--]-->TypeScript<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/python/" aria-label="Python"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:python" width="1em" height="1em"></iconify-icon><!--]-->Python<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Database"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:database" width="1em" height="1em"></iconify-icon>Database<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/database/sql/" aria-label="SQL"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:sql-query" width="1em" height="1em"></iconify-icon><!--]-->SQL<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/mysql/" aria-label="MySQL"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:mysql" width="1em" height="1em"></iconify-icon><!--]-->MySQL<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/mongodb/" aria-label="MongoDB"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:mongodb" width="1em" height="1em"></iconify-icon><!--]-->MongoDB<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/redis/" aria-label="Redis"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:redis" width="1em" height="1em"></iconify-icon><!--]-->Redis<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/elasticsearch/" aria-label="Elasticsearch"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:elasticsearch" width="1em" height="1em"></iconify-icon><!--]-->Elasticsearch<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/elastic/" aria-label="Elastic Stack"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="cib:elastic-stack" width="1em" height="1em"></iconify-icon><!--]-->Elastic Stack<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Framework"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="simple-icons:framework" width="1em" height="1em"></iconify-icon>Framework<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/framework/spring/" aria-label="Spring"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Spring<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/framework/spring-boot/" aria-label="Spring Boot"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Spring Boot<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/framework/nestjs/" aria-label="NestJS"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:nestjs" width="1em" height="1em"></iconify-icon><!--]-->NestJS<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/framework/gin/" aria-label="Gin"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:gin" width="1em" height="1em"></iconify-icon><!--]-->Gin<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="DevOps"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon-plain:azuredevops" width="1em" height="1em"></iconify-icon>DevOps<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/docker/" aria-label="Docker"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:docker" width="1em" height="1em"></iconify-icon><!--]-->Docker<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/kubernetes/" aria-label="Kubernetes"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:kubernetes" width="1em" height="1em"></iconify-icon><!--]-->Kubernetes<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/jenkins/" aria-label="Jenkins"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:jenkins" width="1em" height="1em"></iconify-icon><!--]-->Jenkins<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/git/" aria-label="Git"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:git" width="1em" height="1em"></iconify-icon><!--]-->Git<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/linux/" aria-label="Linux"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:linux" width="1em" height="1em"></iconify-icon><!--]-->Linux<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Design"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="tdesign:system-sum" width="1em" height="1em"></iconify-icon>Design<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/design/design-pattern/" aria-label="Design Pattern"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="tabler:grid-pattern" width="1em" height="1em"></iconify-icon><!--]-->Design Pattern<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/design/system-design/" aria-label="System Design"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="icon-park-outline:system" width="1em" height="1em"></iconify-icon><!--]-->System Design<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/project/" aria-label="Project"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="ant-design:project-outlined" width="1em" height="1em"></iconify-icon><!--]-->Project<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/interview/" aria-label="Interview"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:account-tie" width="1em" height="1em"></iconify-icon><!--]-->Interview<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="About"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:about" width="1em" height="1em"></iconify-icon>About<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/about-me.html" aria-label="About me"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="cib:about-me" width="1em" height="1em"></iconify-icon><!--]-->About me<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/about.html" aria-label="About"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:about" width="1em" height="1em"></iconify-icon><!--]-->About<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/vanhung4499/my-wiki" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">Search</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:sql-query" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">SQL</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/database/sql/overview.html" aria-label="SQL Overview"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:sql-query" width="1em" height="1em"></iconify-icon><!--]-->SQL Overview<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/database/sql/how-sql-db-works.html" aria-label="How SQL DB works?"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:sql-query" width="1em" height="1em"></iconify-icon><!--]-->How SQL DB works?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/database/sql/theory.html" aria-label="SQL DB Theory"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:sql-query" width="1em" height="1em"></iconify-icon><!--]-->SQL DB Theory<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/database/sql/cheat-sheet.html" aria-label="SQL Cheat Sheet"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:sql-query" width="1em" height="1em"></iconify-icon><!--]-->SQL Cheat Sheet<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/database/sql/db-design-process.html" aria-label="SQL DB Design Process"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:sql-query" width="1em" height="1em"></iconify-icon><!--]-->SQL DB Design Process<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/database/sql/syntax-features.html" aria-label="SQL Syntax Foudation Features"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:sql-query" width="1em" height="1em"></iconify-icon><!--]-->SQL Syntax Foudation Features<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/database/sql/extend-sql.html" aria-label="Extend SQL"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:sql-query" width="1em" height="1em"></iconify-icon><!--]-->Extend SQL<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link vp-sidebar-page active" href="/database/sql/interview.html" aria-label="SQL DB Interview"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:sql-query" width="1em" height="1em"></iconify-icon><!--]-->SQL DB Interview<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:mysql" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">MySQL</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:redis" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">Redis</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:mongodb" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">MongoDB</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:elasticsearch" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">Elasticsearch</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="cib:elastic-stack" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">Elastic Stack</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:sql-query" width="1em" height="1em"></iconify-icon>SQL DB Interview</h1><div class="page-info"><span class="page-author-info" aria-label="Authorüñä" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://vanhung4499.github.io" target="_blank" rel="noopener noreferrer">Hung Nguyen</a></span><span property="author" content="Hung Nguyen"></span></span><!----><span class="page-date-info" aria-label="Writing DateüìÖ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-06-28T15:54:38.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time‚åõ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 56 min</span><meta property="timeRequired" content="PT56M"></span><span class="page-category-info" aria-label="Categoryüåà" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color5 clickable" role="navigation">db</span><span class="page-category-item color4 clickable" role="navigation">sql</span><span class="page-category-item color4 clickable" role="navigation">interview</span><!--]--><meta property="articleSection" content="db,sql,interview"></span><span class="page-tag-info" aria-label="Tagüè∑" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color5 clickable" role="navigation">db</span><span class="page-tag-item color4 clickable" role="navigation">sql</span><span class="page-tag-item color4 clickable" role="navigation">interview</span><!--]--><meta property="keywords" content="db,sql,interview"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#chi-muc-va-rang-buoc">Ch·ªâ m·ª•c v√† R√†ng bu·ªôc</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#chi-muc-la-gi">Ch·ªâ m·ª•c l√† g√¨?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#uu-ƒëiem-va-nhuoc-ƒëiem-cua-chi-muc">∆Øu ƒëi·ªÉm v√† nh∆∞·ª£c ƒëi·ªÉm c·ªßa ch·ªâ m·ª•c</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#khi-nao-su-dung-chi-muc">Khi n√†o s·ª≠ d·ª•ng ch·ªâ m·ª•c</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#cac-loai-chi-muc">C√°c lo·∫°i ch·ªâ m·ª•c</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#cau-truc-du-lieu-cua-chi-muc">C·∫•u tr√∫c d·ªØ li·ªáu c·ªßa ch·ªâ m·ª•c</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#chien-luoc-lap-chi-muc">Chi·∫øn l∆∞·ª£c l·∫≠p ch·ªâ m·ª•c</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#rang-buoc">R√†ng bu·ªôc</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#kiem-soat-ƒëong-thoi">Ki·ªÉm so√°t ƒë·ªìng th·ªùi</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#khoa-lac-quan-va-khoa-bi-quan">Kh√≥a l·∫°c quan v√† kh√≥a bi quan</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#khoa-hang-va-khoa-bang">Kh√≥a h√†ng v√† kh√≥a b·∫£ng</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#khoa-ƒëoc-va-khoa-ghi">Kh√≥a ƒë·ªçc v√† kh√≥a ghi</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#khoa-y-chi">Kh√≥a √Ω ch√≠</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mvcc">MVCC</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#khoa-next-key">Kh√≥a Next-key</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#giao-dich">Giao d·ªãch</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#acid">ACID</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#van-ƒëe-nhat-quan-trong-moi-truong-ƒëong-thoi">V·∫•n ƒë·ªÅ nh·∫•t qu√°n trong m√¥i tr∆∞·ªùng ƒë·ªìng th·ªùi</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#muc-ƒëo-co-lap-isolation-level">M·ª©c ƒë·ªô c·ªô l√¢p (Isolation Level)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#giao-dich-phan-tan">Giao d·ªãch ph√¢n t√°n</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#phan-chia-co-so-du-lieu-va-bang">Ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#khai-niem">Kh√°i ni·ªám</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#phan-mem-trung-gian-phan-chia-co-so-du-lieu-va-bang">Ph·∫ßn m·ªÅm trung gian ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#cac-van-ƒëe-pho-bien-cua-phan-chia-co-so-du-lieu-va-bang">C√°c v·∫•n ƒë·ªÅ ph·ªï bi·∫øn c·ªßa ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#cum">C·ª•m</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#co-che-sao-chep">C∆° ch·∫ø sao ch√©p</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#phan-tach-ƒëoc-va-ghi">Ph√¢n t√°ch ƒë·ªçc v√† ghi</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#can-bang-tai">C√¢n b·∫±ng t·∫£i</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#toi-uu-co-so-du-lieu">T·ªëi ∆∞u c∆° s·ªü d·ªØ li·ªáu</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#toi-uu-sql">T·ªëi ∆∞u SQL</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#toi-uu-cau-truc">T·ªëi ∆∞u c·∫•u tr√∫c</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#toi-uu-cau-hinh">T·ªëi ∆∞u c·∫•u h√¨nh</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#toi-uu-phan-cung">T·ªëi ∆∞u ph·∫ßn c·ª©ng</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ly-thuyet-co-so-du-lieu">L√Ω thuy·∫øt c∆° s·ªü d·ªØ li·ªáu</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#phu-thuoc-ham">Ph·ª• thu·ªôc h√†m</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#cac-van-ƒëe">C√°c v·∫•n ƒë·ªÅ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#hinh-thuc-chuan-hoa">H√¨nh th·ª©c chu·∫©n ho√°</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#storage-engine">Storage Engine</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#innodb-vs-myisam">InnoDB vs. MyISAM</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#so-sanh-co-so-du-lieu">So s√°nh c∆° s·ªü d·ªØ li·ªáu</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#so-sanh-co-so-du-lieu-pho-bien">So s√°nh c∆° s·ªü d·ªØ li·ªáu ph·ªï bi·∫øn</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#oracle-vs-mysql">Oracle vs Mysql</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#so-sanh-kieu-du-lieu">So s√°nh ki·ªÉu d·ªØ li·ªáu</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#cau-hoi-thuong-gap-ve-sql">C√¢u h·ªèi th∆∞·ªùng g·∫∑p v·ªÅ SQL</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#co-su-khac-biet-ve-hieu-suat-giua-select-count-select-count-1-va-select-count-column-khong">C√≥ s·ª± kh√°c bi·ªát v·ªÅ hi·ªáu su·∫•t gi·ªØa SELECT COUNT(*), SELECT COUNT(1) v√† SELECT COUNT(Column) kh√¥ng?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#order-by-co-sap-xep-theo-nhom-hay-sap-xep-theo-ban-ghi-trong-nhom-khong">ORDER BY c√≥ s·∫Øp x·∫øp theo nh√≥m hay s·∫Øp x·∫øp theo b·∫£n ghi trong nh√≥m kh√¥ng?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#cac-buoc-thuc-thi-trong-mot-cau-lenh-select">C√°c b∆∞·ªõc th·ª±c thi trong m·ªôt c√¢u l·ªánh SELECT</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#khi-nao-nen-su-dung-exists-va-khi-nao-nen-su-dung-in">Khi n√†o n√™n s·ª≠ d·ª•ng EXISTS v√† khi n√†o n√™n s·ª≠ d·ª•ng IN?</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="phong-van-ve-co-so-du-lieu-quan-he" tabindex="-1"><a class="header-anchor" href="#phong-van-ve-co-so-du-lieu-quan-he"><span>Ph·ªèng v·∫•n v·ªÅ C∆° s·ªü d·ªØ li·ªáu quan h·ªá</span></a></h1><h2 id="chi-muc-va-rang-buoc" tabindex="-1"><a class="header-anchor" href="#chi-muc-va-rang-buoc"><span>Ch·ªâ m·ª•c v√† R√†ng bu·ªôc</span></a></h2><h3 id="chi-muc-la-gi" tabindex="-1"><a class="header-anchor" href="#chi-muc-la-gi"><span>Ch·ªâ m·ª•c l√† g√¨?</span></a></h3><p>Ch·ªâ m·ª•c (Index) l√† m·ªôt c·∫•u tr√∫c ƒë∆∞·ª£c s·∫Øp x·∫øp c·ªßa m·ªôt ho·∫∑c nhi·ªÅu c·ªôt trong b·∫£ng c∆° s·ªü d·ªØ li·ªáu, ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ t√¨m ki·∫øm d·ªØ li·ªáu m·ªôt c√°ch hi·ªáu qu·∫£.</p><h3 id="uu-ƒëiem-va-nhuoc-ƒëiem-cua-chi-muc" tabindex="-1"><a class="header-anchor" href="#uu-ƒëiem-va-nhuoc-ƒëiem-cua-chi-muc"><span>∆Øu ƒëi·ªÉm v√† nh∆∞·ª£c ƒëi·ªÉm c·ªßa ch·ªâ m·ª•c</span></a></h3><p>‚úî ∆Øu ƒëi·ªÉm c·ªßa ch·ªâ m·ª•c:</p><ul><li>Ch·ªâ m·ª•c gi√∫p gi·∫£m l∆∞·ª£ng d·ªØ li·ªáu m√† m√°y ch·ªß c·∫ßn qu√©t, t·ª´ ƒë√≥ tƒÉng t·ªëc ƒë·ªô truy v·∫•n d·ªØ li·ªáu.</li><li>Trong c√°c c∆° s·ªü d·ªØ li·ªáu h·ªó tr·ª£ kh√≥a h√†ng (nh∆∞ InnoDB), khi truy c·∫≠p v√†o h√†ng, kh√≥a h√†ng s·∫Ω ƒë∆∞·ª£c √°p d·ª•ng. S·ª≠ d·ª•ng ch·ªâ m·ª•c c√≥ th·ªÉ gi·∫£m s·ªë l∆∞·ª£ng h√†ng truy c·∫≠p, t·ª´ ƒë√≥ gi·∫£m s·ª± c·∫°nh tranh kh√≥a v√† tƒÉng kh·∫£ nƒÉng ƒë·ªìng th·ªùi.</li><li>Ch·ªâ m·ª•c c√≥ th·ªÉ gi√∫p m√°y ch·ªß tr√°nh s·∫Øp x·∫øp v√† b·∫£ng t·∫°m th·ªùi.</li><li>Ch·ªâ m·ª•c c√≥ th·ªÉ bi·∫øn I/O ng·∫´u nhi√™n th√†nh I/O tu·∫ßn t·ª±.</li><li>Ch·ªâ m·ª•c duy nh·∫•t ƒë·∫£m b·∫£o t√≠nh duy nh·∫•t c·ªßa m·ªói h√†ng d·ªØ li·ªáu. B·∫±ng c√°ch s·ª≠ d·ª•ng ch·ªâ m·ª•c, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng tr√¨nh t·ªëi ∆∞u h√≥a truy v·∫•n ƒë·ªÉ tƒÉng hi·ªáu su·∫•t h·ªá th·ªëng.</li></ul><p>‚ùå Nh∆∞·ª£c ƒëi·ªÉm c·ªßa ch·ªâ m·ª•c:</p><ul><li>T·∫°o v√† duy tr√¨ ch·ªâ m·ª•c m·∫•t th·ªùi gian, v√† th·ªùi gian n√†y tƒÉng l√™n khi d·ªØ li·ªáu tƒÉng.</li><li>Ch·ªâ m·ª•c chi·∫øm kh√¥ng gian l∆∞u tr·ªØ b·ªï sung, ngo√†i kh√¥ng gian d·ªØ li·ªáu c·ªßa b·∫£ng. N·∫øu t·∫°o ch·ªâ m·ª•c k·∫øt h·ª£p, kh√¥ng gian c·∫ßn thi·∫øt s·∫Ω l·ªõn h∆°n.</li><li>C√°c ho·∫°t ƒë·ªông ghi (<code>INSERT</code>/<code>UPDATE</code>/<code>DELETE</code>) c√≥ th·ªÉ c·∫ßn c·∫≠p nh·∫≠t ch·ªâ m·ª•c, l√†m gi·∫£m hi·ªáu su·∫•t ghi c·ªßa c∆° s·ªü d·ªØ li·ªáu.</li></ul><h3 id="khi-nao-su-dung-chi-muc" tabindex="-1"><a class="header-anchor" href="#khi-nao-su-dung-chi-muc"><span>Khi n√†o s·ª≠ d·ª•ng ch·ªâ m·ª•c</span></a></h3><p>Ch·ªâ m·ª•c c√≥ th·ªÉ c·∫£i thi·ªán hi·ªáu su·∫•t truy v·∫•n m·ªôt c√°ch ƒë√°ng k·ªÉ.</p><p>‚úî Khi n√†o th√¨ n√™n s·ª≠ d·ª•ng ch·ªâ m·ª•c:</p><ul><li>B·∫£ng th∆∞·ªùng xuy√™n th·ª±c hi·ªán c√°c truy v·∫•n <code>SELECT</code>.</li><li>D·ªØ li·ªáu trong b·∫£ng l·ªõn.</li><li>C√°c c·ªôt th∆∞·ªùng xuy√™n xu·∫•t hi·ªán trong ƒëi·ªÅu ki·ªán <code>WHERE</code> ho·∫∑c ƒëi·ªÅu ki·ªán k·∫øt n·ªëi (<code>JOIN</code>).</li></ul><p>‚ùå Khi n√†o kh√¥ng n√™n s·ª≠ d·ª•ng ch·ªâ m·ª•c:</p><ul><li>Ho·∫°t ƒë·ªông ghi th∆∞·ªùng xuy√™n (<code>INSERT</code>/<code>UPDATE</code>/<code>DELETE</code>) - c·∫ßn c·∫≠p nh·∫≠t kh√¥ng gian ch·ªâ m·ª•c.</li><li>B·∫£ng r·∫•t nh·ªè - trong h·∫ßu h·∫øt c√°c tr∆∞·ªùng h·ª£p, qu√©t to√†n b·ªô b·∫£ng ƒë∆°n gi·∫£n h∆°n.</li><li>C·ªôt kh√¥ng xu·∫•t hi·ªán th∆∞·ªùng xuy√™n trong ƒëi·ªÅu ki·ªán <code>WHERE</code> ho·∫∑c ƒëi·ªÅu ki·ªán k·∫øt n·ªëi (<code>JOIN</code>) - ch·ªâ m·ª•c s·∫Ω kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng v√† t·∫°o th√™m chi ph√≠ kh√¥ng gian.</li></ul><h3 id="cac-loai-chi-muc" tabindex="-1"><a class="header-anchor" href="#cac-loai-chi-muc"><span>C√°c lo·∫°i ch·ªâ m·ª•c</span></a></h3><p>C√°c h·ªá th·ªëng c∆° s·ªü d·ªØ li·ªáu ph·ªï bi·∫øn th∆∞·ªùng h·ªó tr·ª£ c√°c lo·∫°i ch·ªâ m·ª•c sau:</p><p>D·ª±a tr√™n lo·∫°i logic (th∆∞·ªùng ƒë∆∞·ª£c ƒë·∫∑t khi t·∫°o b·∫£ng):</p><ul><li>Ch·ªâ m·ª•c duy nh·∫•t (<code>UNIQUE</code>) - gi√° tr·ªã c·ªßa c·ªôt ch·ªâ m·ª•c ph·∫£i l√† duy nh·∫•t, nh∆∞ng c√≥ th·ªÉ ch·ª©a gi√° tr·ªã NULL. N·∫øu l√† ch·ªâ m·ª•c k·∫øt h·ª£p, s·ª± k·∫øt h·ª£p c·ªßa c√°c gi√° tr·ªã c·ªôt ph·∫£i l√† duy nh·∫•t.</li><li>Ch·ªâ m·ª•c ch√≠nh (<code>PRIMARY</code>) - m·ªôt lo·∫°i ƒë·∫∑c bi·ªát c·ªßa ch·ªâ m·ª•c duy nh·∫•t, m·ªôt b·∫£ng ch·ªâ c√≥ th·ªÉ c√≥ m·ªôt ch·ªâ m·ª•c ch√≠nh v√† kh√¥ng cho ph√©p gi√° tr·ªã NULL. Th∆∞·ªùng ƒë∆∞·ª£c t·∫°o c√πng v·ªõi vi·ªác t·∫°o b·∫£ng.</li><li>Ch·ªâ m·ª•c th√¥ng th∆∞·ªùng (<code>INDEX</code>) - ch·ªâ m·ª•c c∆° b·∫£n nh·∫•t, kh√¥ng c√≥ r√†ng bu·ªôc ƒë·∫∑c bi·ªát.</li><li>Ch·ªâ m·ª•c k·∫øt h·ª£p - ch·ªâ m·ª•c ƒë∆∞·ª£c t·∫°o tr√™n nhi·ªÅu c·ªôt, ch·ªâ khi ƒëi·ªÅu ki·ªán truy v·∫•n s·ª≠ d·ª•ng c·ªôt ƒë·∫ßu ti√™n trong ch·ªâ m·ª•c, ch·ªâ m·ª•c m·ªõi ƒë∆∞·ª£c s·ª≠ d·ª•ng. S·ª≠ d·ª•ng nguy√™n t·∫Øc t·∫≠p con tr√°i nh·∫•t.</li></ul><p>D·ª±a tr√™n c·∫•u tr√∫c l∆∞u tr·ªØ:</p><ul><li>Ch·ªâ m·ª•c gom c·ª•m (<code>Clustered</code>) - c√°c h√†ng d·ªØ li·ªáu v√† c√°c gi√° tr·ªã kh√≥a ƒë∆∞·ª£c l∆∞u tr·ªØ theo c√πng m·ªôt th·ª© t·ª± v·∫≠t l√Ω, m·ªói b·∫£ng ch·ªâ c√≥ th·ªÉ c√≥ m·ªôt ch·ªâ m·ª•c gom c·ª•m.</li><li>Ch·ªâ m·ª•c kh√¥ng gom c·ª•m (<code>Non-clustered</code>) - ch·ªâ m·ª•c ch·ªâ ƒë·ªãnh th·ª© t·ª± logic c·ªßa c√°c gi√° tr·ªã kh√≥a, d·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u tr·ªØ ·ªü m·ªôt v·ªã tr√≠ v√† ch·ªâ m·ª•c ƒë∆∞·ª£c l∆∞u tr·ªØ ·ªü m·ªôt v·ªã tr√≠ kh√°c, ch·ªâ m·ª•c ch·ª©a con tr·ªè ƒë·∫øn v·ªã tr√≠ l∆∞u tr·ªØ d·ªØ li·ªáu. C√≥ th·ªÉ c√≥ nhi·ªÅu ch·ªâ m·ª•c kh√¥ng gom c·ª•m, nh∆∞ng s·ªë l∆∞·ª£ng c√≥ gi·ªõi h·∫°n (th∆∞·ªùng nh·ªè h∆°n 249).</li></ul><h3 id="cau-truc-du-lieu-cua-chi-muc" tabindex="-1"><a class="header-anchor" href="#cau-truc-du-lieu-cua-chi-muc"><span>C·∫•u tr√∫c d·ªØ li·ªáu c·ªßa ch·ªâ m·ª•c</span></a></h3><p>C√°c c∆° s·ªü d·ªØ li·ªáu ph·ªï bi·∫øn th∆∞·ªùng s·ª≠ d·ª•ng c·∫•u tr√∫c d·ªØ li·ªáu B-Tree ho·∫∑c B+Tree cho ch·ªâ m·ª•c.</p><h4 id="b-tree" tabindex="-1"><a class="header-anchor" href="#b-tree"><span>B-Tree</span></a></h4><p>B-Tree b·∫≠c M l√† c√¢y c√≥ c√°c thu·ªôc t√≠nh sau:</p><ul><li>M·ªói n√∫t c√≥ t·ªëi ƒëa M con.</li><li>Ngo·∫°i tr·ª´ n√∫t g·ªëc v√† n√∫t l√°, m·ªói n√∫t c√≥ √≠t nh·∫•t M/2 con.</li><li>N√∫t g·ªëc c√≥ √≠t nh·∫•t hai con (tr·ª´ khi c√¢y ch·ªâ ch·ª©a m·ªôt n√∫t).</li><li>T·∫•t c·∫£ c√°c n√∫t l√° n·∫±m ·ªü c√πng m·ªôt m·ª©c, kh√¥ng ch·ª©a b·∫•t k·ª≥ th√¥ng tin kh√≥a n√†o.</li><li>N√∫t kh√¥ng ph·∫£i l√° ch·ª©a √≠t nh·∫•t M/2-1 v√† t·ªëi ƒëa M-1 kh√≥a.</li><li>C√°c kh√≥a b√™n trong m·ªói n√∫t ƒë∆∞·ª£c s·∫Øp x·∫øp theo th·ª© t·ª± tƒÉng d·∫ßn.</li><li>ƒê·ªëi v·ªõi m·ªói n√∫t, c√≥ m·ªôt m·∫£ng kh√≥a <code>Key[]</code> v√† m·ªôt m·∫£ng con tr·ªè (tr·ªè ƒë·∫øn c√°c con) <code>Son[]</code>.</li></ul><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721113211.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>Trong c√¢y B-Tree, qu√° tr√¨nh t√¨m ki·∫øm di·ªÖn ra nh∆∞ sau:</p><ol><li>T√¨m ki·∫øm trong m·∫£ng kh√≥a <code>Key[]</code> b·∫±ng ph∆∞∆°ng ph√°p t√¨m ki·∫øm tu·∫ßn t·ª± (khi ƒë·ªô d√†i m·∫£ng nh·ªè) ho·∫∑c t√¨m ki·∫øm nh·ªã ph√¢n (khi ƒë·ªô d√†i m·∫£ng l·ªõn), n·∫øu t√¨m th·∫•y kh√≥a K, tr·∫£ v·ªÅ ƒë·ªãa ch·ªâ c·ªßa n√∫t v√† v·ªã tr√≠ c·ªßa K trong <code>Key[]</code>.</li><li>N·∫øu kh√¥ng t√¨m th·∫•y, c√≥ th·ªÉ x√°c ƒë·ªãnh K n·∫±m gi·ªØa Key[i] v√† Key[i+1] c·ªßa m·ªôt n√∫t, ti·∫øp t·ª•c t√¨m ki·∫øm t·ª´ con tr·ªè Son[i] tr·ªè ƒë·∫øn con tr·ªè con, cho ƒë·∫øn khi t√¨m th·∫•y n√∫t ch·ª©a th√†nh c√¥ng.</li><li>Ho·∫∑c t√¨m ki·∫øm kh√¥ng th√†nh c√¥ng khi t√¨m th·∫•y m·ªôt n√∫t l√° v√† t√¨m ki·∫øm trong n√∫t l√° kh√¥ng th√†nh c√¥ng.</li></ol><h4 id="b-tree-1" tabindex="-1"><a class="header-anchor" href="#b-tree-1"><span>B+Tree</span></a></h4><p>B+Tree l√† bi·∫øn th·ªÉ c·ªßa c√¢y B-Tree:</p><ul><li>S·ªë l∆∞·ª£ng con c·ªßa m·ªói n√∫t gi·ªõi h·∫°n l√† 2d thay v√¨ 2d+1 (d l√† b·∫≠c ra c·ªßa n√∫t).</li><li>N√∫t kh√¥ng ph·∫£i l√° kh√¥ng ch·ª©a d·ªØ li·ªáu, ch·ªâ ch·ª©a kh√≥a.</li><li>N√∫t l√° kh√¥ng ch·ª©a con tr·ªè.</li></ul><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721113624.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>Trong B+Tree, n√∫t l√° v√† n√∫t kh√¥ng ph·∫£i l√° c√≥ k√≠ch th∆∞·ªõc kh√°c nhau. ƒêi·ªÅu n√†y kh√°c v·ªõi c√¢y B-Tree, trong ƒë√≥ c√°c n√∫t kh√°c nhau ch·ª©a c√πng s·ªë l∆∞·ª£ng kh√≥a v√† con tr·ªè.</p><p><strong>C√¢y B+Tree v·ªõi con tr·ªè truy c·∫≠p tu·∫ßn t·ª±</strong></p><p>N√≥i chung, c·∫•u tr√∫c B+Tree ƒë∆∞·ª£c s·ª≠ d·ª•ng trong h·ªá th·ªëng c∆° s·ªü d·ªØ li·ªáu ho·∫∑c h·ªá th·ªëng t·ªáp ƒë√£ ƒë∆∞·ª£c t·ªëi ∆∞u h√≥a tr√™n c∆° s·ªü B+Tree c·ªï ƒëi·ªÉn b·∫±ng vi·ªác th√™m c√°c con tr·ªè truy c·∫≠p tu·∫ßn t·ª±.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721113644.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>Trong B+Tree v·ªõi con tr·ªè truy c·∫≠p tu·∫ßn t·ª±, m·ªói n√∫t l√° ƒë∆∞·ª£c th√™m m·ªôt con tr·ªè tr·ªè ƒë·∫øn n√∫t l√° k·∫ø ti·∫øp, t·∫°o th√†nh m·ªôt chu·ªói con tr·ªè.</p><p>T·ªëi ∆∞u h√≥a n√†y nh·∫±m m·ª•c ƒë√≠ch c·∫£i thi·ªán hi·ªáu su·∫•t truy v·∫•n ph·∫°m vi, v√≠ d·ª•: n·∫øu mu·ªën truy v·∫•n t·∫•t c·∫£ c√°c b·∫£n ghi c√≥ gi√° tr·ªã kh√≥a t·ª´ 18 ƒë·∫øn 49, sau khi t√¨m th·∫•y 18, ch·ªâ c·∫ßn duy·ªát theo th·ª© t·ª± n√∫t v√† con tr·ªè ƒë·ªÉ truy c·∫≠p t·∫•t c·∫£ c√°c b·∫£n ghi, tƒÉng ƒë√°ng k·ªÉ hi·ªáu su·∫•t truy v·∫•n ph·∫°m vi.</p><h4 id="b-tree-vs-b-tree" tabindex="-1"><a class="header-anchor" href="#b-tree-vs-b-tree"><span>B-Tree vs B+Tree</span></a></h4><ul><li>B+Tree ph√π h·ª£p h∆°n cho l∆∞u tr·ªØ b√™n ngo√†i (th∆∞·ªùng l√† l∆∞u tr·ªØ ƒëƒ©a), v√¨ c√°c n√∫t kh√¥ng ph·∫£i l√° kh√¥ng ch·ª©a d·ªØ li·ªáu, v√¨ v·∫≠y m·ªói n√∫t c√≥ th·ªÉ ch·ª©a nhi·ªÅu n√∫t h∆°n, m·ªói n√∫t c√≥ th·ªÉ ch·ª©a nhi·ªÅu gi√° tr·ªã h∆°n. ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† m·ªói l·∫ßn I/O ƒëƒ©a, l∆∞·ª£ng th√¥ng tin ƒë∆∞·ª£c truy c·∫≠p b·∫±ng ch·ªâ m·ª•c B+Tree l·ªõn h∆°n, tƒÉng hi·ªáu su·∫•t I/O.</li><li>MySQL l√† h·ªá th·ªëng c∆° s·ªü d·ªØ li·ªáu quan h·ªá (RDBMS), th∆∞·ªùng s·∫Ω truy v·∫•n theo ph·∫°m vi tr√™n c·ªôt ch·ªâ m·ª•c, B+Tree c√≥ c√°c n√∫t l√° ƒë∆∞·ª£c s·∫Øp x·∫øp theo th·ª© t·ª±, gi√∫p t·ªëi ∆∞u h√≥a truy v·∫•n ph·∫°m vi tr√™n c·ªôt ch·ªâ m·ª•c. C√≤n B-Tree kh√¥ng th·ªÉ th·ª±c hi·ªán truy v·∫•n ph·∫°m vi tr√™n c·ªôt ch·ªâ m·ª•c.</li></ul><h4 id="hash" tabindex="-1"><a class="header-anchor" href="#hash"><span>Hash</span></a></h4><blockquote><p>Hash ch·ªâ c√≥ hi·ªáu l·ª±c ƒë·ªëi v·ªõi c√°c truy v·∫•n kh·ªõp ch√≠nh x√°c t·∫•t c·∫£ c√°c c·ªôt trong ch·ªâ m·ª•c.</p></blockquote><p>ƒê·ªëi v·ªõi m·ªói h√†ng d·ªØ li·ªáu, t√≠nh to√°n m·ªôt <code>hashcode</code> cho t·∫•t c·∫£ c√°c c·ªôt ch·ªâ m·ª•c. Ch·ªâ m·ª•c hash l∆∞u tr·ªØ t·∫•t c·∫£ c√°c <code>hashcode</code> trong ch·ªâ m·ª•c v√† s·ª≠ d·ª•ng b·∫£ng bƒÉm ƒë·ªÉ l∆∞u tr·ªØ con tr·ªè ƒë·∫øn h√†ng d·ªØ li·ªáu.</p><p>L·ª£i √≠ch c·ªßa ch·ªâ m·ª•c bƒÉm:</p><ul><li>V√¨ c·∫•u tr√∫c d·ªØ li·ªáu ch·ªâ m·ª•c r·∫•t g·ªçn nh·∫π, n√™n t·ªëc ƒë·ªô truy v·∫•n r·∫•t nhanh.</li><li>M·ªôt s·ªë h·ªá th·ªëng c∆° s·ªü d·ªØ li·ªáu (nh∆∞ MyISAM) ch·ªâ l∆∞u tr·ªØ ch·ªâ m·ª•c trong b·ªô nh·ªõ, trong khi d·ªØ li·ªáu ph·ª• thu·ªôc v√†o h·ªá ƒëi·ªÅu h√†nh ƒë·ªÉ l∆∞u tr·ªØ. Do ƒë√≥, ch·ªâ truy c·∫≠p ch·ªâ m·ª•c kh√¥ng s·ª≠ d·ª•ng cu·ªôc g·ªçi h·ªá th·ªëng (th∆∞·ªùng t·ªën th·ªùi gian).</li></ul><p>Nh∆∞·ª£c ƒëi·ªÉm c·ªßa ch·ªâ m·ª•c bƒÉm:</p><ul><li>D·ªØ li·ªáu kh√¥ng ƒë∆∞·ª£c l∆∞u tr·ªØ theo th·ª© t·ª± ch·ªâ m·ª•c, do ƒë√≥ kh√¥ng th·ªÉ s·ª≠ d·ª•ng ƒë·ªÉ s·∫Øp x·∫øp.</li><li>Ch·ªâ m·ª•c bƒÉm kh√¥ng h·ªó tr·ª£ truy v·∫•n ph·∫°m vi. Ch·ªâ c√≥ th·ªÉ s·ª≠ d·ª•ng cho truy v·∫•n kh·ªõp ch√≠nh x√°c.</li><li>Ch·ªâ m·ª•c bƒÉm kh√¥ng h·ªó tr·ª£ truy v·∫•n ph·∫ßn c·ªßa ch·ªâ m·ª•c. V√≠ d·ª•: n·∫øu ch·ªâ m·ª•c bƒÉm ƒë∆∞·ª£c t·∫°o tr√™n c·ªôt (A, B), v√† truy v·∫•n ch·ªâ c√≥ c·ªôt A, th√¨ kh√¥ng th·ªÉ s·ª≠ d·ª•ng ch·ªâ m·ª•c n√†y.</li><li>Ch·ªâ m·ª•c bƒÉm ch·ªâ h·ªó tr·ª£ truy v·∫•n so s√°nh b·∫±ng, kh√¥ng h·ªó tr·ª£ truy v·∫•n ph·∫°m vi. V√≠ d·ª•: <code>WHERE price &gt; 100</code> kh√¥ng th·ªÉ s·ª≠ d·ª•ng ch·ªâ m·ª•c bƒÉm.</li><li>Ch·ªâ m·ª•c bƒÉm c√≥ th·ªÉ g·∫∑p xung ƒë·ªôt bƒÉm, khi ƒë√≥ ph·∫£i duy·ªát qua t·∫•t c·∫£ c√°c con tr·ªè h√†ng trong danh s√°ch li√™n k·∫øt, so s√°nh t·ª´ng h√†ng ƒë·ªÉ t√¨m h√†ng ph√π h·ª£p.</li></ul><h3 id="chien-luoc-lap-chi-muc" tabindex="-1"><a class="header-anchor" href="#chien-luoc-lap-chi-muc"><span>Chi·∫øn l∆∞·ª£c l·∫≠p ch·ªâ m·ª•c</span></a></h3><h4 id="nguyen-tac-co-ban-cua-chi-muc" tabindex="-1"><a class="header-anchor" href="#nguyen-tac-co-ban-cua-chi-muc"><span>Nguy√™n t·∫Øc c∆° b·∫£n c·ªßa ch·ªâ m·ª•c</span></a></h4><ul><li>Kh√¥ng ph·∫£i c√†ng nhi·ªÅu ch·ªâ m·ª•c c√†ng t·ªët, kh√¥ng n√™n t·∫°o ch·ªâ m·ª•c cho t·∫•t c·∫£ c√°c c·ªôt.</li><li>Tr√°nh s·ª± tr√πng l·∫∑p v√† ch·ªâ m·ª•c kh√¥ng c·∫ßn thi·∫øt.</li><li>X√≥a c√°c ch·ªâ m·ª•c kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng.</li><li>M·ªü r·ªông c√°c ch·ªâ m·ª•c hi·ªán c√≥ thay v√¨ t·∫°o m·ªõi.</li><li>C√¢n nh·∫Øc th√™m ch·ªâ m·ª•c cho c√°c c·ªôt ƒë∆∞·ª£c s·ª≠ d·ª•ng th∆∞·ªùng xuy√™n trong ƒëi·ªÅu ki·ªán l·ªçc <code>WHERE</code>.</li></ul><h4 id="cot-ƒëoc-lap" tabindex="-1"><a class="header-anchor" href="#cot-ƒëoc-lap"><span>C·ªôt ƒë·ªôc l·∫≠p</span></a></h4><p><strong>N·∫øu c·ªôt trong c√¢u truy v·∫•n kh√¥ng ph·∫£i l√† c·ªôt ƒë·ªôc l·∫≠p, c∆° s·ªü d·ªØ li·ªáu s·∫Ω kh√¥ng s·ª≠ d·ª•ng ch·ªâ m·ª•c</strong>.</p><p>&quot;C·ªôt ƒë·ªôc l·∫≠p&quot; c√≥ nghƒ©a l√† c·ªôt ch·ªâ m·ª•c kh√¥ng ƒë∆∞·ª£c t·∫°o th√†nh t·ª´ m·ªôt ph·∫ßn c·ªßa bi·ªÉu th·ª©c ho·∫∑c l√† ƒë·ªëi s·ªë c·ªßa m·ªôt h√†m.</p><p>V√≠ d·ª• sai:</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> actor_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> actor </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> actor_id + </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ... </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> TO_DAYS(current_date) - TO_DAYS(date_col) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&lt;=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><h4 id="chi-muc-tien-to-va-tinh-chon-loc-cua-chi-muc" tabindex="-1"><a class="header-anchor" href="#chi-muc-tien-to-va-tinh-chon-loc-cua-chi-muc"><span>Ch·ªâ m·ª•c ti·ªÅn t·ªë v√† t√≠nh ch·ªçn l·ªçc c·ªßa ch·ªâ m·ª•c</span></a></h4><p>ƒê√¥i khi c·∫ßn t·∫°o ch·ªâ m·ª•c cho c√°c c·ªôt c√≥ ƒë·ªô d√†i l·ªõn, ƒëi·ªÅu n√†y l√†m cho ch·ªâ m·ª•c tr·ªü n√™n l·ªõn v√† ch·∫≠m.</p><p>Gi·∫£i ph√°p l√†: ch·ªâ c·∫ßn t·∫°o ch·ªâ m·ª•c cho m·ªôt ph·∫ßn ƒë·∫ßu c·ªßa chu·ªói, ƒëi·ªÅu n√†y gi√∫p ti·∫øt ki·ªám kh√¥ng gian ch·ªâ m·ª•c v√† tƒÉng hi·ªáu su·∫•t ch·ªâ m·ª•c. Tuy nhi√™n, ƒëi·ªÅu n√†y c≈©ng l√†m gi·∫£m t√≠nh ch·ªçn l·ªçc c·ªßa ch·ªâ m·ª•c.</p><p>T√≠nh ch·ªçn l·ªçc c·ªßa ch·ªâ m·ª•c l√† t·ª∑ l·ªá gi·ªØa s·ªë gi√° tr·ªã ch·ªâ m·ª•c kh√¥ng tr√πng l·∫∑p v√† t·ªïng s·ªë b·∫£n ghi trong b·∫£ng. Gi√° tr·ªã t·ªëi ƒëa l√† 1, khi m·ªói b·∫£n ghi c√≥ m·ªôt ch·ªâ m·ª•c duy nh·∫•t. T√≠nh ch·ªçn l·ªçc c√†ng cao, hi·ªáu su·∫•t truy v·∫•n c√†ng cao.</p><p>ƒê·ªëi v·ªõi c√°c c·ªôt ki·ªÉu BLOB/TEXT/VARCHAR, ph·∫£i s·ª≠ d·ª•ng ch·ªâ m·ª•c ti·ªÅn t·ªë v√¨ c∆° s·ªü d·ªØ li·ªáu th∆∞·ªùng kh√¥ng cho ph√©p ch·ªâ m·ª•c ƒë·∫ßy ƒë·ªß cho c√°c c·ªôt n√†y.</p><p>C·∫ßn ch·ªçn ti·ªÅn t·ªë ƒë·ªß d√†i ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh ch·ªçn l·ªçc cao, ƒë·ªìng th·ªùi kh√¥ng qu√° d√†i (ti·∫øt ki·ªám kh√¥ng gian).</p><p>V√≠ d·ª• kh√¥ng hi·ªáu qu·∫£:</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> COUNT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(*) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">AS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> cnt, city </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> sakila</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">city_demo</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">GROUP BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> city </span><span style="color:#C678DD;--shiki-dark:#C678DD;">ORDER BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> cnt </span><span style="color:#C678DD;--shiki-dark:#C678DD;">DESC</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> LIMIT</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><p>V√≠ d·ª• hi·ªáu qu·∫£:</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> COUNT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(*) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">AS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> cnt, </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">LEFT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(city, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">AS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> pref </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> sakila</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">city_demo</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">GROUP BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> city </span><span style="color:#C678DD;--shiki-dark:#C678DD;">ORDER BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> cnt </span><span style="color:#C678DD;--shiki-dark:#C678DD;">DESC</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> LIMIT</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><h4 id="chi-muc-ƒëa-cot" tabindex="-1"><a class="header-anchor" href="#chi-muc-ƒëa-cot"><span>Ch·ªâ m·ª•c ƒëa c·ªôt</span></a></h4><p><strong>Kh√¥ng n√™n t·∫°o ch·ªâ m·ª•c ri√™ng cho t·ª´ng c·ªôt</strong>.</p><p><strong>∆Øu ti√™n ƒë·∫∑t c√°c c·ªôt c√≥ t√≠nh ch·ªçn l·ªçc cao ho·∫∑c s·ªë l∆∞·ª£ng gi√° tr·ªã duy nh·∫•t l·ªõn ·ªü ƒë·∫ßu ch·ªâ m·ª•c ƒëa c·ªôt</strong>. Tuy nhi√™n, ƒë√¥i khi c≈©ng c·∫ßn xem x√©t c√°c y·∫øu t·ªë kh√°c nh∆∞ s·∫Øp x·∫øp, nh√≥m v√† ƒëi·ªÅu ki·ªán ph·∫°m vi trong m·ªánh ƒë·ªÅ WHERE, v√¨ nh·ªØng y·∫øu t·ªë n√†y c≈©ng ·∫£nh h∆∞·ªüng ƒë√°ng k·ªÉ ƒë·∫øn hi·ªáu su·∫•t truy v·∫•n.</p><p>V√≠ d·ª•:</p><p>Gi·∫£ s·ª≠ c√≥ b·∫£ng user v·ªõi c√°c c·ªôt name, sex, age. N·∫øu t·∫°o ch·ªâ m·ª•c ƒëa c·ªôt cho ba c·ªôt n√†y, th√¨ th·ª© t·ª± t·ªët nh·∫•t l√†: <code>name &gt; age &gt; sex</code>.</p><h4 id="chi-muc-gom-nhom" tabindex="-1"><a class="header-anchor" href="#chi-muc-gom-nhom"><span>Ch·ªâ m·ª•c gom nh√≥m</span></a></h4><p>Ch·ªâ m·ª•c gom nh√≥m kh√¥ng ph·∫£i l√† m·ªôt lo·∫°i ch·ªâ m·ª•c ƒë·ªôc l·∫≠p, m√† l√† m·ªôt c√°ch l∆∞u tr·ªØ d·ªØ li·ªáu. Chi ti·∫øt c·ª• th·ªÉ ph·ª• thu·ªôc v√†o c√°ch tri·ªÉn khai. V√≠ d·ª•, ch·ªâ m·ª•c gom nh√≥m c·ªßa InnoDB th·ª±c t·∫ø l√† l∆∞u tr·ªØ c√πng m·ªôt c·∫•u tr√∫c B-tree c·ªßa ch·ªâ m·ª•c v√† d√≤ng d·ªØ li·ªáu.</p><p><strong>Ch·ªâ m·ª•c gom nh√≥m ƒë·∫°i di·ªán cho vi·ªác l∆∞u tr·ªØ d√≤ng d·ªØ li·ªáu v√† c√°c gi√° tr·ªã kh√≥a li·ªÅn k·ªÅ, do ƒë√≥ truy c·∫≠p nhanh</strong>. V√¨ kh√¥ng th·ªÉ l∆∞u tr·ªØ d√≤ng d·ªØ li·ªáu trong hai v·ªã tr√≠ kh√°c nhau c√πng m·ªôt l√∫c, n√™n <strong>m·ªôt b·∫£ng ch·ªâ c√≥ th·ªÉ c√≥ m·ªôt ch·ªâ m·ª•c gom nh√≥m</strong>.</p><p>N·∫øu kh√¥ng x√°c ƒë·ªãnh kh√≥a ch√≠nh, InnoDB s·∫Ω t·ª± ƒë·ªông x√°c ƒë·ªãnh m·ªôt kh√≥a ch√≠nh ƒë·ªÉ s·ª≠ d·ª•ng l√†m ch·ªâ m·ª•c gom nh√≥m.</p><h4 id="chi-muc-che-phu" tabindex="-1"><a class="header-anchor" href="#chi-muc-che-phu"><span>Ch·ªâ m·ª•c che ph·ªß</span></a></h4><p>Ch·ªâ m·ª•c ch·ª©a t·∫•t c·∫£ c√°c gi√° tr·ªã c·∫ßn truy v·∫•n.</p><p>C√≥ c√°c l·ª£i √≠ch sau:</p><ul><li>V√¨ c√°c m·ª•c ch·ªâ m·ª•c th∆∞·ªùng nh·ªè h∆°n nhi·ªÅu so v·ªõi k√≠ch th∆∞·ªõc d√≤ng d·ªØ li·ªáu, n√™n ch·ªâ ƒë·ªçc ch·ªâ m·ª•c c√≥ th·ªÉ gi·∫£m l∆∞·ª£ng truy c·∫≠p d·ªØ li·ªáu.</li><li>M·ªôt s·ªë c∆° s·ªü d·ªØ li·ªáu (v√≠ d·ª•: MyISAM) ch·ªâ l∆∞u tr·ªØ ch·ªâ m·ª•c trong b·ªô nh·ªõ, trong khi d·ªØ li·ªáu ph·ª• thu·ªôc v√†o h·ªá ƒëi·ªÅu h√†nh ƒë·ªÉ l∆∞u tr·ªØ. Do ƒë√≥, ch·ªâ ƒë·ªçc ch·ªâ m·ª•c c√≥ th·ªÉ tr√°nh s·ª≠ d·ª•ng cu·ªôc g·ªçi h·ªá th·ªëng (th∆∞·ªùng t·ªën th·ªùi gian).</li><li>ƒê·ªëi v·ªõi c∆° s·ªü d·ªØ li·ªáu InnoDB, n·∫øu ch·ªâ m·ª•c ph·ª• c√≥ th·ªÉ che ph·ªß truy v·∫•n, kh√¥ng c·∫ßn truy c·∫≠p ch·ªâ m·ª•c ch√≠nh.</li></ul><h4 id="su-dung-quet-chi-muc-ƒëe-sap-xep" tabindex="-1"><a class="header-anchor" href="#su-dung-quet-chi-muc-ƒëe-sap-xep"><span>S·ª≠ d·ª•ng qu√©t ch·ªâ m·ª•c ƒë·ªÉ s·∫Øp x·∫øp</span></a></h4><p>MySQL c√≥ hai c√°ch ƒë·ªÉ t·∫°o k·∫øt qu·∫£ s·∫Øp x·∫øp: th√¥ng qua ho·∫°t ƒë·ªông s·∫Øp x·∫øp; ho·∫∑c qu√©t ch·ªâ m·ª•c theo th·ª© t·ª±.</p><p><strong>Ch·ªâ m·ª•c t·ªët l√† ch·ªâ m·ª•c c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ s·∫Øp x·∫øp k·∫øt qu·∫£</strong>. ƒêi·ªÅu n√†y cho ph√©p s·ª≠ d·ª•ng ch·ªâ m·ª•c ƒë·ªÉ s·∫Øp x·∫øp thay v√¨ s·∫Øp x·∫øp tr·ª±c ti·∫øp.</p><h4 id="nguyen-tac-phu-hop-nhat-ben-trai" tabindex="-1"><a class="header-anchor" href="#nguyen-tac-phu-hop-nhat-ben-trai"><span>Nguy√™n t·∫Øc ph√π h·ª£p nh·∫•t b√™n tr√°i</span></a></h4><p>MySQL s·∫Ω ti·∫øp t·ª•c kh·ªõp v·ªÅ b√™n ph·∫£i cho ƒë·∫øn khi g·∫∑p c√°c truy v·∫•n ph·∫°m vi <code>(&gt;, &lt;, BETWEEN, LIKE)</code>.</p><ul><li>Ch·ªâ m·ª•c c√≥ th·ªÉ ƒë∆°n gi·∫£n nh∆∞ m·ªôt c·ªôt (a), ho·∫∑c ph·ª©c t·∫°p nh∆∞ nhi·ªÅu c·ªôt (a, b, c, d), ƒë∆∞·ª£c g·ªçi l√† ch·ªâ m·ª•c k·∫øt h·ª£p.</li><li>N·∫øu l√† ch·ªâ m·ª•c k·∫øt h·ª£p, th√¨ kh√≥a c≈©ng bao g·ªìm nhi·ªÅu c·ªôt. ƒê·ªìng th·ªùi, ch·ªâ c√≥ th·ªÉ s·ª≠ d·ª•ng ch·ªâ m·ª•c ƒë·ªÉ ki·ªÉm tra xem kh√≥a c√≥ t·ªìn t·∫°i hay kh√¥ng (t∆∞∆°ng ƒë∆∞∆°ng v·ªõi b·∫±ng nhau), v√† kh√¥ng th·ªÉ kh·ªõp v·ªõi c√°c truy v·∫•n ph·∫°m vi (&gt;, &lt;, between, like).</li><li>Do ƒë√≥, <strong>th·ª© t·ª± c·ªôt quy·∫øt ƒë·ªãnh s·ªë l∆∞·ª£ng c·ªôt ch·ªâ m·ª•c c√≥ th·ªÉ kh·ªõp</strong>.</li></ul><p>V√≠ d·ª•:</p><ul><li>N·∫øu c√≥ ch·ªâ m·ª•c (a, b, c, d) v√† ƒëi·ªÅu ki·ªán truy v·∫•n l√† a = 1 v√† b = 2 v√† c &gt; 3 v√† d = 4, th√¨ ch·ªâ c√≥ th·ªÉ kh·ªõp v·ªõi a, b, c v√† kh√¥ng th·ªÉ kh·ªõp v·ªõi d. (ƒê∆°n gi·∫£n: ch·ªâ c√≥ th·ªÉ kh·ªõp v·ªõi c√°c tr∆∞·ªùng h·ª£p <strong>b·∫±ng nhau</strong>, kh√¥ng th·ªÉ kh·ªõp v·ªõi ph·∫°m vi)</li></ul><h3 id="rang-buoc" tabindex="-1"><a class="header-anchor" href="#rang-buoc"><span>R√†ng bu·ªôc</span></a></h3><p>C√≥ nh·ªØng r√†ng bu·ªôc n√†o trong c∆° s·ªü d·ªØ li·ªáu:</p><ul><li><code>NOT NULL</code> - ƒê∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ƒë·∫£m b·∫£o r·∫±ng n·ªôi dung c·ªßa tr∆∞·ªùng kh√¥ng th·ªÉ l√† gi√° tr·ªã r·ªóng (NULL).</li><li><code>UNIQUE</code> - N·ªôi dung c·ªßa tr∆∞·ªùng kh√¥ng ƒë∆∞·ª£c l·∫∑p l·∫°i, m·ªôt b·∫£ng c√≥ th·ªÉ c√≥ nhi·ªÅu r√†ng bu·ªôc <code>UNIQUE</code>.</li><li><code>PRIMARY KEY</code> - K·∫øt h·ª£p c√°c c·ªôt ho·∫∑c thu·ªôc t√≠nh trong b·∫£ng d·ªØ li·ªáu ƒë·ªÉ ƒë·ªãnh danh duy nh·∫•t v√† ho√†n ch·ªânh cho c√°c ƒë·ªëi t∆∞·ª£ng d·ªØ li·ªáu. M·ªôt b·∫£ng ch·ªâ ƒë∆∞·ª£c ph√©p c√≥ m·ªôt kh√≥a ch√≠nh. Gi√° tr·ªã c·ªßa kh√≥a ch√≠nh kh√¥ng th·ªÉ l√† gi√° tr·ªã r·ªóng (NULL).</li><li><code>FOREIGN KEY</code> - Kh√≥a ngo·∫°i trong m·ªôt b·∫£ng l√† kh√≥a ch√≠nh c·ªßa m·ªôt b·∫£ng kh√°c. N√≥ ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ngƒÉn ch·∫∑n c√°c h√†nh ƒë·ªông ph√° v·ª° k·∫øt n·ªëi gi·ªØa c√°c b·∫£ng v√† ngƒÉn ch·∫∑n vi·ªác ch√®n d·ªØ li·ªáu kh√¥ng h·ª£p l·ªá v√†o c·ªôt kh√≥a ngo·∫°i, v√¨ n√≥ ph·∫£i l√† m·ªôt trong c√°c gi√° tr·ªã trong b·∫£ng ƒë∆∞·ª£c ch·ªâ ƒë·ªãnh.</li><li><code>CHECK</code> - S·ª≠ d·ª•ng ƒë·ªÉ ki·ªÉm so√°t ph·∫°m vi gi√° tr·ªã c·ªßa tr∆∞·ªùng.</li></ul><h2 id="kiem-soat-ƒëong-thoi" tabindex="-1"><a class="header-anchor" href="#kiem-soat-ƒëong-thoi"><span>Ki·ªÉm so√°t ƒë·ªìng th·ªùi</span></a></h2><h3 id="khoa-lac-quan-va-khoa-bi-quan" tabindex="-1"><a class="header-anchor" href="#khoa-lac-quan-va-khoa-bi-quan"><span>Kh√≥a l·∫°c quan v√† kh√≥a bi quan</span></a></h3><blockquote><ul><li>Kh√≥a l·∫°c quan v√† kh√≥a bi quan trong c∆° s·ªü d·ªØ li·ªáu l√† g√¨?</li><li>L√†m th·∫ø n√†o ƒë·ªÉ th·ª±c hi·ªán kh√≥a l·∫°c quan v√† kh√≥a bi quan trong c∆° s·ªü d·ªØ li·ªáu?</li></ul></blockquote><p>ƒê·ªÉ ƒë·∫£m b·∫£o kh√¥ng x·∫£y ra xung ƒë·ªôt khi nhi·ªÅu giao d·ªãch truy c·∫≠p c√πng m·ªôt d·ªØ li·ªáu trong c∆° s·ªü d·ªØ li·ªáu v√† ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n c·ªßa giao d·ªãch, <strong>kh√≥a l·∫°c quan v√† kh√≥a bi quan l√† c√°c k·ªπ thu·∫≠t ch√≠nh ƒë∆∞·ª£c s·ª≠ d·ª•ng trong ki·ªÉm so√°t ƒë·ªìng th·ªùi</strong>.</p><ul><li><strong>Kh√≥a bi quan</strong> - Gi·∫£ ƒë·ªãnh r·∫±ng xung ƒë·ªôt s·∫Ω x·∫£y ra v√† ngƒÉn ch·∫∑n m·ªçi ho·∫°t ƒë·ªông c√≥ th·ªÉ vi ph·∫°m t√≠nh to√†n v·∫πn d·ªØ li·ªáu. <ul><li><strong>Kh√≥a ghi tr∆∞·ªõc khi truy v·∫•n d·ªØ li·ªáu v√† gi·ªØ kh√≥a cho ƒë·∫øn khi giao d·ªãch ƒë∆∞·ª£c ghi (COMMIT)</strong>.</li><li>C√°ch th·ª±c hi·ªán: S·ª≠ d·ª•ng c∆° ch·∫ø kh√≥a trong c∆° s·ªü d·ªØ li·ªáu.</li></ul></li><li><strong>Kh√≥a l·∫°c quan</strong> - Gi·∫£ ƒë·ªãnh r·∫±ng kh√¥ng c√≥ xung ƒë·ªôt v√† ch·ªâ ki·ªÉm tra t√≠nh to√†n v·∫πn d·ªØ li·ªáu khi th·ª±c hi·ªán thao t√°c ghi. <ul><li><strong>Kh√≥a khi thay ƒë·ªïi d·ªØ li·ªáu v√† ki·ªÉm tra xem c√≥ vi ph·∫°m t√≠nh to√†n v·∫πn d·ªØ li·ªáu khi ghi (COMMIT)</strong>.</li><li>C√°ch th·ª±c hi·ªán: S·ª≠ d·ª•ng phi√™n b·∫£n ho·∫∑c d·∫•u th·ªùi gian.</li></ul></li></ul><h3 id="khoa-hang-va-khoa-bang" tabindex="-1"><a class="header-anchor" href="#khoa-hang-va-khoa-bang"><span>Kh√≥a h√†ng v√† kh√≥a b·∫£ng</span></a></h3><blockquote><ul><li>Kh√≥a h√†ng v√† kh√≥a b·∫£ng l√† g√¨?</li><li>Khi n√†o s·ª≠ d·ª•ng kh√≥a h√†ng? Khi n√†o s·ª≠ d·ª•ng kh√≥a b·∫£ng?</li></ul></blockquote><p>T·ª´ quan ƒëi·ªÉm v·ªÅ m·ª©c ƒë·ªô chi ti·∫øt c·ªßa kh√≥a, MySQL cung c·∫•p hai c·∫•p ƒë·ªô kh√≥a: kh√≥a h√†ng v√† kh√≥a b·∫£ng.</p><ul><li><strong>Kh√≥a b·∫£ng (table lock)</strong> - Kh√≥a to√†n b·ªô b·∫£ng. Tr∆∞·ªõc khi ng∆∞·ªùi d√πng th·ª±c hi·ªán thao t√°c ghi tr√™n b·∫£ng, h·ªç ph·∫£i l·∫•y kh√≥a ghi tr∆∞·ªõc, ƒëi·ªÅu n√†y s·∫Ω ch·∫∑n t·∫•t c·∫£ c√°c ho·∫°t ƒë·ªông ƒë·ªçc v√† ghi c·ªßa ng∆∞·ªùi d√πng kh√°c tr√™n b·∫£ng ƒë√≥. Ch·ªâ khi kh√¥ng c√≥ kh√≥a ghi, ng∆∞·ªùi d√πng kh√°c m·ªõi c√≥ th·ªÉ l·∫•y kh√≥a ƒë·ªçc, c√°c kh√≥a ƒë·ªçc kh√¥ng t∆∞∆°ng t√°c l·∫´n nhau.</li><li><strong>Kh√≥a h√†ng (row lock)</strong> - Ch·ªâ kh√≥a c√°c b·∫£n ghi h√†ng c·ª• th·ªÉ, ƒëi·ªÅu n√†y cho ph√©p c√°c qu√° tr√¨nh kh√°c v·∫´n c√≥ th·ªÉ thao t√°c tr√™n c√°c b·∫£n ghi kh√°c trong c√πng m·ªôt b·∫£ng.</li></ul><p>Hai y·∫øu t·ªë c·∫ßn c√¢n nh·∫Øc:</p><ul><li><strong>L∆∞·ª£ng d·ªØ li·ªáu b·ªã kh√≥a c√†ng nh·ªè, t·∫ßn su·∫•t c·∫°nh tranh kh√≥a c√†ng √≠t v√† m·ª©c ƒë·ªô ƒë·ªìng th·ªùi c·ªßa h·ªá th·ªëng c√†ng cao</strong>.</li><li><strong>ƒê·ªô chi ti·∫øt c·ªßa kh√≥a c√†ng nh·ªè th√¨ chi ph√≠ ho·∫°t ƒë·ªông c·ªßa h·ªá th·ªëng c√†ng l·ªõn</strong>¬†.</li></ul><p>Trong <code>InnoDB</code>, kh√≥a h√†ng ƒë∆∞·ª£c th·ª±c hi·ªán b·∫±ng c√°ch kh√≥a c√°c m·ª•c ch·ªâ m·ª•c tr√™n ch·ªâ m·ª•c. <strong>N·∫øu kh√¥ng c√≥ ch·ªâ m·ª•c, <code>InnoDB</code> s·∫Ω kh√≥a b·∫£n ghi th√¥ng qua ch·ªâ m·ª•c gom nh√≥m ·∫©n.</strong></p><h3 id="khoa-ƒëoc-va-khoa-ghi" tabindex="-1"><a class="header-anchor" href="#khoa-ƒëoc-va-khoa-ghi"><span>Kh√≥a ƒë·ªçc v√† kh√≥a ghi</span></a></h3><blockquote><ul><li>Kh√≥a ƒë·ªçc v√† kh√≥a ghi l√† g√¨?</li></ul></blockquote><ul><li>Kh√≥a ghi (Exclusive Lock), vi·∫øt t·∫Øt l√† X Lock, c√≤n ƒë∆∞·ª£c g·ªçi l√† kh√≥a vi·∫øt. C√°ch s·ª≠ d·ª•ng: <code>SELECT ‚Ä¶ FOR UPDATE;</code></li><li>Kh√≥a ƒë·ªçc (Shared Lock), vi·∫øt t·∫Øt l√† S Lock, c√≤n ƒë∆∞·ª£c g·ªçi l√† kh√≥a ƒë·ªçc. C√°ch s·ª≠ d·ª•ng: <code>SELECT ‚Ä¶ LOCK IN SHARE MODE;</code></li></ul><p>M·ªëi quan h·ªá gi·ªØa kh√≥a ghi v√† kh√≥a ƒë·ªçc, n√≥i m·ªôt c√°ch ƒë∆°n gi·∫£n: <strong>Khi c√≥ kh√≥a ghi, c√°c giao d·ªãch kh√°c kh√¥ng th·ªÉ th·ª±c hi·ªán b·∫•t k·ª≥ ho·∫°t ƒë·ªông n√†o</strong>.</p><p><strong>Trong <code>InnoDB</code>, kh√≥a h√†ng, kh√≥a kho·∫£ng tr·ªëng v√† kh√≥a next-key ƒë·ªÅu thu·ªôc lo·∫°i kh√≥a ghi</strong>.</p><h3 id="khoa-y-chi" tabindex="-1"><a class="header-anchor" href="#khoa-y-chi"><span>Kh√≥a √Ω ch√≠</span></a></h3><blockquote><ul><li>Kh√≥a √Ω ch√≠ l√† g√¨?</li><li>Kh√≥a √Ω ch√≠ ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ l√†m g√¨?</li></ul></blockquote><p>Kh√≥a √Ω ch√≠ (Intention Lock) ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ h·ªó tr·ª£ vi·ªác kh√≥a h√†ng v√† kh√≥a b·∫£ng ƒë·ªìng th·ªùi khi c·∫ßn thi·∫øt. S·ª≠ d·ª•ng kh√≥a √Ω ch√≠ (Intention Lock) gi√∫p d·ªÖ d√†ng h∆°n trong vi·ªác h·ªó tr·ª£ nhi·ªÅu c·∫•p ƒë·ªô kh√≥a.</p><p><strong>Kh√≥a √Ω ch√≠ ƒë∆∞·ª£c <code>InnoDB</code> t·ª± ƒë·ªông th√™m v√†o, kh√¥ng c·∫ßn s·ª± can thi·ªáp c·ªßa ng∆∞·ªùi d√πng</strong>.</p><h3 id="mvcc" tabindex="-1"><a class="header-anchor" href="#mvcc"><span>MVCC</span></a></h3><blockquote><p>MVCC l√† g√¨?</p><p>MVCC ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ l√†m g√¨? Gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ g√¨?</p><p>Nguy√™n t·∫Øc c·ªßa MVCC l√† g√¨?</p></blockquote><p>Ki·ªÉm so√°t ƒë·ªìng th·ªùi nhi·ªÅu phi√™n b·∫£n (Multi-Version Concurrency Control, MVCC) l√† m·ªôt c√°ch c·ª• th·ªÉ m√† <code>InnoDB</code> s·ª≠ d·ª•ng ƒë·ªÉ th·ª±c hi·ªán c√°c c·∫•p ƒë·ªô c√¥ l·∫≠p, bao g·ªìm ƒë·ªçc ƒë√£ x√°c nh·∫≠n v√† ƒë·ªçc l·∫∑p l·∫°i. ƒê·ªìng th·ªùi, n√≥ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ ƒë·ªçc b·∫©n v√† ƒë·ªçc kh√¥ng l·∫∑p l·∫°i.</p><p>Nguy√™n t·∫Øc c·ªßa MVCC l√†:</p><ul><li>L∆∞u tr·ªØ b·∫£n ch·ª•p c·ªßa d·ªØ li·ªáu t·∫°i m·ªôt th·ªùi ƒëi·ªÉm nh·∫•t ƒë·ªãnh. <strong>C√°c ho·∫°t ƒë·ªông ghi (DELETE, INSERT, UPDATE) c·∫≠p nh·∫≠t b·∫£n ch·ª•p phi√™n b·∫£n m·ªõi nh·∫•t, trong khi c√°c ho·∫°t ƒë·ªông ƒë·ªçc l·∫•y b·∫£n ch·ª•p phi√™n b·∫£n c≈©, kh√¥ng c√≥ s·ª± t∆∞∆°ng t√°c</strong>. ƒêi·ªÅu n√†y t∆∞∆°ng t·ª± nh∆∞ c∆° ch·∫ø CopyOnWrite.</li><li>ƒê·ªçc b·∫©n v√† ƒë·ªçc kh√¥ng l·∫∑p l·∫°i l√† do giao d·ªãch ƒë·ªçc d·ªØ li·ªáu ch∆∞a ƒë∆∞·ª£c x√°c nh·∫≠n t·ª´ c√°c giao d·ªãch kh√°c. ƒê·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ n√†y, <strong>MVCC quy ƒë·ªãnh ch·ªâ c√≥ th·ªÉ ƒë·ªçc c√°c b·∫£n ch·ª•p ƒë√£ x√°c nh·∫≠n</strong>. M·ªôt giao d·ªãch c√≥ th·ªÉ ƒë·ªçc b·∫£n ch·ª•p ch∆∞a x√°c nh·∫≠n c·ªßa ch√≠nh n√≥, ƒëi·ªÅu n√†y kh√¥ng ƒë∆∞·ª£c coi l√† ƒë·ªçc b·∫©n.</li></ul><h3 id="khoa-next-key" tabindex="-1"><a class="header-anchor" href="#khoa-next-key"><span>Kh√≥a Next-key</span></a></h3><p>Kh√≥a Next-key (Next-Key Lock) l√† m·ªôt c√°ch th·ª©c kh√≥a ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi <code>InnoDB</code> trong vi·ªác tri·ªÉn khai kh√≥a.</p><p>MVCC kh√¥ng th·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ ƒë·ªçc kh√¥ng ƒë·ªìng nh·∫•t, <strong>kh√≥a Next-key ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ ƒë·ªçc kh√¥ng ƒë·ªìng nh·∫•t</strong>. Trong c·∫•p ƒë·ªô c√¥ l·∫≠p ƒë·ªçc l·∫∑p l·∫°i (REPEATABLE READ), s·ª≠ d·ª•ng <code>MVCC + Next-Key Lock</code> c√≥ th·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ ƒë·ªçc kh√¥ng ƒë·ªìng nh·∫•t.</p><p>Ngo√†i ra, d·ª±a tr√™n ƒëi·ªÅu ki·ªán truy v·∫•n SQL kh√°c nhau, c≈©ng c√≥ ba tr∆∞·ªùng h·ª£p kh√≥a c·∫ßn ch√∫ √Ω.</p><ul><li>Kh√≥a b·∫£n ghi (<code>Record Lock</code>) - <strong>Kh√≥a c√°c m·ª•c ch·ªâ m·ª•c tr√™n b·∫£n ghi, n·∫øu kh√¥ng c√≥ ch·ªâ m·ª•c, s·ª≠ d·ª•ng kh√≥a b·∫£ng</strong>.</li><li>Kh√≥a kho·∫£ng tr·ªëng (<code>Gap Lock</code>) - Kh√≥a kho·∫£ng tr·ªëng gi·ªØa c√°c m·ª•c ch·ªâ m·ª•c. Kh√≥a c√°c kho·∫£ng tr·ªëng gi·ªØa c√°c m·ª•c ch·ªâ m·ª•c, nh∆∞ng kh√¥ng bao g·ªìm m·ª•c ch·ªâ m·ª•c ch√≠nh n√≥. V√≠ d·ª•, khi m·ªôt giao d·ªãch th·ª±c hi·ªán c√¢u l·ªánh sau, c√°c giao d·ªãch kh√°c kh√¥ng th·ªÉ ch√®n gi√° tr·ªã 15 v√†o c·ªôt c trong b·∫£ng t. <code>SELECT c FROM t WHERE c BETWEEN 10 and 20 FOR UPDATE;</code></li><li>Kh√≥a Next-key (<code>Next-Key Lock</code>) - K·∫øt h·ª£p gi·ªØa <code>Record Lock</code> v√† <code>Gap Lock</code>, kh√≥a k·∫øt h·ª£p gi·ªØa kh√≥a b·∫£n ghi tr√™n m·ªôt kho·∫£ng tr·ªëng. N√≥ kh√≥a m·ªôt kho·∫£ng tr·ªëng m·ªü ph√≠a tr∆∞·ªõc v√† ƒë√≥ng ph√≠a sau.</li></ul><p>Ch·ªâ m·ª•c ƒë∆∞·ª£c chia th√†nh hai lo·∫°i: ch·ªâ m·ª•c kh√≥a ch√≠nh (primary key index) v√† ch·ªâ m·ª•c kh√¥ng ph·∫£i kh√≥a ch√≠nh (non-primary key index). N·∫øu m·ªôt c√¢u l·ªánh SQL thao t√°c tr√™n ch·ªâ m·ª•c kh√≥a ch√≠nh, MySQL s·∫Ω kh√≥a ch·ªâ m·ª•c kh√≥a ch√≠nh ƒë√≥. N·∫øu m·ªôt c√¢u l·ªánh thao t√°c tr√™n ch·ªâ m·ª•c kh√¥ng ph·∫£i kh√≥a ch√≠nh, MySQL s·∫Ω kh√≥a ch·ªâ m·ª•c kh√¥ng ph·∫£i kh√≥a ch√≠nh ƒë√≥ tr∆∞·ªõc, sau ƒë√≥ kh√≥a ch·ªâ m·ª•c kh√≥a ch√≠nh li√™n quan. Trong c√°c ho·∫°t ƒë·ªông <code>UPDATE</code> v√† <code>DELETE</code>, MySQL kh√¥ng ch·ªâ kh√≥a t·∫•t c·∫£ c√°c b·∫£n ghi ch·ªâ m·ª•c ƒë∆∞·ª£c qu√©t b·ªüi ƒëi·ªÅu ki·ªán <code>WHERE</code>, m√† c√≤n kh√≥a c√°c gi√° tr·ªã kh√≥a li·ªÅn k·ªÅ, c√≤n ƒë∆∞·ª£c g·ªçi l√† kh√≥a k·∫ø ti·∫øp (next-key lock).</p><p>Khi hai giao d·ªãch ƒë∆∞·ª£c th·ª±c hi·ªán c√πng m·ªôt l√∫c, m·ªôt giao d·ªãch kh√≥a ch·ªâ m·ª•c kh√≥a ch√≠nh v√† ƒë·ª£i c√°c ch·ªâ m·ª•c li√™n quan. Giao d·ªãch kh√°c kh√≥a ch·ªâ m·ª•c kh√¥ng ph·∫£i kh√≥a ch√≠nh v√† ƒë·ª£i ch·ªâ m·ª•c kh√≥a ch√≠nh. ƒêi·ªÅu n√†y d·∫´n ƒë·∫øn t√¨nh tr·∫°ng x·∫£y ra deadlock. Sau khi x·∫£y ra deadlock, <code>InnoDB</code> th∆∞·ªùng c√≥ th·ªÉ ph√°t hi·ªán v√† gi·∫£i ph√≥ng kh√≥a c·ªßa m·ªôt giao d·ªãch ƒë·ªÉ quay tr·ªü l·∫°i tr·∫°ng th√°i ban ƒë·∫ßu, cho ph√©p giao d·ªãch kh√°c l·∫•y kh√≥a v√† ho√†n th√†nh giao d·ªãch.</p><h2 id="giao-dich" tabindex="-1"><a class="header-anchor" href="#giao-dich"><span>Giao d·ªãch</span></a></h2><blockquote><p>Giao d·ªãch ƒë∆°n gi·∫£n l√† t·∫•t c·∫£ c√°c ho·∫°t ƒë·ªông ƒë∆∞·ª£c th·ª±c hi·ªán trong m·ªôt phi√™n l√†m vi·ªác (session) ph·∫£i c√πng th√†nh c√¥ng ho·∫∑c c√πng th·∫•t b·∫°i. C·ª• th·ªÉ, giao d·ªãch l√† m·ªôt t·∫≠p h·ª£p c√°c ho·∫°t ƒë·ªông th·ªèa m√£n c√°c ƒë·∫∑c ƒëi·ªÉm ACID, c√≥ th·ªÉ ƒë∆∞·ª£c g·ª≠i ƒëi b·∫±ng c√°ch s·ª≠ d·ª•ng¬†<code>Commit</code>¬†ƒë·ªÉ x√°c nh·∫≠n giao d·ªãch ho·∫∑c s·ª≠ d·ª•ng¬†<code>Rollback</code>¬†ƒë·ªÉ ho√†n t√°c.</p></blockquote><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/185b9c49-4c13-4241-a848-fbff85c03a64.png" alt="185b9c49-4c13-4241-a848-fbff85c03a64.png" tabindex="0" loading="lazy"><figcaption>185b9c49-4c13-4241-a848-fbff85c03a64.png</figcaption></figure><h3 id="acid" tabindex="-1"><a class="header-anchor" href="#acid"><span>ACID</span></a></h3><p>ACID - B·ªën y·∫øu t·ªë c∆° b·∫£n ƒë·ªÉ th·ª±c hi·ªán giao d·ªãch c∆° s·ªü d·ªØ li·ªáu m·ªôt c√°ch ch√≠nh x√°c:</p><ul><li><strong>T√≠nh nguy√™n t·ª≠ (Atomicity)</strong></li><li><strong>T√≠nh nh·∫•t qu√°n (Consistency)</strong></li><li><strong>T√≠nh c√¥ l·∫≠p (Isolation)</strong></li><li><strong>T√≠nh b·ªÅn v·ªØng (Durability)</strong></li></ul><p><strong>H·ªá th·ªëng c∆° s·ªü d·ªØ li·ªáu h·ªó tr·ª£ giao d·ªãch ph·∫£i c√≥ b·ªën t√≠nh ch·∫•t n√†y, n·∫øu kh√¥ng, kh√¥ng th·ªÉ ƒë·∫£m b·∫£o t√≠nh ch√≠nh x√°c c·ªßa d·ªØ li·ªáu trong qu√° tr√¨nh giao d·ªãch.</strong></p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/acid.png" alt="acid.png" tabindex="0" loading="lazy"><figcaption>acid.png</figcaption></figure><h3 id="van-ƒëe-nhat-quan-trong-moi-truong-ƒëong-thoi" tabindex="-1"><a class="header-anchor" href="#van-ƒëe-nhat-quan-trong-moi-truong-ƒëong-thoi"><span>V·∫•n ƒë·ªÅ nh·∫•t qu√°n trong m√¥i tr∆∞·ªùng ƒë·ªìng th·ªùi</span></a></h3><p>Trong m√¥i tr∆∞·ªùng ƒë·ªìng th·ªùi, r·∫•t kh√≥ ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh c√¥ l·∫≠p c·ªßa giao d·ªãch, do ƒë√≥ c√≥ nhi·ªÅu v·∫•n ƒë·ªÅ v·ªÅ nh·∫•t qu√°n trong m√¥i tr∆∞·ªùng ƒë·ªìng th·ªùi.</p><ul><li><strong>M·∫•t m√°t thay ƒë·ªïi</strong></li></ul><p>Hai giao d·ªãch T1¬†v√† T2¬†c√πng s·ª≠a ƒë·ªïi m·ªôt d·ªØ li·ªáu, T1¬†s·ª≠a ƒë·ªïi tr∆∞·ªõc, T2¬†s·ª≠a ƒë·ªïi sau, s·ª≠a ƒë·ªïi c·ªßa T2¬†ghi ƒë√® l√™n s·ª≠a ƒë·ªïi c·ªßa T1.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721002023.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><ul><li><strong>ƒê·ªçc d·ªØ li·ªáu b·∫©n (dirty read)</strong></li></ul><p>T1¬†s·ª≠a ƒë·ªïi m·ªôt d·ªØ li·ªáu, T2¬†ƒë·ªçc d·ªØ li·ªáu n√†y sau ƒë√≥. N·∫øu T1¬†h·ªßy b·ªè s·ª≠a ƒë·ªïi n√†y, d·ªØ li·ªáu m√† T2¬†ƒë·ªçc l√† d·ªØ li·ªáu b·∫©n.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202307210021321.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><ul><li><strong>ƒê·ªçc kh√¥ng nh·∫•t qu√°n (un-repeatable read)</strong></li></ul><p>T2¬†ƒë·ªçc m·ªôt d·ªØ li·ªáu, T1¬†s·ª≠a ƒë·ªïi d·ªØ li·ªáu n√†y. N·∫øu T2¬†ƒë·ªçc l·∫°i d·ªØ li·ªáu n√†y, k·∫øt qu·∫£ ƒë·ªçc s·∫Ω kh√°c v·ªõi l·∫ßn ƒë·ªçc tr∆∞·ªõc.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721002326.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><ul><li><strong>ƒê·ªçc d·ªØ li·ªáu ·∫£o (phantom read)</strong></li></ul><p>T1¬†ƒë·ªçc m·ªôt ph·∫°m vi d·ªØ li·ªáu, T2¬†ch√®n d·ªØ li·ªáu m·ªõi v√†o ph·∫°m vi n√†y, T1¬†ƒë·ªçc l·∫°i ph·∫°m vi d·ªØ li·ªáu n√†y, k·∫øt qu·∫£ ƒë·ªçc s·∫Ω kh√°c v·ªõi l·∫ßn ƒë·ªçc tr∆∞·ªõc.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721002333.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>Gi·∫£i ph√°p cho v·∫•n ƒë·ªÅ nh·∫•t qu√°n trong m√¥i tr∆∞·ªùng ƒë·ªìng th·ªùi:</p><p>V·∫•n ƒë·ªÅ nh·∫•t qu√°n trong m√¥i tr∆∞·ªùng ƒë·ªìng th·ªùi ch·ªß y·∫øu xu·∫•t ph√°t t·ª´ vi·ªác vi ph·∫°m t√≠nh c√¥ l·∫≠p c·ªßa giao d·ªãch. Gi·∫£i ph√°p l√† s·ª≠ d·ª•ng ki·ªÉm so√°t ƒë·ªìng th·ªùi ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh c√¥ l·∫≠p.</p><p>Ki·ªÉm so√°t ƒë·ªìng th·ªùi c√≥ th·ªÉ ƒë∆∞·ª£c th·ª±c hi·ªán b·∫±ng c√°ch s·ª≠ d·ª•ng kh√≥a, nh∆∞ng thao t√°c kh√≥a ph·ª©c t·∫°p v√† ph·ª• thu·ªôc v√†o ng∆∞·ªùi d√πng t·ª± ƒëi·ªÅu khi·ªÉn. H·ªá qu·∫£n tr·ªã c∆° s·ªü d·ªØ li·ªáu cung c·∫•p c√°c c·∫•p ƒë·ªô c√¥ l·∫≠p giao d·ªãch ƒë·ªÉ ng∆∞·ªùi d√πng x·ª≠ l√Ω v·∫•n ƒë·ªÅ nh·∫•t qu√°n trong m√¥i tr∆∞·ªùng ƒë·ªìng th·ªùi m·ªôt c√°ch d·ªÖ d√†ng h∆°n.</p><h3 id="muc-ƒëo-co-lap-isolation-level" tabindex="-1"><a class="header-anchor" href="#muc-ƒëo-co-lap-isolation-level"><span>M·ª©c ƒë·ªô c·ªô l√¢p (Isolation Level)</span></a></h3><p>C·∫•p ƒë·ªô c√¥ l·∫≠p c∆° s·ªü d·ªØ li·ªáu:</p><ul><li><strong><code>ƒê·ªçc ch∆∞a cam k·∫øt</code>¬†(READ UNCOMMITTED)</strong>¬†- C√°c s·ª≠a ƒë·ªïi trong giao d·ªãch, ngay c·∫£ khi ch∆∞a ƒë∆∞·ª£c x√°c nh·∫≠n, c≈©ng c√≥ th·ªÉ nh√¨n th·∫•y b·ªüi c√°c giao d·ªãch kh√°c.</li><li><strong><code>ƒê·ªçc ƒë√£ cam k·∫øt</code>¬†(READ COMMITTED)</strong>¬†- M·ªôt giao d·ªãch ch·ªâ c√≥ th·ªÉ ƒë·ªçc c√°c s·ª≠a ƒë·ªïi ƒë√£ ƒë∆∞·ª£c x√°c nh·∫≠n c·ªßa c√°c giao d·ªãch kh√°c. Nghƒ©a l√† c√°c s·ª≠a ƒë·ªïi c·ªßa m·ªôt giao d·ªãch trong qu√° tr√¨nh th·ª±c hi·ªán ch∆∞a ƒë∆∞·ª£c nh√¨n th·∫•y b·ªüi c√°c giao d·ªãch kh√°c.</li><li><strong><code>ƒê·ªçc l·∫∑p l·∫°i</code>¬†(REPEATABLE READ)</strong>¬†- ƒê·∫£m b·∫£o k·∫øt qu·∫£ ƒë·ªçc c·ªßa c√πng m·ªôt d·ªØ li·ªáu trong m·ªôt giao d·ªãch l√† nh∆∞ nhau.</li><li><strong><code>Tu·∫ßn t·ª± ho√°</code>¬†(SERIALIZABLE)</strong>¬†- Bu·ªôc c√°c giao d·ªãch th·ª±c hi·ªán tu·∫ßn t·ª±.</li></ul><p>C·∫•p ƒë·ªô c√¥ l·∫≠p gi·∫£i quy·∫øt c√°c v·∫•n ƒë·ªÅ nh·∫•t qu√°n:</p><table><thead><tr><th style="text-align:center;">C·∫•p ƒë·ªô c√¥ l·∫≠p</th><th style="text-align:center;">ƒê·ªçc b·∫©n</th><th style="text-align:center;">ƒê·ªçc kh√¥ng nh·∫•t qu√°n</th><th style="text-align:center;">ƒê·ªçc d·ªØ li·ªáu ·∫£o</th></tr></thead><tbody><tr><td style="text-align:center;">ƒê·ªçc ch∆∞a cam k·∫øt</td><td style="text-align:center;">‚ùå</td><td style="text-align:center;">‚ùå</td><td style="text-align:center;">‚ùå</td></tr><tr><td style="text-align:center;">ƒê√£ ƒë√£ cam k·∫øt</td><td style="text-align:center;">‚úîÔ∏è</td><td style="text-align:center;">‚ùå</td><td style="text-align:center;">‚ùå</td></tr><tr><td style="text-align:center;">ƒê·ªçc l·∫∑p l·∫°i</td><td style="text-align:center;">‚úîÔ∏è</td><td style="text-align:center;">‚úîÔ∏è</td><td style="text-align:center;">‚ùå</td></tr><tr><td style="text-align:center;">Tu·∫ßn t·ª± ho√°</td><td style="text-align:center;">‚úîÔ∏è</td><td style="text-align:center;">‚úîÔ∏è</td><td style="text-align:center;">‚úîÔ∏è</td></tr></tbody></table><h3 id="giao-dich-phan-tan" tabindex="-1"><a class="header-anchor" href="#giao-dich-phan-tan"><span>Giao d·ªãch ph√¢n t√°n</span></a></h3><p>Trong m·ªôt n√∫t d·ªØ li·ªáu duy nh·∫•t, giao d·ªãch ch·ªâ gi·ªõi h·∫°n trong vi·ªác ki·ªÉm so√°t truy c·∫≠p v√†o t√†i nguy√™n c∆° s·ªü d·ªØ li·ªáu duy nh·∫•t, ƒë∆∞·ª£c g·ªçi l√†¬†<strong>giao d·ªãch c·ª•c b·ªô</strong>. H·∫ßu h·∫øt c√°c h·ªá qu·∫£n tr·ªã c∆° s·ªü d·ªØ li·ªáu quan h·ªá ƒë√£ ƒë∆∞·ª£c ph√°t tri·ªÉn cung c·∫•p h·ªó tr·ª£ g·ªëc cho giao d·ªãch c·ª•c b·ªô.</p><p><strong>Giao d·ªãch ph√¢n t√°n</strong>¬†l√† khi c√°c b√™n tham gia giao d·ªãch, m√°y ch·ªß h·ªó tr·ª£ giao d·ªãch, m√°y ch·ªß t√†i nguy√™n v√† tr√¨nh qu·∫£n l√Ω giao d·ªãch n·∫±m tr√™n c√°c n√∫t kh√°c nhau c·ªßa h·ªá th·ªëng ph√¢n t√°n.</p><h4 id="cam-ket-hai-giai-ƒëoan" tabindex="-1"><a class="header-anchor" href="#cam-ket-hai-giai-ƒëoan"><span>Cam k·∫øt hai giai ƒëo·∫°n</span></a></h4><p>Cam k·∫øt hai giai ƒëo·∫°n (XA) c√≥ √≠ch cho c√°c giao d·ªãch ph√¢n t√°n. L·ª£i th·∫ø l·ªõn nh·∫•t c·ªßa n√≥ l√† kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn ng∆∞·ªùi d√πng, ng∆∞·ªùi d√πng c√≥ th·ªÉ s·ª≠ d·ª•ng giao d·ªãch ph√¢n t√°n d·ª±a tr√™n giao th·ª©c XA nh∆∞ s·ª≠ d·ª•ng giao d·ªãch c·ª•c b·ªô. Giao th·ª©c XA ƒë·∫£m b·∫£o t√≠nh¬†<code>ACID</code>¬†c·ªßa giao d·ªãch.</p><p>ƒê·∫£m b·∫£o t√≠nh¬†<code>ACID</code>¬†c·ªßa giao d·ªãch l√† m·ªôt con dao hai l∆∞·ª°i. Trong qu√° tr√¨nh th·ª±c hi·ªán giao d·ªãch, t·∫•t c·∫£ c√°c t√†i nguy√™n c·∫ßn ƒë∆∞·ª£c kh√≥a, ƒëi·ªÅu n√†y ph√π h·ª£p v·ªõi giao d·ªãch ng·∫Øn th·ªùi gian x√°c ƒë·ªãnh. ƒê·ªëi v·ªõi giao d·ªãch d√†i, vi·ªác chi·∫øm gi·ªØ t√†i nguy√™n trong su·ªët qu√° tr√¨nh giao d·ªãch s·∫Ω l√†m gi·∫£m hi·ªáu su·∫•t ƒë√°ng k·ªÉ ƒë·ªëi v·ªõi h·ªá th·ªëng kinh doanh ph·ª• thu·ªôc v√†o d·ªØ li·ªáu t·∫≠p trung. Do ƒë√≥, trong c√°c t√¨nh hu·ªëng n∆°i hi·ªáu su·∫•t ƒë·ªìng th·ªùi l√† quan tr·ªçng nh·∫•t, giao d·ªãch ph√¢n t√°n d·ª±a tr√™n giao th·ª©c XA kh√¥ng ph·∫£i l√† l·ª±a ch·ªçn t·ªët nh·∫•t.</p><h4 id="giao-dich-mem" tabindex="-1"><a class="header-anchor" href="#giao-dich-mem"><span>Giao d·ªãch m·ªÅm</span></a></h4><p>N·∫øu giao d·ªãch th·ªèa m√£n c√°c y·∫øu t·ªë¬†<code>ACID</code>, n√≥ ƒë∆∞·ª£c g·ªçi l√† giao d·ªãch c·ª©ng. N·∫øu giao d·ªãch d·ª±a tr√™n y·∫øu t·ªë¬†<code>BASE</code>, n√≥ ƒë∆∞·ª£c g·ªçi l√† giao d·ªãch m·ªÅm.¬†<code>BASE</code>¬†l√† vi·∫øt t·∫Øt c·ªßa <strong>Basic Availability</strong>, <strong>Soft state</strong> v√† <strong>Eventual consistency</strong>.</p><ul><li>Basic Availability ƒë·∫£m b·∫£o c√°c b√™n tham gia giao d·ªãch kh√¥ng c·∫ßn ph·∫£i c√πng online.</li><li>Soft state cho ph√©p c·∫≠p nh·∫≠t tr·∫°ng th√°i c·ªßa h·ªá th·ªëng c√≥ m·ªôt ƒë·ªô tr·ªÖ nh·∫•t ƒë·ªãnh, ƒë·ªô tr·ªÖ n√†y c√≥ th·ªÉ kh√¥ng th·ªÉ nh·∫≠n th·∫•y ƒë∆∞·ª£c b·ªüi kh√°ch h√†ng.</li><li>Eventual consistency th∆∞·ªùng ƒë∆∞·ª£c ƒë·∫£m b·∫£o b·∫±ng c√°ch truy·ªÅn tin nh·∫Øn ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n c·ªßa h·ªá th·ªëng.</li></ul><p>Giao d·ªãch m·ªÅm d·ª±a tr√™n y·∫øu t·ªë¬†<code>BASE</code>¬†kh√¥ng ph·∫£i l√† gi·∫£i ph√°p t·ªëi ∆∞u cho t·∫•t c·∫£ c√°c t√¨nh hu·ªëng. Ch·ªâ khi n√≥ ph√π h·ª£p nh·∫•t v·ªõi t√¨nh hu·ªëng c·ª• th·ªÉ, giao d·ªãch c·ª©ng d·ª±a tr√™n y·∫øu t·ªë¬†<code>ACID</code>¬†v√† giao d·ªãch m·ªÅm d·ª±a tr√™n y·∫øu t·ªë¬†<code>BASE</code>¬†m·ªõi c√≥ th·ªÉ ph√°t huy t·ªëi ƒëa ∆∞u ƒëi·ªÉm c·ªßa ch√∫ng. B·∫£ng d∆∞·ªõi ƒë√¢y so s√°nh chi ti·∫øt gi·ªØa c√°c gi·∫£i ph√°p giao d·ªãch.</p><h4 id="so-sanh-cac-giai-phap-giao-dich" tabindex="-1"><a class="header-anchor" href="#so-sanh-cac-giai-phap-giao-dich"><span>So s√°nh c√°c gi·∫£i ph√°p giao d·ªãch</span></a></h4><table><thead><tr><th style="text-align:left;"></th><th style="text-align:left;">Giao d·ªãch c·ª•c b·ªô</th><th style="text-align:left;">Hai giai ƒëo·∫°n giao d·ªãch</th><th style="text-align:left;">Giao d·ªãch m·ªÅm</th></tr></thead><tbody><tr><td style="text-align:left;">S·ª≠a ƒë·ªïi</td><td style="text-align:left;">Kh√¥ng h·ªó tr·ª£</td><td style="text-align:left;">H·ªó tr·ª£</td><td style="text-align:left;">H·ªó tr·ª£</td></tr><tr><td style="text-align:left;">C√¥ l·∫≠p</td><td style="text-align:left;">Kh√¥ng h·ªó tr·ª£</td><td style="text-align:left;">H·ªó tr·ª£</td><td style="text-align:left;">Do b√™n tham gia ƒë·∫£m b·∫£o</td></tr><tr><td style="text-align:left;">Hi·ªáu su·∫•t</td><td style="text-align:left;">Kh√¥ng ·∫£nh h∆∞·ªüng</td><td style="text-align:left;">Gi·∫£m nghi√™m tr·ªçng</td><td style="text-align:left;">Gi·∫£m nh·∫π</td></tr><tr><td style="text-align:left;">Ph√π h·ª£p</td><td style="text-align:left;">Kh√¥ng ph√π h·ª£p</td><td style="text-align:left;">Giao d·ªãch ng·∫Øn &amp; √≠t ƒë·ªìng th·ªùi</td><td style="text-align:left;">Giao d·ªãch d√†i &amp; nhi·ªÅu ƒë·ªìng th·ªùi</td></tr></tbody></table><h2 id="phan-chia-co-so-du-lieu-va-bang" tabindex="-1"><a class="header-anchor" href="#phan-chia-co-so-du-lieu-va-bang"><span>Ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng</span></a></h2><h3 id="khai-niem" tabindex="-1"><a class="header-anchor" href="#khai-niem"><span>Kh√°i ni·ªám</span></a></h3><blockquote><p>Ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng l√† g√¨? Ph√¢n chia d·ªçc l√† g√¨? Ph√¢n chia ngang l√† g√¨? Sharding l√† g√¨?</p><p>Ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng ƒë∆∞·ª£c th·ª±c hi·ªán ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ g√¨?</p><p>Ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng c√≥ nh·ªØng ∆∞u ƒëi·ªÉm g√¨?</p><p>Ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng c√≥ nh·ªØng chi·∫øn l∆∞·ª£c n√†o?</p></blockquote><p>Ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng l√† √Ω t∆∞·ªüng c∆° b·∫£n l√† chia nh·ªè d·ªØ li·ªáu ban ƒë·∫ßu th√†nh nhi·ªÅu ph·∫ßn v√† l∆∞u tr·ªØ tr√™n c√°c c∆° s·ªü d·ªØ li·ªáu ho·∫∑c b·∫£ng kh√°c nhau.</p><p>Ph√¢n v√πng v√† ph√¢n b·∫£ng lu√¥n nh·∫±m h·ªó tr·ª£ hai v·∫•n ƒë·ªÅ ch√≠nh: <strong>ƒë·ªìng th·ªùi x·ª≠ l√Ω nhi·ªÅu y√™u c·∫ßu v√† x·ª≠ l√Ω l∆∞·ª£ng d·ªØ li·ªáu l·ªõn</strong>.</p><h4 id="phan-chia-theo-chieu-doc" tabindex="-1"><a class="header-anchor" href="#phan-chia-theo-chieu-doc"><span>Ph√¢n chia theo chi·ªÅu d·ªçc</span></a></h4><blockquote><p><strong>Ph√¢n chia theo chi·ªÅu d·ªçc</strong>, l√† vi·ªác <strong>ph√¢n t√°ch m·ªôt b·∫£ng c√≥ nhi·ªÅu c·ªôt th√†nh nhi·ªÅu b·∫£ng ho·∫∑c tr√™n nhi·ªÅu c∆° s·ªü d·ªØ li·ªáu</strong>. Th√¥ng th∆∞·ªùng, ta s·∫Ω <strong>ƒë·∫∑t c√°c c·ªôt √≠t h∆°n v√† ƒë∆∞·ª£c truy c·∫≠p th∆∞·ªùng xuy√™n v√†o m·ªôt b·∫£ng ri√™ng</strong>, sau ƒë√≥ <strong>ƒë·∫∑t c√°c c·ªôt nhi·ªÅu h∆°n v√† ƒë∆∞·ª£c truy c·∫≠p √≠t th∆∞·ªùng xuy√™n v√†o m·ªôt b·∫£ng kh√°c</strong>. B·ªüi v√¨ c∆° s·ªü d·ªØ li·ªáu c√≥ b·ªô nh·ªõ cache, khi s·ªë l∆∞·ª£ng c√°c h√†ng c√≥ t·∫ßn su·∫•t truy c·∫≠p cao √≠t ƒëi, ta c√≥ th·ªÉ l∆∞u trong cache ƒë∆∞·ª£c nhi·ªÅu h√†ng h∆°n, t·ª´ ƒë√≥ hi·ªáu su·∫•t t·ªët h∆°n. ƒêi·ªÅu n√†y th∆∞·ªùng ƒë∆∞·ª£c √°p d·ª•ng ·ªü m·ª©c ƒë·ªô c·ªßa c√°c b·∫£ng.</p></blockquote><figure><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/image-20200114211639899.png" alt="image-20200114211639899" tabindex="0" loading="lazy"><figcaption>image-20200114211639899</figcaption></figure><p>Th√¥ng th∆∞·ªùng, khi ƒë·∫°t ƒë·∫øn c√°c ƒëi·ªÅu ki·ªán sau, b·∫°n c√≥ th·ªÉ xem x√©t vi·ªác m·ªü r·ªông:</p><ul><li>Mysql v∆∞·ª£t qu√° 50 tri·ªáu b·∫£n ghi, Oracle v∆∞·ª£t qu√° 100 tri·ªáu b·∫£n ghi, c∆° s·ªü d·ªØ li·ªáu s·∫Ω g·∫∑p √°p l·ª±c l·ªõn.</li><li>Khi c√≥ h∆°n 2000 y√™u c·∫ßu m·ªói gi√¢y v√†o c∆° s·ªü d·ªØ li·ªáu, c∆° s·ªü d·ªØ li·ªáu n√™n duy tr√¨ ·ªü m·ª©c kho·∫£ng 1000 y√™u c·∫ßu m·ªói gi√¢y.</li></ul><p>Ph√¢n chia d·ªçc c∆° s·ªü d·ªØ li·ªáu ƒë∆∞·ª£c th·ª±c hi·ªán ·ªü m·ª©c b·∫£ng trong c∆° s·ªü d·ªØ li·ªáu b·∫±ng c√°ch ƒë·∫∑t c√°c b·∫£ng c√≥ m·∫≠t ƒë·ªô cao v√†o c√°c c∆° s·ªü d·ªØ li·ªáu kh√°c nhau. V√≠ d·ª•, c∆° s·ªü d·ªØ li·ªáu ban ƒë·∫ßu c·ªßa c·ª≠a h√†ng ƒëi·ªán t·ª≠ c√≥ th·ªÉ ƒë∆∞·ª£c ph√¢n chia d·ªçc th√†nh c∆° s·ªü d·ªØ li·ªáu s·∫£n ph·∫©m, c∆° s·ªü d·ªØ li·ªáu ng∆∞·ªùi d√πng, v.v.</p><h4 id="phan-chia-theo-chieu-ngang" tabindex="-1"><a class="header-anchor" href="#phan-chia-theo-chieu-ngang"><span>Ph√¢n chia theo chi·ªÅu ngang</span></a></h4><blockquote><p>Ph√¢n chia ngang, c√≤n ƒë∆∞·ª£c g·ªçi l√† Sharding, l√† qu√° tr√¨nh chia c√°c b·∫£n ghi trong c√πng m·ªôt b·∫£ng th√†nh nhi·ªÅu b·∫£ng c√≥ c·∫•u tr√∫c gi·ªëng nhau. Khi d·ªØ li·ªáu c·ªßa m·ªôt b·∫£ng qu√° l·ªõn, n√≥ s·∫Ω ·∫£nh h∆∞·ªüng ƒë·∫øn hi·ªáu su·∫•t th·ª±c thi SQL. Ph√¢n chia b·∫£ng l√† vi·ªác ph√¢n ph·ªëi d·ªØ li·ªáu t·ª´ m·ªôt b·∫£ng ban ƒë·∫ßu v√†o c√°c node kh√°c nhau trong c·ª•m c∆° s·ªü d·ªØ li·ªáu, t·ª´ ƒë√≥ gi·∫£i t·ªèa √°p l·ª±c cho ƒëi·ªÉm duy nh·∫•t.</p></blockquote><figure><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/image-20200114211203589.png" alt="image-20200114211203589" tabindex="0" loading="lazy"><figcaption>image-20200114211203589</figcaption></figure><p>Th√¥ng th∆∞·ªùng, khi <strong>m·ªôt b·∫£ng c√≥ 2 tri·ªáu b·∫£n ghi</strong>, hi·ªáu su·∫•t s·∫Ω gi·∫£m ƒë√°ng k·ªÉ, v√† c·∫ßn xem x√©t ph√¢n chia b·∫£ng. Tuy nhi√™n, ƒëi·ªÅu n√†y c≈©ng ph·ª• thu·ªôc v√†o t√¨nh hu·ªëng c·ª• th·ªÉ, c√≥ th·ªÉ l√† 1 tri·ªáu b·∫£n ghi ho·∫∑c 5 tri·ªáu b·∫£n ghi, s·ªë l∆∞·ª£ng b·∫£n ghi c√†ng √≠t th√¨ hi·ªáu su·∫•t c√†ng t·ªët.</p><h4 id="uu-ƒëiem-cua-phan-chia-co-so-du-lieu-va-bang" tabindex="-1"><a class="header-anchor" href="#uu-ƒëiem-cua-phan-chia-co-so-du-lieu-va-bang"><span>∆Øu ƒëi·ªÉm c·ªßa ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng</span></a></h4><table><thead><tr><th>#</th><th>Tr∆∞·ªõc khi ph√¢n chia</th><th>Sau khi ph√¢n chia</th></tr></thead><tbody><tr><td>X·ª≠ l√Ω ƒë·ªìng th·ªùi</td><td>Kh√¥ng th·ªÉ x·ª≠ l√Ω t·∫£i cao</td><td>T·ª´ m·ªôt m√°y ch·ªß ƒë·∫øn nhi·ªÅu m√°y ch·ªß, c√≥ th·ªÉ x·ª≠ l√Ω t·∫£i cao h∆°n nhi·ªÅu l·∫ßn</td></tr><tr><td>S·ª≠ d·ª•ng ƒëƒ©a c·ª©ng</td><td>ƒêƒ©a c·ª©ng tr√™n m·ªôt m√°y ch·ªß g·∫ßn nh∆∞ ƒë·∫ßy</td><td>Ph√¢n chia th√†nh nhi·ªÅu c∆° s·ªü d·ªØ li·ªáu, tƒÉng hi·ªáu su·∫•t s·ª≠ d·ª•ng ƒëƒ©a c·ª©ng c·ªßa m√°y ch·ªß c∆° s·ªü d·ªØ li·ªáu</td></tr><tr><td>Hi·ªáu su·∫•t th·ª±c thi SQL</td><td>D·ªØ li·ªáu c·ªßa m·ªôt b·∫£ng qu√° l·ªõn, th·ª±c thi SQL ch·∫≠m</td><td>D·ªØ li·ªáu c·ªßa m·ªôt b·∫£ng gi·∫£m, hi·ªáu su·∫•t th·ª±c thi SQL c·∫£i thi·ªán ƒë√°ng k·ªÉ</td></tr></tbody></table><h4 id="chien-luoc-phan-chia-co-so-du-lieu-va-bang" tabindex="-1"><a class="header-anchor" href="#chien-luoc-phan-chia-co-so-du-lieu-va-bang"><span>Chi·∫øn l∆∞·ª£c ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng</span></a></h4><ul><li>Ph√¢n chia d·ª±a tr√™n h√†m bƒÉm:¬†<code>hash(key) % N</code>¬†ho·∫∑c¬†<code>id % N</code><ul><li>∆Øu ƒëi·ªÉm: C√¢n b·∫±ng t·∫£i cho m·ªói c∆° s·ªü d·ªØ li·ªáu v√† gi·∫£m √°p l·ª±c y√™u c·∫ßu (c√¢n b·∫±ng t·∫£i).</li><li>Nh∆∞·ª£c ƒëi·ªÉm: Ph·ª©c t·∫°p khi m·ªü r·ªông, c·∫ßn di chuy·ªÉn d·ªØ li·ªáu.</li></ul></li><li>Ph√¢n chia d·ª±a tr√™n ph·∫°m vi: ph√¢n chia d·ª±a tr√™n ID ho·∫∑c th·ªùi gian. <ul><li>∆Øu ƒëi·ªÉm: M·ªü r·ªông ƒë∆°n gi·∫£n.</li><li>Nh∆∞·ª£c ƒëi·ªÉm: Chi·∫øn l∆∞·ª£c n√†y d·ªÖ g√¢y ra v·∫•n ƒë·ªÅ ƒëi·ªÉm n√≥ng (hotspot).</li></ul></li><li>B·∫£ng √°nh x·∫°: s·ª≠ d·ª•ng m·ªôt c∆° s·ªü d·ªØ li·ªáu ri√™ng ƒë·ªÉ l∆∞u tr·ªØ c√°c m·ªëi quan h·ªá √°nh x·∫°. <ul><li>Nh∆∞·ª£c ƒëi·ªÉm: C∆° s·ªü d·ªØ li·ªáu l∆∞u tr·ªØ m·ªëi quan h·ªá √°nh x·∫° c≈©ng c√≥ th·ªÉ tr·ªü th√†nh h·∫°n ch·∫ø hi·ªáu su·∫•t v√† n·∫øu c∆° s·ªü d·ªØ li·ªáu n√†y g·∫∑p s·ª± c·ªë, c∆° s·ªü d·ªØ li·ªáu ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng s·∫Ω kh√¥ng ho·∫°t ƒë·ªông. Do ƒë√≥, kh√¥ng khuy·∫øn ngh·ªã s·ª≠ d·ª•ng chi·∫øn l∆∞·ª£c n√†y.</li><li>∆Øu ƒëi·ªÉm: M·ªü r·ªông ƒë∆°n gi·∫£n, c√≥ th·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ ID ph√¢n t√°n.</li></ul></li></ul><h3 id="phan-mem-trung-gian-phan-chia-co-so-du-lieu-va-bang" tabindex="-1"><a class="header-anchor" href="#phan-mem-trung-gian-phan-chia-co-so-du-lieu-va-bang"><span>Ph·∫ßn m·ªÅm trung gian ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng</span></a></h3><blockquote><p>‚ùì C√°c ph·∫ßn m·ªÅm trung gian ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng ph·ªï bi·∫øn l√† g√¨? H√£y gi·ªõi thi·ªáu m·ªôt c√°ch ƒë∆°n gi·∫£n.</p><p>‚ùì C√°c ph·∫ßn m·ªÅm trung gian ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng c√≥ c√°c ƒë·∫∑c ƒëi·ªÉm v√† ∆∞u nh∆∞·ª£c ƒëi·ªÉm g√¨?</p><p>‚ùì L√†m th·∫ø n√†o ƒë·ªÉ ch·ªçn c√¥ng ngh·ªá ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng?</p></blockquote><h4 id="cac-phan-mem-trung-gian-phan-chia-co-so-du-lieu-va-bang-pho-bien" tabindex="-1"><a class="header-anchor" href="#cac-phan-mem-trung-gian-phan-chia-co-so-du-lieu-va-bang-pho-bien"><span>C√°c ph·∫ßn m·ªÅm trung gian ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng ph·ªï bi·∫øn</span></a></h4><ul><li><a href="https://github.com/alibaba/cobar" target="_blank" rel="noopener noreferrer">Cobar</a>¬†- ƒê∆∞·ª£c ph√°t tri·ªÉn v√† ph√°t h√†nh b·ªüi nh√≥m Alibaba B2B, l√† m·ªôt gi·∫£i ph√°p t·∫ßng proxy, n·∫±m gi·ªØa m√°y ch·ªß ·ª©ng d·ª•ng v√† m√°y ch·ªß c∆° s·ªü d·ªØ li·ªáu. ·ª®ng d·ª•ng truy c·∫≠p v√†o c·ª•m cobar th√¥ng qua tr√¨nh ƒëi·ªÅu khi·ªÉn JDBC, cobar s·∫Ω ph√¢n gi·∫£i SQL v√† ph√¢n ph·ªëi n√≥ ƒë·∫øn c√°c c∆° s·ªü d·ªØ li·ªáu MySQL kh√°c nhau trong c·ª•m ƒë·ªÉ th·ª±c thi. Tuy nhi√™n, cobar kh√¥ng h·ªó tr·ª£ ƒë·ªçc / ghi ph√¢n t√°n, l∆∞u tr·ªØ th·ªß t·ª•c, li√™n k·∫øt c∆° s·ªü d·ªØ li·ªáu v√† ph√¢n trang.</li><li><a href="https://github.com/alibaba/tb_tddl" target="_blank" rel="noopener noreferrer">TDDL</a>¬†- ƒê∆∞·ª£c ph√°t tri·ªÉn b·ªüi nh√≥m Taobao, l√† m·ªôt gi·∫£i ph√°p t·∫ßng kh√°ch h√†ng. TDDL h·ªó tr·ª£ c√°c c√∫ ph√°p CRUD c∆° b·∫£n v√† ƒë·ªçc / ghi ph√¢n t√°n, nh∆∞ng kh√¥ng h·ªó tr·ª£ li√™n k·∫øt, truy v·∫•n ƒëa b·∫£ng v√† m·ªôt s·ªë c√∫ ph√°p kh√°c. Hi·ªán t·∫°i, kh√¥ng c√≥ nhi·ªÅu ng∆∞·ªùi s·ª≠ d·ª•ng TDDL, v√¨ n√≥ v·∫´n ph·ª• thu·ªôc v√†o h·ªá th·ªëng qu·∫£n l√Ω c·∫•u h√¨nh diamond c·ªßa Taobao.</li><li><a href="https://github.com/Qihoo360/Atlas" target="_blank" rel="noopener noreferrer">Atlas</a>¬†- ƒê∆∞·ª£c ph√°t tri·ªÉn b·ªüi 360, l√† m·ªôt gi·∫£i ph√°p t·∫ßng proxy. Tr∆∞·ªõc ƒë√¢y, m·ªôt s·ªë c√¥ng ty ƒë√£ s·ª≠ d·ª•ng Atlas, nh∆∞ng phi√™n b·∫£n m·ªõi nh·∫•t c·ªßa c·ªông ƒë·ªìng ƒë√£ kh√¥ng ƒë∆∞·ª£c b·∫£o tr√¨ trong 5 nƒÉm. Hi·ªán nay, √≠t c√¥ng ty s·ª≠ d·ª•ng Atlas.</li><li><a href="https://github.com/dangdangdotcom/sharding-jdbc" target="_blank" rel="noopener noreferrer">sharding-jdbc</a>¬†- ƒê∆∞·ª£c ph√°t tri·ªÉn b·ªüi Dangdang, l√† m·ªôt gi·∫£i ph√°p t·∫ßng kh√°ch h√†ng. sharding-jdbc h·ªó tr·ª£ ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng, ƒë·ªçc / ghi ph√¢n t√°n, sinh ID ph√¢n t√°n, giao d·ªãch linh ho·∫°t (giao d·ªãch t·ªëi ƒëa n·ªó l·ª±c, giao d·ªãch TCC). Hi·ªán nay, sharding-jdbc v·∫´n ƒë∆∞·ª£c s·ª≠ d·ª•ng kh√° nhi·ªÅu v√† ƒë√£ ph√°t tri·ªÉn ƒë·∫øn phi√™n b·∫£n 2.0, h·ªó tr·ª£ ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng, ƒë·ªçc / ghi ph√¢n t√°n, sinh ID ph√¢n t√°n, giao d·ªãch linh ho·∫°t (giao d·ªãch t·ªëi ƒëa n·ªó l·ª±c, giao d·ªãch TCC). C·ªông ƒë·ªìng v·∫´n ti·∫øp t·ª•c ph√°t tri·ªÉn v√† b·∫£o tr√¨, v√† c√≥ nhi·ªÅu c√¥ng ty ƒëang s·ª≠ d·ª•ng sharding-jdbc.</li><li><a href="http://www.mycat.org.cn/" target="_blank" rel="noopener noreferrer">Mycat</a>¬†- L√† m·ªôt phi√™n b·∫£n ƒë∆∞·ª£c c·∫£i ti·∫øn t·ª´ cobar, l√† m·ªôt gi·∫£i ph√°p t·∫ßng proxy. Mycat h·ªó tr·ª£ ƒë·∫ßy ƒë·ªß c√°c ch·ª©c nƒÉng v√† hi·ªán ƒëang tr·ªü th√†nh m·ªôt gi·∫£i ph√°p trung gian c∆° s·ªü d·ªØ li·ªáu ph·ªï bi·∫øn v√† ng√†y c√†ng ƒë∆∞·ª£c s·ª≠ d·ª•ng. C·ªông ƒë·ªìng r·∫•t s√¥i n·ªïi v√† m·ªôt s·ªë c√¥ng ty ƒë√£ b·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng Mycat. Tuy nhi√™n, so v·ªõi sharding-jdbc, Mycat c√≤n tr·∫ª h∆°n m·ªôt ch√∫t v√† √≠t kinh nghi·ªám h∆°n.</li></ul><h4 id="lua-chon-cong-nghe-phan-chia-co-so-du-lieu-va-bang" tabindex="-1"><a class="header-anchor" href="#lua-chon-cong-nghe-phan-chia-co-so-du-lieu-va-bang"><span>L·ª±a ch·ªçn c√¥ng ngh·ªá ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng</span></a></h4><p>N√™n s·ª≠ d·ª•ng sharding-jdbc v√† Mycat.</p><ul><li><a href="https://github.com/dangdangdotcom/sharding-jdbc" target="_blank" rel="noopener noreferrer">sharding-jdbc</a>¬†l√† m·ªôt gi·∫£i ph√°p t·∫ßng kh√°ch h√†ng nh·∫π nh√†ng, c√≥ chi ph√≠ v·∫≠n h√†nh th·∫•p, kh√¥ng c·∫ßn tri·ªÉn khai, kh√¥ng c·∫ßn chuy·ªÉn ti·∫øp y√™u c·∫ßu l·∫ßn th·ª© hai qua t·∫ßng proxy, hi·ªáu su·∫•t cao. Tuy nhi√™n, n·∫øu g·∫∑p v·∫•n ƒë·ªÅ n√¢ng c·∫•p, b·∫°n c·∫ßn ph·∫£i n√¢ng c·∫•p phi√™n b·∫£n c·ªßa t·∫•t c·∫£ c√°c h·ªá th·ªëng v√† ph√°t h√†nh l·∫°i, v√† t·∫•t c·∫£ c√°c h·ªá th·ªëng ƒë·ªÅu ph·∫£i ph·ª• thu·ªôc v√†o sharding-jdbc.</li><li><a href="http://www.mycat.org.cn/" target="_blank" rel="noopener noreferrer">Mycat</a>¬†l√† m·ªôt gi·∫£i ph√°p t·∫ßng proxy, c√≥ chi ph√≠ v·∫≠n h√†nh cao, t·ª± qu·∫£n l√Ω m·ªôt h·ªá th·ªëng trung gian. Tuy nhi√™n, l·ª£i √≠ch c·ªßa Mycat l√† ƒë·ªëi v·ªõi c√°c d·ª± √°n kh√°c nhau, n√≥ l√†ÈÄèÊòéÁöÑ, nghƒ©a l√† kh√¥ng c·∫ßn s·ª≠a ƒë·ªïi m√£ ngu·ªìn ·ª©ng d·ª•ng, ch·ªâ c·∫ßn c·∫•u h√¨nh Mycat, v√† nhi·ªÅu d·ª± √°n s·∫Ω s·ª≠ d·ª•ng tr·ª±c ti·∫øp.</li></ul><p>Th∆∞·ªùng th√¨, c√°c gi·∫£i ph√°p n√†y ƒë·ªÅu c√≥ th·ªÉ ch·ªçn, nh∆∞ng c√° nh√¢n t√¥i khuy·∫øn ngh·ªã c√°c c√¥ng ty v·ª´a v√† nh·ªè n√™n s·ª≠ d·ª•ng sharding-jdbc, m·ªôt gi·∫£i ph√°p t·∫ßng kh√°ch h√†ng nh·∫π nh√†ng, chi ph√≠ v·∫≠n h√†nh th·∫•p, kh√¥ng c·∫ßn tri·ªÉn khai, kh√¥ng c·∫ßn chuy·ªÉn ti·∫øp y√™u c·∫ßu l·∫ßn th·ª© hai qua t·∫ßng proxy, hi·ªáu su·∫•t cao. Tuy nhi√™n, c√°c c√¥ng ty l·ªõn n√™n s·ª≠ d·ª•ng Mycat, m·ªôt gi·∫£i ph√°p t·∫ßng proxy, v√¨ c√≥ th·ªÉ c√≥ nhi·ªÅu h·ªá th·ªëng v√† d·ª± √°n, ƒë·ªôi ng≈© l·ªõn, n√™n t·ªët nh·∫•t l√† c√≥ m·ªôt ng∆∞·ªùi chuy√™n nghi·ªáp ƒë·ªÉ nghi√™n c·ª©u v√† b·∫£o tr√¨ Mycat, v√† nhi·ªÅu d·ª± √°n s·∫Ω s·ª≠ d·ª•ng tr·ª±c ti·∫øp.</p><h3 id="cac-van-ƒëe-pho-bien-cua-phan-chia-co-so-du-lieu-va-bang" tabindex="-1"><a class="header-anchor" href="#cac-van-ƒëe-pho-bien-cua-phan-chia-co-so-du-lieu-va-bang"><span>C√°c v·∫•n ƒë·ªÅ ph·ªï bi·∫øn c·ªßa ph√¢n chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng</span></a></h3><blockquote><ul><li><p>C√°c v·∫•n ƒë·ªÅ ph·ªï bi·∫øn c·ªßa vi·ªác chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng l√† g√¨?</p></li><li><p>B·∫°n ƒë√£ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng nh∆∞ th·∫ø n√†o?</p></li></ul><p>D∆∞·ªõi ƒë√¢y, t√¥i s·∫Ω tr√¨nh b√†y t·ª´ng v·∫•n ƒë·ªÅ th√¥ng th∆∞·ªùng c·ªßa vi·ªác chia c∆° s·ªü d·ªØ li·ªáu v√† b·∫£ng c√πng v·ªõi c√°c gi·∫£i ph√°p.</p></blockquote><h4 id="giao-dich-phan-tan-1" tabindex="-1"><a class="header-anchor" href="#giao-dich-phan-tan-1"><span>Giao d·ªãch ph√¢n t√°n</span></a></h4><p>Gi·∫£i ph√°p 1: S·ª≠ d·ª•ng giao d·ªãch c∆° s·ªü d·ªØ li·ªáu</p><ul><li>∆Øu ƒëi·ªÉm: ƒê∆∞·ª£c qu·∫£n l√Ω b·ªüi c∆° s·ªü d·ªØ li·ªáu, ƒë∆°n gi·∫£n v√† hi·ªáu qu·∫£</li><li>Nh∆∞·ª£c ƒëi·ªÉm: T·ªën k√©m v·ªÅ hi·ªáu su·∫•t, ƒë·∫∑c bi·ªát l√† khi s·ªë shard ng√†y c√†ng nhi·ªÅu</li></ul><p>Gi·∫£i ph√°p 2: ƒêi·ªÅu khi·ªÉn chung b·ªüi ·ª©ng d·ª•ng v√† c∆° s·ªü d·ªØ li·ªáu</p><ul><li>Nguy√™n t·∫Øc: Chia m·ªôt giao d·ªãch ph√¢n t√°n qua nhi·ªÅu c∆° s·ªü d·ªØ li·ªáu th√†nh nhi·ªÅu giao d·ªãch nh·ªè ch·ªâ n·∫±m tr√™n m·ªôt c∆° s·ªü d·ªØ li·ªáu duy nh·∫•t v√† s·ª≠ d·ª•ng ·ª©ng d·ª•ng ƒë·ªÉ ki·ªÉm so√°t c√°c giao d·ªãch nh·ªè n√†y.</li><li>∆Øu ƒëi·ªÉm: C√≥ l·ª£i v·ªÅ hi·ªáu su·∫•t</li><li>Nh∆∞·ª£c ƒëi·ªÉm: Y√™u c·∫ßu thi·∫øt k·∫ø linh ho·∫°t trong vi·ªác ki·ªÉm so√°t giao d·ªãch tr√™n ·ª©ng d·ª•ng. N·∫øu s·ª≠ d·ª•ng qu·∫£n l√Ω giao d·ªãch c·ªßa Spring, vi·ªác thay ƒë·ªïi s·∫Ω g·∫∑p kh√≥ khƒÉn.</li></ul><h4 id="lien-ket-giua-cac-shard" tabindex="-1"><a class="header-anchor" href="#lien-ket-giua-cac-shard"><span>Li√™n k·∫øt gi·ªØa c√°c shard</span></a></h4><p>D√π c√≥ c√°ch thi·∫øt k·∫ø v√† ph√¢n v√πng t·ªët, v·∫•n ƒë·ªÅ li√™n k·∫øt gi·ªØa c√°c shard v·∫´n kh√¥ng th·ªÉ tr√°nh kh·ªèi. Tuy nhi√™n, thi·∫øt k·∫ø v√† ph√¢n v√πng t·ªët c√≥ th·ªÉ gi·∫£m thi·ªÉu t√¨nh hu·ªëng n√†y. Gi·∫£i ph√°p cho v·∫•n ƒë·ªÅ n√†y l√† th·ª±c hi·ªán truy v·∫•n hai l·∫ßn. Trong l·∫ßn truy v·∫•n ƒë·∫ßu ti√™n, l·∫•y ra danh s√°ch id c·ªßa c√°c d·ªØ li·ªáu li√™n quan t·ª´ k·∫øt qu·∫£ truy v·∫•n v√† sau ƒë√≥ th·ª±c hi·ªán truy v·∫•n th·ª© hai ƒë·ªÉ l·∫•y d·ªØ li·ªáu li√™n quan.</p><h4 id="tinh-toan-tren-cac-shard-bao-gom-count-order-by-group-by-va-cac-ham-tong-hop" tabindex="-1"><a class="header-anchor" href="#tinh-toan-tren-cac-shard-bao-gom-count-order-by-group-by-va-cac-ham-tong-hop"><span>T√≠nh to√°n tr√™n c√°c shard, bao g·ªìm count, order by, group by v√† c√°c h√†m t·ªïng h·ª£p</span></a></h4><p>ƒê√¢y l√† m·ªôt nh√≥m v·∫•n ƒë·ªÅ, v√¨ t·∫•t c·∫£ ƒë·ªÅu y√™u c·∫ßu t√≠nh to√°n d·ª±a tr√™n t·∫≠p d·ªØ li·ªáu to√†n b·ªô. H·∫ßu h·∫øt c√°c proxy kh√¥ng t·ª± ƒë·ªông x·ª≠ l√Ω vi·ªác k·∫øt h·ª£p n√†y.</p><p>Gi·∫£i ph√°p: T∆∞∆°ng t·ª± nh∆∞ vi·ªác gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ li√™n k·∫øt gi·ªØa c√°c shard, th·ª±c hi·ªán truy v·∫•n tr√™n t·ª´ng shard ri√™ng l·∫ª v√† sau ƒë√≥ k·∫øt h·ª£p k·∫øt qu·∫£ tr√™n ·ª©ng d·ª•ng. Kh√°c bi·ªát l√† c√°c truy v·∫•n tr√™n t·ª´ng shard c√≥ th·ªÉ ƒë∆∞·ª£c th·ª±c hi·ªán song song, do ƒë√≥ th∆∞·ªùng nhanh h∆°n so v·ªõi truy v·∫•n tr√™n m·ªôt b·∫£ng l·ªõn duy nh·∫•t. Tuy nhi√™n, n·∫øu k·∫øt qu·∫£ truy v·∫•n l·ªõn, n√≥ s·∫Ω t·ªën nhi·ªÅu b·ªô nh·ªõ c·ªßa ·ª©ng d·ª•ng.</p><p>Gi·∫£i ph√°p t·ª´ g√≥c nh√¨n kinh doanh:</p><ul><li>N·∫øu cung c·∫•p ph√¢n trang trong ·ª©ng d·ª•ng frontend, h·∫°n ch·∫ø ng∆∞·ªùi d√πng ch·ªâ c√≥ th·ªÉ xem n trang ƒë·∫ßu ti√™n, ƒëi·ªÅu n√†y c≈©ng h·ª£p l√Ω v·ªÅ m·∫∑t kinh doanh, th√¥ng th∆∞·ªùng kh√¥ng c√≥ √Ω nghƒ©a l·ªõn khi xem c√°c trang sau (n·∫øu ng∆∞·ªùi d√πng v·∫´n mu·ªën xem, c√≥ th·ªÉ y√™u c·∫ßu h·ªç gi·ªõi h·∫°n ph·∫°m vi v√† th·ª±c hi·ªán truy v·∫•n l·∫°i).</li><li>N·∫øu ƒë√≥ l√† m·ªôt t√°c v·ª• x·ª≠ l√Ω h√†ng lo·∫°t ph√≠a sau, y√™u c·∫ßu l·∫•y d·ªØ li·ªáu theo t·ª´ng ph·∫ßn, b·∫°n c√≥ th·ªÉ tƒÉng k√≠ch th∆∞·ªõc trang, v√≠ d·ª•: l·∫•y 5000 b·∫£n ghi m·ªói l·∫ßn ƒë·ªÉ gi·∫£m s·ªë l∆∞·ª£ng trang (t·∫•t nhi√™n, truy c·∫≠p ngo·∫°i tuy·∫øn th∆∞·ªùng ƒëi qua c∆° s·ªü d·ªØ li·ªáu sao l∆∞u ƒë·ªÉ tr√°nh ·∫£nh h∆∞·ªüng ƒë·∫øn c∆° s·ªü d·ªØ li·ªáu ch√≠nh).</li></ul><h4 id="id-phan-tan" tabindex="-1"><a class="header-anchor" href="#id-phan-tan"><span>ID ph√¢n t√°n</span></a></h4><p>M·ªôt khi c∆° s·ªü d·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c ph√¢n v√πng th√†nh nhi·ªÅu shard, ch√∫ng ta kh√¥ng th·ªÉ ph·ª• thu·ªôc v√†o c∆° ch·∫ø sinh ID ch√≠nh c·ªßa c∆° s·ªü d·ªØ li·ªáu n·ªØa. M·ªôt ph·∫ßn v√¨ ID ƒë∆∞·ª£c t·∫°o ra b·ªüi m·ªói shard ri√™ng bi·ªát kh√¥ng ƒë·∫£m b·∫£o duy nh·∫•t tr√™n to√†n c·∫ßu; m·ªôt ph·∫ßn kh√°c l√† ·ª©ng d·ª•ng c·∫ßn c√≥ ID tr∆∞·ªõc khi ch√®n d·ªØ li·ªáu ƒë·ªÉ th·ª±c hi·ªán ƒë·ªãnh tuy·∫øn SQL.</p><p>M·ªôt s·ªë chi·∫øn l∆∞·ª£c ph·ªï bi·∫øn ƒë·ªÉ t·∫°o ID:</p><ul><li>S·ª≠ d·ª•ng ID to√†n c·∫ßu duy nh·∫•t: GUID.</li><li>G√°n m·ªôt ph·∫°m vi ID cho m·ªói shard.</li><li>S·ª≠ d·ª•ng c√°c c√¥ng c·ª• t·∫°o ID ph√¢n t√°n (nh∆∞ thu·∫≠t to√°n Snowflake c·ªßa Twitter).</li></ul><h4 id="di-chuyen-du-lieu-lap-ke-hoach-dung-luong-mo-rong-va-cac-van-ƒëe-khac" tabindex="-1"><a class="header-anchor" href="#di-chuyen-du-lieu-lap-ke-hoach-dung-luong-mo-rong-va-cac-van-ƒëe-khac"><span>Di chuy·ªÉn d·ªØ li·ªáu, l·∫≠p k·∫ø ho·∫°ch dung l∆∞·ª£ng, m·ªü r·ªông v√† c√°c v·∫•n ƒë·ªÅ kh√°c</span></a></h4><p>ƒê√¢y l√† c√°c v·∫•n ƒë·ªÅ li√™n quan ƒë·∫øn vi·ªác di chuy·ªÉn d·ªØ li·ªáu gi·ªØa c√°c shard, l·∫≠p k·∫ø ho·∫°ch dung l∆∞·ª£ng, m·ªü r·ªông v√† c√≥ nhi·ªÅu gi·ªõi h·∫°n. C√°c gi·∫£i ph√°p hi·ªán t·∫°i kh√¥ng ho√†n h·∫£o v√† ƒë√¥i khi c√≥ m·ªôt s·ªë nh∆∞·ª£c ƒëi·ªÉm. ƒêi·ªÅu n√†y c≈©ng ph·∫£n √°nh kh√≥ khƒÉn trong vi·ªác m·ªü r·ªông ph√¢n v√πng.</p><h2 id="cum" tabindex="-1"><a class="header-anchor" href="#cum"><span>C·ª•m</span></a></h2><blockquote><p>Ch·ªß ƒë·ªÅ n√†y s·∫Ω ph·ª• thu·ªôc v√†o c∆° s·ªü d·ªØ li·ªáu m√† b·∫°n quen, nh∆∞ng c√°c c∆° s·ªü d·ªØ li·ªáu ph·ªï bi·∫øn v√† ƒë√£ ƒë∆∞·ª£c th·ª≠ nghi·ªám ƒë·ªÅu c√≥ m·ªôt s·ªë ch·ª©c nƒÉng c∆° b·∫£n, ch·ªâ kh√°c nhau v·ªÅ c√°ch tri·ªÉn khai v√† chi·∫øn l∆∞·ª£c. V√¨ t√¥i quen thu·ªôc v·ªõi Mysql h∆°n, d∆∞·ªõi ƒë√¢y t√¥i s·∫Ω gi·ªõi thi·ªáu ch·ªß y·∫øu v·ªÅ c√°c v·∫•n ƒë·ªÅ ki·∫øn tr√∫c h·ªá th·ªëng c·ªßa Mysql.</p></blockquote><h3 id="co-che-sao-chep" tabindex="-1"><a class="header-anchor" href="#co-che-sao-chep"><span>C∆° ch·∫ø sao ch√©p</span></a></h3><p>MySQL h·ªó tr·ª£ hai c∆° ch·∫ø sao ch√©p: sao ch√©p d·ª±a tr√™n h√†ng v√† sao ch√©p d·ª±a tr√™n c√¢u l·ªánh.</p><p>C·∫£ hai c∆° ch·∫ø n√†y ƒë·ªÅu ghi l·∫°i nh·∫≠t k√Ω nh·ªã ph√¢n (binlog) tr√™n m√°y ch·ªß ch√≠nh, sau ƒë√≥ c·∫≠p nh·∫≠t c√°c b·∫£n ghi nh·∫≠t k√Ω tr√™n m√°y ch·ªß ph·ª• theo c√°ch kh√¥ng ƒë·ªìng b·ªô. ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† qu√° tr√¨nh sao ch√©p c√≥ th·ªùi gian tr·ªÖ, trong kho·∫£ng th·ªùi gian n√†y, d·ªØ li·ªáu tr√™n m√°y ch·ªß ch√≠nh v√† m√°y ch·ªß ph·ª• c√≥ th·ªÉ kh√¥ng ƒë·ªìng nh·∫•t (t·ª©c l√† c√≥ t√≠nh nh·∫•t qu√°n cu·ªëi c√πng).</p><p>C√≥ ba lu·ªìng ch√≠nh li√™n quan: lu·ªìng binlog, lu·ªìng I/O v√† lu·ªìng SQL.</p><ul><li><strong>Lu·ªìng binlog</strong>: ƒê·∫£m nhi·ªám vi·ªác ghi d·ªØ li·ªáu thay ƒë·ªïi t·ª´ m√°y ch·ªß ch√≠nh v√†o t·ªáp nh·ªã ph√¢n (binlog).</li><li><strong>Lu·ªìng I/O</strong>: ƒê·∫£m nhi·ªám vi·ªác ƒë·ªçc t·ªáp nh·ªã ph√¢n nh·∫≠t k√Ω t·ª´ m√°y ch·ªß ch√≠nh v√† ghi v√†o nh·∫≠t k√Ω c·ªßa m√°y ch·ªß ph·ª•.</li><li><strong>Lu·ªìng SQL</strong>: ƒê·∫£m nhi·ªám vi·ªác ƒë·ªçc nh·∫≠t k√Ω v√† th·ª±c thi c√°c c√¢u l·ªánh SQL ƒë·ªÉ c·∫≠p nh·∫≠t d·ªØ li·ªáu.</li></ul><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721153816.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h3 id="phan-tach-ƒëoc-va-ghi" tabindex="-1"><a class="header-anchor" href="#phan-tach-ƒëoc-va-ghi"><span>Ph√¢n t√°ch ƒë·ªçc v√† ghi</span></a></h3><p>M√°y ch·ªß ch√≠nh ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ x·ª≠ l√Ω c√°c ho·∫°t ƒë·ªông ghi v√† c√°c ho·∫°t ƒë·ªông ƒë·ªçc c√≥ y√™u c·∫ßu th·ªùi gian th·ª±c cao, trong khi m√°y ch·ªß ph·ª• ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ x·ª≠ l√Ω c√°c ho·∫°t ƒë·ªông ƒë·ªçc.</p><p>Ph√¢n t√°ch ƒë·ªçc v√† ghi th∆∞·ªùng ƒë∆∞·ª£c th·ª±c hi·ªán b·∫±ng c√°ch s·ª≠ d·ª•ng c√°ch th·ª©c ·ªßy quy·ªÅn, trong ƒë√≥ m√°y ch·ªß ·ªßy quy·ªÅn nh·∫≠n c√°c y√™u c·∫ßu ƒë·ªçc v√† ghi t·ª´ t·∫ßng ·ª©ng d·ª•ng, sau ƒë√≥ quy·∫øt ƒë·ªãnh chuy·ªÉn ti·∫øp y√™u c·∫ßu ƒë·∫øn m√°y ch·ªß n√†o.</p><p>Ph√¢n t√°ch ƒë·ªçc v√† ghi trong MySQL c√≥ th·ªÉ c·∫£i thi·ªán hi·ªáu su·∫•t v√¨:</p><ul><li>M√°y ch·ªß ch√≠nh v√† m√°y ch·ªß ph·ª• ch·ªãu tr√°ch nhi·ªám cho vi·ªác ƒë·ªçc v√† ghi ri√™ng bi·ªát, gi·∫£m ƒë√°ng k·ªÉ s·ª± c·∫°nh tranh kh√≥a;</li><li>M√°y ch·ªß ph·ª• c√≥ th·ªÉ ƒë∆∞·ª£c c·∫•u h√¨nh v·ªõi MyISAM Engine, c·∫£i thi·ªán hi·ªáu su·∫•t truy v·∫•n v√† ti·∫øt ki·ªám t√†i nguy√™n h·ªá th·ªëng;</li><li>TƒÉng c∆∞·ªùng t√≠nh d·ª± ph√≤ng, n√¢ng cao kh·∫£ nƒÉng s·∫µn c√≥.</li></ul><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/master-slave-proxy.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="can-bang-tai" tabindex="-1"><a class="header-anchor" href="#can-bang-tai"><span>C√¢n b·∫±ng t·∫£i</span></a></h3><p>C√¢n b·∫±ng t·∫£i trong MySQL l√† qu√° tr√¨nh ph√¢n ph·ªëi c√¥ng vi·ªác v√† t·∫£i c·ªßa c√°c y√™u c·∫ßu t·ª´ ·ª©ng d·ª•ng ƒë·∫øn nhi·ªÅu m√°y ch·ªß MySQL. M·ª•c ti√™u c·ªßa c√¢n b·∫±ng t·∫£i l√† ƒë·∫£m b·∫£o r·∫±ng m·ªói m√°y ch·ªß nh·∫≠n ƒë∆∞·ª£c m·ªôt l∆∞·ª£ng c√¥ng vi·ªác h·ª£p l√Ω v√† kh√¥ng b·ªã qu√° t·∫£i.</p><p>C√≥ nhi·ªÅu ph∆∞∆°ng ph√°p c√¢n b·∫±ng t·∫£i trong MySQL, bao g·ªìm:</p><ul><li>C√¢n b·∫±ng t·∫£i d·ª±a tr√™n ph·∫ßn v√πng: D·ªØ li·ªáu ƒë∆∞·ª£c chia th√†nh c√°c ph·∫ßn v√πng v√† m·ªói m√°y ch·ªß ch·ªãu tr√°ch nhi·ªám cho m·ªôt ph·∫ßn v√πng c·ª• th·ªÉ.</li><li>C√¢n b·∫±ng t·∫£i d·ª±a tr√™n ng∆∞·ªùi d√πng: C√°c y√™u c·∫ßu t·ª´ ng∆∞·ªùi d√πng ƒë∆∞·ª£c ph√¢n ph·ªëi ƒë·ªÅu cho c√°c m√°y ch·ªß kh√°c nhau.</li><li>C√¢n b·∫±ng t·∫£i d·ª±a tr√™n tr·∫°ng th√°i: C√°c y√™u c·∫ßu ƒë∆∞·ª£c ph√¢n ph·ªëi d·ª±a tr√™n tr·∫°ng th√°i hi·ªán t·∫°i c·ªßa m√°y ch·ªß, nh∆∞ t·∫£i CPU, b·ªô nh·ªõ, ho·∫∑c s·ªë l∆∞·ª£ng k·∫øt n·ªëi.</li></ul><p>C√¢n b·∫±ng t·∫£i gi√∫p tƒÉng hi·ªáu su·∫•t v√† ƒë·∫£m b·∫£o t√≠nh s·∫µn s√†ng c·ªßa h·ªá th·ªëng MySQL.</p><h2 id="toi-uu-co-so-du-lieu" tabindex="-1"><a class="header-anchor" href="#toi-uu-co-so-du-lieu"><span>T·ªëi ∆∞u c∆° s·ªü d·ªØ li·ªáu</span></a></h2><p>H∆∞·ªõng t·ªëi ∆∞u c∆° s·ªü d·ªØ li·ªáu th∆∞·ªùng bao g·ªìm: t·ªëi ∆∞u SQL, t·ªëi ∆∞u c·∫•u tr√∫c, t·ªëi ∆∞u c·∫•u h√¨nh v√† t·ªëi ∆∞u ph·∫ßn c·ª©ng. Hai h∆∞·ªõng ƒë·∫ßu ti√™n th∆∞·ªùng ƒë∆∞·ª£c xem x√©t b·ªüi c√°c nh√† ph√°t tri·ªÉn th√¥ng th∆∞·ªùng, trong khi hai h∆∞·ªõng sau th∆∞·ªùng ƒë∆∞·ª£c xem x√©t b·ªüi c√°c DBA.</p><h3 id="toi-uu-sql" tabindex="-1"><a class="header-anchor" href="#toi-uu-sql"><span>T·ªëi ∆∞u SQL</span></a></h3><blockquote><p>T·ªëi ∆∞u SQL l√† bi·ªán ph√°p t·ªëi ∆∞u c∆° s·ªü d·ªØ li·ªáu ph·ªï bi·∫øn v√† c∆° b·∫£n nh·∫•t.</p><p>Trong qu√° tr√¨nh th·ª±c thi c√¢u l·ªánh SQL, th·ª© t·ª± c√°c tr∆∞·ªùng trong c√¢u l·ªánh, chi·∫øn l∆∞·ª£c truy v·∫•n, v.v. c√≥ th·ªÉ ·∫£nh h∆∞·ªüng ƒë·∫øn hi·ªáu su·∫•t th·ª±c thi SQL.</p></blockquote><h4 id="ke-hoach-thuc-thi" tabindex="-1"><a class="header-anchor" href="#ke-hoach-thuc-thi"><span>K·∫ø ho·∫°ch th·ª±c thi</span></a></h4><p>L√†m th·∫ø n√†o ƒë·ªÉ ki·ªÉm tra xem SQL ƒë√£ ƒë∆∞·ª£c t·ªëi ∆∞u sau khi thay ƒë·ªïi? ƒêi·ªÅu n√†y ƒë√≤i h·ªèi s·ª≠ d·ª•ng k·∫ø ho·∫°ch th·ª±c hi·ªán (<code>EXPLAIN</code>).</p><p>S·ª≠ d·ª•ng <code>EXPLAIN</code> ƒë·ªÉ ph√¢n t√≠ch hi·ªáu su·∫•t truy v·∫•n <code>SELECT</code>, c√°c nh√† ph√°t tri·ªÉn c√≥ th·ªÉ t·ªëi ∆∞u h√≥a c√¢u l·ªánh truy v·∫•n b·∫±ng c√°ch ph√¢n t√≠ch k·∫øt qu·∫£ <code>EXPLAIN</code>.</p><p>C√°c tr∆∞·ªùng quan tr·ªçng bao g·ªìm:</p><ul><li><code>select_type</code> - Lo·∫°i truy v·∫•n, bao g·ªìm truy v·∫•n ƒë∆°n gi·∫£n, truy v·∫•n k·∫øt h·ª£p, truy v·∫•n con, v.v.</li><li><code>key</code> - Ch·ªâ m·ª•c ƒë∆∞·ª£c s·ª≠ d·ª•ng</li><li><code>rows</code> - S·ªë h√†ng ƒë∆∞·ª£c qu√©t</li></ul><blockquote><p>Xem th√™m: <a href="https://medium.com/datadenys/using-explain-in-mysql-to-analyze-and-improve-query-performance-f58357deb2aa" target="_blank" rel="noopener noreferrer">Using EXPLAIN in Mysql to analyze and improve query performance</a></p></blockquote><h4 id="toi-uu-truy-cap-du-lieu" tabindex="-1"><a class="header-anchor" href="#toi-uu-truy-cap-du-lieu"><span>T·ªëi ∆∞u truy c·∫≠p d·ªØ li·ªáu</span></a></h4><p>Gi·∫£m l∆∞·ª£ng d·ªØ li·ªáu ƒë∆∞·ª£c y√™u c·∫ßu:</p><ul><li><strong>Ch·ªâ tr·∫£ v·ªÅ c√°c c·ªôt c·∫ßn thi·∫øt</strong> : Tr√°nh truy v·∫•n c√°c c·ªôt kh√¥ng c·∫ßn thi·∫øt, h·∫°n ch·∫ø s·ª≠ d·ª•ng c√¢u l·ªánh <code>SELECT *</code>.</li><li><strong>Ch·ªâ tr·∫£ v·ªÅ c√°c h√†ng c·∫ßn thi·∫øt</strong> : S·ª≠ d·ª•ng c√¢u l·ªánh <code>WHERE</code> ƒë·ªÉ l·ªçc d·ªØ li·ªáu truy v·∫•n, ƒë√¥i khi c·∫ßn s·ª≠ d·ª•ng c√¢u l·ªánh <code>LIMIT</code> ƒë·ªÉ gi·ªõi h·∫°n d·ªØ li·ªáu tr·∫£ v·ªÅ.</li><li><strong>L∆∞u tr·ªØ d·ªØ li·ªáu truy v·∫•n l·∫∑p l·∫°i trong b·ªô nh·ªõ cache</strong> : S·ª≠ d·ª•ng b·ªô nh·ªõ cache ƒë·ªÉ tr√°nh truy v·∫•n trong c∆° s·ªü d·ªØ li·ªáu, ƒë·∫∑c bi·ªát l√† v·ªõi c√°c d·ªØ li·ªáu ƒë∆∞·ª£c truy v·∫•n l·∫∑p l·∫°i, vi·ªác s·ª≠ d·ª•ng cache c√≥ th·ªÉ c·∫£i thi·ªán ƒë√°ng k·ªÉ hi·ªáu su·∫•t truy v·∫•n.</li></ul><p>Gi·∫£m s·ªë h√†ng ƒë∆∞·ª£c qu√©t b·ªüi m√°y ch·ªß:</p><ul><li>C√°ch hi·ªáu qu·∫£ nh·∫•t l√† <strong>s·ª≠ d·ª•ng ch·ªâ m·ª•c ƒë·ªÉ truy v·∫•n</strong> (t·ª©c l√† tr∆∞·ªùng truy v·∫•n sau <code>WHERE</code> n√™n l√† tr∆∞·ªùng ch·ªâ m·ª•c).</li></ul><h4 id="tai-cau-truc-cach-truy-van" tabindex="-1"><a class="header-anchor" href="#tai-cau-truc-cach-truy-van"><span>T√°i c·∫•u tr√∫c c√°ch truy v·∫•n</span></a></h4><h5 id="chia-nho-truy-van" tabindex="-1"><a class="header-anchor" href="#chia-nho-truy-van"><span>Chia nh·ªè truy v·∫•n</span></a></h5><p>N·∫øu m·ªôt truy v·∫•n l·ªõn ƒë∆∞·ª£c th·ª±c hi·ªán m·ªôt l·∫ßn, n√≥ c√≥ th·ªÉ kh√≥a nhi·ªÅu d·ªØ li·ªáu, l√†m ƒë·∫ßy nh·∫≠t k√Ω giao d·ªãch, ti√™u t·ªën t√†i nguy√™n h·ªá th·ªëng v√† ch·∫∑n nhi·ªÅu truy v·∫•n nh·ªè nh∆∞ng quan tr·ªçng.</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">DELETE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> messages </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> create</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> &lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> DATE_SUB(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">NOW</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(), INTERVAL </span><span style="color:#D19A66;--shiki-dark:#D19A66;">3</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> MONTH</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">rows_affected </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">do {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    rows_affected </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> do_query(</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">    &quot;DELETE FROM messages WHERE create  &lt; DATE_SUB(NOW(), INTERVAL 3 MONTH) LIMIT 10000&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">} </span><span style="color:#C678DD;--shiki-dark:#C678DD;">while</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> rows_affected </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0</span></span></code></pre></div><h5 id="phan-tach-truy-van-lien-ket" tabindex="-1"><a class="header-anchor" href="#phan-tach-truy-van-lien-ket"><span>Ph√¢n t√°ch truy v·∫•n li√™n k·∫øt</span></a></h5><p>Ph√¢n t√°ch m·ªôt truy v·∫•n li√™n k·∫øt l·ªõn th√†nh c√°c truy v·∫•n ƒë∆°n b·∫£ng, sau ƒë√≥ k·∫øt h·ª£p k·∫øt qu·∫£ trong ·ª©ng d·ª•ng, c√≥ th·ªÉ mang l·∫°i c√°c l·ª£i √≠ch sau:</p><ul><li><strong>Cache hi·ªáu qu·∫£ h∆°n</strong>. ƒê·ªëi v·ªõi truy v·∫•n li√™n k·∫øt, n·∫øu m·ªôt trong c√°c b·∫£ng thay ƒë·ªïi, b·ªô nh·ªõ cache c·ªßa truy v·∫•n to√†n b·ªô s·∫Ω kh√¥ng th·ªÉ s·ª≠ d·ª•ng. Nh∆∞ng sau khi ph√¢n t√°ch th√†nh c√°c truy v·∫•n ri√™ng l·∫ª, ngay c·∫£ khi m·ªôt trong c√°c b·∫£ng thay ƒë·ªïi, b·ªô nh·ªõ cache c·ªßa c√°c truy v·∫•n kh√°c v·∫´n c√≥ th·ªÉ s·ª≠ d·ª•ng.</li><li>Ph√¢n t√°ch th√†nh nhi·ªÅu truy v·∫•n ƒë∆°n b·∫£ng, k·∫øt qu·∫£ c·ªßa c√°c truy v·∫•n ƒë∆°n b·∫£ng c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi c√°c truy v·∫•n kh√°c, t·ª´ ƒë√≥ gi·∫£m thi·ªÉu vi·ªác truy v·∫•n c√°c b·∫£n ghi tr√πng l·∫∑p.</li><li><strong>Gi·∫£m thi·ªÉu c·∫°nh tranh kh√≥a</strong>.</li><li><strong>D·ªÖ d√†ng k·∫øt h·ª£p c∆° s·ªü d·ªØ li·ªáu</strong>¬†trong ·ª©ng d·ª•ng, d·ªÖ d√†ng m·ªü r·ªông hi·ªáu su·∫•t v√† kh·∫£ nƒÉng m·ªü r·ªông.</li><li><strong>C√≥ th·ªÉ c·∫£i thi·ªán hi·ªáu su·∫•t c·ªßa truy v·∫•n</strong>. V√≠ d·ª•, trong v√≠ d·ª• d∆∞·ªõi ƒë√¢y, vi·ªác s·ª≠ d·ª•ng¬†<code>IN()</code>¬†thay th·∫ø cho truy v·∫•n li√™n k·∫øt c√≥ th·ªÉ cho ph√©p MySQL th·ª±c hi·ªán truy v·∫•n theo th·ª© t·ª± ID, ƒëi·ªÅu n√†y c√≥ th·ªÉ hi·ªáu qu·∫£ h∆°n vi·ªác truy v·∫•n li√™n k·∫øt ng·∫´u nhi√™n.</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> tag</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">JOIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> tag_post </span><span style="color:#C678DD;--shiki-dark:#C678DD;">ON</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> tag_post</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">tag_id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">tag</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">JOIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> post </span><span style="color:#C678DD;--shiki-dark:#C678DD;">ON</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> tag_post</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">post_id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">post</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> tag</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">tag</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;mysql&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> tag </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> tag</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;mysql&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> tag_post </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> tag_id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1234</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> post </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> post</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">id</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> IN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">123</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">456</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">567</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">9098</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">8904</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><h4 id="chi-tiet-cau-lenh-sql" tabindex="-1"><a class="header-anchor" href="#chi-tiet-cau-lenh-sql"><span>Chi ti·∫øt c√¢u l·ªánh SQL</span></a></h4><h5 id="chon-thu-tu-bang-hieu-qua-nhat" tabindex="-1"><a class="header-anchor" href="#chon-thu-tu-bang-hieu-qua-nhat"><span>Ch·ªçn th·ª© t·ª± b·∫£ng hi·ªáu qu·∫£ nh·∫•t</span></a></h5><p>C∆° s·ªü d·ªØ li·ªáu x·ª≠ l√Ω c√°c b·∫£ng trong m·ªánh ƒë·ªÅ <code>FROM</code> c·ªßa c√¢u l·ªánh SQL theo th·ª© t·ª± t·ª´ ph·∫£i sang tr√°i.</p><ul><li>N·∫øu c√°c b·∫£ng kh√¥ng c√≥ m·ªëi quan h·ªá, <strong>h√£y ƒë·∫∑t b·∫£ng c√≥ √≠t b·∫£n ghi v√† c·ªôt nh·∫•t ·ªü cu·ªëi c√πng</strong>.</li><li>N·∫øu c√≥ 3 b·∫£ng tr·ªü l√™n trong truy v·∫•n, <strong>h√£y ƒë·∫∑t b·∫£ng ƒë∆∞·ª£c tham chi·∫øu nhi·ªÅu nh·∫•t ·ªü cu·ªëi c√πng</strong>.</li></ul><p>V√≠ d·ª•: Truy v·∫•n s·ªë nh√¢n vi√™n, t√™n, l∆∞∆°ng, c·∫•p l∆∞∆°ng v√† t√™n ph√≤ng ban.</p><p><strong>B·∫£ng emp ƒë∆∞·ª£c tham chi·∫øu nhi·ªÅu nh·∫•t v√† c√≥ nhi·ªÅu b·∫£n ghi nh·∫•t, n√™n ƒë·∫∑t ·ªü cu·ªëi trong m·ªánh ƒë·ªÅ FROM</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> emp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">empno</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">emp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">ename</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">emp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">sal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">salgrade</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">grade</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">dept</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">dname</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> salgrade,dept,emp</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">emp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">deptno</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> dept</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">deptno</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">and</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">emp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">sal</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> between</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> salgrade</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">losal</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> and</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> salgrade</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">hisal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h5 id="thu-tu-ket-noi-trong-menh-ƒëe-where" tabindex="-1"><a class="header-anchor" href="#thu-tu-ket-noi-trong-menh-ƒëe-where"><span>Th·ª© t·ª± k·∫øt n·ªëi trong m·ªánh ƒë·ªÅ WHERE</span></a></h5><p>C∆° s·ªü d·ªØ li·ªáu x·ª≠ l√Ω m·ªánh ƒë·ªÅ <code>WHERE</code> theo th·ª© t·ª± <strong>t·ª´ ph·∫£i sang tr√°i</strong>.</p><p>Do ƒë√≥,¬†<strong>k·∫øt n·ªëi gi·ªØa c√°c b·∫£ng ph·∫£i ƒë∆∞·ª£c vi·∫øt b√™n tr√°i c·ªßa c√°c ƒëi·ªÅu ki·ªán WHERE kh√°c</strong>, v√†¬†<strong>c√°c ƒëi·ªÅu ki·ªán c√≥ th·ªÉ l·ªçc ra s·ªë l∆∞·ª£ng b·∫£n ghi l·ªõn nh·∫•t ph·∫£i ƒë∆∞·ª£c vi·∫øt b√™n ph·∫£i c·ªßa m·ªánh ƒë·ªÅ WHERE</strong>.</p><p><strong>emp.sal c√≥ th·ªÉ l·ªçc ra nhi·ªÅu b·∫£n ghi, n√™n ƒë∆∞·ª£c vi·∫øt b√™n ph·∫£i c·ªßa m·ªánh ƒë·ªÅ WHERE</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> emp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">empno</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">emp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">ename</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">emp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">sal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">dept</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">dname</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> dept,emp</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">emp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">deptno</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> dept</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">deptno</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">and</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">emp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">sal</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> &gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1500</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h5 id="tranh-su-dung-trong-menh-ƒëe-select" tabindex="-1"><a class="header-anchor" href="#tranh-su-dung-trong-menh-ƒëe-select"><span>Tr√°nh s·ª≠ d·ª•ng¬†<code>*</code>¬†trong m·ªánh ƒë·ªÅ SELECT</span></a></h5><p>Khi vi·∫øt c√¢u l·ªánh SQL, khuy·∫øn ngh·ªã s·ª≠ d·ª•ng t√™n c·ªôt c·ª• th·ªÉ thay v√¨ s·ª≠ d·ª•ng¬†<code>*</code>, v√¨:</p><ul><li>S·ª≠ d·ª•ng¬†<code>*</code>¬†s·∫Ω t·ªën th·ªùi gian ƒë·ªÉ truy v·∫•n t·ª´ ƒëi·ªÉn d·ªØ li·ªáu.</li><li>C√¢u l·ªánh SQL s·ª≠ d·ª•ng¬†<code>*</code>¬†kh√¥ng r√µ r√†ng v√† kh√¥ng d·ªÖ hi·ªÉu.</li></ul><hr><h5 id="su-dung-truncate-thay-vi-delete" tabindex="-1"><a class="header-anchor" href="#su-dung-truncate-thay-vi-delete"><span>S·ª≠ d·ª•ng TRUNCATE thay v√¨ DELETE</span></a></h5><p>N·∫øu c·∫ßn¬†<strong>x√≥a t·∫•t c·∫£ c√°c b·∫£n ghi trong b·∫£ng</strong>, s·ª≠ d·ª•ng TRUNCATE s·∫Ω hi·ªáu qu·∫£ h∆°n DELETE:</p><p><strong>DELETE x√≥a t·ª´ng b·∫£n ghi m·ªôt, trong khi TRUNCATE x√≥a to√†n b·ªô b·∫£ng v√† ch·ªâ gi·ªØ l·∫°i c·∫•u tr√∫c b·∫£ng</strong></p><h5 id="su-dung-ham-noi-bo-ƒëe-tang-hieu-suat-sql" tabindex="-1"><a class="header-anchor" href="#su-dung-ham-noi-bo-ƒëe-tang-hieu-suat-sql"><span>S·ª≠ d·ª•ng h√†m n·ªôi b·ªô ƒë·ªÉ tƒÉng hi·ªáu su·∫•t SQL</span></a></h5><p>V√≠ d·ª•, vi·ªác s·ª≠ d·ª•ng h√†m concat() c·ªßa MySQL s·∫Ω nhanh h∆°n vi·ªác s·ª≠ d·ª•ng to√°n t·ª≠¬†<code>||</code>, v√¨ h√†m concat() ƒë√£ ƒë∆∞·ª£c t·ªëi ∆∞u h√≥a b·ªüi MySQL.</p><h5 id="su-dung-ten-bang-hoac-cot-ƒëai-dien" tabindex="-1"><a class="header-anchor" href="#su-dung-ten-bang-hoac-cot-ƒëai-dien"><span>S·ª≠ d·ª•ng t√™n b·∫£ng ho·∫∑c c·ªôt ƒë·∫°i di·ªán</span></a></h5><p>N·∫øu t√™n b·∫£ng ho·∫∑c c·ªôt qu√° d√†i, s·ª≠ d·ª•ng c√°c ƒë·∫°i di·ªán ng·∫Øn h∆°n c≈©ng c√≥ th·ªÉ c·∫£i thi·ªán hi·ªáu su·∫•t SQL m·ªôt ch√∫t. ƒêi·ªÅu n√†y gi·∫£m s·ªë l∆∞·ª£ng k√Ω t·ª± c·∫ßn qu√©t.</p><h5 id="su-dung-chu-hoa-cho-tu-khoa-sql" tabindex="-1"><a class="header-anchor" href="#su-dung-chu-hoa-cho-tu-khoa-sql"><span>S·ª≠ d·ª•ng ch·ªØ hoa cho t·ª´ kh√≥a SQL</span></a></h5><p>Khi vi·∫øt SQL, n√™n s·ª≠ d·ª•ng ch·ªØ hoa cho t·ª´ kh√≥a SQL, v√≠ d·ª•: SELECT, FROM, WHERE, v.v.¬†<strong>V√¨ m√°y ch·ªß Oracle lu√¥n chuy·ªÉn ƒë·ªïi ch·ªØ th∆∞·ªùng th√†nh ch·ªØ hoa tr∆∞·ªõc khi th·ª±c thi</strong>.</p><h5 id="su-dung-thay-vi" tabindex="-1"><a class="header-anchor" href="#su-dung-thay-vi"><span>S·ª≠ d·ª•ng¬†<code>&gt;=</code>¬†thay v√¨¬†<code>&gt;</code></span></a></h5><p>‚ùå Kh√¥ng hi·ªáu qu·∫£:</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">-- ƒê·∫ßu ti√™n, ƒë·ªãnh v·ªã c√°c b·∫£n ghi v·ªõi DEPTNO=3 v√† qu√©t ƒë·∫øn b·∫£n ghi DEPT ƒë·∫ßu ti√™n l·ªõn h∆°n 3</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> EMP </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> DEPTNO </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 3</span></span></code></pre></div><p>‚úî Hi·ªáu qu·∫£ h∆°n:</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">-- Tr·ª±c ti·∫øp ƒë·∫øn b·∫£n ghi DEPT ƒë·∫ßu ti√™n b·∫±ng 4</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> EMP </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> DEPTNO </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 4</span></span></code></pre></div><h5 id="su-dung-in-thay-vi-or" tabindex="-1"><a class="header-anchor" href="#su-dung-in-thay-vi-or"><span>S·ª≠ d·ª•ng IN thay v√¨ OR</span></a></h5><p>‚ùå Kh√¥ng hi·ªáu qu·∫£:</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp </span><span style="color:#C678DD;--shiki-dark:#C678DD;">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sal </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1500</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> or</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sal </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 3000</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> or</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sal </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 800</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><p>‚úî Hi·ªáu qu·∫£ h∆°n:</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp </span><span style="color:#C678DD;--shiki-dark:#C678DD;">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sal </span><span style="color:#C678DD;--shiki-dark:#C678DD;">in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1500</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">3000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">800</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><h5 id="luon-su-dung-cot-ƒëau-tien-cua-chi-muc" tabindex="-1"><a class="header-anchor" href="#luon-su-dung-cot-ƒëau-tien-cua-chi-muc"><span>Lu√¥n s·ª≠ d·ª•ng c·ªôt ƒë·∫ßu ti√™n c·ªßa ch·ªâ m·ª•c</span></a></h5><p>N·∫øu ch·ªâ m·ª•c ƒë∆∞·ª£c x√¢y d·ª±ng tr√™n nhi·ªÅu c·ªôt, ch·ªâ khi c·ªôt ƒë·∫ßu ti√™n ƒë∆∞·ª£c tham chi·∫øu trong m·ªánh ƒë·ªÅ <code>WHERE</code>, tr√¨nh t·ªëi ∆∞u s·∫Ω ch·ªçn s·ª≠ d·ª•ng ch·ªâ m·ª•c ƒë√≥. Khi ch·ªâ tham chi·∫øu c·ªôt th·ª© hai c·ªßa ch·ªâ m·ª•c, kh√¥ng tham chi·∫øu c·ªôt ƒë·∫ßu ti√™n, tr√¨nh t·ªëi ∆∞u s·∫Ω s·ª≠ d·ª•ng qu√©t to√†n b·ªô b·∫£ng thay v√¨ ch·ªâ m·ª•c.</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">create</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> index</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> emp_sal_job_idex</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">on</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp(sal,job);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">----------------------------------</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> *</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> job </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">!=</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;SALES&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><h3 id="toi-uu-cau-truc" tabindex="-1"><a class="header-anchor" href="#toi-uu-cau-truc"><span>T·ªëi ∆∞u c·∫•u tr√∫c</span></a></h3><p>T·ªëi ∆∞u c·∫•u tr√∫c c∆° s·ªü d·ªØ li·ªáu c√≥ th·ªÉ bao g·ªìm c√°c ph∆∞∆°ng ph√°p sau:</p><ul><li>T·ªëi ∆∞u ki·ªÉu d·ªØ li·ªáu</li><li>T·ªëi ∆∞u h√≥a chu·∫©n h√≥a v√† phi chu·∫©n h√≥a</li><li>T·ªëi ∆∞u h√≥a ch·ªâ m·ª•c - xem th√™m trong ph·∫ßn ch·ªâ m·ª•c v√† r√†ng bu·ªôc</li><li>Ph√¢n t√°ch c∆° s·ªü d·ªØ li·ªáu - xem th√™m trong ph·∫ßn ph√¢n t√°ch c∆° s·ªü d·ªØ li·ªáu</li></ul><h4 id="nguyen-tac-toi-uu-kieu-du-lieu" tabindex="-1"><a class="header-anchor" href="#nguyen-tac-toi-uu-kieu-du-lieu"><span>Nguy√™n t·∫Øc t·ªëi ∆∞u ki·ªÉu d·ªØ li·ªáu</span></a></h4><ul><li>Nh·ªè h∆°n l√† t·ªët h∆°n</li><li>ƒê∆°n gi·∫£n l√† t·ªët, v√≠ d·ª•: ki·ªÉu s·ªë nguy√™n t·ªët h∆°n ki·ªÉu k√Ω t·ª± v√¨ thao t√°c v·ªõi s·ªë nguy√™n t·ªën √≠t t√†i nguy√™n h∆°n.</li><li>Tr√°nh NULL n·∫øu c√≥ th·ªÉ</li></ul><h4 id="chuan-hoa-va-phi-chuan-hoa" tabindex="-1"><a class="header-anchor" href="#chuan-hoa-va-phi-chuan-hoa"><span>Chu·∫©n h√≥a v√† phi chu·∫©n h√≥a</span></a></h4><p>M·ª•c ti√™u c·ªßa vi·ªác chu·∫©n h√≥a l√† <strong>gi·∫£m thi·ªÉu c√°c c·ªôt tr√πng l·∫∑p v√† ti·∫øt ki·ªám kh√¥ng gian</strong>.</p><ul><li>L·ª£i √≠ch c·ªßa vi·ªác chu·∫©n h√≥a l√†: <ul><li>Gi·∫£m thi·ªÉu c·ªôt tr√πng l·∫∑p, gi·∫£m s·ªë l∆∞·ª£ng d·ªØ li·ªáu c·∫ßn ph·∫£i ghi, c·∫£i thi·ªán hi·ªáu su·∫•t ghi;</li><li>Gi·∫£m s·ªë l∆∞·ª£ng c·ªôt d·ªØ li·ªáu c·∫ßn truy xu·∫•t khi th·ª±c hi·ªán c√°c thao t√°c <code>DISTINCT</code> ho·∫∑c <code>GROUP BY</code>.</li></ul></li><li>Nh∆∞·ª£c ƒëi·ªÉm c·ªßa vi·ªác chu·∫©n h√≥a l√†: tƒÉng s·ªë l∆∞·ª£ng truy v·∫•n li√™n k·∫øt.</li></ul><p>M·ª•c ti√™u c·ªßa vi·ªác phi chu·∫©n h√≥a l√† <strong>tƒÉng c∆∞·ªùng hi·ªáu su·∫•t truy v·∫•n b·∫±ng c√°ch th√™m c√°c c·ªôt tr√πng l·∫∑p</strong>.</p><ul><li>Nh∆∞·ª£c ƒëi·ªÉm c·ªßa vi·ªác phi chu·∫©n h√≥a l√†: <ul><li>TƒÉng k√≠ch th∆∞·ªõc d·ªØ li·ªáu, gi·∫£m hi·ªáu su·∫•t ghi;</li><li>C√°c ho·∫°t ƒë·ªông <code>DISTINCT</code> ho·∫∑c <code>GROUP BY</code> tƒÉng l√™n.</li></ul></li></ul><h3 id="toi-uu-cau-hinh" tabindex="-1"><a class="header-anchor" href="#toi-uu-cau-hinh"><span>T·ªëi ∆∞u c·∫•u h√¨nh</span></a></h3><blockquote><p>T·ªëi ∆∞u c·∫•u h√¨nh ch·ªß y·∫øu l√† cho m√°y ch·ªß MySQL, v√≠ d·ª•: <code>max_connections</code>, <code>max_heap_table_size</code>, <code>open_files_limit</code>, <code>max_allowed_packet</code>, v.v.</p><p>Trong c√°c m√¥i tr∆∞·ªùng v√† t√¨nh hu·ªëng kh√°c nhau, n√™n s·ª≠ d·ª•ng c·∫•u h√¨nh ph√π h·ª£p. Vi·ªác t·ªëi ∆∞u n√†y ƒë√≤i h·ªèi kinh nghi·ªám qu·∫£n tr·ªã MySQL, th∆∞·ªùng √≠t ƒë∆∞·ª£c l·∫≠p tr√¨nh vi√™n ti·∫øp x√∫c.</p></blockquote><h3 id="toi-uu-phan-cung" tabindex="-1"><a class="header-anchor" href="#toi-uu-phan-cung"><span>T·ªëi ∆∞u ph·∫ßn c·ª©ng</span></a></h3><p>M·ªü r·ªông c∆° s·ªü d·ªØ li·ªáu, s·ª≠ d·ª•ng thi·∫øt b·ªã cao c·∫•p h∆°n, v.v. T√≥m l·∫°i trong m·ªôt t·ª´: üíµ Money!</p><h2 id="ly-thuyet-co-so-du-lieu" tabindex="-1"><a class="header-anchor" href="#ly-thuyet-co-so-du-lieu"><span>L√Ω thuy·∫øt c∆° s·ªü d·ªØ li·ªáu</span></a></h2><h3 id="phu-thuoc-ham" tabindex="-1"><a class="header-anchor" href="#phu-thuoc-ham"><span>Ph·ª• thu·ªôc h√†m</span></a></h3><p>Ghi nh·ªõ A-&gt;B c√≥ nghƒ©a l√† A x√°c ƒë·ªãnh B, ho·∫∑c c√≥ th·ªÉ n√≥i B ph·ª• thu·ªôc v√†o A.</p><p>N·∫øu {A1, A2, ‚Ä¶, An} l√† m·ªôt t·∫≠p h·ª£p c√°c thu·ªôc t√≠nh c·ªßa m·ªôt quan h·ªá, t·∫≠p h·ª£p n√†y x√°c ƒë·ªãnh t·∫•t c·∫£ c√°c thu·ªôc t√≠nh kh√°c c·ªßa quan h·ªá v√† l√† t·ªëi thi·ªÉu, th√¨ t·∫≠p h·ª£p n√†y ƒë∆∞·ª£c g·ªçi l√† kh√≥a.</p><p>ƒê·ªëi v·ªõi A-&gt;B, n·∫øu c√≥ th·ªÉ t√¨m th·∫•y m·ªôt t·∫≠p con th·ª±c s·ª± A&#39; c·ªßa A sao cho A&#39;-&gt;B, th√¨ A-&gt;B ƒë∆∞·ª£c g·ªçi l√† ph·ª• thu·ªôc h√†m m·ªôt ph·∫ßn, ng∆∞·ª£c l·∫°i, n√≥ ƒë∆∞·ª£c g·ªçi l√† ph·ª• thu·ªôc h√†m ƒë·∫ßy ƒë·ªß;</p><p>ƒê·ªëi v·ªõi A-&gt;B v√† B-&gt;C, th√¨ A-&gt;C ƒë∆∞·ª£c g·ªçi l√† ph·ª• thu·ªôc chuy·ªÉn ti·∫øp.</p><h3 id="cac-van-ƒëe" tabindex="-1"><a class="header-anchor" href="#cac-van-ƒëe"><span>C√°c v·∫•n ƒë·ªÅ</span></a></h3><p>Quan h·ªá Student-Course sau ƒë√¢y c√≥ ph·ª• thu·ªôc h√†m l√† Sno, Cname -&gt; Sname, Sdept, Mname, Grade, v√† kh√≥a l√† {Sno, Cname}. ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† sau khi x√°c ƒë·ªãnh Student v√† Course, ch√∫ng ta c√≥ th·ªÉ x√°c ƒë·ªãnh c√°c th√¥ng tin kh√°c.</p><table><thead><tr><th style="text-align:center;">Sno</th><th style="text-align:center;">Sname</th><th style="text-align:center;">Sdept</th><th style="text-align:center;">Mname</th><th style="text-align:center;">Cname</th><th style="text-align:center;">Grade</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:center;">Student-1</td><td style="text-align:center;">Department-1</td><td style="text-align:center;">Manager-1</td><td style="text-align:center;">Course-1</td><td style="text-align:center;">90</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">Student-2</td><td style="text-align:center;">Department-2</td><td style="text-align:center;">Manager-2</td><td style="text-align:center;">Course-2</td><td style="text-align:center;">80</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">Student-2</td><td style="text-align:center;">Department-2</td><td style="text-align:center;">Manager-2</td><td style="text-align:center;">Course-1</td><td style="text-align:center;">100</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">Student-3</td><td style="text-align:center;">Department-2</td><td style="text-align:center;">Manager-2</td><td style="text-align:center;">Course-2</td><td style="text-align:center;">95</td></tr></tbody></table><p>C√°c quan h·ªá kh√¥ng tu√¢n theo c√°c h√¨nh th·ª©c chu·∫©n ho√° s·∫Ω g√¢y ra nhi·ªÅu v·∫•n ƒë·ªÅ, ch·ªß y·∫øu bao g·ªìm b·ªën v·∫•n ƒë·ªÅ sau:</p><ul><li>D·ªØ li·ªáu d∆∞ th·ª´a: v√≠ d·ª• nh∆∞ Student-2 xu·∫•t hi·ªán hai l·∫ßn.</li><li>V·∫•n ƒë·ªÅ s·ª≠a ƒë·ªïi: s·ª≠a ƒë·ªïi th√¥ng tin trong m·ªôt b·∫£n ghi, nh∆∞ng th√¥ng tin t∆∞∆°ng t·ª± trong b·∫£n ghi kh√°c kh√¥ng ƒë∆∞·ª£c s·ª≠a ƒë·ªïi.</li><li>V·∫•n ƒë·ªÅ x√≥a: x√≥a m·ªôt th√¥ng tin, c≈©ng s·∫Ω m·∫•t th√¥ng tin kh√°c. V√≠ d·ª•: n·∫øu x√≥a Course-1, c·∫ßn x√≥a h√†ng ƒë·∫ßu ti√™n v√† h√†ng th·ª© ba, th√¥ng tin Student-1 s·∫Ω b·ªã m·∫•t.</li><li>V·∫•n ƒë·ªÅ ch√®n: v√≠ d·ª• mu·ªën ch√®n th√¥ng tin c·ªßa m·ªôt Student, n·∫øu Student ƒë√≥ ch∆∞a ch·ªçn Course, th√¨ kh√¥ng th·ªÉ ch√®n.</li></ul><h3 id="hinh-thuc-chuan-hoa" tabindex="-1"><a class="header-anchor" href="#hinh-thuc-chuan-hoa"><span>H√¨nh th·ª©c chu·∫©n ho√°</span></a></h3><blockquote><p>NF: Normal Form</p></blockquote><p>L√Ω thuy·∫øt h√¨nh th·ª©c chu·∫©n ƒë∆∞·ª£c t·∫°o ra ƒë·ªÉ gi·∫£i quy·∫øt b·ªën v·∫•n ƒë·ªÅ tr√™n.</p><p>H√¨nh th·ª©c cao h∆°n ph·ª• thu·ªôc v√†o h√¨nh th·ª©c th·∫•p h∆°n, 1NF l√† h√¨nh th·ª©c th·∫•p nh·∫•t.</p><div align="center"><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202307211855060.png"></div><h4 id="chuan-hoa-1nf" tabindex="-1"><a class="header-anchor" href="#chuan-hoa-1nf"><span>Chu·∫©n ho√° 1NF</span></a></h4><p>C√°c thu·ªôc t√≠nh kh√¥ng th·ªÉ ph√¢n chia.</p><h4 id="chuan-hoa-2nf" tabindex="-1"><a class="header-anchor" href="#chuan-hoa-2nf"><span>Chu·∫©n ho√° 2NF</span></a></h4><ul><li>M·ªói thu·ªôc t√≠nh kh√¥ng ch√≠nh ph·ª• thu·ªôc ho√†n to√†n v√†o kh√≥a.</li><li>C√≥ th·ªÉ ƒë·∫°t ƒë∆∞·ª£c b·∫±ng c√°ch ph√¢n t√°ch.</li></ul><p><strong>Tr∆∞·ªõc khi ph√¢n t√°ch</strong></p><table><thead><tr><th style="text-align:center;">Sno</th><th style="text-align:center;">Sname</th><th style="text-align:center;">Sdept</th><th style="text-align:center;">Mname</th><th style="text-align:center;">Cname</th><th style="text-align:center;">Grade</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:center;">Student-1</td><td style="text-align:center;">Department-1</td><td style="text-align:center;">Manager-1</td><td style="text-align:center;">Course-1</td><td style="text-align:center;">90</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">Student-2</td><td style="text-align:center;">Department-2</td><td style="text-align:center;">Manager-2</td><td style="text-align:center;">Course-2</td><td style="text-align:center;">80</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">Student-2</td><td style="text-align:center;">Department-2</td><td style="text-align:center;">Manager-2</td><td style="text-align:center;">Course-1</td><td style="text-align:center;">100</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">Student-3</td><td style="text-align:center;">Department-2</td><td style="text-align:center;">Manager-2</td><td style="text-align:center;">Course-2</td><td style="text-align:center;">95</td></tr></tbody></table><p>Trong quan h·ªá Student-Course tr√™n, {Sno, Cname} l√† kh√≥a, c√≥ c√°c ph·ª• thu·ªôc h√†m sau:</p><ul><li>Sno -&gt; Sname, Sdept</li><li>Sdept -&gt; Mname</li><li>Sno, Cname-&gt; Grade</li></ul><p>Grade ph·ª• thu·ªôc ho√†n to√†n v√†o kh√≥a, kh√¥ng c√≥ d·ªØ li·ªáu d∆∞ th·ª´a, m·ªói Student m·ªói Course ƒë·ªÅu c√≥ ƒëi·ªÉm s·ªë c·ª• th·ªÉ.</p><p>Sname, Sdept v√† Mname ƒë·ªÅu ph·ª• thu·ªôc m·ªôt ph·∫ßn v√†o kh√≥a, khi m·ªôt Student ch·ªçn nhi·ªÅu Course, d·ªØ li·ªáu n√†y s·∫Ω xu·∫•t hi·ªán nhi·ªÅu l·∫ßn, g√¢y ra nhi·ªÅu d·ªØ li·ªáu d∆∞ th·ª´a.</p><p><strong>Sau khi ph√¢n t√°ch</strong></p><p>Relation-1</p><table><thead><tr><th style="text-align:center;">Sno</th><th style="text-align:center;">Sname</th><th style="text-align:center;">Sdept</th><th style="text-align:center;">Manager</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:center;">Student-1</td><td style="text-align:center;">Department-1</td><td style="text-align:center;">Manager-1</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">Student-2</td><td style="text-align:center;">Department-2</td><td style="text-align:center;">Manager-1</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">Student-3</td><td style="text-align:center;">Department-2</td><td style="text-align:center;">Manager-1</td></tr></tbody></table><p>C√≥ c√°c ph·ª• thu·ªôc h√†m sau:</p><ul><li>Sno -&gt; Sname, Sdept</li></ul><p>Relation-2</p><table><thead><tr><th style="text-align:center;">Sno</th><th style="text-align:center;">Cname</th><th style="text-align:center;">Grade</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:center;">Course-1</td><td style="text-align:center;">90</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">Course-2</td><td style="text-align:center;">80</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">Course-1</td><td style="text-align:center;">100</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">Course-2</td><td style="text-align:center;">95</td></tr></tbody></table><p>C√≥ c√°c ph·ª• thu·ªôc h√†m sau:</p><ul><li>Sno, Cname -&gt; Grade</li></ul><h4 id="hinh-thuc-3nf" tabindex="-1"><a class="header-anchor" href="#hinh-thuc-3nf"><span>H√¨nh th·ª©c 3NF</span></a></h4><ul><li>Thu·ªôc t√≠nh kh√¥ng ph·ª• thu·ªôc chuy·ªÉn ti·∫øp v√†o kh√≥a.</li></ul><p>Trong Relation-1 ·ªü tr√™n, c√≥ ph·ª• thu·ªôc chuy·ªÉn ti·∫øp sau: Sno -&gt; Sdept -&gt; Mname, c√≥ th·ªÉ ph√¢n t√°ch nh∆∞ sau:</p><p>Relation-11</p><table><thead><tr><th style="text-align:center;">Sno</th><th style="text-align:center;">Sname</th><th style="text-align:center;">Sdept</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:center;">Student-1</td><td style="text-align:center;">Department-1</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">Student-2</td><td style="text-align:center;">Department-2</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">Student-3</td><td style="text-align:center;">Department-2</td></tr></tbody></table><p>Relation-12</p><table><thead><tr><th style="text-align:center;">Sdept</th><th style="text-align:center;">Mname</th></tr></thead><tbody><tr><td style="text-align:center;">Department-1</td><td style="text-align:center;">Manager-1</td></tr><tr><td style="text-align:center;">Department-2</td><td style="text-align:center;">Manager-2</td></tr></tbody></table><h2 id="storage-engine" tabindex="-1"><a class="header-anchor" href="#storage-engine"><span>Storage Engine</span></a></h2><p>MySQL c√≥ nhi·ªÅu lo·∫°i Storage Engine kh√°c nhau, <strong>c√°c Engine l∆∞u tr·ªØ d·ªØ li·ªáu v√† ch·ªâ m·ª•c theo c√°ch kh√°c nhau, nh∆∞ng ƒë·ªãnh nghƒ©a b·∫£ng ƒë∆∞·ª£c x·ª≠ l√Ω chung tr√™n t·∫ßng d·ªãch v·ª• MySQL</strong>.</p><p>D∆∞·ªõi ƒë√¢y l√† m·ªôt s·ªë Engine l∆∞u tr·ªØ ph·ªï bi·∫øn:</p><ul><li><strong>InnoDB</strong> - Engine l∆∞u tr·ªØ giao d·ªãch m·∫∑c ƒë·ªãnh c·ªßa MySQL, cung c·∫•p kh√≥a h√†ng v√† r√†ng bu·ªôc kh√≥a ngo·∫°i. Hi·ªáu su·∫•t t·ªët v√† h·ªó tr·ª£ kh√¥i ph·ª•c t·ª± ƒë·ªông.</li><li><strong>MyISAM</strong> - Engine l∆∞u tr·ªØ m·∫∑c ƒë·ªãnh cho MySQL tr∆∞·ªõc phi√™n b·∫£n 5.1. C√≥ nhi·ªÅu t√≠nh nƒÉng nh∆∞ng kh√¥ng h·ªó tr·ª£ giao d·ªãch, kh√≥a h√†ng v√† r√†ng bu·ªôc kh√≥a ngo·∫°i, c≈©ng kh√¥ng c√≥ kh·∫£ nƒÉng kh√¥i ph·ª•c.</li><li><strong>CSV</strong> - Cho ph√©p x·ª≠ l√Ω t·ªáp CSV nh∆∞ m·ªôt b·∫£ng trong MySQL, nh∆∞ng b·∫£ng n√†y kh√¥ng h·ªó tr·ª£ ch·ªâ m·ª•c.</li><li><strong>MEMORY</strong> - D·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u tr·ªØ ho√†n to√†n trong b·ªô nh·ªõ, t·ªëc ƒë·ªô x·ª≠ l√Ω d·ªØ li·ªáu nhanh, nh∆∞ng kh√¥ng an to√†n.</li></ul><h3 id="innodb-vs-myisam" tabindex="-1"><a class="header-anchor" href="#innodb-vs-myisam"><span>InnoDB vs. MyISAM</span></a></h3><p>InnoDB v√† MyISAM l√† hai Engine l∆∞u tr·ªØ MySQL ph·ªï bi·∫øn nh·∫•t hi·ªán nay.</p><ul><li>C·∫•u tr√∫c d·ªØ li·ªáu: <ul><li>C·∫£ InnoDB v√† MyISAM ƒë·ªÅu s·ª≠ d·ª•ng c·∫•u tr√∫c d·ªØ li·ªáu ch·ªâ m·ª•c l√† B+Tree.</li><li>B+ tree c·ªßa MyISAM l∆∞u tr·ªØ gi√° tr·ªã ƒë·ªãa ch·ªâ th·ª±c t·∫ø c·ªßa d·ªØ li·ªáu. Nghƒ©a l√† ch·ªâ m·ª•c v√† d·ªØ li·ªáu th·ª±c t·∫ø ƒë∆∞·ª£c t√°ch r·ªùi nhau, ch·ªâ m·ª•c ch·ªâ tr·ªè ƒë·∫øn d·ªØ li·ªáu th·ª±c t·∫ø. M√¥ h√¨nh ch·ªâ m·ª•c n√†y ƒë∆∞·ª£c g·ªçi l√† ch·ªâ m·ª•c kh√¥ng gom nh√≥m.</li><li>B+ tree c·ªßa InnoDB l∆∞u tr·ªØ d·ªØ li·ªáu th·ª±c t·∫ø. Ch·ªâ m·ª•c n√†y ƒë∆∞·ª£c g·ªçi l√† ch·ªâ m·ª•c gom nh√≥m.</li></ul></li><li>H·ªó tr·ª£ giao d·ªãch: <ul><li>InnoDB h·ªó tr·ª£ giao d·ªãch v√† cung c·∫•p kh√≥a h√†ng v√† r√†ng bu·ªôc kh√≥a ngo·∫°i.</li><li>MyISAM kh√¥ng h·ªó tr·ª£ giao d·ªãch, kh√≥a h√†ng v√† r√†ng bu·ªôc kh√≥a ngo·∫°i.</li></ul></li><li>Kh√¥i ph·ª•c sau s·ª± c·ªë: <ul><li>InnoDB h·ªó tr·ª£ kh√¥i ph·ª•c sau s·ª± c·ªë.</li><li>MyISAM kh√¥ng h·ªó tr·ª£ kh√¥i ph·ª•c sau s·ª± c·ªë.</li></ul></li></ul><h2 id="so-sanh-co-so-du-lieu" tabindex="-1"><a class="header-anchor" href="#so-sanh-co-so-du-lieu"><span>So s√°nh c∆° s·ªü d·ªØ li·ªáu</span></a></h2><h3 id="so-sanh-co-so-du-lieu-pho-bien" tabindex="-1"><a class="header-anchor" href="#so-sanh-co-so-du-lieu-pho-bien"><span>So s√°nh c∆° s·ªü d·ªØ li·ªáu ph·ªï bi·∫øn</span></a></h3><ul><li><code>Oracle</code> - C∆° s·ªü d·ªØ li·ªáu th∆∞∆°ng m·∫°i n·ªïi ti·∫øng. M·∫°nh m·∫Ω, ·ªïn ƒë·ªãnh. Nh∆∞·ª£c ƒëi·ªÉm l·ªõn nh·∫•t l√† ti·ªÅn ƒë√¢u.</li><li><code>Mysql</code> - Tr∆∞·ªõc ƒë√¢y l√† s·ª± l·ª±a ch·ªçn h√†ng ƒë·∫ßu c·ªßa c√°c c√¥ng ty Internet, nh∆∞ng sau khi Mysql b·ªã Oracle mua l·∫°i, c√≥ th·ªÉ kh√¥ng c√≤n th·ªùi k·ª≥ t·ªët ƒë·∫πp nh∆∞ tr∆∞·ªõc. Nhi·ªÅu c√¥ng ty ho·∫∑c d·ª± √°n m√£ ngu·ªìn m·ªü ƒëang t√¨m ki·∫øm c√°c s·∫£n ph·∫©m m√£ ngu·ªìn m·ªü kh√°c ƒë·ªÉ thay th·∫ø Mysql.</li><li><code>MariaDB</code> - C∆° s·ªü d·ªØ li·ªáu m√£ ngu·ªìn m·ªü. L√† phi√™n b·∫£n m√£ ngu·ªìn m·ªü th·ª±c s·ª± c·ªßa Mysql, ƒë∆∞·ª£c t·∫°o ra b·ªüi m·ªôt s·ªë nh√¢n vi√™n c·ªët l√µi c·ªßa Mysql. C√≥ th·ªÉ l√† m·ªôt s·∫£n ph·∫©m thay th·∫ø cho Mysql.</li><li><code>PostgreSQL</code> - C∆° s·ªü d·ªØ li·ªáu m√£ ngu·ªìn m·ªü. Ho·∫°t ƒë·ªông r·∫•t gi·ªëng v·ªõi Mysql v√† c√≥ s·ª± h·ªó tr·ª£ t·ªët t·ª´ c·ªông ƒë·ªìng. C√≥ th·ªÉ l√† m·ªôt s·∫£n ph·∫©m thay th·∫ø cho Mysql.</li><li><code>SQLite</code> - C∆° s·ªü d·ªØ li·ªáu nh·ªè g·ªçn m√£ ngu·ªìn m·ªü, th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng tr√™n thi·∫øt b·ªã di ƒë·ªông.</li><li><code>H2</code> - C∆° s·ªü d·ªØ li·ªáu trong b·ªô nh·ªõ, th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng trong m√¥i tr∆∞·ªùng ph√°t tri·ªÉn v√† ki·ªÉm th·ª≠.</li><li><code>SQL Server</code> - C∆° s·ªü d·ªØ li·ªáu c·ªßa h·ªá sinh th√°i Windows c·ªßa Microsoft.</li></ul><h3 id="oracle-vs-mysql" tabindex="-1"><a class="header-anchor" href="#oracle-vs-mysql"><span>Oracle vs Mysql</span></a></h3><p>Cho ƒë·∫øn nay, Oracle v√† Mysql v·∫´n l√† hai c∆° s·ªü d·ªØ li·ªáu quan h·ªá ph·ªï bi·∫øn nh·∫•t theo <a href="https://db-engines.com/en/ranking" target="_blank" rel="noopener noreferrer">DB-Engines Ranking</a>, v√¨ v·∫≠y t√¥i s·∫Ω so s√°nh ch√∫ng.</p><h4 id="khac-biet-ve-ƒëoi-tuong-co-so-du-lieu" tabindex="-1"><a class="header-anchor" href="#khac-biet-ve-ƒëoi-tuong-co-so-du-lieu"><span>Kh√°c bi·ªát v·ªÅ ƒë·ªëi t∆∞·ª£ng c∆° s·ªü d·ªØ li·ªáu</span></a></h4><p>Trong Mysql, <strong>m·ªôt ng∆∞·ªùi d√πng c√≥ th·ªÉ t·∫°o nhi·ªÅu c∆° s·ªü d·ªØ li·ªáu</strong>.</p><p>Trong Oracle, m√°y ch·ªß Oracle bao g·ªìm hai ph·∫ßn</p><ul><li>Th·ªÉ hi·ªán c∆° s·ªü d·ªØ li·ªáu [ƒë∆∞·ª£c hi·ªÉu nh∆∞ m·ªôt ƒë·ªëi t∆∞·ª£ng, v√¥ h√¨nh]</li><li>C∆° s·ªü d·ªØ li·ªáu ¬†[ƒë∆∞·ª£c hi·ªÉu nh∆∞ m·ªôt l·ªõp, c√≥ th·ªÉ nh√¨n th·∫•y]</li></ul><p><strong>M·ªôt th·ªÉ hi·ªán c∆° s·ªü d·ªØ li·ªáu c√≥ th·ªÉ c√≥ nhi·ªÅu ng∆∞·ªùi d√πng, m·ªôt ng∆∞·ªùi d√πng m·∫∑c ƒë·ªãnh c√≥ m·ªôt kh√¥ng gian b·∫£ng</strong>.</p><p>Kh√¥ng gian b·∫£ng l√† n∆°i l∆∞u tr·ªØ b·∫£ng c∆° s·ªü d·ªØ li·ªáu, kh√¥ng gian b·∫£ng c√≥ th·ªÉ ch·ª©a nhi·ªÅu t·ªáp.</p><h4 id="khac-biet-ve-sql" tabindex="-1"><a class="header-anchor" href="#khac-biet-ve-sql"><span>Kh√°c bi·ªát v·ªÅ SQL</span></a></h4><p>(1) T·ª± ƒë·ªông tƒÉng</p><p>Mysql c√≥ th·ªÉ s·ª≠ d·ª•ng r√†ng bu·ªôc <code>AUTO_INCREMENT</code> ƒë·ªÉ ch·ªâ ƒë·ªãnh kh√≥a ch√≠nh l√† m·ªôt chu·ªói tƒÉng t·ª± ƒë·ªông.</p><p>Oracle c·∫ßn t·∫°o chu·ªói tƒÉng b·∫±ng c√°ch s·ª≠ d·ª•ng <code>CREATE SEQUENCE</code>.</p><p>(2) Truy v·∫•n ph√¢n trang</p><p>Mysql s·ª≠ d·ª•ng <code>SELECT ‚Ä¶ FROM ‚Ä¶ LIMIT ‚Ä¶</code> ƒë·ªÉ th·ª±c hi·ªán truy v·∫•n ph√¢n trang, ƒë∆°n gi·∫£n h∆°n.</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> help_category </span><span style="color:#C678DD;--shiki-dark:#C678DD;">order by</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> parent_category_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">limit</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><p>Oracle s·ª≠ d·ª•ng <code>SELECT ‚Ä¶ FROM (SELECT ROWNUM ‚Ä¶) WHERE ‚Ä¶</code> ƒë·ªÉ th·ª±c hi·ªán truy v·∫•n ph√¢n trang, ph·ª©c t·∫°p h∆°n.</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> rownum rr,a.* </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp </span><span style="color:#C678DD;--shiki-dark:#C678DD;">order by</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sal) a )</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> rr</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66;">5</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> and</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> rr</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&lt;=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><h4 id="khac-biet-ve-giao-dich" tabindex="-1"><a class="header-anchor" href="#khac-biet-ve-giao-dich"><span>Kh√°c bi·ªát v·ªÅ giao d·ªãch</span></a></h4><ul><li>Auto commit <ul><li>Giao d·ªãch Mysql l√† ch·∫ø ƒë·ªô auto commit (autocommit);</li><li>Giao d·ªãch Oracle y√™u c·∫ßu <code>COMMIT</code> th·ªß c√¥ng.</li></ul></li><li>M·ª©c ƒë·ªô c√¥ l·∫≠p giao d·ªãch <ul><li>Mysql m·∫∑c ƒë·ªãnh c·∫•p ƒë·ªô c√¥ l·∫≠p giao d·ªãch l√† ƒë·ªçc l·∫∑p l·∫°i (REPEATABLE READ);</li><li>Oracle h·ªó tr·ª£ hai c·∫•p ƒë·ªô c√¥ l·∫≠p giao d·ªãch l√† ƒë·ªçc ƒë√£ cam k·∫øt (READ COMMITTED) v√† tu·∫ßn t·ª± h√≥a (SERIALIZABLE), c·∫•p ƒë·ªô c√¥ l·∫≠p giao d·ªãch m·∫∑c ƒë·ªãnh l√† ƒë·ªçc ƒë√£ cam k·∫øt (READ COMMITTED).</li></ul></li></ul><h3 id="so-sanh-kieu-du-lieu" tabindex="-1"><a class="header-anchor" href="#so-sanh-kieu-du-lieu"><span>So s√°nh ki·ªÉu d·ªØ li·ªáu</span></a></h3><blockquote><p>M·ªói c∆° s·ªü d·ªØ li·ªáu c√≥ s·ª± h·ªó tr·ª£ kh√°c nhau cho c√°c ki·ªÉu d·ªØ li·ªáu.</p><p>Ngay c·∫£ khi c√≥ c√πng m·ªôt ki·ªÉu d·ªØ li·ªáu, c≈©ng c√≥ th·ªÉ t·ªìn t·∫°i c√°c v·∫•n ƒë·ªÅ nh∆∞ t√™n kh√°c nhau ho·∫∑c k√≠ch th∆∞·ªõc kh√°c nhau.</p><p>Do ƒë√≥, chi ti·∫øt h·ªó tr·ª£ ki·ªÉu d·ªØ li·ªáu ph·∫£i tham kh·∫£o t√†i li·ªáu ch√≠nh th·ª©c c·ªßa t·ª´ng c∆° s·ªü d·ªØ li·ªáu.</p></blockquote><p>D∆∞·ªõi ƒë√¢y l√† m·ªôt s·ªë so s√°nh ki·ªÉu d·ªØ li·ªáu ph·ªï bi·∫øn:</p><table><thead><tr><th style="text-align:left;">Ki·ªÉu d·ªØ li·ªáu</th><th style="text-align:left;">Oracle</th><th style="text-align:left;">MySQL</th><th style="text-align:left;">PostgreSQL</th></tr></thead><tbody><tr><td style="text-align:left;"><code>boolean</code></td><td style="text-align:left;">Byte</td><td style="text-align:left;">N/A</td><td style="text-align:left;">Boolean</td></tr><tr><td style="text-align:left;"><code>integer</code></td><td style="text-align:left;">Number</td><td style="text-align:left;">Int Integer</td><td style="text-align:left;">Int Integer</td></tr><tr><td style="text-align:left;"><code>float</code></td><td style="text-align:left;">Number</td><td style="text-align:left;">Float</td><td style="text-align:left;">Numeric</td></tr><tr><td style="text-align:left;"><code>currency</code></td><td style="text-align:left;">N/A</td><td style="text-align:left;">N/A</td><td style="text-align:left;">Money</td></tr><tr><td style="text-align:left;"><code>string (fixed)</code></td><td style="text-align:left;">Char</td><td style="text-align:left;">Char</td><td style="text-align:left;">Char</td></tr><tr><td style="text-align:left;"><code>string (variable)</code></td><td style="text-align:left;">Varchar Varchar2</td><td style="text-align:left;">Varchar</td><td style="text-align:left;">Varchar</td></tr><tr><td style="text-align:left;"><code>binary object</code></td><td style="text-align:left;">Long Raw</td><td style="text-align:left;">Blob Text</td><td style="text-align:left;">Binary Varbinary</td></tr></tbody></table><blockquote><p>B·∫£ng so s√°nh ki·ªÉu d·ªØ li·ªáu ƒë∆∞·ª£c tr√≠ch t·ª´ <a href="https://www.w3schools.com/sql/sql_datatypes.asp" target="_blank" rel="noopener noreferrer">SQL Data Types for MySQL, SQL Server, and MS Access</a></p></blockquote><h2 id="cau-hoi-thuong-gap-ve-sql" tabindex="-1"><a class="header-anchor" href="#cau-hoi-thuong-gap-ve-sql"><span>C√¢u h·ªèi th∆∞·ªùng g·∫∑p v·ªÅ SQL</span></a></h2><h3 id="co-su-khac-biet-ve-hieu-suat-giua-select-count-select-count-1-va-select-count-column-khong" tabindex="-1"><a class="header-anchor" href="#co-su-khac-biet-ve-hieu-suat-giua-select-count-select-count-1-va-select-count-column-khong"><span>C√≥ s·ª± kh√°c bi·ªát v·ªÅ hi·ªáu su·∫•t gi·ªØa SELECT COUNT(*), SELECT COUNT(1) v√† SELECT COUNT(Column) kh√¥ng?</span></a></h3><p>Trong MySQL InnoDB Storage Engine,¬†<code>COUNT(*)</code>¬†v√†¬†<code>COUNT(1)</code>¬†ƒë·ªÅu ƒë·∫øm t·∫•t c·∫£ c√°c k·∫øt qu·∫£. Do ƒë√≥,¬†<code>COUNT(*)</code>¬†v√†¬†<code>COUNT(1)</code>¬†kh√¥ng c√≥ s·ª± kh√°c bi·ªát c∆° b·∫£n, ƒë·ªô ph·ª©c t·∫°p c·ªßa ch√∫ng ƒë·ªÅu l√† O(N), c√≥ nghƒ©a l√† qu√©t to√†n b·ªô b·∫£ng v√† th·ª±c hi·ªán v√≤ng l·∫∑p + ƒë·∫øm ƒë·ªÉ th·ªëng k√™.</p><p>N·∫øu s·ª≠ d·ª•ng MySQL MyISAM Storage Engine, vi·ªác ƒë·∫øm s·ªë h√†ng c·ªßa b·∫£ng ch·ªâ m·∫•t ƒë·ªô ph·ª©c t·∫°p O(1), ƒëi·ªÅu n√†y l√† do m·ªói b·∫£ng d·ªØ li·ªáu MyISAM c√≥ m·ªôt th√¥ng tin meta l∆∞u tr·ªØ gi√° tr·ªã¬†<code>row_count</code>, v√† t√≠nh nh·∫•t qu√°n ƒë∆∞·ª£c ƒë·∫£m b·∫£o b·ªüi kh√≥a c·∫•p b·∫£ng. V√¨ InnoDB h·ªó tr·ª£ giao d·ªãch, s·ª≠ d·ª•ng kh√≥a c·∫•p h√†ng v√† c∆° ch·∫ø MVCC, n√™n kh√¥ng th·ªÉ duy tr√¨ ch·ªâ m·ªôt bi·∫øn¬†<code>row_count</code>¬†nh∆∞ MyISAM, do ƒë√≥ c·∫ßn qu√©t to√†n b·ªô b·∫£ng v√† th·ª±c hi·ªán v√≤ng l·∫∑p + ƒë·∫øm ƒë·ªÉ ho√†n th√†nh th·ªëng k√™.</p><p>C·∫ßn l∆∞u √Ω r·∫±ng trong th·ª±c t·∫ø, th·ªùi gian th·ª±c thi c·ªßa¬†<code>COUNT(*)</code>¬†v√†¬†<code>COUNT(1)</code>¬†c√≥ th·ªÉ c√≥ m·ªôt ch√∫t kh√°c bi·ªát, tuy nhi√™n b·∫°n v·∫´n c√≥ th·ªÉ coi hi·ªáu su·∫•t th·ª±c thi c·ªßa ch√∫ng l√† t∆∞∆°ng ƒë∆∞∆°ng.</p><p>Ngo√†i ra, trong InnoDB, n·∫øu s·ª≠ d·ª•ng¬†<code>COUNT(*)</code>¬†v√†¬†<code>COUNT(1)</code>¬†ƒë·ªÉ th·ªëng k√™ s·ªë h√†ng d·ªØ li·ªáu, h√£y c·ªë g·∫Øng s·ª≠ d·ª•ng ch·ªâ m·ª•c c·∫•p hai. V√¨¬†<code>COUNT(*)</code>¬†v√†¬†<code>COUNT(1)</code>¬†kh√¥ng c·∫ßn t√¨m ki·∫øm c√°c h√†ng c·ª• th·ªÉ, h·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông s·ª≠ d·ª•ng ch·ªâ m·ª•c c·∫•p hai chi·∫øm √≠t kh√¥ng gian h∆°n ƒë·ªÉ th·ªëng k√™.</p><p>Tuy nhi√™n, n·∫øu b·∫°n mu·ªën t√¨m ki·∫øm c√°c h√†ng c·ª• th·ªÉ, th√¨ hi·ªáu su·∫•t s·ª≠ d·ª•ng ch·ªâ m·ª•c kh√≥a ch√≠nh s·∫Ω cao h∆°n. N·∫øu c√≥ nhi·ªÅu ch·ªâ m·ª•c c·∫•p hai, h·ªá th·ªëng s·∫Ω s·ª≠ d·ª•ng ch·ªâ m·ª•c c·∫•p hai c√≥¬†<code>key_len</code>¬†nh·ªè h∆°n ƒë·ªÉ qu√©t. Ch·ªâ khi kh√¥ng c√≥ ch·ªâ m·ª•c c·∫•p hai, h·ªá th·ªëng m·ªõi s·ª≠ d·ª•ng ch·ªâ m·ª•c kh√≥a ch√≠nh ƒë·ªÉ th·ªëng k√™.</p><p>T√≥m l·∫°i:</p><ol><li>N√≥i chung, hi·ªáu su·∫•t th·ª±c thi c·ªßa ba ph∆∞∆°ng th·ª©c l√†¬†<code>COUNT(*)</code>¬†=¬†<code>COUNT(1)</code>¬†&gt;¬†<code>COUNT(Column)</code>. Ch√∫ng ta n√™n s·ª≠ d·ª•ng¬†<code>COUNT(*)</code>¬†n·∫øu k·∫øt qu·∫£ mong mu·ªën l√† gi·ªëng nhau, tuy nhi√™n n·∫øu b·∫°n mu·ªën th·ªëng k√™ s·ªë h√†ng d·ªØ li·ªáu kh√¥ng r·ªóng c·ªßa m·ªôt tr∆∞·ªùng c·ª• th·ªÉ, ƒëi·ªÅu n√†y s·∫Ω kh√°c bi·ªát, b·ªüi v√¨ so s√°nh hi·ªáu su·∫•t th·ª±c thi ch·ªâ c√≥ √Ω nghƒ©a khi k·∫øt qu·∫£ l√† gi·ªëng nhau.</li><li>N·∫øu mu·ªën th·ªëng k√™¬†<code>COUNT(*)</code>, h√£y c·ªë g·∫Øng t·∫°o ch·ªâ m·ª•c c·∫•p hai tr√™n b·∫£ng d·ªØ li·ªáu, h·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông s·ª≠ d·ª•ng ch·ªâ m·ª•c c·∫•p hai c√≥¬†<code>key_len</code>¬†nh·ªè h∆°n ƒë·ªÉ qu√©t, ƒëi·ªÅu n√†y s·∫Ω c·∫£i thi·ªán hi·ªáu su·∫•t khi s·ª≠ d·ª•ng¬†<code>SELECT COUNT(*)</code>, ƒë√¥i khi c√≥ th·ªÉ c·∫£i thi·ªán m·ªôt v√†i l·∫ßn ho·∫∑c nhi·ªÅu h∆°n.</li></ol><h3 id="order-by-co-sap-xep-theo-nhom-hay-sap-xep-theo-ban-ghi-trong-nhom-khong" tabindex="-1"><a class="header-anchor" href="#order-by-co-sap-xep-theo-nhom-hay-sap-xep-theo-ban-ghi-trong-nhom-khong"><span>ORDER BY c√≥ s·∫Øp x·∫øp theo nh√≥m hay s·∫Øp x·∫øp theo b·∫£n ghi trong nh√≥m kh√¥ng?</span></a></h3><p>ORDER BY l√† c√°ch s·∫Øp x·∫øp c√°c b·∫£n ghi trong m·ªôt truy v·∫•n. N·∫øu b·∫°n s·ª≠ d·ª•ng GROUP BY tr∆∞·ªõc ORDER BY, th√¨ ƒë√¢y th·ª±c ch·∫•t l√† m·ªôt ph∆∞∆°ng ph√°p t·ªï h·ª£p nh√≥m, ƒë√£ t·ªï h·ª£p d·ªØ li·ªáu c·ªßa m·ªôt nh√≥m th√†nh m·ªôt b·∫£n ghi v√† sau ƒë√≥ ti·∫øn h√†nh s·∫Øp x·∫øp theo nh√≥m ƒë√£ t·∫°o ra.</p><h3 id="cac-buoc-thuc-thi-trong-mot-cau-lenh-select" tabindex="-1"><a class="header-anchor" href="#cac-buoc-thuc-thi-trong-mot-cau-lenh-select"><span>C√°c b∆∞·ªõc th·ª±c thi trong m·ªôt c√¢u l·ªánh SELECT</span></a></h3><p>Th·ª© t·ª± th·ª±c hi·ªán trong m·ªôt c√¢u l·ªánh SELECT ho√†n ch·ªânh nh∆∞ sau:</p><ol><li>T·∫°o d·ªØ li·ªáu t·ª´ m·ªánh ƒë·ªÅ FROM (bao g·ªìm k·∫øt n·ªëi b·∫±ng ON).</li><li>L·ªçc d·ªØ li·ªáu t·ª´ m·ªánh ƒë·ªÅ WHERE.</li><li>Nh√≥m d·ªØ li·ªáu t·ª´ m·ªánh ƒë·ªÅ GROUP BY.</li><li>T√≠nh to√°n b·∫±ng c√°c h√†m t·ªïng h·ª£p.</li><li>L·ªçc d·ªØ li·ªáu t·ª´ m·ªánh ƒë·ªÅ HAVING.</li><li>T√≠nh to√°n t·∫•t c·∫£ c√°c bi·ªÉu th·ª©c.</li><li>Ch·ªçn c√°c tr∆∞·ªùng trong m·ªánh ƒë·ªÅ SELECT.</li><li>S·∫Øp x·∫øp d·ªØ li·ªáu t·ª´ m·ªánh ƒë·ªÅ ORDER BY.</li><li>L·ªçc d·ªØ li·ªáu t·ª´ m·ªánh ƒë·ªÅ LIMIT.</li></ol><h3 id="khi-nao-nen-su-dung-exists-va-khi-nao-nen-su-dung-in" tabindex="-1"><a class="header-anchor" href="#khi-nao-nen-su-dung-exists-va-khi-nao-nen-su-dung-in"><span>Khi n√†o n√™n s·ª≠ d·ª•ng EXISTS v√† khi n√†o n√™n s·ª≠ d·ª•ng IN?</span></a></h3><p>ƒêi·ªÅu ki·ªán ti√™n quy·∫øt l√† ph·∫£i c√≥ ch·ªâ m·ª•c. Ch·ªâ c·∫ßn c√≥ ch·ªâ m·ª•c, vi·ªác l·ª±a ch·ªçn th·ª±c t·∫ø v·∫´n ph·ª• thu·ªôc v√†o k√≠ch th∆∞·ªõc c·ªßa b·∫£ng. B·∫°n c√≥ th·ªÉ hi·ªÉu ti√™u chu·∫©n l·ª±a ch·ªçn l√† s·ª≠ d·ª•ng b·∫£ng nh·ªè ƒë·ªÉ ƒëi·ªÅu khi·ªÉn b·∫£ng l·ªõn. Ph∆∞∆°ng ph√°p n√†y ƒë·∫°t hi·ªáu su·∫•t cao nh·∫•t.</p><p>V√≠ d·ª•:</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> A </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> cc </span><span style="color:#C678DD;--shiki-dark:#C678DD;">IN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> cc </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> B)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> A </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> EXISTS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> cc </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> B </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> B</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">cc</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">A</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">cc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>Khi A nh·ªè h∆°n B, s·ª≠ d·ª•ng EXISTS. V√¨ vi·ªác th·ª±c hi·ªán EXISTS t∆∞∆°ng ƒë∆∞∆°ng v·ªõi v√≤ng l·∫∑p b√™n ngo√†i, logic th·ª±c hi·ªán t∆∞∆°ng t·ª± nh∆∞ sau:</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> i </span><span style="color:#C678DD;--shiki-dark:#C678DD;">in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> A</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> j </span><span style="color:#C678DD;--shiki-dark:#C678DD;">in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> B</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        if</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> j</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">cc</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> ==</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> i</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">cc</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> then</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ...</span></span></code></pre></div><p>Khi B nh·ªè h∆°n A, s·ª≠ d·ª•ng IN, v√¨ logic th·ª±c hi·ªán t∆∞∆°ng t·ª± nh∆∞ sau:</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> i </span><span style="color:#C678DD;--shiki-dark:#C678DD;">in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> B</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> j </span><span style="color:#C678DD;--shiki-dark:#C678DD;">in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> A</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        if</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> j</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">cc</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> ==</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> i</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">cc</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> then</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ...</span></span></code></pre></div><p>S·ª≠ d·ª•ng b·∫£ng nh·ªè ƒë·ªÉ ƒëi·ªÅu khi·ªÉn b·∫£ng l·ªõn, n·∫øu A nh·ªè h∆°n th√¨ s·ª≠ d·ª•ng EXISTS, n·∫øu B nh·ªè h∆°n th√¨ s·ª≠ d·ª•ng IN.</p></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/vanhung4499/my-wiki/edit/main/src/database/sql/interview.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">Last update: </span><!----></div><div class="contributors"><span class="vp-meta-label">Contributors: </span><!--[--><!--[--><span class="vp-meta-info" title="email: vanhung4499@gmail.com">Hung Nguyen Van</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/database/sql/extend-sql.html" aria-label="Extend SQL"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:sql-query" width="1em" height="1em"></iconify-icon>Extend SQL</div></a><!----></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper" style="display:none;--1ea755b8:;"><div class="footer-content"><div class="footer">Made with ‚ù§Ô∏è by Hung Nguyen</div><div class="copyright">Copyright ¬© 2016-2024 Hung Nguyen</div></div><span id="runtime_span"></span></footer></div><!--]--><!--[--><!----><!----><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-C7tm95bn.js" defer></script>
  </body>
</html>
