<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.15" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://vanhung4499.github.io/framework/spring-boot/springmvc.html"><meta property="og:site_name" content="VanHung4499"><meta property="og:title" content="SpringMVC"><meta property="og:description" content="SpringMVC B√†i vi·∫øt n√†y cung c·∫•p m√£ ngu·ªìn ƒë·∫ßy ƒë·ªß, b·∫°n c√≥ th·ªÉ xem t·∫°i https://github.com/YunaiV/SpringBoot-Labs trong th∆∞ m·ª•c lab-23. Vi·ªác s√°ng t·∫°o n·ªôi dung kh√¥ng h·ªÅ d·ªÖ d√†ng, h√£y ..."><meta property="og:type" content="article"><meta property="og:image" content="https://static.iocoder.cn/images/Spring-Boot/2019-11-17/01.png"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2024-10-02T17:20:50.000Z"><meta property="article:author" content="Hung Nguyen"><meta property="article:tag" content="java"><meta property="article:tag" content="spring-boot"><meta property="article:modified_time" content="2024-10-02T17:20:50.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"SpringMVC","image":["https://static.iocoder.cn/images/Spring-Boot/2019-11-17/01.png","https://static.iocoder.cn/images/Spring-Boot/2019-11-17/02.png","https://static.iocoder.cn/images/Spring-Boot/2019-11-17/03.png","https://static.iocoder.cn/images/Spring-Boot/2019-11-17/04.png","https://static.iocoder.cn/images/Spring-Boot/2019-11-17/05.png","https://static.iocoder.cn/images/Spring-Boot/2019-11-17/06.png"],"dateModified":"2024-10-02T17:20:50.000Z","author":[{"@type":"Person","name":"Hung Nguyen","url":"https://vanhung4499.github.io"}]}</script><meta name="referrer" content="no-referrer-when-downgrade"><link rel="alternate" type="application/rss+xml" href="https://vanhung4499.github.io/rss.xml" title="VanHung4499 RSS Feed"><title>SpringMVC | VanHung4499</title><meta name="description" content="SpringMVC B√†i vi·∫øt n√†y cung c·∫•p m√£ ngu·ªìn ƒë·∫ßy ƒë·ªß, b·∫°n c√≥ th·ªÉ xem t·∫°i https://github.com/YunaiV/SpringBoot-Labs trong th∆∞ m·ª•c lab-23. Vi·ªác s√°ng t·∫°o n·ªôi dung kh√¥ng h·ªÅ d·ªÖ d√†ng, h√£y ...">
    <link rel="preload" href="/assets/style-DFXXOFfS.css" as="style"><link rel="stylesheet" href="/assets/style-DFXXOFfS.css">
    <link rel="modulepreload" href="/assets/app-CmlOSuIY.js"><link rel="modulepreload" href="/assets/springmvc.html-CLVgDxJr.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">VanHung4499</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="Home"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:home" width="1em" height="1em"></iconify-icon><!--]-->Home<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/wiki.html" aria-label="Wiki"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="carbon:wikis" width="1em" height="1em"></iconify-icon><!--]-->Wiki<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/dsa/" aria-label="Algorithms"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="hugeicons:algorithm" width="1em" height="1em"></iconify-icon><!--]-->Algorithms<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Programming"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:code" width="1em" height="1em"></iconify-icon>Programming<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/java/" aria-label="Java"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:java" width="1em" height="1em"></iconify-icon><!--]-->Java<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/golang/" aria-label="Golang"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:go" width="1em" height="1em"></iconify-icon><!--]-->Golang<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/js/" aria-label="JavaScript"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:javascript" width="1em" height="1em"></iconify-icon><!--]-->JavaScript<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/ts/" aria-label="TypeScript"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:typescript" width="1em" height="1em"></iconify-icon><!--]-->TypeScript<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/python/" aria-label="Python"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:python" width="1em" height="1em"></iconify-icon><!--]-->Python<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Database"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:database" width="1em" height="1em"></iconify-icon>Database<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/sql/" aria-label="SQL"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:sql-query" width="1em" height="1em"></iconify-icon><!--]-->SQL<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/mysql/" aria-label="MySQL"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:mysql" width="1em" height="1em"></iconify-icon><!--]-->MySQL<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/mongodb/" aria-label="MongoDB"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:mongodb" width="1em" height="1em"></iconify-icon><!--]-->MongoDB<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/redis/" aria-label="Redis"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:redis" width="1em" height="1em"></iconify-icon><!--]-->Redis<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/elasticsearch/" aria-label="Elasticsearch"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:elasticsearch" width="1em" height="1em"></iconify-icon><!--]-->Elasticsearch<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/elastic/" aria-label="Elastic Stack"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="cib:elastic-stack" width="1em" height="1em"></iconify-icon><!--]-->Elastic Stack<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Framework"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="simple-icons:framework" width="1em" height="1em"></iconify-icon>Framework<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/framework/spring/" aria-label="Spring"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Spring<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/framework/spring-boot/" aria-label="Spring Boot"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Spring Boot<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/framework/nestjs/" aria-label="NestJS"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:nestjs" width="1em" height="1em"></iconify-icon><!--]-->NestJS<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/framework/gin/" aria-label="Gin"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:gin" width="1em" height="1em"></iconify-icon><!--]-->Gin<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="DevOps"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon-plain:azuredevops" width="1em" height="1em"></iconify-icon>DevOps<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/docker/" aria-label="Docker"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:docker" width="1em" height="1em"></iconify-icon><!--]-->Docker<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/kubernetes/" aria-label="Kubernetes"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:kubernetes" width="1em" height="1em"></iconify-icon><!--]-->Kubernetes<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/jenkins/" aria-label="Jenkins"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:jenkins" width="1em" height="1em"></iconify-icon><!--]-->Jenkins<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/git/" aria-label="Git"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:git" width="1em" height="1em"></iconify-icon><!--]-->Git<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/linux/" aria-label="Linux"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:linux" width="1em" height="1em"></iconify-icon><!--]-->Linux<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Design"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="tdesign:system-sum" width="1em" height="1em"></iconify-icon>Design<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/design/design-pattern/" aria-label="Design Pattern"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="tabler:grid-pattern" width="1em" height="1em"></iconify-icon><!--]-->Design Pattern<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/design/system-design/" aria-label="System Design"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="icon-park-outline:system" width="1em" height="1em"></iconify-icon><!--]-->System Design<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Project"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="ant-design:project-outlined" width="1em" height="1em"></iconify-icon>Project<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/project/rouyi-vue-pro/" aria-label="Rouyi Vue Pro"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Rouyi Vue Pro<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/project/yudao-cloud/" aria-label="Yudao Cloud"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Yudao Cloud<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/interview/" aria-label="Interview"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:account-tie" width="1em" height="1em"></iconify-icon><!--]-->Interview<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="About"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:about" width="1em" height="1em"></iconify-icon>About<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/about-me.html" aria-label="About me"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="cib:about-me" width="1em" height="1em"></iconify-icon><!--]-->About me<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/about.html" aria-label="About"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:about" width="1em" height="1em"></iconify-icon><!--]-->About<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/vanhung4499/my-wiki" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">Search</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/framework/spring-boot/" aria-label="Spring Boot"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Spring Boot<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/framework/spring-boot/quick-start.html" aria-label="Spring Boot Quick Start"><!---->Spring Boot Quick Start<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/framework/spring-boot/autoconfig.html" aria-label="Spring Boot Auto Configuration"><!---->Spring Boot Auto Configuration<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/framework/spring-boot/lombok.html" aria-label="Lombok"><!---->Lombok<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/framework/spring-boot/map-struct.html" aria-label="MapStruct"><!---->MapStruct<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/framework/spring-boot/springmvc.html" aria-label="SpringMVC"><!---->SpringMVC<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/framework/spring-boot/validation.html" aria-label="Validation"><!---->Validation<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/framework/spring-boot/minio.html" aria-label="Spring Boot + MinIO"><!---->Spring Boot + MinIO<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/framework/spring-boot/spring-security.html" aria-label="Spring Boot Spring Security"><!---->Spring Boot Spring Security<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->SpringMVC</h1><div class="page-info"><span class="page-author-info" aria-label="Authorüñä" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://vanhung4499.github.io" target="_blank" rel="noopener noreferrer">Hung Nguyen</a></span><span property="author" content="Hung Nguyen"></span></span><!----><span class="page-date-info" aria-label="Writing DateüìÖ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-10-02T17:20:50.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time‚åõ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 56 min</span><meta property="timeRequired" content="PT56M"></span><span class="page-category-info" aria-label="Categoryüåà" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color6 clickable" role="navigation">spring-boot</span><!--]--><meta property="articleSection" content="spring-boot"></span><span class="page-tag-info" aria-label="Tagüè∑" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8 clickable" role="navigation">java</span><span class="page-tag-item color6 clickable" role="navigation">spring-boot</span><!--]--><meta property="keywords" content="java,spring-boot"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-1-cac-chu-thich-annotation">2.1 C√°c ch√∫ th√≠ch (Annotation)</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-1-1-controller">2.1.1 @Controller</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-1-2-requestmapping">2.1.2 @RequestMapping</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-1-3-requestparam">2.1.3 @RequestParam</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-2-them-phu-thuoc">2.2 Th√™m ph·ª• thu·ªôc</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-3-application">2.3 Application</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-4-usercontroller">2.4 UserController</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-5-usercontroller2">2.5 UserController2</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-1-kiem-thu-tich-hop">3.1 Ki·ªÉm Th·ª≠ T√≠ch H·ª£p</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-2-kiem-thu-ƒëon-vi">3.2 Ki·ªÉm th·ª≠ ƒê∆°n v·ªã</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-1-nhap-thu-vien">4.1 Nh·∫≠p Th∆∞ Vi·ªán</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-2-ung-dung">4.2 ·ª®ng D·ª•ng</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-3-commonresult">4.3 CommonResult</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-4-globalresponsebodyhandler">4.4 GlobalResponseBodyHandler</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-5-usercontroller">4.5 UserController</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-6-mot-cuoc-thao-luan-nho">4.6 M·ªôt Cu·ªôc Th·∫£o Lu·∫≠n Nh·ªè</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-1-serviceexceptionenum">5.1 ServiceExceptionEnum</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-2-serviceexception">5.2 ServiceException</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-3-globalexceptionhandler">5.3 GlobalExceptionHandler</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-4-usercontroller">5.4 UserController</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_6-1-tuy-chinh-handlerinterceptor">6.1 T√πy ch·ªânh HandlerInterceptor</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-firstinterceptor">1. FirstInterceptor</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-secondinterceptor">2. SecondInterceptor</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-thirdinterceptor">3. ThirdInterceptor</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#tom-lai">T√≥m l·∫°i</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_6-2-springmvcconfiguration">6.2 SpringMVCConfiguration</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#giai-thich">Gi·∫£i th√≠ch:</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#tong-ket">T·ªïng k·∫øt:</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_6-3-usercontroller">6.3 UserController</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-api-users-do-something">‚ë† API /users/do_something</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#giai-thich-1">Gi·∫£i th√≠ch:</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-api-users-current-user">‚ë° API /users/current_user</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#giai-thich-2">Gi·∫£i th√≠ch:</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-api-users-exception-03">‚ë¢ API /users/exception-03</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#giai-thich-3">Gi·∫£i th√≠ch:</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_6-4-ƒëoc-mo-rong">6.4 ƒê·ªçc M·ªü R·ªông</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_7-1-cau-hinh-qua-bean">7.1 C·∫•u h√¨nh qua Bean</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_7-2-cau-hinh-qua-chu-thich">7.2 C·∫•u h√¨nh qua ch√∫ th√≠ch</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_8-1-crossorigin">8.1 @CrossOrigin</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_8-2-corsregistry">8.2 CorsRegistry</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_8-3-corsfilter">8.3 CorsFilter</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_9-1-nhap-phu-thuoc">9.1 Nh·∫≠p ph·ª• thu·ªôc</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_9-2-springmvcconfiguration">9.2 SpringMVCConfiguration</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_9-3-usercontroller">9.3 UserController</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#yeu-cau">Y√™u c·∫ßu</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#phan-hoi">Ph·∫£n h·ªìi</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_10-1-nhap-phu-thuoc">10.1 Nh·∫≠p ph·ª• thu·ªôc</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_10-2-springmvcconfiguration">10.2 SpringMVCConfiguration</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="springmvc" tabindex="-1"><a class="header-anchor" href="#springmvc"><span>SpringMVC</span></a></h1><hr><blockquote><p>B√†i vi·∫øt n√†y cung c·∫•p m√£ ngu·ªìn ƒë·∫ßy ƒë·ªß, b·∫°n c√≥ th·ªÉ xem t·∫°i <a href="https://github.com/YunaiV/SpringBoot-Labs" target="_blank" rel="noopener noreferrer">https://github.com/YunaiV/SpringBoot-Labs</a> trong th∆∞ m·ª•c <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23" target="_blank" rel="noopener noreferrer">lab-23</a>.</p><p>Vi·ªác s√°ng t·∫°o n·ªôi dung kh√¥ng h·ªÅ d·ªÖ d√†ng, h√£y ·ªßng h·ªô m√¨nh b·∫±ng c√°ch t·∫∑ng m·ªôt <a href="https://github.com/YunaiV/SpringBoot-Labs/stargazers" target="_blank" rel="noopener noreferrer">Star</a>, c√πng nhau ph√°t tri·ªÉn nh√©!</p></blockquote><h1 id="_1-tong-quan" tabindex="-1"><a class="header-anchor" href="#_1-tong-quan"><span>1. T·ªïng quan</span></a></h1><p>N·∫øu b·∫°n ƒë√£ t·ª´ng l√†m vi·ªác v·ªõi ph√°t tri·ªÉn Java Web t·ª´ s·ªõm, c√≥ th·ªÉ b·∫°n ƒë√£ bi·∫øt ƒë·∫øn nh·ªØng framework Web MVC d∆∞·ªõi ƒë√¢y. Th·ªùi k·ª≥ ƒë√≥ l√† th·ªùi ƒë·∫°i m√† <a href="https://struts.apache.org/" target="_blank" rel="noopener noreferrer">Struts2</a> v√† <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html" target="_blank" rel="noopener noreferrer">SpringMVC</a> c√πng nhau th·ªëng tr·ªã. Th·∫≠m ch√≠, khi ƒëi ph·ªèng v·∫•n, m·ªôt c√¢u h·ªèi ph·ªï bi·∫øn l√†: &quot;S·ª± kh√°c bi·ªát gi·ªØa SpringMVC v√† Struts2 l√† g√¨?&quot;</p><p>Hi·ªán nay, SpringMVC g·∫ßn nh∆∞ ƒë√£ chi·∫øm lƒ©nh ho√†n to√†n v·ªã tr√≠ c·ªßa c√°c framework Web MVC kh√°c, v√† r·∫•t hi·∫øm khi b·∫°n g·∫∑p ph·∫£i m·ªôt d·ª± √°n kh√¥ng s·ª≠ d·ª•ng SpringMVC.</p><blockquote><p>N·∫øu hi·ªán t·∫°i b·∫°n g·∫∑p ph·∫£i m·ªôt c√¥ng vi·ªác v·ªõi Struts th√¨ t√¥i khuy√™n b·∫°n l√† h√£y b·ªè qua n√≥ v√¨ n√≥ ƒë√£ r·∫•t c≈©!</p></blockquote><p>So v·ªõi Struts2, SpringMVC d·ªÖ s·ª≠ d·ª•ng h∆°n v√† c√≥ hi·ªáu su·∫•t t·ªët h∆°n, v·ªõi c√°ch tri·ªÉn khai r√µ r√†ng v√† s√°ng s·ªßa h∆°n. Quan tr·ªçng h∆°n c·∫£, SpringMVC c√≥ m·ªôt h·ªá sinh th√°i m·∫°nh m·∫Ω v√† c·ªông ƒë·ªìng r·∫•t s√¥i ƒë·ªông.</p><p>V√¨ ƒë√¢y l√† m·ªôt b√†i vi·∫øt h∆∞·ªõng d·∫´n t√≠ch h·ª£p Spring Boot v·ªõi SpringMVC, m√¨nh s·∫Ω kh√¥ng n√≥i th√™m nhi·ªÅu, m√† s·∫Ω ƒëi th·∫≥ng v√†o ph·∫ßn h∆∞·ªõng d·∫´n nh·∫≠p m√¥n nhanh. Tuy nhi√™n, c·∫ßn l∆∞u √Ω r·∫±ng, b·∫°n n√™n n·∫Øm r√µ quy tr√¨nh x·ª≠ l√Ω y√™u c·∫ßu c·ªßa SpringMVC ƒë·ªÉ c√≥ th·ªÉ hi·ªÉu th·∫•u ƒë√°o c√°ch n√≥ ho·∫°t ƒë·ªông.</p><h1 id="_2-huong-dan-nhanh" tabindex="-1"><a class="header-anchor" href="#_2-huong-dan-nhanh"><span>2. H∆∞·ªõng d·∫´n nhanh</span></a></h1><blockquote><p>M√£ v√≠ d·ª• t∆∞∆°ng ·ª©ng v·ªõi kho l∆∞u tr·ªØ: <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-01" target="_blank" rel="noopener noreferrer">lab-springmvc-23-01</a>.</p></blockquote><p>Trong ph·∫ßn n√†y, ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng <a href="https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web" target="_blank" rel="noopener noreferrer"><code>spring-boot-starter-web</code></a> ƒë·ªÉ tri·ªÉn khai c·∫•u h√¨nh t·ª± ƒë·ªông c·ªßa SpringMVC. Sau ƒë√≥, th·ª±c hi·ªán c√°c API cho vi·ªác th√™m, x√≥a, s·ª≠a, v√† xem th√¥ng tin ng∆∞·ªùi d√πng. Danh s√°ch API nh∆∞ sau:</p><table><thead><tr><th>Ph∆∞∆°ng th·ª©c</th><th>URL</th><th>Ch·ª©c nƒÉng</th></tr></thead><tbody><tr><td><code>GET</code></td><td><code>/users</code></td><td>Xem danh s√°ch ng∆∞·ªùi d√πng</td></tr><tr><td><code>GET</code></td><td><code>/users/{id}</code></td><td>L·∫•y th√¥ng tin ng∆∞·ªùi d√πng theo ID</td></tr><tr><td><code>POST</code></td><td><code>/users</code></td><td>Th√™m ng∆∞·ªùi d√πng</td></tr><tr><td><code>PUT</code></td><td><code>/users/{id}</code></td><td>C·∫≠p nh·∫≠t th√¥ng tin ng∆∞·ªùi d√πng theo ID</td></tr><tr><td><code>DELETE</code></td><td><code>/users/{id}</code></td><td>X√≥a ng∆∞·ªùi d√πng theo ID</td></tr></tbody></table><p>B√¢y gi·ªù, h√£y b·∫Øt ƒë·∫ßu h√†nh tr√¨nh kh√°m ph√°!</p><h2 id="_2-1-cac-chu-thich-annotation" tabindex="-1"><a class="header-anchor" href="#_2-1-cac-chu-thich-annotation"><span>2.1 C√°c ch√∫ th√≠ch (Annotation)</span></a></h2><p>C√≥ th·ªÉ m·ªôt s·ªë b·∫°n ch∆∞a t·ª´ng s·ª≠ d·ª•ng SpringMVC tr∆∞·ªõc ƒë√¢y, n√™n trong ph·∫ßn n√†y, ch√∫ng ta s·∫Ω gi·ªõi thi·ªáu c√°c ch√∫ th√≠ch m√† SpringMVC cung c·∫•p.</p><ul><li><code>@Controller</code></li><li><code>@RestController</code></li><li><code>@RequestMapping</code></li><li><code>@GetMapping</code></li><li><code>@PostMapping</code></li><li><code>@PutMapping</code></li><li><code>@RequestParam</code></li><li><code>@PathVariable</code></li></ul><p>Nh·ªØng b·∫°n ƒë√£ quen thu·ªôc c√≥ th·ªÉ l∆∞·ªõt qua ho·∫∑c b·ªè qua ph·∫ßn n√†y.</p><h3 id="_2-1-1-controller" tabindex="-1"><a class="header-anchor" href="#_2-1-1-controller"><span>2.1.1 @Controller</span></a></h3><p>Ch√∫ th√≠ch <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-context/src/main/java/org/springframework/stereotype/Controller.java" target="_blank" rel="noopener noreferrer"><code>@Controller</code></a> ƒë∆∞·ª£c th√™m v√†o l·ªõp, cho bi·∫øt ƒë√¢y l√† m·ªôt ƒë·ªëi t∆∞·ª£ng Controller. Thu·ªôc t√≠nh nh∆∞ sau:</p><ul><li>Thu·ªôc t√≠nh <code>name</code>: t√™n c·ªßa ƒë·ªëi t∆∞·ª£ng Controller. C√≥ th·ªÉ ƒë·ªÉ tr·ªëng.</li></ul><p>Ch√∫ th√≠ch <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/bind/annotation/RestController.java" target="_blank" rel="noopener noreferrer"><code>@RestController</code></a> l√† s·ª± k·∫øt h·ª£p gi·ªØa <code>@Controller</code> v√† <a href="https://github.com/ndimiduk/spring-framework/blob/master/org.springframework.web/src/main/java/org/springframework/web/bind/annotation/ResponseBody.java" target="_blank" rel="noopener noreferrer"><code>@ResponseBody</code></a>, t·ª± ƒë·ªông tr·∫£ v·ªÅ k·∫øt qu·∫£ c·ªßa ph∆∞∆°ng th·ª©c API d∆∞·ªõi d·∫°ng JSON/XML m√† kh√¥ng c·∫ßn tr√¨nh x·ª≠ l√Ω view.</p><p>Hi·ªán nay, ki·∫øn tr√∫c ph·ªï bi·∫øn l√† ki·∫øn tr√∫c <strong>t√°ch bi·ªát front-end v√† back-end</strong>, trong ƒë√≥ back-end ch·ªâ cung c·∫•p c√°c API v√† tr·∫£ v·ªÅ d·ªØ li·ªáu. V√¨ v·∫≠y, 99,99% c√°c d·ª± √°n ƒë·ªÅu s·ª≠ d·ª•ng ch√∫ th√≠ch <code>@RestController</code>.</p><p>Th∆∞·ªùng th√¨ API ch√∫ng ta cung c·∫•p c√≥ phong c√°ch Restful ho·∫∑c g·∫ßn gi·ªëng Restful. N·∫øu b·∫°n ch∆∞a quen, c√≥ th·ªÉ tham kh·∫£o hai b√†i vi·∫øt sau:</p><ul><li><a href="http://www.iocoder.cn/Fight/estful-api-best-practices.html" target="_blank" rel="noopener noreferrer">‚ÄúTh·ª±c h√†nh t·ªët nh·∫•t cho RESTful API‚Äù</a></li><li><a href="http://www.iocoder.cn/Fight/Learn-Restful-HTTP-API-design-from-Github" target="_blank" rel="noopener noreferrer">‚ÄúH·ªçc thi·∫øt k·∫ø Restful HTTP API t·ª´ GitHub‚Äù</a></li></ul><h3 id="_2-1-2-requestmapping" tabindex="-1"><a class="header-anchor" href="#_2-1-2-requestmapping"><span>2.1.2 @RequestMapping</span></a></h3><p>Ch√∫ th√≠ch <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/bind/annotation/RequestMapping.java" target="_blank" rel="noopener noreferrer"><code>@RequestMapping</code></a> ƒë∆∞·ª£c th√™m v√†o l·ªõp ho·∫∑c ph∆∞∆°ng th·ª©c ƒë·ªÉ c·∫•u h√¨nh th√¥ng tin v·ªÅ c√°c API.</p><p>Thu·ªôc t√≠nh <strong>th∆∞·ªùng d√πng</strong> c·ªßa <code>@RequestMapping</code>:</p><ul><li><code>path</code>: ƒê∆∞·ªùng d·∫´n API. L√† m·ªôt m·∫£ng <code>[]</code>, c√≥ th·ªÉ ch·ªâ ƒë·ªãnh nhi·ªÅu ƒë∆∞·ªùng d·∫´n.</li><li><code>values</code>: T∆∞∆°ng t·ª± nh∆∞ thu·ªôc t√≠nh <code>path</code>, l√† m·ªôt t√™n kh√°c c·ªßa n√≥.</li><li><code>method</code>: Ph∆∞∆°ng th·ª©c y√™u c·∫ßu (GET, POST, PUT, DELETE,...). L√† m·ªôt m·∫£ng <code>[]</code>, c√≥ th·ªÉ ch·ªâ ƒë·ªãnh nhi·ªÅu ph∆∞∆°ng th·ª©c. N·∫øu ƒë·ªÉ tr·ªëng, m·∫∑c ƒë·ªãnh s·∫Ω ch·∫•p nh·∫≠n m·ªçi ph∆∞∆°ng th·ª©c.</li></ul><p>Thu·ªôc t√≠nh <strong>√≠t d√πng h∆°n</strong> c·ªßa <code>@RequestMapping</code>:</p><ul><li><code>name</code>: T√™n API. Th∆∞·ªùng kh√¥ng ƒë∆∞·ª£c ƒëi·ªÅn.</li><li><code>params</code>: C√°c tham s·ªë y√™u c·∫ßu ph·∫£i c√≥ trong y√™u c·∫ßu.</li><li><code>headers</code>: T∆∞∆°ng t·ª± nh∆∞ <code>params</code>, nh∆∞ng cho ti√™u ƒë·ªÅ y√™u c·∫ßu (headers).</li><li><code>consumes</code>: ƒê·ªãnh nghƒ©a lo·∫°i d·ªØ li·ªáu ƒë·∫ßu v√†o (Content-Type).</li><li><code>produces</code>: ƒê·ªãnh nghƒ©a lo·∫°i d·ªØ li·ªáu tr·∫£ v·ªÅ (Accept).</li></ul><p>Spring cung c·∫•p c√°c ch√∫ th√≠ch ng·∫Øn g·ªçn h∆°n cho m·ªói ph∆∞∆°ng th·ª©c y√™u c·∫ßu:</p><ul><li><a href="https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/bind/annotation/GetMapping.java" target="_blank" rel="noopener noreferrer"><code>@GetMapping</code></a>: T∆∞∆°ng ·ª©ng v·ªõi y√™u c·∫ßu GET.</li><li><a href="https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/bind/annotation/PostMapping.java" target="_blank" rel="noopener noreferrer"><code>@PostMapping</code></a>: T∆∞∆°ng ·ª©ng v·ªõi y√™u c·∫ßu POST.</li><li><a href="https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/bind/annotation/PutMapping.java" target="_blank" rel="noopener noreferrer"><code>@PutMapping</code></a>: T∆∞∆°ng ·ª©ng v·ªõi y√™u c·∫ßu PUT.</li><li><a href="https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/bind/annotation/DeleteMapping.java" target="_blank" rel="noopener noreferrer"><code>@DeleteMapping</code></a>: T∆∞∆°ng ·ª©ng v·ªõi y√™u c·∫ßu DELETE.</li></ul><h3 id="_2-1-3-requestparam" tabindex="-1"><a class="header-anchor" href="#_2-1-3-requestparam"><span>2.1.3 @RequestParam</span></a></h3><p>Ch√∫ th√≠ch <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/bind/annotation/RequestParam.java" target="_blank" rel="noopener noreferrer"><code>@RequestParam</code></a> ƒë∆∞·ª£c d√πng ƒë·ªÉ √°nh x·∫° tham s·ªë y√™u c·∫ßu t·ª´ URL v√†o ph∆∞∆°ng th·ª©c.</p><p>C√°c thu·ªôc t√≠nh:</p><ul><li><code>name</code>: T√™n tham s·ªë y√™u c·∫ßu.</li><li><code>value</code>: T√™n kh√°c c·ªßa <code>name</code>.</li><li><code>required</code>: C√≥ b·∫Øt bu·ªôc ph·∫£i truy·ªÅn tham s·ªë hay kh√¥ng. M·∫∑c ƒë·ªãnh l√† <code>true</code>.</li><li><code>defaultValue</code>: Gi√° tr·ªã m·∫∑c ƒë·ªãnh n·∫øu tham s·ªë kh√¥ng ƒë∆∞·ª£c truy·ªÅn.</li></ul><p>Ch√∫ th√≠ch <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/bind/annotation/PathVariable.java" target="_blank" rel="noopener noreferrer"><code>@PathVariable</code></a> d√πng ƒë·ªÉ √°nh x·∫° gi√° tr·ªã t·ª´ URL v√†o bi·∫øn c·ªßa ph∆∞∆°ng th·ª©c.</p><h2 id="_2-2-them-phu-thuoc" tabindex="-1"><a class="header-anchor" href="#_2-2-them-phu-thuoc"><span>2.2 Th√™m ph·ª• thu·ªôc</span></a></h2><p>Trong t·ªáp <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-01/pom.xml" target="_blank" rel="noopener noreferrer"><code>pom.xml</code></a>, h√£y th√™m c√°c ph·ª• thu·ªôc c·∫ßn thi·∫øt.</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;?</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">xml</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;1.0&quot;</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> encoding</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;UTF-8&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">?&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">project</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> xmlns</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">         xmlns:xsi</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">         xsi:schemaLocation</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">parent</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;spring-boot-starter-parent&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;2.1.3.RELEASE&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">relativePath</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">/&gt; </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&lt;!-- lookup parent from repository --&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">parent</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">modelVersion</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;4.0.0&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">modelVersion</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;lab-springmvc-23-01&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependencies</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        &lt;!-- T·ª± ƒë·ªông c·∫•u h√¨nh Spring MVC --&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;spring-boot-starter-web&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        &lt;!-- D·ªÖ d√†ng vi·∫øt ki·ªÉm th·ª≠ ƒë∆°n v·ªã --&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;spring-boot-starter-test&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">scope</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;test&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">scope</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependencies</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">project</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>M·ªói ph·ª• thu·ªôc c·ª• th·ªÉ c√≥ t√°c d·ª•ng g√¨, b·∫°n h√£y xem k·ªπ c√°c ch√∫ th√≠ch m√† t√°c gi·∫£ ƒë√£ th√™m v√†o.</p><h2 id="_2-3-application" tabindex="-1"><a class="header-anchor" href="#_2-3-application"><span>2.3 Application</span></a></h2><p>T·∫°o l·ªõp <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-01/src/main/java/cn/iocoder/springboot/lab23/springmvc/Application.java" target="_blank" rel="noopener noreferrer"><code>Application.java</code></a> v√† c·∫•u h√¨nh ch√∫ th√≠ch <code>@SpringBootApplication</code>. M√£ nh∆∞ sau:</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Application</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        SpringApplication</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Application</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, args);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>T·∫°m th·ªùi ch∆∞a kh·ªüi ƒë·ªông d·ª± √°n. Ch√∫ng ta s·∫Ω l√†m ƒëi·ªÅu ƒë√≥ sau khi th√™m Controller.</p><h2 id="_2-4-usercontroller" tabindex="-1"><a class="header-anchor" href="#_2-4-usercontroller"><span>2.4 UserController</span></a></h2><p>Trong ƒë∆∞·ªùng d·∫´n g√≥i <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-01/src/main/java/cn/iocoder/springboot/lab23/springmvc/controller/" target="_blank" rel="noopener noreferrer"><code>cn.iocoder.springboot.lab23.springmvc</code></a>, t·∫°o l·ªõp <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-01/src/main/java/cn/iocoder/springboot/lab23/springmvc/controller/UserController.java" target="_blank" rel="noopener noreferrer">UserController</a>. M√£ nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// UserController.java</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RestController</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RequestMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/users&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserController</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Truy v·∫•n danh s√°ch ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@return</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> danh s√°ch ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> list</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Truy v·∫•n danh s√°ch</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        List</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">result</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ArrayList</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        result</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setUsername</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;yudaoyuanma&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        result</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setUsername</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;woshiyutou&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        result</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setUsername</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;chifanshuijiao&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Tr·∫£ v·ªÅ danh s√°ch</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> result;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Nh·∫≠n ng∆∞·ªùi d√πng theo ID x√°c ƒë·ªãnh</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ID ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@return</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/{id}&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserVO</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> get</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;id&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Truy v·∫•n v√† tr·∫£ v·ªÅ ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(id).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setUsername</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;username:&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> id);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Th√™m ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> addDTO</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> th√¥ng tin ng∆∞·ªùi d√πng c·∫ßn th√™m</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@return</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ID ng∆∞·ªùi d√πng ƒë√£ th√™m th√†nh c√¥ng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">PostMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> add</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">UserAddDTO</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> addDTO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Ch√®n b·∫£n ghi ng∆∞·ªùi d√πng v√† tr·∫£ v·ªÅ ID</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> returnId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Tr·∫£ v·ªÅ ID ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> returnId;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * C·∫≠p nh·∫≠t ng∆∞·ªùi d√πng theo ID x√°c ƒë·ªãnh</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ID ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> updateDTO</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> th√¥ng tin ng∆∞·ªùi d√πng c·∫ßn c·∫≠p nh·∫≠t</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@return</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> tr·∫°ng th√°i c·∫≠p nh·∫≠t th√†nh c√¥ng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">PutMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/{id}&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> update</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;id&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">UserUpdateDTO</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> updateDTO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ƒê·∫∑t ID v√†o updateDTO</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        updateDTO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(id);</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // C·∫≠p nh·∫≠t b·∫£n ghi ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        Boolean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> success</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Tr·∫£ v·ªÅ tr·∫°ng th√°i c·∫≠p nh·∫≠t</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> success;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * X√≥a ng∆∞·ªùi d√πng theo ID x√°c ƒë·ªãnh</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ID ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@return</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> tr·∫°ng th√°i x√≥a th√†nh c√¥ng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">DeleteMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/{id}&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> delete</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;id&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // X√≥a b·∫£n ghi ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        Boolean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> success</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Tr·∫£ v·ªÅ tr·∫°ng th√°i x√≥a</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> success;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Th√™m ch√∫ th√≠ch <code>@RestController</code> l√™n l·ªõp, cho bi·∫øt r·∫±ng s·∫Ω tr·∫£ v·ªÅ k·∫øt qu·∫£ tr·ª±c ti·∫øp t·ª´ API. M·∫∑c ƒë·ªãnh, JSON ƒë∆∞·ª£c s·ª≠ d·ª•ng l√†m ph∆∞∆°ng th·ª©c tu·∫ßn t·ª± h√≥a.</p></li><li><p>Th√™m ch√∫ th√≠ch <code>@RequestMapping(&quot;/users&quot;)</code> l√™n l·ªõp, cho bi·∫øt r·∫±ng t·∫•t c·∫£ c√°c ƒë∆∞·ªùng d·∫´n API c·ªßa UserController ƒë·ªÅu b·∫Øt ƒë·∫ßu b·∫±ng <code>/users</code>.</p></li><li><p>Ph∆∞∆°ng th·ª©c <code>#list()</code> truy v·∫•n danh s√°ch ng∆∞·ªùi d√πng. Y√™u c·∫ßu t∆∞∆°ng ·ª©ng v·ªõi <code>GET /users</code>, k·∫øt qu·∫£ y√™u c·∫ßu l√†:</p><div class="language-json" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;id&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;username&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;yudaoyuanma&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    },</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;id&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;username&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;woshiyutou&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    },</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;id&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;username&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;chifanshuijiao&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]</span></span></code></pre></div><ul><li>Trong ƒë√≥, <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-01/src/main/java/cn/iocoder/springboot/lab23/springmvc/vo/UserVO.java" target="_blank" rel="noopener noreferrer">UserVO</a> l√† l·ªõp VO tr·∫£ v·ªÅ cho ng∆∞·ªùi d√πng.</li></ul></li><li><p>Ph∆∞∆°ng th·ª©c <code>#get(Integer id)</code> nh·∫≠n ng∆∞·ªùi d√πng theo ID x√°c ƒë·ªãnh. Y√™u c·∫ßu t∆∞∆°ng ·ª©ng v·ªõi <code>GET /users/{id}</code> [tham s·ªë ƒë∆∞·ªùng d·∫´n], k·∫øt qu·∫£ y√™u c·∫ßu l√†:</p><div class="language-json" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;id&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;username&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;username:1&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div></li><li><p>Ph∆∞∆°ng th·ª©c <code>#add(UserAddDTO addDTO)</code> th√™m ng∆∞·ªùi d√πng. Y√™u c·∫ßu t∆∞∆°ng ·ª©ng v·ªõi <code>POST /users</code>, k·∫øt qu·∫£ y√™u c·∫ßu l√†:</p><div class="language-" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>1</span></span></code></pre></div><ul><li>B·ªüi v√¨ ch√∫ng ta tr·∫£ v·ªÅ ki·ªÉu Integer, kh√¥ng c·∫ßn ph·∫£i s·ª≠ d·ª•ng JSON ƒë·ªÉ tu·∫ßn t·ª± h√≥a tr·∫£ v·ªÅ cho c√°c ƒë·ªëi t∆∞·ª£ng kh√¥ng ph·∫£i POJO.</li><li>Trong ƒë√≥, <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-01/src/main/java/cn/iocoder/springboot/lab23/springmvc/dto/UserAddDTO.java" target="_blank" rel="noopener noreferrer">UserAddDTO</a> l√† l·ªõp DTO ƒë·ªÉ th√™m ng∆∞·ªùi d√πng.</li></ul></li><li><p>Ph∆∞∆°ng th·ª©c <code>#update(Integer id, UserUpdateDTO updateDTO)</code> c·∫≠p nh·∫≠t ng∆∞·ªùi d√πng theo ID x√°c ƒë·ªãnh. Y√™u c·∫ßu t∆∞∆°ng ·ª©ng v·ªõi <code>PUT /users/{id}</code> [tham s·ªë ƒë∆∞·ªùng d·∫´n], k·∫øt qu·∫£ y√™u c·∫ßu l√†:</p><div class="language-" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>true</span></span></code></pre></div><ul><li>Trong ƒë√≥, <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-01/src/main/java/cn/iocoder/springboot/lab23/springmvc/dto/UserUpdateDTO.java" target="_blank" rel="noopener noreferrer">UserUpdateDTO</a> l√† l·ªõp DTO ƒë·ªÉ c·∫≠p nh·∫≠t ng∆∞·ªùi d√πng.</li></ul></li><li><p>Ph∆∞∆°ng th·ª©c <code>#delete(Integer id)</code> x√≥a ng∆∞·ªùi d√πng theo ID x√°c ƒë·ªãnh. Y√™u c·∫ßu t∆∞∆°ng ·ª©ng v·ªõi <code>DELETE /users/{id}</code> [tham s·ªë ƒë∆∞·ªùng d·∫´n], k·∫øt qu·∫£ y√™u c·∫ßu l√†:</p><div class="language-" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>false</span></span></code></pre></div></li></ul><p>T·∫•t c·∫£ c√°c b√†i ki·ªÉm tra tr√™n ch·∫Øc ch·∫Øn c·∫ßn ph·∫£i th√¥ng qua vi·ªác ch·∫°y ·ª©ng d·ª•ng, kh·ªüi ƒë·ªông d·ª± √°n. D∆∞·ªõi ƒë√¢y l√† nh·∫≠t k√Ω kh·ªüi ƒë·ªông c·ªßa n√≥:</p><div class="language-" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>2019-11-15 18:46:00.671  INFO 99493 --- [           main] c.i.s.lab23.springmvc.Application        : Starting Application on MacBook-Pro-8 with PID 99493 (/Users/yunai/Java/SpringBoot-Labs/lab-23/lab-springmvc-23-01/target/classes started by yunai in /Users/yunai/Java/SpringBoot-Labs)</span></span>
<span class="line"><span>2019-11-15 18:46:00.673  INFO 99493 --- [           main] c.i.s.lab23.springmvc.Application        : No active profile set, falling back to default profiles: default</span></span>
<span class="line"><span>2019-11-15 18:46:01.593  INFO 99493 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)</span></span>
<span class="line"><span>2019-11-15 18:46:01.613  INFO 99493 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]</span></span>
<span class="line"><span>2019-11-15 18:46:01.613  INFO 99493 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.16]</span></span>
<span class="line"><span>2019-11-15 18:46:01.619  INFO 99493 --- [           main] o.a.catalina.core.AprLifecycleListener   : The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: [/Users/yunai/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.]</span></span>
<span class="line"><span>2019-11-15 18:46:01.684  INFO 99493 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext</span></span>
<span class="line"><span>2019-11-15 18:46:01.684  INFO 99493 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 976 ms</span></span>
<span class="line"><span>2019-11-15 18:46:01.844  INFO 99493 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#39;applicationTaskExecutor&#39;</span></span>
<span class="line"><span>2019-11-15 18:46:01.987  INFO 99493 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;</span></span>
<span class="line"><span>2019-11-15 18:46:01.990  INFO 99493 --- [           main] c.i.s.lab23.springmvc.Application        : Started Application in 1.559 seconds (JVM running for 2.146)</span></span></code></pre></div><ul><li>Ch√∫ng ta c√≥ th·ªÉ th·∫•y, Spring Boot khi kh·ªüi ƒë·ªông Spring MVC s·∫Ω t·ª± ƒë·ªông kh·ªüi t·∫°o m·ªôt Tomcat, l·∫Øng nghe c√°c y√™u c·∫ßu tr√™n c·ªïng 8080.</li></ul><h2 id="_2-5-usercontroller2" tabindex="-1"><a class="header-anchor" href="#_2-5-usercontroller2"><span>2.5 UserController2</span></a></h2><p>Trong qu√° tr√¨nh ph√°t tri·ªÉn d·ª± √°n h√†ng ng√†y, t√¥i ch·ªâ s·ª≠ d·ª•ng ph∆∞∆°ng th·ª©c y√™u c·∫ßu <code>GET</code> v√† <code>POST</code>. Nguy√™n nh√¢n ch√≠nh l√† trong th·ª±c t·∫ø, v√¨ c√°c t√¨nh hu·ªëng nghi·ªáp v·ª• t∆∞∆°ng ƒë·ªëi ph·ª©c t·∫°p, API Restful ti√™u chu·∫©n kh√¥ng th·ªÉ ƒë√°p ·ª©ng t·∫•t c·∫£ c√°c thao t√°c. V√≠ d·ª•, ƒë∆°n h√†ng c√≥ th·ªÉ b·ªã ng∆∞·ªùi d√πng h·ªßy, qu·∫£n tr·ªã vi√™n h·ªßy, thay ƒë·ªïi ƒë·ªãa ch·ªâ giao h√†ng, ƒë√°nh gi√°, v.v. V√¨ v·∫≠y, ch√∫ng t√¥i th∆∞·ªùng cung c·∫•p <strong>API t∆∞∆°ng t·ª±</strong> Restful h∆°n.</p><p>ƒê·ªëi v·ªõi tham s·ªë ƒë∆∞·ªùng d·∫´n <code>@PathVariable</code> m√† SpringMVC cung c·∫•p, t√¥i hi·ªán ch∆∞a s·ª≠ d·ª•ng trong d·ª± √°n, l√Ω do ch√≠nh l√†:</p><ol><li><strong>Khung quy·ªÅn truy c·∫≠p ƒë∆∞·ª£c ƒë√≥ng g√≥i</strong>, d·ª±a v√†o URL l√†m ƒë·ªãnh danh quy·ªÅn truy c·∫≠p, hi·ªán t·∫°i kh√¥ng h·ªó tr·ª£ URL c√≥ tham s·ªë ƒë∆∞·ªùng d·∫´n.</li><li><strong>C·∫£nh b√°o d·ª±a v√†o URL</strong>, trong khi URL c√≥ tham s·ªë ƒë∆∞·ªùng d·∫´n, URL &quot;gi·ªëng nhau&quot; th·ª±c ch·∫•t t∆∞∆°ng ·ª©ng v·ªõi c√°c URL kh√°c nhau, d·∫´n ƒë·∫øn vi·ªác kh√¥ng d·ªÖ d√†ng th·ª±c hi·ªán vi·ªác c·∫£nh b√°o s·ªë l·∫ßn y√™u c·∫ßu sai theo th·ªùi gian.</li><li>URL tham s·ªë ƒë∆∞·ªùng d·∫´n <code>@PathVariable</code> s·∫Ω g√¢y ra m·ªôt s·ªë suy gi·∫£m hi·ªáu su·∫•t trong SpringMVC. C·ª• th·ªÉ c√≥ th·ªÉ xem b√†i vi·∫øt <a href="https://tech.imdada.cn/2015/12/23/springmvc-restful-optimize/" target="_blank" rel="noopener noreferrer">„ÄäSpringMVC RESTful ÊÄßËÉΩ‰ºòÂåñ„Äã</a>.</li></ol><p>V√¨ v·∫≠y, ch√∫ng t√¥i t·∫°o l·ªõp <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-01/src/main/java/cn/iocoder/springboot/lab23/springmvc/controller/UserController2.java" target="_blank" rel="noopener noreferrer">UserController2</a> ƒë·ªÉ s·ª≠a ƒë·ªïi API. M√£ cu·ªëi c√πng nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// UserController2.java</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RestController</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RequestMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/users2&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserController2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Truy v·∫•n danh s√°ch ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@return</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> danh s√°ch ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/list&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// URL thay ƒë·ªïi th√†nh /list</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> list</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Truy v·∫•n danh s√°ch</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        List</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">result</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ArrayList</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        result</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setUsername</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;yudaoyuanma&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        result</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setUsername</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;woshiyutou&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        result</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setUsername</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;chifanshuijiao&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Tr·∫£ v·ªÅ danh s√°ch</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> result;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Nh·∫≠n ng∆∞·ªùi d√πng theo ID x√°c ƒë·ªãnh</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ID ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@return</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/get&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// URL thay ƒë·ªïi th√†nh /get</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserVO</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> get</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RequestParam</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;id&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Truy v·∫•n v√† tr·∫£ v·ªÅ ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(id).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setUsername</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">UUID</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">randomUUID</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Th√™m ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> addDTO</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> th√¥ng tin ng∆∞·ªùi d√πng c·∫ßn th√™m</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@return</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ID ng∆∞·ªùi d√πng ƒë√£ th√™m th√†nh c√¥ng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">PostMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/add&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// URL thay ƒë·ªïi th√†nh /add</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> add</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">UserAddDTO</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> addDTO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Ch√®n b·∫£n ghi ng∆∞·ªùi d√πng v√† tr·∫£ v·ªÅ ID</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> returnId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UUID</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">randomUUID</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">hashCode</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Tr·∫£ v·ªÅ ID ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> returnId;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * C·∫≠p nh·∫≠t ng∆∞·ªùi d√πng theo ID x√°c ƒë·ªãnh</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> updateDTO</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> th√¥ng tin ng∆∞·ªùi d√πng c·∫ßn c·∫≠p nh·∫≠t</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@return</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> tr·∫°ng th√°i c·∫≠p nh·∫≠t th√†nh c√¥ng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">PostMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/update&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// URL thay ƒë·ªïi th√†nh /update, RequestMethod thay ƒë·ªïi th√†nh POST</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> update</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">UserUpdateDTO</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> updateDTO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // C·∫≠p nh·∫≠t b·∫£n ghi ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        Boolean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> success</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Tr·∫£ v·ªÅ tr·∫°ng th√°i c·∫≠p nh·∫≠t</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> success;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * X√≥a ng∆∞·ªùi d√πng theo ID x√°c ƒë·ªãnh</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ID ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@return</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> tr·∫°ng th√°i x√≥a th√†nh c√¥ng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">DeleteMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/delete&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// URL thay ƒë·ªïi th√†nh /delete, RequestMethod thay ƒë·ªïi th√†nh DELETE</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> delete</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RequestParam</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;id&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // X√≥a b·∫£n ghi ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        Boolean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> success</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Tr·∫£ v·ªÅ tr·∫°ng th√°i x√≥a</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> success;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>M·ªói thay ƒë·ªïi ·ªü ƒë√¢y, h√£y xem c√°c ch√∫ th√≠ch m√¥ t·∫£ sau ch√∫ th√≠ch <code>@XXXMapping</code>.</li></ul><h1 id="_3-kiem-tra-api" tabindex="-1"><a class="header-anchor" href="#_3-kiem-tra-api"><span>3. Ki·ªÉm Tra API</span></a></h1><blockquote><p>M√£ m·∫´u t∆∞∆°ng ·ª©ng v·ªõi kho l∆∞u tr·ªØ: <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-01" target="_blank" rel="noopener noreferrer">lab-springmvc-23-01</a>.</p></blockquote><p>Sau khi ph√°t tri·ªÉn xong API, ch√∫ng ta s·∫Ω th·ª±c hi·ªán t·ª± ki·ªÉm tra API. Th√¥ng th∆∞·ªùng, ch√∫ng ta kh·ªüi ƒë·ªông d·ª± √°n, sau ƒë√≥ s·ª≠ d·ª•ng <a href="https://www.getpostman.com/" target="_blank" rel="noopener noreferrer">Postman</a>, <a href="https://curl.haxx.se/" target="_blank" rel="noopener noreferrer">curl</a>, ho·∫∑c tr√¨nh duy·ªát ƒë·ªÉ m√¥ ph·ªèng y√™u c·∫ßu ƒë·∫øn API backend.</p><p>Th·ª±c t·∫ø, SpringMVC cung c·∫•p m·ªôt framework ki·ªÉm th·ª≠ l√† <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/servlet/MockMvc.html" target="_blank" rel="noopener noreferrer">MockMvc</a>, gi√∫p ch√∫ng ta ki·ªÉm th·ª≠ API m·ªôt c√°ch nhanh ch√≥ng. D∆∞·ªõi ƒë√¢y, ch√∫ng ta s·∫Ω th·ª±c hi·ªán ki·ªÉm th·ª≠ ƒë∆°n v·ªã cho c√°c API ƒë∆∞·ª£c cung c·∫•p trong <a href="#">„Äå2.4 UserController„Äç</a>. N√≥i c√°ch kh√°c, trong ph·∫ßn n√†y, ch√∫ng ta s·∫Ω ti·∫øp t·ª•c s·ª≠a ƒë·ªïi tr√™n n·ªÅn t·∫£ng c·ªßa v√≠ d·ª• <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-01" target="_blank" rel="noopener noreferrer">lab-springmvc-23-01</a>.</p><p>MockMvc cung c·∫•p kh·∫£ nƒÉng ki·ªÉm th·ª≠ t√≠ch h·ª£p v√† ki·ªÉm th·ª≠ ƒë∆°n v·ªã, ch√∫ng ta s·∫Ω ph√¢n chia th√†nh <a href="#">„Äå3.1 Ki·ªÉm th·ª≠ t√≠ch h·ª£p„Äç</a> v√† <a href="#">„Äå3.2 Ki·ªÉm th·ª≠ ƒë∆°n v·ªã„Äç</a> ƒë·ªÉ t√¨m hi·ªÉu. N·∫øu b·∫°n ƒë·ªçc ch∆∞a quen v·ªõi ph·∫ßn ki·ªÉm th·ª≠, c√≥ th·ªÉ tham kh·∫£o hai b√†i vi·∫øt sau:</p><ul><li><a href="http://www.iocoder.cn/Fight/A-little-bit-about-Java-unit-testing/?self" target="_blank" rel="noopener noreferrer">„ÄäM·ªôt ch√∫t v·ªÅ ki·ªÉm th·ª≠ ƒë∆°n v·ªã trong Java„Äã</a></li><li><a href="http://www.iocoder.cn/Architecture/talk-about-java-unit-test/?self" target="_blank" rel="noopener noreferrer">„ÄäN√≥i v·ªÅ ki·ªÉm th·ª≠ ƒë∆°n v·ªã„Äã</a></li></ul><h2 id="_3-1-kiem-thu-tich-hop" tabindex="-1"><a class="header-anchor" href="#_3-1-kiem-thu-tich-hop"><span>3.1 Ki·ªÉm Th·ª≠ T√≠ch H·ª£p</span></a></h2><p>T·∫°o l·ªõp ki·ªÉm th·ª≠ <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-01/src/test/java/cn/iocoder/springboot/lab23/springmvc/controller/UserControllerTest.java" target="_blank" rel="noopener noreferrer">UserControllerTest</a> ƒë·ªÉ ki·ªÉm th·ª≠ t·ª´ng thao t√°c ƒë∆°n gi·∫£n c·ªßa UserController. M√£ c·ªët l√µi nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// UserControllerTest.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RunWith</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">SpringRunner</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">SpringBootTest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">classes</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Application</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">AutoConfigureMockMvc</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserControllerTest</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Autowired</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> MockMvc</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> mvc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testList</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Truy v·∫•n danh s√°ch ng∆∞·ªùi d√πng  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        ResultActions</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> resultActions</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> mvc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">perform</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcRequestBuilders</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/users&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Ki·ªÉm tra k·∫øt qu·∫£  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        resultActions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">andExpect</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcResultMatchers</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">status</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">isOk</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()); </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// M√£ tr·∫°ng th√°i ph·∫£n h·ªìi 200  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        resultActions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">andExpect</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcResultMatchers</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">content</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">json</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\[\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;    {</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;        </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">id\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;: 1,</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;        </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">username\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;: </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">yudaoyuanma\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;    },</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;    {</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;        </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">id\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;: 2,</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;        </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">username\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;: </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">woshiyutou\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;    },</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;    {</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;        </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">id\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;: 3,</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;        </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">username\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;: </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">chifanshuijiao\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;    }</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\]</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)); </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// K·∫øt qu·∫£ ph·∫£n h·ªìi  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testGet</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // L·∫•y ng∆∞·ªùi d√πng v·ªõi ID ch·ªâ ƒë·ªãnh  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        ResultActions</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> resultActions</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> mvc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">perform</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcRequestBuilders</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/users/1&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Ki·ªÉm tra k·∫øt qu·∫£  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        resultActions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">andExpect</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcResultMatchers</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">status</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">isOk</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()); </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// M√£ tr·∫°ng th√°i ph·∫£n h·ªìi 200  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        resultActions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">andExpect</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcResultMatchers</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">content</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">json</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;{</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">id\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;: 1,</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">username\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;: </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">username</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;}&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)); </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// K·∫øt qu·∫£ ph·∫£n h·ªìi  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testAdd</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Th√™m ng∆∞·ªùi d√πng m·ªõi  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        ResultActions</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> resultActions</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> mvc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">perform</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcRequestBuilders</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">post</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/users&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">param</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;username&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;yudaoyuanma&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">param</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;password&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;nicai&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Ki·ªÉm tra k·∫øt qu·∫£  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        resultActions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">andExpect</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcResultMatchers</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">status</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">isOk</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()); </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// M√£ tr·∫°ng th√°i ph·∫£n h·ªìi 200  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        resultActions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">andExpect</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcResultMatchers</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">content</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">string</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;1&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)); </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// K·∫øt qu·∫£ ph·∫£n h·ªìi  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testUpdate</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // C·∫≠p nh·∫≠t ng∆∞·ªùi d√πng v·ªõi ID ch·ªâ ƒë·ªãnh  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        ResultActions</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> resultActions</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> mvc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">perform</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcRequestBuilders</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/users/1&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">param</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;username&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;yudaoyuanma&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">param</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;password&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;nicai&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Ki·ªÉm tra k·∫øt qu·∫£  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        resultActions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">andExpect</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcResultMatchers</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">status</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">isOk</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()); </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// M√£ tr·∫°ng th√°i ph·∫£n h·ªìi 200  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        resultActions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">andExpect</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcResultMatchers</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">content</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">string</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;true&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)); </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// K·∫øt qu·∫£ ph·∫£n h·ªìi  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testDelete</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // X√≥a ng∆∞·ªùi d√πng v·ªõi ID ch·ªâ ƒë·ªãnh  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        ResultActions</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> resultActions</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> mvc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">perform</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcRequestBuilders</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">delete</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/users/1&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Ki·ªÉm tra k·∫øt qu·∫£  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        resultActions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">andExpect</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcResultMatchers</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">status</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">isOk</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()); </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// M√£ tr·∫°ng th√°i ph·∫£n h·ªìi 200  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        resultActions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">andExpect</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcResultMatchers</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">content</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">string</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;false&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)); </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// K·∫øt qu·∫£ ph·∫£n h·ªìi  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>L·ªõp tr√™n, ch√∫ng ta ƒë√£ th√™m ch√∫ th√≠ch <code>@AutoConfigureMockMvc</code> ƒë·ªÉ t·ª± ƒë·ªông c·∫•u h√¨nh ƒë·ªëi t∆∞·ª£ng MockMvc Bean m√† ch√∫ng ta s·∫Ω ti√™m sau n√†y. Trong c√°c b√†i ki·ªÉm th·ª≠ ti·∫øp theo, ch√∫ng ta s·∫Ω th·∫•y r·∫±ng t·∫•t c·∫£ c√°c y√™u c·∫ßu g·ªçi API backend ƒë·ªÅu th√¥ng qua <code>mvc</code>. M·ªói l·∫ßn g·ªçi API backend, n√≥ s·∫Ω th·ª±c thi <strong>logic backend th·ª±c s·ª±</strong>. Do ƒë√≥, to√†n b·ªô logic s·∫Ω s·ª≠ d·ª•ng <strong>ki·ªÉm th·ª≠ t√≠ch h·ª£p</strong> v√† s·∫Ω kh·ªüi ƒë·ªông m·ªôt m√¥i tr∆∞·ªùng Spring <strong>th·ª±c</strong>.</p></li><li><p>M·ªói y√™u c·∫ßu API ƒë·ªÅu ƒë∆∞·ª£c x√¢y d·ª±ng th√¥ng qua <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-test/src/main/java/org/springframework/test/web/servlet/request/MockMvcRequestBuilders.java" target="_blank" rel="noopener noreferrer">MockMvcRequestBuilders</a>. Sau khi ho√†n th√†nh vi·ªác x√¢y d·ª±ng, y√™u c·∫ßu s·∫Ω ƒë∆∞·ª£c th·ª±c hi·ªán th√¥ng qua <code>mvc</code>, tr·∫£ v·ªÅ k·∫øt qu·∫£ <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-test/src/main/java/org/springframework/test/web/servlet/ResultActions.java" target="_blank" rel="noopener noreferrer">ResultActions</a>.</p></li><li><p>Sau khi th·ª±c hi·ªán y√™u c·∫ßu, ch√∫ng ta s·∫Ω g·ªçi ph∆∞∆°ng th·ª©c <code>andExpect(ResultMatcher matcher)</code> c·ªßa <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-test/src/main/java/org/springframework/test/web/servlet/ResultActions.java" target="_blank" rel="noopener noreferrer">ResultActions</a> ƒë·ªÉ th√™m d·ª± ki·∫øn k·∫øt qu·∫£, t∆∞∆°ng ƒë∆∞∆°ng v·ªõi vi·ªác th·ª±c hi·ªán kh·∫≥ng ƒë·ªãnh. N·∫øu kh√¥ng kh·ªõp v·ªõi d·ª± ki·∫øn, s·∫Ω n√©m ra ngo·∫°i l·ªá v√† b√†i ki·ªÉm th·ª≠ s·∫Ω kh√¥ng th√†nh c√¥ng.</p></li></ul><p>Ngo√†i ra, <code>ResultActions</code> c√≤n c√≥ hai ph∆∞∆°ng th·ª©c kh√°c:</p><ul><li>Ph∆∞∆°ng th·ª©c <code>#andDo(ResultHandler handler)</code>, cho ph√©p th√™m b·ªô x·ª≠ l√Ω k·∫øt qu·∫£ ResultHandler, ch·∫≥ng h·∫°n nh∆∞ in k·∫øt qu·∫£ ra b·∫£ng ƒëi·ªÅu khi·ªÉn trong qu√° tr√¨nh g·ª° l·ªói ƒë·ªÉ ki·ªÉm tra xem k·∫øt qu·∫£ c√≥ ƒë√∫ng hay kh√¥ng.</li><li>Ph∆∞∆°ng th·ª©c <code>#andReturn()</code>, cu·ªëi c√πng tr·∫£ v·ªÅ k·∫øt qu·∫£ <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-test/src/main/java/org/springframework/test/web/servlet/MvcResult.java" target="_blank" rel="noopener noreferrer">MvcResult</a>. Sau ƒë√≥, b·∫°n c√≥ th·ªÉ vi·∫øt m·ªôt s·ªë logic t√πy ch·ªânh cho MvcResult.</li></ul><p>V√≠ d·ª•, ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng hai ph∆∞∆°ng th·ª©c ƒë√£ ƒë·ªÅ c·∫≠p ƒë·ªÉ b·ªï sung v√† s·ª≠a ƒë·ªïi ph∆∞∆°ng th·ª©c <code>#testGet()</code> nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// UserControllerTest.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testGet2</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() throws Exception {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // L·∫•y ng∆∞·ªùi d√πng v·ªõi ID ch·ªâ ƒë·ªãnh  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ResultActions</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> resultActions </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> mvc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">perform</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcRequestBuilders</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/users/1&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // Ki·ªÉm tra k·∫øt qu·∫£  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    resultActions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">andExpect</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcResultMatchers</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">status</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">isOk</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // M√£ tr·∫°ng th√°i ph·∫£n h·ªìi 200  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    resultActions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">andExpect</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcResultMatchers</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">content</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">json</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;{</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">            &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">id\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;: 1,</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">            &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">username\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;: </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">username</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">            &quot;}&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // K·∫øt qu·∫£ ph·∫£n h·ªìi  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // &lt;1&gt; In k·∫øt qu·∫£  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    resultActions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">andDo</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcResultHandlers</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">print</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // &lt;2&gt; L·∫•y MvcResult, th·ª±c hi·ªán c√°c logic t√πy ch·ªânh  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    MvcResult</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> mvcResult </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> resultActions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">andReturn</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;S·ªë l∆∞·ª£ng b·ªô l·ªçc: &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> mvcResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getInterceptors</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">length</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>T·∫°i <code>&lt;1&gt;</code>, in th√¥ng tin y√™u c·∫ßu v√† ph·∫£n h·ªìi. ƒê·∫ßu ra nh∆∞ sau:</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>    MockHttpServletRequest:  </span></span>
<span class="line"><span>          HTTP Method = GET  </span></span>
<span class="line"><span>          Request URI = /users/1  </span></span>
<span class="line"><span>           Parameters = {}  </span></span>
<span class="line"><span>              Headers = \[\]  </span></span>
<span class="line"><span>                 Body = null  </span></span>
<span class="line"><span>        Session Attrs = {}  </span></span>
<span class="line"><span>      </span></span>
<span class="line"><span>    Handler:  </span></span>
<span class="line"><span>                 Type = cn.iocoder.springboot.lab23.springmvc.controller.UserController  </span></span>
<span class="line"><span>               Method = public cn.iocoder.springboot.lab23.springmvc.vo.UserVO cn.iocoder.springboot.lab23.springmvc.controller.UserController.get(java.lang.Integer)  </span></span>
<span class="line"><span>      </span></span>
<span class="line"><span>    Async:  </span></span>
<span class="line"><span>        Async started = false  </span></span>
<span class="line"><span>         Async result = null  </span></span>
<span class="line"><span>      </span></span>
<span class="line"><span>    Resolved Exception:  </span></span>
<span class="line"><span>                 Type = null  </span></span>
<span class="line"><span>      </span></span>
<span class="line"><span>    ModelAndView:  </span></span>
<span class="line"><span>            View name = null  </span></span>
<span class="line"><span>                 View = null  </span></span>
<span class="line"><span>                Model = null  </span></span>
<span class="line"><span>      </span></span>
<span class="line"><span>    FlashMap:  </span></span>
<span class="line"><span>           Attributes = null  </span></span>
<span class="line"><span>      </span></span>
<span class="line"><span>    MockHttpServletResponse:  </span></span>
<span class="line"><span>               Status = 200  </span></span>
<span class="line"><span>        Error message = null  </span></span>
<span class="line"><span>              Headers = \[Content-Type:&quot;application/json;charset=UTF-8&quot;\]  </span></span>
<span class="line"><span>         Content type = application/json;charset=UTF-8  </span></span>
<span class="line"><span>                 Body = {&quot;id&quot;:1,&quot;username&quot;:&quot;username:1&quot;}  </span></span>
<span class="line"><span>        Forwarded URL = null  </span></span>
<span class="line"><span>       Redirected URL = null  </span></span>
<span class="line"><span>              Cookies = \[\]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>T·∫°i <code>&lt;2&gt;</code>, sau khi l·∫•y ƒë∆∞·ª£c MvcResult in ra s·ªë l∆∞·ª£ng thi·∫øt b·ªã ch·∫∑n. ƒê·∫ßu ra nh∆∞ sau:</li></ul><div class="language-" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>S·ªë l∆∞·ª£ng b·ªô l·ªçc: 2</span></span></code></pre></div><h2 id="_3-2-kiem-thu-ƒëon-vi" tabindex="-1"><a class="header-anchor" href="#_3-2-kiem-thu-ƒëon-vi"><span>3.2 Ki·ªÉm th·ª≠ ƒê∆°n v·ªã</span></a></h2><p>ƒê·ªÉ tr√¨nh b√†y r√µ h∆°n v·ªÅ v√≠ d·ª• ki·ªÉm th·ª≠ ƒë∆°n v·ªã trong SpringMVC, ch√∫ng ta c·∫ßn ch·ªânh s·ª≠a m√£ c·ªßa <code>UserController</code> ƒë·ªÉ n√≥ ph·ª• thu·ªôc v√†o <code>UserService</code>. C√°c ƒëi·ªÉm s·ª≠a ƒë·ªïi nh∆∞ sau:</p><ul><li>T·∫°i <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-01/src/main/java/cn/iocoder/springboot/lab23/springmvc/service" target="_blank" rel="noopener noreferrer">g√≥i <code>cn.iocoder.springboot.lab23.springmvc.service</code></a>, t·∫°o l·ªõp <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-01/src/main/java/cn/iocoder/springboot/lab23/springmvc/service/UserService.java" target="_blank" rel="noopener noreferrer">UserService</a>. M√£ nh∆∞ sau:</li></ul><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// UserService.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Service</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserVO</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> get</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(id).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setUsername</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;test&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><ul><li>Trong l·ªõp <a href="#">UserController</a>, th√™m interface <code>GET /users/v2/{id}</code> ƒë·ªÉ l·∫•y ng∆∞·ªùi d√πng theo ID ƒë√£ cho. M√£ nh∆∞ sau:</li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// UserController.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Autowired</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> userService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">/**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * L·∫•y ng∆∞·ªùi d√πng theo ID ƒë√£ cho  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> *  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ID c·ªßa ng∆∞·ªùi d√πng  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@return</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> Ng∆∞·ªùi d√πng  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/v2/{id}&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserVO</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> get2</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;id&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> id) {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> userService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(id);</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Trong m√£, ch√∫ng ta ti√™m ƒë·ªëi t∆∞·ª£ng Bean <code>userService</code> t·ª´ <code>UserService</code>, sau ƒë√≥ trong ph∆∞∆°ng th·ª©c interface m·ªõi, ch√∫ng ta s·∫Ω g·ªçi ph∆∞∆°ng th·ª©c <code>UserService#get(Integer id)</code> ƒë·ªÉ l·∫•y ng∆∞·ªùi d√πng theo ID ƒë√£ cho.</li></ul><p>T·∫°o l·ªõp ki·ªÉm th·ª≠ <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-01/src/test/java/cn/iocoder/springboot/lab23/springmvc/controller/UserControllerTest2.java" target="_blank" rel="noopener noreferrer">UserControllerTest2</a> ƒë·ªÉ ki·ªÉm th·ª≠ API m·ªõi c·ªßa <code>UserController</code>. M√£ nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// UserControllerTest2.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RunWith</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">SpringRunner</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">WebMvcTest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">UserController</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserControllerTest2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Autowired</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> MockMvc</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> mvc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockBean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> userService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testGet2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Mock ph∆∞∆°ng th·ª©c get c·ªßa UserService  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;before mock:&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> userService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)); </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// &lt;1.1&gt;  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        Mockito</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">when</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">userService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">thenReturn</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">                new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setUsername</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;username:1&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)); </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// &lt;1.2&gt;  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;after mock:&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> userService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)); </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// &lt;1.3&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // G·ª≠i y√™u c·∫ßu l·∫•y ng∆∞·ªùi d√πng  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        ResultActions</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> resultActions</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> mvc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">perform</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcRequestBuilders</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/users/v2/1&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Ki·ªÉm tra k·∫øt qu·∫£  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        resultActions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">andExpect</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcResultMatchers</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">status</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">isOk</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()); </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// M√£ tr·∫°ng th√°i ph·∫£n h·ªìi 200  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        resultActions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">andExpect</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MockMvcResultMatchers</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">content</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">json</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;{</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;    </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">id\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;: 1,</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;    </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">username\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;: </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">username</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">n&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">                &quot;}&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)); </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// K·∫øt qu·∫£ ph·∫£n h·ªìi  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Th√™m ch√∫ th√≠ch <a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-test-autoconfigure/src/main/java/org/springframework/boot/test/autoconfigure/web/servlet/WebMvcTest.java" target="_blank" rel="noopener noreferrer"><code>@WebMvcTest</code></a> tr√™n l·ªõp, v·ªõi <code>UserController</code> l√† ƒë·ªëi s·ªë, cho bi·∫øt r·∫±ng ch√∫ng ta s·∫Ω th·ª±c hi·ªán ki·ªÉm th·ª≠ ƒë∆°n v·ªã tr√™n <code>UserController</code>.</p></li><li><p>Ch√∫ th√≠ch <code>@WebMvcTest</code> l√† m·ªôt ch√∫ th√≠ch t·ªï h·ª£p ch·ª©a <code>@AutoConfigureMockMvc</code>, v√¨ v·∫≠y n√≥ s·∫Ω t·ª± ƒë·ªông c·∫•u h√¨nh ƒë·ªëi t∆∞·ª£ng MockMvc Bean m√† ch√∫ng ta s·∫Ω ti√™m sau n√†y. Trong c√°c b√†i ki·ªÉm th·ª≠ ti·∫øp theo, ch√∫ng ta s·∫Ω th·∫•y r·∫±ng t·∫•t c·∫£ c√°c y√™u c·∫ßu API backend ƒë·ªÅu ƒë∆∞·ª£c g·ªçi th√¥ng qua <code>mvc</code>. <strong>Tuy nhi√™n</strong>, m·ªói l·∫ßn g·ªçi API backend s·∫Ω <strong>kh√¥ng</strong> th·ª±c thi <strong>logic backend th·ª±c s·ª±</strong>, m√† ch·ªâ th·ª±c hi·ªán logic Mock. ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† to√†n b·ªô logic s·∫Ω s·ª≠ d·ª•ng <strong>ki·ªÉm th·ª≠ ƒë∆°n v·ªã</strong>, v√† <strong>ch·ªâ</strong> kh·ªüi ƒë·ªông m·ªôt m√¥i tr∆∞·ªùng Spring <strong>Mock</strong>.</p><blockquote><p><strong>L∆∞u √Ω</strong>: H√£y ch√∫ √Ω ƒë·∫øn m·ªói ƒëi·ªÉm ƒë∆∞·ª£c <strong>in ƒë·∫≠m</strong> ·ªü tr√™n!</p></blockquote></li><li><p>Thu·ªôc t√≠nh <code>userService</code>, ch√∫ng ta th√™m ch√∫ th√≠ch <a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/mock/mockito/MockBean.html" target="_blank" rel="noopener noreferrer"><code>@MockBean</code></a>, th·ª±c t·∫ø, ƒë·ªëi t∆∞·ª£ng ti√™m ·ªü ƒë√¢y l√† m·ªôt ƒë·ªëi t∆∞·ª£ng UserService Mock ƒë∆∞·ª£c t·∫°o ra b·∫±ng <a href="https://site.mockito.org/" target="_blank" rel="noopener noreferrer">Mockito</a>. Nh∆∞ h√¨nh d∆∞·ªõi ƒë√¢y: <img src="https://static.iocoder.cn/images/Spring-Boot/2019-11-17/01.png" alt="ƒê·ªëi t∆∞·ª£ng UserService Mock" loading="lazy"></p><ul><li><p>Trong <code>UserController</code>, c≈©ng s·∫Ω ti√™m m·ªôt thu·ªôc t√≠nh <code>UserService</code>, v√† ƒë·ªëi t∆∞·ª£ng ti√™m n√†y ch√≠nh l√† Bean UserService Mock ƒë√£ ƒë∆∞·ª£c t·∫°o ra.</p></li><li><p>Theo m·∫∑c ƒë·ªãnh,</p></li><li><p>T·∫°i <code>&lt;1.1&gt;</code>, ch√∫ng ta g·ªçi ph∆∞∆°ng th·ª©c <code>UserService#get(Integer id)</code> v√† in k·∫øt qu·∫£ tr·∫£ v·ªÅ. K·∫øt qu·∫£ th·ª±c thi nh∆∞ sau:</p><div class="language-" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>before mock:null</span></span></code></pre></div><ul><li>K·∫øt qu·∫£ tr·∫£ v·ªÅ l√† <code>null</code>. L√Ω thuy·∫øt m√† n√≥i, l√∫c n√†y ƒë√°ng l·∫Ω ra ph·∫£i tr·∫£ v·ªÅ m·ªôt ƒë·ªëi t∆∞·ª£ng UserVO v·ªõi <code>id = 1</code>. Th·ª±c t·∫ø, v√¨ <code>userService</code> hi·ªán ƒëang l√† m·ªôt ƒë·ªëi t∆∞·ª£ng ƒë∆∞·ª£c Mock th√¥ng qua Mockito, n√™n t·∫•t c·∫£ c√°c cu·ªôc g·ªçi ƒë·∫øn c√°c ph∆∞∆°ng th·ª©c c·ªßa n√≥ s·∫Ω tr·∫£ v·ªÅ gi√° tr·ªã <code>null</code>.</li></ul></li><li><p>T·∫°i <code>&lt;1.2&gt;</code>, ch√∫ng ta s·ª≠ d·ª•ng Mockito ƒë·ªÉ Mock ph∆∞∆°ng th·ª©c <code>#get(Integer id)</code> c·ªßa <code>userService</code>, khi tham s·ªë truy·ªÅn v√†o l√† <code>id = 1</code>, ph∆∞∆°ng th·ª©c s·∫Ω tr·∫£ v·ªÅ m·ªôt ƒë·ªëi t∆∞·ª£ng UserVO v·ªõi <code>id = 1</code> v√† <code>username = &quot;username:1&quot;</code>.</p></li><li><p>T·∫°i <code>&lt;1.3&gt;</code>, g·ªçi l·∫°i ph∆∞∆°ng th·ª©c <code>UserService#get(Integer id)</code> v√† in k·∫øt qu·∫£ tr·∫£ v·ªÅ. K·∫øt qu·∫£ th·ª±c thi nh∆∞ sau:</p><div class="language-" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>after mock:cn.iocoder.springboot.lab23.springmvc.vo.UserVO@23202c31</span></span></code></pre></div><ul><li>K·∫øt qu·∫£ in ra l√† ƒë·ªëi t∆∞·ª£ng UserVO m√† ch√∫ng ta ƒë√£ Mock tr·∫£ v·ªÅ.</li></ul></li></ul></li><li><p>Cu·ªëi c√πng, s·ª≠ d·ª•ng <code>mvc</code> ƒë·ªÉ th·ª±c hi·ªán m·ªôt cu·ªôc g·ªçi API backend v√† ki·ªÉm tra k·∫øt qu·∫£ c√≥ ƒë√∫ng hay kh√¥ng. N·∫øu th·ª±c hi·ªán th√†nh c√¥ng, b√†i ki·ªÉm th·ª≠ ƒë∆°n v·ªã s·∫Ω th√¥ng qua.</p></li></ul><p>C√≥ th·ªÉ b·∫°n ch∆∞a quen v·ªõi ki·ªÉm th·ª≠ ƒë∆°n v·ªã, b·∫°n c√≥ th·ªÉ tham kh·∫£o b√†i vi·∫øt <a href="https://spring.io/guides/gs/testing-web/" target="_blank" rel="noopener noreferrer">„ÄäTesting the Web Layer„Äã</a> trong t√†i li·ªáu ch√≠nh th·ª©c c·ªßa Spring v·ªÅ lƒ©nh v·ª±c n√†y.</p><h1 id="_4-global-response" tabindex="-1"><a class="header-anchor" href="#_4-global-response"><span>4. Global Response</span></a></h1><blockquote><p>M√£ v√≠ d·ª• t∆∞∆°ng ·ª©ng v·ªõi kho l∆∞u tr·ªØ: <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02" target="_blank" rel="noopener noreferrer">lab-springmvc-23-02</a>.</p></blockquote><p>Khi ch√∫ng ta cung c·∫•p API backend cho frontend, ch√∫ng ta c·∫ßn th√¥ng b√°o cho frontend bi·∫øt li·ªáu k·∫øt qu·∫£ c·ªßa cu·ªôc g·ªçi API n√†y c√≥ th√†nh c√¥ng hay kh√¥ng:</p><ul><li>N·∫øu <strong>th√†nh c√¥ng</strong>, d·ªØ li·ªáu th√†nh c√¥ng l√† g√¨. Sau ƒë√≥, frontend s·∫Ω l·∫•y d·ªØ li·ªáu ƒë·ªÉ hi·ªÉn th·ªã tr√™n trang.</li><li>N·∫øu <strong>th·∫•t b·∫°i</strong>, l√Ω do th·∫•t b·∫°i l√† g√¨. Th√¥ng th∆∞·ªùng, frontend s·∫Ω hi·ªÉn th·ªã l√Ω do n√†y cho ng∆∞·ªùi d√πng.</li></ul><p>V√¨ v·∫≠y, ch√∫ng ta c·∫ßn c√≥ m·ªôt ph·∫£n h·ªìi ƒë·ªìng nh·∫•t, kh√¥ng th·ªÉ ƒë·ªÉ m·ªói API t·ª± ƒë·ªãnh nghƒ©a phong c√°ch ri√™ng c·ªßa m√¨nh. Th√¥ng th∆∞·ªùng, th√¥ng tin ph·∫£n h·ªìi ƒë·ªìng nh·∫•t to√†n c·∫ßu c√≥ th·ªÉ nh∆∞ sau:</p><ul><li>Khi th√†nh c√¥ng, tr·∫£ v·ªÅ <strong>m√£ tr·∫°ng th√°i th√†nh c√¥ng</strong> + <strong>d·ªØ li·ªáu</strong>.</li><li>Khi th·∫•t b·∫°i, tr·∫£ v·ªÅ <strong>m√£ tr·∫°ng th√°i th·∫•t b·∫°i</strong> + <strong>th√¥ng b√°o l·ªói</strong>.</li></ul><p>Trong ƒë·ªãnh nghƒ©a chu·∫©n c·ªßa API RESTful, khuy·∫øn ngh·ªã s·ª≠ d·ª•ng <a href="https://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81" target="_blank" rel="noopener noreferrer">m√£ tr·∫°ng th√°i ph·∫£n h·ªìi HTTP</a> ƒë·ªÉ tr·∫£ v·ªÅ m√£ tr·∫°ng th√°i. Tuy nhi√™n, trong th·ª±c t·∫ø, ch√∫ng ta r·∫•t √≠t khi l√†m nh∆∞ v·∫≠y, ch·ªß y·∫øu v√¨ nh·ªØng l√Ω do sau:</p><ul><li>M√£ tr·∫°ng th√°i l·ªói m√† doanh nghi·ªáp tr·∫£ v·ªÅ r·∫•t nhi·ªÅu, m√£ tr·∫°ng th√°i ph·∫£n h·ªìi HTTP kh√¥ng th·ªÉ √°nh x·∫° t·ªët. V√≠ d·ª• nh∆∞, s·ª± ki·ªán ch∆∞a b·∫Øt ƒë·∫ßu, ƒë∆°n h√†ng ƒë√£ b·ªã h·ªßy, v.v.</li><li>C√°c nh√† ph√°t tri·ªÉn trong n∆∞·ªõc kh√¥ng hi·ªÉu r√µ v·ªÅ m√£ tr·∫°ng th√°i ph·∫£n h·ªìi HTTP, c√≥ th·ªÉ h·ªç ch·ªâ bi·∫øt m·ªôt v√†i m√£ ph·ªï bi·∫øn nh∆∞ 200, 403, 404, 500. ƒêi·ªÅu n√†y l·∫°i l√†m tƒÉng chi ph√≠ h·ªçc t·∫≠p.</li></ul><p>Do ƒë√≥, trong th·ª±c t·∫ø, trong c√°c d·ª± √°n, ch√∫ng ta s·∫Ω ƒë·∫∑t m√£ tr·∫°ng th√°i v√†o <strong>n·ªôi dung ph·∫£n h·ªìi</strong> Response Body.</p><p>Trong ph·∫£n h·ªìi ƒë·ªìng nh·∫•t to√†n c·∫ßu, ch√∫ng ta √≠t nh·∫•t c·∫ßn ƒë·ªãnh nghƒ©a ba tr∆∞·ªùng:</p><ul><li><p><code>code</code>: M√£ tr·∫°ng th√°i. B·∫•t k·ªÉ c√≥ th√†nh c√¥ng hay kh√¥ng, ph·∫£i tr·∫£ v·ªÅ tr∆∞·ªùng n√†y.</p><ul><li>Khi th√†nh c√¥ng, m√£ tr·∫°ng th√°i l√† 0.</li><li>Khi th·∫•t b·∫°i, m√£ l·ªói t∆∞∆°ng ·ª©ng v·ªõi doanh nghi·ªáp.</li></ul><blockquote><p>V·ªÅ ph·∫ßn n√†y, m·ªôt s·ªë ƒë·ªôi ng≈© th·ª±c h√†nh ƒë√£ th√™m tr∆∞·ªùng <code>success</code>, th√¥ng qua <code>true</code> v√† <code>false</code> ƒë·ªÉ bi·ªÉu th·ªã th√†nh c√¥ng hay th·∫•t b·∫°i. ƒêi·ªÅu n√†y t√πy thu·ªôc v√†o th√≥i quen c·ªßa t·ª´ng ƒë·ªôi ng≈©. Theo quan ƒëi·ªÉm c·ªßa t√¥i, t√¥i v·∫´n th√≠ch d·ª±a tr√™n quy ∆∞·ªõc, tr·∫£ v·ªÅ 0 ƒë·ªÉ bi·ªÉu th·ªã th√†nh c√¥ng.</p></blockquote></li><li><p><code>data</code>: D·ªØ li·ªáu. Khi th√†nh c√¥ng, tr·∫£ v·ªÅ tr∆∞·ªùng n√†y.</p></li><li><p><code>message</code>: Th√¥ng b√°o l·ªói. Khi th·∫•t b·∫°i, tr·∫£ v·ªÅ tr∆∞·ªùng n√†y.</p></li></ul><p>B√¢y gi·ªù, h√£y xem hai v√≠ d·ª•:</p><div class="language-json" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Ph·∫£n h·ªìi th√†nh c√¥ng  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">{  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;code&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;data&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: {  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;id&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;username&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;yudaoyuanma&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Ph·∫£n h·ªìi th·∫•t b·∫°i  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">{  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;code&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">233666</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;message&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Xu M√£ qu√° x·∫•u&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>D∆∞·ªõi ƒë√¢y, ch√∫ng ta s·∫Ω xem m·ªôt v√≠ d·ª•.</p><blockquote><p><strong>L∆∞u √Ω</strong>: ƒê·ªÉ kh√¥ng l√†m h·ªèng c√°c v√≠ d·ª• trong <a href="#">„Äå2. H∆∞·ªõng d·∫´n Nhanh„Äç</a> v√† <a href="#">„Äå3. Ki·ªÉm tra API„Äç</a>, ch√∫ng ta c·∫ßn thi·∫øt l·∫≠p l·∫°i m·ªôt c√°i m·ªõi.</p></blockquote><h2 id="_4-1-nhap-thu-vien" tabindex="-1"><a class="header-anchor" href="#_4-1-nhap-thu-vien"><span>4.1 Nh·∫≠p Th∆∞ Vi·ªán</span></a></h2><p>Gi·ªëng nh∆∞ ·ªü <a href="#">„Äå2.2 Th√™m ph·ª• thu·ªôc„Äç</a>.</p><h2 id="_4-2-ung-dung" tabindex="-1"><a class="header-anchor" href="#_4-2-ung-dung"><span>4.2 ·ª®ng D·ª•ng</span></a></h2><p>Gi·ªëng nh∆∞ ·ªü <a href="#">„Äå2.3 Application„Äç</a>.</p><h2 id="_4-3-commonresult" tabindex="-1"><a class="header-anchor" href="#_4-3-commonresult"><span>4.3 CommonResult</span></a></h2><p>Trong g√≥i <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/core/vo" target="_blank" rel="noopener noreferrer"><code>cn.iocoder.springboot.lab23.springmvc.core.vo</code></a>, t·∫°o l·ªõp <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/core/vo/CommonResult.java" target="_blank" rel="noopener noreferrer">CommonResult</a> d√πng ƒë·ªÉ tr·∫£ v·ªÅ ƒë·ªìng nh·∫•t to√†n c·∫ßu. M√£ nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// CommonResult.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CommonResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Serializable</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> CODE_SUCCESS </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * M√£ l·ªói  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> code</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Th√¥ng b√°o l·ªói  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> message</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * D·ªØ li·ªáu tr·∫£ v·ªÅ  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> T</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> data</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Chuy·ªÉn ƒë·ªïi ƒë·ªëi t∆∞·ª£ng result ƒë√£ truy·ªÅn v√†o th√†nh m·ªôt ƒë·ªëi t∆∞·ª£ng k·∫øt qu·∫£ kh√°c v·ªõi ki·ªÉu t·ªïng qu√°t  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * B·ªüi v√¨ ƒë·ªëi t∆∞·ª£ng CommonResult tr·∫£ v·ªÅ t·ª´ ph∆∞∆°ng th·ª©c A kh√¥ng ph√π h·ª£p ƒë·ªÉ g·ªçi ph∆∞∆°ng th·ª©c B, n√™n c·∫ßn ph·∫£i chuy·ªÉn ƒë·ªïi.  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> result</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ƒê·ªëi t∆∞·ª£ng result ƒë√£ truy·ªÅn v√†o  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> &lt;T&gt;</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> Ki·ªÉu tr·∫£ v·ªÅ  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@return</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ƒê·ªëi t∆∞·ª£ng CommonResult m·ªõi  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CommonResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> error</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">CommonResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">result</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> error</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">result</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getCode</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">result</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getMessage</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CommonResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> error</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> code</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> message</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        Assert</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">isTrue</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">CODE_SUCCESS</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(code), </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;M√£ ph·∫£i l√† l·ªói!&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        CommonResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">result</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CommonResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;&gt;();  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        result</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">code</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> code;  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        result</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">message</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> message;  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> result;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CommonResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> success</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> data</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        CommonResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">result</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CommonResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;&gt;();  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        result</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">code</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> CODE_SUCCESS;  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        result</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">data</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> data;  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        result</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">message</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> result;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">JsonIgnore</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // B·ªè qua, tr√°nh vi·ªác jackson tu·∫ßn t·ª± h√≥a cho frontend  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> isSuccess</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// D·ªÖ d√†ng ki·ªÉm tra xem c√≥ th√†nh c√¥ng hay kh√¥ng  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CODE_SUCCESS</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(code);  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">JsonIgnore</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // B·ªè qua, tr√°nh vi·ªác jackson tu·∫ßn t·ª± h√≥a cho frontend  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> isError</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// D·ªÖ d√†ng ki·ªÉm tra xem c√≥ th·∫•t b·∫°i hay kh√¥ng  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">isSuccess</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ... B·ªè qua c√°c ph∆∞∆°ng th·ª©c setting/getting/toString  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>M·ªói tr∆∞·ªùng, b·∫°n h√£y xem c√°c ch√∫ th√≠ch t∆∞∆°ng ·ª©ng.<br> D∆∞·ªõi ƒë√¢y l√† b·∫£n d·ªãch sang ti·∫øng Vi·ªát cho n·ªôi dung m√† b·∫°n ƒë√£ cung c·∫•p:</li></ul><h2 id="_4-4-globalresponsebodyhandler" tabindex="-1"><a class="header-anchor" href="#_4-4-globalresponsebodyhandler"><span>4.4 GlobalResponseBodyHandler</span></a></h2><p>Trong g√≥i <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/core/web" target="_blank" rel="noopener noreferrer"><code>cn.iocoder.springboot.lab23.springmvc.core.web</code></a>, t·∫°o l·ªõp <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/core/web/GlobalResponseBodyHandler.java" target="_blank" rel="noopener noreferrer">GlobalResponseBodyHandler</a> ƒë·ªÉ x·ª≠ l√Ω ph·∫£n h·ªìi to√†n c·∫ßu th·ªëng nh·∫•t. M√£ nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// GlobalResponseBodyHandler.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ControllerAdvice</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">basePackages</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;cn.iocoder.springboot.lab23.springmvc.controller&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> GlobalResponseBodyHandler</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ResponseBodyAdvice</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> supports</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MethodParameter</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> returnType</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> converterType</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> beforeBodyWrite</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> body</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MethodParameter</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> returnType</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MediaType</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> selectedContentType</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> selectedConverterType</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">                                   ServerHttpRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServerHttpResponse</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // N·∫øu ƒë√£ l√† ki·ªÉu CommonResult, th√¨ tr·∫£ v·ªÅ tr·ª±c ti·∫øp  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (body </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">instanceof</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> CommonResult) {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> body;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        }  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // N·∫øu kh√¥ng, th√¨ bao b·ªçc th√†nh ki·ªÉu CommonResult  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CommonResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">success</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(body);  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Trong SpringMVC, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng th√¥ng qua vi·ªác th·ª±c hi·ªán interface <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/ResponseBodyAdvice.java" target="_blank" rel="noopener noreferrer">ResponseBodyAdvice</a> v√† th√™m ch√∫ th√≠ch <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/bind/annotation/ControllerAdvice.java" target="_blank" rel="noopener noreferrer"><code>@ControllerAdvice</code></a> ƒë·ªÉ ch·∫∑n c√°c k·∫øt qu·∫£ tr·∫£ v·ªÅ c·ªßa Controller. L∆∞u √Ω r·∫±ng, trong ch√∫ th√≠ch <code>@ControllerAdvice</code>, ch√∫ng ta ƒë√£ thi·∫øt l·∫≠p thu·ªôc t√≠nh <code>basePackages</code> ƒë·ªÉ <strong>ch·ªâ ch·∫∑n</strong> g√≥i <code>&quot;cn.iocoder.springboot.lab23.springmvc.controller&quot;</code>, t·ª©c l√† c√°c Controller m√† ch√∫ng ta ƒë√£ ƒë·ªãnh nghƒ©a. T·∫°i sao l·∫°i nh∆∞ v·∫≠y? B·ªüi v√¨ trong d·ª± √°n, ch√∫ng ta c√≥ th·ªÉ s·∫Ω t√≠ch h·ª£p c√°c th∆∞ vi·ªán nh∆∞ Swagger v√† c≈©ng s·ª≠ d·ª•ng Controller ƒë·ªÉ cung c·∫•p c√°c API, v√¨ v·∫≠y r√µ r√†ng l√† ch√∫ng ta kh√¥ng n√™n ƒë·ªÉ GlobalResponseBodyHandler ch·∫∑n c√°c interface n√†y, <strong>d√π sao th√¨ ch√∫ng c≈©ng kh√¥ng c·∫ßn ch√∫ng ta l√†m ph·∫£n h·ªìi to√†n c·∫ßu ƒë·ªìng nh·∫•t cho ch√∫ng</strong>.</li><li>Th·ª±c hi·ªán ph∆∞∆°ng th·ª©c <code>#supports(MethodParameter returnType, Class converterType)</code> v√† tr·∫£ v·ªÅ <code>true</code>. ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† ch·∫∑n t·∫•t c·∫£ c√°c k·∫øt qu·∫£ tr·∫£ v·ªÅ c·ªßa c√°c interface API c·ªßa Controller.</li><li>Th·ª±c hi·ªán ph∆∞∆°ng th·ª©c <code>#beforeBodyWrite(...)</code>, khi k·∫øt qu·∫£ tr·∫£ v·ªÅ kh√¥ng ph·∫£i l√† ki·ªÉu CommonResult, th√¨ bao b·ªçc th√†nh ki·ªÉu CommonResult. C√≥ hai ƒëi·ªÉm c·∫ßn l∆∞u √Ω ·ªü ƒë√¢y: <ul><li>Th·ª© nh·∫•t, c√≥ th·ªÉ k·∫øt qu·∫£ tr·∫£ v·ªÅ c·ªßa API ƒë√£ l√† ki·ªÉu CommonResult, v√¨ v·∫≠y kh√¥ng c·∫ßn bao b·ªçc l·∫ßn hai.</li><li>Th·ª© hai, v√¨ API ƒë√£ tr·∫£ v·ªÅ k·∫øt qu·∫£ v√† b·ªã GlobalResponseBodyHandler ch·∫∑n, <strong>quy ∆∞·ªõc</strong> l√† k·∫øt qu·∫£ tr·∫£ v·ªÅ ph·∫£i th√†nh c√¥ng, do ƒë√≥ s·ª≠ d·ª•ng ph∆∞∆°ng th·ª©c <code>CommonResult#success(T data)</code> ƒë·ªÉ bao b·ªçc th√†nh ph·∫£n h·ªìi CommonResult <strong>th√†nh c√¥ng</strong>. V·∫≠y n·∫øu ch√∫ng ta mu·ªën API tr·∫£ v·ªÅ <strong>th·∫•t b·∫°i</strong> th√¨ sao? Ch√∫ng ta <strong>quy ∆∞·ªõc</strong> r·∫±ng trong Controller s·∫Ω n√©m ra ngo·∫°i l·ªá, ƒëi·ªÅu n√†y ch√∫ng ta s·∫Ω th·∫•y trong <a href="#">„Äå5. X·ª≠ L√Ω Ngo·∫°i L·ªá To√†n C·∫ßu„Äç</a>.</li></ul></li></ul><h2 id="_4-5-usercontroller" tabindex="-1"><a class="header-anchor" href="#_4-5-usercontroller"><span>4.5 UserController</span></a></h2><p>Trong g√≥i <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-01/src/main/java/cn/iocoder/springboot/lab23/springmvc/controller/" target="_blank" rel="noopener noreferrer"><code>cn.iocoder.springboot.lab23.springmvc.controller</code></a>, t·∫°o l·ªõp <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-01/src/main/java/cn/iocoder/springboot/lab23/springmvc/controller/UserController.java" target="_blank" rel="noopener noreferrer">UserController</a>. M√£ nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// UserController.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RestController</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RequestMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/users&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserController</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * L·∫•y th√¥ng tin ng∆∞·ªùi d√πng theo m√£ ƒë·ªãnh danh</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Cung c·∫•p kh√¥ng s·ª≠ d·ª•ng CommonResult ƒë·ªÉ ƒë√≥ng g√≥i</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> M√£ ƒë·ªãnh danh ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@return</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> Th√¥ng tin ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/get&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserVO</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> get</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RequestParam</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;id&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Truy v·∫•n v√† tr·∫£ v·ªÅ th√¥ng tin ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(id).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setUsername</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">UUID</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">randomUUID</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * L·∫•y th√¥ng tin ng∆∞·ªùi d√πng theo m√£ ƒë·ªãnh danh</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Cung c·∫•p s·ª≠ d·ª•ng CommonResult ƒë·ªÉ ƒë√≥ng g√≥i</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> M√£ ƒë·ªãnh danh ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@return</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> Th√¥ng tin ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/get2&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CommonResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> get2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RequestParam</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;id&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Truy v·∫•n ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        UserVO</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> user</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(id).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setUsername</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">UUID</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">randomUUID</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Tr·∫£ v·ªÅ k·∫øt qu·∫£</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CommonResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">success</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(user);  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Trong ph∆∞∆°ng th·ª©c <code>#get(Integer id)</code>, k·∫øt qu·∫£ tr·∫£ v·ªÅ l√† ki·ªÉu <code>UserVO</code>. K·∫øt qu·∫£ n√†y s·∫Ω b·ªã <strong>GlobalResponseBodyHandler</strong> ch·∫∑n v√† ƒë√≥ng g√≥i th√†nh ki·ªÉu <code>CommonResult</code>. K·∫øt qu·∫£ y√™u c·∫ßu s·∫Ω nh∆∞ sau:</p><div class="language-json" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;code&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;message&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;data&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;id&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;username&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;f0ab9401-062f-4697-bcc9-1dc70c1c1310&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><ul><li>L√Ω do c√≥ <code>&quot;message&quot;: &quot;&quot;</code> trong k·∫øt qu·∫£ tr·∫£ v·ªÅ l√† do SpringMVC s·ª≠ d·ª•ng Jackson ƒë·ªÉ tu·∫ßn t·ª± h√≥a. Khi <code>message = null</code>, n√≥ s·∫Ω tu·∫ßn t·ª± h√≥a th√†nh <code>&quot;message&quot;: &quot;&quot;</code>. Trong th·ª±c t·∫ø, ƒëi·ªÅu n√†y kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn vi·ªác x·ª≠ l√Ω c·ªßa ph√≠a giao di·ªán ng∆∞·ªùi d√πng.</li></ul></li><li><p>Trong ph∆∞∆°ng th·ª©c <code>#get2(Integer id)</code>, k·∫øt qu·∫£ tr·∫£ v·ªÅ l√† ki·ªÉu <code>CommonResult&lt;UserVO&gt;</code>. K·∫øt qu·∫£ n√†y c≈©ng s·∫Ω b·ªã <strong>GlobalResponseBodyHandler</strong> ch·∫∑n, nh∆∞ng <strong>s·∫Ω kh√¥ng</strong> ƒë∆∞·ª£c ƒë√≥ng g√≥i l·∫°i l·∫ßn n·ªØa th√†nh ki·ªÉu <code>CommonResult</code>.</p></li></ul><h2 id="_4-6-mot-cuoc-thao-luan-nho" tabindex="-1"><a class="header-anchor" href="#_4-6-mot-cuoc-thao-luan-nho"><span>4.6 M·ªôt Cu·ªôc Th·∫£o Lu·∫≠n Nh·ªè</span></a></h2><p>Cho ƒë·∫øn gi·ªù, ch√∫ng ta ƒë√£ ho√†n th√†nh v√≠ d·ª• v·ªÅ <strong>ph·∫£n h·ªìi th·ªëng nh·∫•t to√†n c·ª•c</strong>. Tuy nhi√™n, t√¥i mu·ªën ƒë∆∞a ra m·ªôt c√¢u h·ªèi th·∫£o lu·∫≠n: <strong>Li·ªáu ch√∫ng ta c√≥ n√™n s·ª≠ d·ª•ng c√°ch nh∆∞ GlobalResponseBodyHandler ƒë·ªÉ ch·∫∑n k·∫øt qu·∫£ tr·∫£ v·ªÅ c·ªßa Controller v√† ƒë∆∞a ra ph·∫£n h·ªìi th·ªëng nh·∫•t to√†n c·ª•c kh√¥ng?</strong></p><p>Ch√∫ng ta s·∫Ω th·∫•y r·∫•t nhi·ªÅu b√†i vi·∫øt tr√™n m·∫°ng c≈©ng s·ª≠ d·ª•ng c√°ch n√†y ƒë·ªÉ th·ª±c hi·ªán vi·ªác tr·∫£ v·ªÅ th·ªëng nh·∫•t to√†n c·ª•c. C√≥ v·∫ª nh∆∞ kh√¥ng c√≥ v·∫•n ƒë·ªÅ g√¨ khi √°p d·ª•ng c√°ch n√†y trong c√°c d·ª± √°n th·ª±c t·∫ø, v√† th·ª±c s·ª±, n√≥ c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng m√† kh√¥ng g·∫∑p kh√≥ khƒÉn hay r·ªßi ro n√†o. Nh∆∞ng ƒë√¢y ch·ªâ l√† m·ªôt ƒëi·ªÉm m√† t√¥i (ËâøËâø) bƒÉn khoƒÉn. Khi ch√∫ng ta s·ª≠ d·ª•ng AOP ƒë·ªÉ <strong>thay ƒë·ªïi lo·∫°i d·ªØ li·ªáu tr·∫£ v·ªÅ c·ªßa m·ªôt ph∆∞∆°ng th·ª©c</strong>, li·ªáu ƒëi·ªÅu n√†y c√≥ th·ª±c s·ª± ph√π h·ª£p?</p><p>√ù ki·∫øn c√° nh√¢n c·ªßa t√¥i l√†, <strong>ƒëi·ªÅu n√†y kh√¥ng ph√π h·ª£p</strong>. Do ƒë√≥, trong d·ª± √°n m√£ ngu·ªìn m·ªü <a href="https://github.com/YunaiV/onemall" target="_blank" rel="noopener noreferrer">onemall</a>, t√¥i <strong>b·∫Øt bu·ªôc</strong> Controller ph·∫£i tr·∫£ v·ªÅ lo·∫°i <code>CommonResult</code>, gi·ªëng nh∆∞ c√°ch c·ªßa ph∆∞∆°ng th·ª©c <code>Controller#get2(Integer id)</code>.</p><p>Tuy nhi√™n, trong c√°c d·ª± √°n c·ªßa nh√≥m t·∫°i c√¥ng ty t√¥i, ch√∫ng t√¥i v·∫´n s·ª≠ d·ª•ng c√°ch c·ªßa <strong>GlobalResponseBodyHandler</strong> ƒë·ªÉ ch·∫∑n k·∫øt qu·∫£. V·∫≠y n√™n, c·∫£ hai c√°ch ƒë·ªÅu c√≥ th·ªÉ s·ª≠ d·ª•ng, t√πy thu·ªôc v√†o quan ƒëi·ªÉm c√° nh√¢n v√† y√™u c·∫ßu c·ªßa t·ª´ng d·ª± √°n.</p><p>Ngo√†i ra, <code>ResponseBodyAdvice</code> ƒë∆∞·ª£c d√πng ƒë·ªÉ c·∫Øt ngang n·ªôi dung ph·∫£n h·ªìi (Response Body). T∆∞∆°ng t·ª± nh∆∞ v·∫≠y, SpringMVC c≈©ng cung c·∫•p <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/RequestBodyAdvice.html" target="_blank" rel="noopener noreferrer"><code>RequestBodyAdvice</code></a> ƒë·ªÉ c·∫Øt ngang n·ªôi dung y√™u c·∫ßu (Request Body). C√°ch s·ª≠ d·ª•ng r·∫•t ƒë∆°n gi·∫£n, t∆∞∆°ng t·ª± v·ªõi <code>ResponseBodyAdvice</code>, n√™n t√¥i s·∫Ω kh√¥ng nh·∫Øc l·∫°i chi ti·∫øt ·ªü ƒë√¢y. Tuy nhi√™n, c√≥ v·∫ª nh∆∞ <code>ResponseBodyAdvice</code> kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng nhi·ªÅu. B·∫°n ch·ªâ c·∫ßn bi·∫øt r·∫±ng c√≥ c√¥ng c·ª• n√†y, v√† khi c·∫ßn th√¨ c√≥ th·ªÉ quay l·∫°i t√¨m hi·ªÉu k·ªπ h∆°n.</p><h1 id="_5-xu-ly-ngoai-le-toan-cuc" tabindex="-1"><a class="header-anchor" href="#_5-xu-ly-ngoai-le-toan-cuc"><span>5. X·ª≠ l√Ω ngo·∫°i l·ªá to√†n c·ª•c</span></a></h1><blockquote><p>M√£ ngu·ªìn m·∫´u t∆∞∆°ng ·ª©ng v·ªõi kho: <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02" target="_blank" rel="noopener noreferrer">lab-springmvc-23-02</a>.</p></blockquote><p>Trong ph·∫ßn <a href="#">„Äå4. Ph·∫£n h·ªìi th·ªëng nh·∫•t to√†n c·ª•c„Äç</a>, ch√∫ng ta ƒë√£ ƒë·ªãnh nghƒ©a s·ª≠ d·ª•ng CommonResult ƒë·ªÉ ph·∫£n h·ªìi th·ªëng nh·∫•t to√†n c·ª•c v√† ƒë√£ th·∫•y v√≠ d·ª• v·ªÅ ph·∫£n h·ªìi th√†nh c√¥ng. ·ªû ph·∫ßn n√†y, ch√∫ng ta s·∫Ω x·ª≠ l√Ω ngo·∫°i l·ªá to√†n c·ª•c, cu·ªëi c√πng c≈©ng s·∫Ω th√¥ng qua CommonResult ƒë·ªÉ tr·∫£ v·ªÅ.</p><p>V·∫≠y n√™n, ch√∫ng ta kh√¥ng n√≥i nhi·ªÅu n·ªØa, c√πng xem qua m√£ m·∫´u v√† ƒëi s√¢u v√†o chi ti·∫øt.</p><blockquote><p>L∆∞u √Ω: V√≠ d·ª• n√†y d·ª±a tr√™n n·ªÅn t·∫£ng c·ªßa ph·∫ßn <a href="#">„Äå4. Ph·∫£n h·ªìi th·ªëng nh·∫•t to√†n c·ª•c„Äç</a> t·ª´ kho <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02" target="_blank" rel="noopener noreferrer">lab-springmvc-23-02</a>.</p></blockquote><h2 id="_5-1-serviceexceptionenum" tabindex="-1"><a class="header-anchor" href="#_5-1-serviceexceptionenum"><span>5.1 ServiceExceptionEnum</span></a></h2><p>Trong ƒë∆∞·ªùng d·∫´n g√≥i <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/constants" target="_blank" rel="noopener noreferrer"><code>cn.iocoder.springboot.lab23.springmvc.constants</code></a>, t·∫°o l·ªõp enum <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/constants/ServiceExceptionEnum.java" target="_blank" rel="noopener noreferrer">ServiceExceptionEnum</a>, li·ªát k√™ m√£ l·ªói trong d·ª± √°n. M√£ nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// ServiceExceptionEnum.java  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> enum</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ServiceExceptionEnum</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ========== H·ªá th·ªëng c·∫•p cao ==========  </span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">    SUCCESS</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;Th√†nh c√¥ng&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">    SYS_ERROR</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2001001000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;L·ªói ph√≠a m√°y ch·ªß&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">    MISSING_REQUEST_PARAM_ERROR</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2001001001</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;Thi·∫øu tham s·ªë&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ========== Module ng∆∞·ªùi d√πng ==========  </span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">    USER_NOT_FOUND</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1001002000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;Kh√¥ng t√¨m th·∫•y ng∆∞·ªùi d√πng&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ========== Module ƒë∆°n h√†ng ==========  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ========== Module s·∫£n ph·∫©m ==========  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    ;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * M√£ l·ªói  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> code</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Th√¥ng b√°o l·ªói  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> message</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">    ServiceExceptionEnum</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> code</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> message</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">code</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> code;  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">message</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> message;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ... L∆∞·ª£c b·ªè c√°c ph∆∞∆°ng th·ª©c getter  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>V√¨ m√£ l·ªói l√† to√†n c·ª•c, t·ªët nh·∫•t l√† ph√¢n chia theo module. D∆∞·ªõi ƒë√¢y l√† v√≠ d·ª• t·ª´ d·ª± √°n <a href="https://github.com/YunaiV/onemall" target="_blank" rel="noopener noreferrer">onemall</a> c·ªßa t√¥i:</li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Ngo·∫°i l·ªá d·ªãch v·ª•</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Tham kh·∫£o https://www.kancloud.cn/onebase/ob/484204 b√†i vi·∫øt</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * T·ªïng c·ªông 10 ch·ªØ s·ªë, chia l√†m b·ªën ph·∫ßn</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Ph·∫ßn ƒë·∫ßu ti√™n, 1 ch·ªØ s·ªë, lo·∫°i:</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *      1 - Ngo·∫°i l·ªá c·∫•p d·ªãch v·ª•</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *      2 - Ngo·∫°i l·ªá c·∫•p h·ªá th·ªëng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Ph·∫ßn th·ª© hai, 3 ch·ªØ s·ªë, lo·∫°i h·ªá th·ªëng:</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *      001 - H·ªá th·ªëng ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *      002 - H·ªá th·ªëng s·∫£n ph·∫©m</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *      003 - H·ªá th·ªëng ƒë∆°n h√†ng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *      004 - H·ªá th·ªëng thanh to√°n</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *      005 - H·ªá th·ªëng phi·∫øu gi·∫£m gi√°</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *      ... - ...</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Ph·∫ßn th·ª© ba, 3 ch·ªØ s·ªë, module:</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *      Kh√¥ng c√≥ quy t·∫Øc c·ªë ƒë·ªãnh.</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *      Th√¥ng th∆∞·ªùng, ƒë·ªÅ ngh·ªã m·ªói h·ªá th·ªëng c√≥ th·ªÉ c√≥ nhi·ªÅu module, v√≠ d·ª• v·ªõi h·ªá th·ªëng ng∆∞·ªùi d√πng:</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *          001 - Module OAuth2</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *          002 - Module Ng∆∞·ªùi d√πng</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *          003 - Module M√£ x√°c minh qua di ƒë·ªông</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Ph·∫ßn th·ª© t∆∞, 3 ch·ªØ s·ªë, m√£ l·ªói:</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *       Kh√¥ng c√≥ quy t·∫Øc c·ªë ƒë·ªãnh.</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *       Th∆∞·ªùng th√¨, ƒë·ªÅ ngh·ªã m·ªói module s·∫Ω t·ª± tƒÉng m√£.</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-2-serviceexception" tabindex="-1"><a class="header-anchor" href="#_5-2-serviceexception"><span>5.2 ServiceException</span></a></h2><p>Ch√∫ng ta h√£y c√πng th·∫£o lu·∫≠n v·ªÅ c√°ch x·ª≠ l√Ω ngo·∫°i l·ªá logic trong t·∫ßng Service. C√°c ngo·∫°i l·ªá logic ·ªü ƒë√¢y l√† nh·ªØng t√¨nh hu·ªëng nh∆∞ t√™n ng∆∞·ªùi d√πng ƒë√£ t·ªìn t·∫°i, ho·∫∑c s·ªë l∆∞·ª£ng h√†ng trong kho kh√¥ng ƒë·ªß. Th√¥ng th∆∞·ªùng, c√≥ hai ph∆∞∆°ng √°n ph·ªï bi·∫øn ƒë·ªÉ x·ª≠ l√Ω:</p><ul><li>ƒê√≥ng g√≥i m·ªôt l·ªõp ngo·∫°i l·ªá logic th·ªëng nh·∫•t l√† <strong>ServiceException</strong>, trong ƒë√≥ c√≥ m√£ l·ªói v√† th√¥ng b√°o l·ªói, sau ƒë√≥ s·ª≠ d·ª•ng <code>throws</code> ƒë·ªÉ n√©m ra ngo·∫°i l·ªá.</li><li>ƒê√≥ng g√≥i m·ªôt l·ªõp ph·∫£n h·ªìi chung l√† <strong>CommonResult</strong>, trong ƒë√≥ c√≥ m√£ l·ªói v√† th√¥ng b√°o l·ªói, sau ƒë√≥ s·ª≠ d·ª•ng <code>return</code> ƒë·ªÉ tr·∫£ v·ªÅ k·∫øt qu·∫£.</li></ul><p>Ban ƒë·∫ßu, ch√∫ng t√¥i ch·ªçn ph∆∞∆°ng √°n s·ª≠ d·ª•ng <strong>CommonResult</strong>, nh∆∞ng ph√°t hi·ªán ra m·ªôt s·ªë v·∫•n ƒë·ªÅ sau:</p><ul><li>V√¨ Spring s·ª≠ d·ª•ng <code>@Transactional</code> ƒë·ªÉ x·ª≠ l√Ω giao d·ªãch d·ª±a tr√™n c∆° ch·∫ø ngo·∫°i l·ªá, n·∫øu s·ª≠ d·ª•ng <strong>CommonResult</strong> ƒë·ªÉ tr·∫£ v·ªÅ k·∫øt qu·∫£, vi·ªác rollback giao d·ªãch s·∫Ω tr·ªü n√™n r·∫•t ph·ª©c t·∫°p.</li><li>Khi g·ªçi c√°c ph∆∞∆°ng th·ª©c kh√°c, n·∫øu ph∆∞∆°ng th·ª©c ƒë√≥ tr·∫£ v·ªÅ ƒë·ªëi t∆∞·ª£ng <strong>CommonResult</strong>, ch√∫ng ta c·∫ßn li√™n t·ª•c ki·ªÉm tra v√† x·ª≠ l√Ω, ƒëi·ªÅu n√†y l√†m cho m√£ tr·ªü n√™n ph·ª©c t·∫°p.</li></ul><p>V√¨ v·∫≠y, sau ƒë√≥ ch√∫ng t√¥i ƒë√£ quy·∫øt ƒë·ªãnh s·ª≠ d·ª•ng c√°ch n√©m ngo·∫°i l·ªá logic b·∫±ng <strong>ServiceException</strong>.</p><p>Trong ƒë∆∞·ªùng d·∫´n g√≥i <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/core/exception" target="_blank" rel="noopener noreferrer"><code>cn.iocoder.springboot.lab23.springmvc.core.exception</code></a>, t·∫°o l·ªõp ngo·∫°i l·ªá <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/core/exception/ServiceException.java" target="_blank" rel="noopener noreferrer">ServiceException</a> k·∫ø th·ª´a <strong>RuntimeException</strong>, d√πng ƒë·ªÉ ƒë·ªãnh nghƒ©a ngo·∫°i l·ªá logic. M√£ ngu·ªìn nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// ServiceException.java  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ServiceException</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> RuntimeException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * M√£ l·ªói  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> code</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> ServiceException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServiceExceptionEnum</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> serviceExceptionEnum</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // S·ª≠ d·ª•ng message t·ª´ l·ªõp cha  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        super</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">serviceExceptionEnum</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getMessage</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // G√°n m√£ l·ªói  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">code</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> serviceExceptionEnum</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getCode</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ... L∆∞·ª£c b·ªè c√°c ph∆∞∆°ng th·ª©c getter  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Ph∆∞∆°ng th·ª©c kh·ªüi t·∫°o nh·∫≠n tham s·ªë <strong>serviceExceptionEnum</strong> ƒë·ªÉ g√°n m√£ l·ªói v√† th√¥ng b√°o l·ªói. C√°ch x·ª≠ l√Ω c·ª• th·ªÉ, h√£y xem m√£ ngu·ªìn v√† c√°c ch√∫ th√≠ch.</li></ul><h2 id="_5-3-globalexceptionhandler" tabindex="-1"><a class="header-anchor" href="#_5-3-globalexceptionhandler"><span>5.3 GlobalExceptionHandler</span></a></h2><p>Trong ƒë∆∞·ªùng d·∫´n g√≥i <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/core/web" target="_blank" rel="noopener noreferrer"><code>cn.iocoder.springboot.lab23.springmvc.core.web</code></a>, t·∫°o l·ªõp <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/core/web/GlobalExceptionHandler.java" target="_blank" rel="noopener noreferrer">GlobalExceptionHandler</a> ƒë·ªÉ x·ª≠ l√Ω ngo·∫°i l·ªá to√†n c·ª•c. M√£ ngu·ªìn nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// GlobalExceptionHandler.java  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ControllerAdvice</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">basePackages</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;cn.iocoder.springboot.lab23.springmvc.controller&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> GlobalExceptionHandler</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Logger</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> logger </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getLogger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * X·ª≠ l√Ω ngo·∫°i l·ªá ServiceException  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ResponseBody</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ExceptionHandler</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">value</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ServiceException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CommonResult</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> serviceExceptionHandler</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> req</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServiceException</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ex</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">debug</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[serviceExceptionHandler]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, ex);  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // G√≥i k·∫øt qu·∫£ th√†nh CommonResult  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CommonResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ex</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getCode</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ex</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getMessage</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * X·ª≠ l√Ω ngo·∫°i l·ªá MissingServletRequestParameterException  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Ngo·∫°i l·ªá khi tham s·ªë c·ªßa SpringMVC kh√¥ng ƒë√∫ng  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ResponseBody</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ExceptionHandler</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">value</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> MissingServletRequestParameterException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CommonResult</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> missingServletRequestParameterExceptionHandler</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> req</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MissingServletRequestParameterException</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ex</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">debug</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[missingServletRequestParameterExceptionHandler]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, ex);  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // G√≥i k·∫øt qu·∫£ th√†nh CommonResult  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CommonResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServiceExceptionEnum</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MISSING_REQUEST_PARAM_ERROR</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getCode</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(),  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">                ServiceExceptionEnum</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MISSING_REQUEST_PARAM_ERROR</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getMessage</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * X·ª≠ l√Ω c√°c ngo·∫°i l·ªá kh√°c  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ResponseBody</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ExceptionHandler</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">value</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CommonResult</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> exceptionHandler</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> req</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Ghi l·∫°i nh·∫≠t k√Ω l·ªói  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[exceptionHandler]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, e);  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Tr·∫£ v·ªÅ CommonResult b√°o l·ªói  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CommonResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServiceExceptionEnum</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">SYS_ERROR</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getCode</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(),  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">                ServiceExceptionEnum</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">SYS_ERROR</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getMessage</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Trong l·ªõp, th√™m annotation <code>@ControllerAdvice</code>. ƒêi·ªÅu n√†y t∆∞∆°ng t·ª± nh∆∞ <a href="#">„Äå4.4 GlobalResponseBodyHandler„Äç</a>, nh∆∞ng ch√∫ng ta kh√¥ng c·∫ßn tri·ªÉn khai giao di·ªán <code>ResponseBodyAdvice</code>, v√¨ kh√¥ng c·∫ßn ch·∫∑n k·∫øt qu·∫£ tr·∫£ v·ªÅ ƒë·ªÉ s·ª≠a ƒë·ªïi.</li><li>Ch√∫ng ta ƒë·ªãnh nghƒ©a ba ph∆∞∆°ng th·ª©c, m·ªói ph∆∞∆°ng th·ª©c ƒë∆∞·ª£c g·∫Øn v·ªõi annotation <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html" target="_blank" rel="noopener noreferrer"><code>@ExceptionHandler</code></a> ƒë·ªÉ x·ª≠ l√Ω ngo·∫°i l·ªá t∆∞∆°ng ·ª©ng. ƒê·ªìng th·ªùi, c≈©ng th√™m annotation <code>@ResponseBody</code> ƒë·ªÉ ch·ªâ ƒë·ªãnh r·∫±ng k·∫øt qu·∫£ tr·∫£ v·ªÅ s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng tr·ª±c ti·∫øp l√†m ph·∫£n h·ªìi API.</li><li>Ph∆∞∆°ng th·ª©c <code>#serviceExceptionHandler(...)</code> x·ª≠ l√Ω ngo·∫°i l·ªá <strong>ServiceException</strong>, x√¢y d·ª±ng ƒë·ªëi t∆∞·ª£ng <strong>CommonResult</strong> t·ª´ thu·ªôc t√≠nh <code>code</code> v√† <code>message</code> c·ªßa ngo·∫°i l·ªá n√†y.</li><li>Ph∆∞∆°ng th·ª©c <code>#missingServletRequestParameterExceptionHandler(...)</code> x·ª≠ l√Ω ngo·∫°i l·ªá <strong>MissingServletRequestParameterException</strong>, x√¢y d·ª±ng ƒë·ªëi t∆∞·ª£ng <strong>CommonResult</strong> v·ªõi m√£ l·ªói l√† <code>ServiceExceptionEnum.MISSING_REQUEST_PARAM_ERROR</code>.</li><li>Ph∆∞∆°ng th·ª©c <code>#exceptionHandler(...)</code> x·ª≠ l√Ω ngo·∫°i l·ªá <strong>Exception</strong>, x√¢y d·ª±ng ƒë·ªëi t∆∞·ª£ng <strong>CommonResult</strong> v·ªõi m√£ l·ªói l√† <code>ServiceExceptionEnum.SYS_ERROR</code>. ƒê√¢y l√† ph∆∞∆°ng th·ª©c x·ª≠ l√Ω ngo·∫°i l·ªá &quot;cu·ªëi c√πng&quot;, d√πng ƒë·ªÉ x·ª≠ l√Ω c√°c ngo·∫°i l·ªá kh√°c m√† ch√∫ng ta kh√¥ng ƒë·ªãnh nghƒ©a trong <strong>GlobalExceptionHandler</strong>.</li></ul><p><strong>L∆∞u √Ω</strong>: Trong ph∆∞∆°ng th·ª©c <code>#exceptionHandler(...)</code>, ch√∫ng ta ƒë√£ s·ª≠ d·ª•ng <strong>logger</strong> ƒë·ªÉ ghi nh·∫≠t k√Ω l·ªói, ƒëi·ªÅu n√†y gi√∫p d·ªÖ d√†ng k·∫øt n·ªëi v·ªõi c√°c d·ªãch v·ª• nh·∫≠t k√Ω nh∆∞ <strong>ELK</strong>, t·ª´ ƒë√≥ g·ª≠i c·∫£nh b√°o v√† th√¥ng b√°o ƒë·ªÉ ki·ªÉm tra v√† kh·∫Øc ph·ª•c s·ª± c·ªë. N·∫øu h·ªá th·ªëng c·ªßa b·∫°n ch∆∞a c√≥ d·ªãch v·ª• nh·∫≠t k√Ω, b·∫°n c√≥ th·ªÉ ghi l·∫°i l·ªói v√†o c∆° s·ªü d·ªØ li·ªáu c≈©ng l√† m·ªôt ph∆∞∆°ng √°n t·ªët. C√≤n ƒë·ªëi v·ªõi hai ph∆∞∆°ng th·ª©c c√≤n l·∫°i, v√¨ ch√∫ng x·ª≠ l√Ω ngo·∫°i l·ªá li√™n quan ƒë·∫øn logic nghi·ªáp v·ª•, n√™n kh√¥ng c·∫ßn ph·∫£i ghi nh·∫≠t k√Ω l·ªói.</p><h2 id="_5-4-usercontroller" tabindex="-1"><a class="header-anchor" href="#_5-4-usercontroller"><span>5.4 UserController</span></a></h2><p>Trong l·ªõp <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/controller/UserController.java" target="_blank" rel="noopener noreferrer">UserController</a>, ch√∫ng ta th√™m hai API ƒë·ªÉ n√©m ngo·∫°i l·ªá, gi√∫p th·ª≠ nghi·ªám t√≠nh nƒÉng x·ª≠ l√Ω ngo·∫°i l·ªá to√†n c·ª•c. M√£ ngu·ªìn nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// UserController.java  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">/**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * Th·ª≠ nghi·ªám n√©m ngo·∫°i l·ªá NullPointerException  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/exception-01&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserVO</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> exception01</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    throw</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> NullPointerException</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Kh√¥ng c√≥ c√° vi√™n chi√™n&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">/**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * Th·ª≠ nghi·ªám n√©m ngo·∫°i l·ªá ServiceException  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/exception-02&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserVO</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> exception02</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    throw</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> ServiceException</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServiceExceptionEnum</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">USER_NOT_FOUND</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Trong ph∆∞∆°ng th·ª©c <code>#exception01()</code>, ch√∫ng ta n√©m ngo·∫°i l·ªá <strong>NullPointerException</strong>. Khi ƒë√≥, ngo·∫°i l·ªá n√†y s·∫Ω ƒë∆∞·ª£c ph∆∞∆°ng th·ª©c <code>GlobalExceptionHandler#exceptionHandler(...)</code> ch·∫∑n l·∫°i v√† g√≥i th√†nh ƒë·ªëi t∆∞·ª£ng <strong>CommonResult</strong> ƒë·ªÉ tr·∫£ v·ªÅ. K·∫øt qu·∫£ y√™u c·∫ßu s·∫Ω nh∆∞ sau:</p><div class="language-json" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">{  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;code&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2001001000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;message&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;D·ªãch v·ª• x·∫£y ra l·ªói&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;data&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div></li><li><p>Trong ph∆∞∆°ng th·ª©c <code>#exception02()</code>, ch√∫ng ta n√©m ngo·∫°i l·ªá <strong>ServiceException</strong>. Ngo·∫°i l·ªá n√†y s·∫Ω ƒë∆∞·ª£c ph∆∞∆°ng th·ª©c <code>GlobalExceptionHandler#serviceExceptionHandler(...)</code> ch·∫∑n l·∫°i v√† g√≥i th√†nh ƒë·ªëi t∆∞·ª£ng <strong>CommonResult</strong> ƒë·ªÉ tr·∫£ v·ªÅ. K·∫øt qu·∫£ y√™u c·∫ßu s·∫Ω nh∆∞ sau:</p><div class="language-json" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">{  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;code&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1001002000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;message&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Ng∆∞·ªùi d√πng kh√¥ng t·ªìn t·∫°i&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;data&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div></li></ul><h1 id="_6-bo-chan-handlerinterceptor" tabindex="-1"><a class="header-anchor" href="#_6-bo-chan-handlerinterceptor"><span>6. B·ªô ch·∫∑n HandlerInterceptor</span></a></h1><blockquote><p>M√£ v√≠ d·ª• t∆∞∆°ng ·ª©ng v·ªõi kho l∆∞u tr·ªØ: <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02" target="_blank" rel="noopener noreferrer">lab-springmvc-23-02</a>.</p></blockquote><p>Khi s·ª≠ d·ª•ng SpringMVC, ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-webmvc/src/main/java/org/springframework/web/servlet/HandlerInterceptor.java" target="_blank" rel="noopener noreferrer">HandlerInterceptor</a> ƒë·ªÉ can thi·ªáp v√†o qu√° tr√¨nh x·ª≠ l√Ω y√™u c·∫ßu c·ªßa SpringMVC v√† t√πy ch·ªânh logic tr∆∞·ªõc v√† sau khi x·ª≠ l√Ω y√™u c·∫ßu. V√≠ d·ª• nh∆∞:</p><ul><li><strong>B·ªô ch·∫∑n nh·∫≠t k√Ω</strong>: Ghi l·∫°i c√°c y√™u c·∫ßu v√† ph·∫£n h·ªìi. Nh·ªù ƒë√≥, ch√∫ng ta c√≥ th·ªÉ bi·∫øt ƒë∆∞·ª£c tham s·ªë c·ªßa m·ªói y√™u c·∫ßu, k·∫øt qu·∫£ ph·∫£n h·ªìi, th·ªùi gian th·ª±c thi, v.v.</li><li><strong>B·ªô ch·∫∑n x√°c th·ª±c</strong>: Gi·∫£i m√£ th√¥ng tin ng∆∞·ªùi d√πng t·ª´ ph√≠a tr∆∞·ªõc truy·ªÅn v√†o, ch·∫≥ng h·∫°n nh∆∞ <code>access_token</code> ƒë·ªÉ l·∫•y th√¥ng tin ng∆∞·ªùi d√πng hi·ªán t·∫°i v√† l∆∞u v√†o <strong>ThreadLocal</strong>. Nh·ªù v·∫≠y, c√°c logic sau ƒë√≥ ch·ªâ c·∫ßn l·∫•y th√¥ng tin ng∆∞·ªùi d√πng qua <strong>ThreadLocal</strong>.</li><li><strong>B·ªô ch·∫∑n ph√¢n quy·ªÅn</strong>: D·ª±a v√†o th√¥ng tin ph√¢n quy·ªÅn c·ªßa m·ªói API ƒë·ªÉ x√°c ƒë·ªãnh xem y√™u c·∫ßu hi·ªán t·∫°i c√≥ ƒë∆∞·ª£c ph√©p truy c·∫≠p hay kh√¥ng. V√≠ d·ª•, ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng nh·∫≠p ch∆∞a, c√≥ quy·ªÅn th·ª±c hi·ªán thao t√°c API ƒë√≥ kh√¥ng.</li><li><strong>B·ªô ch·∫∑n gi·ªõi h·∫°n t·∫ßn su·∫•t</strong>: D·ª±a v√†o c·∫•u h√¨nh gi·ªõi h·∫°n t·∫ßn su·∫•t c·ªßa m·ªói API ƒë·ªÉ x√°c ƒë·ªãnh xem y√™u c·∫ßu hi·ªán t·∫°i c√≥ v∆∞·ª£t qu√° t·∫ßn su·∫•t cho ph√©p kh√¥ng, nh·∫±m tr√°nh c√°c y√™u c·∫ßu √°c √Ω l√†m qu√° t·∫£i h·ªá th·ªëng.</li></ul><p>Interface <code>HandlerInterceptor</code> ƒë·ªãnh nghƒ©a ba ƒëi·ªÉm ch·∫∑n. M√£ nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// HandlerInterceptor.java  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> HandlerInterceptor</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">	default</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> preHandle</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">			throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">		return</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">	}</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">	default</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> postHandle</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">			@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Nullable</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ModelAndView</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> modelAndView</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">	}</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">	default</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> afterCompletion</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">			@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Nullable</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ex</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">	}</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Tr∆∞·ªõc ti√™n, ch√∫ng ta c·∫ßn hi·ªÉu m·ªôt kh√°i ni·ªám. M·ªói y√™u c·∫ßu API s·∫Ω t∆∞∆°ng ·ª©ng v·ªõi m·ªôt <strong>handler</strong>. Nh∆∞ h√¨nh minh h·ªça sau:<br><img src="https://static.iocoder.cn/images/Spring-Boot/2019-11-17/02.png" alt="" loading="lazy"></p><ul><li>Ch√∫ng ta c√≥ th·ªÉ th·∫•y r·∫±ng y√™u c·∫ßu <code>users/exception_03</code> n√†y c√≥ <strong>handler</strong> t∆∞∆°ng ·ª©ng v·ªõi ph∆∞∆°ng th·ª©c <code>#exception03()</code> trong <code>UserController</code>.</li><li>V√¨ v·∫≠y, t√™n c·ªßa giao di·ªán <code>HandlerInterceptor</code> b·∫Øt ƒë·∫ßu v·ªõi <strong>Handler</strong>, v√¨ n√≥ l√† b·ªô ch·∫∑n d·ª±a tr√™n Handler.</li></ul></li><li><p>Ti·∫øp theo, ch√∫ng ta s·∫Ω xem m·ªôt ƒëo·∫°n m√£ gi·∫£ ƒë·ªÉ hi·ªÉu r√µ c√°ch ba ƒëi·ªÉm ch·∫∑n n√†y v√† qu√° tr√¨nh th·ª±c thi c·ªßa <code>handler</code>. M√£ nh∆∞ sau:</p></li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// M√£ gi·∫£  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> ex </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">try</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // X·ª≠ l√Ω tr∆∞·ªõc  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">preHandle</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(request</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> response</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> handler)) {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    }  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // Th·ª±c thi x·ª≠ l√Ω ch√≠nh c·ªßa handler, t·ª©c l√† logic c·ªßa API  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    handler</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // X·ª≠ l√Ω sau  </span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">    postHandle</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(request</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> response</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> handler)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">} </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> exception</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">) {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // N·∫øu x·∫£y ra ngo·∫°i l·ªá, l∆∞u v√†o bi·∫øn ex  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    ex </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">} </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">finally</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> {  </span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">    afterCompletion</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(request</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> response</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> handler)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>D·ª±a tr√™n ƒëo·∫°n m√£ n√†y, ch√∫ng ta c√≥ th·ªÉ hi·ªÉu r√µ qu√° tr√¨nh x·ª≠ l√Ω y√™u c·∫ßu.</p></li><li><p>Tuy nhi√™n, ƒë√¢y ch·ªâ l√† m√£ gi·∫£ v√† ch∆∞a t√≠nh ƒë·∫øn tr∆∞·ªùng h·ª£p c√≥ nhi·ªÅu b·ªô ch·∫∑n. Trong c√°c ph·∫ßn sau, ch√∫ng ta s·∫Ω cung c·∫•p c√°c v√≠ d·ª• c·ª• th·ªÉ ƒë·ªÉ gi·∫£i th√≠ch r√µ r√†ng h∆°n v·ªÅ qu√° tr√¨nh th·ª±c thi.</p></li><li><p>Ph∆∞∆°ng th·ª©c <code>#preHandle(...)</code>: X·ª≠ l√Ω logic <strong>tr∆∞·ªõc</strong> khi th·ª±c thi <code>handler</code>. N·∫øu tr·∫£ v·ªÅ <code>true</code>, <strong>ti·∫øp t·ª•c</strong> th·ª±c hi·ªán <code>handler</code>; n·∫øu tr·∫£ v·ªÅ <code>false</code>, <strong>d·ª´ng</strong> qu√° tr√¨nh th·ª±c thi.</p></li></ul><blockquote><p>V√≠ d·ª•, ki·ªÉm tra xem ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng nh·∫≠p hay ch∆∞a. N·∫øu ch∆∞a, tr·∫£ v·ªÅ <code>false</code> v√† <strong>d·ª´ng</strong> qu√° tr√¨nh th·ª±c thi.</p></blockquote><ul><li>Ph∆∞∆°ng th·ª©c <code>#postHandle(...)</code>: X·ª≠ l√Ω logic <strong>sau</strong> khi <code>handler</code> ƒë√£ th·ª±c thi.</li></ul><blockquote><p>V√≠ d·ª•, th·ª±c hi·ªán m·ªôt s·ªë x·ª≠ l√Ω tr∆∞·ªõc khi hi·ªÉn th·ªã giao di·ªán. Tuy nhi√™n, do hi·ªán t·∫°i ph·∫ßn l·ªõn c√°c ·ª©ng d·ª•ng ƒë·ªÅu t√°ch bi·ªát gi·ªØa frontend v√† backend, n√™n ƒëi·ªÉm ch·∫∑n n√†y √≠t ƒë∆∞·ª£c s·ª≠ d·ª•ng h∆°n.</p></blockquote><ul><li>Ph∆∞∆°ng th·ª©c <code>#afterCompletion(...)</code>: Sau khi <code>handler</code> v√† to√†n b·ªô chu·ªói <strong>Interceptor</strong> ƒë√£ ho√†n th√†nh qu√° tr√¨nh x·ª≠ l√Ω tr∆∞·ªõc v√† sau, th·ª±c hi·ªán logic <strong>sau khi ho√†n th√†nh</strong> y√™u c·∫ßu. <strong>L∆∞u √Ω</strong>, ch·ªâ nh·ªØng <code>HandlerInterceptor</code> c√≥ ph∆∞∆°ng th·ª©c <code>#preHandle(...)</code> tr·∫£ v·ªÅ <code>true</code> m·ªõi th·ª±c thi ƒë∆∞·ª£c <code>#afterCompletion(...)</code>, v√¨ ch·ªâ khi ƒë√≥ <code>HandlerInterceptor</code> m·ªõi ƒë∆∞·ª£c coi l√† <strong>ho√†n th√†nh</strong>.</li></ul><blockquote><p>V√≠ d·ª•, gi·∫£i ph√≥ng t√†i nguy√™n. Ch·∫≥ng h·∫°n, x√≥a c√°c bi·∫øn <strong>ThreadLocal</strong> ƒë∆∞·ª£c t·∫°o ra b·ªüi b·ªô ch·∫∑n x√°c th·ª±c ƒë·ªÉ tr√°nh memory leak cho y√™u c·∫ßu ti·∫øp theo s·ª≠ d·ª•ng c√πng m·ªôt thread.</p><p>Ho·∫∑c x·ª≠ l√Ω ngo·∫°i l·ªá x·∫£y ra trong qu√° tr√¨nh th·ª±c thi <code>handler</code> v√† ghi l·∫°i nh·∫≠t k√Ω ngo·∫°i l·ªá. Tuy nhi√™n, hi·ªán nay th∆∞·ªùng s·ª≠ d·ª•ng <a href="#">x·ª≠ l√Ω ngo·∫°i l·ªá to√†n c·ª•c</a> ƒë·ªÉ x·ª≠ l√Ω c√°c ngo·∫°i l·ªá, n√™n √≠t khi c·∫ßn l√†m nh∆∞ v·∫≠y.</p><p>Ngo√†i ra, c√≥ th·ªÉ ghi l·∫°i th·ªùi gian k·∫øt th√∫c y√™u c·∫ßu ƒë·ªÉ t√≠nh to√°n th·ªùi gian x·ª≠ l√Ω c·ªßa to√†n b·ªô qu√° tr√¨nh.</p></blockquote><p>Nhi·ªÅu <code>HandlerInterceptor</code> c√≥ th·ªÉ ƒë∆∞·ª£c k·∫øt h·ª£p l·∫°i th√†nh m·ªôt <strong>chu·ªói Interceptor</strong>. Qu√° tr√¨nh th·ª±c thi s·∫Ω di·ªÖn ra theo tr√¨nh t·ª±:</p><ul><li>ƒê·∫ßu ti√™n, th·ª±c thi ph∆∞∆°ng th·ª©c <code>#preHandle(...)</code> c·ªßa chu·ªói theo th·ª© t·ª±.</li><li>Ti·∫øp theo, th·ª±c thi logic c·ªßa <code>handler</code>.</li><li>Sau ƒë√≥, th·ª±c thi ph∆∞∆°ng th·ª©c <code>#postHandle(...)</code> c·ªßa chu·ªói theo th·ª© t·ª± ng∆∞·ª£c l·∫°i.</li><li>Cu·ªëi c√πng, th·ª±c thi ph∆∞∆°ng th·ª©c <code>#afterCompletion(...)</code> c·ªßa chu·ªói theo th·ª© t·ª± ng∆∞·ª£c l·∫°i.</li></ul><p>ƒê√¢y l√† qu√° tr√¨nh th·ª±c thi trong tr∆∞·ªùng h·ª£p b√¨nh th∆∞·ªùng. C√≤n trong c√°c tr∆∞·ªùng h·ª£p ngo·∫°i l·ªá th√¨ sao? V√≠ d·ª•:</p><ul><li>M·ªôt <code>HandlerInterceptor</code> tr·∫£ v·ªÅ <code>false</code> trong ph∆∞∆°ng th·ª©c <code>#preHandle(...)</code>.</li><li>Qu√° tr√¨nh th·ª±c thi c·ªßa <code>handler</code> n√©m ra ngo·∫°i l·ªá.</li><li>M·ªôt <code>HandlerInterceptor</code> n√©m ra ngo·∫°i l·ªá trong ph∆∞∆°ng th·ª©c <code>#afterCompletion(...)</code>.</li><li>...</li></ul><p>ƒê·ª´ng lo l·∫Øng, ch√∫ng ta s·∫Ω ƒë∆∞a ra c√°c v√≠ d·ª• ƒë·ªÉ gi·∫£i th√≠ch nh·ªØng tr∆∞·ªùng h·ª£p ngo·∫°i l·ªá n√†y. Ti·∫øp theo, ch√∫ng ta s·∫Ω kh√°m ph√° s√¢u h∆°n c√°c v√≠ d·ª• trong ph·∫ßn n√†y.</p><blockquote><p>L∆∞u √Ω: V√≠ d·ª• n√†y d·ª±a tr√™n <a href="#">x·ª≠ l√Ω ngo·∫°i l·ªá to√†n c·ª•c</a> c·ªßa d·ª± √°n <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02" target="_blank" rel="noopener noreferrer">lab-springmvc-23-02</a> v√† ti·∫øp t·ª•c ƒë∆∞·ª£c c·∫£i ti·∫øn.</p></blockquote><h2 id="_6-1-tuy-chinh-handlerinterceptor" tabindex="-1"><a class="header-anchor" href="#_6-1-tuy-chinh-handlerinterceptor"><span>6.1 T√πy ch·ªânh HandlerInterceptor</span></a></h2><p>Trong ƒë∆∞·ªùng d·∫´n g√≥i <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/core/interceptor" target="_blank" rel="noopener noreferrer"><code>cn.iocoder.springboot.lab23.springmvc.core.interceptor</code></a>, ch√∫ng ta t·∫°o ba b·ªô ch·∫∑n <code>HandlerInterceptor</code> t√πy ch·ªânh.</p><h3 id="_1-firstinterceptor" tabindex="-1"><a class="header-anchor" href="#_1-firstinterceptor"><span>1. <code>FirstInterceptor</code></span></a></h3><p>M√£ ngu·ªìn c·ªßa <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/core/interceptor/FirstInterceptor" target="_blank" rel="noopener noreferrer">FirstInterceptor</a> nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// FirstInterceptor.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> FirstInterceptor</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> HandlerInterceptor</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Logger</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> logger </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getLogger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> preHandle</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[preHandle][handler({})]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, handler);  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> postHandle</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ModelAndView</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> modelAndView</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[postHandle][handler({})]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, handler);  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> afterCompletion</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ex</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[afterCompletion][handler({})]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, handler, ex);  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>M·ªói ph∆∞∆°ng th·ª©c ƒë·ªÅu ghi l·∫°i nh·∫≠t k√Ω (log).</li></ul><h3 id="_2-secondinterceptor" tabindex="-1"><a class="header-anchor" href="#_2-secondinterceptor"><span>2. <code>SecondInterceptor</code></span></a></h3><p>M√£ ngu·ªìn c·ªßa <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/core/interceptor/SecondInterceptor" target="_blank" rel="noopener noreferrer">SecondInterceptor</a> nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// SecondInterceptor.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> SecondInterceptor</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> HandlerInterceptor</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Logger</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> logger </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getLogger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> preHandle</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[preHandle][handler({})]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, handler);  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// C·ªë t√¨nh tr·∫£ v·ªÅ false  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> postHandle</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ModelAndView</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> modelAndView</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[postHandle][handler({})]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, handler);  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> afterCompletion</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ex</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[afterCompletion][handler({})]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, handler, ex);  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>G·∫ßn gi·ªëng v·ªõi <code>FirstInterceptor</code>, kh√°c bi·ªát n·∫±m ·ªü ph∆∞∆°ng th·ª©c <code>#preHandle(...)</code> tr·∫£ v·ªÅ <code>false</code>.</li></ul><h3 id="_3-thirdinterceptor" tabindex="-1"><a class="header-anchor" href="#_3-thirdinterceptor"><span>3. <code>ThirdInterceptor</code></span></a></h3><p>M√£ ngu·ªìn c·ªßa <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/core/interceptor/ThirdInterceptor" target="_blank" rel="noopener noreferrer">ThirdInterceptor</a> nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// ThirdInterceptor.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ThirdInterceptor</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> HandlerInterceptor</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Logger</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> logger </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getLogger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> preHandle</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[preHandle][handler({})]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, handler);  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> postHandle</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ModelAndView</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> modelAndView</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[postHandle][handler({})]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, handler);  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> afterCompletion</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ex</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[afterCompletion][handler({})]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, handler, ex);  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        throw</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;C·ªë t√¨nh n√©m ra l·ªói&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// C·ªë t√¨nh n√©m ra ngo·∫°i l·ªá  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>G·∫ßn gi·ªëng v·ªõi <code>FirstInterceptor</code>, nh∆∞ng kh√°c bi·ªát n·∫±m ·ªü ph∆∞∆°ng th·ª©c <code>#afterCompletion(...)</code> c·ªë t√¨nh n√©m ra ngo·∫°i l·ªá <code>RuntimeException</code>.</li></ul><h3 id="tom-lai" tabindex="-1"><a class="header-anchor" href="#tom-lai"><span>T√≥m l·∫°i</span></a></h3><ul><li><code>FirstInterceptor</code>: Ghi nh·∫≠t k√Ω b√¨nh th∆∞·ªùng cho c·∫£ ba ph∆∞∆°ng th·ª©c <code>preHandle</code>, <code>postHandle</code> v√† <code>afterCompletion</code>.</li><li><code>SecondInterceptor</code>: D·ª´ng qu√° tr√¨nh x·ª≠ l√Ω (tr·∫£ v·ªÅ <code>false</code>) ngay t·∫°i ph∆∞∆°ng th·ª©c <code>preHandle</code>.</li><li><code>ThirdInterceptor</code>: Ghi nh·∫≠t k√Ω b√¨nh th∆∞·ªùng nh∆∞ng c·ªë t√¨nh n√©m ra ngo·∫°i l·ªá trong ph∆∞∆°ng th·ª©c <code>afterCompletion</code>.</li></ul><p>Ba b·ªô ch·∫∑n n√†y s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ minh h·ªça c√°ch m√† c√°c <code>HandlerInterceptor</code> ho·∫°t ƒë·ªông khi ƒë∆∞·ª£c li√™n k·∫øt th√†nh m·ªôt chu·ªói (Chain) v√† khi g·∫∑p c√°c t√¨nh hu·ªëng ƒë·∫∑c bi·ªát nh∆∞ d·ª´ng ho·∫∑c n√©m ra ngo·∫°i l·ªá.</p><h2 id="_6-2-springmvcconfiguration" tabindex="-1"><a class="header-anchor" href="#_6-2-springmvcconfiguration"><span>6.2 SpringMVCConfiguration</span></a></h2><p>Trong ƒë∆∞·ªùng d·∫´n g√≥i <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/config/" target="_blank" rel="noopener noreferrer"><code>cn.iocoder.springboot.lab23.springmvc.config</code></a>, ch√∫ng ta t·∫°o l·ªõp c·∫•u h√¨nh <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/config/SpringMVCConfiguration.java" target="_blank" rel="noopener noreferrer">SpringMVCConfiguration</a>. M√£ ngu·ªìn nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// SpringMVCConfiguration.java</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Configuration</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> SpringMVCConfiguration</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> WebMvcConfigurer</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> FirstInterceptor</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> firstInterceptor</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> FirstInterceptor</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> SecondInterceptor</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> secondInterceptor</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> SecondInterceptor</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ThirdInterceptor</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> thirdInterceptor</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> ThirdInterceptor</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> addInterceptors</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">InterceptorRegistry</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> registry</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // B·ªô ch·∫∑n th·ª© nh·∫•t</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        registry</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">addInterceptor</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">firstInterceptor</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">addPathPatterns</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/**&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // B·ªô ch·∫∑n th·ª© hai</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        registry</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">addInterceptor</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">secondInterceptor</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">addPathPatterns</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/users/current_user&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // B·ªô ch·∫∑n th·ª© ba</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        registry</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">addInterceptor</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">thirdInterceptor</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">addPathPatterns</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/**&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="giai-thich" tabindex="-1"><a class="header-anchor" href="#giai-thich"><span>Gi·∫£i th√≠ch:</span></a></h3><ul><li><p>L·ªõp c·∫•u h√¨nh n√†y tri·ªÉn khai interface <a href="https://www.jianshu.com/p/52f39b799fbb" target="_blank" rel="noopener noreferrer">WebMvcConfigurer</a>, cho ph√©p t√πy ch·ªânh c·∫•u h√¨nh trong Spring MVC. L·ªõp n√†y c≈©ng ƒë∆∞·ª£c ƒë√°nh d·∫•u v·ªõi ch√∫ th√≠ch <code>@Configuration</code>, ƒë·ªÉ ch·ªâ ra r·∫±ng n√≥ l√† m·ªôt l·ªõp c·∫•u h√¨nh.</p></li><li><p>Ph∆∞∆°ng th·ª©c <code>#addInterceptors(InterceptorRegistry registry)</code> d√πng ƒë·ªÉ th√™m c√°c b·ªô ch·∫∑n <code>HandlerInterceptor</code> t√πy ch·ªânh v√†o b·∫£ng ƒëƒÉng k√Ω <code>InterceptorRegistry</code>. C·ª• th·ªÉ:</p><ul><li>B·ªô ch·∫∑n <code>FirstInterceptor</code> ƒë∆∞·ª£c √°p d·ª•ng cho t·∫•t c·∫£ c√°c ƒë∆∞·ªùng d·∫´n (<code>/**</code>).</li><li>B·ªô ch·∫∑n <code>SecondInterceptor</code> ch·ªâ √°p d·ª•ng cho ƒë∆∞·ªùng d·∫´n <code>/users/current_user</code>. ƒêi·ªÅu n√†y nh·∫±m ki·ªÉm tra h√†nh vi khi <code>SecondInterceptor#preHandle(...)</code> tr·∫£ v·ªÅ <code>false</code>, l√†m gi√°n ƒëo·∫°n qu√° tr√¨nh x·ª≠ l√Ω tr∆∞·ªõc khi ti·∫øp t·ª•c ƒë·∫øn b·ªô ƒëi·ªÅu khi·ªÉn.</li><li>B·ªô ch·∫∑n <code>ThirdInterceptor</code> c≈©ng ƒë∆∞·ª£c √°p d·ª•ng cho t·∫•t c·∫£ c√°c ƒë∆∞·ªùng d·∫´n (<code>/**</code>).</li></ul></li></ul><h3 id="tong-ket" tabindex="-1"><a class="header-anchor" href="#tong-ket"><span>T·ªïng k·∫øt:</span></a></h3><ul><li>L·ªõp c·∫•u h√¨nh n√†y t·∫°o c√°c bean cho ba b·ªô ch·∫∑n <code>FirstInterceptor</code>, <code>SecondInterceptor</code>, v√† <code>ThirdInterceptor</code>.</li><li>Th√¥ng qua vi·ªác ƒëƒÉng k√Ω c√°c b·ªô ch·∫∑n, Spring MVC s·∫Ω k√≠ch ho·∫°t c√°c interceptor t∆∞∆°ng ·ª©ng tr√™n c√°c ƒë∆∞·ªùng d·∫´n c·ª• th·ªÉ. V√≠ d·ª•, v·ªõi <code>SecondInterceptor</code>, n·∫øu ng∆∞·ªùi d√πng truy c·∫≠p v√†o <code>/users/current_user</code>, qu√° tr√¨nh s·∫Ω b·ªã d·ª´ng l·∫°i do ph∆∞∆°ng th·ª©c <code>preHandle</code> tr·∫£ v·ªÅ <code>false</code>.</li></ul><h2 id="_6-3-usercontroller" tabindex="-1"><a class="header-anchor" href="#_6-3-usercontroller"><span>6.3 UserController</span></a></h2><p>Trong ph·∫ßn n√†y, ch√∫ng ta s·∫Ω ki·ªÉm tra h√†nh vi c·ªßa chu·ªói interceptor (b·ªô ch·∫∑n) th√¥ng qua c√°c API ƒë∆∞·ª£c cung c·∫•p b·ªüi <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/controller/UserController.java" target="_blank" rel="noopener noreferrer">UserController</a>.</p><h3 id="_1-api-users-do-something" tabindex="-1"><a class="header-anchor" href="#_1-api-users-do-something"><span><strong>‚ë† API <code>/users/do_something</code></strong></span></a></h3><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// UserController.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/do_something&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> doSomething</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[doSomething]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><p>Khi g·ªçi API n√†y, k·∫øt qu·∫£ log s·∫Ω nh∆∞ sau:</p><div class="language-plaintext line-numbers-mode" data-highlighter="shiki" data-ext="plaintext" data-title="plaintext" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>// ƒê·∫ßu ti√™n, theo th·ª© t·ª± c·ªßa chu·ªói HandlerInterceptor, c√°c ph∆∞∆°ng th·ª©c `#preHandle(...)` ƒë∆∞·ª£c th·ª±c thi.  </span></span>
<span class="line"><span>2019-11-17 12:31:38.049  INFO 28157 --- [nio-8080-exec-1] c.i.s.l.s.c.i.FirstInterceptor           : [preHandle][handler(public void cn.iocoder.springboot.lab23.springmvc.controller.UserController.doSomething())]  </span></span>
<span class="line"><span>2019-11-17 12:31:38.050  INFO 28157 --- [nio-8080-exec-1] c.i.s.l.s.c.i.ThirdInterceptor           : [preHandle][handler(public void cn.iocoder.springboot.lab23.springmvc.controller.UserController.doSomething())]  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>// Sau ƒë√≥, x·ª≠ l√Ω logic c·ªßa `handler`.  </span></span>
<span class="line"><span>[doSomething]  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>// Ti·∫øp theo, theo th·ª© t·ª± ng∆∞·ª£c c·ªßa chu·ªói HandlerInterceptor, c√°c ph∆∞∆°ng th·ª©c `#postHandle(...)` ƒë∆∞·ª£c th·ª±c thi.  </span></span>
<span class="line"><span>2019-11-17 12:31:38.109  INFO 28157 --- [nio-8080-exec-1] c.i.s.l.s.c.i.ThirdInterceptor           : [postHandle][handler(public void cn.iocoder.springboot.lab23.springmvc.controller.UserController.doSomething())]  </span></span>
<span class="line"><span>2019-11-17 12:31:38.109  INFO 28157 --- [nio-8080-exec-1] c.i.s.l.s.c.i.FirstInterceptor           : [postHandle][handler(public void cn.iocoder.springboot.lab23.springmvc.controller.UserController.doSomething())]  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>// Cu·ªëi c√πng, theo th·ª© t·ª± ng∆∞·ª£c c·ªßa chu·ªói HandlerInterceptor, c√°c ph∆∞∆°ng th·ª©c `#afterCompletion(...)` ƒë∆∞·ª£c th·ª±c thi.  </span></span>
<span class="line"><span>2019-11-17 12:31:38.109  INFO 28157 --- [nio-8080-exec-1] c.i.s.l.s.c.i.ThirdInterceptor           : [afterCompletion][handler(public void cn.iocoder.springboot.lab23.springmvc.controller.UserController.doSomething())]  </span></span>
<span class="line"><span>java.lang.RuntimeException: C·ªë √Ω n√©m l·ªói</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2019-11-17 12:31:38.116  INFO 28157 --- [nio-8080-exec-1] c.i.s.l.s.c.i.FirstInterceptor           : [afterCompletion][handler(public void cn.iocoder.springboot.lab23.springmvc.controller.UserController.doSomething())]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="giai-thich-1" tabindex="-1"><a class="header-anchor" href="#giai-thich-1"><span>Gi·∫£i th√≠ch:</span></a></h3><ul><li>C√°c interceptor ƒë∆∞·ª£c th·ª±c thi theo th·ª© t·ª± chu·ªói <code>HandlerInterceptor</code>: <ul><li><code>preHandle()</code> th·ª±c thi t·ª´ interceptor ƒë·∫ßu ti√™n (<code>FirstInterceptor</code>) ƒë·∫øn cu·ªëi c√πng (<code>ThirdInterceptor</code>).</li><li><code>postHandle()</code> v√† <code>afterCompletion()</code> th·ª±c thi ng∆∞·ª£c l·∫°i, t·ª´ <code>ThirdInterceptor</code> v·ªÅ <code>FirstInterceptor</code>.</li></ul></li><li><code>SecondInterceptor</code> kh√¥ng ƒë∆∞·ª£c k√≠ch ho·∫°t v√¨ n√≥ ch·ªâ ƒë∆∞·ª£c ƒëƒÉng k√Ω cho ƒë∆∞·ªùng d·∫´n <code>/users/current_user</code>.</li><li>M·∫∑c d√π <code>ThirdInterceptor</code> n√©m ra ngo·∫°i l·ªá trong <code>afterCompletion()</code>, n√≥ kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn vi·ªác th·ª±c thi <code>afterCompletion()</code> c·ªßa <code>FirstInterceptor</code>.</li></ul><h3 id="_2-api-users-current-user" tabindex="-1"><a class="header-anchor" href="#_2-api-users-current-user"><span><strong>‚ë° API <code>/users/current_user</code></strong></span></a></h3><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// UserController.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/current_user&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserVO</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> currentUser</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[currentUser]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> UserVO</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setUsername</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">UUID</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">randomUUID</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><p>Khi g·ªçi API n√†y, k·∫øt qu·∫£ log s·∫Ω nh∆∞ sau:</p><div class="language-plaintext" data-highlighter="shiki" data-ext="plaintext" data-title="plaintext" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>// ƒê·∫ßu ti√™n, theo th·ª© t·ª± c·ªßa chu·ªói HandlerInterceptor, c√°c ph∆∞∆°ng th·ª©c `#preHandle(...)` ƒë∆∞·ª£c th·ª±c thi.  </span></span>
<span class="line"><span>2019-11-17 12:48:37.357  INFO 28157 --- [nio-8080-exec-5] c.i.s.l.s.c.i.FirstInterceptor           : [preHandle][handler(public cn.iocoder.springboot.lab23.springmvc.vo.UserVO cn.iocoder.springboot.lab23.springmvc.controller.UserController.currentUser())]  </span></span>
<span class="line"><span>2019-11-17 12:48:37.357  INFO 28157 --- [nio-8080-exec-5] c.i.s.l.s.c.i.SecondInterceptor          : [preHandle][handler(public cn.iocoder.springboot.lab23.springmvc.vo.UserVO cn.iocoder.springboot.lab23.springmvc.controller.UserController.currentUser())]  </span></span>
<span class="line"><span></span></span>
<span class="line"><span>// Kh√¥ng c√≥ x·ª≠ l√Ω `handler` do `preHandle()` c·ªßa SecondInterceptor tr·∫£ v·ªÅ `false`.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// Ch·ªâ c√≥ `afterCompletion()` c·ªßa FirstInterceptor ƒë∆∞·ª£c th·ª±c thi.</span></span>
<span class="line"><span>2019-11-17 12:48:37.358  INFO 28157 --- [nio-8080-exec-5] c.i.s.l.s.c.i.FirstInterceptor           : [afterCompletion][handler(public cn.iocoder.springboot.lab23.springmvc.vo.UserVO cn.iocoder.springboot.lab23.springmvc.controller.UserController.currentUser())]</span></span></code></pre></div><h3 id="giai-thich-2" tabindex="-1"><a class="header-anchor" href="#giai-thich-2"><span>Gi·∫£i th√≠ch:</span></a></h3><ul><li>V√¨ <code>preHandle()</code> c·ªßa <code>SecondInterceptor</code> tr·∫£ v·ªÅ <code>false</code>, n√™n <code>handler</code> kh√¥ng ƒë∆∞·ª£c th·ª±c thi, v√† do ƒë√≥, <code>postHandle()</code> kh√¥ng ƒë∆∞·ª£c g·ªçi.</li><li>Ch·ªâ c√≥ <code>afterCompletion()</code> c·ªßa <code>FirstInterceptor</code> ƒë∆∞·ª£c th·ª±c thi.</li></ul><h3 id="_3-api-users-exception-03" tabindex="-1"><a class="header-anchor" href="#_3-api-users-exception-03"><span><strong>‚ë¢ API <code>/users/exception-03</code></strong></span></a></h3><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// UserController.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/exception-03&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> exception03</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[exception03]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    throw</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> ServiceException</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServiceExceptionEnum</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">USER_NOT_FOUND</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><p>Khi g·ªçi API n√†y, k·∫øt qu·∫£ log s·∫Ω nh∆∞ sau:</p><div class="language-plaintext" data-highlighter="shiki" data-ext="plaintext" data-title="plaintext" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>// ƒê·∫ßu ti√™n, theo th·ª© t·ª± c·ªßa chu·ªói HandlerInterceptor, c√°c ph∆∞∆°ng th·ª©c `#preHandle(...)` ƒë∆∞·ª£c th·ª±c thi.  </span></span>
<span class="line"><span>2019-11-17 12:54:45.029  INFO 28157 --- [nio-8080-exec-7] c.i.s.l.s.c.i.FirstInterceptor           : [preHandle][handler(public void cn.iocoder.springboot.lab23.springmvc.controller.UserController.exception03())]  </span></span>
<span class="line"><span>2019-11-17 12:54:45.029  INFO 28157 --- [nio-8080-exec-7] c.i.s.l.s.c.i.ThirdInterceptor           : [preHandle][handler(public void cn.iocoder.springboot.lab23.springmvc.controller.UserController.exception03())]  </span></span>
<span class="line"><span></span></span>
<span class="line"><span>// X·ª≠ l√Ω `handler` n√©m ra ngo·∫°i l·ªá.</span></span>
<span class="line"><span>2019-11-17 12:54:45.029  INFO 28157 --- [nio-8080-exec-7] c.i.s.l.s.controller.UserController      : [exception03]  </span></span>
<span class="line"><span></span></span>
<span class="line"><span>// Ch·ªâ c√≥ `afterCompletion()` ƒë∆∞·ª£c g·ªçi sau khi handler n√©m ra ngo·∫°i l·ªá.</span></span>
<span class="line"><span>2019-11-17 12:54:45.036  INFO 28157 --- [nio-8080-exec-7] c.i.s.l.s.c.i.ThirdInterceptor           : [afterCompletion][handler(public void cn.iocoder.springboot.lab23.springmvc.controller.UserController.exception03())]  </span></span>
<span class="line"><span>2019-11-17 12:54:45.037 ERROR 28157 --- [nio-8080-exec-7] o.s.web.servlet.HandlerExecutionChain    : HandlerInterceptor.afterCompletion threw exception  </span></span>
<span class="line"><span>java.lang.RuntimeException: C·ªë √Ω n√©m l·ªói</span></span></code></pre></div><h3 id="giai-thich-3" tabindex="-1"><a class="header-anchor" href="#giai-thich-3"><span>Gi·∫£i th√≠ch:</span></a></h3><ul><li>Do <code>handler</code> n√©m ra ngo·∫°i l·ªá, n√™n <code>postHandle()</code> kh√¥ng ƒë∆∞·ª£c g·ªçi.</li><li>Ch·ªâ c√≥ <code>afterCompletion()</code> c·ªßa c√°c interceptor ƒë∆∞·ª£c th·ª±c thi.</li></ul><h2 id="_6-4-ƒëoc-mo-rong" tabindex="-1"><a class="header-anchor" href="#_6-4-ƒëoc-mo-rong"><span>6.4 ƒê·ªçc M·ªü R·ªông</span></a></h2><p>D∆∞·ªõi ƒë√¢y, t√°c gi·∫£ ƒë√£ t·ªïng h·ª£p m·ªôt s·ªë l·ªõp tri·ªÉn khai <code>HandlerInterceptor</code> cho c√°c t√¨nh hu·ªëng kh√°c nhau, b·∫°n c√≥ th·ªÉ tham kh·∫£o t√πy theo nhu c·∫ßu:</p><ul><li><strong>Interceptor h·∫°n ch·∫ø t·ªëc ƒë·ªô</strong>: <a href="http://www.iocoder.cn/Fight/Spring-Boot-project-API-anti-brush-interface/?self" target="_blank" rel="noopener noreferrer">„ÄäNgƒÉn ch·∫∑n API b·ªã spam trong d·ª± √°n Spring Boot„Äã</a></li><li><strong>Interceptor ghi nh·∫≠t k√Ω truy c·∫≠p</strong>: <a href="https://github.com/YunaiV/onemall/blob/master/common/mall-spring-boot/src/main/java/cn/iocoder/mall/spring/boot/web/interceptor/AccessLogInterceptor.java" target="_blank" rel="noopener noreferrer"><code>AccessLogInterceptor.java</code></a></li><li><strong>Interceptor x√°c th·ª±c v√† ph√¢n quy·ªÅn ng∆∞·ªùi d√πng</strong>: <a href="https://github.com/YunaiV/onemall/blob/master/user/user-sdk/src/main/java/cn/iocoder/mall/user/sdk/interceptor/UserSecurityInterceptor.java" target="_blank" rel="noopener noreferrer"><code>UserSecurityInterceptor.java</code></a></li><li><strong>Interceptor x√°c th·ª±c v√† ph√¢n quy·ªÅn qu·∫£n tr·ªã vi√™n</strong>: <a href="https://github.com/YunaiV/onemall/blob/master/system/system-sdk/src/main/java/cn/iocoder/mall/admin/sdk/interceptor/AdminSecurityInterceptor.java" target="_blank" rel="noopener noreferrer"><code>AdminSecurityInterceptor.java</code></a></li></ul><p>N·∫øu b·∫°n c√≥ v√≠ d·ª• v·ªÅ <code>HandlerInterceptor</code> cho c√°c t√¨nh hu·ªëng kh√°c, h√£y ƒë·ªÉ l·∫°i b√¨nh lu·∫≠n cho t√°c gi·∫£.</p><h1 id="_7-servlet-filter-listener" tabindex="-1"><a class="header-anchor" href="#_7-servlet-filter-listener"><span>7. Servlet, Filter, Listener</span></a></h1><p>M·∫∑c d√π trong ph·∫ßn l·ªõn c√°c tr∆∞·ªùng h·ª£p, ch√∫ng ta kh√¥ng c·∫ßn s·ª≠ d·ª•ng tr·ª±c ti·∫øp c√°c th√†nh ph·∫ßn <code>java.servlet</code> trong SpringMVC, nh∆∞ng khi l√†m vi·ªác v·ªõi m·ªôt s·ªë th∆∞ vi·ªán c·ªßa b√™n th·ª© ba, h·ªç th∆∞·ªùng cung c·∫•p c√°c th√†nh ph·∫ßn trong <code>java.servlet</code>. Nguy√™n nh√¢n l√† h·ªç c·∫ßn cung c·∫•p c√°c th√†nh ph·∫ßn ph·ªï bi·∫øn v√† kh√¥ng th·ªÉ g·∫Øn k·∫øt qu√° ch·∫∑t v·ªõi SpringMVC.</p><p>V√≠ d·ª•, khi s·ª≠ d·ª•ng <a href="https://shiro.apache.org/" target="_blank" rel="noopener noreferrer">Shiro</a> ƒë·ªÉ th·ª±c hi·ªán c√°c ch·ª©c nƒÉng x√°c th·ª±c quy·ªÅn truy c·∫≠p, ch√∫ng ta c·∫ßn c·∫•u h√¨nh <code>ShiroFilterFactoryBean</code> m√† Shiro cung c·∫•p. ƒêi·ªÅu n√†y y√™u c·∫ßu s·ª≠ d·ª•ng c√°c th√†nh ph·∫ßn <code>Filter</code> m√† Shiro cung c·∫•p, thay v√¨ SpringMVC thu·∫ßn t√∫y.</p><p>Ch√∫ng ta c√≥ <strong>hai c√°ch</strong> ƒë·ªÉ c·∫•u h√¨nh <code>Servlet</code>, <code>Filter</code>, v√† <code>Listener</code> b·∫±ng m√£ Java:</p><ol><li>C·∫•u h√¨nh th√¥ng qua Bean</li><li>C·∫•u h√¨nh th√¥ng qua Annotation</li></ol><p>D∆∞·ªõi ƒë√¢y, ch√∫ng ta s·∫Ω c√πng t√¨m hi·ªÉu v√≠ d·ª• c·ªßa hai c√°ch c·∫•u h√¨nh n√†y.</p><blockquote><p><strong>L∆∞u √Ω</strong>: V√≠ d·ª• n√†y ƒë∆∞·ª£c x√¢y d·ª±ng d·ª±a tr√™n <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02" target="_blank" rel="noopener noreferrer">lab-springmvc-23-02</a>, ti·∫øp n·ªëi t·ª´ <a href="#">M·ª•c 6. B·ªô ch·∫∑n HandlerInterceptor</a>.</p></blockquote><h2 id="_7-1-cau-hinh-qua-bean" tabindex="-1"><a class="header-anchor" href="#_7-1-cau-hinh-qua-bean"><span>7.1 C·∫•u h√¨nh qua Bean</span></a></h2><p>Trong l·ªõp c·∫•u h√¨nh <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/config/SpringMVCConfiguration.java" target="_blank" rel="noopener noreferrer">SpringMVCConfiguration</a>, ch√∫ng ta s·∫Ω th√™m c·∫•u h√¨nh cho ba Bean l√† Servlet, Filter v√† Listener. M√£ ngu·ªìn nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// SpringMVCConfiguration.java  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ServletRegistrationBean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testServlet01</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ServletRegistrationBean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> servletRegistrationBean </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ServletRegistrationBean</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> HttpServlet</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() {  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        protected</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> doGet</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> req</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> resp</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ServletException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">            logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[doGet][uri: {}]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getRequestURI</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    })</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    servletRegistrationBean</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setUrlMappings</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Collections</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">singleton</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/test/01&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> servletRegistrationBean</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> FilterRegistrationBean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testFilter01</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    FilterRegistrationBean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> filterRegistrationBean </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> FilterRegistrationBean</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> Filter</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() {  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> doFilter</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> servletRequest</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServletResponse</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> servletResponse</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">FilterChain</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> filterChain</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ServletException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">            logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[doFilter]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">            filterChain</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">doFilter</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(servletRequest, servletResponse);  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    })</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    filterRegistrationBean</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setUrlPatterns</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Collections</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">singleton</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/test/*&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> filterRegistrationBean</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ServletListenerRegistrationBean</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testListener01</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ServletListenerRegistrationBean</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> ServletContextListener</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() {  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> contextInitialized</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServletContextEvent</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> sce</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">            logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[contextInitialized]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> contextDestroyed</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServletContextEvent</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> sce</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    })</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Trong Spring Boot, ƒë√£ cung c·∫•p c√°c l·ªõp <a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/web/servlet/ServletRegistrationBean.java" target="_blank" rel="noopener noreferrer">ServletRegistrationBean</a> ƒë·ªÉ c·∫•u h√¨nh Servlet Bean, <a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/web/servlet/FilterRegistrationBean.java" target="_blank" rel="noopener noreferrer">FilterRegistrationBean</a> ƒë·ªÉ c·∫•u h√¨nh Filter Bean v√† <a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/web/servlet/ServletListenerRegistrationBean.java" target="_blank" rel="noopener noreferrer">ServletListenerRegistrationBean</a> ƒë·ªÉ c·∫•u h√¨nh Listener Bean.</li><li>·ªû ƒë√¢y, ch√∫ng ta s·ª≠ d·ª•ng l·ªõp n·ªôi b·ªô ƒë·ªÉ v√≠ d·ª• ƒë∆°n gi·∫£n h∆°n. Tuy nhi√™n, trong th·ª±c t·∫ø, h√£y ƒë·ªãnh nghƒ©a c√°c l·ªõp ri√™ng bi·ªát ƒë·ªÉ d·ªÖ qu·∫£n l√Ω h∆°n.</li></ul><h2 id="_7-2-cau-hinh-qua-chu-thich" tabindex="-1"><a class="header-anchor" href="#_7-2-cau-hinh-qua-chu-thich"><span>7.2 C·∫•u h√¨nh qua ch√∫ th√≠ch</span></a></h2><p>Trong c√°c t√≠nh nƒÉng m·ªõi c·ªßa Servlet 3.0, ƒë√£ cung c·∫•p ba ch√∫ th√≠ch l√† <a href="https://github.com/javaee/servlet-spec/blob/master/src/main/java/javax/servlet/annotation/WebServlet.java" target="_blank" rel="noopener noreferrer"><code>@WebServlet</code></a>„ÄÅ<a href="https://github.com/javaee/servlet-spec/blob/master/src/main/java/javax/servlet/annotation/WebFilter.java" target="_blank" rel="noopener noreferrer"><code>@WebFilter</code></a> v√† <a href="https://github.com/javaee/servlet-spec/blob/master/src/main/java/javax/servlet/annotation/WebListener.java" target="_blank" rel="noopener noreferrer"><code>@WebListener</code></a> ƒë·ªÉ d·ªÖ d√†ng c·∫•u h√¨nh Servlet, Filter v√† Listener.</p><p>Trong Spring Boot, ch√∫ng ta ch·ªâ c·∫ßn th√™m ch√∫ th√≠ch <a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/web/servlet/ServletComponentScan.java" target="_blank" rel="noopener noreferrer"><code>@ServletComponentScan</code></a> v√†o l·ªõp Application, ƒë·ªÉ k√≠ch ho·∫°t vi·ªác qu√©t c√°c ch√∫ th√≠ch <code>@WebServlet</code>, <code>@WebFilter</code>, <code>@WebListener</code>. Tuy nhi√™n, c·∫ßn <strong>l∆∞u √Ω</strong> r·∫±ng ƒëi·ªÅu n√†y ch·ªâ c√≥ hi·ªáu l·ª±c khi s·ª≠ d·ª•ng Web Server <strong>nh√∫ng</strong>.</p><p>Trong g√≥i <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/core/servlet" target="_blank" rel="noopener noreferrer"><code>cn.iocoder.springboot.lab23.springmvc.core.servlet</code></a>, ch√∫ng ta ƒë√£ t·∫°o ba v√≠ d·ª•. M√£ ngu·ªìn nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// TestServlet02.java  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">WebServlet</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">urlPatterns</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;/test/02&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> TestServlet02</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> HttpServlet</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Logger</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> logger </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getLogger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> doGet</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> req</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> resp</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ServletException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[doGet][uri: {}]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getRequestURI</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// TestFilter02.java  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">WebFilter</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/test/*&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> TestFilter02</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Filter</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Logger</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> logger </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getLogger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> doFilter</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServletRequest</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> servletRequest</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServletResponse</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> servletResponse</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">FilterChain</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> filterChain</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ServletException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[doFilter]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        filterChain</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">doFilter</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(servletRequest, servletResponse);  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// TestServletContextListener02.java  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">WebListener</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> TestServletContextListener02</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ServletContextListener</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Logger</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> logger </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getLogger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> contextInitialized</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServletContextEvent</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> sce</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[contextInitialized]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> contextDestroyed</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServletContextEvent</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> sce</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_8-cors-cross-origin-resource-sharing" tabindex="-1"><a class="header-anchor" href="#_8-cors-cross-origin-resource-sharing"><span>8. CORS (Cross-Origin Resource Sharing)</span></a></h1><blockquote><p>M√£ v√≠ d·ª• t∆∞∆°ng ·ª©ng v·ªõi kho l∆∞u tr·ªØ: <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02" target="_blank" rel="noopener noreferrer">lab-springmvc-23-02</a>.</p></blockquote><p>Sau khi t√°ch bi·ªát frontend v√† backend, ch√∫ng ta s·∫Ω g·∫∑p ph·∫£i v·∫•n ƒë·ªÅ li√™n quan ƒë·∫øn CORS. V√≠ d·ª•, frontend n·∫±m ·ªü mi·ªÅn <a href="http://www.iocoder.cn" target="_blank" rel="noopener noreferrer">http://www.iocoder.cn</a> trong khi API backend ·ªü mi·ªÅn <a href="http://api.iocoder.cn" target="_blank" rel="noopener noreferrer">http://api.iocoder.cn</a>.</p><p>ƒê·ªëi v·ªõi nh·ªØng b·∫°n ch∆∞a hi·ªÉu r√µ v·ªÅ CORS, c√≥ th·ªÉ tham kh·∫£o b√†i vi·∫øt <a href="https://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener noreferrer">T√¨m hi·ªÉu v·ªÅ CORS</a> c·ªßa t√°c gi·∫£ Ruanyu. üòà T·∫•t nhi√™n, b·∫°n c≈©ng c√≥ th·ªÉ ti·∫øp t·ª•c ƒë·ªçc b√†i vi·∫øt n√†y.</p><p>C√≥ nhi·ªÅu c√°ch ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ CORS, ch·∫≥ng h·∫°n nh∆∞ c·∫•u h√¨nh c√°c tham s·ªë x·ª≠ l√Ω y√™u c·∫ßu CORS tr√™n Nginx. Hay trong tr∆∞·ªùng h·ª£p c√≥ d·ªãch v·ª• gateway trong d·ª± √°n, b·∫°n c√≥ th·ªÉ c·∫•u h√¨nh ƒë·ªìng nh·∫•t. Tuy nhi√™n, v√¨ b√†i vi·∫øt n√†y t·∫≠p trung v√†o Spring Boot v√† Spring MVC, n√™n ch√∫ng ta s·∫Ω ch·ªâ s·ª≠ d·ª•ng Spring MVC ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ CORS. Hi·ªán c√≥ ba gi·∫£i ph√°p:</p><ul><li><strong>Gi·∫£i ph√°p 1</strong>: S·ª≠ d·ª•ng ch√∫ th√≠ch <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/bind/annotation/CrossOrigin.java" target="_blank" rel="noopener noreferrer"><code>@CrossOrigin</code></a> ƒë·ªÉ c·∫•u h√¨nh cho t·ª´ng API.</li><li><strong>Gi·∫£i ph√°p 2</strong>: S·ª≠ d·ª•ng b·∫£ng <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-webmvc/src/main/java/org/springframework/web/servlet/config/annotation/CorsRegistry.java" target="_blank" rel="noopener noreferrer"><code>CorsRegistry.java</code></a> ƒë·ªÉ ƒëƒÉng k√Ω cho t·ª´ng API.</li><li><strong>Gi·∫£i ph√°p 3</strong>: S·ª≠ d·ª•ng <strong>b·ªô l·ªçc</strong> <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/filter/CorsFilter.java" target="_blank" rel="noopener noreferrer"><code>CorsFilter.java</code></a> ƒë·ªÉ x·ª≠ l√Ω c√°c y√™u c·∫ßu CORS.</li></ul><p>Trong ƒë√≥, gi·∫£i ph√°p 1 v√† gi·∫£i ph√°p 2 v·ªÅ b·∫£n ch·∫•t l√† gi·ªëng nhau, ch·ªâ kh√°c nhau ·ªü c√°ch c·∫•u h√¨nh. Nh·ªØng b·∫°n mu·ªën hi·ªÉu nguy√™n l√Ω b√™n d∆∞·ªõi c√≥ th·ªÉ tham kh·∫£o <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-webmvc/src/main/java/org/springframework/web/servlet/handler/AbstractHandlerMapping.java#L561-L582" target="_blank" rel="noopener noreferrer">CorsInterceptor</a> <strong>b·ªô l·ªçc</strong>.</p><blockquote><p>L∆∞u √Ω: V√≠ d·ª• n√†y ƒë∆∞·ª£c ph√°t tri·ªÉn d·ª±a tr√™n <a href="#">„Äå7. Servlet, Filter, Listener„Äç</a> trong <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02" target="_blank" rel="noopener noreferrer">lab-springmvc-23-02</a>.</p></blockquote><h2 id="_8-1-crossorigin" tabindex="-1"><a class="header-anchor" href="#_8-1-crossorigin"><span>8.1 @CrossOrigin</span></a></h2><p>Ch√∫ th√≠ch <code>@CrossOrigin</code> ƒë∆∞·ª£c th√™m v√†o l·ªõp ho·∫∑c ph∆∞∆°ng th·ª©c ƒë·ªÉ ƒë√°nh d·∫•u th√¥ng tin CORS cho API t∆∞∆°ng ·ª©ng.</p><p>C√°c <strong>thu·ªôc t√≠nh th∆∞·ªùng d√πng</strong> c·ªßa ch√∫ th√≠ch <code>@CrossOrigin</code> nh∆∞ sau:</p><ul><li>Thu·ªôc t√≠nh <code>origins</code>: thi·∫øt l·∫≠p ngu·ªìn y√™u c·∫ßu ƒë∆∞·ª£c ph√©p. ƒê√¢y l√† m·ªôt m·∫£ng <code>[]</code> c√≥ th·ªÉ ch·ª©a nhi·ªÅu ngu·ªìn y√™u c·∫ßu. Gi√° tr·ªã m·∫∑c ƒë·ªãnh l√† <code>*</code>.</li><li>Thu·ªôc t√≠nh <code>value</code>: gi·ªëng nh∆∞ thu·ªôc t√≠nh <code>origins</code>, ƒë√¢y l√† b√≠ danh c·ªßa n√≥.</li><li>Thu·ªôc t√≠nh <code>allowCredentials</code>: x√°c ƒë·ªãnh xem c√≥ cho ph√©p y√™u c·∫ßu t·ª´ ph√≠a client g·ª≠i Cookie hay kh√¥ng. Gi√° tr·ªã m·∫∑c ƒë·ªãnh l√† <code>false</code>, kh√¥ng cho ph√©p g·ª≠i Cookie.</li><li>Thu·ªôc t√≠nh <code>maxAge</code>: th·ªùi gian hi·ªáu l·ª±c c·ªßa y√™u c·∫ßu ki·ªÉm tra tr∆∞·ªõc (preflight request) trong ƒë∆°n v·ªã gi√¢y. Gi√° tr·ªã m·∫∑c ƒë·ªãnh l√† 1800 gi√¢y.</li></ul><p>C√°c <strong>thu·ªôc t√≠nh √≠t ƒë∆∞·ª£c s·ª≠ d·ª•ng</strong> c·ªßa ch√∫ th√≠ch <code>@CrossOrigin</code> nh∆∞ sau:</p><ul><li>Thu·ªôc t√≠nh <code>methods</code>: thi·∫øt l·∫≠p c√°c ph∆∞∆°ng th·ª©c y√™u c·∫ßu ƒë∆∞·ª£c ph√©p. ƒê√¢y c≈©ng l√† m·ªôt m·∫£ng <code>[]</code> c√≥ th·ªÉ ch·ª©a nhi·ªÅu ph∆∞∆°ng th·ª©c y√™u c·∫ßu. Gi√° tr·ªã m·∫∑c ƒë·ªãnh l√† <code>GET + POST</code>.</li><li>Thu·ªôc t√≠nh <code>allowedHeaders</code>: c√°c header y√™u c·∫ßu ƒë∆∞·ª£c ph√©p. ƒê√¢y c≈©ng l√† m·ªôt m·∫£ng <code>[]</code> c√≥ th·ªÉ ch·ª©a nhi·ªÅu header. Gi√° tr·ªã m·∫∑c ƒë·ªãnh l√† <code>*</code>.</li><li>Thu·ªôc t√≠nh <code>exposedHeaders</code>: c√°c header ph·∫£n h·ªìi ƒë∆∞·ª£c ph√©p. ƒê√¢y c≈©ng l√† m·ªôt m·∫£ng <code>[]</code> c√≥ th·ªÉ ch·ª©a nhi·ªÅu header. Gi√° tr·ªã m·∫∑c ƒë·ªãnh l√† <code>*</code>.</li></ul><p>Trong h·∫ßu h·∫øt c√°c tr∆∞·ªùng h·ª£p, b·∫°n ch·ªâ c·∫ßn th√™m ch√∫ th√≠ch <code>@CrossOrigin</code> l√™n <strong>m·ªói</strong> Controller. Tuy nhi√™n, n·∫øu m·ªôt API c·ª• th·ªÉ mu·ªën c·∫•u h√¨nh t√πy ch·ªânh, b·∫°n c√≥ th·ªÉ th√™m ch√∫ th√≠ch n√†y l√™n ph∆∞∆°ng th·ª©c. V√≠ d·ª• nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// TestController.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RestController</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RequestMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/test&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">CrossOrigin</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">origins</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;*&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> allowCredentials</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;true&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Cho ph√©p t·∫•t c·∫£ ngu·ªìn, cho ph√©p g·ª≠i Cookie  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> TestController</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * L·∫•y ng∆∞·ªùi d√πng theo ID ƒë∆∞·ª£c ch·ªâ ƒë·ªãnh  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     *  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">@return</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> Ng∆∞·ªùi d√πng  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/get&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">CrossOrigin</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">allowCredentials</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;false&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Cho ph√©p t·∫•t c·∫£ ngu·ªìn, kh√¥ng cho ph√©p g·ª≠i Cookie  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserVO</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> get</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> UserVO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setUsername</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">UUID</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">randomUUID</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Trong h·∫ßu h·∫øt c√°c tr∆∞·ªùng h·ª£p, b·∫°n ch·ªâ c·∫ßn th√™m <code>@CrossOrigin(allowCredentials = &quot;true&quot;)</code> l√™n Controller l√† ƒë·ªß.</strong></p><p><strong>M·ªôt s·ªë v·∫•n ƒë·ªÅ c·∫ßn l∆∞u √Ω</strong></p><p>Khi frontend s·ª≠ d·ª•ng th∆∞ vi·ªán m·∫°ng tu√¢n th·ªß ti√™u chu·∫©n CORS, ch·∫≥ng h·∫°n nh∆∞ th∆∞ vi·ªán m·∫°ng ph·ªï bi·∫øn trong Vue l√† <a href="https://github.com/axios/axios" target="_blank" rel="noopener noreferrer">axios</a>, khi g·ª≠i <a href="https://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener noreferrer">y√™u c·∫ßu kh√¥ng ƒë∆°n gi·∫£n</a>, n√≥ s·∫Ω t·ª± ƒë·ªông g·ª≠i tr∆∞·ªõc m·ªôt y√™u c·∫ßu <code>OPTIONS</code> ƒë·ªÉ x√°c nh·∫≠n xem server c√≥ cho ph√©p y√™u c·∫ßu nh∆∞ v·∫≠y hay kh√¥ng. Do ƒë√≥, y√™u c·∫ßu n√†y s·∫Ω ƒë∆∞·ª£c x·ª≠ l√Ω b·ªüi b·ªô l·ªçc c·ªßa Spring MVC.</p><p>L√∫c n√†y, n·∫øu b·ªô l·ªçc c·ªßa ch√∫ng ta cho r·∫±ng <code>handler</code> <strong>ch·∫Øc ch·∫Øn</strong> l√† lo·∫°i <code>HandlerMethod</code>, s·∫Ω d·∫´n ƒë·∫øn l·ªói. Ch·∫≥ng h·∫°n, trong b·ªô l·ªçc <a href="https://github.com/YunaiV/onemall/blob/master/user/user-sdk/src/main/java/cn/iocoder/mall/user/sdk/interceptor/UserSecurityInterceptor.java" target="_blank" rel="noopener noreferrer">UserSecurityInterceptor</a>, n√≥ s·∫Ω coi <code>handler</code> l√† lo·∫°i <code>HandlerMethod</code> v√† sau ƒë√≥ l·∫•y th√¥ng tin ch√∫ th√≠ch <code>@RequiresLogin</code> ƒë·ªÉ x√°c ƒë·ªãnh xem c√≥ c·∫ßn ƒëƒÉng nh·∫≠p hay kh√¥ng. Nh∆∞ng th·ª±c t·∫ø, l√∫c n√†y <code>handler</code> l·∫°i l√† lo·∫°i <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-webmvc/src/main/java/org/springframework/web/servlet/handler/AbstractHandlerMapping.java#L539-L558" target="_blank" rel="noopener noreferrer">PreFlightHandler</a>, do ƒë√≥ s·∫Ω n√©m ra ngo·∫°i l·ªá. Nh∆∞ h√¨nh d∆∞·ªõi ƒë√¢y:</p><figure><img src="https://static.iocoder.cn/images/Spring-Boot/2019-11-17/03.png" alt="getCorsHandlerExecutionChain" tabindex="0" loading="lazy"><figcaption>getCorsHandlerExecutionChain</figcaption></figure><p>Trong tr∆∞·ªùng h·ª£p n√†y, c√≥ hai gi·∫£i ph√°p:</p><ol><li>Ki·ªÉm tra t·ª´ng b·ªô l·ªçc ƒë·ªÉ x√°c nh·∫≠n xem c√≥ ph·∫£i ph·ª• thu·ªôc v√†o logic cho r·∫±ng <code>handler</code> l√† <code>HandlerMethod</code> hay kh√¥ng v√† th·ª±c hi·ªán s·ª≠a ch·ªØa.</li><li>Kh√¥ng s·ª≠ d·ª•ng gi·∫£i ph√°p n√†y m√† thay v√†o ƒë√≥ √°p d·ª•ng <a href="#">„Äå8.3 CorsFilter„Äç</a> ƒë·ªÉ tr√°nh vi·ªác y√™u c·∫ßu <code>OPTIONS</code> ƒëi qua b·ªô l·ªçc.</li></ol><p>R√µ r√†ng, gi·∫£i ph√°p <code>1)</code> c√≥ chi ph√≠ cao h∆°n m·ªôt ch√∫t, v√¨ v·∫≠y trong h·∫ßu h·∫øt c√°c tr∆∞·ªùng h·ª£p, khuy·∫øn ngh·ªã s·ª≠ d·ª•ng <code>2)</code>. Hi·ªán t·∫°i, d·ª± √°n c·ªßa t√¥i c≈©ng √°p d·ª•ng ph∆∞∆°ng ph√°p <a href="#">„Äå8.3 CorsFilter„Äç</a>.</p><p>üòà Trong b√†i vi·∫øt <a href="https://segmentfault.com/a/1190000010348077" target="_blank" rel="noopener noreferrer">„Ää„ÄêSpringMVC„Äë‰∏éÊùÉÈôêÊã¶Êà™Âô®ÂÜ≤Á™ÅÂØºËá¥ÁöÑ Cors Ë∑®ÂüüËÆæÁΩÆÂ§±ÊïàÈóÆÈ¢ò„Äã</a>, b·∫°n c≈©ng c√≥ th·ªÉ th·∫•y m·ªôt nh√† ph√°t tri·ªÉn g·∫∑p ph·∫£i v·∫•n ƒë·ªÅ t∆∞∆°ng t·ª±.</p><h2 id="_8-2-corsregistry" tabindex="-1"><a class="header-anchor" href="#_8-2-corsregistry"><span>8.2 CorsRegistry</span></a></h2><p>R√µ r√†ng, vi·ªác c·∫•u h√¨nh ch√∫ th√≠ch <code>@CrossOrigin</code> tr√™n m·ªói Controller l√† m·ªôt c√¥ng vi·ªác kh√° ph·ª©c t·∫°p. V√¨ v·∫≠y, trong nhi·ªÅu tr∆∞·ªùng h·ª£p, ch√∫ng ta s·∫Ω ch·ªçn c·∫•u h√¨nh th√¥ng qua <code>CorsRegistry</code>.</p><p>H√£y s·ª≠a ƒë·ªïi l·ªõp c·∫•u h√¨nh <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/config/SpringMVCConfiguration.java" target="_blank" rel="noopener noreferrer">SpringMVCConfiguration</a> ƒë·ªÉ th√™m c·∫•u h√¨nh li√™n quan ƒë·∫øn <code>CorsRegistry</code>. D∆∞·ªõi ƒë√¢y l√† ƒëo·∫°n m√£:</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// SpringMVCConfiguration.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> addCorsMappings</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">CorsRegistry</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> registry) {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // Th√™m c·∫•u h√¨nh CORS to√†n c·∫ßu  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    registry</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">addMapping</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/**&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // Kh·ªõp v·ªõi t·∫•t c·∫£ URL, t∆∞∆°ng ƒë∆∞∆°ng v·ªõi c·∫•u h√¨nh to√†n c·∫ßu  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">allowedOrigins</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;*&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // Cho ph√©p t·∫•t c·∫£ ngu·ªìn y√™u c·∫ßu  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">allowCredentials</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // Cho ph√©p g·ª≠i Cookie  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">allowedMethods</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;*&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // Cho ph√©p t·∫•t c·∫£ ph∆∞∆°ng th·ª©c y√™u c·∫ßu  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">allowedHeaders</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;*&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // Cho ph√©p t·∫•t c·∫£ header y√™u c·∫ßu  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//            .exposedHeaders(&quot;*&quot;) // Cho ph√©p t·∫•t c·∫£ header ph·∫£n h·ªìi  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">maxAge</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1800L</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // Th·ªùi gian hi·ªáu l·ª±c 1800 gi√¢y, t·ª©c 2 gi·ªù  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><ul><li>·ªû ƒë√¢y, c·∫•u h√¨nh ƒë∆∞·ªùng d·∫´n kh·ªõp l√† <code>/**</code>, cho ph√©p c·∫•u h√¨nh CORS to√†n c·∫ßu.</li><li>N·∫øu b·∫°n mu·ªën c·∫•u h√¨nh CORS cho m·ªôt ƒë∆∞·ªùng d·∫´n c·ª• th·ªÉ, c√≥ th·ªÉ s·ª≠ d·ª•ng ph∆∞∆°ng th·ª©c <code>CorsRegistry#addMapping(String pathPattern)</code> ƒë·ªÉ th√™m c·∫•u h√¨nh CORS.</li><li>N·∫øu b·∫°n mu·ªën an to√†n h∆°n, c√≥ th·ªÉ ch·ªâ ƒë·ªãnh c√°c ƒë·ªãa ch·ªâ mi·ªÅn frontend cho thu·ªôc t√≠nh <code>origins</code>.</li></ul><p>Ph∆∞∆°ng ph√°p n√†y c≈©ng s·∫Ω g·∫∑p ph·∫£i nh·ªØng v·∫•n ƒë·ªÅ t∆∞∆°ng t·ª± nh∆∞ trong ph·∫ßn <a href="#">„Äå8.1 @CrossOrigin„Äç</a>, v√¨ hai ph∆∞∆°ng ph√°p n√†y c√≥ c√°ch tri·ªÉn khai t∆∞∆°ng t·ª±. V√¨ v·∫≠y, h√£y ti·∫øp t·ª•c xem x√©t ph∆∞∆°ng ph√°p <a href="#">„Äå8.3 CorsFilter„Äç</a>.</p><h2 id="_8-3-corsfilter" tabindex="-1"><a class="header-anchor" href="#_8-3-corsfilter"><span>8.3 CorsFilter</span></a></h2><p>Trong <a href="https://github.com/spring-projects/spring-framework/tree/master/spring-web" target="_blank" rel="noopener noreferrer">Spring Web</a>, ƒë√£ cung c·∫•p s·∫µn b·ªô l·ªçc <code>CorsFilter</code> ƒë·ªÉ x·ª≠ l√Ω CORS.</p><p>C√°ch c·∫•u h√¨nh r·∫•t ƒë∆°n gi·∫£n. V√¨ ƒë√¢y l√† m·ªôt b·ªô l·ªçc (Filter), ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng c√°ch <a href="#">„Äå7.1 C·∫•u h√¨nh qua Bean„Äç</a> ƒë·ªÉ c·∫•u h√¨nh. Do ƒë√≥, h√£y ch·ªânh s·ª≠a l·ªõp c·∫•u h√¨nh <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/config/SpringMVCConfiguration.java" target="_blank" rel="noopener noreferrer">SpringMVCConfiguration</a> ƒë·ªÉ th√™m c·∫•u h√¨nh li√™n quan ƒë·∫øn <code>CorsFilter</code>. D∆∞·ªõi ƒë√¢y l√† ƒëo·∫°n m√£:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// SpringMVCConfiguration.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> FilterRegistrationBean</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">CorsFilter</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> corsFilter</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // T·∫°o UrlBasedCorsConfigurationSource, gi·ªëng nh∆∞ CorsRegistry  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    UrlBasedCorsConfigurationSource</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> source </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> UrlBasedCorsConfigurationSource</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // T·∫°o CorsConfiguration, t∆∞∆°ng ƒë∆∞∆°ng v·ªõi th√¥ng tin CorsRegistration  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    CorsConfiguration</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> config </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> CorsConfiguration</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    config</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setAllowedOrigins</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Collections</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">singletonList</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;*&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // Cho ph√©p t·∫•t c·∫£ ngu·ªìn y√™u c·∫ßu  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    config</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setAllowCredentials</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // Cho ph√©p g·ª≠i Cookie  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    config</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">addAllowedMethod</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;*&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // Cho ph√©p t·∫•t c·∫£ ph∆∞∆°ng th·ª©c y√™u c·∫ßu  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    config</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setAllowedHeaders</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Collections</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">singletonList</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;*&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // Cho ph√©p t·∫•t c·∫£ header y√™u c·∫ßu  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // config.setExposedHeaders(Collections.singletonList(&quot;*&quot;)); // Cho ph√©p t·∫•t c·∫£ header ph·∫£n h·ªìi  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    config</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setMaxAge</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1800L</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // Th·ªùi gian hi·ªáu l·ª±c 1800 gi√¢y, t·ª©c 2 gi·ªù  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    source</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">registerCorsConfiguration</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/**&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, config);</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // T·∫°o ƒë·ªëi t∆∞·ª£ng FilterRegistrationBean  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    FilterRegistrationBean</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">CorsFilter</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> bean </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> FilterRegistrationBean</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">            new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> CorsFilter</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(source))</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // T·∫°o b·ªô l·ªçc CorsFilter  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    bean</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setOrder</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // Thi·∫øt l·∫≠p th·ª© t·ª±. Th·ª© t·ª± n√†y r·∫•t quan tr·ªçng, n√™n h√£y ƒë·∫∑t ·ªü v·ªã tr√≠ ƒë·∫ßu ti√™n  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> bean</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>T√¥i ƒë√£ th√™m c√°c ch√∫ th√≠ch chi ti·∫øt, c√°c b·∫°n t·ª± xem nh√©. V·ªÅ hi·ªáu ·ª©ng, n√≥ gi·ªëng nh∆∞ ph∆∞∆°ng ph√°p <a href="#">„Äå8.2 CorsRegistry„Äç</a>.</li></ul><p>ƒê·∫øn ƒë√¢y, ch√∫ng ta ƒë√£ h·ªçc xong ba c√°ch c·∫•u h√¨nh CORS trong SpringMVC. <strong>K·∫øt lu·∫≠n l√†, n√™n s·ª≠ d·ª•ng ph∆∞∆°ng ph√°p <a href="#">„Äå8.3 CorsFilter„Äç</a></strong>. üòà C·∫£m th·∫•y m√¨nh n√≥i h∆°i nhi·ªÅu r·ªìi. Cu·ªëi c√πng, t√¥i mu·ªën gi·ªõi thi·ªáu m·ªôt b√†i vi·∫øt m√† t√¥i th·∫•y vi·∫øt r·∫•t hay: <a href="https://segmentfault.com/a/1190000019485883" target="_blank" rel="noopener noreferrer">„ÄäSpring ÈáåÈÇ£‰πàÂ§öÁßç CORS ÁöÑÈÖçÁΩÆÊñπÂºèÔºåÂà∞Â∫ïÊúâ‰ªÄ‰πàÂå∫„Äã</a>.</p><h1 id="_9-httpmessageconverter-chuyen-ƒëoi-noi-dung-tin-nhan" tabindex="-1"><a class="header-anchor" href="#_9-httpmessageconverter-chuyen-ƒëoi-noi-dung-tin-nhan"><span>9. HttpMessageConverter chuy·ªÉn ƒë·ªïi n·ªôi dung tin nh·∫Øn</span></a></h1><blockquote><p>M√£ ngu·ªìn n·∫±m trongÔºö<a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02" target="_blank" rel="noopener noreferrer">lab-springmvc-23-02</a>„ÄÇ</p></blockquote><p>Trong Spring MVC, ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng hai ch√∫ th√≠ch <code>@RequestBody</code> v√† <code>@ResponseBody</code> ƒë·ªÉ th·ª±c hi·ªán vi·ªác <strong>chuy·ªÉn ƒë·ªïi n·ªôi dung y√™u c·∫ßu th√†nh ƒë·ªëi t∆∞·ª£ng</strong> v√† <strong>ƒë·ªëi t∆∞·ª£ng th√†nh n·ªôi dung ph·∫£n h·ªìi</strong>. C∆° ch·∫ø chuy·ªÉn ƒë·ªïi linh ho·∫°t n√†y ƒë∆∞·ª£c th·ª±c hi·ªán b·ªüi <code>HttpMessageConverter</code> ƒë∆∞·ª£c gi·ªõi thi·ªáu trong Spring 3.x, t·ª©c l√† c∆° ch·∫ø chuy·ªÉn ƒë·ªïi tin nh·∫Øn.</p><p>V·ªõi gi·∫£i th√≠ch nh∆∞ v·∫≠y, c√≥ l·∫Ω b·∫°n v·∫´n ch∆∞a th·ª±c s·ª± th·∫•u hi·ªÉu. üòú Trong v√≠ d·ª• tr√™n, ch√∫ng ta ƒë√£ th·∫•y r·∫±ng khi tr·∫£ v·ªÅ m·ªôt ƒë·ªëi t∆∞·ª£ng <code>UserVO</code>, n√≥ cu·ªëi c√πng ƒë∆∞·ª£c xu·∫•t ra d∆∞·ªõi d·∫°ng chu·ªói JSON cho ph√≠a tr∆∞·ªõc, ƒëi·ªÅu n√†y ƒë∆∞·ª£c th·ª±c hi·ªán b·ªüi <code>MappingJackson2HttpMessageConverter</code>, b·ªô chuy·ªÉn ƒë·ªïi tin nh·∫Øn chuy·ªÉn ƒë·ªïi ƒë·ªëi t∆∞·ª£ng <code>UserVO</code> th√†nh chu·ªói JSON ƒë·ªÉ tr·∫£ v·ªÅ ph√≠a tr∆∞·ªõc. üòà B√¢y gi·ªù b·∫°n ƒë√£ hi·ªÉu h∆°n m·ªôt ch√∫t ch∆∞a?</p><p>Trong m·ªôt s·ªë t√¨nh hu·ªëng nghi·ªáp v·ª•, khi ph√≠a tr∆∞·ªõc g·ª≠i c√°c tham s·ªë ƒë·∫øn API backend c√≥ th·ªÉ ph·ª©c t·∫°p, c√≥ th·ªÉ ch√∫ng ta mu·ªën s·ª≠ d·ª•ng ƒë·ªãnh d·∫°ng JSON ƒë·ªÉ g·ª≠i ƒë·∫øn API backend. L√∫c n√†y, ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng b·ªô chuy·ªÉn ƒë·ªïi <code>MappingJackson2HttpMessageConverter</code> ƒë·ªÉ chuy·ªÉn ƒë·ªïi chu·ªói JSON th√†nh ƒë·ªëi t∆∞·ª£ng t∆∞∆°ng ·ª©ng. üòà C√≥ ph·∫£i m·ªçi th·ª© ƒë√£ tr·ªü n√™n r√µ r√†ng h∆°n ch∆∞a?</p><p>H√£y c√πng xem qua giao di·ªán <code>HttpMessageConverter</code>, d∆∞·ªõi ƒë√¢y l√† m√£ ngu·ªìn:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// HttpMessageConverter.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Ki·ªÉm tra xem c√≥ th·ªÉ ƒë·ªçc lo·∫°i n·ªôi dung mediaType c·ª• th·ªÉ, chuy·ªÉn ƒë·ªïi th√†nh ƒë·ªëi t∆∞·ª£ng clazz hay kh√¥ng  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> canRead</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> clazz</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Nullable</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> MediaType</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> mediaType)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// ƒê·ªçc n·ªôi dung y√™u c·∫ßu, chuy·ªÉn ƒë·ªïi th√†nh ƒë·ªëi t∆∞·ª£ng clazz  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> read</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> extends T</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> clazz</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> HttpInputMessage</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> inputMessage)  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">			throws IOException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> HttpMessageNotReadableException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Ki·ªÉm tra xem c√≥ th·ªÉ tu·∫ßn t·ª± h√≥a ƒë·ªëi t∆∞·ª£ng clazz th√†nh lo·∫°i n·ªôi dung mediaType hay kh√¥ng  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> canWrite</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> clazz</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Nullable</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> MediaType</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> mediaType)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Tu·∫ßn t·ª± h√≥a ƒë·ªëi t∆∞·ª£ng clazz th√†nh lo·∫°i n·ªôi dung contentType v√† ghi v√†o ph·∫£n h·ªìi.  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> write</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> t</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Nullable</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> MediaType</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> contentType</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> HttpOutputMessage</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> outputMessage)  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">			throws IOException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> HttpMessageNotWritableException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// L·∫•y lo·∫°i n·ªôi dung m√† HttpMessageConverter c√≥ th·ªÉ h·ªó tr·ª£.  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">List</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">MediaType</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> getSupportedMediaTypes</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Trong <strong>y√™u c·∫ßu</strong>, ch√∫ng ta ch·ªâ ƒë·ªãnh lo·∫°i n·ªôi dung c·ªßa n·ªôi dung y√™u c·∫ßu (Request Body) th√¥ng qua ti√™u ƒë·ªÅ <code>Content-Type</code>. Khi ƒë√≥, Spring MVC s·∫Ω ki·ªÉm tra m·∫£ng <strong>HttpMessageConverter</strong> c·ªßa m√¨nh b·∫±ng ph∆∞∆°ng th·ª©c <code>#canRead(clazz, mediaType)</code> ƒë·ªÉ x√°c ƒë·ªãnh xem c√≥ th·ªÉ ƒë·ªçc lo·∫°i n·ªôi dung <code>mediaType</code> c·ª• th·ªÉ hay kh√¥ng, v√† chuy·ªÉn ƒë·ªïi th√†nh ƒë·ªëi t∆∞·ª£ng <code>clazz</code>. N·∫øu c√≥ th·ªÉ, n√≥ s·∫Ω g·ªçi ph∆∞∆°ng th·ª©c <code>#read(Class&lt;? extends T&gt; clazz, HttpInputMessage inputMessage)</code> ƒë·ªÉ ƒë·ªçc n·ªôi dung y√™u c·∫ßu v√† chuy·ªÉn ƒë·ªïi th√†nh ƒë·ªëi t∆∞·ª£ng <code>clazz</code>.</p></li><li><p>Trong <strong>ph·∫£n h·ªìi</strong>, ch√∫ng ta ch·ªâ ƒë·ªãnh lo·∫°i n·ªôi dung c·ªßa n·ªôi dung ph·∫£n h·ªìi (Response Body) th√¥ng qua ti√™u ƒë·ªÅ <code>Accept</code>. Khi ƒë√≥, Spring MVC s·∫Ω ki·ªÉm tra m·∫£ng <strong>HttpMessageConverter</strong> c·ªßa m√¨nh b·∫±ng ph∆∞∆°ng th·ª©c <code>#canWrite(clazz, mediaType)</code> ƒë·ªÉ x√°c ƒë·ªãnh xem c√≥ th·ªÉ tu·∫ßn t·ª± h√≥a ƒë·ªëi t∆∞·ª£ng <code>clazz</code> th√†nh lo·∫°i n·ªôi dung <code>mediaType</code> hay kh√¥ng. N·∫øu c√≥ th·ªÉ, n√≥ s·∫Ω g·ªçi ph∆∞∆°ng th·ª©c <code>#write(contentType, outputMessage)</code> ƒë·ªÉ tu·∫ßn t·ª± h√≥a ƒë·ªëi t∆∞·ª£ng <code>clazz</code> th√†nh lo·∫°i n·ªôi dung <code>contentType</code> v√† ghi v√†o ph·∫£n h·ªìi.</p></li></ul><p>N·∫øu b·∫°n v·∫´n ch∆∞a hi·ªÉu, ch√∫ng ta h√£y c√πng nhau xem x√©t m·ªôt v√≠ d·ª•. Ch√∫ng ta s·∫Ω th·ª±c hi·ªán m·ªôt API th√™m ng∆∞·ªùi d√πng, h·ªó tr·ª£ <strong>ƒë·ªãnh d·∫°ng JSON/XML</strong> cho c·∫£ vi·ªác g·ª≠i d·ªØ li·ªáu v√† ph·∫£n h·ªìi d·ªØ li·ªáu.</p><blockquote><p>L∆∞u √Ω: V√≠ d·ª• n√†y d·ª±a tr√™n n·ªÅn t·∫£ng c·ªßa <a href="#">„Äå8. Cors „Äç</a> trong kho l∆∞u tr·ªØ <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02" target="_blank" rel="noopener noreferrer">lab-springmvc-23-02</a>.</p></blockquote><h2 id="_9-1-nhap-phu-thuoc" tabindex="-1"><a class="header-anchor" href="#_9-1-nhap-phu-thuoc"><span>9.1 Nh·∫≠p ph·ª• thu·ªôc</span></a></h2><p>Trong t·ªáp <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-02/pom.xml" target="_blank" rel="noopener noreferrer"><code>pom.xml</code></a>, <strong>th√™m</strong> ph·ª• thu·ªôc <a href="https://mvnrepository.com/artifact/com.fasterxml.jackson.dataformat/jackson-dataformat-xml" target="_blank" rel="noopener noreferrer"><code>jackson-dataformat-xml</code></a> nh∆∞ sau:</p><div class="language-xml" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&lt;!-- Th√™m jackson ƒë·ªÉ chuy·ªÉn ƒë·ªïi sang xml, th·ª±c hi·ªán tu·∫ßn t·ª± h√≥a ƒë·ªëi v·ªõi XML --&gt;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;com.fasterxml.jackson.dataformat&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;jackson-dataformat-xml&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre></div><h2 id="_9-2-springmvcconfiguration" tabindex="-1"><a class="header-anchor" href="#_9-2-springmvcconfiguration"><span>9.2 SpringMVCConfiguration</span></a></h2><p>S·ª≠a ƒë·ªïi l·ªõp c·∫•u h√¨nh <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/config/SpringMVCConfiguration.java" target="_blank" rel="noopener noreferrer">SpringMVCConfiguration</a> ƒë·ªÉ th√™m c·∫•u h√¨nh li√™n quan ƒë·∫øn <code>MappingJackson2XmlHttpMessageConverter</code>, d√πng cho b·ªô chuy·ªÉn ƒë·ªïi <code>HttpMessageConverter</code> ƒë·ªãnh d·∫°ng XML. M√£ nh∆∞ sau:</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// SpringMVCConfiguration.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> configureMessageConverters</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">List</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpMessageConverter</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> converters) {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // Th√™m b·ªô chuy·ªÉn ƒë·ªïi tin nh·∫Øn XML  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    Jackson2ObjectMapperBuilder</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> xmlBuilder </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Jackson2ObjectMapperBuilder</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">xml</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    xmlBuilder</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">indentOutput</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    converters</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> MappingJackson2XmlHttpMessageConverter</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">xmlBuilder</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">build</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()));</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><h2 id="_9-3-usercontroller" tabindex="-1"><a class="header-anchor" href="#_9-3-usercontroller"><span>9.3 UserController</span></a></h2><p>Trong l·ªõp <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/controller/UserController.java" target="_blank" rel="noopener noreferrer">UserController</a>, ch√∫ng ta th√™m m·ªôt API ƒë·ªÉ t·∫°o ng∆∞·ªùi d√πng, thu·∫≠n ti·ªán cho vi·ªác x·ª≠ l√Ω y√™u c·∫ßu v√† ph·∫£n h·ªìi ƒë·ªãnh d·∫°ng XML/JSON. M√£ nh∆∞ sau:</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// UserController.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">PostMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">value</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;/add&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ‚Üì Th√™m &quot;application/xml&quot;, &quot;application/json&quot; cho ti√™u ƒë·ªÅ y√™u c·∫ßu Content-Type  </span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">        consumes</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> {</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MediaType</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">APPLICATION_XML_VALUE</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> MediaType</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">APPLICATION_JSON_VALUE</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ‚Üì Th√™m &quot;application/xml&quot;, &quot;application/json&quot; cho ti√™u ƒë·ªÅ y√™u c·∫ßu Accept  </span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">        produces</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> {</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MediaType</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">APPLICATION_XML_VALUE</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> MediaType</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">APPLICATION_JSON_VALUE</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserVO</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> add</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RequestBody</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserVO</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> user) {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> user</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><h3 id="yeu-cau" tabindex="-1"><a class="header-anchor" href="#yeu-cau"><span>Y√™u c·∫ßu</span></a></h3><ul><li>Trong tham s·ªë c·ªßa giao di·ªán, ch√∫ng ta ƒë√£ th√™m ch√∫ th√≠ch <code>@RequestBody</code>.</li><li>Th√™m thu·ªôc t√≠nh <code>consumes</code>, tƒÉng c∆∞·ªùng <code>&quot;application/xml&quot;</code>, <code>&quot;application/json&quot;</code> cho ti√™u ƒë·ªÅ y√™u c·∫ßu <code>Content-Type</code>.</li></ul><h3 id="phan-hoi" tabindex="-1"><a class="header-anchor" href="#phan-hoi"><span>Ph·∫£n h·ªìi</span></a></h3><ul><li>B·ªüi v√¨ <code>UserController</code> ƒë√£ th√™m ch√∫ th√≠ch <code>@RestController</code>, ch√∫ng ta kh√¥ng c·∫ßn ph·∫£i th√™m ch√∫ th√≠ch <code>@ResponseBody</code> cho API n√†y.</li><li>Th√™m thu·ªôc t√≠nh <code>produces</code>, tƒÉng c∆∞·ªùng <code>&quot;application/xml&quot;</code>, <code>&quot;application/json&quot;</code> cho ti√™u ƒë·ªÅ y√™u c·∫ßu <code>Accept</code>.</li></ul><p>Sau ƒë√¢y, ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng <a href="https://www.getpostman.com/" target="_blank" rel="noopener noreferrer">Postman</a> ƒë·ªÉ m√¥ ph·ªèng y√™u c·∫ßu.</p><p><strong>‚ë† Y√™u c·∫ßu ƒë·ªãnh d·∫°ng JSON, ph·∫£n h·ªìi ƒë·ªãnh d·∫°ng JSON</strong></p><figure><img src="https://static.iocoder.cn/images/Spring-Boot/2019-11-17/04.png" alt="JSON + JSON" tabindex="0" loading="lazy"><figcaption>JSON + JSON</figcaption></figure><p><strong>‚ë° Y√™u c·∫ßu ƒë·ªãnh d·∫°ng XML, ph·∫£n h·ªìi ƒë·ªãnh d·∫°ng XML</strong></p><figure><img src="https://static.iocoder.cn/images/Spring-Boot/2019-11-17/05.png" alt="XML + XML" tabindex="0" loading="lazy"><figcaption>XML + XML</figcaption></figure><p><strong>‚ë¢ Y√™u c·∫ßu ƒë·ªãnh d·∫°ng JSON, ph·∫£n h·ªìi ƒë·ªãnh d·∫°ng XML</strong></p><figure><img src="https://static.iocoder.cn/images/Spring-Boot/2019-11-17/06.png" alt="JSON + XML" tabindex="0" loading="lazy"><figcaption>JSON + XML</figcaption></figure><h1 id="_10-tich-hop-fastjson" tabindex="-1"><a class="header-anchor" href="#_10-tich-hop-fastjson"><span>10. T√≠ch h·ª£p Fastjson</span></a></h1><blockquote><p>M√£ v√≠ d·ª• t∆∞∆°ng ·ª©ng v·ªõi kho l∆∞u tr·ªØ: <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02" target="_blank" rel="noopener noreferrer">lab-springmvc-23-02</a>.</p></blockquote><p>Tham kh·∫£o b√†i vi·∫øt <a href="https://github.com/alibaba/fastjson/wiki/%E5%9C%A8-Spring-%E4%B8%AD%E9%9B%86%E6%88%90-Fastjson" target="_blank" rel="noopener noreferrer">„ÄäT√≠ch h·ª£p Fastjson trong Spring„Äã</a>.</p><p>Ch√∫ng ta c√≥ th·ªÉ mu·ªën s·ª≠ d·ª•ng Fastjson l√†m c√¥ng c·ª• m·∫∑c ƒë·ªãnh cho JSON ƒë·ªÉ n√¢ng cao hi·ªáu su·∫•t tu·∫ßn t·ª± h√≥a v√† gi·∫£i tu·∫ßn t·ª± h√≥a JSON. Trong Fastjson, ƒë√£ c√≥ s·∫µn <a href="https://github.com/alibaba/fastjson/blob/master/src/main/java/com/alibaba/fastjson/support/spring/FastJsonHttpMessageConverter.java" target="_blank" rel="noopener noreferrer">FastJsonHttpMessageConverter</a>, gi√∫p ch√∫ng ta thay th·∫ø b·ªô chuy·ªÉn ƒë·ªïi <code>HttpMessageConverter</code> m·∫∑c ƒë·ªãnh c·ªßa SpringMVC.</p><blockquote><p>L∆∞u √Ω: V√≠ d·ª• n√†y d·ª±a tr√™n <a href="#">„Äå8. CORS„Äç</a> c·ªßa <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-23/lab-springmvc-23-02" target="_blank" rel="noopener noreferrer">lab-springmvc-23-02</a> ƒë·ªÉ ti·∫øp t·ª•c c·∫£i ti·∫øn.</p></blockquote><h2 id="_10-1-nhap-phu-thuoc" tabindex="-1"><a class="header-anchor" href="#_10-1-nhap-phu-thuoc"><span>10.1 Nh·∫≠p ph·ª• thu·ªôc</span></a></h2><p>Trong t·ªáp <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-02/pom.xml" target="_blank" rel="noopener noreferrer"><code>pom.xml</code></a>, <strong>th√™m</strong> ph·ª• thu·ªôc <a href="https://mvnrepository.com/artifact/com.alibaba/fastjson" target="_blank" rel="noopener noreferrer"><code>fastjson</code></a> nh∆∞ sau:</p><div class="language-xml" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&lt;!-- Th√™m Fastjson, th·ª±c hi·ªán tu·∫ßn t·ª± h√≥a ƒë·ªëi v·ªõi JSON --&gt;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;com.alibaba&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;fastjson&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;1.2.62&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre></div><h2 id="_10-2-springmvcconfiguration" tabindex="-1"><a class="header-anchor" href="#_10-2-springmvcconfiguration"><span>10.2 SpringMVCConfiguration</span></a></h2><p>S·ª≠a ƒë·ªïi l·ªõp c·∫•u h√¨nh <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-23/lab-springmvc-23-02/src/main/java/cn/iocoder/springboot/lab23/springmvc/config/SpringMVCConfiguration.java" target="_blank" rel="noopener noreferrer">SpringMVCConfiguration</a> ƒë·ªÉ th√™m c·∫•u h√¨nh li√™n quan ƒë·∫øn <code>FastJsonHttpMessageConverter</code>. M√£ nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// SpringMVCConfiguration.java  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> configureMessageConverters</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">List</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpMessageConverter</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> converters) {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // T·∫°o ƒë·ªëi t∆∞·ª£ng FastJsonHttpMessageConverter  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    FastJsonHttpMessageConverter</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> fastJsonHttpMessageConverter </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> FastJsonHttpMessageConverter</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // T√πy ch·ªânh c·∫•u h√¨nh FastJson  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    FastJsonConfig</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> fastJsonConfig </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> FastJsonConfig</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    fastJsonConfig</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setCharset</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Charset</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">defaultCharset</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // Thi·∫øt l·∫≠p b·ªô m√£ k√Ω t·ª±  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    fastJsonConfig</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setSerializerFeatures</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">SerializerFeature</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">DisableCircularReferenceDetect</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // B·ªè qua tham chi·∫øu v√≤ng  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    fastJsonHttpMessageConverter</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setFastJsonConfig</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(fastJsonConfig);</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // Thi·∫øt l·∫≠p MediaType h·ªó tr·ª£  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    fastJsonHttpMessageConverter</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setSupportedMediaTypes</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Arrays</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">asList</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MediaType</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">APPLICATION_JSON</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">            MediaType</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">APPLICATION_JSON_UTF8</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // Th√™m v√†o converters  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    converters</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, fastJsonHttpMessageConverter);</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // L∆∞u √Ω, th√™m v√†o ƒë·∫ßu ti√™n, ƒë·∫∑t tr∆∞·ªõc MappingJackson2XmlHttpMessageConverter  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ƒê·∫øn ƒë√¢y, vi·ªác t√≠ch h·ª£p Fastjson v√†o SpringMVC ƒë√£ ho√†n t·∫•t, r·∫•t thu·∫≠n ti·ªán!</p><h1 id="_666-tong-ket" tabindex="-1"><a class="header-anchor" href="#_666-tong-ket"><span>666. T·ªïng k·∫øt</span></a></h1><p>T√≥m l·∫°i, ƒë·∫ßy l√† m·ªôt b√†i vi·∫øt d√†i nh∆∞ng m√† n√≥ ƒë·∫ßy ƒë·ªß c√°c ki·∫øn th·ª©c c∆° b·∫£n v·ªÅ Spring MVC m√† c√°c b·∫°n s·∫Ω ph·∫£i ƒë·ªëi m·∫∑t trong c√°c d·ª± √°n th·ª±c t·∫ø ƒë∆∞·ª£c t·ªïng h·ª£p ƒë·∫ßy ƒë·ªß v√† g·ªçn g√†ng.</p><p>N·∫øu trong b√†i vi·∫øt n√†y c√≥ g√¨ kh√¥ng ch√≠nh x√°c ho·∫∑c khi·∫øn b·∫°n ƒë·ªçc hi·ªÉu l·∫ßm, r·∫•t mong b·∫°n ƒë·ªÉ l·∫°i l·ªùi nh·∫Øn cho m√¨nh.</p></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/vanhung4499/my-wiki/edit/main/src/framework/spring-boot/springmvc.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">Last update: </span><!----></div><div class="contributors"><span class="vp-meta-label">Contributors: </span><!--[--><!--[--><span class="vp-meta-info" title="email: vanhung4499@gmail.com">Hung Nguyen Van</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/framework/spring-boot/map-struct.html" aria-label="MapStruct"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->MapStruct</div></a><a class="route-link auto-link next" href="/framework/spring-boot/validation.html" aria-label="Validation"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Validation<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper" style="display:none;--1ea755b8:;"><div class="footer-content"><div class="footer">Made with ‚ù§Ô∏è by Hung Nguyen</div><div class="copyright">Copyright ¬© 2016-2024 Hung Nguyen</div></div><span id="runtime_span"></span></footer></div><!--]--><!--[--><!----><!----><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CmlOSuIY.js" defer></script>
  </body>
</html>
