<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.12" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.46" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://vanhung4499.github.io/interview/knowledge/mysql-index-qa.html"><meta property="og:site_name" content="VanHung4499"><meta property="og:title" content="MySQL Index Q&A"><meta property="og:description" content="15 câu hỏi về MySQL Index 1. Chỉ mục là gì? Chỉ mục là một cấu trúc dữ liệu giúp tăng hiệu suất truy vấn cơ sở dữ liệu. Nó có thể so sánh như mục lục của một cuốn từ điển, giúp ..."><meta property="og:type" content="article"><meta property="og:image" content="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-60177b59-879d-4ee9-9425-e13e79a1eac2.jpg"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2024-07-05T10:10:42.000Z"><meta property="article:author" content="Hung Nguyen"><meta property="article:tag" content="any"><meta property="article:modified_time" content="2024-07-05T10:10:42.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"MySQL Index Q&A","image":["http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-60177b59-879d-4ee9-9425-e13e79a1eac2.jpg","http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-baca02c4-1ed6-421f-9ad4-e3e63dd58efa.jpg","http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-8bf752f5-772b-4308-b51c-d06406428866.jpg","http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-65c3f954-df70-439b-b0e1-1009007d6560.jpg","http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-3c751d80-02df-43cf-acc7-aafdb409811b.jpg","http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-b5ccdd0e-f299-49ac-9176-8e2c475f606f.jpg","http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-4b37d45c-b5a2-4ff7-8125-ccd1e89eed42.jpg","http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-1a294975-c9dd-4077-95fc-2a972911a3ab.jpg"],"dateModified":"2024-07-05T10:10:42.000Z","author":[{"@type":"Person","name":"Hung Nguyen","url":"https://vanhung4499.github.io"}]}</script><meta name="referrer" content="no-referrer-when-downgrade"><link rel="alternate" type="application/rss+xml" href="https://vanhung4499.github.io/rss.xml" title="VanHung4499 RSS Feed"><title>MySQL Index Q&A | VanHung4499</title><meta name="description" content="15 câu hỏi về MySQL Index 1. Chỉ mục là gì? Chỉ mục là một cấu trúc dữ liệu giúp tăng hiệu suất truy vấn cơ sở dữ liệu. Nó có thể so sánh như mục lục của một cuốn từ điển, giúp ...">
    <link rel="preload" href="/assets/style-ChamnO2s.css" as="style"><link rel="stylesheet" href="/assets/style-ChamnO2s.css">
    <link rel="modulepreload" href="/assets/app-B9pwkC50.js"><link rel="modulepreload" href="/assets/mysql-index-qa.html-0_oHZcGL.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">VanHung4499</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="Home"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:home" width="1em" height="1em"></iconify-icon><!--]-->Home<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/wiki.html" aria-label="Wiki"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="carbon:wikis" width="1em" height="1em"></iconify-icon><!--]-->Wiki<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/dsa/" aria-label="Algorithms"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="hugeicons:algorithm" width="1em" height="1em"></iconify-icon><!--]-->Algorithms<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Programming"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:code" width="1em" height="1em"></iconify-icon>Programming<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/java/" aria-label="Java"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:java" width="1em" height="1em"></iconify-icon><!--]-->Java<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/golang/" aria-label="Golang"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:go" width="1em" height="1em"></iconify-icon><!--]-->Golang<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/js/" aria-label="JavaScript"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:javascript" width="1em" height="1em"></iconify-icon><!--]-->JavaScript<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/ts/" aria-label="TypeScript"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:typescript" width="1em" height="1em"></iconify-icon><!--]-->TypeScript<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/python/" aria-label="Python"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:python" width="1em" height="1em"></iconify-icon><!--]-->Python<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Database"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:database" width="1em" height="1em"></iconify-icon>Database<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/sql/" aria-label="SQL"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:sql-query" width="1em" height="1em"></iconify-icon><!--]-->SQL<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/mysql/" aria-label="MySQL"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:mysql" width="1em" height="1em"></iconify-icon><!--]-->MySQL<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/mongodb/" aria-label="MongoDB"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:mongodb" width="1em" height="1em"></iconify-icon><!--]-->MongoDB<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/redis/" aria-label="Redis"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:redis" width="1em" height="1em"></iconify-icon><!--]-->Redis<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/elasticsearch/" aria-label="Elasticsearch"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:elasticsearch" width="1em" height="1em"></iconify-icon><!--]-->Elasticsearch<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/elastic/" aria-label="Elastic Stack"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="cib:elastic-stack" width="1em" height="1em"></iconify-icon><!--]-->Elastic Stack<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Framework"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="simple-icons:framework" width="1em" height="1em"></iconify-icon>Framework<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/framework/spring/" aria-label="Spring"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Spring<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/framework/spring-boot/" aria-label="Spring Boot"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Spring Boot<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/framework/nestjs/" aria-label="NestJS"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:nestjs" width="1em" height="1em"></iconify-icon><!--]-->NestJS<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/framework/gin/" aria-label="Gin"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:gin" width="1em" height="1em"></iconify-icon><!--]-->Gin<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="DevOps"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon-plain:azuredevops" width="1em" height="1em"></iconify-icon>DevOps<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/docker/" aria-label="Docker"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:docker" width="1em" height="1em"></iconify-icon><!--]-->Docker<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/kubernetes/" aria-label="Kubernetes"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:kubernetes" width="1em" height="1em"></iconify-icon><!--]-->Kubernetes<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/jenkins/" aria-label="Jenkins"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:jenkins" width="1em" height="1em"></iconify-icon><!--]-->Jenkins<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/git/" aria-label="Git"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:git" width="1em" height="1em"></iconify-icon><!--]-->Git<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/linux/" aria-label="Linux"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:linux" width="1em" height="1em"></iconify-icon><!--]-->Linux<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Design"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="tdesign:system-sum" width="1em" height="1em"></iconify-icon>Design<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/design/design-pattern/" aria-label="Design Pattern"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="tabler:grid-pattern" width="1em" height="1em"></iconify-icon><!--]-->Design Pattern<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/design/system-design/" aria-label="System Design"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="icon-park-outline:system" width="1em" height="1em"></iconify-icon><!--]-->System Design<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/project/" aria-label="Project"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="ant-design:project-outlined" width="1em" height="1em"></iconify-icon><!--]-->Project<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/interview/" aria-label="Interview"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:account-tie" width="1em" height="1em"></iconify-icon><!--]-->Interview<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="About"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:about" width="1em" height="1em"></iconify-icon>About<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/about-me.html" aria-label="About me"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="cib:about-me" width="1em" height="1em"></iconify-icon><!--]-->About me<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/about.html" aria-label="About"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:about" width="1em" height="1em"></iconify-icon><!--]-->About<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/vanhung4499/my-wiki" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">Search</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><a class="route-link route-link-active auto-link vp-sidebar-title no-external-link-icon" href="/interview/knowledge/" aria-label="Knowledge"><!---->Knowledge<!----></a><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/interview/knowledge/mysql-qa.html" aria-label="MySQL Q&amp;A"><!---->MySQL Q&amp;A<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link vp-sidebar-page active" href="/interview/knowledge/mysql-index-qa.html" aria-label="MySQL Index Q&amp;A"><!---->MySQL Index Q&amp;A<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/interview/knowledge/redis-qa.html" aria-label="Redis Interview"><!---->Redis Interview<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/interview/knowledge/java-must-know.html" aria-label="Java Basic Must Know"><!---->Java Basic Must Know<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/interview/knowledge/java-thread-must-know.html" aria-label="Java Thread Must Know"><!---->Java Thread Must Know<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Prepare</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->MySQL Index Q&amp;A</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://vanhung4499.github.io" target="_blank" rel="noopener noreferrer">Hung Nguyen</a></span><span property="author" content="Hung Nguyen"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-07-05T10:10:42.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 15 min</span><meta property="timeRequired" content="PT15M"></span><span class="page-category-info" aria-label="Category🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color4 clickable" role="navigation">any</span><!--]--><meta property="articleSection" content="any"></span><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color4 clickable" role="navigation">any</span><!--]--><meta property="keywords" content="any"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-chi-muc-la-gi">1. Chỉ mục là gì?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-cac-loai-chi-muc-trong-mysql">2. Các loại chỉ mục trong MySQL</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-khi-nao-chi-muc-se-bi-vo-hieu">3. Khi nào chỉ mục sẽ bị vô hiệu?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-nhung-truong-hop-nao-khong-nen-tao-chi-muc">4. Những trường hợp nào không nên tạo chỉ mục?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-tai-sao-su-dung-cay-b-tai-sao-khong-dung-cay-nhi-phan">5. Tại sao sử dụng cây B+, tại sao không dùng cây nhị phân?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_6-qua-trinh-tim-kiem-mot-cay-chi-muc-b-mot-lan">6. Quá trình tìm kiếm một cây chỉ mục B+ một lần</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_7-quay-ve-bang-la-gi-lam-the-nao-đe-giam-quay-ve-bang">7. Quay về bảng là gì? Làm thế nào để giảm quay về bảng?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_8-chi-muc-bao-phu-la-gi">8. Chỉ mục bao phủ là gì?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_9-nguyen-tac-tien-to-trai-nhat-cua-chi-muc-la-gi">9. Nguyên tắc tiền tố trái nhất của chỉ mục là gì?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_10-ban-đa-hieu-ve-đay-xuong-chi-muc-chua-đay-xuong-chi-muc-la-gi">10. Bạn đã hiểu về đẩy xuống chỉ mục chưa? Đẩy xuống chỉ mục là gì?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_11-lam-the-nao-đe-them-chi-muc-vao-bang-lon">11. Làm thế nào để thêm chỉ mục vào bảng lớn</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_12-lam-the-nao-đe-biet-cau-lenh-co-su-dung-chi-muc-hay-khong">12. Làm thế nào để biết câu lệnh có sử dụng chỉ mục hay không?</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-1-type">1.2.1 type</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-2-rows">1.2.2 rows</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-3-filtered">1.2.3 filtered</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-4-extra">1.2.4 extra</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-5-key">1.2.5 key</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_13-su-khac-biet-giua-chi-muc-hash-va-b-cay-la-gi-ban-chon-chi-muc-nao-khi-thiet-ke-chi-muc">13. Sự khác biệt giữa chỉ mục Hash và B+ cây là gì? Bạn chọn chỉ mục nào khi thiết kế chỉ mục?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_14-chi-muc-co-nhung-uu-điem-va-nhuoc-điem-gi">14. Chỉ mục có những ưu điểm và nhược điểm gì?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_15-su-khac-biet-giua-chi-muc-tap-trung-va-chi-muc-khong-tap-trung">15. Sự khác biệt giữa chỉ mục tập trung và chỉ mục không tập trung</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="_15-cau-hoi-ve-mysql-index" tabindex="-1"><a class="header-anchor" href="#_15-cau-hoi-ve-mysql-index"><span>15 câu hỏi về MySQL Index</span></a></h1><h2 id="_1-chi-muc-la-gi" tabindex="-1"><a class="header-anchor" href="#_1-chi-muc-la-gi"><span>1. Chỉ mục là gì?</span></a></h2><figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-60177b59-879d-4ee9-9425-e13e79a1eac2.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>Chỉ mục là một cấu trúc dữ liệu giúp tăng hiệu suất truy vấn cơ sở dữ liệu. Nó có thể so sánh như mục lục của một cuốn từ điển, giúp bạn nhanh chóng tìm thấy các bản ghi tương ứng.</li><li>Chỉ mục thường được lưu trữ trong các tệp trên đĩa, chiếm không gian vật lý.</li><li>Tuy nhiên, việc sử dụng quá nhiều chỉ mục có thể ảnh hưởng đến chức năng chèn và cập nhật của bảng cơ sở dữ liệu.</li></ul><h2 id="_2-cac-loai-chi-muc-trong-mysql" tabindex="-1"><a class="header-anchor" href="#_2-cac-loai-chi-muc-trong-mysql"><span>2. Các loại chỉ mục trong MySQL</span></a></h2><p><strong>Dựa trên cấu trúc dữ liệu</strong></p><ul><li>Chỉ mục B+ tree: Tất cả dữ liệu được lưu trữ ở các nút lá, độ phức tạp là <code>O(logn)</code>, phù hợp cho các truy vấn phạm vi.</li><li>Chỉ mục Hash: Phù hợp cho truy vấn giá trị bằng nhau, hiệu suất truy vấn cao, thực hiện ngay lập tức.</li><li>Chỉ mục toàn văn: Hỗ trợ trong <code>MyISAM</code> và <code>InnoDB</code>, thường được tạo trên các kiểu văn bản như <code>char, text, varchar</code>.</li><li>Chỉ mục <code>R-Tree</code>: Dùng để tạo chỉ mục <code>SPATIAL</code> cho dữ liệu <code>GIS</code>.</li></ul><p><strong>Dựa trên lưu trữ vật lý</strong></p><ul><li>Chỉ mục cụm: Chỉ mục cụm là chỉ mục tạo dựa trên khóa chính, lưu trữ dữ liệu của bảng ở các nút lá (<code>Innodb</code>).</li><li>Chỉ mục không cụm: Chỉ mục không cụm là chỉ mục tạo dựa trên các khóa không phải khóa chính, lưu trữ khóa chính và cột chỉ mục ở các nút lá (<code>Innodb</code>).</li></ul><p><strong>Dựa trên logic</strong></p><ul><li>Chỉ mục khóa chính: Một loại chỉ mục duy nhất đặc biệt, không cho phép giá trị null.</li><li>Chỉ mục thông thường: Chỉ mục cơ bản trong <code>MySQL</code>, cho phép giá trị null và trùng lặp.</li><li>Chỉ mục liên kết: Chỉ mục tạo từ nhiều trường, sử dụng nguyên tắc tiền tố trái nhất.</li><li>Chỉ mục duy nhất: Giá trị trong cột chỉ mục phải là duy nhất, nhưng cho phép giá trị null.</li><li>Chỉ mục không gian: Hỗ trợ chỉ mục không gian từ <code>MySQL 5.7</code>, tuân theo quy tắc mô hình dữ liệu hình học <code>OpenGIS</code>.</li></ul><h2 id="_3-khi-nao-chi-muc-se-bi-vo-hieu" tabindex="-1"><a class="header-anchor" href="#_3-khi-nao-chi-muc-se-bi-vo-hieu"><span>3. Khi nào chỉ mục sẽ bị vô hiệu?</span></a></h2><ul><li>Điều kiện truy vấn chứa <code>or</code> có thể làm chỉ mục bị vô hiệu.</li><li>Nếu kiểu dữ liệu của trường là chuỗi, phải dùng dấu ngoặc kép khi <code>where</code>, nếu không chỉ mục bị vô hiệu.</li><li>Ký tự đại diện <code>like</code> có thể làm chỉ mục bị vô hiệu.</li><li>Chỉ mục liên kết, nếu điều kiện truy vấn không phải là cột đầu tiên của chỉ mục liên kết, chỉ mục bị vô hiệu.</li><li>Sử dụng hàm nội bộ của MySQL trên cột chỉ mục làm chỉ mục bị vô hiệu.</li><li>Thực hiện toán tử trên cột chỉ mục (như <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>) làm chỉ mục bị vô hiệu.</li><li>Sử dụng <code>!=</code> hoặc <code>&lt; &gt;</code>, <code>not in</code> trên trường chỉ mục có thể làm chỉ mục bị vô hiệu.</li><li>Sử dụng <code>is null</code>, <code>is not null</code> trên trường chỉ mục có thể làm chỉ mục bị vô hiệu.</li><li>Truy vấn kết nối trái hoặc phải có định dạng mã khác nhau trên trường liên kết có thể làm chỉ mục bị vô hiệu.</li><li>MySQL ước tính sử dụng quét toàn bộ bảng nhanh hơn so với sử dụng chỉ mục, sẽ không sử dụng chỉ mục.</li></ul><h2 id="_4-nhung-truong-hop-nao-khong-nen-tao-chi-muc" tabindex="-1"><a class="header-anchor" href="#_4-nhung-truong-hop-nao-khong-nen-tao-chi-muc"><span>4. Những trường hợp nào không nên tạo chỉ mục?</span></a></h2><ul><li>Bảng có ít dữ liệu, không nên thêm chỉ mục.</li><li>Cập nhật thường xuyên cũng không nên thêm chỉ mục.</li><li>Các trường có tính phân biệt thấp không nên thêm chỉ mục (như giới tính).</li><li>Các trường không được sử dụng trong <code>where</code>, <code>group by</code>, <code>order by</code> không cần tạo chỉ mục.</li><li>Trường hợp đã có chỉ mục dư thừa (ví dụ đã có chỉ mục liên kết <code>a, b</code> thì không cần tạo chỉ mục riêng cho <code>a</code>).</li></ul><h2 id="_5-tai-sao-su-dung-cay-b-tai-sao-khong-dung-cay-nhi-phan" tabindex="-1"><a class="header-anchor" href="#_5-tai-sao-su-dung-cay-b-tai-sao-khong-dung-cay-nhi-phan"><span>5. Tại sao sử dụng cây B+, tại sao không dùng cây nhị phân?</span></a></h2><blockquote><p>Bạn có thể xem xét vấn đề này từ nhiều khía cạnh: truy vấn có nhanh không, hiệu quả có ổn định không, lưu trữ dữ liệu bao nhiêu, và số lần truy vấn trên đĩa. Tại sao không phải là cây nhị phân, tại sao không phải là cây nhị phân cân bằng, tại sao không phải là cây B, mà lại là cây B+?</p></blockquote><p><strong>Tại sao không phải là cây nhị phân thông thường?</strong></p><p>Nếu cây nhị phân trở thành một danh sách liên kết, tương đương với quét toàn bộ bảng. Cây nhị phân cân bằng so với cây nhị phân tìm kiếm có hiệu quả truy vấn ổn định hơn và tốc độ truy vấn tổng thể cũng nhanh hơn.</p><p><strong>Tại sao không phải là cây nhị phân cân bằng?</strong></p><p>Chúng ta biết rằng truy vấn dữ liệu trong bộ nhớ nhanh hơn nhiều so với trên đĩa. Nếu cây dữ liệu được sử dụng làm chỉ mục, thì mỗi lần truy vấn dữ liệu cần đọc một nút từ đĩa, tương đương với một khối đĩa. Nhưng cây nhị phân cân bằng chỉ lưu trữ một giá trị khóa và dữ liệu trên mỗi nút, nếu là cây B, có thể lưu trữ nhiều dữ liệu nút hơn, độ cao của cây cũng giảm, do đó số lần truy vấn trên đĩa sẽ giảm, hiệu quả truy vấn sẽ nhanh hơn.</p><p><strong>Tại sao không phải là cây B mà lại là cây B+?</strong></p><ul><li>Cây B+ không lưu trữ dữ liệu trên các nút không phải lá, chỉ lưu trữ khóa, trong khi cây B lưu trữ cả khóa và dữ liệu. Trong <code>innodb</code>, kích thước mặc định của trang là 16KB, nếu không lưu trữ dữ liệu thì sẽ lưu trữ nhiều khóa hơn, tương ứng với bậc của cây (số con của nút) sẽ lớn hơn, cây sẽ ngắn và mập hơn, do đó số lần truy vấn trên đĩa sẽ giảm, hiệu quả truy vấn sẽ nhanh hơn.</li><li>Tất cả dữ liệu của cây B+ được lưu trữ trên các nút lá và dữ liệu được sắp xếp theo thứ tự, nối với nhau. Do đó, cây B+ làm cho các truy vấn phạm vi, truy vấn sắp xếp, truy vấn nhóm và truy vấn loại bỏ trùng lặp trở nên đơn giản hơn rất nhiều.</li></ul><h2 id="_6-qua-trinh-tim-kiem-mot-cay-chi-muc-b-mot-lan" tabindex="-1"><a class="header-anchor" href="#_6-qua-trinh-tim-kiem-mot-cay-chi-muc-b-mot-lan"><span>6. Quá trình tìm kiếm một cây chỉ mục B+ một lần</span></a></h2><blockquote><p>Giả sử có cấu trúc bảng sau và đã khởi tạo một số dữ liệu như sau:</p></blockquote><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> `</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">employee</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">` (</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">  `id`</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> int</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">11</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">  `name`</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">255</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">DEFAULT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">  `age`</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> int</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">11</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">DEFAULT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">  `date`</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> datetime</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> DEFAULT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">  `sex`</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> int</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">DEFAULT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#98C379;--shiki-dark:#98C379;">`id`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  KEY</span><span style="color:#98C379;--shiki-dark:#98C379;"> `idx_age`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#98C379;--shiki-dark:#98C379;">`age`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">USING</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> BTREE</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) ENGINE</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">InnoDB </span><span style="color:#C678DD;--shiki-dark:#C678DD;">DEFAULT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> CHARSET</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">utf8;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">insert into</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD;">values</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;Xiao Lun&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">43</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;2021-01-20&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;0&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">insert into</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD;">values</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">200</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;Jun Jie&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">48</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;2021-01-21&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;0&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">insert into</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD;">values</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">300</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;Zi Qi&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">36</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;2020-01-21&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;1&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">insert into</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD;">values</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">400</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;Li Hong&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">32</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;2020-01-21&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;0&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">insert into</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD;">values</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">500</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;Yi Xun&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">37</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;2020-01-21&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;1&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">insert into</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD;">values</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">600</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;Xiao Jun&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">49</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;2021-01-21&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;0&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">insert into</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD;">values</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">700</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;Xiao Yan&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">28</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;2021-01-21&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;1&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Thực hiện câu truy vấn SQL này, cần bao nhiêu lần tìm kiếm cây? Bạn có thể vẽ sơ đồ cấu trúc cây chỉ mục tương ứng không?</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD;">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> age</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">32</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><p>Thực ra, bạn có thể vẽ sơ đồ cấu trúc chỉ mục của <code>idx_age</code> như sau:</p><figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-baca02c4-1ed6-421f-9ad4-e3e63dd58efa.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Sau đó vẽ sơ đồ cấu trúc chỉ mục chính của <code>id</code>, như sau:</p><figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-8bf752f5-772b-4308-b51c-d06406428866.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Quá trình thực hiện câu lệnh SQL truy vấn này như sau:</p><ul><li>Tìm kiếm trong cây chỉ mục <code>idx_age</code>, tải <code>khối đĩa 1</code> vào bộ nhớ, do <code>32 &lt; 43</code>, tìm kiếm nhánh bên trái và tìm <code>khối đĩa 2</code>.</li><li>Tải <code>khối đĩa 2</code> vào bộ nhớ, do <code>32 &lt; 36</code>, tìm kiếm nhánh bên trái và tìm <code>khối đĩa 4</code>.</li><li>Tải <code>khối đĩa 4</code> vào bộ nhớ, tiếp tục tìm kiếm trong bộ nhớ và tìm thấy bản ghi <code>age = 32</code>, lấy <code>id = 400</code>.</li><li>Lấy <code>id = 400</code>, quay lại cây chỉ mục chính của <code>id</code>.</li><li>Tìm kiếm trong cây chỉ mục chính của <code>id</code>, tải <code>khối đĩa 1</code> vào bộ nhớ, do <code>300 &lt; 400 &lt; 500</code>, chọn nhánh giữa và tìm <code>khối đĩa 3</code>.</li><li>Mặc dù tìm thấy <code>id = 400</code> trong <code>khối đĩa 3</code>, nhưng nó không phải là nút lá, tiếp tục tìm và tìm <code>khối đĩa 8</code>.</li><li>Tải <code>khối đĩa 8</code> vào bộ nhớ, tìm trong bộ nhớ và tìm thấy bản ghi <code>id = 400</code>, lấy dữ liệu dòng <code>R4</code>, hoàn thành.</li></ul><h2 id="_7-quay-ve-bang-la-gi-lam-the-nao-đe-giam-quay-ve-bang" tabindex="-1"><a class="header-anchor" href="#_7-quay-ve-bang-la-gi-lam-the-nao-đe-giam-quay-ve-bang"><span>7. Quay về bảng là gì? Làm thế nào để giảm quay về bảng?</span></a></h2><p>Khi dữ liệu tìm kiếm không có trong cây chỉ mục, cần quay lại cây chỉ mục chính để lấy, quá trình này được gọi là <strong>quay về bảng</strong>.</p><p>Ví dụ trong phần <strong>6</strong>, sử dụng câu truy vấn SQL:</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD;">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> age</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">32</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><p>Cần truy vấn tất cả các cột dữ liệu, chỉ mục <code>idx_age</code> không đáp ứng, cần lấy giá trị <code>id</code> chính rồi quay lại cây chỉ mục chính để tìm, quá trình này gọi là quay về bảng.</p><h2 id="_8-chi-muc-bao-phu-la-gi" tabindex="-1"><a class="header-anchor" href="#_8-chi-muc-bao-phu-la-gi"><span>8. Chỉ mục bao phủ là gì?</span></a></h2><p>Nếu câu truy vấn SQL của bạn từ <code>select *</code> thành <code>select id, age</code>, thực ra là <strong>không cần quay về bảng</strong>. Vì giá trị <code>id</code> và <code>age</code> đều nằm trong nút lá của cây chỉ mục <code>idx_age</code>, điều này liên quan đến kiến thức về chỉ mục bao phủ.</p><blockquote><p>Chỉ mục bao phủ là khi các cột dữ liệu truy vấn <code>select</code> có thể lấy từ chỉ mục mà không cần quay về bảng, nói cách khác, các cột truy vấn phải được chỉ mục bao phủ.</p></blockquote><h2 id="_9-nguyen-tac-tien-to-trai-nhat-cua-chi-muc-la-gi" tabindex="-1"><a class="header-anchor" href="#_9-nguyen-tac-tien-to-trai-nhat-cua-chi-muc-la-gi"><span>9. Nguyên tắc tiền tố trái nhất của chỉ mục là gì?</span></a></h2><p>Nguyên tắc tiền tố trái nhất của chỉ mục có thể là <strong>N cột trái nhất của chỉ mục liên kết</strong>. Ví dụ, bạn tạo một chỉ mục liên kết <code>(a,b,c)</code>, thực ra có thể coi là tạo ba chỉ mục <code>(a)</code>, <code>(a,b)</code>, <code>(a,b,c)</code>, tăng khả năng tái sử dụng chỉ mục.</p><p>Tất nhiên, tiền tố trái nhất cũng có thể là <strong>M ký tự trái nhất của chỉ mục chuỗi</strong>. Ví dụ, chỉ mục chuỗi của bạn như sau:</p><figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-65c3f954-df70-439b-b0e1-1009007d6560.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Câu lệnh SQL này: <code>select * from employee where name like &#39;Xiao%&#39; order by age desc;</code> cũng sử dụng được chỉ mục.</p><figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-3c751d80-02df-43cf-acc7-aafdb409811b.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_10-ban-đa-hieu-ve-đay-xuong-chi-muc-chua-đay-xuong-chi-muc-la-gi" tabindex="-1"><a class="header-anchor" href="#_10-ban-đa-hieu-ve-đay-xuong-chi-muc-chua-đay-xuong-chi-muc-la-gi"><span>10. Bạn đã hiểu về đẩy xuống chỉ mục chưa? Đẩy xuống chỉ mục là gì?</span></a></h2><p>Cho bạn câu lệnh SQL này:</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD;">where</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> name</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> like</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;Xiao%&#39;</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> and</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> age</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">28</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> and</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sex</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;0&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><p>Trong đó, <code>name</code> và <code>age</code> là chỉ mục liên kết (<code>idx_name_age</code>).</p><p>Nếu là <strong>trước MySQL 5.6</strong>, trong cây chỉ mục <code>idx_name_age</code>, tìm tất cả những người có tên bắt đầu bằng <code>“Xiao”</code>, lấy <code>id</code> chính của họ, sau đó quay về bảng để tìm dữ liệu dòng và so sánh các cột khác như tuổi và giới tính. Như hình:</p><figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-b5ccdd0e-f299-49ac-9176-8e2c475f606f.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Một số bạn có thể thắc mắc, tại sao sau khi tìm thấy những người có tên chứa <code>“Xiao”</code> không xem luôn tuổi <code>age</code> rồi quay về bảng, không phải sẽ hiệu quả hơn sao? Vì vậy, <code>MySQL 5.6</code> đã giới thiệu <strong>tối ưu hóa đẩy xuống chỉ mục</strong>, có thể kiểm tra trước các cột trong chỉ mục trong quá trình duyệt chỉ mục, lọc trực tiếp các bản ghi không thỏa mãn điều kiện, giảm số lần quay về bảng.</p><p>Vì vậy, từ phiên bản MySQL 5.6 trở đi, sau khi tìm thấy những người có tên chứa <code>“Xiao”</code>, tiếp tục lọc <code>age=28</code>.</p><figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-4b37d45c-b5a2-4ff7-8125-ccd1e89eed42.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_11-lam-the-nao-đe-them-chi-muc-vao-bang-lon" tabindex="-1"><a class="header-anchor" href="#_11-lam-the-nao-đe-them-chi-muc-vao-bang-lon"><span>11. Làm thế nào để thêm chỉ mục vào bảng lớn</span></a></h2><p>Nếu một bảng có dữ liệu ở mức hàng chục triệu bản ghi trở lên, thì làm thế nào để thêm chỉ mục vào bảng này?</p><p>Chúng ta cần biết rằng <strong>khi thêm chỉ mục vào bảng</strong>, <strong>bảng sẽ bị khóa</strong>. Nếu không cẩn thận, có thể gây ra sự cố sản xuất. Có thể tham khảo các phương pháp sau:</p><ol><li>Tạo một bảng mới <code>B</code> có cấu trúc dữ liệu giống bảng gốc <code>A</code>.</li><li>Thêm chỉ mục cần thiết vào bảng mới <code>B</code>.</li><li>Chuyển dữ liệu từ bảng gốc <code>A</code> sang bảng mới <code>B</code>.</li><li><code>rename</code> bảng mới <code>B</code> thành tên của bảng gốc <code>A</code>, và đổi tên bảng gốc <code>A</code> sang tên khác.</li></ol><h2 id="_12-lam-the-nao-đe-biet-cau-lenh-co-su-dung-chi-muc-hay-khong" tabindex="-1"><a class="header-anchor" href="#_12-lam-the-nao-đe-biet-cau-lenh-co-su-dung-chi-muc-hay-khong"><span>12. Làm thế nào để biết câu lệnh có sử dụng chỉ mục hay không?</span></a></h2><p>Sử dụng <code>explain</code> để kiểm tra chiến lược thực thi của SQL, <strong>vậy là bạn sẽ biết có trúng chỉ mục hay không</strong>.</p><p>Khi <code>explain</code> được sử dụng cùng với <code>SQL</code>, MySQL sẽ hiển thị thông tin về chiến lược thực thi câu lệnh từ trình tối ưu hóa.</p><figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-1a294975-c9dd-4077-95fc-2a972911a3ab.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Nói chung, chúng ta cần chú ý đặc biệt đến <code>type, rows, filtered, extra, key</code>.</p><h3 id="_1-2-1-type" tabindex="-1"><a class="header-anchor" href="#_1-2-1-type"><span>1.2.1 type</span></a></h3><p><code>type</code> biểu thị <strong>loại kết nối</strong>, là một chỉ số quan trọng để xem tình trạng thực hiện chỉ mục. Các loại kết nối từ tốt đến kém là: <code>system &gt; const &gt; eq_ref &gt; ref &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt; range &gt; index &gt; ALL</code></p><ul><li>system: Loại này yêu cầu trong bảng cơ sở dữ liệu chỉ có một bản ghi, là một trường hợp đặc biệt của <code>const</code>, thường thì không xuất hiện.</li><li>const: Có thể tìm thấy dữ liệu thông qua một lần chỉ mục, thường được dùng cho khóa chính hoặc chỉ mục duy nhất, hiệu suất rất cao, tốc độ rất nhanh.</li><li>eq_ref: Thường dùng cho quét khóa chính hoặc chỉ mục duy nhất, thường là sử dụng khóa chính để kết nối truy vấn.</li><li>ref: Thường dùng cho quét chỉ mục không phải khóa chính và chỉ mục duy nhất.</li><li>ref_or_null: Loại kết nối này giống <code>ref</code>, khác biệt là <code>MySQL</code> sẽ tìm kiếm thêm các bản ghi chứa giá trị <code>NULL</code>.</li><li>index_merge: Sử dụng phương pháp tối ưu hợp nhất chỉ mục, truy vấn sử dụng hai chỉ mục trở lên.</li><li>unique_subquery: Tương tự như <code>eq_ref</code>, điều kiện sử dụng truy vấn <code>in</code> con.</li><li>index_subquery: Khác với <code>unique_subquery</code>, dùng cho chỉ mục không duy nhất, có thể trả về giá trị trùng lặp.</li><li>range: Thường dùng cho truy vấn phạm vi, ví dụ: <code>between ... and</code> hoặc các thao tác <code>in</code>.</li><li>index: Quét toàn bộ chỉ mục.</li><li>ALL: Quét toàn bộ bảng.</li></ul><h3 id="_1-2-2-rows" tabindex="-1"><a class="header-anchor" href="#_1-2-2-rows"><span>1.2.2 rows</span></a></h3><p>Cột này biểu thị số hàng MySQL ước tính cần đọc để tìm thấy các bản ghi cần thiết. Đối với bảng InnoDB, con số này là ước tính và không phải luôn chính xác.</p><h3 id="_1-2-3-filtered" tabindex="-1"><a class="header-anchor" href="#_1-2-3-filtered"><span>1.2.3 filtered</span></a></h3><p>Cột này là một giá trị phần trăm, biểu thị tỷ lệ phần trăm các bản ghi trong bảng thỏa mãn điều kiện. Nói đơn giản, cột này biểu thị tỷ lệ các bản ghi thỏa mãn điều kiện sau khi được lọc từ dữ liệu trả về của engine lưu trữ.</p><h3 id="_1-2-4-extra" tabindex="-1"><a class="header-anchor" href="#_1-2-4-extra"><span>1.2.4 extra</span></a></h3><p>Cột này chứa thông tin bổ sung về cách MySQL phân tích câu truy vấn, nó thường xuất hiện các giá trị sau:</p><ul><li>Using filesort: Biểu thị việc sắp xếp theo tệp, thường xuất hiện khi chỉ mục sắp xếp không trùng khớp với sắp xếp chỉ định. Thường thấy trong câu lệnh <code>order by</code>.</li><li>Using index: Biểu thị có sử dụng chỉ mục phủ.</li><li>Using temporary: Biểu thị có sử dụng bảng tạm, hiệu suất rất kém, cần tối ưu hóa. Thường thấy trong câu lệnh <code>group by</code> hoặc <code>union</code>.</li><li>Using where: Biểu thị có sử dụng điều kiện <code>where</code> để lọc.</li><li>Using index condition: MySQL 5.6 trở lên bổ sung thêm tối ưu hóa đẩy chỉ mục. Lọc dữ liệu tại lớp engine lưu trữ thay vì tại lớp dịch vụ, sử dụng dữ liệu hiện có của chỉ mục để giảm số lần truy cập lại bảng.</li></ul><h3 id="_1-2-5-key" tabindex="-1"><a class="header-anchor" href="#_1-2-5-key"><span>1.2.5 key</span></a></h3><p>Cột này biểu thị <strong>chỉ mục thực tế được sử dụng</strong>. Thường được xem cùng với cột <code>possible_keys</code>.</p><h2 id="_13-su-khac-biet-giua-chi-muc-hash-va-b-cay-la-gi-ban-chon-chi-muc-nao-khi-thiet-ke-chi-muc" tabindex="-1"><a class="header-anchor" href="#_13-su-khac-biet-giua-chi-muc-hash-va-b-cay-la-gi-ban-chon-chi-muc-nao-khi-thiet-ke-chi-muc"><span>13. Sự khác biệt giữa chỉ mục Hash và B+ cây là gì? Bạn chọn chỉ mục nào khi thiết kế chỉ mục?</span></a></h2><ul><li>B+ cây có thể thực hiện truy vấn phạm vi, chỉ mục Hash không thể.</li><li>B+ cây hỗ trợ nguyên tắc tiền tố bên trái của chỉ mục liên kết, chỉ mục Hash không hỗ trợ.</li><li>B+ cây hỗ trợ sắp xếp <code>order by</code>, chỉ mục Hash không hỗ trợ.</li><li>Chỉ mục Hash hiệu quả hơn B+ cây trong truy vấn giá trị bằng. (Tuy nhiên nếu chỉ mục có nhiều giá trị trùng lặp, xung đột Hash, hiệu suất giảm).</li><li>B+ cây sử dụng <code>like</code> để thực hiện truy vấn mờ khi <code>like</code> sau (ví dụ <code>%</code> ở đầu) có thể tối ưu hóa, chỉ mục Hash không thể thực hiện truy vấn mờ.</li></ul><h2 id="_14-chi-muc-co-nhung-uu-điem-va-nhuoc-điem-gi" tabindex="-1"><a class="header-anchor" href="#_14-chi-muc-co-nhung-uu-điem-va-nhuoc-điem-gi"><span>14. Chỉ mục có những ưu điểm và nhược điểm gì?</span></a></h2><p><strong>Ưu điểm:</strong></p><ul><li>Chỉ mục có thể tăng tốc độ truy vấn dữ liệu, giảm thời gian truy vấn.</li><li>Chỉ mục duy nhất có thể đảm bảo tính duy nhất của từng hàng dữ liệu trong bảng cơ sở dữ liệu.</li></ul><p><strong>Nhược điểm:</strong></p><ul><li>Tạo và duy trì chỉ mục tiêu tốn thời gian.</li><li>Chỉ mục cần không gian vật lý, ngoài không gian dữ liệu của bảng, mỗi chỉ mục còn tiêu tốn một không gian vật lý nhất định.</li><li>Khi thêm, xóa, sửa dữ liệu trong bảng, chỉ mục cũng cần được duy trì động.</li></ul><h2 id="_15-su-khac-biet-giua-chi-muc-tap-trung-va-chi-muc-khong-tap-trung" tabindex="-1"><a class="header-anchor" href="#_15-su-khac-biet-giua-chi-muc-tap-trung-va-chi-muc-khong-tap-trung"><span>15. Sự khác biệt giữa chỉ mục tập trung và chỉ mục không tập trung</span></a></h2><p>Chỉ mục tập trung không phải là một loại chỉ mục riêng biệt, mà là một <strong>cách lưu trữ dữ liệu</strong>. Nó biểu thị cấu trúc chỉ mục và dữ liệu được lưu trữ cùng nhau. Chỉ mục không tập trung là <strong>chỉ mục có cấu trúc và dữ liệu được lưu trữ riêng biệt</strong>.</p><p>Tiếp theo, chúng ta sẽ nói về các engine lưu trữ khác nhau~</p><p>Trong engine lưu trữ <code>InnoDB</code> của MySQL, sự khác biệt lớn nhất giữa chỉ mục tập trung và không tập trung là ở nút lá có lưu trữ toàn bộ bản ghi hay không. Nút lá của chỉ mục tập trung lưu trữ toàn bộ bản ghi, trong khi nút lá của chỉ mục không tập trung lưu trữ thông tin khóa chính, <strong>do đó, chỉ mục không tập trung thường cần truy vấn lại bảng</strong>.</p><ul><li>Một bảng chỉ có thể có một chỉ mục tập trung (vì chỉ mục tập trung thường là <strong>chỉ mục khóa chính</strong>), trong khi bảng có thể có nhiều chỉ mục không tập trung.</li><li>Thông thường, chỉ mục tập trung hiệu suất truy vấn cao hơn so với chỉ mục không tập trung vì không cần truy vấn lại bảng.</li></ul><p>Trong engine lưu trữ <code>MyISM</code>, khóa chính và chỉ mục thường đều là chỉ mục không tập trung, vì dữ liệu và chỉ mục tách biệt, các nút lá đều sử dụng <strong>một địa chỉ để trỏ đến dữ liệu bảng thực sự</strong>.</p></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/vanhung4499/my-wiki/edit/main/src/interview/knowledge/mysql-index-qa.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">Last update: </span><!----></div><div class="contributors"><span class="vp-meta-label">Contributors: </span><!--[--><!--[--><span class="vp-meta-info" title="email: vanhung4499@gmail.com">Hung Nguyen</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/interview/knowledge/mysql-qa.html" aria-label="MySQL Q&amp;A"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->MySQL Q&amp;A</div></a><a class="route-link auto-link next" href="/interview/knowledge/redis-qa.html" aria-label="Redis Interview"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Redis Interview<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper" style="display:none;--1ea755b8:;"><div class="footer-content"><div class="footer">Made with ❤️ by Hung Nguyen</div><div class="copyright">Copyright © 2016-2024 Hung Nguyen</div></div><span id="runtime_span"></span></footer></div><!--]--><!--[--><!----><!----><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-B9pwkC50.js" defer></script>
  </body>
</html>
