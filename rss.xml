<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="https://vanhung4499.github.io/rss.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <atom:link href="https://vanhung4499.github.io/rss.xml" rel="self" type="application/rss+xml"/>
    <title>VanHung4499</title>
    <link>https://vanhung4499.github.io/</link>
    <description>My personal wiki and blog</description>
    <language>en-US</language>
    <pubDate>Sat, 06 Jul 2024 10:37:37 GMT</pubDate>
    <lastBuildDate>Sat, 06 Jul 2024 10:37:37 GMT</lastBuildDate>
    <generator>@vuepress/plugin-feed</generator>
    <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
    <category>design-pattern</category>
    <category>java</category>
    <category>interview</category>
    <category>any</category>
    <category>about</category>
    <category>blog</category>
    <category>database</category>
    <category>devops</category>
    <category>framework</category>
    <category>programming</category>
    <category>project</category>
    <category>elastic</category>
    <category>elasticssearch</category>
    <category>mongodb</category>
    <category>nosql</category>
    <category>db</category>
    <category>mysql</category>
    <category>redis</category>
    <item>
      <title>Apply Design Patterns</title>
      <link>https://vanhung4499.github.io/design/design-pattern/apply.html</link>
      <guid>https://vanhung4499.github.io/design/design-pattern/apply.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Apply Design Patterns</source>
      <description>LÃ m tháº¿ nÃ o Ä‘á»ƒ Ã¡p dá»¥ng design pattern vÃ o dá»± Ã¡n thá»±c táº¿ ? I. ğŸŒˆ Giá»›i thiá»‡u design pattern CÃ¡i gá»i lÃ  design pattern lÃ  má»™t táº­p há»£p phÆ°Æ¡ng phÃ¡p Ä‘Ã£ Ä‘Æ°á»£c ngÆ°á»i ta sá»­ dá»¥ng hoáº·c xÃ¡c ...</description>
      <category>design-pattern</category>
      <pubDate>Sat, 06 Jul 2024 01:52:52 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>I. ğŸŒˆ Giá»›i thiá»‡u design pattern</h2>
<p>CÃ¡i gá»i lÃ  design pattern lÃ  má»™t táº­p há»£p phÆ°Æ¡ng phÃ¡p Ä‘Ã£ Ä‘Æ°á»£c ngÆ°á»i ta sá»­ dá»¥ng hoáº·c xÃ¡c minh nhiá»u láº§n. Tá»« gÃ³c Ä‘á»™ trá»«u tÆ°á»£ng hoáº·c vÄ© mÃ´ hÆ¡n, miá»…n lÃ  phÃ¹ há»£p vá»›i tÃ¬nh huá»‘ng sá»­ dá»¥ng vÃ  giáº£i quyáº¿t váº¥n Ä‘á» thá»±c táº¿, mÃ´ hÃ¬nh nÃªn Ä‘Æ°á»£c Ã¡p dá»¥ng trong cáº£ DD vÃ  design pattern.</p>
<h2>2. CÃ¡c design pattern thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng lÃ  gÃ¬ ? ğŸ¤”</h2>
<ul>
<li>
<p>Strategy Pattern</p>
</li>
<li>
<p>Simple Factory Pattern</p>
</li>
<li>
<p>Singleton Pattern</p>
</li>
<li>
<p>Proxy Pattern</p>
</li>
<li>
<p>Factory Method Pattern</p>
</li>
<li>
<p>Observer Pattern</p>
</li>
<li>
<p>Template Method Pattern</p>
</li>
<li>
<p>Adapter Pattern</p>
</li>
</ul>
<h2>3. Ãp dá»¥ng Design pattern Ä‘Æ¡n giáº£n qua má»™t sá»‘ vÃ­ dá»¥ thá»±c táº¿</h2>
<h3>3.1. Strategy Pattern</h3>
<h4><strong>TÃ¬nh huá»‘ng</strong></h4>
<p>Má»™t trung tÃ¢m thÆ°Æ¡ng máº¡i tá»• chá»©c sá»± kiá»‡n, khi khÃ¡ch hÃ ng mua hÃ ng sáº½ Ä‘Æ°á»£c giáº£m giÃ¡ dá»±a trÃªn sá»‘ tiá»n mua hÃ ng. VÃ­ dá»¥:</p>
<ul>
<li>Mua hÃ ng vá»›i sá»‘ tiá»n &gt;= 2000 sáº½ Ä‘Æ°á»£c giáº£m 20% (0.8).</li>
<li>Sá»‘ tiá»n mua hÃ ng tá»« 500 ~ 1000 Ä‘Æ°á»£c giáº£m 10% (0.9).</li>
<li>Sá»‘ tiá»n mua hÃ ng tá»« 0 ~ 500 Ä‘Æ°á»£c giáº£m 5% (0.95).</li>
</ul>
<p>Tuá»³ thuá»™c vÃ o sá»‘ tiá»n mua hÃ ng, sáº½ Ã¡p dá»¥ng cÃ¡c chiáº¿n lÆ°á»£c tÃ­nh toÃ¡n khÃ¡c nhau.</p>
<p>Äáº§u tiÃªn, Ä‘á»‹nh nghÄ©a má»™t interface Strategy Ä‘á»ƒ biá»ƒu thá»‹ má»™t chiáº¿n lÆ°á»£c:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * Ãp dá»¥ng chiáº¿n lÆ°á»£c</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * Logic tÃ­nh toÃ¡n</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> algorithm</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Trong Ä‘Ã³, phÆ°Æ¡ng thá»©c <code>strategy</code> tráº£ vá» Ä‘á»‹nh danh duy nháº¥t cá»§a chiáº¿n lÆ°á»£c hiá»‡n táº¡i, vÃ  phÆ°Æ¡ng thá»©c <code>algorithm</code> lÃ  logic tÃ­nh toÃ¡n cá»¥ thá»ƒ cá»§a chiáº¿n lÆ°á»£c Ä‘Ã³.</p>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  hai lá»›p triá»ƒn khai cá»§a interface Strategy:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ConcreteStrategyA</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StrategySelector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">strategyA</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getStrategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> algorithm</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Xá»­ lÃ½ vá»›i strategyA..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ConcreteStrategyB</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StrategySelector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">strategyB</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getStrategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> algorithm</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Xá»­ lÃ½ vá»›i strategyB..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ConcreteStrategyC</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StrategySelector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">strategyC</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getStrategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> algorithm</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Xá»­ lÃ½ vá»›i strategyC..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Táº¡o má»™t Enum StrategySelector Ä‘á»ƒ lá»±a chá»n chiáº¿n lÆ°á»£c:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Getter</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> enum</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StrategySelector</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">    strategyA</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "strategyA"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">    strategyB</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "strategyB"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">    strategyC</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "strategyC"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> code</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    StrategySelector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> code</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">code</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> code;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">strategy</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> strategy;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Sau Ä‘Ã³, Ä‘á»‹nh nghÄ©a má»™t interface StrategyRunner Ä‘á»ƒ biá»ƒu thá»‹ bá»™ Ä‘iá»u phá»‘i chiáº¿n lÆ°á»£c:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StrategyRunner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> execute</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>PhÆ°Æ¡ng thá»©c <code>execute</code> sáº½ quyáº¿t Ä‘á»‹nh thá»±c thi chiáº¿n lÆ°á»£c nÃ o dá»±a trÃªn giÃ¡ trá»‹ cá»§a <code>strategy</code>.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StrategyRunnerImpl</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StrategyRunner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> STRATEGIES </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">asList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ConcreteStrategyA</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), </span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ConcreteStrategyB</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), </span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ConcreteStrategyC</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Map</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> STRATEGY_MAP </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Maps</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newHashMap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    static</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        STRATEGY_MAP </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> STRATEGIES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">collect</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collectors</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toMap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(Strategy</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">strategy, s </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> s));</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> execute</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        STRATEGY_MAP</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(strategy).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">algorithm</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Trong <code>StrategyRunnerImpl</code>, Ä‘á»‹nh nghÄ©a má»™t danh sÃ¡ch <code>STRATEGIES</code> Ä‘á»ƒ lÆ°u trá»¯ táº¥t cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng triá»ƒn khai cá»§a Strategy, vÃ  má»™t Map <code>STRATEGY_MAP</code> Ä‘á»ƒ lÆ°u trá»¯ má»‘i quan há»‡ giá»¯a <code>strategy</code> vÃ  cÃ¡c Ä‘á»‘i tÆ°á»£ng Strategy. Khá»‘i static trong code Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ khá»Ÿi táº¡o <code>STRATEGY_MAP</code> tá»« danh sÃ¡ch <code>STRATEGIES</code>. NhÆ° váº­y, trong phÆ°Æ¡ng thá»©c <code>execute</code>, cÃ³ thá»ƒ dá»… dÃ ng láº¥y Ä‘Æ°á»£c Ä‘á»‘i tÆ°á»£ng Strategy tÆ°Æ¡ng á»©ng vá»›i <code>strategy</code> Ä‘Ã£ chá»‰ Ä‘á»‹nh.</p>
<h4>Triá»ƒn khai vÃ  Ã¡p dá»¥ng strategy patten</h4>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Component</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ConcreteStrategyA</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StrategySelector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">strategyA</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getStrategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> algorithm</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Xá»­ lÃ½ vá»›i strategyA..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Component</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ConcreteStrategyB</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StrategySelector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">strategyB</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getStrategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> algorithm</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Xá»­ lÃ½ vá»›i strategyB..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Component</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ConcreteStrategyC</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StrategySelector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">strategyC</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getStrategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> algorithm</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Xá»­ lÃ½ vá»›i strategyC..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Tiáº¿p theo, Ä‘á»‹nh nghÄ©a má»™t lá»›p cáº¥u hÃ¬nh <code>StrategyConfig</code> Ä‘á»ƒ inject má»™t <code>StrategyRunner</code> vÃ o container:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Configuration</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StrategyConfig</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Bean</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StrategyRunner</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> runner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">strategies</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Map</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">strategyMap</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> strategies</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">collect</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collectors</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toMap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(Strategy</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">strategy, s </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> s));</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> flag </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> strategyMap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(flag).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">algorithm</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>KhÃ´ng khÃ³ Ä‘á»ƒ nháº­n tháº¥y, phÆ°Æ¡ng thá»©c <code>strategyRunner</code> cÃ³ logic gáº§n nhÆ° hoÃ n toÃ n giá»‘ng vá»›i <code>StrategyRunnerImpl</code> trÆ°á»›c Ä‘Ã¢y, cÅ©ng dá»±a vÃ o má»™t <code>List&lt;Strategy&gt;</code> Ä‘á»ƒ xÃ¢y dá»±ng má»™t <code>Map&lt;String, Strategy&gt;</code>. Tuy nhiÃªn, danh sÃ¡ch <code>strategies</code> á»Ÿ Ä‘Ã¢y khÃ´ng pháº£i do chÃºng ta tá»± táº¡o ra, mÃ  Ä‘Æ°á»£c truyá»n vÃ o thÃ´ng qua tham sá»‘ phÆ°Æ¡ng thá»©c. VÃ¬ <code>strategyRunner</code> Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u báº±ng annotation <code>@Bean</code>, danh sÃ¡ch <code>List&lt;Strategy&gt;</code> nÃ y thá»±c ra Ä‘Æ°á»£c láº¥y tá»« container trong quÃ¡ trÃ¬nh khá»Ÿi táº¡o Spring Boot. Do Ä‘Ã³, cÃ¡c lá»›p triá»ƒn khai Strategy mÃ  chÃºng ta Ä‘Ã£ Ä‘Äƒng kÃ½ trÆ°á»›c Ä‘Ã³ sáº½ Ä‘Æ°á»£c inject vÃ o Ä‘Ã¢y.</p>
<p>Nhá» Ä‘Ã³, chÃºng ta khÃ´ng cáº§n pháº£i quan tÃ¢m há»‡ thá»‘ng cÃ³ bao nhiÃªu lá»›p triá»ƒn khai Strategy, vÃ¬ Spring Boot sáº½ tá»± Ä‘á»™ng cáº¥u hÃ¬nh vÃ  phÃ¡t hiá»‡n táº¥t cáº£ cÃ¡c lá»›p triá»ƒn khai. ChÃºng ta chá»‰ cáº§n viáº¿t lá»›p triá»ƒn khai Strategy cá»§a mÃ¬nh, sau Ä‘Ã³ Ä‘Äƒng kÃ½ vÃ o container vÃ  inject <code>StrategyRunner</code> á»Ÿ báº¥t ká»³ nÆ¡i nÃ o cáº§n:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Autowired</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StrategyRunner</span><span style="color:#E06C75;--shiki-dark:#E06C75"> strategyRunner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>Sau Ä‘Ã³, chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng trá»±c tiáº¿p <code>strategyRunner</code>:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RestController</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "/designPatterns"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DesignPatternController</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Autowired</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StrategyRunner</span><span style="color:#E06C75;--shiki-dark:#E06C75"> strategyRunner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">GetMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "/algorithm"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> algorithm</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestParam</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"strategy"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        strategyRunner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">execute</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(strategy);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Khi truy cáº­p vÃ o API, console sáº½ xuáº¥t ra nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Xá»­ lÃ½ vá»›i strategyA...</span></span></code></pre>
</div><h3>3.2. Simple Factory Pattern</h3>
<h4>VÃ­ dá»¥ tÃ¬nh huá»‘ng ğŸŒ°:</h4>
<p>Trong tÃ¬nh huá»‘ng ngÆ°á»i dÃ¹ng thanh toÃ¡n, hiá»‡n táº¡i há»— trá»£ thanh toÃ¡n báº±ng Alipay vÃ  WeChat Pay, vÃ  trong tÆ°Æ¡ng lai sáº½ thÃªm cÃ¡c phÆ°Æ¡ng thá»©c thanh toÃ¡n nhÆ° tháº» ngÃ¢n hÃ ng, UnionPay. Sá»­ dá»¥ng máº«u chiáº¿n lÆ°á»£c, má»—i phÆ°Æ¡ng thá»©c thanh toÃ¡n lÃ  má»™t chiáº¿n lÆ°á»£c, dá»±a vÃ o loáº¡i thanh toÃ¡n mÃ  ngÆ°á»i dÃ¹ng truyá»n vÃ o, táº¡o ra cÃ¡c lá»›p chiáº¿n lÆ°á»£c khÃ¡c nhau. Sá»­ dá»¥ng máº«u nhÃ  mÃ¡y, báº±ng cÃ¡ch Ä‘Ã³ng gÃ³i má»™t lá»›p xá»­ lÃ½ chiáº¿n lÆ°á»£c <code>PaymentStrategyHandler</code>, há»‡ thá»‘ng khÃ¡c cÃ³ thá»ƒ gá»i chá»©c nÄƒng nÃ y thÃ´ng qua má»™t cá»­a ngÃµ thá»‘ng nháº¥t, sá»­ dá»¥ng máº«u facade (máº·t tiá»n).</p>
<h4>3.2.1 Äá»‹nh nghÄ©a má»™t lá»›p chiáº¿n lÆ°á»£c:</h4>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IPayment</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * Thanh toÃ¡n</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     *</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;--shiki-dark:#C678DD;font-style:italic;--shiki-dark-font-style:italic">@param</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> paymentBody</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Boolean</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> pay</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PaymentBody</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> paymentBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AliPay</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IPayment</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Boolean</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> pay</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PaymentBody</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> paymentBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Thanh toÃ¡n báº±ng Alipay..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Boolean</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TRUE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> WechatPay</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IPayment</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Boolean</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> pay</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PaymentBody</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> paymentBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Thanh toÃ¡n báº±ng WeChat Pay..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Boolean</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TRUE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> UnionPay</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IPayment</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Boolean</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> pay</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PaymentBody</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> paymentBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Thanh toÃ¡n báº±ng UnionPay..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Boolean</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TRUE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>3.2.2 Táº¡o Strategy Factory</h4>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">package</span><span style="color:#C678DD;--shiki-dark:#C678DD"> com.universal.core.design</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">P</span><span style="color:#C678DD;--shiki-dark:#C678DD">atterns.factory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> cn.hutool.core.util.EnumUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> cn.hutool.core.util.ReflectUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> com.universal.core.designPatterns.enums.PayStrategyEnum</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> org.springframework.stereotype.Component</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> * NhÃ  mÃ¡y cho cÃ¡c phÆ°Æ¡ng thá»©c thanh toÃ¡n</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Component</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PaymentFactory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IPayment</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getPayStrategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // 1. Láº¥y giÃ¡ trá»‹ tÆ°Æ¡ng á»©ng tá»« kiá»ƒu trong enum</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> EnumUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getFieldBy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(PayStrategyEnum</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getValue, PayStrategyEnum</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getType, type);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // 2. Sá»­ dá»¥ng cÆ¡ cháº¿ pháº£n chiáº¿u Ä‘á»ƒ táº¡o lá»›p chiáº¿n lÆ°á»£c tÆ°Æ¡ng á»©ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        IPayment</span><span style="color:#E06C75;--shiki-dark:#E06C75"> payment</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ReflectUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newInstance</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(value);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> payment;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>3.3.3 Äá»‹nh nghÄ©a enum chiáº¿n lÆ°á»£c</h4>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> * Enum chiáº¿n lÆ°á»£c thanh toÃ¡n</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Getter</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> enum</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PayStrategyEnum</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">    ZFB</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ZFB"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "com.universal.core.designPatterns.factory.impl.AliPay"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">    WX</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"WX"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "com.universal.core.designPatterns.factory.impl.WechatPay"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">    UNION</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"UNION"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "com.universal.core.designPatterns.factory.impl.UnionPay"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> value</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    PayStrategyEnum</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> value</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">type</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> type;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> value;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>3.3.4 Táº¡o ngá»¯ cáº£nh chiáº¿n lÆ°á»£c</h4>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Data</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PaymentContext</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Resource</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IPayment</span><span style="color:#E06C75;--shiki-dark:#E06C75"> paymentStrategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> PaymentContext</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IPayment</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> paymentStrategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">paymentStrategy</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> paymentStrategy;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Boolean</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> pay</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PaymentBody</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> paymentBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">paymentStrategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">pay</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(paymentBody);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>3.4.5 Cung cáº¥p cá»•ng truy cáº­p thá»‘ng nháº¥t</h4>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">package</span><span style="color:#C678DD;--shiki-dark:#C678DD"> com.universal.core.design</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">P</span><span style="color:#C678DD;--shiki-dark:#C678DD">atterns.factory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> cn.hutool.core.util.EnumUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> com.universal.core.designPatterns.enums.PayStrategyEnum</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> org.springframework.stereotype.Component</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Component</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PaymentStrategyHandler</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Boolean</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> pay</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PaymentBody</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> payBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">EnumUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">contains</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PayStrategyEnum</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">payBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">())) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> IllegalArgumentException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"PhÆ°Æ¡ng thá»©c thanh toÃ¡n khÃ´ng Ä‘Æ°á»£c há»— trá»£!"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // 1. Láº¥y Ä‘á»‘i tÆ°á»£ng chiáº¿n lÆ°á»£c thanh toÃ¡n</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        IPayment</span><span style="color:#E06C75;--shiki-dark:#E06C75"> payStrategy</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PaymentFactory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getPayStrategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">payBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // 2. Láº¥y ngá»¯ cáº£nh chiáº¿n lÆ°á»£c thanh toÃ¡n</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        PaymentContext</span><span style="color:#E06C75;--shiki-dark:#E06C75"> paymentContext</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> PaymentContext</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(payStrategy);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // 3. Thá»±c hiá»‡n thanh toÃ¡n</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> paymentContext</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">pay</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(payBody);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>3.4.6 Táº¡o Controller</h4>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RestController</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "/designPatterns"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DesignPatternController</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PostMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/pay"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Boolean</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> pay</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestBody</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PaymentBody</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> paymentBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PaymentStrategyHandler</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">pay</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(paymentBody);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Vá»›i cáº¥u trÃºc nÃ y, há»‡ thá»‘ng khÃ¡c cÃ³ thá»ƒ gá»i Ä‘áº¿n <code>PaymentStrategyHandler</code> Ä‘á»ƒ xá»­ lÃ½ cÃ¡c phÆ°Æ¡ng thá»©c thanh toÃ¡n khÃ¡c nhau má»™t cÃ¡ch dá»… dÃ ng vÃ  linh hoáº¡t, Ä‘á»“ng thá»i dá»… dÃ ng má»Ÿ rá»™ng vá»›i cÃ¡c phÆ°Æ¡ng thá»©c thanh toÃ¡n má»›i trong tÆ°Æ¡ng lai.</p>
<h3>Singleton Pattern</h3>
<h3>3.3 Máº«u Singleton</h3>
<p>Äoáº¡n mÃ£ minh há»a:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Singleton kiá»ƒu Lazy Initialization (Sá»­ dá»¥ng lá»›p ná»™i bá»™ tÄ©nh)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Singleton</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // HÃ m khá»Ÿi táº¡o private Ä‘á»ƒ ngÄƒn cháº·n viá»‡c khá»Ÿi táº¡o bÃªn ngoÃ i</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Singleton</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Viáº¿t má»™t lá»›p ná»™i bá»™ tÄ©nh, lá»›p nÃ y chá»©a má»™t thuá»™c tÃ­nh tÄ©nh Singleton</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> SingletonInstance</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng Singleton duy nháº¥t</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Singleton</span><span style="color:#E06C75;--shiki-dark:#E06C75"> INSTANCE </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Singleton</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // PhÆ°Æ¡ng thá»©c synchronized Ä‘á»ƒ láº¥y thá»ƒ hiá»‡n Singleton</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> synchronized</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Singleton</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getInstance</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> SingletonInstance</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">INSTANCE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>3.4 Proxy Pattern</h3>
<p>Proxy Pattern cung cáº¥p má»™t Ä‘áº¡i diá»‡n Ä‘á»ƒ kiá»ƒm soÃ¡t truy cáº­p tá»›i má»™t Ä‘á»‘i tÆ°á»£ng khÃ¡c.</p>
<p>Proxy Pattern thá»±c táº¿ Ä‘Æ°á»£c á»©ng dá»¥ng ráº¥t rá»™ng rÃ£i trong cuá»™c sá»‘ng hÃ ng ngÃ y. VÃ­ dá»¥ kinh Ä‘iá»ƒn nháº¥t lÃ  viá»‡c chá»§ nhÃ  á»§y quyá»n cho trung gian (mÃ´i giá»›i) Ä‘á»ƒ cho thuÃª nhÃ . BÃ i viáº¿t nÃ y sáº½ giáº£i thÃ­ch vÃ  minh há»a báº±ng mÃ£ nguá»“n cho Proxy Pattern sá»­ dá»¥ng vÃ­ dá»¥ nÃ y.</p>
<h4>MÃ£ nguá»“n minh há»a</h4>
<p>Táº¡o má»™t lá»›p Subject:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> * Lá»›p hoáº¡t Ä‘á»™ng, má»¥c Ä‘Ã­ch lÃ  cho thuÃª nhÃ </span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Subject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * Interface thuÃª nhÃ </span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> rentHouse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Äá»‹nh nghÄ©a má»™t vai trÃ² chá»§ nhÃ , lá»›p hiá»‡n thá»±c cho hoáº¡t Ä‘á»™ng:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> * Chá»§ nhÃ </span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> HouseOwner</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Subject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * Hiá»‡n thá»±c phÆ°Æ¡ng thá»©c thuÃª nhÃ </span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> rentHouse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Chá»§ nhÃ  Ä‘Ã£ cho thuÃª nhÃ  thÃ nh cÃ´ng..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Äá»‹nh nghÄ©a má»™t Ä‘á»‘i tÆ°á»£ng proxy trung gian:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> * Lá»›p trung gian Ä‘áº¡i diá»‡n</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> *</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> * ThÃ´ng thÆ°á»ng, chÃºng ta khÃ´ng thá»ƒ liÃªn há»‡ trá»±c tiáº¿p vá»›i chá»§ nhÃ , vÃ¬ váº­y cáº§n má»™t lá»›p Ä‘áº¡i diá»‡n, tá»©c lÃ  lá»›p trung gian.</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> HouseProxy</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Subject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> HouseOwner</span><span style="color:#E06C75;--shiki-dark:#E06C75"> houseOwner </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> HouseOwner</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> rentHouse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Trung gian thu phÃ­ mÃ´i giá»›i, giÃºp chá»§ nhÃ  cho thuÃª nhÃ ..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        houseOwner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">rentHouse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>MÃ´ phá»ng ngÆ°á»i dÃ¹ng tÃ¬m trung gian Ä‘á»ƒ thuÃª nhÃ :</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Client</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Táº¡o Ä‘á»‘i tÆ°á»£ng trung gian</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Subject</span><span style="color:#E06C75;--shiki-dark:#E06C75"> houseProxy</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> HouseProxy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        </span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // NgÆ°á»i dÃ¹ng thuÃª nhÃ  thÃ´ng qua trung gian</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        houseProxy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">rentHouse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Khi cháº¡y chÆ°Æ¡ng trÃ¬nh, káº¿t quáº£ sáº½ lÃ :</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Trung gian thu phÃ­ mÃ´i giá»›i, giÃºp chá»§ nhÃ  cho thuÃª nhÃ ...</span></span>
<span class="line"><span>Chá»§ nhÃ  Ä‘Ã£ cho thuÃª nhÃ  thÃ nh cÃ´ng...</span></span></code></pre>
</div><h3>3.5 Factory Method Pattern</h3>
<p>á» pháº§n trÆ°á»›c, chÃºng ta Ä‘Ã£ Ä‘á» cáº­p Ä‘áº¿n Simple Factory Pattern. Sá»± khÃ¡c biá»‡t giá»¯a Factory Method vÃ  Simple Factory náº±m á»Ÿ chá»— Simple Factory cÃ³ Æ°u Ä‘iá»ƒm lá»›n nháº¥t lÃ  bao gá»“m cÃ¡c logic cáº§n thiáº¿t Ä‘á»ƒ táº¡o cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘á»™ng theo Ä‘iá»u kiá»‡n lá»±a chá»n cá»§a khÃ¡ch hÃ ng, loáº¡i bá» sá»± phá»¥ thuá»™c vÃ o cÃ¡c sáº£n pháº©m cá»¥ thá»ƒ tá»« phÃ­a khÃ¡ch hÃ ng.</p>
<p>Factory Method (PhÆ°Æ¡ng phÃ¡p NhÃ  mÃ¡y) Ä‘á»‹nh nghÄ©a má»™t interface Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng, cho phÃ©p cÃ¡c lá»›p con quyáº¿t Ä‘á»‹nh viá»‡c thá»ƒ hiá»‡n lá»›p nÃ o. PhÆ°Æ¡ng phÃ¡p nÃ y trÃ¬ hoÃ£n viá»‡c thá»ƒ hiá»‡n Ä‘á»‘i tÆ°á»£ng Ä‘áº¿n cÃ¡c lá»›p con. NÃ³i cÃ¡ch khÃ¡c, nÃ³ cung cáº¥p má»™t phÆ°Æ¡ng phÃ¡p á»§y quyá»n logic thá»ƒ hiá»‡n cho cÃ¡c lá»›p con.</p>
<h4>VÃ­ dá»¥ mÃ£ nguá»“n:</h4>
<p>Äá»‹nh nghÄ©a lá»›p nhÃ  mÃ¡y <code>NetworkConfigFactoryService</code>:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">package</span><span style="color:#C678DD;--shiki-dark:#C678DD"> com.universal.core.design</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">P</span><span style="color:#C678DD;--shiki-dark:#C678DD">atterns.factory</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">M</span><span style="color:#C678DD;--shiki-dark:#C678DD">ethod.factory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> com.universal.core.designPatterns.factoryMethod.NetworkConfigCrudService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkConfigFactoryService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * Láº¥y lá»›p xá»­ lÃ½ logic cá»¥ thá»ƒ</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * </span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;--shiki-dark:#C678DD;font-style:italic;--shiki-dark-font-style:italic">@param</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> productType</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;--shiki-dark:#C678DD;font-style:italic;--shiki-dark-font-style:italic">@return</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    NetworkConfigCrudService</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getSpecificService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> productType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Lá»›p triá»ƒn khai cá»§a <code>NetworkConfigFactoryService</code>:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Service</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkConfigFactoryServiceImpl</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkConfigFactoryService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AServiceImpl</span><span style="color:#E06C75;--shiki-dark:#E06C75"> aService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> BServiceImpl</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CServiceImpl</span><span style="color:#E06C75;--shiki-dark:#E06C75"> cService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DServiceImpl</span><span style="color:#E06C75;--shiki-dark:#E06C75"> dService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkConfigCrudService</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getSpecificService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> productType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        NetworkConfigCrudService</span><span style="color:#E06C75;--shiki-dark:#E06C75"> networkConfigCrudService</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        switch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(productType) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            case</span><span style="color:#98C379;--shiki-dark:#98C379"> "A"</span><span style="color:#C678DD;--shiki-dark:#C678DD">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                networkConfigCrudService </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> aService;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                break</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            case</span><span style="color:#98C379;--shiki-dark:#98C379"> "B"</span><span style="color:#C678DD;--shiki-dark:#C678DD">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                networkConfigCrudService </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> bService;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                break</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            case</span><span style="color:#98C379;--shiki-dark:#98C379"> "C"</span><span style="color:#C678DD;--shiki-dark:#C678DD">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                networkConfigCrudService </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> cService;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                break</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            case</span><span style="color:#98C379;--shiki-dark:#98C379"> "D"</span><span style="color:#C678DD;--shiki-dark:#C678DD">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                networkConfigCrudService </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> dService;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                break</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> networkConfigCrudService;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Äá»‹nh nghÄ©a interface hoáº¡t Ä‘á»™ng máº¡ng <code>NetworkConfigCrudService</code>:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkConfigCrudService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    NetworkConfigVO</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getNetwork</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NetworkConfigDTO</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> networkConfigDTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>CÃ¡c lá»›p triá»ƒn khai tÆ°Æ¡ng á»©ng vá»›i cÃ¡c logic khÃ¡c nhau lÃ  <code>AServiceImpl</code>, <code>BServiceImpl</code>, <code>CServiceImpl</code>, <code>DServiceImpl</code>:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Service</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AServiceImpl</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkConfigCrudService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkConfigVO</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getNetwork</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NetworkConfigDTO</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> networkConfigDTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> NetworkConfigVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Service</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> BServiceImpl</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkConfigCrudService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkConfigVO</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getNetwork</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NetworkConfigDTO</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> networkConfigDTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> NetworkConfigVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Service</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CServiceImpl</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkConfigCrudService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkConfigVO</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getNetwork</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NetworkConfigDTO</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> networkConfigDTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> NetworkConfigVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Service</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DServiceImpl</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkConfigCrudService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkConfigVO</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getNetwork</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NetworkConfigDTO</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> networkConfigDTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> NetworkConfigVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Lá»›p Ä‘iá»u khiá»ƒn <code>NetworkConfigController</code>:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RestController</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Slf4j</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "/networkConfig"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkConfigController</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkConfigFactoryService</span><span style="color:#E06C75;--shiki-dark:#E06C75"> factoryService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PostMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "/getNetworkDetails"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> produces</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> MediaType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">APPLICATION_JSON_VALUE</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ApiResult</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NetworkConfigVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getNetworkDetails</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestBody</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkConfigDTO</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> networkConfigDTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Láº¥y lá»›p xá»­ lÃ½ logic AService</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        NetworkConfigCrudService</span><span style="color:#E06C75;--shiki-dark:#E06C75"> aService</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> factoryService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getSpecificService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"A"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        NetworkConfigVO</span><span style="color:#E06C75;--shiki-dark:#E06C75"> network</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> aService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getNetwork</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(networkConfigDTO);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ApiResult</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">success</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(network);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3>3.6 Observer Pattern</h3>
<p>Observer Pattern Ä‘á»‹nh nghÄ©a sá»± phá»¥ thuá»™c má»™t-nhiá»u giá»¯a cÃ¡c Ä‘á»‘i tÆ°á»£ng. Khi má»™t Ä‘á»‘i tÆ°á»£ng thay Ä‘á»•i tráº¡ng thÃ¡i, táº¥t cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng phá»¥ thuá»™c cá»§a nÃ³ sáº½ nháº­n Ä‘Æ°á»£c thÃ´ng bÃ¡o vÃ  tá»± Ä‘á»™ng cáº­p nháº­t.</p>
<h4>KhÃ¡i niá»‡m ban Ä‘áº§u vá» Observer Pattern: BÃ¡o chÃ­ vÃ  ngÆ°á»i Ä‘Äƒng kÃ½ = Observer Pattern.</h4>
<p><strong>CÃ¡c Ä‘iá»ƒm chÃ­nh:</strong></p>
<ul>
<li>Observer Pattern Ä‘á»‹nh nghÄ©a má»‘i quan há»‡ má»™t-nhiá»u giá»¯a cÃ¡c Ä‘á»‘i tÆ°á»£ng.</li>
<li>Chá»§ Ä‘á» (Subject) sá»­ dá»¥ng má»™t interface chung Ä‘á»ƒ cáº­p nháº­t cÃ¡c Observer.</li>
<li>CÃ¡c Observer vÃ  Subject Ä‘Æ°á»£c káº¿t há»£p vá»›i nhau báº±ng cÃ¡ch gáº¯n káº¿t lá»ng láº»o. Subject khÃ´ng biáº¿t chi tiáº¿t cá»§a cÃ¡c Observer, chá»‰ biáº¿t ráº±ng cÃ¡c Observer Ä‘Ã£ triá»ƒn khai interface Observer.</li>
<li>Khi sá»­ dá»¥ng máº«u nÃ y, báº¡n cÃ³ thá»ƒ Ä‘áº©y hoáº·c kÃ©o dá»¯ liá»‡u tá»« Subject (cÃ¡ch Ä‘áº©y Ä‘Æ°á»£c coi lÃ  chÃ­nh xÃ¡c hÆ¡n).</li>
<li>Khi cÃ³ nhiá»u Observer, khÃ´ng nÃªn dá»±a vÃ o thá»© tá»± thÃ´ng bÃ¡o cá»¥ thá»ƒ.</li>
<li>Java cung cáº¥p nhiá»u cÃ¡ch triá»ƒn khai Observer Pattern, bao gá»“m java.util.Observable, máº·c dÃ¹ cáº§n lÆ°u Ã½ vá» cÃ¡c váº¥n Ä‘á» cá»§a viá»‡c triá»ƒn khai Observable nÃ y. Náº¿u cáº§n thiáº¿t, cÃ³ thá»ƒ tá»± triá»ƒn khai Observable cá»§a riÃªng báº¡n.</li>
<li>Spring cÅ©ng sá»­ dá»¥ng Observer Pattern rá»™ng rÃ£i, vÃ­ dá»¥ nhÆ° ListenerEvent Ä‘á»ƒ Ä‘Äƒng kÃ½ vÃ  phÃ¡t hÃ nh thÃ´ng bÃ¡o.</li>
</ul>
<h4>VÃ­ dá»¥:</h4>
<p>ChÃºng ta sáº½ láº¥y vÃ­ dá»¥ vá» má»™t tráº¡m thá»i tiáº¿t. ThÃ´ng tin thá»i tiáº¿t biá»ƒu thá»‹ cho Subject, báº£ng thÃ´ng bÃ¡o thá»i tiáº¿t biá»ƒu thá»‹ cho cÃ¡c Observer. Khi thá»i tiáº¿t thay Ä‘á»•i (Subject), sáº½ thÃ´ng bÃ¡o cho táº¥t cáº£ cÃ¡c Observer vÃ  gá»i phÆ°Æ¡ng thá»©c cá»§a chÃºng Ä‘á»ƒ xá»­ lÃ½ dá»¯ liá»‡u.</p>
<p>Má»™t Ä‘á»‘i tÆ°á»£ng <code>WeatherData</code> chá»‹u trÃ¡ch nhiá»‡m theo dÃµi tÃ¬nh hÃ¬nh thá»i tiáº¿t hiá»‡n táº¡i (nhiá»‡t Ä‘á»™, Ä‘á»™ áº©m, Ã¡p suáº¥t). ChÃºng ta sáº½ táº¡o má»™t á»©ng dá»¥ng cÃ³ ba báº£ng thÃ´ng bÃ¡o, láº§n lÆ°á»£t hiá»ƒn thá»‹ tÃ¬nh tráº¡ng hiá»‡n táº¡i, thá»‘ng kÃª thá»i tiáº¿t vÃ  dá»± bÃ¡o Ä‘Æ¡n giáº£n. Khi Ä‘á»‘i tÆ°á»£ng <code>WeatherData</code> nháº­n Ä‘Æ°á»£c dá»¯ liá»‡u Ä‘o lÆ°á»ng má»›i nháº¥t, ba báº£ng thÃ´ng bÃ¡o pháº£i Ä‘Æ°á»£c cáº­p nháº­t theo thá»i gian thá»±c.</p>
<p><strong>PhÃ¢n tÃ­ch Ä‘á»‘i tÆ°á»£ng cá»§a á»©ng dá»¥ng giÃ¡m sÃ¡t thá»i tiáº¿t:</strong></p>
<p>Ba pháº§n cá»§a há»‡ thá»‘ng nÃ y lÃ :</p>
<ul>
<li>Tráº¡m thá»i tiáº¿t (thiáº¿t bá»‹ váº­t lÃ½ Ä‘á»ƒ láº¥y dá»¯ liá»‡u thá»i tiáº¿t thá»±c táº¿)</li>
<li>Äá»‘i tÆ°á»£ng <code>WeatherData</code> (dá»¯ liá»‡u cuá»‘i cÃ¹ng tá»« tráº¡m thá»i tiáº¿t vÃ  cáº­p nháº­t báº£ng thÃ´ng bÃ¡o)</li>
<li>Báº£ng thÃ´ng bÃ¡o (hiá»ƒn thá»‹ tÃ¬nh hÃ¬nh thá»i tiáº¿t hiá»‡n táº¡i cho ngÆ°á»i dÃ¹ng)</li>
</ul>
<p><strong>Triá»ƒn khai tráº¡m thá»i tiáº¿t:</strong></p>
<p><em>interface Subject:</em></p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Subject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // ÄÄƒng kÃ½ Observer</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> registerObserver</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Observer</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> o</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // XÃ³a Observer</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> removeObserver</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Observer</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> o</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Khi tráº¡ng thÃ¡i cá»§a Subject thay Ä‘á»•i, phÆ°Æ¡ng thá»©c nÃ y sáº½ Ä‘Æ°á»£c gá»i Ä‘á»ƒ thÃ´ng bÃ¡o cho táº¥t cáº£ cÃ¡c Observer</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> notifyObserver</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p><em>interface Observer:</em></p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Observer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Khi giÃ¡ trá»‹ quan sÃ¡t thay Ä‘á»•i, Subject sáº½ truyá»n cÃ¡c giÃ¡ trá»‹ tráº¡ng thÃ¡i nÃ y cho Observer dÆ°á»›i dáº¡ng tham sá»‘ cá»§a phÆ°Æ¡ng thá»©c</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> update</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">float</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> temp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">float</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> humidity</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">float</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> pressure</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p><em>Interface Display:</em></p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Display</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Khi cáº§n hiá»ƒn thá»‹ báº£ng thÃ´ng bÃ¡o, gá»i phÆ°Æ¡ng thá»©c nÃ y</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> display</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p><em>Triá»ƒn khai interface Subject trong <code>WeatherData</code>:</em></p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> WeatherData</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Subject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Observer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> observers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> float</span><span style="color:#E06C75;--shiki-dark:#E06C75"> temperature</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> float</span><span style="color:#E06C75;--shiki-dark:#E06C75"> humidity</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> float</span><span style="color:#E06C75;--shiki-dark:#E06C75"> pressure</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> WeatherData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        observers </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Observer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> registerObserver</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Observer</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> o</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        observers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(o);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> removeObserver</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Observer</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> o</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> observers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">indexOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(o);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            observers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">remove</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(i);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> notifyObserver</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Observer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> observer</span><span style="color:#C678DD;--shiki-dark:#C678DD"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> observers) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            observer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">update</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(temperature, humidity, pressure);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Khi nháº­n Ä‘Æ°á»£c giÃ¡ trá»‹ quan sÃ¡t má»›i tá»« tráº¡m thá»i tiáº¿t, thÃ´ng bÃ¡o cho Observer</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> measurementsChanged</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        notifyObserver</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> setMeasurements</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">float</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> temperature</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">float</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> humidity</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">float</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> pressure</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">temperature</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> temperature;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">humidity</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> humidity;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">pressure</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> pressure;</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        measurementsChanged</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // CÃ¡c phÆ°Æ¡ng thá»©c khÃ¡c cá»§a WeatherData</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>Táº¡o báº£ng thÃ´ng bÃ¡o:</em></p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CurrentConditionDisplay</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Observer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Display</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> float</span><span style="color:#E06C75;--shiki-dark:#E06C75"> temperature</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> float</span><span style="color:#E06C75;--shiki-dark:#E06C75"> humidity</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> float</span><span style="color:#E06C75;--shiki-dark:#E06C75"> pressure</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Subject</span><span style="color:#E06C75;--shiki-dark:#E06C75"> weatherData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> CurrentConditionDisplay</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Subject</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> weatherData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">weatherData</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> weatherData;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        weatherData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">registerObserver</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> display</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÃ¢y lÃ  dá»¯ liá»‡u thá»i tiáº¿t cáº­p nháº­t tá»« tráº¡m khÃ­ tÆ°á»£ng..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> update</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">float</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> temp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">float</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> humidity</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">float</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> pressure</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">temperature</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> temp;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">humidity</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> humidity;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">pressure</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> pressure;</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        display</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>Sá»­ dá»¥ng há»— trá»£ tÃ­ch há»£p Ä‘á»ƒ ghi Ä‘Ã¨ <code>WeatherData</code>:</em></p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> WeatherDataTWO</span><span style="color:#C678DD;--shiki-dark:#C678DD"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Observable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> float</span><span style="color:#E06C75;--shiki-dark:#E06C75"> temperature</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> float</span><span style="color:#E06C75;--shiki-dark:#E06C75"> humidity</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> float</span><span style="color:#E06C75;--shiki-dark:#E06C75"> pressure</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> WeatherDataTWO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> measurementsChanged</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Gá»i setChanged() trÆ°á»›c khi notifyObservers() Ä‘á»ƒ chá»‰ Ä‘á»‹nh tráº¡ng thÃ¡i Ä‘Ã£ thay Ä‘á»•i</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        setChanged</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // KhÃ´ng truyá»n Ä‘á»‘i tÆ°á»£ng dá»¯ liá»‡u khi gá»i notifyObservers, cÃ³ nghÄ©a lÃ  phÆ°Æ¡ng phÃ¡p kÃ©o Ä‘Æ°á»£c sá»­ dá»¥ng.</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        notifyObservers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> setMeasurements</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">float</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> temperature</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">float</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> humidity</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">float</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> pressure</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">temperature</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> temperature;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">humidity</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> humidity;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">pressure</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> pressure;</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        measurementsChanged</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> float</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getTemperature</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> temperature;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> float</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getHumidity</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> humidity;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> float</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getPressure</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> pressure;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>Sá»­ dá»¥ng tÃ­ch há»£p Observer Ä‘á»ƒ ghi Ä‘Ã¨ báº£ng thÃ´ng bÃ¡o:</em></p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CurrentConditionsDisplay</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E06C75;--shiki-dark:#E06C75"> java.util.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Observer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Display</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Observable</span><span style="color:#E06C75;--shiki-dark:#E06C75"> observable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> float</span><span style="color:#E06C75;--shiki-dark:#E06C75"> temperature</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> float</span><span style="color:#E06C75;--shiki-dark:#E06C75"> humidity</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> CurrentConditionsDisplay</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Observable</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> observable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">observable</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> observable;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        observable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">addObserver</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> display</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÃ¢y lÃ  dá»¯ liá»‡u thá»i tiáº¿t cáº­p nháº­t tá»« tráº¡m khÃ­ tÆ°á»£ng..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> update</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Observable</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> o</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Object</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> arg</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (o </span><span style="color:#C678DD;--shiki-dark:#C678DD">instanceof</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> WeatherDataTWO) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            WeatherDataTWO</span><span style="color:#E06C75;--shiki-dark:#E06C75"> weatherDataTWO</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (WeatherDataTWO) o;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">temperature</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> weatherDataTWO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getTemperature</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">humidity</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> weatherDataTWO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getHumidity</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            display</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>3.7 Template Method Pattern</h3>
<p>Template Method Pattern lÃ  má»™t máº«u thiáº¿t káº¿ hÃ nh vi. Máº«u nÃ y Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o cÃ¡c phÆ°Æ¡ng thá»©c rá»—ng vÃ  hoÃ£n má»™t sá»‘ bÆ°á»›c thá»±c hiá»‡n cho cÃ¡c lá»›p con.</p>
<p>PhÆ°Æ¡ng thá»©c khuÃ´n máº«u Ä‘á»‹nh nghÄ©a cÃ¡c bÆ°á»›c thá»±c hiá»‡n cá»§a má»™t thuáº­t toÃ¡n. NÃ³ cÃ³ thá»ƒ cung cáº¥p cÃ¡c bÆ°á»›c triá»ƒn khai máº·c Ä‘á»‹nh cÃ³ thá»ƒ sá»­ dá»¥ng chung cho táº¥t cáº£ hoáº·c má»™t pháº§n cÃ¡c lá»›p con. HÃ£y cÃ¹ng xem qua má»™t vÃ­ dá»¥ Ä‘Æ¡n giáº£n Ä‘á»ƒ hiá»ƒu vá» máº«u nÃ y: giáº£ sá»­ chÃºng ta muá»‘n cung cáº¥p má»™t thuáº­t toÃ¡n Ä‘á»ƒ xÃ¢y dá»±ng nhÃ . CÃ¡c bÆ°á»›c xÃ¢y dá»±ng nhÃ  gá»“m: xÃ¢y dá»±ng mÃ³ng, xÃ¢y dá»±ng trá»¥, xÃ¢y dá»±ng tÆ°á»ng vÃ  cá»­a sá»•.</p>
<p>Má»™t Ä‘iá»ƒm quan trá»ng lÃ  chÃºng ta khÃ´ng thá»ƒ thay Ä‘á»•i thá»© tá»± thá»±c hiá»‡n vÃ¬ khÃ´ng thá»ƒ xÃ¢y cá»­a sá»• trÆ°á»›c khi cÃ³ mÃ³ng. Trong trÆ°á»ng há»£p nÃ y, chÃºng ta cÃ³ thá»ƒ táº¡o má»™t phÆ°Æ¡ng thá»©c khuÃ´n máº«u Ä‘á»ƒ xÃ¢y nhÃ  vá»›i cÃ¡c phÆ°Æ¡ng thá»©c khÃ¡c nhau. MÃ³ng nhÃ  cho táº¥t cáº£ cÃ¡c loáº¡i nhÃ  Ä‘á»u giá»‘ng nhau, dÃ¹ lÃ  nhÃ  gá»—, nhÃ  kÃ­nh hay nhÃ  bÃª tÃ´ng.</p>
<p>ChÃºng ta cÃ³ thá»ƒ cung cáº¥p má»™t triá»ƒn khai cÆ¡ báº£n cho mÃ³ng nhÃ , vÃ  náº¿u cÃ¡c lá»›p con muá»‘n ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c nÃ y, há» cÃ³ thá»ƒ lá»±a chá»n. Tuy nhiÃªn, trong Ä‘a sá»‘ trÆ°á»ng há»£p, táº¥t cáº£ cÃ¡c loáº¡i nhÃ  Ä‘á»u giá»‘ng nhau. Äá»ƒ Ä‘áº£m báº£o cÃ¡c lá»›p con khÃ´ng ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c khuÃ´n máº«u, chÃºng ta nÃªn Ä‘Ã¡nh dáº¥u nÃ³ lÃ  phÆ°Æ¡ng thá»©c cuá»‘i cÃ¹ng (final).</p>
<h4>Lá»›p trá»«u tÆ°á»£ng Template Method</h4>
<p>VÃ¬ chÃºng ta muá»‘n má»™t sá»‘ phÆ°Æ¡ng thá»©c Ä‘Æ°á»£c cÃ¡c lá»›p con triá»ƒn khai, chÃºng ta pháº£i Ä‘áº·t lá»›p cÆ¡ sá»Ÿ cá»§a chÃºng ta lÃ  lá»›p trá»«u tÆ°á»£ng.</p>
<p><strong>Äá»‹nh nghÄ©a lá»›p trá»«u tÆ°á»£ng <code>HouseTemplate</code></strong></p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> abstract</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> HouseTemplate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * buildHouse() lÃ  phÆ°Æ¡ng thá»©c khuÃ´n máº«u, Ä‘á»‹nh nghÄ©a thá»© tá»± thá»±c hiá»‡n cÃ¡c bÆ°á»›c</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * template method, final nÃªn cÃ¡c lá»›p con khÃ´ng thá»ƒ ghi Ä‘Ã¨</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> buildHouse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // XÃ¢y dá»±ng mÃ³ng</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        buildFoundation</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // XÃ¢y dá»±ng trá»¥</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        buildPillars</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // XÃ¢y dá»±ng tÆ°á»ng</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        buildWalls</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // XÃ¢y dá»±ng cá»­a sá»•</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        buildWindows</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"House is built successfully"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> buildFoundation</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Building foundation with cement, iron rods and sand"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * CÃ¡c phÆ°Æ¡ng thá»©c sáº½ Ä‘Æ°á»£c cÃ¡c lá»›p con triá»ƒn khai</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> abstract</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> buildPillars</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> abstract</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> buildWalls</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * Triá»ƒn khai máº·c Ä‘á»‹nh</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> buildWindows</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Building Glass Windows"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>NhÃ  gá»— (WoodenHouse)</strong></p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">package</span><span style="color:#C678DD;--shiki-dark:#C678DD"> com.universal.core.design</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">P</span><span style="color:#C678DD;--shiki-dark:#C678DD">atterns.template</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">M</span><span style="color:#C678DD;--shiki-dark:#C678DD">ethod</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> * NhÃ  gá»—</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> WoodenHouse</span><span style="color:#C678DD;--shiki-dark:#C678DD"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> HouseTemplate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> buildPillars</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Building Pillars With Wood coating..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> buildWalls</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Building Wooden Walls..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>NhÃ  kÃ­nh (GlassHouse)</strong></p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">package</span><span style="color:#C678DD;--shiki-dark:#C678DD"> com.universal.core.design</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">P</span><span style="color:#C678DD;--shiki-dark:#C678DD">atterns.template</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">M</span><span style="color:#C678DD;--shiki-dark:#C678DD">ethod</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> * NhÃ  kÃ­nh</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> GlassHouse</span><span style="color:#C678DD;--shiki-dark:#C678DD"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> HouseTemplate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> buildPillars</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Building Pillars With Glass coating..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> buildWalls</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Building Glass Walls..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>NhÃ  bÃª tÃ´ng (ConcreteHouse)</strong></p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">package</span><span style="color:#C678DD;--shiki-dark:#C678DD"> com.universal.core.design</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">P</span><span style="color:#C678DD;--shiki-dark:#C678DD">atterns.template</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">M</span><span style="color:#C678DD;--shiki-dark:#C678DD">ethod</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> * NhÃ  bÃª tÃ´ng</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ConcreteHouse</span><span style="color:#C678DD;--shiki-dark:#C678DD"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> HouseTemplate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> buildPillars</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Building Pillars With Concrete coating..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> buildWalls</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Building Concrete Walls..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Client xÃ¢y dá»±ng nhÃ  (HousingClient)</strong></p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">package</span><span style="color:#C678DD;--shiki-dark:#C678DD"> com.universal.core.design</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">P</span><span style="color:#C678DD;--shiki-dark:#C678DD">atterns.template</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">M</span><span style="color:#C678DD;--shiki-dark:#C678DD">ethod</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> HousingClient</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        HouseTemplate</span><span style="color:#E06C75;--shiki-dark:#E06C75"> houseBuilder</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> WoodenHouse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        houseBuilder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">buildHouse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"</span></span></code></pre>
</div>]]></content:encoded>
    </item>
    <item>
      <title>Buffer and Channel</title>
      <link>https://vanhung4499.github.io/programming/java/nio/buffer-channel.html</link>
      <guid>https://vanhung4499.github.io/programming/java/nio/buffer-channel.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Buffer and Channel</source>
      <category>java</category>
      <pubDate>Sat, 06 Jul 2024 01:52:52 GMT</pubDate>
    </item>
    <item>
      <title>System Design</title>
      <link>https://vanhung4499.github.io/design/system-design/</link>
      <guid>https://vanhung4499.github.io/design/system-design/</guid>
      <source url="https://vanhung4499.github.io/rss.xml">System Design</source>
      <pubDate>Fri, 05 Jul 2024 10:10:42 GMT</pubDate>
    </item>
    <item>
      <title>Java Basic Must Know</title>
      <link>https://vanhung4499.github.io/interview/knowledge/java-must-know.html</link>
      <guid>https://vanhung4499.github.io/interview/knowledge/java-must-know.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Java Basic Must Know</source>
      <description>Java CÆ¡ Báº£n (Pháº£i Há»c Thuá»™c) ğŸ‰ NgÃ´n ngá»¯ Java cÃ³ nhá»¯ng Ä‘áº·c Ä‘iá»ƒm gÃ¬? Java lÃ  ngÃ´n ngá»¯ hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng hoÃ n toÃ n. NÃ³ cÃ³ thá»ƒ trá»±c tiáº¿p pháº£n Ã¡nh cÃ¡c Ä‘á»‘i tÆ°á»£ng trong cuá»™c sá»‘ng thá»±c. ...</description>
      <category>interview</category>
      <pubDate>Fri, 05 Jul 2024 10:10:42 GMT</pubDate>
      <content:encoded><![CDATA[
<h3>NgÃ´n ngá»¯ Java cÃ³ nhá»¯ng Ä‘áº·c Ä‘iá»ƒm gÃ¬?</h3>
<ul>
<li>Java lÃ  ngÃ´n ngá»¯ hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng hoÃ n toÃ n. NÃ³ cÃ³ thá»ƒ trá»±c tiáº¿p pháº£n Ã¡nh cÃ¡c Ä‘á»‘i tÆ°á»£ng trong cuá»™c sá»‘ng thá»±c.</li>
<li>CÃ³ tÃ­nh Ä‘á»™c láº­p ná»n táº£ng. Java sá»­ dá»¥ng MÃ¡y áº£o Java (JVM) Ä‘á»ƒ cháº¡y mÃ£ byte, báº¥t ká»ƒ lÃ  trÃªn Windows, Linux hay MacOS, cÃ¡c chÆ°Æ¡ng trÃ¬nh Java sau khi biÃªn dá»‹ch cÃ³ thá»ƒ cháº¡y trÃªn cÃ¡c ná»n táº£ng khÃ¡c.</li>
<li>Java lÃ  ngÃ´n ngá»¯ biÃªn dá»‹ch, trÃ¬nh biÃªn dá»‹ch chuyá»ƒn mÃ£ Java thÃ nh mÃ£ trung gian khÃ´ng phá»¥ thuá»™c ná»n táº£ng, sau Ä‘Ã³ cháº¡y trÃªn JVM, cÃ³ tÃ­nh di Ä‘á»™ng tá»‘t.</li>
<li>Java cung cáº¥p nhiá»u thÆ° viá»‡n tÃ­ch há»£p sáºµn. VÃ­ dá»¥ nhÆ° há»— trá»£ Ä‘a luá»“ng, há»— trá»£ giao tiáº¿p máº¡ng, vÃ  quan trá»ng nháº¥t lÃ  cung cáº¥p cÆ¡ cháº¿ thu gom rÃ¡c (garbage collector).</li>
<li>Java cÃ³ tÃ­nh báº£o máº­t vÃ  Ä‘á»™ tin cáº­y cao. Java cung cáº¥p cÆ¡ cháº¿ xá»­ lÃ½ ngoáº¡i lá»‡ vÃ  thu gom rÃ¡c, loáº¡i bá» cÃ¡c Ä‘áº·c tÃ­nh con trá» khÃ³ hiá»ƒu cá»§a C++.</li>
</ul>
<h3>Sá»± khÃ¡c biá»‡t giá»¯a JDK vÃ  JRE lÃ  gÃ¬?</h3>
<ul>
<li>JDK: Bá»™ cÃ´ng cá»¥ phÃ¡t triá»ƒn Java (Java Development Kit), cung cáº¥p mÃ´i trÆ°á»ng phÃ¡t triá»ƒn vÃ  cháº¡y Java.</li>
<li>JRE: MÃ´i trÆ°á»ng cháº¡y Java (Java Runtime Environment), cung cáº¥p mÃ´i trÆ°á»ng cáº§n thiáº¿t Ä‘á»ƒ cháº¡y Java.</li>
<li>JDK bao gá»“m JRE. Náº¿u chá»‰ cháº¡y chÆ°Æ¡ng trÃ¬nh Java, chá»‰ cáº§n cÃ i Ä‘áº·t JRE. Äá»ƒ viáº¿t chÆ°Æ¡ng trÃ¬nh Java, cáº§n cÃ i Ä‘áº·t JDK.</li>
</ul>
<h3>MÃ´ táº£ ngáº¯n gá»n cÃ¡c kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n trong Java</h3>
<ul>
<li>byte: Chiáº¿m 1 byte, pháº¡m vi giÃ¡ trá»‹ tá»« -128 Ä‘áº¿n 127.</li>
<li>short: Chiáº¿m 2 byte, pháº¡m vi giÃ¡ trá»‹ tá»« -2^15 Ä‘áº¿n 2^15-1.</li>
<li>int: Chiáº¿m 4 byte, pháº¡m vi giÃ¡ trá»‹ tá»« -2^31 Ä‘áº¿n 2^31-1.</li>
<li>long: Chiáº¿m 8 byte.</li>
<li>float: Chiáº¿m 4 byte.</li>
<li>double: Chiáº¿m 8 byte.</li>
<li>char: Chiáº¿m 2 byte.</li>
<li>boolean: KÃ­ch thÆ°á»›c chiáº¿m dá»¥ng tÃ¹y thuá»™c vÃ o viá»‡c triá»ƒn khai JVM.</li>
</ul>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» tá»± Ä‘á»™ng Ä‘Ã³ng gÃ³i vÃ  má»Ÿ gÃ³i</h3>
<p>Äá»‘i vá»›i cÃ¡c kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n cá»§a Java, Ä‘á»u cÃ³ má»™t lá»›p bao bá»c tÆ°Æ¡ng á»©ng.</p>
<p>ÄÃ³ng gÃ³i lÃ  tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n thÃ nh kiá»ƒu bao bá»c, nhÆ° int -&gt; Integer.</p>
<p>Má»Ÿ gÃ³i lÃ  tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i kiá»ƒu bao bá»c thÃ nh kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n, nhÆ° Integer -&gt; int.</p>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» cÃ¡c tá»« khÃ³a truy cáº­p trong Java</h3>
<ul>
<li>default: Tá»« khÃ³a truy cáº­p máº·c Ä‘á»‹nh, cÃ³ thá»ƒ nhÃ¬n tháº¥y trong cÃ¹ng má»™t gÃ³i.</li>
<li>private: CÃ³ thá»ƒ nhÃ¬n tháº¥y trong cÃ¹ng má»™t lá»›p, khÃ´ng thá»ƒ dÃ¹ng Ä‘á»ƒ sá»­a Ä‘á»•i lá»›p.</li>
<li>protected: CÃ³ thá»ƒ nhÃ¬n tháº¥y Ä‘á»‘i vá»›i cÃ¡c lá»›p trong cÃ¹ng má»™t gÃ³i vÃ  táº¥t cáº£ cÃ¡c lá»›p con, khÃ´ng thá»ƒ dÃ¹ng Ä‘á»ƒ sá»­a Ä‘á»•i lá»›p.</li>
<li>public: CÃ³ thá»ƒ nhÃ¬n tháº¥y Ä‘á»‘i vá»›i táº¥t cáº£ cÃ¡c lá»›p.</li>
</ul>
<h3>Thá»© tá»± khá»Ÿi táº¡o cá»§a phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o, biáº¿n thÃ nh viÃªn vÃ  biáº¿n thÃ nh viÃªn tÄ©nh lÃ  gÃ¬?</h3>
<p>Thá»© tá»±: Biáº¿n thÃ nh viÃªn tÄ©nh, biáº¿n thÃ nh viÃªn, phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o.</p>
<p>Thá»© tá»± chi tiáº¿t: Biáº¿n tÄ©nh cá»§a lá»›p cha, khá»‘i mÃ£ tÄ©nh cá»§a lá»›p cha, biáº¿n tÄ©nh cá»§a lá»›p con, khá»‘i mÃ£ tÄ©nh cá»§a lá»›p con, biáº¿n khÃ´ng tÄ©nh cá»§a lá»›p cha, khá»‘i mÃ£ khÃ´ng tÄ©nh cá»§a lá»›p cha, hÃ m khá»Ÿi táº¡o cá»§a lá»›p cha, biáº¿n khÃ´ng tÄ©nh cá»§a lá»›p con, khá»‘i mÃ£ khÃ´ng tÄ©nh cá»§a lá»›p con, hÃ m khá»Ÿi táº¡o cá»§a lá»›p con.</p>
<h3>Thá»© tá»± thá»±c thi cá»§a cÃ¡c khá»‘i mÃ£ trong Java</h3>
<ul>
<li>Khá»‘i mÃ£ tÄ©nh cá»§a lá»›p cha (chá»‰ thá»±c thi má»™t láº§n).</li>
<li>Khá»‘i mÃ£ tÄ©nh cá»§a lá»›p con (chá»‰ thá»±c thi má»™t láº§n).</li>
<li>Khá»‘i mÃ£ khá»Ÿi táº¡o cá»§a lá»›p cha.</li>
<li>HÃ m khá»Ÿi táº¡o cá»§a lá»›p cha.</li>
<li>Khá»‘i mÃ£ khá»Ÿi táº¡o cá»§a lá»›p con.</li>
<li>HÃ m khá»Ÿi táº¡o cá»§a lá»›p con.</li>
<li>Khá»‘i mÃ£ thÃ´ng thÆ°á»ng.</li>
</ul>
<h3>Ba Ä‘áº·c tÃ­nh cá»§a láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng lÃ  gÃ¬?</h3>
<ul>
<li>Káº¿ thá»«a: Má»™t lá»›p má»›i cÃ³ thá»ƒ Ä‘Æ°á»£c dáº«n xuáº¥t tá»« lá»›p hiá»‡n cÃ³, lá»›p dáº«n xuáº¥t cÃ³ thá»ƒ thá»«a hÆ°á»Ÿng cÃ¡c phÆ°Æ¡ng thá»©c vÃ  biáº¿n thá»ƒ hiá»‡n cá»§a lá»›p cÆ¡ sá»Ÿ, vÃ  lá»›p dáº«n xuáº¥t cÃ³ thá»ƒ sá»­a Ä‘á»•i hoáº·c thÃªm má»›i cÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ phÃ¹ há»£p hÆ¡n vá»›i nhu cáº§u Ä‘áº·c biá»‡t.</li>
<li>ÄÃ³ng gÃ³i: Biáº¿n Ä‘á»•i cÃ¡c Ä‘á»‘i tÆ°á»£ng trong tháº¿ giá»›i thá»±c thÃ nh lá»›p, má»—i lá»›p cÃ³ thá»ƒ Ä‘á»ƒ dá»¯ liá»‡u vÃ  phÆ°Æ¡ng thá»©c cá»§a mÃ¬nh chá»‰ Ä‘Æ°á»£c cÃ¡c lá»›p hoáº·c Ä‘á»‘i tÆ°á»£ng tin cáº­y thao tÃ¡c, vÃ  che giáº¥u thÃ´ng tin Ä‘á»‘i vá»›i cÃ¡c lá»›p khÃ´ng tin cáº­y.</li>
<li>Äa hÃ¬nh: Cho phÃ©p cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c nhau pháº£n há»“i cÃ¹ng má»™t thÃ´ng Ä‘iá»‡p. CÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c nhau gá»i cÃ¹ng má»™t phÆ°Æ¡ng thá»©c, dÃ¹ tham sá»‘ giá»‘ng nhau, nhÆ°ng hÃ nh vi cuá»‘i cÃ¹ng sáº½ khÃ¡c nhau.</li>
</ul>
<h3>Táº¡i sao ngÃ´n ngá»¯ Java khÃ´ng há»— trá»£ Ä‘a káº¿ thá»«a?</h3>
<p>Äá»ƒ cáº¥u trÃºc cá»§a chÆ°Æ¡ng trÃ¬nh rÃµ rÃ ng hÆ¡n vÃ  dá»… báº£o trÃ¬. Giáº£ sá»­ ngÃ´n ngá»¯ Java há»— trá»£ Ä‘a káº¿ thá»«a, lá»›p C káº¿ thá»«a tá»« lá»›p A vÃ  lá»›p B, náº¿u cáº£ lá»›p A vÃ  B Ä‘á»u cÃ³ phÆ°Æ¡ng thá»©c thÃ nh viÃªn <code>f()</code>, thÃ¬ khi gá»i phÆ°Æ¡ng thá»©c <code>f()</code> cá»§a lá»›p C sáº½ gÃ¢y ra sá»± mÆ¡ há»“.</p>
<p>NgÃ´n ngá»¯ Java giÃ¡n tiáº¿p há»— trá»£ Ä‘a káº¿ thá»«a thÃ´ng qua viá»‡c triá»ƒn khai nhiá»u interface. interface chá»‰ chá»©a Ä‘á»‹nh nghÄ©a phÆ°Æ¡ng thá»©c, khÃ´ng cÃ³ triá»ƒn khai phÆ°Æ¡ng thá»©c, do Ä‘Ã³ khi lá»›p C triá»ƒn khai interface A vÃ  interface B, dÃ¹ cáº£ hai Ä‘á»u cÃ³ phÆ°Æ¡ng thá»©c <code>f()</code>, thÃ¬ váº«n khÃ´ng thá»ƒ gá»i trá»±c tiáº¿p phÆ°Æ¡ng thá»©c mÃ  pháº£i triá»ƒn khai cá»¥ thá»ƒ phÆ°Æ¡ng thá»©c <code>f()</code> má»›i cÃ³ thá»ƒ gá»i, do Ä‘Ã³ khÃ´ng gÃ¢y ra sá»± mÆ¡ há»“.</p>
<p>Äa káº¿ thá»«a lÃ m cho viá»‡c chuyá»ƒn Ä‘á»•i kiá»ƒu dá»¯ liá»‡u vÃ  thá»© tá»± gá»i phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o trá»Ÿ nÃªn phá»©c táº¡p, áº£nh hÆ°á»Ÿng Ä‘áº¿n hiá»‡u suáº¥t.</p>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» Ä‘a hÃ¬nh trong Java</h3>
<p>Äa hÃ¬nh trong Java cÃ³ thá»ƒ chia thÃ nh Ä‘a hÃ¬nh thá»i gian biÃªn dá»‹ch vÃ  Ä‘a hÃ¬nh thá»i gian cháº¡y.</p>
<p>Äa hÃ¬nh thá»i gian biÃªn dá»‹ch chá»§ yáº¿u lÃ  quÃ¡ táº£i phÆ°Æ¡ng thá»©c (method overloading), tá»©c lÃ  phÃ¢n biá»‡t cÃ¡c phÆ°Æ¡ng thá»©c khÃ¡c nhau thÃ´ng qua danh sÃ¡ch tham sá»‘.</p>
<p>Äa hÃ¬nh thá»i gian cháº¡y chá»§ yáº¿u lÃ  khi káº¿ thá»«a lá»›p cha vÃ  triá»ƒn khai interface, cÃ³ thá»ƒ sá»­ dá»¥ng tham chiáº¿u cá»§a lá»›p cha Ä‘á»ƒ trá» Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p con.</p>
<p>Äa hÃ¬nh thá»i gian cháº¡y Ä‘Æ°á»£c triá»ƒn khai thÃ´ng qua báº£ng phÆ°Æ¡ng thá»©c. Trong báº£ng phÆ°Æ¡ng thá»©c, Ä‘áº§u tiÃªn lÃ  cÃ¡c phÆ°Æ¡ng thá»©c cá»§a lá»›p Object, tiáº¿p theo lÃ  cÃ¡c phÆ°Æ¡ng thá»©c cá»§a lá»›p cha, cuá»‘i cÃ¹ng lÃ  cÃ¡c phÆ°Æ¡ng thá»©c cá»§a lá»›p Ä‘Ã³. Náº¿u lá»›p con ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c cá»§a lá»›p cha, thÃ¬ lá»›p con vÃ  lá»›p cha sáº½ chia sáº» cÃ¹ng má»™t má»¥c trong báº£ng phÆ°Æ¡ng thá»©c, vÃ  Ä‘á»u Ä‘Æ°á»£c coi lÃ  phÆ°Æ¡ng thá»©c cá»§a lá»›p cha. Do Ä‘Ã³ cÃ³ thá»ƒ triá»ƒn khai Ä‘a hÃ¬nh thá»i gian cháº¡y.</p>
<h3>CÆ¡ cháº¿ Ä‘a hÃ¬nh mÃ  Java cung cáº¥p?</h3>
<p>Java cung cáº¥p hai cÆ¡ cháº¿ cho Ä‘a hÃ¬nh lÃ  quÃ¡ táº£i vÃ  ghi Ä‘Ã¨.</p>
<p>QuÃ¡ táº£i: QuÃ¡ táº£i lÃ  khi trong cÃ¹ng má»™t lá»›p cÃ³ nhiá»u phÆ°Æ¡ng thá»©c cÃ¹ng tÃªn nhÆ°ng khÃ¡c tham sá»‘. Trong quÃ¡ trÃ¬nh biÃªn dá»‹ch, cÃ³ thá»ƒ xÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c phÆ°Æ¡ng thá»©c nÃ o sáº½ Ä‘Æ°á»£c gá»i.</p>
<p>Ghi Ä‘Ã¨: Ghi Ä‘Ã¨ lÃ  khi lá»›p dáº«n xuáº¥t ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c cá»§a lá»›p cÆ¡ sá»Ÿ. Sá»­ dá»¥ng tham chiáº¿u cá»§a lá»›p cÆ¡ sá»Ÿ Ä‘á»ƒ trá» Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p dáº«n xuáº¥t, hoáº·c biáº¿n tham chiáº¿u cá»§a interface trá» Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p triá»ƒn khai interface, trong thá»i gian cháº¡y, phÆ°Æ¡ng thá»©c nÃ o sáº½ Ä‘Æ°á»£c gá»i Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh dá»±a trÃªn Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ mÃ  biáº¿n tham chiáº¿u trá» Ä‘áº¿n.</p>
<h3>Sá»± khÃ¡c biá»‡t giá»¯a quÃ¡ táº£i vÃ  ghi Ä‘Ã¨?</h3>
<ul>
<li>Ghi Ä‘Ã¨ lÃ  má»‘i quan há»‡ giá»¯a lá»›p cha vÃ  lá»›p con, lÃ  má»‘i quan há»‡ dá»c; quÃ¡ táº£i lÃ  má»‘i quan há»‡ giá»¯a cÃ¡c phÆ°Æ¡ng thá»©c trong cÃ¹ng má»™t lá»›p, lÃ  má»‘i quan há»‡ ngang.</li>
<li>Ghi Ä‘Ã¨ chá»‰ cÃ³ thá»ƒ xáº£y ra giá»¯a má»™t phÆ°Æ¡ng thá»©c hoáº·c má»™t cáº·p phÆ°Æ¡ng thá»©c; quÃ¡ táº£i lÃ  má»‘i quan há»‡ giá»¯a nhiá»u phÆ°Æ¡ng thá»©c.</li>
<li>Ghi Ä‘Ã¨ yÃªu cáº§u danh sÃ¡ch tham sá»‘ giá»‘ng nhau; quÃ¡ táº£i yÃªu cáº§u danh sÃ¡ch tham sá»‘ khÃ¡c nhau.</li>
<li>Trong ghi Ä‘Ã¨, phÆ°Æ¡ng thá»©c Ä‘Æ°á»£c gá»i Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh dá»±a trÃªn kiá»ƒu cá»§a Ä‘á»‘i tÆ°á»£ng; trong quÃ¡ táº£i, phÆ°Æ¡ng thá»©c Ä‘Æ°á»£c chá»n dá»±a trÃªn danh sÃ¡ch tham sá»‘ táº¡i thá»i Ä‘iá»ƒm gá»i.</li>
<li>PhÆ°Æ¡ng thá»©c quÃ¡ táº£i cÃ³ thá»ƒ thay Ä‘á»•i kiá»ƒu tráº£ vá», phÆ°Æ¡ng thá»©c ghi Ä‘Ã¨ khÃ´ng thá»ƒ thay Ä‘á»•i kiá»ƒu tráº£ vá».</li>
</ul>
<h3>Äiá»ƒm giá»‘ng vÃ  khÃ¡c nhau giá»¯a interface vÃ  lá»›p trá»«u tÆ°á»£ng?</h3>
<p>Äiá»ƒm giá»‘ng:</p>
<ul>
<li>Äá»u khÃ´ng thá»ƒ Ä‘Æ°á»£c khá»Ÿi táº¡o trá»±c tiáº¿p.</li>
<li>Lá»›p triá»ƒn khai interface hoáº·c lá»›p con cá»§a lá»›p trá»«u tÆ°á»£ng pháº£i triá»ƒn khai cÃ¡c phÆ°Æ¡ng thá»©c tÆ°Æ¡ng á»©ng Ä‘á»ƒ cÃ³ thá»ƒ khá»Ÿi táº¡o.</li>
</ul>
<p>Äiá»ƒm khÃ¡c:</p>
<ul>
<li>interface chá»‰ cÃ³ Ä‘á»‹nh nghÄ©a phÆ°Æ¡ng thá»©c, khÃ´ng cÃ³ triá»ƒn khai phÆ°Æ¡ng thá»©c, trong khi lá»›p trá»«u tÆ°á»£ng cÃ³ thá»ƒ cÃ³ cáº£ Ä‘á»‹nh nghÄ©a vÃ  triá»ƒn khai phÆ°Æ¡ng thá»©c.</li>
<li>Tá»« khÃ³a Ä‘á»ƒ triá»ƒn khai interface lÃ  <code>implements</code>, tá»« khÃ³a Ä‘á»ƒ káº¿ thá»«a lá»›p trá»«u tÆ°á»£ng lÃ  <code>extends</code>. Má»™t lá»›p cÃ³ thá»ƒ triá»ƒn khai nhiá»u interface, nhÆ°ng chá»‰ cÃ³ thá»ƒ káº¿ thá»«a má»™t lá»›p trá»«u tÆ°á»£ng.</li>
<li>Khi cÃ³ má»‘i quan há»‡ vá» máº·t logic giá»¯a lá»›p con vÃ  lá»›p cha, nÃªn sá»­ dá»¥ng lá»›p trá»«u tÆ°á»£ng, giÃºp tÃ­ch lÅ©y chá»©c nÄƒng. Khi khÃ´ng cáº§n cÃ³ má»‘i quan há»‡ cá»¥ thá»ƒ vÃ  muá»‘n há»— trá»£ hÃ nh vi Ä‘áº·c biá»‡t giá»¯a hai hoáº·c nhiá»u Ä‘á»‘i tÆ°á»£ng, nÃªn sá»­ dá»¥ng interface. Sá»­ dá»¥ng interface giÃºp giáº£m má»©c Ä‘á»™ gáº¯n káº¿t cá»§a há»‡ thá»‘ng pháº§n má»m, dá»… báº£o trÃ¬ hoáº·c thÃªm bá»›t phÆ°Æ¡ng thá»©c sau nÃ y.</li>
</ul>
<h3>MÃ´ táº£ ngáº¯n gá»n sá»± khÃ¡c biá»‡t giá»¯a lá»›p trá»«u tÆ°á»£ng vÃ  interface</h3>
<p>Lá»›p trá»«u tÆ°á»£ng: Thá»ƒ hiá»‡n má»‘i quan há»‡ "is-a", nhÆ° Ä‘á»‘i vá»›i "man is a person", cÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a <code>person</code> lÃ  lá»›p trá»«u tÆ°á»£ng.</p>
<p>interface: Thá»ƒ hiá»‡n má»‘i quan há»‡ "can". LÃ m máº«u Ä‘á»ƒ triá»ƒn khai. NhÆ° interface <code>fly</code>, lá»›p <code>plane</code> vÃ  lá»›p <code>bird</code> Ä‘á»u cÃ³ thá»ƒ triá»ƒn khai interface nÃ y.</p>
<p>Má»™t lá»›p chá»‰ cÃ³ thá»ƒ káº¿ thá»«a má»™t lá»›p trá»«u tÆ°á»£ng, nhÆ°ng cÃ³ thá»ƒ triá»ƒn khai nhiá»u interface.</p>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» lá»›p bÃªn trong vÃ  chá»©c nÄƒng cá»§a nÃ³</h3>
<ul>
<li>Lá»›p bÃªn trong lÃ  thÃ nh viÃªn: LÃ  lá»›p bÃªn trong nhÆ° má»™t thÃ nh viÃªn cá»§a lá»›p bÃªn ngoÃ i. CÃ³ thá»ƒ truy cáº­p cÃ¡c thuá»™c tÃ­nh vÃ  phÆ°Æ¡ng thá»©c cá»§a lá»›p bÃªn ngoÃ i cÃ³ pháº¡m vi truy cáº­p tá»« private trá»Ÿ lÃªn. Lá»›p bÃªn ngoÃ i muá»‘n truy cáº­p cÃ¡c thuá»™c tÃ­nh hoáº·c phÆ°Æ¡ng thá»©c cá»§a lá»›p bÃªn trong, pháº£i táº¡o má»™t Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p bÃªn trong, sau Ä‘Ã³ truy cáº­p thÃ´ng qua Ä‘á»‘i tÆ°á»£ng Ä‘Ã³. Lá»›p bÃªn ngoÃ i cÅ©ng cÃ³ thá»ƒ truy cáº­p cÃ¡c thuá»™c tÃ­nh Ä‘Æ°á»£c sá»­a Ä‘á»•i báº±ng private cá»§a lá»›p bÃªn trong.</li>
<li>Lá»›p bÃªn trong cá»¥c bá»™: LÃ  lá»›p bÃªn trong tá»“n táº¡i trong phÆ°Æ¡ng thá»©c. Pháº¡m vi truy cáº­p giá»‘ng nhÆ° biáº¿n cá»¥c bá»™, chá»‰ cÃ³ thá»ƒ truy cáº­p cÃ¡c biáº¿n final cá»§a lá»›p bÃªn ngoÃ i.</li>
<li>Lá»›p bÃªn trong áº©n danh: Chá»‰ sá»­ dá»¥ng má»™t láº§n, khÃ´ng cÃ³ tÃªn lá»›p, chá»‰ cÃ³ thá»ƒ truy cáº­p cÃ¡c biáº¿n final cá»§a lá»›p bÃªn ngoÃ i.</li>
<li>Lá»›p bÃªn trong tÄ©nh: Giá»‘ng nhÆ° biáº¿n tÄ©nh cá»§a lá»›p. CÃ³ thá»ƒ Ä‘Æ°á»£c khá»Ÿi táº¡o mÃ  khÃ´ng cáº§n phá»¥ thuá»™c vÃ o Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p bÃªn ngoÃ i. Lá»›p bÃªn trong tÄ©nh khÃ´ng thá»ƒ cÃ³ tÃªn giá»‘ng vá»›i lá»›p bÃªn ngoÃ i, khÃ´ng thá»ƒ truy cáº­p cÃ¡c biáº¿n thÃ nh viÃªn thÃ´ng thÆ°á»ng, chá»‰ cÃ³ thá»ƒ truy cáº­p cÃ¡c thÃ nh viÃªn tÄ©nh vÃ  phÆ°Æ¡ng thá»©c tÄ©nh cá»§a lá»›p bÃªn ngoÃ i.</li>
</ul>
<h3>TÃ¡c dá»¥ng cá»§a tá»« khÃ³a <code>static</code> trong ngÃ´n ngá»¯ Java lÃ  gÃ¬?</h3>
<p><code>static</code> cÃ³ hai tÃ¡c dá»¥ng chÃ­nh:</p>
<ul>
<li>PhÃ¢n bá»• khÃ´ng gian lÆ°u trá»¯ duy nháº¥t khÃ´ng liÃªn quan Ä‘áº¿n sá»‘ lÆ°á»£ng Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c táº¡o ra cho má»™t loáº¡i dá»¯ liá»‡u hoáº·c Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ.</li>
<li>LiÃªn káº¿t má»™t phÆ°Æ¡ng thá»©c hoáº·c thuá»™c tÃ­nh vá»›i lá»›p thay vÃ¬ Ä‘á»‘i tÆ°á»£ng, nghÄ©a lÃ  cÃ³ thá»ƒ gá»i phÆ°Æ¡ng thá»©c hoáº·c sá»­ dá»¥ng thuá»™c tÃ­nh cá»§a lá»›p mÃ  khÃ´ng cáº§n táº¡o Ä‘á»‘i tÆ°á»£ng.</li>
</ul>
<p>Cá»¥ thá»ƒ, <code>static</code> cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng theo 4 cÃ¡ch:</p>
<ul>
<li>Sá»­a Ä‘á»•i biáº¿n thÃ nh viÃªn: Biáº¿n tÄ©nh Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi tá»« khÃ³a <code>static</code> chá»‰ cÃ³ má»™t báº£n sao trong bá»™ nhá»›. Khi lá»›p chá»©a biáº¿n tÄ©nh Ä‘Æ°á»£c táº£i, biáº¿n tÄ©nh nÃ y sáº½ Ä‘Æ°á»£c phÃ¢n bá»• khÃ´ng gian vÃ  cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng theo cÃ¡ch "lá»›p.biáº¿n tÄ©nh" hoáº·c "Ä‘á»‘i tÆ°á»£ng.biáº¿n tÄ©nh".</li>
<li>Sá»­a Ä‘á»•i phÆ°Æ¡ng thá»©c thÃ nh viÃªn: PhÆ°Æ¡ng thá»©c tÄ©nh Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi <code>static</code> cÃ³ thá»ƒ Ä‘Æ°á»£c gá»i mÃ  khÃ´ng cáº§n táº¡o Ä‘á»‘i tÆ°á»£ng. Trong phÆ°Æ¡ng thá»©c tÄ©nh khÃ´ng thá»ƒ sá»­ dá»¥ng tá»« khÃ³a <code>this</code> vÃ  <code>super</code>, khÃ´ng thá»ƒ gá»i phÆ°Æ¡ng thá»©c khÃ´ng tÄ©nh, chá»‰ cÃ³ thá»ƒ truy cáº­p cÃ¡c thÃ nh viÃªn tÄ©nh vÃ  phÆ°Æ¡ng thá»©c tÄ©nh cá»§a lá»›p Ä‘Ã³.</li>
<li>Sá»­a Ä‘á»•i khá»‘i mÃ£: JVM sáº½ thá»±c thi khá»‘i mÃ£ tÄ©nh khi táº£i lá»›p. Khá»‘i mÃ£ tÄ©nh thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ khá»Ÿi táº¡o cÃ¡c biáº¿n tÄ©nh. Khá»‘i mÃ£ tÄ©nh chá»‰ Ä‘Æ°á»£c thá»±c thi má»™t láº§n.</li>
<li>Sá»­a Ä‘á»•i lá»›p bÃªn trong: Lá»›p bÃªn trong tÄ©nh cÃ³ thá»ƒ Ä‘Æ°á»£c khá»Ÿi táº¡o mÃ  khÃ´ng cáº§n phá»¥ thuá»™c vÃ o Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p bÃªn ngoÃ i. Lá»›p bÃªn trong tÄ©nh khÃ´ng thá»ƒ cÃ³ tÃªn giá»‘ng vá»›i lá»›p bÃªn ngoÃ i vÃ  chá»‰ cÃ³ thá»ƒ truy cáº­p cÃ¡c thÃ nh viÃªn tÄ©nh vÃ  phÆ°Æ¡ng thá»©c tÄ©nh cá»§a lá»›p bÃªn ngoÃ i.</li>
</ul>
<h3>Táº¡i sao láº¡i thiáº¿t káº¿ String lÃ  khÃ´ng thá»ƒ thay Ä‘á»•i?</h3>
<ul>
<li>Tiáº¿t kiá»‡m khÃ´ng gian: CÃ¡c chuá»—i háº±ng Ä‘Æ°á»£c lÆ°u trá»¯ trong bá»ƒ chuá»—i cá»§a JVM vÃ  cÃ³ thá»ƒ Ä‘Æ°á»£c chia sáº» bá»Ÿi ngÆ°á»i dÃ¹ng.</li>
<li>TÄƒng hiá»‡u suáº¥t: String cÃ³ thá»ƒ Ä‘Æ°á»£c chia sáº» bá»Ÿi cÃ¡c luá»“ng khÃ¡c nhau vÃ  lÃ  an toÃ n vá»›i luá»“ng. Trong cÃ¡c thao tÃ¡c liÃªn quan Ä‘áº¿n Ä‘a luá»“ng khÃ´ng cáº§n thao tÃ¡c Ä‘á»“ng bá»™.</li>
<li>An toÃ n: String thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng cho tÃªn ngÆ°á»i dÃ¹ng, máº­t kháº©u, tÃªn tá»‡p, do Ä‘Ã³ tÃ­nh khÃ´ng thá»ƒ thay Ä‘á»•i cá»§a nÃ³ giÃºp trÃ¡nh cÃ¡c thao tÃ¡c thay Ä‘á»•i Ä‘á»™c háº¡i cá»§a hacker.</li>
</ul>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» String/StringBuffer vÃ  StringBuilder</h3>
<p>Lá»›p String sá»­ dá»¥ng máº£ng kÃ½ tá»± Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi <code>final</code> Ä‘á»ƒ lÆ°u trá»¯ chuá»—i, do Ä‘Ã³ khÃ´ng thá»ƒ thay Ä‘á»•i. Náº¿u muá»‘n sá»­a Ä‘á»•i Ä‘á»‘i tÆ°á»£ng kiá»ƒu String, cáº§n táº¡o Ä‘á»‘i tÆ°á»£ng má»›i vÃ  lÆ°u cáº£ kÃ½ tá»± cÅ© vÃ  kÃ½ tá»± má»›i thÃªm vÃ o.</p>
<p>StringBuilder sá»­ dá»¥ng máº£ng kÃ½ tá»± khÃ´ng Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi <code>final</code>, do Ä‘Ã³ cÃ³ thá»ƒ thay Ä‘á»•i nhÆ°ng khÃ´ng an toÃ n trong mÃ´i trÆ°á»ng Ä‘a luá»“ng.</p>
<p>StringBuffer cÅ©ng sá»­ dá»¥ng máº£ng kÃ½ tá»± khÃ´ng Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi <code>final</code>, cÃ³ thá»ƒ hiá»ƒu lÃ  StringBuilder an toÃ n vá»›i mÃ´i trÆ°á»ng Ä‘a luá»“ng.</p>
<h3>Sá»± khÃ¡c biá»‡t giá»¯a toÃ¡n tá»­ so sÃ¡nh == vÃ  phÆ°Æ¡ng thá»©c equals?</h3>
<p>== so sÃ¡nh tham chiáº¿u, cÃ²n equals so sÃ¡nh ná»™i dung.</p>
<p>Náº¿u biáº¿n lÃ  kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n, == Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ so sÃ¡nh giÃ¡ trá»‹ tÆ°Æ¡ng á»©ng. Náº¿u biáº¿n trá» Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng, == Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ so sÃ¡nh xem hai Ä‘á»‘i tÆ°á»£ng cÃ³ trá» Ä‘áº¿n cÃ¹ng má»™t vÃ¹ng nhá»› hay khÃ´ng.</p>
<p>equals lÃ  má»™t phÆ°Æ¡ng thá»©c cá»§a lá»›p Object, má»—i lá»›p trong Java Ä‘á»u káº¿ thá»«a tá»« Object, do Ä‘Ã³ má»—i Ä‘á»‘i tÆ°á»£ng Ä‘á»u cÃ³ phÆ°Æ¡ng thá»©c equals. Trong lá»›p Object, phÆ°Æ¡ng thá»©c equals so sÃ¡nh tham chiáº¿u cá»§a Ä‘á»‘i tÆ°á»£ng. Tuy nhiÃªn, báº±ng cÃ¡ch ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c nÃ y, cÃ³ thá»ƒ so sÃ¡nh ná»™i dung cá»§a Ä‘á»‘i tÆ°á»£ng thay vÃ¬ tham chiáº¿u.</p>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» cÃ¡c phÆ°Æ¡ng thá»©c thÆ°á»ng dÃ¹ng cá»§a lá»›p Object</h3>
<ul>
<li>hashCode: TÃ­nh mÃ£ bÄƒm cá»§a Ä‘á»‘i tÆ°á»£ng, Ä‘Æ°á»£c sá»­ dá»¥ng cho cÃ¡c cáº¥u trÃºc dá»¯ liá»‡u kiá»ƒu map hoáº·c phÆ°Æ¡ng thá»©c equals. Cáº§n Ä‘áº£m báº£o ráº±ng má»™t Ä‘á»‘i tÆ°á»£ng khi Ä‘Æ°á»£c gá»i nhiá»u láº§n phÆ°Æ¡ng thá»©c nÃ y luÃ´n tráº£ vá» cÃ¹ng má»™t giÃ¡ trá»‹ nguyÃªn.</li>
<li>equals: XÃ¡c Ä‘á»‹nh hai Ä‘á»‘i tÆ°á»£ng cÃ³ báº±ng nhau khÃ´ng. Cáº§n Ä‘áº£m báº£o ráº±ng náº¿u phÆ°Æ¡ng thá»©c equals cá»§a hai Ä‘á»‘i tÆ°á»£ng tráº£ vá» true, mÃ£ bÄƒm cá»§a chÃºng cÅ©ng pháº£i giá»‘ng nhau.</li>
<li>toString: Tráº£ vá» chuá»—i Ä‘áº¡i diá»‡n cho Ä‘á»‘i tÆ°á»£ng.</li>
<li>clone: Sao chÃ©p sÃ¢u má»™t Ä‘á»‘i tÆ°á»£ng.</li>
</ul>
<h3>CÃ¡ch khai bÃ¡o máº£ng má»™t chiá»u vÃ  máº£ng hai chiá»u trong Java?</h3>
<p>CÃ¡ch khai bÃ¡o máº£ng má»™t chiá»u:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">type arrayName[]</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">type[] arrayName</span></span></code></pre>
</div><p>CÃ¡ch khai bÃ¡o máº£ng hai chiá»u:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">type arrayName[][]</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">type[][] arrayName</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">type[] arrayName[]</span></span></code></pre>
</div><p>Trong Ä‘Ã³, <code>type</code> lÃ  kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n hoáº·c lá»›p, <code>arrayName</code> lÃ  tÃªn máº£ng.</p>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» cÃ¡c loáº¡i ngoáº¡i lá»‡ trong Java</h3>
<p>Java chia ngoáº¡i lá»‡ thÃ nh Error (lá»—i khÃ´ng thá»ƒ xá»­ lÃ½ bá»Ÿi chÆ°Æ¡ng trÃ¬nh) vÃ  Exception (ngoáº¡i lá»‡ cÃ³ thá»ƒ xá»­ lÃ½ bá»Ÿi chÆ°Æ¡ng trÃ¬nh). Cáº£ hai lá»›p nÃ y Ä‘á»u káº¿ thá»«a tá»« Throwable.</p>
<p>Error phá»• biáº¿n nhÆ° StackOverFlowError, OutOfMemoryError,...</p>
<p>Exception chia thÃ nh ngoáº¡i lá»‡ runtime vÃ  non-runtime. Äá»‘i vá»›i ngoáº¡i lá»‡ runtime, cÃ³ thá»ƒ xá»­ lÃ½ báº±ng cÃ¡ch sá»­ dá»¥ng try-catch hoáº·c khÃ´ng. Äá»‘i vá»›i ngoáº¡i lá»‡ non-runtime, báº¯t buá»™c pháº£i xá»­ lÃ½, náº¿u khÃ´ng chÆ°Æ¡ng trÃ¬nh sáº½ khÃ´ng thá»ƒ biÃªn dá»‹ch.</p>
<h3>Sá»± khÃ¡c biá»‡t giá»¯a throw vÃ  throws</h3>
<p>throw thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng trong thÃ¢n phÆ°Æ¡ng thá»©c, do láº­p trÃ¬nh viÃªn Ä‘á»‹nh nghÄ©a khi xáº£y ra lá»—i trong cÃ¢u lá»‡nh sáº½ chá»§ Ä‘á»™ng nÃ©m ra ngoáº¡i lá»‡.</p>
<p>throws thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng trong khai bÃ¡o phÆ°Æ¡ng thá»©c, biá»ƒu thá»‹ danh sÃ¡ch cÃ¡c ngoáº¡i lá»‡ mÃ  phÆ°Æ¡ng thá»©c Ä‘Ã³ cÃ³ thá»ƒ nÃ©m ra.</p>
<h3>Khá»‘i mÃ£ finally cÃ³ luÃ´n luÃ´n Ä‘Æ°á»£c thá»±c thi trong Java khÃ´ng?</h3>
<p>Khá»‘i mÃ£ finally sáº½ khÃ´ng Ä‘Æ°á»£c thá»±c thi trong cÃ¡c trÆ°á»ng há»£p sau:</p>
<ul>
<li>Khi chÆ°Æ¡ng trÃ¬nh gáº·p ngoáº¡i lá»‡ trÆ°á»›c khi vÃ o khá»‘i try, chÆ°Æ¡ng trÃ¬nh sáº½ káº¿t thÃºc ngay láº­p tá»©c.</li>
<li>Khi chÆ°Æ¡ng trÃ¬nh cÆ°á»¡ng cháº¿ thoÃ¡t trong khá»‘i try, vÃ­ dá»¥ nhÆ° sá»­ dá»¥ng System.exit(0), khá»‘i mÃ£ finally sáº½ khÃ´ng Ä‘Æ°á»£c thá»±c thi.</li>
</ul>
<p>Trong cÃ¡c trÆ°á»ng há»£p khÃ¡c, khi try/catch/finally Ä‘Æ°á»£c thá»±c thi, khá»‘i try sáº½ Ä‘Æ°á»£c thá»±c thi trÆ°á»›c. Náº¿u cÃ³ ngoáº¡i lá»‡ xáº£y ra, khá»‘i catch vÃ  finally sáº½ xá»­ lÃ½, sau Ä‘Ã³ chÆ°Æ¡ng trÃ¬nh káº¿t thÃºc. Náº¿u khÃ´ng cÃ³ ngoáº¡i lá»‡, sau khi thá»±c thi khá»‘i finally, mÃ£ tiáº¿p theo sáº½ tiáº¿p tá»¥c Ä‘Æ°á»£c thá»±c thi. LÆ°u Ã½ ráº±ng náº¿u cÃ³ cÃ¢u lá»‡nh return trong khá»‘i try/catch, khá»‘i mÃ£ finally sáº½ Ä‘Æ°á»£c thá»±c thi trÆ°á»›c khi return. Náº¿u cáº£ ba khá»‘i try/catch/finally Ä‘á»u cÃ³ cÃ¢u lá»‡nh return, cÃ¢u lá»‡nh return trong khá»‘i finally sáº½ ghi Ä‘Ã¨ lÃªn cÃ¢u lá»‡nh return trong try/catch.</p>
<h3>Sá»± khÃ¡c biá»‡t giá»¯a final, finally vÃ  finalize lÃ  gÃ¬?</h3>
<ul>
<li>final: ÄÆ°á»£c sá»­ dá»¥ng Ä‘á»ƒ khai bÃ¡o thuá»™c tÃ­nh, phÆ°Æ¡ng thá»©c vÃ  lá»›p. Thuá»™c tÃ­nh khÃ´ng thá»ƒ thay Ä‘á»•i, phÆ°Æ¡ng thá»©c khÃ´ng thá»ƒ ghi Ä‘Ã¨, lá»›p khÃ´ng thá»ƒ káº¿ thá»«a.</li>
<li>finally: LÃ  má»™t pháº§n cá»§a xá»­ lÃ½ ngoáº¡i lá»‡, chá»‰ cÃ³ thá»ƒ sá»­ dá»¥ng trong khá»‘i try/catch. Khá»‘i finally Ä‘áº£m báº£o ráº±ng mÃ£ trong nÃ³ luÃ´n Ä‘Æ°á»£c thá»±c thi, thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ giáº£i phÃ³ng tÃ i nguyÃªn.</li>
<li>finalize: LÃ  má»™t phÆ°Æ¡ng thá»©c cá»§a lá»›p Object, Ä‘Æ°á»£c gá»i khi bá»™ thu gom rÃ¡c chuáº©n bá»‹ giáº£i phÃ³ng khÃ´ng gian cá»§a Ä‘á»‘i tÆ°á»£ng. Khi bá»™ thu gom rÃ¡c chuáº©n bá»‹ giáº£i phÃ³ng Ä‘á»‘i tÆ°á»£ng, nÃ³ sáº½ gá»i phÆ°Æ¡ng thá»©c finalize(). Sau Ä‘Ã³, khi bá»™ thu gom rÃ¡c triá»ƒn khai hÃ nh Ä‘á»™ng thu gom tiáº¿p theo, Ä‘á»‘i tÆ°á»£ng sáº½ bá»‹ giáº£i phÃ³ng bá»™ nhá»›.</li>
</ul>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» generics</h3>
<p>Generics, hay "tham sá»‘ hÃ³a kiá»ƒu", giáº£i quyáº¿t váº¥n Ä‘á» khÃ´ng xÃ¡c Ä‘á»‹nh kiá»ƒu dá»¯ liá»‡u cá»¥ thá»ƒ. CÃ³ hiá»‡u lá»±c trong giai Ä‘oáº¡n biÃªn dá»‹ch. Trong quÃ¡ trÃ¬nh sá»­ dá»¥ng generics, kiá»ƒu dá»¯ liá»‡u Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh dÆ°á»›i dáº¡ng tham sá»‘, trong lá»›p Ä‘Æ°á»£c gá»i lÃ  lá»›p generics, trong interface lÃ  interface generics, vÃ  trong phÆ°Æ¡ng thá»©c lÃ  phÆ°Æ¡ng thá»©c generics.</p>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» xÃ³a kiá»ƒu generics</h3>
<p>TrÃ¬nh biÃªn dá»‹ch Java táº¡o bytecode khÃ´ng chá»©a thÃ´ng tin vá» generics. ThÃ´ng tin vá» kiá»ƒu generics bá»‹ xÃ³a trong quÃ¡ trÃ¬nh biÃªn dá»‹ch, quÃ¡ trÃ¬nh nÃ y Ä‘Æ°á»£c gá»i lÃ  xÃ³a kiá»ƒu generics.</p>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» annotations</h3>
<p>Annotations trong Java Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ cung cáº¥p metadata cho mÃ£ Java. LÃ  metadata, annotations khÃ´ng trá»±c tiáº¿p áº£nh hÆ°á»Ÿng Ä‘áº¿n viá»‡c thá»±c thi mÃ£ cá»§a báº¡n, nhÆ°ng má»™t sá»‘ loáº¡i annotations cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng cho má»¥c Ä‘Ã­ch nÃ y.</p>
<p>ChÃºng cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ cung cáº¥p thÃ´ng tin cho trÃ¬nh biÃªn dá»‹ch, trong giai Ä‘oáº¡n biÃªn dá»‹ch Ä‘á»ƒ cung cáº¥p thÃ´ng tin cho pháº§n má»m xá»­ lÃ½ liÃªn quan, vÃ  trong giai Ä‘oáº¡n cháº¡y Ä‘á»ƒ triá»ƒn khai mÃ£ tÆ°Æ¡ng á»©ng.</p>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» Meta-Annotation</h3>
<p>Meta-annotation cÃ³ thá»ƒ hiá»ƒu lÃ  annotation cá»§a annotation, Ä‘Æ°á»£c sá»­ dá»¥ng trong annotation Ä‘á»ƒ triá»ƒn khai cÃ¡c chá»©c nÄƒng mong muá»‘n. Cá»¥ thá»ƒ bao gá»“m:</p>
<ul>
<li>@Retention: Chá»‰ ra giai Ä‘oáº¡n tá»“n táº¡i cá»§a annotation lÃ  giá»¯ láº¡i trong mÃ£ nguá»“n, bytecode (táº£i lá»›p) hay thá»i gian cháº¡y (cháº¡y trong JVM).</li>
<li>@Target: Chá»‰ ra pháº¡m vi Ã¡p dá»¥ng cá»§a annotation.</li>
<li>@Documented: Bao gá»“m cÃ¡c pháº§n tá»­ cá»§a annotation vÃ o trong tÃ i liá»‡u Javadoc.</li>
<li>@Inherited: Má»™t annotation Ä‘Æ°á»£c chÃº thÃ­ch bá»Ÿi @Inherited vÃ  Ä‘Æ°á»£c Ã¡p dá»¥ng lÃªn má»™t lá»›p cha. Náº¿u lá»›p con cá»§a nÃ³ khÃ´ng Ä‘Æ°á»£c chÃº thÃ­ch bá»Ÿi annotation khÃ¡c, lá»›p con Ä‘Ã³ sáº½ káº¿ thá»«a annotation cá»§a lá»›p cha.</li>
<li>@Repeatable: Annotation Ä‘Æ°á»£c chÃº thÃ­ch bá»Ÿi meta-annotation nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c Ã¡p dá»¥ng nhiá»u láº§n lÃªn cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng, nhÆ°ng má»—i láº§n Ã¡p dá»¥ng annotation cÃ³ thá»ƒ Ä‘áº¡i diá»‡n cho cÃ¡c Ã½ nghÄ©a khÃ¡c nhau.</li>
</ul>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» Ä‘á»‘i tÆ°á»£ng Class trong Java</h3>
<p>Trong Java, Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ chia thÃ nh Ä‘á»‘i tÆ°á»£ng instance vÃ  Ä‘á»‘i tÆ°á»£ng Class. Má»—i lá»›p Ä‘á»u cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng Class, chá»©a thÃ´ng tin liÃªn quan Ä‘áº¿n lá»›p Ä‘Ã³.</p>
<p>CÃ¡c phÆ°Æ¡ng phÃ¡p Ä‘á»ƒ láº¥y Ä‘á»‘i tÆ°á»£ng Class:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">forName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(â€œTÃªn Ä‘áº§y Ä‘á»§ cá»§a lá»›pâ€)</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">Ä‘á»‘i tÆ°á»£ng </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">instance</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getClass</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">tÃªn </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">lá»›p</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span></span></code></pre>
</div><h3>CÆ¡ cháº¿ pháº£n xáº¡ trong Java lÃ  gÃ¬?</h3>
<p>CÆ¡ cháº¿ pháº£n xáº¡ trong Java cho phÃ©p trong quÃ¡ trÃ¬nh cháº¡y chÆ°Æ¡ng trÃ¬nh cÃ³ thá»ƒ xÃ¢y dá»±ng Ä‘á»‘i tÆ°á»£ng cá»§a báº¥t ká»³ lá»›p nÃ o, láº¥y cÃ¡c biáº¿n thÃ nh viÃªn vÃ  phÆ°Æ¡ng thá»©c cá»§a báº¥t ká»³ lá»›p nÃ o, láº¥y thÃ´ng tin cá»§a lá»›p mÃ  báº¥t ká»³ Ä‘á»‘i tÆ°á»£ng nÃ o thuá»™c vá», vÃ  gá»i cÃ¡c thuá»™c tÃ­nh vÃ  phÆ°Æ¡ng thá»©c cá»§a báº¥t ká»³ Ä‘á»‘i tÆ°á»£ng nÃ o. CÆ¡ cháº¿ pháº£n xáº¡ cho phÃ©p Java cÃ³ kháº£ nÄƒng láº¥y thÃ´ng tin chÆ°Æ¡ng trÃ¬nh vÃ  gá»i phÆ°Æ¡ng thá»©c Ä‘á»‘i tÆ°á»£ng má»™t cÃ¡ch Ä‘á»™ng. CÃ³ thá»ƒ gá»i API pháº£n xáº¡ thÃ´ng qua cÃ¡c lá»›p sau:</p>
<ul>
<li>Lá»›p Class: CÃ³ thá»ƒ láº¥y Ä‘Æ°á»£c thuá»™c tÃ­nh vÃ  phÆ°Æ¡ng thá»©c cá»§a lá»›p</li>
<li>Lá»›p Field: Láº¥y Ä‘Æ°á»£c cÃ¡c biáº¿n thÃ nh viÃªn cá»§a lá»›p</li>
<li>Lá»›p Method: Láº¥y thÃ´ng tin cÃ¡c phÆ°Æ¡ng thá»©c cá»§a lá»›p</li>
<li>Lá»›p Constructor: Láº¥y thÃ´ng tin vá» cÃ¡c phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o cá»§a lá»›p</li>
</ul>
<h3>Serialization lÃ  gÃ¬?</h3>
<p>Serialization lÃ  quÃ¡ trÃ¬nh chuyá»ƒn Ä‘á»‘i tÆ°á»£ng thÃ nh chuá»—i byte, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ giáº£i quyáº¿t cÃ¡c váº¥n Ä‘á» khi triá»ƒn khai cÃ¡c thao tÃ¡c Ä‘á»c vÃ  ghi Ä‘á»‘i tÆ°á»£ng vÃ o luá»“ng dá»¯ liá»‡u. Serialization cÃ³ thá»ƒ ghi tráº¡ng thÃ¡i cá»§a Ä‘á»‘i tÆ°á»£ng vÃ o luá»“ng Ä‘á»ƒ truyá»n qua máº¡ng, hoáº·c lÆ°u vÃ o file, cÆ¡ sá»Ÿ dá»¯ liá»‡u, vÃ  khi cáº§n cÃ³ thá»ƒ Ä‘á»c láº¡i luá»“ng Ä‘Ã³ vÃ  tÃ¡i cáº¥u trÃºc thÃ nh Ä‘á»‘i tÆ°á»£ng giá»‘ng há»‡t.</p>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» cÃ¡ch triá»ƒn khai Serialization vÃ  Deserialization trong Java</h3>
<p>Serialization: Chuyá»ƒn Ä‘á»•i Ä‘á»‘i tÆ°á»£ng Java thÃ nh chuá»—i byte, tá»« Ä‘Ã³ cÃ³ thá»ƒ truyá»n qua máº¡ng.</p>
<p>Deserialization: Chuyá»ƒn Ä‘á»•i chuá»—i byte thÃ nh Ä‘á»‘i tÆ°á»£ng Java.</p>
<p>CÃ¡ch triá»ƒn khai: triá»ƒn khai interface Serializable, hoáº·c triá»ƒn khai cÃ¡c phÆ°Æ¡ng thá»©c writeExternal() vÃ  readExternal() trong interface Externalizable.</p>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» List trong Java</h3>
<p>List lÃ  má»™t hÃ ng Ä‘á»£i cÃ³ thá»© tá»±, trong Java cÃ³ hai cÃ¡ch triá»ƒn khai:</p>
<ul>
<li>ArrayList: Sá»­ dá»¥ng máº£ng Ä‘á»ƒ triá»ƒn khai, lÃ  danh sÃ¡ch khÃ´ng an toÃ n trong mÃ´i trÆ°á»ng Ä‘a luá»“ng vá»›i kháº£ nÄƒng thay Ä‘á»•i kÃ­ch thÆ°á»›c. Truy cáº­p ngáº«u nhiÃªn nhanh, khi má»Ÿ rá»™ng danh sÃ¡ch sáº½ táº¡o ra má»™t máº£ng lá»›n hÆ¡n vÃ  sao chÃ©p máº£ng cÅ© vÃ o máº£ng má»›i.</li>
<li>LinkedList: Báº£n cháº¥t lÃ  danh sÃ¡ch liÃªn káº¿t Ä‘Ã´i, so vá»›i ArrayList, viá»‡c chÃ¨n vÃ  xÃ³a nhanh hÆ¡n nhÆ°ng truy cáº­p ngáº«u nhiÃªn cháº­m.</li>
</ul>
<h3>CÃ¡c cáº¥u trÃºc dá»¯ liá»‡u an toÃ n vá»›i luá»“ng cÆ¡ báº£n trong Java</h3>
<ul>
<li>HashTable: PhiÃªn báº£n an toÃ n vá»›i luá»“ng cá»§a báº£ng bÄƒm, hiá»‡u suáº¥t tháº¥p.</li>
<li>ConcurrentHashMap: PhiÃªn báº£n an toÃ n vá»›i luá»“ng cá»§a báº£ng bÄƒm, hiá»‡u suáº¥t cao, thay tháº¿ HashTable.</li>
<li>Vector: PhiÃªn báº£n an toÃ n vá»›i luá»“ng cá»§a ArrayList.</li>
<li>Stack: PhiÃªn báº£n an toÃ n vá»›i luá»“ng cá»§a ngÄƒn xáº¿p.</li>
<li>BlockingQueue vÃ  cÃ¡c lá»›p con cá»§a nÃ³: PhiÃªn báº£n an toÃ n vá»›i luá»“ng cá»§a hÃ ng Ä‘á»£i.</li>
</ul>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» Set trong Java</h3>
<p>Set lÃ  má»™t cáº¥u trÃºc dá»¯ liá»‡u khÃ´ng cho phÃ©p cÃ¡c pháº§n tá»­ trÃ¹ng láº·p vÃ  khÃ´ng cÃ³ thá»© tá»±. Java cÃ³ ba cÃ¡ch triá»ƒn khai Set:</p>
<ul>
<li>
<p><strong>HashSet</strong>: ÄÆ°á»£c triá»ƒn khai thÃ´ng qua HashMap, vá»›i key cá»§a HashMap lÃ  pháº§n tá»­ Ä‘Æ°á»£c lÆ°u trá»¯ trong HashSet, cÃ²n value lÃ  má»™t háº±ng sá»‘ kiá»ƒu Object do há»‡ thá»‘ng Ä‘á»‹nh nghÄ©a cÃ³ tÃªn lÃ  PRESENT. Khi kiá»ƒm tra hai pháº§n tá»­ cÃ³ giá»‘ng nhau hay khÃ´ng, trÆ°á»›c tiÃªn so sÃ¡nh hashCode, náº¿u giá»‘ng nhau thÃ¬ tiáº¿p tá»¥c sá»­ dá»¥ng equals Ä‘á»ƒ so sÃ¡nh, truy váº¥n cÃ³ Ä‘á»™ phá»©c táº¡p O(1).</p>
</li>
<li>
<p><strong>LinkedHashSet</strong>: Káº¿ thá»«a tá»« HashSet vÃ  Ä‘Æ°á»£c triá»ƒn khai thÃ´ng qua LinkedHashMap, sá»­ dá»¥ng danh sÃ¡ch liÃªn káº¿t Ä‘Ã´i Ä‘á»ƒ duy trÃ¬ thá»© tá»± chÃ¨n cÃ¡c pháº§n tá»­.</p>
</li>
<li>
<p><strong>TreeSet</strong>: ÄÆ°á»£c triá»ƒn khai thÃ´ng qua TreeMap, cáº¥u trÃºc dá»¯ liá»‡u ná»n táº£ng lÃ  cÃ¢y Ä‘á»-Ä‘en, thÃªm pháº§n tá»­ vÃ o táº­p há»£p theo quy táº¯c so sÃ¡nh Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng táº­p há»£p váº«n Ä‘Æ°á»£c sáº¯p xáº¿p sau khi thÃªm, truy váº¥n cÃ³ Ä‘á»™ phá»©c táº¡p O(logn).</p>
</li>
</ul>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» HashMap trong Java</h3>
<p>TrÆ°á»›c JDK8, HashMap Ä‘Æ°á»£c triá»ƒn khai báº±ng máº£ng + danh sÃ¡ch liÃªn káº¿t, tá»« JDK8 chuyá»ƒn sang máº£ng + danh sÃ¡ch liÃªn káº¿t/cÃ¢y Ä‘á»-Ä‘en. CÃ¡c biáº¿n thÃ nh viÃªn chÃ­nh bao gá»“m máº£ng table lÆ°u trá»¯ dá»¯ liá»‡u, sá»‘ lÆ°á»£ng pháº§n tá»­ size vÃ  há»‡ sá»‘ táº£i loadFactor. Dá»¯ liá»‡u trong HashMap tá»“n táº¡i dÆ°á»›i dáº¡ng cáº·p khÃ³a-giÃ¡ trá»‹, giÃ¡ trá»‹ hash cá»§a khÃ³a Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ tÃ­nh toÃ¡n chá»‰ sá»‘ cá»§a máº£ng. Náº¿u hai pháº§n tá»­ cÃ³ cÃ¹ng giÃ¡ trá»‹ hash, sáº½ xáº£y ra xung Ä‘á»™t hash vÃ  chÃºng sáº½ Ä‘Æ°á»£c Ä‘Æ°a vÃ o cÃ¹ng má»™t danh sÃ¡ch liÃªn káº¿t.</p>
<p>Máº£ng table ghi láº¡i dá»¯ liá»‡u cá»§a HashMap, má»—i chá»‰ sá»‘ tÆ°Æ¡ng á»©ng vá»›i má»™t danh sÃ¡ch liÃªn káº¿t, táº¥t cáº£ cÃ¡c dá»¯ liá»‡u xung Ä‘á»™t hash sáº½ Ä‘Æ°á»£c lÆ°u trá»¯ trong cÃ¹ng má»™t danh sÃ¡ch liÃªn káº¿t. Node/Entry bao gá»“m bá»‘n biáº¿n thÃ nh viÃªn: key, value, con trá» next vÃ  giÃ¡ trá»‹ hash. Tá»« JDK8 trá»Ÿ Ä‘i, náº¿u danh sÃ¡ch liÃªn káº¿t vÆ°á»£t quÃ¡ 8 pháº§n tá»­ sáº½ chuyá»ƒn Ä‘á»•i thÃ nh cÃ¢y Ä‘á»-Ä‘en.</p>
<p>Náº¿u dá»¯ liá»‡u hiá»‡n táº¡i/sá»©c chá»©a tá»•ng &gt; há»‡ sá»‘ táº£i, HashMap sáº½ triá»ƒn khai thao tÃ¡c má»Ÿ rá»™ng. Sá»©c chá»©a máº·c Ä‘á»‹nh lÃ  16, má»Ÿ rá»™ng pháº£i lÃ  lÅ©y thá»«a cá»§a 2, sá»©c chá»©a tá»‘i Ä‘a lÃ  1 &lt;&lt; 30, há»‡ sá»‘ táº£i máº·c Ä‘á»‹nh lÃ  0.75.</p>
<h3>Táº¡i sao HashMap khÃ´ng an toÃ n trong mÃ´i trÆ°á»ng Ä‘a luá»“ng</h3>
<p>Trong JDK1.7, HashMap sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p thÃªm Ä‘áº§u Ä‘á»ƒ chÃ¨n pháº§n tá»­, do Ä‘Ã³ trong trÆ°á»ng há»£p Ä‘á»“ng thá»i sáº½ dáº«n Ä‘áº¿n danh sÃ¡ch liÃªn káº¿t vÃ²ng vÃ  gÃ¢y ra vÃ²ng láº·p vÃ´ táº­n.</p>
<p>Máº·c dÃ¹ JDK1.8 sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p thÃªm cuá»‘i Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y, nhÆ°ng thao tÃ¡c put Ä‘á»“ng thá»i cÅ©ng cÃ³ thá»ƒ khiáº¿n khÃ³a trÆ°á»›c bá»‹ ghi Ä‘Ã¨ bá»Ÿi khÃ³a sau.</p>
<p>Do HashMap cÃ³ cÆ¡ cháº¿ má»Ÿ rá»™ng, nÃªn cÅ©ng cÃ³ trÆ°á»ng há»£p luá»“ng A triá»ƒn khai má»Ÿ rá»™ng, luá»“ng B triá»ƒn khai phÆ°Æ¡ng thá»©c get sáº½ xáº£y ra sai sÃ³t.</p>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» TreeMap trong Java</h3>
<p>TreeMap lÃ  má»™t cáº¥u trÃºc Map Ä‘Æ°á»£c triá»ƒn khai dá»±a trÃªn cÃ¢y Ä‘á»-Ä‘en. Cáº¥u trÃºc ná»n táº£ng lÃ  má»™t cÃ¢y nhá»‹ phÃ¢n cÃ¢n báº±ng, vÃ¬ thá»i gian phá»©c táº¡p cá»§a viá»‡c chÃ¨n, xÃ³a, duyá»‡t qua Ä‘á»u lÃ  O(logN), nÃªn hiá»‡u suáº¥t tháº¥p hÆ¡n so vá»›i báº£ng bÄƒm. Tuy nhiÃªn, báº£ng bÄƒm khÃ´ng thá»ƒ cung cáº¥p Ä‘áº§u ra cÃ³ thá»© tá»± cá»§a cÃ¡c cáº·p khÃ³a-giÃ¡ trá»‹, trong khi cÃ¢y Ä‘á»-Ä‘en cÃ³ thá»ƒ sáº¯p xáº¿p Ä‘áº§u ra theo thá»© tá»± cá»§a khÃ³a.</p>
<h3>Äiá»ƒm chung vÃ  khÃ¡c biá»‡t giá»¯a ArrayList, Vector vÃ  LinkedList</h3>
<ul>
<li>ArrayList, Vector vÃ  LinkedList Ä‘á»u lÃ  cÃ¡c máº£ng cÃ³ thá»ƒ má»Ÿ rá»™ng, nghÄ©a lÃ  cÃ³ thá»ƒ thay Ä‘á»•i kÃ­ch thÆ°á»›c Ä‘á»™ng.</li>
<li>ArrayList vÃ  Vector Ä‘Æ°á»£c triá»ƒn khai dá»±a trÃªn máº£ng Object[], chÃºng má»Ÿ má»™t khÃ´ng gian liÃªn tiáº¿p trong bá»™ nhá»› Ä‘á»ƒ lÆ°u trá»¯, há»— trá»£ truy cáº­p báº±ng chá»‰ sá»‘. Tuy nhiÃªn, khi chÃ¨n pháº§n tá»­ cÃ³ thá»ƒ cáº§n di chuyá»ƒn cÃ¡c pháº§n tá»­ trong container, nÃªn hiá»‡u suáº¥t chÃ¨n tháº¥p. Khi sá»‘ lÆ°á»£ng pháº§n tá»­ vÆ°á»£t quÃ¡ kÃ­ch thÆ°á»›c khá»Ÿi táº¡o, cáº£ ArrayList vÃ  Vector Ä‘á»u sáº½ má»Ÿ rá»™ng.</li>
<li>Vector lÃ  an toÃ n trong mÃ´i trÆ°á»ng Ä‘a luá»“ng, háº§u háº¿t cÃ¡c phÆ°Æ¡ng thá»©c cá»§a nÃ³ lÃ  trá»±c tiáº¿p hoáº·c giÃ¡n tiáº¿p Ä‘á»“ng bá»™. ArrayList khÃ´ng an toÃ n trong mÃ´i trÆ°á»ng Ä‘a luá»“ng, cÃ¡c phÆ°Æ¡ng thá»©c cá»§a nÃ³ khÃ´ng cÃ³ tÃ­nh Ä‘á»“ng bá»™. LinkedList cÅ©ng khÃ´ng an toÃ n trong mÃ´i trÆ°á»ng Ä‘a luá»“ng.</li>
<li>LinkedList sá»­ dá»¥ng danh sÃ¡ch liÃªn káº¿t Ä‘Ã´i, truy cáº­p dá»¯ liá»‡u theo chá»‰ sá»‘ cáº§n duyá»‡t tá»« Ä‘áº§u, do Ä‘Ã³ hiá»‡u suáº¥t truy cáº­p ngáº«u nhiÃªn tháº¥p, nhÆ°ng chÃ¨n pháº§n tá»­ khÃ´ng cáº§n di chuyá»ƒn dá»¯ liá»‡u, nÃªn hiá»‡u suáº¥t chÃ¨n cao.</li>
</ul>
<h3>Sá»± khÃ¡c biá»‡t giá»¯a HashMap vÃ  Hashtable</h3>
<ul>
<li>HashMap lÃ  má»™t phiÃªn báº£n nháº¹ cá»§a Hashtable, HashMap cho phÃ©p khÃ³a vÃ  giÃ¡ trá»‹ lÃ  null, nhÆ°ng chá»‰ cho phÃ©p má»™t khÃ³a lÃ  null. Hashtable khÃ´ng cho phÃ©p.</li>
<li>CÃ¡c phÆ°Æ¡ng thá»©c trong Hashtable lÃ  an toÃ n trong mÃ´i trÆ°á»ng Ä‘a luá»“ng, trong khi HashMap khÃ´ng an toÃ n. Khi truy cáº­p HashMap trong mÃ´i trÆ°á»ng Ä‘a luá»“ng cáº§n cung cáº¥p cÆ¡ cháº¿ Ä‘á»“ng bá»™ bá»• sung.</li>
<li>Hashtable sá»­ dá»¥ng Enumeration Ä‘á»ƒ duyá»‡t qua, HashMap sá»­ dá»¥ng Iterator Ä‘á»ƒ duyá»‡t qua.</li>
</ul>
<h3>LÃ m tháº¿ nÃ o Ä‘á»ƒ quyáº¿t Ä‘á»‹nh sá»­ dá»¥ng HashMap hay TreeMap?</h3>
<p>Náº¿u cÃ¡c thao tÃ¡c chÃ¨n, xÃ³a hoáº·c Ä‘á»‹nh vá»‹ má»™t pháº§n tá»­ trong Map thÆ°á»ng xuyÃªn, HashMap lÃ  lá»±a chá»n tá»‘t hÆ¡n. Náº¿u cáº§n duyá»‡t qua cÃ¡c khÃ³a theo thá»© tá»±, TreeMap lÃ  lá»±a chá»n tá»‘t hÆ¡n.</p>
<h3>Má»‘i quan há»‡ giá»¯a equals vÃ  hashCode trong HashSet?</h3>
<p>Cáº£ equals vÃ  hashCode Ä‘á»u Ä‘Æ°á»£c káº¿ thá»«a tá»« lá»›p Object, equals chá»§ yáº¿u Ä‘á»ƒ kiá»ƒm tra xem Ä‘á»‹a chá»‰ tham chiáº¿u cá»§a Ä‘á»‘i tÆ°á»£ng cÃ³ cÃ¹ng má»™t Ä‘á»‹a chá»‰ khÃ´ng; hashCode theo Ä‘á»‹nh nghÄ©a quy táº¯c hash sáº½ chuyá»ƒn Ä‘á»‹a chá»‰ bá»™ nhá»› cá»§a Ä‘á»‘i tÆ°á»£ng thÃ nh má»™t mÃ£ hash. CÃ¡c pháº§n tá»­ Ä‘Æ°á»£c lÆ°u trá»¯ trong HashSet khÃ´ng Ä‘Æ°á»£c trÃ¹ng láº·p, chá»§ yáº¿u thÃ´ng qua hai phÆ°Æ¡ng thá»©c hashCode vÃ  equals Ä‘á»ƒ xÃ¡c Ä‘á»‹nh xem cÃ¡c Ä‘á»‘i tÆ°á»£ng lÆ°u trá»¯ cÃ³ giá»‘ng nhau khÃ´ng:</p>
<ul>
<li>Náº¿u giÃ¡ trá»‹ hashCode cá»§a hai Ä‘á»‘i tÆ°á»£ng khÃ¡c nhau, Ä‘iá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ  hai Ä‘á»‘i tÆ°á»£ng khÃ´ng giá»‘ng nhau.</li>
<li>Náº¿u giÃ¡ trá»‹ hashCode cá»§a hai Ä‘á»‘i tÆ°á»£ng giá»‘ng nhau, tiáº¿p theo sáº½ gá»i phÆ°Æ¡ng thá»©c equals cá»§a Ä‘á»‘i tÆ°á»£ng, náº¿u káº¿t quáº£ cá»§a phÆ°Æ¡ng thá»©c equals lÃ  true, thÃ¬ Ä‘iá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ  hai Ä‘á»‘i tÆ°á»£ng giá»‘ng nhau, náº¿u khÃ´ng thÃ¬ khÃ¡c nhau.</li>
</ul>
<h3>Sá»± khÃ¡c biá»‡t giá»¯a fail-fast vÃ  fail-safe iterator lÃ  gÃ¬?</h3>
<ul>
<li>Fail-fast trá»±c tiáº¿p trÃªn container, trong quÃ¡ trÃ¬nh duyá»‡t, náº¿u phÃ¡t hiá»‡n dá»¯ liá»‡u trong container bá»‹ thay Ä‘á»•i, sáº½ ngay láº­p tá»©c nÃ©m ra ngoáº¡i lá»‡ ConcurrentModificationException dáº«n Ä‘áº¿n tháº¥t báº¡i trong duyá»‡t. CÃ¡c container thÆ°á»ng sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p fail-fast bao gá»“m HashMap vÃ  ArrayList.</li>
<li>Fail-safe dá»±a trÃªn má»™t báº£n sao cá»§a container. Do Ä‘Ã³, viá»‡c thay Ä‘á»•i ná»™i dung trong container khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n quÃ¡ trÃ¬nh duyá»‡t. CÃ¡c container thÆ°á»ng sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p fail-safe bao gá»“m ConcurrentHashMap vÃ  CopyOnWriteArrayList.</li>
</ul>
<h3>Sá»± khÃ¡c biá»‡t giá»¯a Collection vÃ  Collections?</h3>
<ul>
<li>Collection lÃ  má»™t interface táº­p há»£p, nÃ³ cung cáº¥p cÃ¡c phÆ°Æ¡ng thá»©c interface chung Ä‘á»ƒ thao tÃ¡c vá»›i cÃ¡c Ä‘á»‘i tÆ°á»£ng táº­p há»£p, táº¥t cáº£ cÃ¡c táº­p há»£p Ä‘á»u lÃ  con cá»§a nÃ³, cháº³ng háº¡n nhÆ° List, Set, v.v.</li>
<li>Collections lÃ  má»™t lá»›p bao bá»c, chá»©a nhiá»u phÆ°Æ¡ng thá»©c tÄ©nh, khÃ´ng thá»ƒ Ä‘Æ°á»£c khá»Ÿi táº¡o mÃ  Ä‘Æ°á»£c sá»­ dá»¥ng nhÆ° má»™t lá»›p cÃ´ng cá»¥, cháº³ng háº¡n nhÆ° phÆ°Æ¡ng thá»©c sáº¯p xáº¿p: Collections.sort(list); phÆ°Æ¡ng thá»©c Ä‘áº£o ngÆ°á»£c: Collections.reverse(list).</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Java Thread Must Know</title>
      <link>https://vanhung4499.github.io/interview/knowledge/java-thread-must-know.html</link>
      <guid>https://vanhung4499.github.io/interview/knowledge/java-thread-must-know.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Java Thread Must Know</source>
      <description>Java Concurrency (Pháº£i há»c thuá»™c) MÃ´ táº£ ngáº¯n gá»n vá» MÃ´ hÃ¬nh bá»™ nhá»› Java (JMM) MÃ´ hÃ¬nh bá»™ nhá»› Java Ä‘á»‹nh nghÄ©a cÃ¡c quy táº¯c truy cáº­p cÃ¡c biáº¿n trong chÆ°Æ¡ng trÃ¬nh: Táº¥t cáº£ cÃ¡c biáº¿n Ä‘á»...</description>
      <category>interview</category>
      <pubDate>Fri, 05 Jul 2024 10:10:42 GMT</pubDate>
      <content:encoded><![CDATA[
<h3>MÃ´ táº£ ngáº¯n gá»n vá» MÃ´ hÃ¬nh bá»™ nhá»› Java (JMM)</h3>
<p>MÃ´ hÃ¬nh bá»™ nhá»› Java Ä‘á»‹nh nghÄ©a cÃ¡c quy táº¯c truy cáº­p cÃ¡c biáº¿n trong chÆ°Æ¡ng trÃ¬nh:</p>
<ul>
<li>Táº¥t cáº£ cÃ¡c biáº¿n Ä‘á»u Ä‘Æ°á»£c lÆ°u trá»¯ trong bá»™ nhá»› chÃ­nh vÃ  má»—i luá»“ng cÃ³ bá»™ nhá»› lÃ m viá»‡c riÃªng.</li>
<li>Bá»™ nhá»› lÃ m viá»‡c chá»©a báº£n sao cá»§a cÃ¡c biáº¿n tá»« bá»™ nhá»› chÃ­nh mÃ  luá»“ng sá»­ dá»¥ng. Má»i thao tÃ¡c vá»›i cÃ¡c biáº¿n Ä‘á»u pháº£i thá»±c thi trong bá»™ nhá»› lÃ m viá»‡c, khÃ´ng thá»ƒ Ä‘á»c hoáº·c ghi trá»±c tiáº¿p vÃ o bá»™ nhá»› chÃ­nh.</li>
<li>Sau khi hoÃ n thÃ nh, bá»™ nhá»› lÃ m viá»‡c cá»§a luá»“ng sáº½ Ä‘áº©y dá»¯ liá»‡u Ä‘Ã£ thao tÃ¡c trá»Ÿ láº¡i bá»™ nhá»› chÃ­nh thÃ´ng qua giao thá»©c nháº¥t quÃ¡n bá»™ nhá»› Ä‘á»‡m.</li>
</ul>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» as-if-serial</h3>
<p>TrÃ¬nh biÃªn dá»‹ch sáº½ thá»±c hiá»‡n sáº¯p xáº¿p láº¡i vÃ  tá»‘i Æ°u hÃ³a cÃ¡c lá»‡nh trong chÆ°Æ¡ng trÃ¬nh gá»‘c. Tuy nhiÃªn, báº¥t ká»ƒ sáº¯p xáº¿p láº¡i tháº¿ nÃ o, káº¿t quáº£ pháº£i tÆ°Æ¡ng á»©ng vá»›i káº¿t quáº£ Ä‘áº§u ra dá»± kiáº¿n cá»§a chÆ°Æ¡ng trÃ¬nh gá»‘c.</p>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» tÃ¡m quy táº¯c happens-before</h3>
<ul>
<li><strong>Quy táº¯c thá»© tá»± chÆ°Æ¡ng trÃ¬nh</strong>: Trong má»™t luá»“ng, cÃ¡c thao tÃ¡c viáº¿t trÆ°á»›c sáº½ xáº£y ra trÆ°á»›c cÃ¡c thao tÃ¡c viáº¿t sau theo thá»© tá»± mÃ£ nguá»“n.</li>
<li><strong>Quy táº¯c khÃ³a</strong>: Má»™t thao tÃ¡c unlock xáº£y ra trÆ°á»›c má»™t thao tÃ¡c lock sau Ä‘Ã³ trÃªn cÃ¹ng má»™t khÃ³a.</li>
<li><strong>Quy táº¯c biáº¿n volatile</strong>: Viá»‡c ghi vÃ o má»™t biáº¿n xáº£y ra trÆ°á»›c viá»‡c Ä‘á»c biáº¿n Ä‘Ã³ sau Ä‘Ã³.</li>
<li><strong>Quy táº¯c truyá»n</strong>: Náº¿u thao tÃ¡c A xáº£y ra trÆ°á»›c thao tÃ¡c B vÃ  thao tÃ¡c B xáº£y ra trÆ°á»›c thao tÃ¡c C, thÃ¬ cÃ³ thá»ƒ suy ra thao tÃ¡c A xáº£y ra trÆ°á»›c thao tÃ¡c C.</li>
<li><strong>Quy táº¯c khá»Ÿi Ä‘á»™ng luá»“ng</strong>: PhÆ°Æ¡ng thá»©c start() cá»§a Ä‘á»‘i tÆ°á»£ng Thread xáº£y ra trÆ°á»›c má»i hÃ nh Ä‘á»™ng cá»§a luá»“ng Ä‘Ã³.</li>
<li><strong>Quy táº¯c ngáº¯t luá»“ng</strong>: Viá»‡c gá»i phÆ°Æ¡ng thá»©c interrupt() cá»§a má»™t luá»“ng xáº£y ra trÆ°á»›c khi mÃ£ cá»§a luá»“ng Ä‘Ã³ phÃ¡t hiá»‡n sá»± kiá»‡n ngáº¯t.</li>
<li><strong>Quy táº¯c káº¿t thÃºc luá»“ng</strong>: Táº¥t cáº£ cÃ¡c thao tÃ¡c cá»§a má»™t luá»“ng xáº£y ra trÆ°á»›c khi phÃ¡t hiá»‡n luá»“ng Ä‘Ã³ Ä‘Ã£ káº¿t thÃºc, chÃºng ta cÃ³ thá»ƒ phÃ¡t hiá»‡n qua phÆ°Æ¡ng thá»©c Thread.join() hoáº·c Thread.isAlive().</li>
<li><strong>Quy táº¯c káº¿t thÃºc Ä‘á»‘i tÆ°á»£ng</strong>: HoÃ n táº¥t khá»Ÿi táº¡o má»™t Ä‘á»‘i tÆ°á»£ng xáº£y ra trÆ°á»›c khi phÆ°Æ¡ng thá»©c finalize() cá»§a nÃ³ báº¯t Ä‘áº§u.</li>
</ul>
<h3>Sá»± khÃ¡c biá»‡t giá»¯a as-if-serial vÃ  happens-before</h3>
<p>as-if-serial Ä‘áº£m báº£o káº¿t quáº£ thá»±c thi cá»§a chÆ°Æ¡ng trÃ¬nh Ä‘Æ¡n luá»“ng khÃ´ng thay Ä‘á»•i, happens-before Ä‘áº£m báº£o káº¿t quáº£ thá»±c thi Ä‘Ãºng cá»§a chÆ°Æ¡ng trÃ¬nh Ä‘a luá»“ng Ä‘Æ°á»£c Ä‘á»“ng bá»™ hÃ³a.</p>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» thao tÃ¡c nguyÃªn tá»­</h3>
<p>Má»™t thao tÃ¡c hoáº·c má»™t nhÃ³m thao tÃ¡c, hoáº·c táº¥t cáº£ Ä‘á»u Ä‘Æ°á»£c thá»±c thi vÃ  quÃ¡ trÃ¬nh thá»±c thi khÃ´ng bá»‹ giÃ¡n Ä‘oáº¡n bá»Ÿi báº¥t ká»³ yáº¿u tá»‘ nÃ o, hoáº·c táº¥t cáº£ Ä‘á»u khÃ´ng Ä‘Æ°á»£c thá»±c thi. ÄÃ¢y lÃ  thao tÃ¡c nguyÃªn tá»­.</p>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» tÃ­nh kháº£ kiáº¿n cá»§a luá»“ng</h3>
<p>TÃ­nh kháº£ kiáº¿n nghÄ©a lÃ  khi má»™t luá»“ng thay Ä‘á»•i biáº¿n chia sáº», cÃ¡c luá»“ng khÃ¡c cÃ³ thá»ƒ biáº¿t ngay láº­p tá»©c vá» thay Ä‘á»•i nÃ y. volatile, synchronized vÃ  final Ä‘á»u Ä‘áº£m báº£o tÃ­nh kháº£ kiáº¿n.</p>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» tÃ­nh tuáº§n tá»±</h3>
<p>Máº·c dÃ¹ Ä‘a luá»“ng cÃ³ sá»± cáº¡nh tranh vÃ  tá»‘i Æ°u hÃ³a lá»‡nh, nhÆ°ng trong luá»“ng hiá»‡n táº¡i, táº¥t cáº£ cÃ¡c thao tÃ¡c thá»±c thi Ä‘á»u cÃ³ thá»© tá»±.</p>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» tá»« khÃ³a volatile trong Java</h3>
<ul>
<li>Äáº£m báº£o tÃ­nh kháº£ kiáº¿n cá»§a biáº¿n Ä‘á»‘i vá»›i táº¥t cáº£ cÃ¡c luá»“ng. Khi má»™t luá»“ng thay Ä‘á»•i giÃ¡ trá»‹ cá»§a biáº¿n, giÃ¡ trá»‹ má»›i cÃ³ thá»ƒ Ä‘Æ°á»£c nháº­n biáº¿t ngay láº­p tá»©c bá»Ÿi cÃ¡c luá»“ng khÃ¡c.</li>
<li>NgÄƒn cáº¥m sáº¯p xáº¿p láº¡i lá»‡nh. Khi sá»­ dá»¥ng biáº¿n volatile Ä‘á»ƒ thá»±c hiá»‡n thao tÃ¡c ghi, trÃ¬nh biÃªn dá»‹ch sáº½ chÃ¨n má»™t rÃ o cháº¯n bá»™ nhá»› vÃ o dÃ£y lá»‡nh Ä‘á»ƒ ngÄƒn cáº¥m cÃ¡c loáº¡i bá»™ xá»­ lÃ½ cá»¥ thá»ƒ thá»±c hiá»‡n sáº¯p xáº¿p láº¡i.</li>
</ul>
<h3>CÃ¡c cÃ¡ch triá»ƒn khai luá»“ng trong Java</h3>
<ul>
<li>Triá»ƒn khai interface Runnable</li>
<li>Káº¿ thá»«a lá»›p Thread</li>
<li>triá»ƒn khai interface Callable</li>
</ul>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» tráº¡ng thÃ¡i cá»§a luá»“ng trong Java</h3>
<p>Tráº¡ng thÃ¡i cá»§a luá»“ng bao gá»“m NEW, RUNNABLE, BLOCKED, WAITING, TIMED_WAITING, TERMINATED</p>
<ul>
<li><strong>NEW</strong>: Tráº¡ng thÃ¡i má»›i, luá»“ng Ä‘Æ°á»£c táº¡o vÃ  chÆ°a báº¯t Ä‘áº§u, chÆ°a gá»i phÆ°Æ¡ng thá»©c start.</li>
<li><strong>RUNNABLE</strong>: Tráº¡ng thÃ¡i cháº¡y, luá»“ng Ä‘ang Ä‘Æ°á»£c thá»±c thi trong JVM, nhÆ°ng khÃ´ng nháº¥t thiáº¿t Ä‘ang cháº¡y thá»±c sá»±, cÃ³ thá»ƒ Ä‘ang chá» CPU.</li>
<li><strong>BLOCKED</strong>: Tráº¡ng thÃ¡i bá»‹ cháº·n, luá»“ng Ä‘ang chá» Ä‘á»ƒ láº¥y khÃ³a vÃ  khÃ³a chÆ°a Ä‘Æ°á»£c cáº¥p.</li>
<li><strong>WAITING</strong>: Tráº¡ng thÃ¡i chá», phÆ°Æ¡ng thá»©c run cá»§a luá»“ng thá»±c thi xong Object.wait()/Thread.join() vÃ  vÃ o tráº¡ng thÃ¡i nÃ y.</li>
<li><strong>TIMED_WAITING</strong>: Tráº¡ng thÃ¡i chá» cÃ³ thá»i háº¡n, sau má»™t thá»i gian nháº¥t Ä‘á»‹nh sáº½ thoÃ¡t khá»i tráº¡ng thÃ¡i. Gá»i Thread.sleep(long), Object.wait(long), Thread.join(long) sáº½ vÃ o tráº¡ng thÃ¡i nÃ y. CÃ¡c tham sá»‘ nÃ y Ä‘áº¡i diá»‡n cho thá»i gian chá».</li>
<li><strong>TERMINATED</strong>: Tráº¡ng thÃ¡i káº¿t thÃºc, luá»“ng thá»±c thi xong phÆ°Æ¡ng thá»©c run vÃ  vÃ o tráº¡ng thÃ¡i nÃ y.</li>
</ul>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» cÃ¡ch giao tiáº¿p giá»¯a cÃ¡c luá»“ng</h3>
<ul>
<li>Sá»­ dá»¥ng tá»« khÃ³a volatile Ä‘á»ƒ sá»­a Ä‘á»•i biáº¿n, Ä‘áº£m báº£o tÃ­nh kháº£ kiáº¿n cá»§a biáº¿n Ä‘á»‘i vá»›i táº¥t cáº£ cÃ¡c luá»“ng.</li>
<li>Sá»­ dá»¥ng tá»« khÃ³a synchronized, Ä‘áº£m báº£o nhiá»u luá»“ng chá»‰ cÃ³ thá»ƒ vÃ o phÆ°Æ¡ng thá»©c hoáº·c khá»‘i Ä‘á»“ng bá»™ cÃ¹ng lÃºc.</li>
<li>Sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c wait/notify.</li>
<li>Giao tiáº¿p qua IO.</li>
</ul>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» Thread Pool (Bá»ƒ Luá»“ng)</h3>
<p>Khi khÃ´ng cÃ³ Thread Pool, viá»‡c táº¡o vÃ  há»§y nhiá»u luá»“ng tiÃªu tá»‘n nhiá»u tÃ i nguyÃªn. Náº¿u tÃ¡i sá»­ dá»¥ng cÃ¡c luá»“ng Ä‘Ã£ táº¡o sau khi hoÃ n thÃ nh nhiá»‡m vá»¥ hiá»‡n táº¡i, cÃ³ thá»ƒ giáº£m thiá»ƒu chi phÃ­ vÃ  kiá»ƒm soÃ¡t sá»‘ lÆ°á»£ng luá»“ng Ä‘á»“ng thá»i tá»‘i Ä‘a.</p>
<p>Khi Thread Pool táº¡o luá»“ng, nÃ³ sáº½ bao bá»c luá»“ng thÃ nh Worker. Worker sau khi hoÃ n thÃ nh nhiá»‡m vá»¥ sáº½ tiáº¿p tá»¥c láº¥y nhiá»‡m vá»¥ tá»« hÃ ng Ä‘á»£i cÃ´ng viá»‡c Ä‘á»ƒ thá»±c thi.</p>
<p>Khi phÃ¢n phá»‘i nhiá»‡m vá»¥ cho Thread Pool, cÃ³ cÃ¡c trÆ°á»ng há»£p sau:</p>
<ul>
<li>Náº¿u Thread Pool lÃµi chÆ°a Ä‘áº§y, táº¡o má»™t luá»“ng má»›i Ä‘á»ƒ thá»±c thi nhiá»‡m vá»¥.</li>
<li>Náº¿u Thread Pool lÃµi Ä‘Ã£ Ä‘áº§y, hÃ ng Ä‘á»£i cÃ´ng viá»‡c chÆ°a Ä‘áº§y, lÆ°u luá»“ng vÃ o hÃ ng Ä‘á»£i cÃ´ng viá»‡c.</li>
<li>Náº¿u hÃ ng Ä‘á»£i cÃ´ng viá»‡c Ä‘Ã£ Ä‘áº§y, sá»‘ lÆ°á»£ng luá»“ng nhá» hÆ¡n sá»‘ luá»“ng tá»‘i Ä‘a thÃ¬ táº¡o má»™t luá»“ng má»›i Ä‘á»ƒ xá»­ lÃ½ nhiá»‡m vá»¥.</li>
<li>Náº¿u vÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng luá»“ng tá»‘i Ä‘a, nhiá»‡m vá»¥ sáº½ Ä‘Æ°á»£c xá»­ lÃ½ theo chiáº¿n lÆ°á»£c tá»« chá»‘i.</li>
</ul>
<p>CÃ¡c tham sá»‘ cá»§a Thread Pool:</p>
<ul>
<li><strong>corePoolSize</strong>: Sá»‘ lÆ°á»£ng luá»“ng lÃµi thÆ°á»ng trá»±c. Náº¿u vÆ°á»£t quÃ¡ giÃ¡ trá»‹ nÃ y vÃ  luá»“ng khÃ´ng hoáº¡t Ä‘á»™ng, nÃ³ sáº½ bá»‹ há»§y.</li>
<li><strong>maximumPoolSize</strong>: Sá»‘ lÆ°á»£ng luá»“ng tá»‘i Ä‘a mÃ  Thread Pool cÃ³ thá»ƒ chá»©a.</li>
<li><strong>keepAliveTime</strong>: Thá»i gian giá»¯ láº¡i luá»“ng khÃ´ng hoáº¡t Ä‘á»™ng. Khi luá»“ng khÃ´ng hoáº¡t Ä‘á»™ng Ä‘áº¿n giÃ¡ trá»‹ nÃ y, nÃ³ sáº½ bá»‹ há»§y, chá»‰ giá»¯ láº¡i cÃ¡c luá»“ng lÃµi Ä‘á»ƒ trÃ¡nh lÃ£ng phÃ­ tÃ i nguyÃªn bá»™ nhá»›.</li>
<li><strong>workQueue</strong>: HÃ ng Ä‘á»£i cÃ´ng viá»‡c.</li>
<li><strong>threadFactory</strong>: NhÃ  mÃ¡y luá»“ng, dÃ¹ng Ä‘á»ƒ sáº£n xuáº¥t cÃ¡c luá»“ng cho nhÃ³m nhiá»‡m vá»¥ tÆ°Æ¡ng tá»±.</li>
<li><strong>handler</strong>: Chiáº¿n lÆ°á»£c tá»« chá»‘i.</li>
</ul>
<p>CÃ¡c chiáº¿n lÆ°á»£c tá»« chá»‘i:</p>
<ul>
<li><strong>AbortPolicy</strong>: Bá» qua nhiá»‡m vá»¥ vÃ  nÃ©m ra ngoáº¡i lá»‡.</li>
<li><strong>CallerRunsPolicy</strong>: Thá»­ láº¡i viá»‡c ná»™p nhiá»‡m vá»¥.</li>
<li><strong>DiscardOldestPolicy</strong>: Bá» nhiá»‡m vá»¥ chá» Ä‘á»£i lÃ¢u nháº¥t trong hÃ ng Ä‘á»£i vÃ  thÃªm nhiá»‡m vá»¥ hiá»‡n táº¡i vÃ o hÃ ng Ä‘á»£i.</li>
<li><strong>DiscardPolicy</strong>: Bá» nhiá»‡m vá»¥ hiá»‡n táº¡i nhÆ°ng khÃ´ng nÃ©m ra ngoáº¡i lá»‡.</li>
</ul>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» khung Executor</h3>
<p>Khung Executor nháº±m tÃ¡ch biá»‡t viá»‡c ná»™p nhiá»‡m vá»¥ vÃ  cÃ¡ch thá»±c thi nhiá»‡m vá»¥. NgÆ°á»i dÃ¹ng khÃ´ng cáº§n pháº£i xem xÃ©t viá»‡c thiáº¿t káº¿ ná»™p nhiá»‡m vá»¥ tá»« mÃ£ nguá»“n, chá»‰ cáº§n gá»i phÆ°Æ¡ng thá»©c <code>execute</code> cá»§a cÃ¡c lá»›p triá»ƒn khai cá»§a khung Executor Ä‘á»ƒ ná»™p nhiá»‡m vá»¥.</p>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» káº¿ thá»«a cá»§a Executor</h3>
<ul>
<li><strong>Executor</strong>: Má»™t interface Ä‘á»‹nh nghÄ©a má»™t phÆ°Æ¡ng thá»©c nháº­n Ä‘á»‘i tÆ°á»£ng Runnable vÃ  thá»±c thi nhiá»‡m vá»¥.</li>
<li><strong>ExecutorService</strong>: interface con cá»§a Executor, Ä‘á»‹nh nghÄ©a má»™t phÆ°Æ¡ng thá»©c nháº­n Ä‘á»‘i tÆ°á»£ng Callable vÃ  tráº£ vá» Ä‘á»‘i tÆ°á»£ng Future, Ä‘á»“ng thá»i cung cáº¥p phÆ°Æ¡ng thá»©c execute.</li>
<li><strong>ScheduledExecutorService</strong>: interface con cá»§a ExecutorService, há»— trá»£ thá»±c thi nhiá»‡m vá»¥ Ä‘á»‹nh ká»³.</li>
<li><strong>AbstractExecutorService</strong>: Lá»›p trá»«u tÆ°á»£ng, cung cáº¥p triá»ƒn khai máº·c Ä‘á»‹nh cho cÃ¡c phÆ°Æ¡ng thá»©c thá»±c thi cá»§a ExecutorService.</li>
<li><strong>Executors</strong>: Lá»›p nhÃ  mÃ¡y tÄ©nh, cung cáº¥p má»™t loáº¡t cÃ¡c phÆ°Æ¡ng thá»©c nhÃ  mÃ¡y Ä‘á»ƒ táº¡o Thread Pool.</li>
<li><strong>ThreadPoolExecutor</strong>: Káº¿ thá»«a AbstractExecutorService, dÃ¹ng Ä‘á»ƒ táº¡o Thread Pool.</li>
<li><strong>ForkJoinPool</strong>: Káº¿ thá»«a AbstractExecutorService, chia nhiá»‡m vá»¥ lá»›n thÃ nh nhiá»u nhiá»‡m vá»¥ nhá» Ä‘á»ƒ thá»±c thi vÃ  tá»•ng há»£p káº¿t quáº£.</li>
<li><strong>ScheduledThreadPoolExecutor</strong>: Káº¿ thá»«a ThreadPoolExecutor, triá»ƒn khai ScheduledExecutorService, dÃ¹ng Ä‘á»ƒ táº¡o Thread Pool cÃ³ nhiá»‡m vá»¥ Ä‘á»‹nh ká»³.</li>
</ul>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» tráº¡ng thÃ¡i cá»§a Thread Pool</h3>
<ul>
<li><strong>Running</strong>: CÃ³ thá»ƒ nháº­n nhiá»‡m vá»¥ má»›i vÃ  xá»­ lÃ½ nhiá»‡m vá»¥ trong hÃ ng Ä‘á»£i.</li>
<li><strong>Shutdown</strong>: KhÃ´ng nháº­n nhiá»‡m vá»¥ má»›i nhÆ°ng xá»­ lÃ½ cÃ¡c nhiá»‡m vá»¥ tá»“n Ä‘á»ng, gá»i phÆ°Æ¡ng thá»©c <code>shutdown</code> khi Ä‘ang á»Ÿ tráº¡ng thÃ¡i running sáº½ chuyá»ƒn sang tráº¡ng thÃ¡i nÃ y.</li>
<li><strong>Stop</strong>: KhÃ´ng nháº­n nhiá»‡m vá»¥ má»›i vÃ  khÃ´ng xá»­ lÃ½ cÃ¡c nhiá»‡m vá»¥ tá»“n Ä‘á»ng, gá»i phÆ°Æ¡ng thá»©c <code>shutdownNow</code> Ä‘á»ƒ chuyá»ƒn sang tráº¡ng thÃ¡i nÃ y.</li>
<li><strong>Tidying</strong>: Táº¥t cáº£ nhiá»‡m vá»¥ Ä‘Ã£ káº¿t thÃºc, sá»‘ luá»“ng Ä‘ang hoáº¡t Ä‘á»™ng báº±ng 0.</li>
<li><strong>Terminated</strong>: Thread Pool hoÃ n toÃ n káº¿t thÃºc, gá»i phÆ°Æ¡ng thá»©c <code>terminated</code> á»Ÿ tráº¡ng thÃ¡i tidying sáº½ chuyá»ƒn sang tráº¡ng thÃ¡i nÃ y.</li>
</ul>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» cÃ¡c loáº¡i Thread Pool</h3>
<ul>
<li><strong>newCachedThreadPool</strong>: Bá»ƒ luá»“ng cÃ³ thá»ƒ lÆ°u trá»¯ luá»“ng, cÃ³ thá»ƒ thiáº¿t láº­p sá»‘ lÆ°á»£ng luá»“ng tá»‘i thiá»ƒu vÃ  tá»‘i Ä‘a, luá»“ng khÃ´ng hoáº¡t Ä‘á»™ng trong 1 phÃºt sáº½ bá»‹ há»§y.</li>
<li><strong>newFixedThreadPool</strong>: Bá»ƒ luá»“ng vá»›i sá»‘ lÆ°á»£ng luá»“ng lÃ m viá»‡c cá»‘ Ä‘á»‹nh.</li>
<li><strong>newSingleThreadExecutor</strong>: Executor vá»›i má»™t luá»“ng duy nháº¥t.</li>
<li><strong>newScheduledThreadPool</strong>: Bá»ƒ luá»“ng vá»›i sá»‘ lÆ°á»£ng luá»“ng cá»‘ Ä‘á»‹nh há»— trá»£ nhiá»‡m vá»¥ Ä‘á»‹nh ká»³.</li>
<li><strong>newSingleThreadScheduledExecutor</strong>: Executor vá»›i má»™t luá»“ng duy nháº¥t há»— trá»£ nhiá»‡m vá»¥ Ä‘á»‹nh ká»³.</li>
</ul>
<h3>MÃ´ táº£ ngáº¯n gá»n vá» hÃ ng Ä‘á»£i cháº·n (Blocking Queue)</h3>
<p>HÃ ng Ä‘á»£i cháº·n lÃ  má»™t trong nhá»¯ng thÃ nh pháº§n cá»¥ thá»ƒ cá»§a mÃ´ hÃ¬nh sáº£n xuáº¥t-tiÃªu thá»¥. Khi hÃ ng Ä‘á»£i cháº·n rá»—ng, thao tÃ¡c láº¥y pháº§n tá»­ tá»« hÃ ng Ä‘á»£i sáº½ bá»‹ cháº·n. Khi hÃ ng Ä‘á»£i cháº·n Ä‘áº§y, thao tÃ¡c thÃªm pháº§n tá»­ vÃ o hÃ ng Ä‘á»£i sáº½ bá»‹ cháº·n. CÃ¡c triá»ƒn khai cá»¥ thá»ƒ bao gá»“m:</p>
<ul>
<li><strong>ArrayBlockingQueue</strong>: HÃ ng Ä‘á»£i cháº·n cÃ³ giá»›i háº¡n, Ä‘Æ°á»£c táº¡o thÃ nh tá»« máº£ng.</li>
<li><strong>LinkedBlockingQueue</strong>: HÃ ng Ä‘á»£i cháº·n cÃ³ giá»›i háº¡n, Ä‘Æ°á»£c táº¡o thÃ nh tá»« danh sÃ¡ch liÃªn káº¿t.</li>
<li><strong>PriorityBlockingQueue</strong>: HÃ ng Ä‘á»£i Æ°u tiÃªn cháº·n.</li>
<li><strong>DelayQueue</strong>: Táº¡o pháº§n tá»­ cÃ³ thá»ƒ Ä‘Æ°á»£c láº¥y ra khá»i hÃ ng Ä‘á»£i sau má»™t khoáº£ng thá»i gian nháº¥t Ä‘á»‹nh.</li>
<li><strong>SynchronousQueue</strong>: HÃ ng Ä‘á»£i cháº·n khÃ´ng lÆ°u trá»¯ pháº§n tá»­, má»—i láº§n thÃªm pháº£i chá» thao tÃ¡c láº¥y.</li>
<li><strong>LinkedTransferQueue</strong>: Giá»‘ng LinkedBlockingQueue nhÆ°ng cÃ³ thÃªm phÆ°Æ¡ng thá»©c transfer, tá»©c lÃ  náº¿u cÃ³ ngÆ°á»i tiÃªu thá»¥ Ä‘ang chá» nháº­n pháº§n tá»­, cÃ³ thá»ƒ ngay láº­p tá»©c chuyá»ƒn pháº§n tá»­ tá»« nhÃ  sáº£n xuáº¥t sang ngÆ°á»i tiÃªu thá»¥.</li>
<li><strong>LinkedBlockingDeque</strong>: HÃ ng Ä‘á»£i cháº·n hai chiá»u.</li>
</ul>
<h3>NÃ³i vá» ThreadLocal</h3>
<p>ThreadLocal lÃ  biáº¿n chia sáº» trong luá»“ng. ThreadLocal cÃ³ má»™t lá»›p ná»™i bá»™ tÄ©nh lÃ  ThreadLocalMap, khÃ³a lÃ  Ä‘á»‘i tÆ°á»£ng ThreadLocal, giÃ¡ trá»‹ lÃ  Ä‘á»‘i tÆ°á»£ng Entry. ThreadLocalMap lÃ  riÃªng tÆ° cho má»—i luá»“ng.</p>
<ul>
<li><strong>set</strong>: Äáº·t giÃ¡ trá»‹ cho ThreadLocalMap.</li>
<li><strong>get</strong>: Láº¥y giÃ¡ trá»‹ tá»« ThreadLocalMap.</li>
<li><strong>remove</strong>: XÃ³a Ä‘á»‘i tÆ°á»£ng kiá»ƒu ThreadLocalMap.</li>
</ul>
<p>Váº¥n Ä‘á»: Äá»‘i vá»›i Thread Pool, vÃ¬ Thread Pool tÃ¡i sá»­ dá»¥ng cÃ¡c Ä‘á»‘i tÆ°á»£ng Thread, do Ä‘Ã³ cÃ¡c ThreadLocal gáº¯n vá»›i Thread cÅ©ng bá»‹ tÃ¡i sá»­ dá»¥ng, gÃ¢y ra má»™t loáº¡t váº¥n Ä‘á».</p>
<p>VÃ­ dá»¥: rÃ² rá»‰ bá»™ nhá»›. Do ThreadLocal lÃ  tham chiáº¿u yáº¿u, nhÆ°ng giÃ¡ trá»‹ cá»§a Entry lÃ  tham chiáº¿u máº¡nh, do Ä‘Ã³ khi ThreadLocal bá»‹ thu gom rÃ¡c, giÃ¡ trá»‹ váº«n khÃ´ng Ä‘Æ°á»£c giáº£i phÃ³ng, gÃ¢y ra rÃ² rá»‰ bá»™ nhá»›.</p>
<h3>NÃ³i vá» hiá»ƒu biáº¿t cá»§a báº¡n vá» lá»›p unsafe trong gÃ³i Java concurrency</h3>
<p>Trong ngÃ´n ngá»¯ Java, khÃ´ng cÃ³ cÃ¡c thÃ nh pháº§n con trá» trá»±c tiáº¿p, vÃ  thÆ°á»ng khÃ´ng thá»ƒ sá»­ dá»¥ng offset Ä‘á»ƒ thao tÃ¡c má»™t khá»‘i bá»™ nhá»›. CÃ¡c thao tÃ¡c nÃ y tÆ°Æ¡ng Ä‘á»‘i an toÃ n (safe).</p>
<p>Java cÃ³ má»™t lá»›p gá»i lÃ  Unsafe, lá»›p nÃ y mang láº¡i cho Java kháº£ nÄƒng thao tÃ¡c khÃ´ng gian bá»™ nhá»› giá»‘ng nhÆ° con trá» trong ngÃ´n ngá»¯ C, Ä‘á»“ng thá»i cÅ©ng mang láº¡i cÃ¡c váº¥n Ä‘á» vá» con trá». Lá»›p nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c coi lÃ  ná»n táº£ng cho viá»‡c phÃ¡t triá»ƒn Ä‘a luá»“ng trong Java.</p>
<h3>KhÃ³a láº¡c quan vÃ  thuáº­t toÃ¡n CAS trong Java</h3>
<p>KhÃ³a láº¡c quan cho ráº±ng xÃ¡c suáº¥t xáº£y ra xung Ä‘á»™t Ä‘á»“ng thá»i lÃ  ráº¥t tháº¥p, do Ä‘Ã³ khÃ´ng khÃ³a trong quÃ¡ trÃ¬nh Ä‘á»c dá»¯ liá»‡u.</p>
<p>Chá»‰ khi thá»±c hiá»‡n thao tÃ¡c ghi, má»›i kiá»ƒm tra xem dá»¯ liá»‡u cÃ³ bá»‹ thay Ä‘á»•i bá»Ÿi cÃ¡c luá»“ng khÃ¡c khÃ´ng. Náº¿u cÃ³ thay Ä‘á»•i, ghi tháº¥t báº¡i; náº¿u khÃ´ng, tiáº¿n hÃ nh ghi vÃ  bÃ¡o cÃ¡o thÃ nh cÃ´ng.</p>
<p>KhÃ³a láº¡c quan thÆ°á»ng sá»­ dá»¥ng thuáº­t toÃ¡n Compare And Swap (CAS) Ä‘á»ƒ triá»ƒn khai. NhÆ° tÃªn gá»i, thuáº­t toÃ¡n nÃ y bao gá»“m hai thao tÃ¡c: so sÃ¡nh (Compare) vÃ  hoÃ¡n Ä‘á»•i (Swap).</p>
<h3>Váº¥n Ä‘á» ABA vÃ  cÃ¡ch giáº£i quyáº¿t</h3>
<p>Thuáº­t toÃ¡n CAS dá»±a vÃ o giÃ¡ trá»‹ Ä‘á»ƒ so sÃ¡nh. Náº¿u cÃ³ hai luá»“ng, má»™t luá»“ng thay Ä‘á»•i giÃ¡ trá»‹ tá»« A thÃ nh B, sau Ä‘Ã³ tá»« B quay láº¡i A, khi luá»“ng hiá»‡n táº¡i triá»ƒn khai thuáº­t toÃ¡n CAS, sáº½ dá»… dÃ ng nháº­n Ä‘á»‹nh ráº±ng giÃ¡ trá»‹ khÃ´ng thay Ä‘á»•i vÃ  nghÄ© ráº±ng khÃ´ng cÃ³ luá»“ng nÃ o khÃ¡c Ä‘Ã£ thay Ä‘á»•i dá»¯ liá»‡u.</p>
<p>GÃ³i <code>java.util.concurrent</code> cung cáº¥p má»™t lá»›p AtomicStampedReference, thÃªm dáº¥u phiÃªn báº£n vÃ o giÃ¡ trá»‹ Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» ABA.</p>
<h3>CÃ¡c lá»›p Atomic phá»• biáº¿n</h3>
<p>Trong nhiá»u trÆ°á»ng há»£p, chÃºng ta chá»‰ cáº§n má»™t giáº£i phÃ¡p ++ hoáº·c -- Ä‘Æ¡n giáº£n, hiá»‡u quáº£ vÃ  an toÃ n trong mÃ´i trÆ°á»ng Ä‘a luá»“ng. Sá»­ dá»¥ng synchronized hoáº·c lock cÃ³ thá»ƒ giáº£i quyáº¿t, nhÆ°ng chi phÃ­ lá»›n. Lá»›p Atomic tiá»‡n lá»£i hÆ¡n. DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c lá»›p Atomic cÆ¡ báº£n:</p>
<ul>
<li>AtomicInteger: Cáº­p nháº­t sá»‘ nguyÃªn nguyÃªn tá»­.</li>
<li>AtomicLong: Cáº­p nháº­t sá»‘ nguyÃªn dÃ i nguyÃªn tá»­.</li>
<li>AtomicBoolean: Cáº­p nháº­t kiá»ƒu boolean nguyÃªn tá»­.</li>
</ul>
<p>CÃ¡c lá»›p máº£ng Atomic:</p>
<ul>
<li>AtomicIntegerArray: Cáº­p nháº­t nguyÃªn tá»­ cÃ¡c pháº§n tá»­ trong máº£ng sá»‘ nguyÃªn.</li>
<li>AtomicLongArray: Cáº­p nháº­t nguyÃªn tá»­ cÃ¡c pháº§n tá»­ trong máº£ng sá»‘ nguyÃªn dÃ i.</li>
<li>AtomicReferenceArray: Cáº­p nháº­t nguyÃªn tá»­ cÃ¡c pháº§n tá»­ trong máº£ng tham chiáº¿u.</li>
</ul>
<p>CÃ¡c lá»›p tham chiáº¿u Atomic:</p>
<ul>
<li>AtomicReference: Cáº­p nháº­t nguyÃªn tá»­ cÃ¡c tham chiáº¿u.</li>
<li>AtomicMarkableReference: Cáº­p nháº­t nguyÃªn tá»­ cÃ¡c tham chiáº¿u cÃ³ cá» Ä‘Ã¡nh dáº¥u.</li>
<li>AtomicStampedReference: Cáº­p nháº­t nguyÃªn tá»­ cÃ¡c tham chiáº¿u cÃ³ phiÃªn báº£n.</li>
</ul>
<p>FieldUpdater:</p>
<ul>
<li>AtomicIntegerFieldUpdater: Cáº­p nháº­t nguyÃªn tá»­ cÃ¡c trÆ°á»ng sá»‘ nguyÃªn.</li>
<li>AtomicLongFieldUpdater: Cáº­p nháº­t nguyÃªn tá»­ cÃ¡c trÆ°á»ng sá»‘ nguyÃªn dÃ i.</li>
<li>AtomicReferenceFieldUpdater: Cáº­p nháº­t nguyÃªn tá»­ cÃ¡c trÆ°á»ng tham chiáº¿u.</li>
</ul>
<h3>NguyÃªn lÃ½ cÆ¡ báº£n cá»§a lá»›p Atomic</h3>
<p>Láº¥y vÃ­ dá»¥ lá»›p AtomicInteger.</p>
<p>PhÆ°Æ¡ng thá»©c getAndIncrement tÄƒng giÃ¡ trá»‹ hiá»‡n táº¡i lÃªn 1 má»™t cÃ¡ch nguyÃªn tá»­. CÃ¡ch triá»ƒn khai cá»¥ thá»ƒ nhÆ° sau:</p>
<ul>
<li>Trong vÃ²ng láº·p for vÃ´ táº­n, láº¥y giÃ¡ trá»‹ hiá»‡n táº¡i trong AtomicInteger.</li>
<li>TÄƒng giÃ¡ trá»‹ hiá»‡n táº¡i lÃªn 1.</li>
<li>Gá»i phÆ°Æ¡ng thá»©c compareAndSet Ä‘á»ƒ cáº­p nháº­t nguyÃªn tá»­.</li>
<li>Kiá»ƒm tra giÃ¡ trá»‹ hiá»‡n táº¡i cÃ³ báº±ng vá»›i giÃ¡ trá»‹ mong Ä‘á»£i.</li>
<li>Náº¿u báº±ng, nghÄ©a lÃ  giÃ¡ trá»‹ chÆ°a bá»‹ luá»“ng khÃ¡c thay Ä‘á»•i, cáº­p nháº­t giÃ¡ trá»‹ má»›i.</li>
<li>Náº¿u khÃ´ng báº±ng, vÃ²ng láº·p tiáº¿p tá»¥c so sÃ¡nh láº¡i.</li>
</ul>
<h3>CountDownLatch</h3>
<p>CountDownLatch cho phÃ©p má»™t luá»“ng chá» Ä‘á»£i cÃ¡c luá»“ng khÃ¡c hoÃ n thÃ nh. ÄÆ°á»£c triá»ƒn khai báº±ng má»™t bá»™ Ä‘áº¿m, khá»Ÿi táº¡o báº±ng sá»‘ lÆ°á»£ng luá»“ng. Khi má»™t luá»“ng hoÃ n thÃ nh, gá»i phÆ°Æ¡ng thá»©c countDown Ä‘á»ƒ giáº£m bá»™ Ä‘áº¿m. Khi bá»™ Ä‘áº¿m báº±ng 0, luá»“ng chá» cÃ³ thá»ƒ tiáº¿p tá»¥c. CountDownLatch chá»‰ sá»­ dá»¥ng má»™t láº§n, khÃ´ng reset Ä‘Æ°á»£c.</p>
<h3>CyclicBarrier</h3>
<p>CyclicBarrier cÃ³ chá»©c nÄƒng tÆ°Æ¡ng tá»± CountDownLatch, cÅ©ng sá»­ dá»¥ng bá»™ Ä‘áº¿m Ä‘á»ƒ cho phÃ©p má»™t luá»“ng chá» cÃ¡c luá»“ng khÃ¡c hoÃ n thÃ nh. Tuy nhiÃªn, CyclicBarrier cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng (reset).</p>
<h3>Semaphore</h3>
<p>Semaphore, hay cÃ²n gá»i lÃ  cá» hiá»‡u, nháº­n má»™t giÃ¡ trá»‹ int Ä‘á»ƒ Ä‘áº·t sá»‘ lÆ°á»£ng phÃ©p cáº¥p phÃ©p kháº£ dá»¥ng. Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c acquire Ä‘á»ƒ nháº­n má»™t phÃ©p cáº¥p phÃ©p, giáº£m bá»™ Ä‘áº¿m, vÃ  release Ä‘á»ƒ tráº£ láº¡i phÃ©p cáº¥p phÃ©p, tÄƒng bá»™ Ä‘áº¿m. Náº¿u bá»™ Ä‘áº¿m báº±ng 0, luá»“ng sáº½ vÃ o tráº¡ng thÃ¡i chá».</p>
<h3>Exchanger</h3>
<p>Lá»›p Exchanger cho phÃ©p hai luá»“ng trao Ä‘á»•i thÃ´ng tin. CÃ³ thá»ƒ hiá»ƒu Exchanger nhÆ° má»™t container chá»©a hai Ã´. ThÃ´ng qua phÆ°Æ¡ng thá»©c exchange, hai luá»“ng cÃ³ thá»ƒ trao Ä‘á»•i dá»¯ liá»‡u. Khi hai luá»“ng Ä‘áº¿n Ä‘iá»ƒm Ä‘á»“ng bá»™, thÃ´ng tin trong hai Ã´ sáº½ Ä‘Æ°á»£c hoÃ¡n Ä‘á»•i vÃ  tráº£ vá» cho cÃ¡c luá»“ng.</p>
<h3>ConcurrentHashMap</h3>
<p>Trong JDK7, sá»­ dá»¥ng ká»¹ thuáº­t phÃ¢n Ä‘oáº¡n khÃ³a. Dá»¯ liá»‡u Ä‘Æ°á»£c chia thÃ nh cÃ¡c Ä‘oáº¡n Segment, má»—i Ä‘oáº¡n cÃ³ má»™t khÃ³a riÃªng. Khi má»™t luá»“ng giá»¯ khÃ³a cá»§a má»™t Ä‘oáº¡n, cÃ¡c Ä‘oáº¡n khÃ¡c váº«n cÃ³ thá»ƒ Ä‘Æ°á»£c truy cáº­p bá»Ÿi cÃ¡c luá»“ng khÃ¡c.</p>
<p>PhÆ°Æ¡ng thá»©c get khÃ´ng cáº§n khÃ³a, chá»‰ khi Ä‘á»c giÃ¡ trá»‹ trá»‘ng má»›i cáº§n khÃ³a. PhÆ°Æ¡ng thá»©c put pháº£i khÃ³a, Ä‘á»‹nh vá»‹ Ä‘áº¿n Segment vÃ  chÃ¨n pháº§n tá»­.</p>
<p>Trong JDK8, cáº£i tiáº¿n báº±ng cÃ¡ch:</p>
<ul>
<li>Bá» cÆ¡ cháº¿ phÃ¢n Ä‘oáº¡n khÃ³a, sá»­ dá»¥ng thuáº­t toÃ¡n CAS Ä‘á»ƒ cáº­p nháº­t giÃ¡ trá»‹. Náº¿u CAS tháº¥t báº¡i, sá»­ dá»¥ng synchronized Ä‘á»ƒ khÃ³a vÃ  chÃ¨n pháº§n tá»­.</li>
<li>ThÃªm cáº¥u trÃºc cÃ¢y Ä‘á»-Ä‘en. Khi má»™t slot chá»©a hÆ¡n 8 pháº§n tá»­ vÃ  máº£ng Node lá»›n hÆ¡n 64, chuyá»ƒn danh sÃ¡ch liÃªn káº¿t thÃ nh cÃ¢y Ä‘á»-Ä‘en.</li>
<li>Tá»‘i Æ°u hÃ³a cÃ¡ch Ä‘áº¿m sá»‘ lÆ°á»£ng pháº§n tá»­ trong táº­p há»£p.</li>
</ul>
<h3>NguyÃªn lÃ½ cá»§a tá»« khÃ³a synchronized</h3>
<p>CÃ¡c Ä‘á»‘i tÆ°á»£ng Java cÃ³ má»™t monitor liÃªn káº¿t. Khi sá»­ dá»¥ng synchronized, JVM sáº½ tÃ¬m monitor cá»§a Ä‘á»‘i tÆ°á»£ng vÃ  quyáº¿t Ä‘á»‹nh khÃ³a hoáº·c má»Ÿ khÃ³a dá»±a trÃªn tráº¡ng thÃ¡i cá»§a monitor. Náº¿u khÃ³a thÃ nh cÃ´ng, monitor sáº½ khÃ´ng bá»‹ cÃ¡c luá»“ng khÃ¡c láº¥y Ä‘áº¿n khi Ä‘Æ°á»£c giáº£i phÃ³ng.</p>
<p>Synchronized sau khi biÃªn dá»‹ch sáº½ táº¡o ra hai lá»‡nh bytecode monitorenter vÃ  monitorexit, Ä‘á»ƒ láº¥y vÃ  giáº£i phÃ³ng monitor. Hai lá»‡nh nÃ y cáº§n má»™t tham chiáº¿u Ä‘á»ƒ xÃ¡c Ä‘á»‹nh Ä‘á»‘i tÆ°á»£ng khÃ³a hoáº·c má»Ÿ khÃ³a. Vá»›i phÆ°Æ¡ng thá»©c thÃ´ng thÆ°á»ng, khÃ³a lÃ  Ä‘á»‘i tÆ°á»£ng hiá»‡n táº¡i; vá»›i phÆ°Æ¡ng thá»©c tÄ©nh, khÃ³a lÃ  Ä‘á»‘i tÆ°á»£ng Class; vá»›i khá»‘i mÃ£ Ä‘á»“ng bá»™, khÃ³a lÃ  Ä‘á»‘i tÆ°á»£ng trong ngoáº·c.</p>
<p>Khi triá»ƒn khai monitorenter, náº¿u Ä‘á»‘i tÆ°á»£ng khÃ´ng bá»‹ khÃ³a hoáº·c luá»“ng hiá»‡n táº¡i Ä‘Ã£ giá»¯ khÃ³a, tÄƒng bá»™ Ä‘áº¿m khÃ³a lÃªn 1. Khi triá»ƒn khai monitorexit, giáº£m bá»™ Ä‘áº¿m khÃ³a Ä‘i 1. Khi bá»™ Ä‘áº¿m báº±ng 0, khÃ³a Ä‘Æ°á»£c giáº£i phÃ³ng.</p>
<h3>CÃ¡ch sá»­ dá»¥ng tá»« khÃ³a synchronized</h3>
<ul>
<li>Sá»­ dá»¥ng Ä‘á»ƒ sá»­a Ä‘á»•i má»™t phÆ°Æ¡ng thá»©c thá»ƒ hiá»‡n.</li>
<li>Sá»­ dá»¥ng Ä‘á»ƒ sá»­a Ä‘á»•i má»™t phÆ°Æ¡ng thá»©c tÄ©nh.</li>
<li>Sá»­ dá»¥ng Ä‘á»ƒ sá»­a Ä‘á»•i má»™t khá»‘i mÃ£ Ä‘á»“ng bá»™.</li>
</ul>
<h3>Giá»›i thiá»‡u vá» KhÃ³a ThiÃªn Vá»‹ trong Java</h3>
<p>KhÃ³a thiÃªn vá»‹ Ä‘Æ°á»£c giá»›i thiá»‡u trong JDK 1.6. KhÃ¡i niá»‡m nÃ y Ä‘Æ°á»£c Ä‘Æ°a ra do cÃ¡c nhÃ  phÃ¡t triá»ƒn nháº­n tháº¥y trong háº§u háº¿t cÃ¡c trÆ°á»ng há»£p, khÃ³a khÃ´ng cÃ³ sá»± cáº¡nh tranh, vÃ  má»™t khÃ³a thÆ°á»ng Ä‘Æ°á»£c giá»¯ bá»Ÿi cÃ¹ng má»™t luá»“ng. KhÃ³a thiÃªn vá»‹ khÃ´ng tá»± Ä‘á»™ng giáº£i phÃ³ng, má»—i khi vÃ o khÃ³a thiÃªn vá»‹, nÃ³ sáº½ kiá»ƒm tra xem tÃ i nguyÃªn cÃ³ thiÃªn vá» nÃ³ hay khÃ´ng, náº¿u cÃ³ thÃ¬ khÃ´ng cáº§n thá»±c hiá»‡n thÃªm thao tÃ¡c nÃ o vÃ  cÃ³ thá»ƒ vÃ o khá»‘i Ä‘á»“ng bá»™ ngay láº­p tá»©c.</p>
<p>Quy trÃ¬nh xin khÃ³a nhÆ° sau:</p>
<ul>
<li>Äáº§u tiÃªn, kiá»ƒm tra xem Mark Word cá»§a Ä‘á»‘i tÆ°á»£ng cÃ³ thuá»™c cháº¿ Ä‘á»™ thiÃªn vá»‹ hay khÃ´ng, náº¿u khÃ´ng, chuyá»ƒn sang kiá»ƒm tra khÃ³a nháº¹. Náº¿u cÃ³, tiáº¿p tá»¥c bÆ°á»›c tiáº¿p theo;</li>
<li>Kiá»ƒm tra ID cá»§a luá»“ng yÃªu cáº§u khÃ³a hiá»‡n táº¡i cÃ³ trÃ¹ng vá»›i ID cá»§a luá»“ng ghi nháº­n trong khÃ³a thiÃªn vá»‹ hay khÃ´ng. Náº¿u trÃ¹ng, tiáº¿p tá»¥c bÆ°á»›c tiáº¿p theo, náº¿u khÃ´ng, chuyá»ƒn Ä‘áº¿n bÆ°á»›c 4;</li>
<li>Kiá»ƒm tra cÃ³ cáº§n thiÃªn vá»‹ láº¡i hay khÃ´ng. Náº¿u khÃ´ng, luá»“ng sáº½ nháº­n Ä‘Æ°á»£c khÃ³a thiÃªn vá»‹ ngay;</li>
<li>Sá»­ dá»¥ng thuáº­t toÃ¡n CAS Ä‘á»ƒ thay Ä‘á»•i Mark Word cá»§a Ä‘á»‘i tÆ°á»£ng, thay pháº§n ID luá»“ng thÃ nh ID cá»§a luá»“ng hiá»‡n táº¡i. Náº¿u thÃ nh cÃ´ng, khÃ³a thiÃªn vá»‹ sáº½ Ä‘Æ°á»£c nháº­n. Náº¿u tháº¥t báº¡i, tá»©c lÃ  cÃ³ sá»± cáº¡nh tranh tá»« nhiá»u luá»“ng, khÃ³a sáº½ nÃ¢ng cáº¥p thÃ nh khÃ³a nháº¹.</li>
</ul>
<h3>Giá»›i thiá»‡u vá» KhÃ³a Nháº¹</h3>
<p>KhÃ³a nháº¹ Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ giáº£m thiá»ƒu tiÃªu hao hiá»‡u suáº¥t gÃ¢y ra bá»Ÿi khÃ³a náº·ng khi khÃ´ng cÃ³ sá»± cáº¡nh tranh.</p>
<p>Quy trÃ¬nh xin khÃ³a nhÆ° sau:</p>
<ul>
<li>Náº¿u Ä‘á»‘i tÆ°á»£ng Ä‘á»“ng bá»™ chÆ°a bá»‹ khÃ³a, JVM sáº½ táº¡o má»™t khÃ´ng gian ghi khÃ³a trong khung ngÄƒn xáº¿p cá»§a luá»“ng hiá»‡n táº¡i, lÆ°u báº£n sao cá»§a Mark Word cá»§a Ä‘á»‘i tÆ°á»£ng.</li>
<li>JVM sá»­ dá»¥ng CAS Ä‘á»ƒ cá»‘ gáº¯ng cáº­p nháº­t Mark Word cá»§a Ä‘á»‘i tÆ°á»£ng thÃ nh con trá» chá»‰ Ä‘áº¿n khÃ´ng gian ghi khÃ³a.</li>
<li>Náº¿u cáº­p nháº­t thÃ nh cÃ´ng, luá»“ng hiá»‡n táº¡i sáº½ sá»Ÿ há»¯u khÃ³a, Ä‘Ã¡nh dáº¥u tráº¡ng thÃ¡i khÃ³a lÃ  00, biá»ƒu thá»‹ tráº¡ng thÃ¡i khÃ³a nháº¹.</li>
<li>Náº¿u cáº­p nháº­t tháº¥t báº¡i, nghÄ©a lÃ  Ã­t nháº¥t cÃ³ má»™t luá»“ng khÃ¡c cáº¡nh tranh. JVM kiá»ƒm tra Mark Word cá»§a Ä‘á»‘i tÆ°á»£ng cÃ³ chá»‰ Ä‘áº¿n khung ngÄƒn xáº¿p cá»§a luá»“ng hiá»‡n táº¡i hay khÃ´ng.</li>
<li>Náº¿u cÃ³, luá»“ng hiá»‡n táº¡i Ä‘Ã£ sá»Ÿ há»¯u khÃ³a vÃ  tiáº¿p tá»¥c vÃ o khá»‘i Ä‘á»“ng bá»™.</li>
<li>Náº¿u khÃ´ng, khÃ³a Ä‘Ã£ bá»‹ luá»“ng khÃ¡c chiáº¿m dá»¥ng.</li>
<li>Náº¿u cÃ³ hÆ¡n hai luá»“ng cáº¡nh tranh cÃ¹ng má»™t khÃ³a, khÃ³a nháº¹ sáº½ khÃ´ng cÃ²n hiá»‡u quáº£, chuyá»ƒn thÃ nh khÃ³a náº·ng, tráº¡ng thÃ¡i khÃ³a chuyá»ƒn thÃ nh 10, vÃ  cÃ¡c luá»“ng chá» khÃ³a pháº£i bá»‹ cháº·n.</li>
</ul>
<h3>Giá»›i thiá»‡u vá» CÃ¡c Chiáº¿n LÆ°á»£c Tá»‘i Æ¯u KhÃ³a</h3>
<p>Gá»“m cÃ¡c chiáº¿n lÆ°á»£c nhÆ° quay vÃ²ng thÃ­ch á»©ng, loáº¡i bá» khÃ³a, thÃ´ hÃ³a khÃ³a, nÃ¢ng cáº¥p khÃ³a.</p>
<h3>Giá»›i thiá»‡u vá» KhÃ³a Quay VÃ²ng trong Java</h3>
<p>Khi má»™t luá»“ng tháº¥t báº¡i trong viá»‡c nháº­n khÃ³a, cÃ³ thá»ƒ khÃ´ng tá»« bá» CPU mÃ  liÃªn tá»¥c thá»­ láº¡i, gá»i lÃ  khÃ³a quay vÃ²ng.</p>
<h3>Giá»›i thiá»‡u vá» KhÃ³a Quay VÃ²ng ThÃ­ch á»¨ng</h3>
<p>KhÃ³a quay vÃ²ng thÃ­ch á»©ng khÃ´ng Ä‘áº·t sá»‘ láº§n quay vÃ²ng cá»‘ Ä‘á»‹nh mÃ  dá»±a trÃªn thá»i gian quay vÃ²ng trÆ°á»›c Ä‘Ã³ vÃ  tráº¡ng thÃ¡i cá»§a luá»“ng giá»¯ khÃ³a Ä‘á»ƒ quyáº¿t Ä‘á»‹nh.</p>
<h3>Giá»›i thiá»‡u vá» ThÃ´ HÃ³a KhÃ³a</h3>
<p>ThÃ´ hÃ³a khÃ³a lÃ  má»Ÿ rá»™ng pháº¡m vi khÃ³a, trÃ¡nh viá»‡c liÃªn tá»¥c khÃ³a vÃ  má»Ÿ khÃ³a.</p>
<h3>Giá»›i thiá»‡u vá» Loáº¡i Bá» KhÃ³a</h3>
<p>Loáº¡i bá» khÃ³a lÃ  tá»‘i Æ°u hÃ³a triá»‡t Ä‘á»ƒ hÆ¡n, trong quÃ¡ trÃ¬nh biÃªn dá»‹ch, trÃ¬nh biÃªn dá»‹ch Java quÃ©t ngá»¯ cáº£nh thá»±c thi Ä‘á»ƒ loáº¡i bá» nhá»¯ng khÃ³a khÃ´ng cÃ³ kháº£ nÄƒng xáº£y ra cáº¡nh tranh tÃ i nguyÃªn chia sáº».</p>
<h3>Giá»›i thiá»‡u vá» Lock vÃ  ReentrantLock</h3>
<p>interface Lock lÃ  interface chÃ­nh trong gÃ³i Ä‘á»“ng bá»™ cá»§a Java.</p>
<p>KhÃ³a tÃ¡i nháº­p ReentrantLock lÃ  triá»ƒn khai phá»• biáº¿n nháº¥t cá»§a Lock, tÆ°Æ¡ng tá»± synchronized. ReentrantLock máº·c Ä‘á»‹nh lÃ  khÃ´ng cÃ´ng báº±ng, nhÆ°ng cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh khÃ³a cÃ´ng báº±ng qua hÃ m táº¡o. Khi sá»­ dá»¥ng khÃ³a cÃ´ng báº±ng, hiá»‡u suáº¥t sáº½ giáº£m.</p>
<h3>Giá»›i thiá»‡u vá» AQS</h3>
<p>AQS (AbstractQueuedSynchronizer) lÃ  bá»™ Ä‘á»“ng bá»™ hÃ³a kiá»ƒu hÃ ng Ä‘á»£i trá»«u tÆ°á»£ng. AQS Ä‘Ã³ng gÃ³i má»—i luá»“ng yÃªu cáº§u tÃ i nguyÃªn chia sáº» thÃ nh má»™t nÃºt trong hÃ ng Ä‘á»£i khÃ³a, Ä‘á»ƒ quáº£n lÃ½ phÃ¢n phá»‘i khÃ³a. AQS lÃ  ná»n táº£ng xÃ¢y dá»±ng khÃ³a vÃ  cÃ¡c thÃ nh pháº§n Ä‘á»“ng bá»™ khÃ¡c, sá»­ dá»¥ng biáº¿n <code>volatile int state</code> lÃ m tÃ i nguyÃªn chia sáº». Náº¿u luá»“ng khÃ´ng nháº­n Ä‘Æ°á»£c tÃ i nguyÃªn, nÃ³ sáº½ vÃ o hÃ ng Ä‘á»£i Ä‘á»“ng bá»™; náº¿u nháº­n Ä‘Æ°á»£c, nÃ³ sáº½ thá»±c thi mÃ£ vÃ¹ng tá»›i háº¡n vÃ  giáº£i phÃ³ng tÃ i nguyÃªn khi hoÃ n táº¥t, thÃ´ng bÃ¡o cho cÃ¡c luá»“ng chá» trong hÃ ng Ä‘á»£i Ä‘á»“ng bá»™.</p>
<p>Lá»›p con káº¿ thá»«a Ä‘á»“ng bá»™ hÃ³a vÃ  thá»±c hiá»‡n cÃ¡c phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng <code>getState</code>, <code>setState</code> vÃ  <code>compareAndSetState</code> Ä‘á»ƒ thay Ä‘á»•i tráº¡ng thÃ¡i Ä‘á»“ng bá»™.</p>
<p>NguyÃªn lÃ½ nháº­n vÃ  giáº£i phÃ³ng khÃ³a Ä‘á»™c quyá»n cá»§a AQS:</p>
<p>Nháº­n khÃ³a (acquire):</p>
<ul>
<li>Gá»i phÆ°Æ¡ng thá»©c <code>tryAcquire</code> Ä‘á»ƒ nháº­n tráº¡ng thÃ¡i Ä‘á»“ng bá»™ má»™t cÃ¡ch an toÃ n, náº¿u tháº¥t báº¡i, táº¡o nÃºt Ä‘á»“ng bá»™ vÃ  thÃªm vÃ o cuá»‘i hÃ ng Ä‘á»£i qua phÆ°Æ¡ng thá»©c <code>addWaiter</code>, sau Ä‘Ã³ quay vÃ²ng.</li>
<li>Gá»i phÆ°Æ¡ng thá»©c <code>acquireQueued</code> Ä‘á»ƒ nÃºt quay vÃ²ng nháº­n tráº¡ng thÃ¡i Ä‘á»“ng bá»™, náº¿u khÃ´ng Ä‘Æ°á»£c, luá»“ng sáº½ bá»‹ cháº·n.</li>
</ul>
<p>Giáº£i phÃ³ng khÃ³a (release):</p>
<ul>
<li>Gá»i phÆ°Æ¡ng thá»©c <code>tryRelease</code> Ä‘á»ƒ giáº£i phÃ³ng tráº¡ng thÃ¡i Ä‘á»“ng bá»™.</li>
<li>Gá»i phÆ°Æ¡ng thá»©c <code>unparkSuccessor</code> Ä‘á»ƒ Ä‘Ã¡nh thá»©c nÃºt káº¿ tiáº¿p cá»§a nÃºt Ä‘áº§u, cho nÃºt nÃ y thá»­ nháº­n tráº¡ng thÃ¡i Ä‘á»“ng bá»™.</li>
</ul>
<p>NguyÃªn lÃ½ nháº­n vÃ  giáº£i phÃ³ng khÃ³a chia sáº» cá»§a AQS:</p>
<p>Nháº­n khÃ³a (acquireShared):</p>
<ul>
<li>Gá»i phÆ°Æ¡ng thá»©c <code>tryAcquireShared</code> Ä‘á»ƒ thá»­ nháº­n tráº¡ng thÃ¡i Ä‘á»“ng bá»™, náº¿u tráº£ vá» giÃ¡ trá»‹ &gt;= 0, tráº¡ng thÃ¡i Ä‘á»“ng bá»™ sáº½ Ä‘Æ°á»£c nháº­n.</li>
<li>Giáº£i phÃ³ng (releaseShared), vÃ  Ä‘Ã¡nh thá»©c cÃ¡c nÃºt chá» tiáº¿p theo.</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>MySQL Index Q&amp;A</title>
      <link>https://vanhung4499.github.io/interview/knowledge/mysql-index-qa.html</link>
      <guid>https://vanhung4499.github.io/interview/knowledge/mysql-index-qa.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MySQL Index Q&amp;A</source>
      <description>15 cÃ¢u há»i vá» MySQL Index 1. Chá»‰ má»¥c lÃ  gÃ¬? Chá»‰ má»¥c lÃ  má»™t cáº¥u trÃºc dá»¯ liá»‡u giÃºp tÄƒng hiá»‡u suáº¥t truy váº¥n cÆ¡ sá»Ÿ dá»¯ liá»‡u. NÃ³ cÃ³ thá»ƒ so sÃ¡nh nhÆ° má»¥c lá»¥c cá»§a má»™t cuá»‘n tá»« Ä‘iá»ƒn, giÃºp ...</description>
      <category>any</category>
      <pubDate>Fri, 05 Jul 2024 10:10:42 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>1. Chá»‰ má»¥c lÃ  gÃ¬?</h2>
<figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-60177b59-879d-4ee9-9425-e13e79a1eac2.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<ul>
<li>Chá»‰ má»¥c lÃ  má»™t cáº¥u trÃºc dá»¯ liá»‡u giÃºp tÄƒng hiá»‡u suáº¥t truy váº¥n cÆ¡ sá»Ÿ dá»¯ liá»‡u. NÃ³ cÃ³ thá»ƒ so sÃ¡nh nhÆ° má»¥c lá»¥c cá»§a má»™t cuá»‘n tá»« Ä‘iá»ƒn, giÃºp báº¡n nhanh chÃ³ng tÃ¬m tháº¥y cÃ¡c báº£n ghi tÆ°Æ¡ng á»©ng.</li>
<li>Chá»‰ má»¥c thÆ°á»ng Ä‘Æ°á»£c lÆ°u trá»¯ trong cÃ¡c tá»‡p trÃªn Ä‘Ä©a, chiáº¿m khÃ´ng gian váº­t lÃ½.</li>
<li>Tuy nhiÃªn, viá»‡c sá»­ dá»¥ng quÃ¡ nhiá»u chá»‰ má»¥c cÃ³ thá»ƒ áº£nh hÆ°á»Ÿng Ä‘áº¿n chá»©c nÄƒng chÃ¨n vÃ  cáº­p nháº­t cá»§a báº£ng cÆ¡ sá»Ÿ dá»¯ liá»‡u.</li>
</ul>
<h2>2. CÃ¡c loáº¡i chá»‰ má»¥c trong MySQL</h2>
<p><strong>Dá»±a trÃªn cáº¥u trÃºc dá»¯ liá»‡u</strong></p>
<ul>
<li>Chá»‰ má»¥c B+ tree: Táº¥t cáº£ dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ á»Ÿ cÃ¡c nÃºt lÃ¡, Ä‘á»™ phá»©c táº¡p lÃ  <code>O(logn)</code>, phÃ¹ há»£p cho cÃ¡c truy váº¥n pháº¡m vi.</li>
<li>Chá»‰ má»¥c Hash: PhÃ¹ há»£p cho truy váº¥n giÃ¡ trá»‹ báº±ng nhau, hiá»‡u suáº¥t truy váº¥n cao, thá»±c hiá»‡n ngay láº­p tá»©c.</li>
<li>Chá»‰ má»¥c toÃ n vÄƒn: Há»— trá»£ trong <code>MyISAM</code> vÃ  <code>InnoDB</code>, thÆ°á»ng Ä‘Æ°á»£c táº¡o trÃªn cÃ¡c kiá»ƒu vÄƒn báº£n nhÆ° <code>char, text, varchar</code>.</li>
<li>Chá»‰ má»¥c <code>R-Tree</code>: DÃ¹ng Ä‘á»ƒ táº¡o chá»‰ má»¥c <code>SPATIAL</code> cho dá»¯ liá»‡u <code>GIS</code>.</li>
</ul>
<p><strong>Dá»±a trÃªn lÆ°u trá»¯ váº­t lÃ½</strong></p>
<ul>
<li>Chá»‰ má»¥c cá»¥m: Chá»‰ má»¥c cá»¥m lÃ  chá»‰ má»¥c táº¡o dá»±a trÃªn khÃ³a chÃ­nh, lÆ°u trá»¯ dá»¯ liá»‡u cá»§a báº£ng á»Ÿ cÃ¡c nÃºt lÃ¡ (<code>Innodb</code>).</li>
<li>Chá»‰ má»¥c khÃ´ng cá»¥m: Chá»‰ má»¥c khÃ´ng cá»¥m lÃ  chá»‰ má»¥c táº¡o dá»±a trÃªn cÃ¡c khÃ³a khÃ´ng pháº£i khÃ³a chÃ­nh, lÆ°u trá»¯ khÃ³a chÃ­nh vÃ  cá»™t chá»‰ má»¥c á»Ÿ cÃ¡c nÃºt lÃ¡ (<code>Innodb</code>).</li>
</ul>
<p><strong>Dá»±a trÃªn logic</strong></p>
<ul>
<li>Chá»‰ má»¥c khÃ³a chÃ­nh: Má»™t loáº¡i chá»‰ má»¥c duy nháº¥t Ä‘áº·c biá»‡t, khÃ´ng cho phÃ©p giÃ¡ trá»‹ null.</li>
<li>Chá»‰ má»¥c thÃ´ng thÆ°á»ng: Chá»‰ má»¥c cÆ¡ báº£n trong <code>MySQL</code>, cho phÃ©p giÃ¡ trá»‹ null vÃ  trÃ¹ng láº·p.</li>
<li>Chá»‰ má»¥c liÃªn káº¿t: Chá»‰ má»¥c táº¡o tá»« nhiá»u trÆ°á»ng, sá»­ dá»¥ng nguyÃªn táº¯c tiá»n tá»‘ trÃ¡i nháº¥t.</li>
<li>Chá»‰ má»¥c duy nháº¥t: GiÃ¡ trá»‹ trong cá»™t chá»‰ má»¥c pháº£i lÃ  duy nháº¥t, nhÆ°ng cho phÃ©p giÃ¡ trá»‹ null.</li>
<li>Chá»‰ má»¥c khÃ´ng gian: Há»— trá»£ chá»‰ má»¥c khÃ´ng gian tá»« <code>MySQL 5.7</code>, tuÃ¢n theo quy táº¯c mÃ´ hÃ¬nh dá»¯ liá»‡u hÃ¬nh há»c <code>OpenGIS</code>.</li>
</ul>
<h2>3. Khi nÃ o chá»‰ má»¥c sáº½ bá»‹ vÃ´ hiá»‡u?</h2>
<ul>
<li>Äiá»u kiá»‡n truy váº¥n chá»©a <code>or</code> cÃ³ thá»ƒ lÃ m chá»‰ má»¥c bá»‹ vÃ´ hiá»‡u.</li>
<li>Náº¿u kiá»ƒu dá»¯ liá»‡u cá»§a trÆ°á»ng lÃ  chuá»—i, pháº£i dÃ¹ng dáº¥u ngoáº·c kÃ©p khi <code>where</code>, náº¿u khÃ´ng chá»‰ má»¥c bá»‹ vÃ´ hiá»‡u.</li>
<li>KÃ½ tá»± Ä‘áº¡i diá»‡n <code>like</code> cÃ³ thá»ƒ lÃ m chá»‰ má»¥c bá»‹ vÃ´ hiá»‡u.</li>
<li>Chá»‰ má»¥c liÃªn káº¿t, náº¿u Ä‘iá»u kiá»‡n truy váº¥n khÃ´ng pháº£i lÃ  cá»™t Ä‘áº§u tiÃªn cá»§a chá»‰ má»¥c liÃªn káº¿t, chá»‰ má»¥c bá»‹ vÃ´ hiá»‡u.</li>
<li>Sá»­ dá»¥ng hÃ m ná»™i bá»™ cá»§a MySQL trÃªn cá»™t chá»‰ má»¥c lÃ m chá»‰ má»¥c bá»‹ vÃ´ hiá»‡u.</li>
<li>Thá»±c hiá»‡n toÃ¡n tá»­ trÃªn cá»™t chá»‰ má»¥c (nhÆ° <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>) lÃ m chá»‰ má»¥c bá»‹ vÃ´ hiá»‡u.</li>
<li>Sá»­ dá»¥ng <code>!=</code> hoáº·c <code>&lt; &gt;</code>, <code>not in</code> trÃªn trÆ°á»ng chá»‰ má»¥c cÃ³ thá»ƒ lÃ m chá»‰ má»¥c bá»‹ vÃ´ hiá»‡u.</li>
<li>Sá»­ dá»¥ng <code>is null</code>, <code>is not null</code> trÃªn trÆ°á»ng chá»‰ má»¥c cÃ³ thá»ƒ lÃ m chá»‰ má»¥c bá»‹ vÃ´ hiá»‡u.</li>
<li>Truy váº¥n káº¿t ná»‘i trÃ¡i hoáº·c pháº£i cÃ³ Ä‘á»‹nh dáº¡ng mÃ£ khÃ¡c nhau trÃªn trÆ°á»ng liÃªn káº¿t cÃ³ thá»ƒ lÃ m chá»‰ má»¥c bá»‹ vÃ´ hiá»‡u.</li>
<li>MySQL Æ°á»›c tÃ­nh sá»­ dá»¥ng quÃ©t toÃ n bá»™ báº£ng nhanh hÆ¡n so vá»›i sá»­ dá»¥ng chá»‰ má»¥c, sáº½ khÃ´ng sá»­ dá»¥ng chá»‰ má»¥c.</li>
</ul>
<h2>4. Nhá»¯ng trÆ°á»ng há»£p nÃ o khÃ´ng nÃªn táº¡o chá»‰ má»¥c?</h2>
<ul>
<li>Báº£ng cÃ³ Ã­t dá»¯ liá»‡u, khÃ´ng nÃªn thÃªm chá»‰ má»¥c.</li>
<li>Cáº­p nháº­t thÆ°á»ng xuyÃªn cÅ©ng khÃ´ng nÃªn thÃªm chá»‰ má»¥c.</li>
<li>CÃ¡c trÆ°á»ng cÃ³ tÃ­nh phÃ¢n biá»‡t tháº¥p khÃ´ng nÃªn thÃªm chá»‰ má»¥c (nhÆ° giá»›i tÃ­nh).</li>
<li>CÃ¡c trÆ°á»ng khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng trong <code>where</code>, <code>group by</code>, <code>order by</code> khÃ´ng cáº§n táº¡o chá»‰ má»¥c.</li>
<li>TrÆ°á»ng há»£p Ä‘Ã£ cÃ³ chá»‰ má»¥c dÆ° thá»«a (vÃ­ dá»¥ Ä‘Ã£ cÃ³ chá»‰ má»¥c liÃªn káº¿t <code>a, b</code> thÃ¬ khÃ´ng cáº§n táº¡o chá»‰ má»¥c riÃªng cho <code>a</code>).</li>
</ul>
<h2>5. Táº¡i sao sá»­ dá»¥ng cÃ¢y B+, táº¡i sao khÃ´ng dÃ¹ng cÃ¢y nhá»‹ phÃ¢n?</h2>
<blockquote>
<p>Báº¡n cÃ³ thá»ƒ xem xÃ©t váº¥n Ä‘á» nÃ y tá»« nhiá»u khÃ­a cáº¡nh: truy váº¥n cÃ³ nhanh khÃ´ng, hiá»‡u quáº£ cÃ³ á»•n Ä‘á»‹nh khÃ´ng, lÆ°u trá»¯ dá»¯ liá»‡u bao nhiÃªu, vÃ  sá»‘ láº§n truy váº¥n trÃªn Ä‘Ä©a. Táº¡i sao khÃ´ng pháº£i lÃ  cÃ¢y nhá»‹ phÃ¢n, táº¡i sao khÃ´ng pháº£i lÃ  cÃ¢y nhá»‹ phÃ¢n cÃ¢n báº±ng, táº¡i sao khÃ´ng pháº£i lÃ  cÃ¢y B, mÃ  láº¡i lÃ  cÃ¢y B+?</p>
</blockquote>
<p><strong>Táº¡i sao khÃ´ng pháº£i lÃ  cÃ¢y nhá»‹ phÃ¢n thÃ´ng thÆ°á»ng?</strong></p>
<p>Náº¿u cÃ¢y nhá»‹ phÃ¢n trá»Ÿ thÃ nh má»™t danh sÃ¡ch liÃªn káº¿t, tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i quÃ©t toÃ n bá»™ báº£ng. CÃ¢y nhá»‹ phÃ¢n cÃ¢n báº±ng so vá»›i cÃ¢y nhá»‹ phÃ¢n tÃ¬m kiáº¿m cÃ³ hiá»‡u quáº£ truy váº¥n á»•n Ä‘á»‹nh hÆ¡n vÃ  tá»‘c Ä‘á»™ truy váº¥n tá»•ng thá»ƒ cÅ©ng nhanh hÆ¡n.</p>
<p><strong>Táº¡i sao khÃ´ng pháº£i lÃ  cÃ¢y nhá»‹ phÃ¢n cÃ¢n báº±ng?</strong></p>
<p>ChÃºng ta biáº¿t ráº±ng truy váº¥n dá»¯ liá»‡u trong bá»™ nhá»› nhanh hÆ¡n nhiá»u so vá»›i trÃªn Ä‘Ä©a. Náº¿u cÃ¢y dá»¯ liá»‡u Ä‘Æ°á»£c sá»­ dá»¥ng lÃ m chá»‰ má»¥c, thÃ¬ má»—i láº§n truy váº¥n dá»¯ liá»‡u cáº§n Ä‘á»c má»™t nÃºt tá»« Ä‘Ä©a, tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i má»™t khá»‘i Ä‘Ä©a. NhÆ°ng cÃ¢y nhá»‹ phÃ¢n cÃ¢n báº±ng chá»‰ lÆ°u trá»¯ má»™t giÃ¡ trá»‹ khÃ³a vÃ  dá»¯ liá»‡u trÃªn má»—i nÃºt, náº¿u lÃ  cÃ¢y B, cÃ³ thá»ƒ lÆ°u trá»¯ nhiá»u dá»¯ liá»‡u nÃºt hÆ¡n, Ä‘á»™ cao cá»§a cÃ¢y cÅ©ng giáº£m, do Ä‘Ã³ sá»‘ láº§n truy váº¥n trÃªn Ä‘Ä©a sáº½ giáº£m, hiá»‡u quáº£ truy váº¥n sáº½ nhanh hÆ¡n.</p>
<p><strong>Táº¡i sao khÃ´ng pháº£i lÃ  cÃ¢y B mÃ  láº¡i lÃ  cÃ¢y B+?</strong></p>
<ul>
<li>CÃ¢y B+ khÃ´ng lÆ°u trá»¯ dá»¯ liá»‡u trÃªn cÃ¡c nÃºt khÃ´ng pháº£i lÃ¡, chá»‰ lÆ°u trá»¯ khÃ³a, trong khi cÃ¢y B lÆ°u trá»¯ cáº£ khÃ³a vÃ  dá»¯ liá»‡u. Trong <code>innodb</code>, kÃ­ch thÆ°á»›c máº·c Ä‘á»‹nh cá»§a trang lÃ  16KB, náº¿u khÃ´ng lÆ°u trá»¯ dá»¯ liá»‡u thÃ¬ sáº½ lÆ°u trá»¯ nhiá»u khÃ³a hÆ¡n, tÆ°Æ¡ng á»©ng vá»›i báº­c cá»§a cÃ¢y (sá»‘ con cá»§a nÃºt) sáº½ lá»›n hÆ¡n, cÃ¢y sáº½ ngáº¯n vÃ  máº­p hÆ¡n, do Ä‘Ã³ sá»‘ láº§n truy váº¥n trÃªn Ä‘Ä©a sáº½ giáº£m, hiá»‡u quáº£ truy váº¥n sáº½ nhanh hÆ¡n.</li>
<li>Táº¥t cáº£ dá»¯ liá»‡u cá»§a cÃ¢y B+ Ä‘Æ°á»£c lÆ°u trá»¯ trÃªn cÃ¡c nÃºt lÃ¡ vÃ  dá»¯ liá»‡u Ä‘Æ°á»£c sáº¯p xáº¿p theo thá»© tá»±, ná»‘i vá»›i nhau. Do Ä‘Ã³, cÃ¢y B+ lÃ m cho cÃ¡c truy váº¥n pháº¡m vi, truy váº¥n sáº¯p xáº¿p, truy váº¥n nhÃ³m vÃ  truy váº¥n loáº¡i bá» trÃ¹ng láº·p trá»Ÿ nÃªn Ä‘Æ¡n giáº£n hÆ¡n ráº¥t nhiá»u.</li>
</ul>
<h2>6. QuÃ¡ trÃ¬nh tÃ¬m kiáº¿m má»™t cÃ¢y chá»‰ má»¥c B+ má»™t láº§n</h2>
<blockquote>
<p>Giáº£ sá»­ cÃ³ cáº¥u trÃºc báº£ng sau vÃ  Ä‘Ã£ khá»Ÿi táº¡o má»™t sá»‘ dá»¯ liá»‡u nhÆ° sau:</p>
</blockquote>
<div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> `</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">employee</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">` (</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `id`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">11</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `name`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">255</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">DEFAULT</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `age`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">11</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">DEFAULT</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `date`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> datetime</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `sex`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">DEFAULT</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#98C379;--shiki-dark:#98C379">`id`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">),</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  KEY</span><span style="color:#98C379;--shiki-dark:#98C379"> `idx_age`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#98C379;--shiki-dark:#98C379">`age`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">USING</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> BTREE</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) ENGINE</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">InnoDB </span><span style="color:#C678DD;--shiki-dark:#C678DD">DEFAULT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> CHARSET</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">utf8;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">insert into</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD">values</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'Xiao Lun'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">43</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'2021-01-20'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'0'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">insert into</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD">values</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">200</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'Jun Jie'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">48</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'2021-01-21'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'0'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">insert into</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD">values</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">300</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'Zi Qi'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">36</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'2020-01-21'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'1'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">insert into</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD">values</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">400</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'Li Hong'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">32</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'2020-01-21'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'0'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">insert into</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD">values</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">500</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'Yi Xun'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">37</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'2020-01-21'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'1'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">insert into</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD">values</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">600</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'Xiao Jun'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">49</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'2021-01-21'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'0'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">insert into</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD">values</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">700</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'Xiao Yan'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">28</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'2021-01-21'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'1'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Thá»±c hiá»‡n cÃ¢u truy váº¥n SQL nÃ y, cáº§n bao nhiÃªu láº§n tÃ¬m kiáº¿m cÃ¢y? Báº¡n cÃ³ thá»ƒ váº½ sÆ¡ Ä‘á»“ cáº¥u trÃºc cÃ¢y chá»‰ má»¥c tÆ°Æ¡ng á»©ng khÃ´ng?</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66">32</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>Thá»±c ra, báº¡n cÃ³ thá»ƒ váº½ sÆ¡ Ä‘á»“ cáº¥u trÃºc chá»‰ má»¥c cá»§a <code>idx_age</code> nhÆ° sau:</p>
<figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-baca02c4-1ed6-421f-9ad4-e3e63dd58efa.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>Sau Ä‘Ã³ váº½ sÆ¡ Ä‘á»“ cáº¥u trÃºc chá»‰ má»¥c chÃ­nh cá»§a <code>id</code>, nhÆ° sau:</p>
<figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-8bf752f5-772b-4308-b51c-d06406428866.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>QuÃ¡ trÃ¬nh thá»±c hiá»‡n cÃ¢u lá»‡nh SQL truy váº¥n nÃ y nhÆ° sau:</p>
<ul>
<li>TÃ¬m kiáº¿m trong cÃ¢y chá»‰ má»¥c <code>idx_age</code>, táº£i <code>khá»‘i Ä‘Ä©a 1</code> vÃ o bá»™ nhá»›, do <code>32 &lt; 43</code>, tÃ¬m kiáº¿m nhÃ¡nh bÃªn trÃ¡i vÃ  tÃ¬m <code>khá»‘i Ä‘Ä©a 2</code>.</li>
<li>Táº£i <code>khá»‘i Ä‘Ä©a 2</code> vÃ o bá»™ nhá»›, do <code>32 &lt; 36</code>, tÃ¬m kiáº¿m nhÃ¡nh bÃªn trÃ¡i vÃ  tÃ¬m <code>khá»‘i Ä‘Ä©a 4</code>.</li>
<li>Táº£i <code>khá»‘i Ä‘Ä©a 4</code> vÃ o bá»™ nhá»›, tiáº¿p tá»¥c tÃ¬m kiáº¿m trong bá»™ nhá»› vÃ  tÃ¬m tháº¥y báº£n ghi <code>age = 32</code>, láº¥y <code>id = 400</code>.</li>
<li>Láº¥y <code>id = 400</code>, quay láº¡i cÃ¢y chá»‰ má»¥c chÃ­nh cá»§a <code>id</code>.</li>
<li>TÃ¬m kiáº¿m trong cÃ¢y chá»‰ má»¥c chÃ­nh cá»§a <code>id</code>, táº£i <code>khá»‘i Ä‘Ä©a 1</code> vÃ o bá»™ nhá»›, do <code>300 &lt; 400 &lt; 500</code>, chá»n nhÃ¡nh giá»¯a vÃ  tÃ¬m <code>khá»‘i Ä‘Ä©a 3</code>.</li>
<li>Máº·c dÃ¹ tÃ¬m tháº¥y <code>id = 400</code> trong <code>khá»‘i Ä‘Ä©a 3</code>, nhÆ°ng nÃ³ khÃ´ng pháº£i lÃ  nÃºt lÃ¡, tiáº¿p tá»¥c tÃ¬m vÃ  tÃ¬m <code>khá»‘i Ä‘Ä©a 8</code>.</li>
<li>Táº£i <code>khá»‘i Ä‘Ä©a 8</code> vÃ o bá»™ nhá»›, tÃ¬m trong bá»™ nhá»› vÃ  tÃ¬m tháº¥y báº£n ghi <code>id = 400</code>, láº¥y dá»¯ liá»‡u dÃ²ng <code>R4</code>, hoÃ n thÃ nh.</li>
</ul>
<h2>7. Quay vá» báº£ng lÃ  gÃ¬? LÃ m tháº¿ nÃ o Ä‘á»ƒ giáº£m quay vá» báº£ng?</h2>
<p>Khi dá»¯ liá»‡u tÃ¬m kiáº¿m khÃ´ng cÃ³ trong cÃ¢y chá»‰ má»¥c, cáº§n quay láº¡i cÃ¢y chá»‰ má»¥c chÃ­nh Ä‘á»ƒ láº¥y, quÃ¡ trÃ¬nh nÃ y Ä‘Æ°á»£c gá»i lÃ  <strong>quay vá» báº£ng</strong>.</p>
<p>VÃ­ dá»¥ trong pháº§n <strong>6</strong>, sá»­ dá»¥ng cÃ¢u truy váº¥n SQL:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66">32</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>Cáº§n truy váº¥n táº¥t cáº£ cÃ¡c cá»™t dá»¯ liá»‡u, chá»‰ má»¥c <code>idx_age</code> khÃ´ng Ä‘Ã¡p á»©ng, cáº§n láº¥y giÃ¡ trá»‹ <code>id</code> chÃ­nh rá»“i quay láº¡i cÃ¢y chá»‰ má»¥c chÃ­nh Ä‘á»ƒ tÃ¬m, quÃ¡ trÃ¬nh nÃ y gá»i lÃ  quay vá» báº£ng.</p>
<h2>8. Chá»‰ má»¥c bao phá»§ lÃ  gÃ¬?</h2>
<p>Náº¿u cÃ¢u truy váº¥n SQL cá»§a báº¡n tá»« <code>select *</code> thÃ nh <code>select id, age</code>, thá»±c ra lÃ  <strong>khÃ´ng cáº§n quay vá» báº£ng</strong>. VÃ¬ giÃ¡ trá»‹ <code>id</code> vÃ  <code>age</code> Ä‘á»u náº±m trong nÃºt lÃ¡ cá»§a cÃ¢y chá»‰ má»¥c <code>idx_age</code>, Ä‘iá»u nÃ y liÃªn quan Ä‘áº¿n kiáº¿n thá»©c vá» chá»‰ má»¥c bao phá»§.</p>
<blockquote>
<p>Chá»‰ má»¥c bao phá»§ lÃ  khi cÃ¡c cá»™t dá»¯ liá»‡u truy váº¥n <code>select</code> cÃ³ thá»ƒ láº¥y tá»« chá»‰ má»¥c mÃ  khÃ´ng cáº§n quay vá» báº£ng, nÃ³i cÃ¡ch khÃ¡c, cÃ¡c cá»™t truy váº¥n pháº£i Ä‘Æ°á»£c chá»‰ má»¥c bao phá»§.</p>
</blockquote>
<h2>9. NguyÃªn táº¯c tiá»n tá»‘ trÃ¡i nháº¥t cá»§a chá»‰ má»¥c lÃ  gÃ¬?</h2>
<p>NguyÃªn táº¯c tiá»n tá»‘ trÃ¡i nháº¥t cá»§a chá»‰ má»¥c cÃ³ thá»ƒ lÃ  <strong>N cá»™t trÃ¡i nháº¥t cá»§a chá»‰ má»¥c liÃªn káº¿t</strong>. VÃ­ dá»¥, báº¡n táº¡o má»™t chá»‰ má»¥c liÃªn káº¿t <code>(a,b,c)</code>, thá»±c ra cÃ³ thá»ƒ coi lÃ  táº¡o ba chá»‰ má»¥c <code>(a)</code>, <code>(a,b)</code>, <code>(a,b,c)</code>, tÄƒng kháº£ nÄƒng tÃ¡i sá»­ dá»¥ng chá»‰ má»¥c.</p>
<p>Táº¥t nhiÃªn, tiá»n tá»‘ trÃ¡i nháº¥t cÅ©ng cÃ³ thá»ƒ lÃ  <strong>M kÃ½ tá»± trÃ¡i nháº¥t cá»§a chá»‰ má»¥c chuá»—i</strong>. VÃ­ dá»¥, chá»‰ má»¥c chuá»—i cá»§a báº¡n nhÆ° sau:</p>
<figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-65c3f954-df70-439b-b0e1-1009007d6560.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>CÃ¢u lá»‡nh SQL nÃ y: <code>select * from employee where name like 'Xiao%' order by age desc;</code> cÅ©ng sá»­ dá»¥ng Ä‘Æ°á»£c chá»‰ má»¥c.</p>
<figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-3c751d80-02df-43cf-acc7-aafdb409811b.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h2>10. Báº¡n Ä‘Ã£ hiá»ƒu vá» Ä‘áº©y xuá»‘ng chá»‰ má»¥c chÆ°a? Äáº©y xuá»‘ng chá»‰ má»¥c lÃ  gÃ¬?</h2>
<p>Cho báº¡n cÃ¢u lá»‡nh SQL nÃ y:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> employee </span><span style="color:#C678DD;--shiki-dark:#C678DD">where</span><span style="color:#C678DD;--shiki-dark:#C678DD"> name</span><span style="color:#C678DD;--shiki-dark:#C678DD"> like</span><span style="color:#98C379;--shiki-dark:#98C379"> 'Xiao%'</span><span style="color:#C678DD;--shiki-dark:#C678DD"> and</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66">28</span><span style="color:#C678DD;--shiki-dark:#C678DD"> and</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> sex</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">'0'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>Trong Ä‘Ã³, <code>name</code> vÃ  <code>age</code> lÃ  chá»‰ má»¥c liÃªn káº¿t (<code>idx_name_age</code>).</p>
<p>Náº¿u lÃ  <strong>trÆ°á»›c MySQL 5.6</strong>, trong cÃ¢y chá»‰ má»¥c <code>idx_name_age</code>, tÃ¬m táº¥t cáº£ nhá»¯ng ngÆ°á»i cÃ³ tÃªn báº¯t Ä‘áº§u báº±ng <code>â€œXiaoâ€</code>, láº¥y <code>id</code> chÃ­nh cá»§a há», sau Ä‘Ã³ quay vá» báº£ng Ä‘á»ƒ tÃ¬m dá»¯ liá»‡u dÃ²ng vÃ  so sÃ¡nh cÃ¡c cá»™t khÃ¡c nhÆ° tuá»•i vÃ  giá»›i tÃ­nh. NhÆ° hÃ¬nh:</p>
<figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-b5ccdd0e-f299-49ac-9176-8e2c475f606f.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>Má»™t sá»‘ báº¡n cÃ³ thá»ƒ tháº¯c máº¯c, táº¡i sao sau khi tÃ¬m tháº¥y nhá»¯ng ngÆ°á»i cÃ³ tÃªn chá»©a <code>â€œXiaoâ€</code> khÃ´ng xem luÃ´n tuá»•i <code>age</code> rá»“i quay vá» báº£ng, khÃ´ng pháº£i sáº½ hiá»‡u quáº£ hÆ¡n sao? VÃ¬ váº­y, <code>MySQL 5.6</code> Ä‘Ã£ giá»›i thiá»‡u <strong>tá»‘i Æ°u hÃ³a Ä‘áº©y xuá»‘ng chá»‰ má»¥c</strong>, cÃ³ thá»ƒ kiá»ƒm tra trÆ°á»›c cÃ¡c cá»™t trong chá»‰ má»¥c trong quÃ¡ trÃ¬nh duyá»‡t chá»‰ má»¥c, lá»c trá»±c tiáº¿p cÃ¡c báº£n ghi khÃ´ng thá»a mÃ£n Ä‘iá»u kiá»‡n, giáº£m sá»‘ láº§n quay vá» báº£ng.</p>
<p>VÃ¬ váº­y, tá»« phiÃªn báº£n MySQL 5.6 trá»Ÿ Ä‘i, sau khi tÃ¬m tháº¥y nhá»¯ng ngÆ°á»i cÃ³ tÃªn chá»©a <code>â€œXiaoâ€</code>, tiáº¿p tá»¥c lá»c <code>age=28</code>.</p>
<figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-4b37d45c-b5a2-4ff7-8125-ccd1e89eed42.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h2>11. LÃ m tháº¿ nÃ o Ä‘á»ƒ thÃªm chá»‰ má»¥c vÃ o báº£ng lá»›n</h2>
<p>Náº¿u má»™t báº£ng cÃ³ dá»¯ liá»‡u á»Ÿ má»©c hÃ ng chá»¥c triá»‡u báº£n ghi trá»Ÿ lÃªn, thÃ¬ lÃ m tháº¿ nÃ o Ä‘á»ƒ thÃªm chá»‰ má»¥c vÃ o báº£ng nÃ y?</p>
<p>ChÃºng ta cáº§n biáº¿t ráº±ng <strong>khi thÃªm chá»‰ má»¥c vÃ o báº£ng</strong>, <strong>báº£ng sáº½ bá»‹ khÃ³a</strong>. Náº¿u khÃ´ng cáº©n tháº­n, cÃ³ thá»ƒ gÃ¢y ra sá»± cá»‘ sáº£n xuáº¥t. CÃ³ thá»ƒ tham kháº£o cÃ¡c phÆ°Æ¡ng phÃ¡p sau:</p>
<ol>
<li>Táº¡o má»™t báº£ng má»›i <code>B</code> cÃ³ cáº¥u trÃºc dá»¯ liá»‡u giá»‘ng báº£ng gá»‘c <code>A</code>.</li>
<li>ThÃªm chá»‰ má»¥c cáº§n thiáº¿t vÃ o báº£ng má»›i <code>B</code>.</li>
<li>Chuyá»ƒn dá»¯ liá»‡u tá»« báº£ng gá»‘c <code>A</code> sang báº£ng má»›i <code>B</code>.</li>
<li><code>rename</code> báº£ng má»›i <code>B</code> thÃ nh tÃªn cá»§a báº£ng gá»‘c <code>A</code>, vÃ  Ä‘á»•i tÃªn báº£ng gá»‘c <code>A</code> sang tÃªn khÃ¡c.</li>
</ol>
<h2>12. LÃ m tháº¿ nÃ o Ä‘á»ƒ biáº¿t cÃ¢u lá»‡nh cÃ³ sá»­ dá»¥ng chá»‰ má»¥c hay khÃ´ng?</h2>
<p>Sá»­ dá»¥ng <code>explain</code> Ä‘á»ƒ kiá»ƒm tra chiáº¿n lÆ°á»£c thá»±c thi cá»§a SQL, <strong>váº­y lÃ  báº¡n sáº½ biáº¿t cÃ³ trÃºng chá»‰ má»¥c hay khÃ´ng</strong>.</p>
<p>Khi <code>explain</code> Ä‘Æ°á»£c sá»­ dá»¥ng cÃ¹ng vá»›i <code>SQL</code>, MySQL sáº½ hiá»ƒn thá»‹ thÃ´ng tin vá» chiáº¿n lÆ°á»£c thá»±c thi cÃ¢u lá»‡nh tá»« trÃ¬nh tá»‘i Æ°u hÃ³a.</p>
<figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-1a294975-c9dd-4077-95fc-2a972911a3ab.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>NÃ³i chung, chÃºng ta cáº§n chÃº Ã½ Ä‘áº·c biá»‡t Ä‘áº¿n <code>type, rows, filtered, extra, key</code>.</p>
<h3>1.2.1 type</h3>
<p><code>type</code> biá»ƒu thá»‹ <strong>loáº¡i káº¿t ná»‘i</strong>, lÃ  má»™t chá»‰ sá»‘ quan trá»ng Ä‘á»ƒ xem tÃ¬nh tráº¡ng thá»±c hiá»‡n chá»‰ má»¥c. CÃ¡c loáº¡i káº¿t ná»‘i tá»« tá»‘t Ä‘áº¿n kÃ©m lÃ : <code>system &gt; const &gt; eq_ref &gt; ref &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt; range &gt; index &gt; ALL</code></p>
<ul>
<li>system: Loáº¡i nÃ y yÃªu cáº§u trong báº£ng cÆ¡ sá»Ÿ dá»¯ liá»‡u chá»‰ cÃ³ má»™t báº£n ghi, lÃ  má»™t trÆ°á»ng há»£p Ä‘áº·c biá»‡t cá»§a <code>const</code>, thÆ°á»ng thÃ¬ khÃ´ng xuáº¥t hiá»‡n.</li>
<li>const: CÃ³ thá»ƒ tÃ¬m tháº¥y dá»¯ liá»‡u thÃ´ng qua má»™t láº§n chá»‰ má»¥c, thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng cho khÃ³a chÃ­nh hoáº·c chá»‰ má»¥c duy nháº¥t, hiá»‡u suáº¥t ráº¥t cao, tá»‘c Ä‘á»™ ráº¥t nhanh.</li>
<li>eq_ref: ThÆ°á»ng dÃ¹ng cho quÃ©t khÃ³a chÃ­nh hoáº·c chá»‰ má»¥c duy nháº¥t, thÆ°á»ng lÃ  sá»­ dá»¥ng khÃ³a chÃ­nh Ä‘á»ƒ káº¿t ná»‘i truy váº¥n.</li>
<li>ref: ThÆ°á»ng dÃ¹ng cho quÃ©t chá»‰ má»¥c khÃ´ng pháº£i khÃ³a chÃ­nh vÃ  chá»‰ má»¥c duy nháº¥t.</li>
<li>ref_or_null: Loáº¡i káº¿t ná»‘i nÃ y giá»‘ng <code>ref</code>, khÃ¡c biá»‡t lÃ  <code>MySQL</code> sáº½ tÃ¬m kiáº¿m thÃªm cÃ¡c báº£n ghi chá»©a giÃ¡ trá»‹ <code>NULL</code>.</li>
<li>index_merge: Sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p tá»‘i Æ°u há»£p nháº¥t chá»‰ má»¥c, truy váº¥n sá»­ dá»¥ng hai chá»‰ má»¥c trá»Ÿ lÃªn.</li>
<li>unique_subquery: TÆ°Æ¡ng tá»± nhÆ° <code>eq_ref</code>, Ä‘iá»u kiá»‡n sá»­ dá»¥ng truy váº¥n <code>in</code> con.</li>
<li>index_subquery: KhÃ¡c vá»›i <code>unique_subquery</code>, dÃ¹ng cho chá»‰ má»¥c khÃ´ng duy nháº¥t, cÃ³ thá»ƒ tráº£ vá» giÃ¡ trá»‹ trÃ¹ng láº·p.</li>
<li>range: ThÆ°á»ng dÃ¹ng cho truy váº¥n pháº¡m vi, vÃ­ dá»¥: <code>between ... and</code> hoáº·c cÃ¡c thao tÃ¡c <code>in</code>.</li>
<li>index: QuÃ©t toÃ n bá»™ chá»‰ má»¥c.</li>
<li>ALL: QuÃ©t toÃ n bá»™ báº£ng.</li>
</ul>
<h3>1.2.2 rows</h3>
<p>Cá»™t nÃ y biá»ƒu thá»‹ sá»‘ hÃ ng MySQL Æ°á»›c tÃ­nh cáº§n Ä‘á»c Ä‘á»ƒ tÃ¬m tháº¥y cÃ¡c báº£n ghi cáº§n thiáº¿t. Äá»‘i vá»›i báº£ng InnoDB, con sá»‘ nÃ y lÃ  Æ°á»›c tÃ­nh vÃ  khÃ´ng pháº£i luÃ´n chÃ­nh xÃ¡c.</p>
<h3>1.2.3 filtered</h3>
<p>Cá»™t nÃ y lÃ  má»™t giÃ¡ trá»‹ pháº§n trÄƒm, biá»ƒu thá»‹ tá»· lá»‡ pháº§n trÄƒm cÃ¡c báº£n ghi trong báº£ng thá»a mÃ£n Ä‘iá»u kiá»‡n. NÃ³i Ä‘Æ¡n giáº£n, cá»™t nÃ y biá»ƒu thá»‹ tá»· lá»‡ cÃ¡c báº£n ghi thá»a mÃ£n Ä‘iá»u kiá»‡n sau khi Ä‘Æ°á»£c lá»c tá»« dá»¯ liá»‡u tráº£ vá» cá»§a engine lÆ°u trá»¯.</p>
<h3>1.2.4 extra</h3>
<p>Cá»™t nÃ y chá»©a thÃ´ng tin bá»• sung vá» cÃ¡ch MySQL phÃ¢n tÃ­ch cÃ¢u truy váº¥n, nÃ³ thÆ°á»ng xuáº¥t hiá»‡n cÃ¡c giÃ¡ trá»‹ sau:</p>
<ul>
<li>Using filesort: Biá»ƒu thá»‹ viá»‡c sáº¯p xáº¿p theo tá»‡p, thÆ°á»ng xuáº¥t hiá»‡n khi chá»‰ má»¥c sáº¯p xáº¿p khÃ´ng trÃ¹ng khá»›p vá»›i sáº¯p xáº¿p chá»‰ Ä‘á»‹nh. ThÆ°á»ng tháº¥y trong cÃ¢u lá»‡nh <code>order by</code>.</li>
<li>Using index: Biá»ƒu thá»‹ cÃ³ sá»­ dá»¥ng chá»‰ má»¥c phá»§.</li>
<li>Using temporary: Biá»ƒu thá»‹ cÃ³ sá»­ dá»¥ng báº£ng táº¡m, hiá»‡u suáº¥t ráº¥t kÃ©m, cáº§n tá»‘i Æ°u hÃ³a. ThÆ°á»ng tháº¥y trong cÃ¢u lá»‡nh <code>group by</code> hoáº·c <code>union</code>.</li>
<li>Using where: Biá»ƒu thá»‹ cÃ³ sá»­ dá»¥ng Ä‘iá»u kiá»‡n <code>where</code> Ä‘á»ƒ lá»c.</li>
<li>Using index condition: MySQL 5.6 trá»Ÿ lÃªn bá»• sung thÃªm tá»‘i Æ°u hÃ³a Ä‘áº©y chá»‰ má»¥c. Lá»c dá»¯ liá»‡u táº¡i lá»›p engine lÆ°u trá»¯ thay vÃ¬ táº¡i lá»›p dá»‹ch vá»¥, sá»­ dá»¥ng dá»¯ liá»‡u hiá»‡n cÃ³ cá»§a chá»‰ má»¥c Ä‘á»ƒ giáº£m sá»‘ láº§n truy cáº­p láº¡i báº£ng.</li>
</ul>
<h3>1.2.5 key</h3>
<p>Cá»™t nÃ y biá»ƒu thá»‹ <strong>chá»‰ má»¥c thá»±c táº¿ Ä‘Æ°á»£c sá»­ dá»¥ng</strong>. ThÆ°á»ng Ä‘Æ°á»£c xem cÃ¹ng vá»›i cá»™t <code>possible_keys</code>.</p>
<h2>13. Sá»± khÃ¡c biá»‡t giá»¯a chá»‰ má»¥c Hash vÃ  B+ cÃ¢y lÃ  gÃ¬? Báº¡n chá»n chá»‰ má»¥c nÃ o khi thiáº¿t káº¿ chá»‰ má»¥c?</h2>
<ul>
<li>B+ cÃ¢y cÃ³ thá»ƒ thá»±c hiá»‡n truy váº¥n pháº¡m vi, chá»‰ má»¥c Hash khÃ´ng thá»ƒ.</li>
<li>B+ cÃ¢y há»— trá»£ nguyÃªn táº¯c tiá»n tá»‘ bÃªn trÃ¡i cá»§a chá»‰ má»¥c liÃªn káº¿t, chá»‰ má»¥c Hash khÃ´ng há»— trá»£.</li>
<li>B+ cÃ¢y há»— trá»£ sáº¯p xáº¿p <code>order by</code>, chá»‰ má»¥c Hash khÃ´ng há»— trá»£.</li>
<li>Chá»‰ má»¥c Hash hiá»‡u quáº£ hÆ¡n B+ cÃ¢y trong truy váº¥n giÃ¡ trá»‹ báº±ng. (Tuy nhiÃªn náº¿u chá»‰ má»¥c cÃ³ nhiá»u giÃ¡ trá»‹ trÃ¹ng láº·p, xung Ä‘á»™t Hash, hiá»‡u suáº¥t giáº£m).</li>
<li>B+ cÃ¢y sá»­ dá»¥ng <code>like</code> Ä‘á»ƒ thá»±c hiá»‡n truy váº¥n má» khi <code>like</code> sau (vÃ­ dá»¥ <code>%</code> á»Ÿ Ä‘áº§u) cÃ³ thá»ƒ tá»‘i Æ°u hÃ³a, chá»‰ má»¥c Hash khÃ´ng thá»ƒ thá»±c hiá»‡n truy váº¥n má».</li>
</ul>
<h2>14. Chá»‰ má»¥c cÃ³ nhá»¯ng Æ°u Ä‘iá»ƒm vÃ  nhÆ°á»£c Ä‘iá»ƒm gÃ¬?</h2>
<p><strong>Æ¯u Ä‘iá»ƒm:</strong></p>
<ul>
<li>Chá»‰ má»¥c cÃ³ thá»ƒ tÄƒng tá»‘c Ä‘á»™ truy váº¥n dá»¯ liá»‡u, giáº£m thá»i gian truy váº¥n.</li>
<li>Chá»‰ má»¥c duy nháº¥t cÃ³ thá»ƒ Ä‘áº£m báº£o tÃ­nh duy nháº¥t cá»§a tá»«ng hÃ ng dá»¯ liá»‡u trong báº£ng cÆ¡ sá»Ÿ dá»¯ liá»‡u.</li>
</ul>
<p><strong>NhÆ°á»£c Ä‘iá»ƒm:</strong></p>
<ul>
<li>Táº¡o vÃ  duy trÃ¬ chá»‰ má»¥c tiÃªu tá»‘n thá»i gian.</li>
<li>Chá»‰ má»¥c cáº§n khÃ´ng gian váº­t lÃ½, ngoÃ i khÃ´ng gian dá»¯ liá»‡u cá»§a báº£ng, má»—i chá»‰ má»¥c cÃ²n tiÃªu tá»‘n má»™t khÃ´ng gian váº­t lÃ½ nháº¥t Ä‘á»‹nh.</li>
<li>Khi thÃªm, xÃ³a, sá»­a dá»¯ liá»‡u trong báº£ng, chá»‰ má»¥c cÅ©ng cáº§n Ä‘Æ°á»£c duy trÃ¬ Ä‘á»™ng.</li>
</ul>
<h2>15. Sá»± khÃ¡c biá»‡t giá»¯a chá»‰ má»¥c táº­p trung vÃ  chá»‰ má»¥c khÃ´ng táº­p trung</h2>
<p>Chá»‰ má»¥c táº­p trung khÃ´ng pháº£i lÃ  má»™t loáº¡i chá»‰ má»¥c riÃªng biá»‡t, mÃ  lÃ  má»™t <strong>cÃ¡ch lÆ°u trá»¯ dá»¯ liá»‡u</strong>. NÃ³ biá»ƒu thá»‹ cáº¥u trÃºc chá»‰ má»¥c vÃ  dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ cÃ¹ng nhau. Chá»‰ má»¥c khÃ´ng táº­p trung lÃ  <strong>chá»‰ má»¥c cÃ³ cáº¥u trÃºc vÃ  dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ riÃªng biá»‡t</strong>.</p>
<p>Tiáº¿p theo, chÃºng ta sáº½ nÃ³i vá» cÃ¡c engine lÆ°u trá»¯ khÃ¡c nhau~</p>
<p>Trong engine lÆ°u trá»¯ <code>InnoDB</code> cá»§a MySQL, sá»± khÃ¡c biá»‡t lá»›n nháº¥t giá»¯a chá»‰ má»¥c táº­p trung vÃ  khÃ´ng táº­p trung lÃ  á»Ÿ nÃºt lÃ¡ cÃ³ lÆ°u trá»¯ toÃ n bá»™ báº£n ghi hay khÃ´ng. NÃºt lÃ¡ cá»§a chá»‰ má»¥c táº­p trung lÆ°u trá»¯ toÃ n bá»™ báº£n ghi, trong khi nÃºt lÃ¡ cá»§a chá»‰ má»¥c khÃ´ng táº­p trung lÆ°u trá»¯ thÃ´ng tin khÃ³a chÃ­nh, <strong>do Ä‘Ã³, chá»‰ má»¥c khÃ´ng táº­p trung thÆ°á»ng cáº§n truy váº¥n láº¡i báº£ng</strong>.</p>
<ul>
<li>Má»™t báº£ng chá»‰ cÃ³ thá»ƒ cÃ³ má»™t chá»‰ má»¥c táº­p trung (vÃ¬ chá»‰ má»¥c táº­p trung thÆ°á»ng lÃ  <strong>chá»‰ má»¥c khÃ³a chÃ­nh</strong>), trong khi báº£ng cÃ³ thá»ƒ cÃ³ nhiá»u chá»‰ má»¥c khÃ´ng táº­p trung.</li>
<li>ThÃ´ng thÆ°á»ng, chá»‰ má»¥c táº­p trung hiá»‡u suáº¥t truy váº¥n cao hÆ¡n so vá»›i chá»‰ má»¥c khÃ´ng táº­p trung vÃ¬ khÃ´ng cáº§n truy váº¥n láº¡i báº£ng.</li>
</ul>
<p>Trong engine lÆ°u trá»¯ <code>MyISM</code>, khÃ³a chÃ­nh vÃ  chá»‰ má»¥c thÆ°á»ng Ä‘á»u lÃ  chá»‰ má»¥c khÃ´ng táº­p trung, vÃ¬ dá»¯ liá»‡u vÃ  chá»‰ má»¥c tÃ¡ch biá»‡t, cÃ¡c nÃºt lÃ¡ Ä‘á»u sá»­ dá»¥ng <strong>má»™t Ä‘á»‹a chá»‰ Ä‘á»ƒ trá» Ä‘áº¿n dá»¯ liá»‡u báº£ng thá»±c sá»±</strong>.</p>
]]></content:encoded>
      <enclosure url="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-mysqlsylwkz-60177b59-879d-4ee9-9425-e13e79a1eac2.jpg" type="image/jpeg"/>
    </item>
    <item>
      <title>MySQL Q&amp;A</title>
      <link>https://vanhung4499.github.io/interview/knowledge/mysql-qa.html</link>
      <guid>https://vanhung4499.github.io/interview/knowledge/mysql-qa.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MySQL Q&amp;A</source>
      <description>60 CÃ¢u Há»i Phá»ng Váº¥n CÆ¡ Sá»Ÿ Dá»¯ Liá»‡u ÄÆ°á»£c Chá»n Lá»c: Pháº£i Xem: HÃ¬nh áº£nh vÃ  giáº£i thÃ­ch chi tiáº¿t 60 cÃ¢u há»i phá»ng váº¥n MySQL thÆ°á»ng gáº·p, láº§n nÃ y tÃ´i sáº½ dá»… dÃ ng vÆ°á»£t qua phá»ng váº¥n viÃªn...</description>
      <category>interview</category>
      <pubDate>Fri, 05 Jul 2024 10:10:42 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>HÃ¬nh áº£nh vÃ  giáº£i thÃ­ch chi tiáº¿t 60 cÃ¢u há»i phá»ng váº¥n MySQL thÆ°á»ng gáº·p, láº§n nÃ y tÃ´i sáº½ dá»… dÃ ng vÆ°á»£t qua phá»ng váº¥n viÃªn (tay chÃ³). Tá»•ng há»£p: Tráº§m Máº·c VÆ°Æ¡ng Nhá»‹, nháº¥n vÃ o <a href="https://mp.weixin.qq.com/s/c-sy7tM0BmrqMUQFW7C65g" target="_blank" rel="noopener noreferrer">liÃªn káº¿t bÃ i viáº¿t</a> Ä‘á»ƒ xem sÆ¡ Ä‘á»“ tÆ° duy chi tiáº¿t; TÃ¡c giáº£: Herongwei, nháº¥n vÃ o <a href="https://mp.weixin.qq.com/s/-SqqKmhZcOlQxM-rHiIpKg" target="_blank" rel="noopener noreferrer">liÃªn káº¿t gá»‘c</a>.</p>
</blockquote>
<h2>Kiáº¿n Thá»©c CÆ¡ Báº£n</h2>
<h3>1. Sá»± khÃ¡c biá»‡t giá»¯a cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡ vÃ  phi quan há»‡?</h3>
<p><strong>Æ¯u Ä‘iá»ƒm cá»§a cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡:</strong></p>
<ul>
<li>Dá»… hiá»ƒu vÃ¬ nÃ³ sá»­ dá»¥ng mÃ´ hÃ¬nh quan há»‡ Ä‘á»ƒ tá»• chá»©c dá»¯ liá»‡u.</li>
<li>CÃ³ thá»ƒ duy trÃ¬ tÃ­nh nháº¥t quÃ¡n cá»§a dá»¯ liá»‡u.</li>
<li>Chi phÃ­ cáº­p nháº­t dá»¯ liá»‡u tÆ°Æ¡ng Ä‘á»‘i tháº¥p.</li>
<li>Há»— trá»£ cÃ¡c truy váº¥n phá»©c táº¡p (truy váº¥n vá»›i má»‡nh Ä‘á» where).</li>
</ul>
<p><strong>Æ¯u Ä‘iá»ƒm cá»§a cÆ¡ sá»Ÿ dá»¯ liá»‡u phi quan há»‡ (NoSQL):</strong></p>
<ul>
<li>KhÃ´ng cáº§n phÃ¢n tÃ­ch qua lá»›p SQL, hiá»‡u suáº¥t Ä‘á»c/ghi cao.</li>
<li>Dá»±a trÃªn cáº·p khÃ³a-giÃ¡ trá»‹, hiá»‡u suáº¥t Ä‘á»c/ghi cao, dá»… má»Ÿ rá»™ng.</li>
<li>CÃ³ thá»ƒ há»— trá»£ nhiá»u loáº¡i dá»¯ liá»‡u nhÆ° hÃ¬nh áº£nh, tÃ i liá»‡u, v.v.</li>
<li>Má»Ÿ rá»™ng (cÃ³ thá»ƒ chia thÃ nh cÆ¡ sá»Ÿ dá»¯ liá»‡u trong bá»™ nhá»› vÃ  cÆ¡ sá»Ÿ dá»¯ liá»‡u tÃ i liá»‡u, nhÆ° Redis, MongoDB, HBase, v.v., phÃ¹ há»£p vá»›i cÃ¡c ká»‹ch báº£n: há»‡ thá»‘ng nháº­t kÃ½ cÃ³ kháº£ nÄƒng chá»‹u táº£i cao/dá»¯ liá»‡u Ä‘á»‹a lÃ½).</li>
</ul>
<h3>2. MÃ´ táº£ chi tiáº¿t cÃ¡c bÆ°á»›c thá»±c hiá»‡n má»™t cÃ¢u lá»‡nh MySQL</h3>
<p>CÃ¡c bÆ°á»›c thá»±c hiá»‡n SQL cá»§a lá»›p Server theo thá»© tá»± nhÆ° sau:</p>
<ul>
<li>YÃªu cáº§u tá»« khÃ¡ch hÃ ng -&gt; Bá»™ káº¿t ná»‘i (xÃ¡c minh danh tÃ­nh ngÆ°á»i dÃ¹ng, cáº¥p quyá»n)</li>
<li>Bá»™ nhá»› Ä‘á»‡m truy váº¥n (náº¿u tá»“n táº¡i bá»™ nhá»› Ä‘á»‡m thÃ¬ tráº£ vá» trá»±c tiáº¿p, náº¿u khÃ´ng thÃ¬ thá»±c hiá»‡n cÃ¡c bÆ°á»›c tiáº¿p theo)</li>
<li>Bá»™ phÃ¢n tÃ­ch (thá»±c hiá»‡n phÃ¢n tÃ­ch tá»« vá»±ng vÃ  phÃ¢n tÃ­ch cÃº phÃ¡p cho SQL)</li>
<li>Bá»™ tá»‘i Æ°u hÃ³a (tá»‘i Æ°u hÃ³a SQL Ä‘á»ƒ chá»n phÆ°Æ¡ng phÃ¡p thá»±c hiá»‡n tá»‘i Æ°u nháº¥t)</li>
<li>Bá»™ thá»±c thi (kiá»ƒm tra xem ngÆ°á»i dÃ¹ng cÃ³ quyá»n thá»±c thi hay khÃ´ng, náº¿u cÃ³ thÃ¬ sá»­ dá»¥ng giao diá»‡n do cÃ´ng cá»¥ cung cáº¥p) -&gt; Láº¥y dá»¯ liá»‡u tá»« lá»›p cÃ´ng cá»¥ vÃ  tráº£ vá» (náº¿u má»Ÿ bá»™ nhá»› Ä‘á»‡m truy váº¥n thÃ¬ sáº½ lÆ°u káº¿t quáº£ truy váº¥n).</li>
</ul>
<h2>LiÃªn Quan Äáº¿n Chá»‰ Má»¥c</h2>
<h3>3. LÃ½ do MySQL sá»­ dá»¥ng chá»‰ má»¥c?</h3>
<p>NguyÃªn nhÃ¢n cÆ¡ báº£n:</p>
<ul>
<li>Sá»± xuáº¥t hiá»‡n cá»§a chá»‰ má»¥c nháº±m nÃ¢ng cao hiá»‡u suáº¥t truy váº¥n dá»¯ liá»‡u, giá»‘ng nhÆ° má»¥c lá»¥c cá»§a má»™t cuá»‘n sÃ¡ch.</li>
<li>Äá»‘i vá»›i báº£ng cá»§a cÆ¡ sá»Ÿ dá»¯ liá»‡u, chá»‰ má»¥c thá»±c cháº¥t lÃ  "má»¥c lá»¥c" cá»§a nÃ³.</li>
</ul>
<p>Má»Ÿ rá»™ng:</p>
<ul>
<li>Táº¡o chá»‰ má»¥c duy nháº¥t cÃ³ thá»ƒ Ä‘áº£m báº£o tÃ­nh duy nháº¥t cá»§a má»—i hÃ ng dá»¯ liá»‡u trong báº£ng cÆ¡ sá»Ÿ dá»¯ liá»‡u.</li>
<li>GiÃºp lá»›p Ä‘á»™ng cÆ¡ trÃ¡nh sáº¯p xáº¿p vÃ  táº¡o báº£ng táº¡m thá»i.</li>
<li>Biáº¿n IO ngáº«u nhiÃªn thÃ nh IO tuáº§n tá»±, tÄƒng tá»‘c káº¿t ná»‘i giá»¯a cÃ¡c báº£ng.</li>
</ul>
<h3>4. Ba cáº¥u trÃºc dá»¯ liá»‡u cÆ¡ báº£n cá»§a chá»‰ má»¥c vÃ  Æ°u nhÆ°á»£c Ä‘iá»ƒm cá»§a chÃºng</h3>
<p>Ba cáº¥u trÃºc dá»¯ liá»‡u cÆ¡ báº£n cá»§a chá»‰ má»¥c: Báº£ng bÄƒm, máº£ng cÃ³ thá»© tá»± vÃ  cÃ¢y tÃ¬m kiáº¿m.</p>
<ul>
<li><strong>Báº£ng bÄƒm</strong>: PhÃ¹ há»£p vá»›i cÃ¡c tÃ¬nh huá»‘ng truy váº¥n báº±ng giÃ¡ trá»‹, vÃ­ dá»¥ nhÆ° memcached vÃ  má»™t sá»‘ Ä‘á»™ng cÆ¡ NoSQL khÃ¡c, khÃ´ng phÃ¹ há»£p vá»›i truy váº¥n pháº¡m vi.</li>
<li><strong>Máº£ng cÃ³ thá»© tá»±</strong>: Chá»‰ phÃ¹ há»£p vá»›i Ä‘á»™ng cÆ¡ lÆ°u trá»¯ tÄ©nh, hiá»‡u suáº¥t tá»‘t trong truy váº¥n giÃ¡ trá»‹ vÃ  pháº¡m vi nhÆ°ng chi phÃ­ cáº­p nháº­t dá»¯ liá»‡u cao.</li>
<li><strong>CÃ¢y N-ary</strong>: Do Æ°u Ä‘iá»ƒm vá» hiá»‡u suáº¥t Ä‘á»c/ghi vÃ  phÃ¹ há»£p vá»›i mÃ´ hÃ¬nh truy cáº­p Ä‘Ä©a, Ä‘Æ°á»£c sá»­ dá»¥ng rá»™ng rÃ£i trong cÃ¡c Ä‘á»™ng cÆ¡ cÆ¡ sá»Ÿ dá»¯ liá»‡u.</li>
</ul>
<p>Má»Ÿ rá»™ng (vÃ­ dá»¥ vá»›i chá»‰ má»¥c cá»§a má»™t trÆ°á»ng sá»‘ nguyÃªn trong InnoDB, sá»‘ N xáº¥p xá»‰ lÃ  1200. Khi cÃ¢y cÃ³ chiá»u cao lÃ  4, nÃ³ cÃ³ thá»ƒ chá»©a giÃ¡ trá»‹ tÆ°Æ¡ng Ä‘Æ°Æ¡ng 1200 mÅ© 3, tá»©c lÃ  1,7 tá»·. CÃ¢n nháº¯c ráº±ng khá»‘i dá»¯ liá»‡u cá»§a gá»‘c cÃ¢y luÃ´n náº±m trong bá»™ nhá»›, má»™t chá»‰ má»¥c cá»§a má»™t trÆ°á»ng sá»‘ nguyÃªn trÃªn báº£ng 1 tá»· hÃ ng, tÃ¬m má»™t giÃ¡ trá»‹ chá»‰ cáº§n truy cáº­p Ä‘Ä©a 3 láº§n. Thá»±c táº¿, táº§ng thá»© hai cá»§a cÃ¢y cÅ©ng cÃ³ kháº£ nÄƒng lá»›n náº±m trong bá»™ nhá»›, vÃ¬ váº­y sá»‘ láº§n truy cáº­p Ä‘Ä©a trung bÃ¬nh sáº½ Ã­t hÆ¡n ná»¯a.)</p>
<h3>5. CÃ¡c loáº¡i chá»‰ má»¥c thÃ´ng thÆ°á»ng vÃ  chÃºng hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?</h3>
<p>Dá»±a trÃªn ná»™i dung cá»§a cÃ¡c nÃºt lÃ¡, chá»‰ má»¥c Ä‘Æ°á»£c chia thÃ nh chá»‰ má»¥c khÃ³a chÃ­nh vÃ  chá»‰ má»¥c khÃ´ng khÃ³a chÃ­nh.</p>
<ul>
<li>NÃºt lÃ¡ cá»§a chá»‰ má»¥c khÃ³a chÃ­nh chá»©a toÃ n bá»™ dá»¯ liá»‡u hÃ ng, trong InnoDB cÅ©ng Ä‘Æ°á»£c gá»i lÃ  chá»‰ má»¥c cá»¥m.</li>
<li>NÃºt lÃ¡ cá»§a chá»‰ má»¥c khÃ´ng khÃ³a chÃ­nh chá»©a giÃ¡ trá»‹ cá»§a khÃ³a chÃ­nh, trong InnoDB cÅ©ng Ä‘Æ°á»£c gá»i lÃ  chá»‰ má»¥c thá»© cáº¥p.</li>
</ul>
<h3>6. Sá»± khÃ¡c biá»‡t giá»¯a cÃ¡ch thá»±c hiá»‡n chá»‰ má»¥c B-tree cá»§a MyISAM vÃ  InnoDB lÃ  gÃ¬?</h3>
<ul>
<li><strong>Äá»™ng cÆ¡ lÆ°u trá»¯ InnoDB</strong>: NÃºt lÃ¡ cá»§a chá»‰ má»¥c B+ tree lÆ°u trá»¯ dá»¯ liá»‡u thá»±c táº¿, tá»‡p dá»¯ liá»‡u thá»±c cháº¥t lÃ  tá»‡p chá»‰ má»¥c.</li>
<li><strong>Äá»™ng cÆ¡ lÆ°u trá»¯ MyISAM</strong>: NÃºt lÃ¡ cá»§a chá»‰ má»¥c B+ tree lÆ°u trá»¯ Ä‘á»‹a chá»‰ váº­t lÃ½ cá»§a dá»¯ liá»‡u, vÃ¹ng dá»¯ liá»‡u cá»§a nÃºt lÃ¡ lÆ°u trá»¯ Ä‘á»‹a chá»‰ cá»§a báº£n ghi dá»¯ liá»‡u, tá»‡p chá»‰ má»¥c vÃ  tá»‡p dá»¯ liá»‡u Ä‘Æ°á»£c tÃ¡ch biá»‡t.</li>
</ul>
<h3>7. Táº¡i sao InnoDB thiáº¿t káº¿ chá»‰ má»¥c B+ tree?</h3>
<p>Hai yáº¿u tá»‘ cÃ¢n nháº¯c:</p>
<ol>
<li>CÃ¡c tÃ¬nh huá»‘ng vÃ  chá»©c nÄƒng mÃ  InnoDB cáº§n thá»±c hiá»‡n yÃªu cáº§u cÃ³ hiá»‡u suáº¥t máº¡nh máº½ trong cÃ¡c truy váº¥n cá»¥ thá»ƒ.</li>
<li>CPU máº¥t nhiá»u thá»i gian Ä‘á»ƒ táº£i dá»¯ liá»‡u tá»« Ä‘Ä©a vÃ o bá»™ nhá»›.</li>
</ol>
<p><strong>Táº¡i sao chá»n B+ tree:</strong></p>
<ul>
<li>
<p><strong>Chá»‰ má»¥c bÄƒm</strong> tuy cÃ³ thá»ƒ cung cáº¥p truy váº¥n phá»©c táº¡p O(1), nhÆ°ng khÃ´ng há»— trá»£ tá»‘t truy váº¥n pháº¡m vi vÃ  sáº¯p xáº¿p, cuá»‘i cÃ¹ng sáº½ dáº«n Ä‘áº¿n quÃ©t toÃ n bá»™ báº£ng.</p>
</li>
<li>
<p><strong>CÃ¢y B</strong> cÃ³ thá»ƒ lÆ°u trá»¯ dá»¯ liá»‡u á»Ÿ cÃ¡c nÃºt khÃ´ng pháº£i lÃ  lÃ¡, nhÆ°ng Ä‘iá»u nÃ y cÃ³ thá»ƒ dáº«n Ä‘áº¿n nhiá»u IO ngáº«u nhiÃªn hÆ¡n khi truy váº¥n dá»¯ liá»‡u liÃªn tá»¥c.</p>
</li>
<li>
<p>CÃ¡c nÃºt lÃ¡ cá»§a <strong>cÃ¢y B+</strong> cÃ³ thá»ƒ káº¿t ná»‘i vá»›i nhau báº±ng con trá», giáº£m IO ngáº«u nhiÃªn do duyá»‡t tuáº§n tá»±.</p>
</li>
<li>
<p>Chá»‰ má»¥c duy nháº¥t hay khÃ´ng duy nháº¥t?</p>
<p>VÃ¬ chá»‰ má»¥c duy nháº¥t khÃ´ng thá»ƒ sá»­ dá»¥ng cÆ¡ cháº¿ tá»‘i Æ°u hÃ³a cá»§a bá»™ Ä‘á»‡m thay Ä‘á»•i, do Ä‘Ã³ náº¿u nghiá»‡p vá»¥ cÃ³ thá»ƒ cháº¥p nháº­n, tá»« gÃ³c Ä‘á»™ hiá»‡u suáº¥t, nÃªn Æ°u tiÃªn chá»‰ má»¥c khÃ´ng duy nháº¥t.</p>
</li>
</ul>
<h3>8. Chá»‰ má»¥c bao phá»§ vÃ  chá»‰ má»¥c Ä‘áº©y lÃ  gÃ¬?</h3>
<p><strong>Chá»‰ má»¥c bao phá»§:</strong></p>
<ul>
<li>Trong má»™t truy váº¥n, chá»‰ má»¥c k Ä‘Ã£ "bao phá»§" nhu cáº§u truy váº¥n cá»§a chÃºng ta, Ä‘Æ°á»£c gá»i lÃ  chá»‰ má»¥c bao phá»§.</li>
<li>Chá»‰ má»¥c bao phá»§ cÃ³ thá»ƒ giáº£m sá»‘ láº§n tÃ¬m kiáº¿m trÃªn cÃ¢y, tÄƒng Ä‘Ã¡ng ká»ƒ hiá»‡u suáº¥t truy váº¥n, vÃ¬ váº­y sá»­ dá»¥ng chá»‰ má»¥c bao phá»§ lÃ  má»™t phÆ°Æ¡ng phÃ¡p tá»‘i Æ°u hiá»‡u suáº¥t phá»• biáº¿n.</li>
</ul>
<p><strong>Chá»‰ má»¥c Ä‘áº©y:</strong></p>
<ul>
<li>MySQL 5.6 giá»›i thiá»‡u tá»‘i Æ°u hÃ³a chá»‰ má»¥c Ä‘áº©y (index condition pushdown), cÃ³ thá»ƒ trong quÃ¡ trÃ¬nh duyá»‡t chá»‰ má»¥c, trÆ°á»›c tiÃªn thá»±c hiá»‡n phÃ¡n Ä‘oÃ¡n trÃªn cÃ¡c trÆ°á»ng chá»©a trong chá»‰ má»¥c, lá»c trá»±c tiáº¿p cÃ¡c báº£n ghi khÃ´ng thá»a mÃ£n Ä‘iá»u kiá»‡n, giáº£m sá»‘ láº§n quay láº¡i báº£ng.</li>
</ul>
<h3>9. Nhá»¯ng thao tÃ¡c nÃ o khiáº¿n chá»‰ má»¥c khÃ´ng cÃ²n hiá»‡u lá»±c?</h3>
<ul>
<li>Sá»­ dá»¥ng khá»›p máº«u bÃªn trÃ¡i hoáº·c khá»›p máº«u trÃ¡i pháº£i, tá»©c lÃ  like %xx hoáº·c like %xx%, Ä‘á»u gÃ¢y chá»‰ má»¥c khÃ´ng cÃ²n hiá»‡u lá»±c. NguyÃªn nhÃ¢n lÃ  káº¿t quáº£ truy váº¥n cÃ³ thá»ƒ lÃ  nhiá»u, khÃ´ng biáº¿t so sÃ¡nh tá»« giÃ¡ trá»‹ chá»‰ má»¥c nÃ o, vÃ¬ váº­y chá»‰ cÃ³ thá»ƒ quÃ©t toÃ n bá»™ báº£ng.</li>
<li>Thá»±c hiá»‡n chá»©c nÄƒng trÃªn chá»‰ má»¥c hoáº·c tÃ­nh toÃ¡n biá»ƒu thá»©c trÃªn chá»‰ má»¥c, vÃ¬ chá»‰ má»¥c giá»¯ giÃ¡ trá»‹ gá»‘c cá»§a trÆ°á»ng chá»‰ má»¥c, khÃ´ng pháº£i lÃ  giÃ¡ trá»‹ sau khi tÃ­nh toÃ¡n bá»Ÿi chá»©c nÄƒng, do Ä‘Ã³ khÃ´ng thá»ƒ sá»­ dá»¥ng chá»‰ má»¥c.</li>
<li>Thá»±c hiá»‡n chuyá»ƒn Ä‘á»•i ngáº§m trÃªn chá»‰ má»¥c tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i viá»‡c sá»­ dá»¥ng chá»©c nÄƒng má»›i.</li>
<li>Trong cÃ¢u lá»‡nh WHERE cÃ³ cÃ¢u lá»‡nh OR, chá»‰ cáº§n cÃ³ má»™t Ä‘iá»u kiá»‡n khÃ´ng pháº£i lÃ  trÆ°á»ng chá»‰ má»¥c, sáº½ thá»±c hiá»‡n quÃ©t toÃ n bá»™ báº£ng.</li>
</ul>
<h3>10. ThÃªm chá»‰ má»¥c cho chuá»—i kÃ½ tá»±</h3>
<ul>
<li>Táº¡o chá»‰ má»¥c Ä‘áº§y Ä‘á»§ trá»±c tiáº¿p, cÃ³ thá»ƒ tá»‘n nhiá»u khÃ´ng gian.</li>
<li>Táº¡o chá»‰ má»¥c tiá»n tá»‘, tiáº¿t kiá»‡m khÃ´ng gian, nhÆ°ng tÄƒng sá»‘ láº§n quÃ©t truy váº¥n vÃ  khÃ´ng thá»ƒ sá»­ dá»¥ng chá»‰ má»¥c bao phá»§.</li>
<li>LÆ°u trá»¯ ngÆ°á»£c rá»“i táº¡o chá»‰ má»¥c tiá»n tá»‘ Ä‘á»ƒ trÃ¡nh váº¥n Ä‘á» khÃ´ng Ä‘á»§ Ä‘á»™ phÃ¢n biá»‡t cá»§a tiá»n tá»‘ chuá»—i.</li>
<li>Táº¡o chá»‰ má»¥c trÆ°á»ng bÄƒm, hiá»‡u suáº¥t truy váº¥n á»•n Ä‘á»‹nh, cÃ³ thÃªm chi phÃ­ lÆ°u trá»¯ vÃ  tÃ­nh toÃ¡n, giá»‘ng nhÆ° cÃ¡ch thá»© ba, Ä‘á»u khÃ´ng há»— trá»£ quÃ©t pháº¡m vi.</li>
</ul>
<h2>LiÃªn Quan Äáº¿n Nháº­t KÃ½</h2>
<h3>11. Change Buffer cá»§a MySQL lÃ  gÃ¬?</h3>
<ul>
<li>Khi cáº§n cáº­p nháº­t má»™t trang dá»¯ liá»‡u, náº¿u trang dá»¯ liá»‡u Ä‘Ã³ Ä‘Ã£ náº±m trong bá»™ nhá»› thÃ¬ sáº½ cáº­p nháº­t trá»±c tiáº¿p; cÃ²n náº¿u trang dá»¯ liá»‡u Ä‘Ã³ chÆ°a náº±m trong bá»™ nhá»›, InnoDB sáº½ lÆ°u cÃ¡c thao tÃ¡c cáº­p nháº­t nÃ y vÃ o change buffer mÃ  khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n tÃ­nh nháº¥t quÃ¡n cá»§a dá»¯ liá»‡u.</li>
<li>Báº±ng cÃ¡ch nÃ y, khÃ´ng cáº§n pháº£i Ä‘á»c trang dá»¯ liá»‡u nÃ y tá»« Ä‘Ä©a vÃ o bá»™ nhá»›. Khi cÃ³ truy váº¥n cáº§n truy cáº­p trang dá»¯ liá»‡u nÃ y, trang dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c Ä‘á»c vÃ o bá»™ nhá»›, sau Ä‘Ã³ thá»±c hiá»‡n cÃ¡c thao tÃ¡c liÃªn quan trong change buffer. Qua Ä‘Ã³, cÃ³ thá»ƒ Ä‘áº£m báº£o tÃ­nh chÃ­nh xÃ¡c cá»§a dá»¯ liá»‡u.</li>
<li>LÆ°u Ã½ ráº±ng viá»‡c cáº­p nháº­t chá»‰ má»¥c duy nháº¥t khÃ´ng thá»ƒ sá»­ dá»¥ng change buffer, thá»±c táº¿ chá»‰ cÃ³ chá»‰ má»¥c thÃ´ng thÆ°á»ng má»›i cÃ³ thá»ƒ sá»­ dá»¥ng.</li>
<li><strong>á»¨ng dá»¥ng:</strong>
<ul>
<li>Äá»‘i vá»›i cÃ¡c nghiá»‡p vá»¥ ghi nhiá»u Ä‘á»c Ã­t, kháº£ nÄƒng trang dá»¯ liá»‡u Ä‘Æ°á»£c truy cáº­p ngay sau khi ghi xong lÃ  khÃ¡ tháº¥p, lÃºc nÃ y viá»‡c sá»­ dá»¥ng change buffer sáº½ hiá»‡u quáº£ nháº¥t. MÃ´ hÃ¬nh nghiá»‡p vá»¥ nÃ y thÆ°á»ng tháº¥y trong cÃ¡c há»‡ thá»‘ng quáº£n lÃ½ hÃ³a Ä‘Æ¡n, nháº­t kÃ½.</li>
<li>NgÆ°á»£c láº¡i, náº¿u má»™t nghiá»‡p vá»¥ cÃ³ mÃ´ hÃ¬nh cáº­p nháº­t lÃ  ghi xong sáº½ truy váº¥n ngay láº­p tá»©c, máº·c dÃ¹ cÃ³ thá»ƒ ghi change buffer trÆ°á»›c nhÆ°ng ngay sau Ä‘Ã³ sáº½ truy cáº­p trang dá»¯ liá»‡u nÃ y, quÃ¡ trÃ¬nh merge sáº½ Ä‘Æ°á»£c kÃ­ch hoáº¡t ngay. Do Ä‘Ã³, sá»‘ láº§n truy cáº­p IO ngáº«u nhiÃªn sáº½ khÃ´ng giáº£m, tháº­m chÃ­ tÄƒng thÃªm chi phÃ­ báº£o trÃ¬ change buffer.</li>
</ul>
</li>
</ul>
<h3>12. MySQL lÃ m tháº¿ nÃ o Ä‘á»ƒ Ä‘Ã¡nh giÃ¡ sá»‘ lÆ°á»£ng hÃ ng cáº§n quÃ©t?</h3>
<ul>
<li>TrÆ°á»›c khi thá»±c sá»± báº¯t Ä‘áº§u thá»±c hiá»‡n cÃ¢u lá»‡nh, MySQL khÃ´ng thá»ƒ biáº¿t chÃ­nh xÃ¡c cÃ³ bao nhiÃªu báº£n ghi thá»a mÃ£n Ä‘iá»u kiá»‡n nÃ y.</li>
<li>MySQL chá»‰ cÃ³ thá»ƒ Æ°á»›c lÆ°á»£ng sá»‘ lÆ°á»£ng báº£n ghi dá»±a trÃªn thÃ´ng tin thá»‘ng kÃª, thÃ´ng tin nÃ y chÃ­nh lÃ  Ä‘á»™ phÃ¢n biá»‡t cá»§a chá»‰ má»¥c.</li>
</ul>
<h3>13. Sá»± khÃ¡c biá»‡t giá»¯a redo log vÃ  binlog cá»§a MySQL?</h3>
<figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/herongwei/mysql-a2b8e123-41cb-4717-9225-3a8b49197004.png" alt="Difference between redo log and binlog" tabindex="0" loading="lazy"><figcaption>Difference between redo log and binlog</figcaption></figure>
<h3>14. Táº¡i sao cáº§n redo log?</h3>
<ul>
<li>Redo log chá»§ yáº¿u dÃ¹ng Ä‘á»ƒ khÃ´i phá»¥c dá»¯ liá»‡u khi MySQL khá»Ÿi Ä‘á»™ng láº¡i sau khi gáº·p sá»± cá»‘, Ä‘áº£m báº£o tÃ­nh nháº¥t quÃ¡n cá»§a dá»¯ liá»‡u.</li>
<li>Thá»±c táº¿, redo log há»— trá»£ cÆ¡ cháº¿ WAL cá»§a MySQL. VÃ¬ MySQL thá»±c hiá»‡n cáº­p nháº­t, Ä‘á»ƒ cÃ³ thá»ƒ pháº£n há»“i nhanh chÃ³ng, nÃªn sá»­ dá»¥ng ká»¹ thuáº­t ghi khÃ´ng Ä‘á»“ng bá»™ vÃ o Ä‘Ä©a, ghi vÃ o bá»™ nhá»› xong lÃ  tráº£ lá»i. NhÆ°ng Ä‘iá»u nÃ y gÃ¢y ra nguy cÆ¡ máº¥t dá»¯ liá»‡u trong bá»™ nhá»› sau khi crash, vÃ  redo log cÃ³ kháº£ nÄƒng Ä‘áº£m báº£o an toÃ n khi crash.</li>
</ul>
<h3>15. Táº¡i sao redo log cÃ³ kháº£ nÄƒng crash-safe, mÃ  binlog khÃ´ng thá»ƒ thay tháº¿ Ä‘Æ°á»£c?</h3>
<p><strong>Äiá»ƒm Ä‘áº§u tiÃªn:</strong> Redo log cÃ³ thá»ƒ Ä‘áº£m báº£o InnoDB xÃ¡c Ä‘á»‹nh dá»¯ liá»‡u nÃ o Ä‘Ã£ Ä‘Æ°á»£c ghi vÃ o Ä‘Ä©a, dá»¯ liá»‡u nÃ o chÆ°a.</p>
<ul>
<li>Redo log vÃ  binlog cÃ³ má»™t sá»± khÃ¡c biá»‡t lá»›n lÃ , má»™t cÃ¡i ghi tuáº§n hoÃ n, má»™t cÃ¡i ghi thÃªm. Redo log chá»‰ ghi láº¡i cÃ¡c nháº­t kÃ½ chÆ°a Ä‘Æ°á»£c ghi vÃ o Ä‘Ä©a, cÃ²n cÃ¡c dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c ghi vÃ o Ä‘Ä©a sáº½ Ä‘Æ°á»£c xÃ³a khá»i file nháº­t kÃ½ cÃ³ kÃ­ch thÆ°á»›c giá»›i háº¡n nÃ y. Binlog lÃ  nháº­t kÃ½ ghi thÃªm, lÆ°u trá»¯ toÃ n bá»™ nháº­t kÃ½.</li>
<li>Khi cÆ¡ sá»Ÿ dá»¯ liá»‡u gáº·p sá»± cá»‘, muá»‘n khÃ´i phá»¥c dá»¯ liá»‡u chÆ°a Ä‘Æ°á»£c ghi vÃ o Ä‘Ä©a nhÆ°ng Ä‘Ã£ ghi vÃ o redo log vÃ  binlog vÃ o bá»™ nhá»›, binlog khÃ´ng thá»ƒ khÃ´i phá»¥c Ä‘Æ°á»£c. Máº·c dÃ¹ binlog cÃ³ toÃ n bá»™ nháº­t kÃ½, nhÆ°ng khÃ´ng cÃ³ dáº¥u hiá»‡u nÃ o cho phÃ©p InnoDB xÃ¡c Ä‘á»‹nh dá»¯ liá»‡u nÃ o Ä‘Ã£ Ä‘Æ°á»£c ghi vÃ o Ä‘Ä©a, dá»¯ liá»‡u nÃ o chÆ°a.</li>
<li>NhÆ°ng redo log thÃ¬ khÃ¡c, dá»¯ liá»‡u nÃ o Ä‘Ã£ Ä‘Æ°á»£c ghi vÃ o Ä‘Ä©a sáº½ Ä‘Æ°á»£c xÃ³a khá»i redo log vÃ¬ nÃ³ lÃ  ghi tuáº§n hoÃ n. Sau khi khá»Ÿi Ä‘á»™ng láº¡i cÆ¡ sá»Ÿ dá»¯ liá»‡u, chá»‰ cáº§n khÃ´i phá»¥c cÃ¡c dá»¯ liá»‡u trong redo log vÃ o bá»™ nhá»›.</li>
</ul>
<p><strong>Äiá»ƒm thá»© hai:</strong> Náº¿u ghi redo log tháº¥t báº¡i, Ä‘iá»u nÃ y cÃ³ nghÄ©a lÃ  thao tÃ¡c Ä‘Ã³ tháº¥t báº¡i, vÃ  giao dá»‹ch cÅ©ng khÃ´ng thá»ƒ Ä‘Æ°á»£c cam káº¿t.</p>
<ul>
<li>Sau má»—i thao tÃ¡c cáº­p nháº­t, redo log sáº½ Ä‘Æ°á»£c ghi vÃ o nháº­t kÃ½. Náº¿u ghi tháº¥t báº¡i, Ä‘iá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ  thao tÃ¡c nÃ y tháº¥t báº¡i, vÃ  giao dá»‹ch cÅ©ng khÃ´ng thá»ƒ Ä‘Æ°á»£c cam káº¿t.</li>
<li>Cáº¥u trÃºc bÃªn trong cá»§a redo log dá»±a trÃªn trang, ghi láº¡i sá»± thay Ä‘á»•i cá»§a cÃ¡c giÃ¡ trá»‹ trÆ°á»ng trÃªn trang Ä‘Ã³, chá»‰ cáº§n Ä‘á»c redo log vÃ  thá»±c hiá»‡n láº¡i sau khi crash lÃ  cÃ³ thá»ƒ khÃ´i phá»¥c dá»¯ liá»‡u.</li>
<li>ÄÃ³ lÃ  lÃ½ do táº¡i sao redo log cÃ³ kháº£ nÄƒng crash-safe, trong khi binlog thÃ¬ khÃ´ng.</li>
</ul>
<h3>16. Khi cÆ¡ sá»Ÿ dá»¯ liá»‡u gáº·p sá»± cá»‘, lÃ m tháº¿ nÃ o Ä‘á»ƒ khÃ´i phá»¥c dá»¯ liá»‡u chÆ°a Ä‘Æ°á»£c ghi vÃ o Ä‘Ä©a vÃ o bá»™ nhá»›?</h3>
<p>Dá»±a trÃªn cÆ¡ cháº¿ cam káº¿t hai giai Ä‘oáº¡n cá»§a redo log vÃ  binlog, dá»¯ liá»‡u chÆ°a Ä‘Æ°á»£c lÆ°u trá»¯ bao gá»“m cÃ¡c trÆ°á»ng há»£p sau:</p>
<ul>
<li>Change buffer Ä‘Ã£ Ä‘Æ°á»£c ghi, redo log Ä‘Ã£ fsync nhÆ°ng chÆ°a cam káº¿t, binlog chÆ°a fsync vÃ o Ä‘Ä©a, dá»¯ liá»‡u nÃ y bá»‹ máº¥t.</li>
<li>Change buffer Ä‘Ã£ Ä‘Æ°á»£c ghi, redo log fsync nhÆ°ng chÆ°a cam káº¿t, binlog Ä‘Ã£ fsync vÃ o Ä‘Ä©a, khÃ´i phá»¥c redo log tá»« binlog, sau Ä‘Ã³ khÃ´i phá»¥c change buffer tá»« redo log.</li>
<li>Change buffer Ä‘Ã£ Ä‘Æ°á»£c ghi, redo log vÃ  binlog Ä‘á»u Ä‘Ã£ fsync, khÃ´i phá»¥c trá»±c tiáº¿p tá»« redo log.</li>
</ul>
<h3>17. CÃ¡ch ghi redo log?</h3>
<p>Redo log bao gá»“m hai pháº§n: <strong>bá»™ Ä‘á»‡m nháº­t kÃ½</strong> (redo log buffer) trong bá»™ nhá»› vÃ  <strong>tá»‡p nháº­t kÃ½</strong> (redo log file) trÃªn Ä‘Ä©a.</p>
<p>MySQL thá»±c hiá»‡n má»—i cÃ¢u lá»‡nh DML, trÆ°á»›c tiÃªn sáº½ ghi láº¡i vÃ o <strong>redo log buffer (khÃ´ng gian ngÆ°á»i dÃ¹ng)</strong>, sau Ä‘Ã³ lÆ°u vÃ o bá»™ Ä‘á»‡m cá»§a há»‡ Ä‘iá»u hÃ nh OS-buffer, vÃ  sau Ä‘Ã³ vÃ o má»™t thá»i Ä‘iá»ƒm nÃ o Ä‘Ã³ sáº½ ghi láº¡i nhiá»u thao tÃ¡c vÃ o <strong>redo log file (ghi vÃ o Ä‘Ä©a)</strong>. Ká»¹ thuáº­t nÃ y gá»i lÃ  <strong>WAL</strong>.</p>
<p>CÃ³ thá»ƒ tháº¥y, redo log buffer Ä‘Æ°á»£c ghi vÃ o redo log file thÃ´ng qua OS buffer. Thá»±c táº¿, cÃ³ thá»ƒ cáº¥u hÃ¬nh thÃ´ng qua tham sá»‘ <code>innodb_flush_log_at_trx_commit</code>, vá»›i cÃ¡c giÃ¡ trá»‹ sau:</p>
<ul>
<li><code>0</code>: gá»i lÃ  <strong>ghi trá»…</strong>, khi cam káº¿t giao dá»‹ch sáº½ khÃ´ng ghi nháº­t kÃ½ trong redo log buffer vÃ o OS buffer, mÃ  sáº½ ghi vÃ o OS buffer má»—i giÃ¢y vÃ  sau Ä‘Ã³ gá»i ghi vÃ o redo log file.</li>
<li><code>1</code>: gá»i lÃ  <strong>ghi thá»i gian thá»±c</strong>, khi cam káº¿t giao dá»‹ch sáº½ ghi nháº­t kÃ½ trong redo log buffer vÃ o OS buffer vÃ  lÆ°u vÃ o redo log file má»—i láº§n.</li>
<li><code>2</code>: gá»i lÃ  <strong>ghi thá»i gian thá»±c, ghi trá»… vÃ o Ä‘Ä©a</strong>, khi cam káº¿t giao dá»‹ch sáº½ ghi vÃ o OS buffer, sau Ä‘Ã³ má»—i giÃ¢y sáº½ ghi nháº­t kÃ½ vÃ o redo log file.</li>
</ul>
<h3>18. Quy trÃ¬nh thá»±c hiá»‡n cá»§a redo log?</h3>
<p>ChÃºng ta cÃ¹ng xem quy trÃ¬nh thá»±c hiá»‡n cá»§a redo log, giáº£ sá»­ cÃ¢u lá»‡nh SQL nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>update T set a = 1 where id = 666</span></span></code></pre>
</div><ol>
<li>MySQL client gá»­i cÃ¢u lá»‡nh <code>update T set a = 1 where id = 666</code> tá»›i lá»›p MySQL Server.</li>
<li>Lá»›p MySQL Server nháº­n cÃ¢u lá»‡nh SQL, phÃ¢n tÃ­ch, tá»‘i Æ°u hÃ³a vÃ  thá»±c hiá»‡n cÃ¡c cÃ´ng viá»‡c liÃªn quan, sau Ä‘Ã³ gá»­i káº¿ hoáº¡ch thá»±c hiá»‡n SQL tá»›i lá»›p InnoDB Storage Engine Ä‘á»ƒ thá»±c hiá»‡n.</li>
<li>Lá»›p InnoDB Storage Engine ghi nháº­n thao tÃ¡c <strong>a Ä‘Æ°á»£c sá»­a thÃ nh 1</strong> vÃ o bá»™ nhá»›.</li>
<li>Sau khi ghi vÃ o bá»™ nhá»›, sáº½ cáº­p nháº­t ghi chÃ©p trong redo log, thÃªm má»™t dÃ²ng ghi chÃ©p vá»›i ná»™i dung <strong>thá»±c hiá»‡n thay Ä‘á»•i gÃ¬ trÃªn trang dá»¯ liá»‡u nÃ o</strong>.</li>
<li>Sau Ä‘Ã³, Ä‘áº·t tráº¡ng thÃ¡i cá»§a giao dá»‹ch thÃ nh <code>prepare</code>, cho biáº¿t Ä‘Ã£ sáºµn sÃ ng cam káº¿t giao dá»‹ch.</li>
<li>Khi lá»›p MySQL Server xá»­ lÃ½ xong giao dá»‹ch, sáº½ Ä‘áº·t tráº¡ng thÃ¡i cá»§a giao dá»‹ch thÃ nh <code>commit</code>, tá»©c lÃ  cam káº¿t giao dá»‹ch.</li>
<li>Sau khi nháº­n yÃªu cáº§u cam káº¿t giao dá»‹ch, redo log sáº½ ghi cÃ¡c thao tÃ¡c Ä‘Ã£ ghi vÃ o bá»™ nhá»› vÃ o Ä‘Ä©a, hoÃ n thÃ nh quÃ¡ trÃ¬nh ghi nháº­t kÃ½.</li>
</ol>
<h3>19. Binlog lÃ  gÃ¬, chá»©c nÄƒng cá»§a nÃ³ lÃ  gÃ¬, vÃ  nÃ³ cÃ³ Ä‘áº£m báº£o an toÃ n khi gáº·p sá»± cá»‘ khÃ´ng?</h3>
<ul>
<li>Binlog lÃ  nháº­t kÃ½ lÆ°u trá»¯, thuá»™c vá» lá»›p MySQL Server. NÃ³ cÃ³ hai chá»©c nÄƒng chÃ­nh lÃ  <strong>sao chÃ©p chÃ­nh-phá»¥</strong> vÃ  <strong>khÃ´i phá»¥c dá»¯ liá»‡u</strong>.</li>
<li>Khi cáº§n <strong>khÃ´i phá»¥c dá»¯ liá»‡u</strong>, cÃ³ thá»ƒ trÃ­ch xuáº¥t binlog trong khoáº£ng thá»i gian cá»¥ thá»ƒ Ä‘á»ƒ phÃ¡t láº¡i vÃ  khÃ´i phá»¥c.</li>
<li>Tuy nhiÃªn, binlog khÃ´ng Ä‘áº£m báº£o an toÃ n khi gáº·p sá»± cá»‘ vÃ¬ trÆ°á»›c khi sá»± cá»‘ xáº£y ra, binlog <strong>cÃ³ thá»ƒ chÆ°a Ä‘Æ°á»£c ghi hoÃ n toÃ n</strong> vÃ o MySQL. Do Ä‘Ã³, cáº§n pháº£i káº¿t há»£p vá»›i <strong>redo log</strong> Ä‘á»ƒ Ä‘áº£m báº£o an toÃ n khi gáº·p sá»± cá»‘.</li>
</ul>
<h3>20. Giao dá»‹ch hai giai Ä‘oáº¡n lÃ  gÃ¬?</h3>
<p>MySQL chia quÃ¡ trÃ¬nh ghi redo log thÃ nh hai bÆ°á»›c: prepare vÃ  commit, xen giá»¯a lÃ  quÃ¡ trÃ¬nh ghi binlog, Ä‘Ã³ lÃ  "giao dá»‹ch hai giai Ä‘oáº¡n".</p>
<figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/herongwei/mysql-11420486-f9d0-483a-ba2e-a742ec4c518d.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>Giao dá»‹ch hai giai Ä‘oáº¡n giÃºp Ä‘áº£m báº£o hai tráº¡ng thÃ¡i nÃ y duy trÃ¬ tÃ­nh nháº¥t quÃ¡n logic. Redo log dÃ¹ng Ä‘á»ƒ khÃ´i phá»¥c dá»¯ liá»‡u chÆ°a cáº­p nháº­t khi mÃ¡y chá»§ gáº·p sá»± cá»‘, binlog dÃ¹ng cho sao lÆ°u. VÃ¬ cáº£ hai lÃ  hai thá»±c thá»ƒ Ä‘á»™c láº­p, Ä‘á»ƒ giá»¯ cho chÃºng nháº¥t quÃ¡n, cáº§n sá»­ dá»¥ng giáº£i phÃ¡p giao dá»‹ch phÃ¢n tÃ¡n.</p>
<p><strong>Táº¡i sao cáº§n giao dá»‹ch hai giai Ä‘oáº¡n?</strong></p>
<ul>
<li>Náº¿u khÃ´ng dÃ¹ng giao dá»‹ch hai giai Ä‘oáº¡n, cÃ³ thá»ƒ xáº£y ra cÃ¡c tÃ¬nh huá»‘ng sau:
<ul>
<li>Ghi redo log trÆ°á»›c, sau Ä‘Ã³ gáº·p sá»± cá»‘, quÃ¡ trÃ¬nh sao lÆ°u binlog sáº½ thiáº¿u má»™t láº§n cáº­p nháº­t, khÃ´ng nháº¥t quÃ¡n vá»›i dá»¯ liá»‡u hiá»‡n táº¡i.</li>
<li>Ghi binlog trÆ°á»›c, sau Ä‘Ã³ gáº·p sá»± cá»‘, do redo log chÆ°a Ä‘Æ°á»£c ghi, giao dá»‹ch khÃ´ng há»£p lá»‡, vÃ¬ váº­y khi sao lÆ°u binlog, dá»¯ liá»‡u sáº½ khÃ´ng nháº¥t quÃ¡n.</li>
</ul>
</li>
<li>Giao dá»‹ch hai giai Ä‘oáº¡n Ä‘áº£m báº£o sá»± nháº¥t quÃ¡n an toÃ n cá»§a dá»¯ liá»‡u giá»¯a redo log vÃ  binlog. Chá»‰ khi hai tá»‡p nháº­t kÃ½ nÃ y nháº¥t quÃ¡n logic, báº¡n má»›i cÃ³ thá»ƒ yÃªn tÃ¢m sá»­ dá»¥ng.</li>
</ul>
<p>Khi khÃ´i phá»¥c dá»¯ liá»‡u, náº¿u tráº¡ng thÃ¡i cá»§a redo log lÃ  commit thÃ¬ binlog cÅ©ng thÃ nh cÃ´ng, khÃ´i phá»¥c dá»¯ liá»‡u trá»±c tiáº¿p; náº¿u redo log á»Ÿ tráº¡ng thÃ¡i prepare, cáº§n kiá»ƒm tra xem giao dá»‹ch tÆ°Æ¡ng á»©ng trong binlog cÃ³ thÃ nh cÃ´ng hay khÃ´ng Ä‘á»ƒ quyáº¿t Ä‘á»‹nh rollback hoáº·c tiáº¿p tá»¥c thá»±c hiá»‡n.</p>
<h3>21. MySQL lÃ m tháº¿ nÃ o Ä‘á»ƒ biáº¿t binlog lÃ  hoÃ n chá»‰nh?</h3>
<p>Binlog cá»§a má»™t giao dá»‹ch cÃ³ Ä‘á»‹nh dáº¡ng hoÃ n chá»‰nh:</p>
<ul>
<li>Äá»‘i vá»›i Ä‘á»‹nh dáº¡ng statement, binlog cuá»‘i cÃ¹ng sáº½ cÃ³ COMMIT;</li>
<li>Äá»‘i vá»›i Ä‘á»‹nh dáº¡ng row, binlog cuá»‘i cÃ¹ng sáº½ cÃ³ má»™t sá»± kiá»‡n XID.</li>
</ul>
<h3>22. WAL lÃ  gÃ¬ vÃ  Æ°u Ä‘iá»ƒm cá»§a nÃ³ lÃ  gÃ¬?</h3>
<p>WAL, viáº¿t táº¯t cá»§a Write-Ahead Logging, cÃ³ nghÄ©a lÃ  ghi nháº­t kÃ½ trÆ°á»›c khi ghi vÃ o Ä‘Ä©a. Sau khi MySQL thá»±c hiá»‡n thao tÃ¡c cáº­p nháº­t, <strong>trÆ°á»›c khi thá»±c sá»± ghi dá»¯ liá»‡u vÃ o Ä‘Ä©a, trÆ°á»›c tiÃªn sáº½ ghi nháº­t kÃ½</strong>.</p>
<p>Æ¯u Ä‘iá»ƒm lÃ  khÃ´ng cáº§n ghi dá»¯ liá»‡u vÃ o Ä‘Ä©a ngay láº­p tá»©c cho má»—i thao tÃ¡c, ngay cáº£ khi gáº·p sá»± cá»‘, cÃ³ thá»ƒ khÃ´i phá»¥c dá»¯ liá»‡u thÃ´ng qua redo log, do Ä‘Ã³ cÃ³ thá»ƒ pháº£n há»“i nhanh chÃ³ng cÃ¡c cÃ¢u lá»‡nh SQL.</p>
<h3>23. CÃ¡c Ä‘á»‹nh dáº¡ng nháº­t kÃ½ binlog</h3>
<p>Binlog cÃ³ ba Ä‘á»‹nh dáº¡ng:</p>
<ul>
<li>Statement: Sao chÃ©p dá»±a trÃªn cÃ¢u lá»‡nh (statement-based replication, SBR)</li>
<li>Row: Sao chÃ©p dá»±a trÃªn hÃ ng (row-based replication, RBR)</li>
<li>Mixed: Sao chÃ©p á»Ÿ cháº¿ Ä‘á»™ há»—n há»£p (mixed-based replication, MBR)</li>
</ul>
<p><strong>Äá»‹nh dáº¡ng Statement</strong></p>
<p>Má»—i cÃ¢u lá»‡nh SQL thay Ä‘á»•i dá»¯ liá»‡u Ä‘á»u Ä‘Æ°á»£c ghi láº¡i trong binlog.</p>
<ul>
<li>Æ¯u Ä‘iá»ƒm: KhÃ´ng cáº§n ghi láº¡i tá»«ng thay Ä‘á»•i cá»§a má»—i hÃ ng, giáº£m lÆ°á»£ng nháº­t kÃ½ binlog, tiáº¿t kiá»‡m IO, cáº£i thiá»‡n hiá»‡u suáº¥t.</li>
<li>NhÆ°á»£c Ä‘iá»ƒm: VÃ¬ chá»‰ ghi láº¡i cÃ¢u lá»‡nh thá»±c hiá»‡n, Ä‘á»ƒ cÃ¡c cÃ¢u lá»‡nh nÃ y cÃ³ thá»ƒ cháº¡y Ä‘Ãºng trÃªn mÃ¡y chá»§ phá»¥, cáº§n ghi láº¡i má»™t sá»‘ thÃ´ng tin liÃªn quan khi thá»±c hiá»‡n má»—i cÃ¢u lá»‡nh Ä‘á»ƒ Ä‘áº£m báº£o táº¥t cáº£ cÃ¡c cÃ¢u lá»‡nh trÃªn mÃ¡y chá»§ phá»¥ cÃ³ káº¿t quáº£ giá»‘ng nhÆ° khi thá»±c hiá»‡n trÃªn mÃ¡y chá»§ chÃ­nh.</li>
</ul>
<p><strong>Äá»‹nh dáº¡ng Row</strong></p>
<p>KhÃ´ng ghi láº¡i thÃ´ng tin liÃªn quan Ä‘áº¿n cÃ¢u lá»‡nh SQL, chá»‰ lÆ°u trá»¯ hÃ ng nÃ o bá»‹ thay Ä‘á»•i.</p>
<ul>
<li>Æ¯u Ä‘iá»ƒm: Binlog khÃ´ng cáº§n ghi láº¡i thÃ´ng tin liÃªn quan Ä‘áº¿n ngá»¯ cáº£nh cá»§a cÃ¢u lá»‡nh SQL, chá»‰ cáº§n ghi láº¡i hÃ ng nÃ o bá»‹ thay Ä‘á»•i vÃ  thay Ä‘á»•i thÃ nh gÃ¬. Do Ä‘Ã³, ná»™i dung nháº­t kÃ½ row-level sáº½ ghi chi tiáº¿t cÃ¡c thay Ä‘á»•i cá»§a tá»«ng hÃ ng dá»¯ liá»‡u. KhÃ´ng gáº·p váº¥n Ä‘á» vá» sao chÃ©p Ä‘Ãºng trong má»™t sá»‘ tÃ¬nh huá»‘ng nháº¥t Ä‘á»‹nh nhÆ° cÃ¡c thá»§ tá»¥c lÆ°u trá»¯, hÃ m, hoáº·c trigger.</li>
<li>NhÆ°á»£c Ä‘iá»ƒm: CÃ³ thá»ƒ táº¡o ra lÆ°á»£ng lá»›n ná»™i dung nháº­t kÃ½.</li>
</ul>
<p><strong>Äá»‹nh dáº¡ng Mixed</strong></p>
<p>Thá»±c cháº¥t lÃ  sá»± káº¿t há»£p giá»¯a Statement vÃ  Row. CÃ¡c cÃ¢u lá»‡nh thay Ä‘á»•i thÃ´ng thÆ°á»ng sá»­ dá»¥ng Ä‘á»‹nh dáº¡ng statement Ä‘á»ƒ lÆ°u trá»¯ binlog, nhÆ° cÃ¡c hÃ m mÃ  statement khÃ´ng thá»ƒ thá»±c hiá»‡n sao chÃ©p chÃ­nh-phá»¥ thÃ¬ sá»­ dá»¥ng Ä‘á»‹nh dáº¡ng row Ä‘á»ƒ lÆ°u trá»¯ binlog. MySQL sáº½ dá»±a trÃªn tá»«ng cÃ¢u lá»‡nh SQL cá»¥ thá»ƒ Ä‘á»ƒ quyáº¿t Ä‘á»‹nh Ä‘á»‹nh dáº¡ng nháº­t kÃ½ nÃ o.</p>
<h3>24. Äá»‹nh dáº¡ng nháº­t kÃ½ redo log</h3>
<figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/herongwei/mysql-ee8a859f-d1e8-4ab6-94d1-9733373be825.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>Redo log buffer (trong bá»™ nhá»›) Ä‘Æ°á»£c táº¡o thÃ nh tá»« bá»‘n tá»‡p ná»‘i tiáº¿p nhau, bao gá»“m: ib_logfile_1, ib_logfile_2, ib_logfile_3, ib_logfile_4.</p>
<ul>
<li>Write pos lÃ  vá»‹ trÃ­ hiá»‡n táº¡i ghi nháº­t kÃ½, khi ghi xong sáº½ di chuyá»ƒn vá» phÃ­a sau. Khi ghi Ä‘áº¿n cuá»‘i tá»‡p thá»© ba thÃ¬ quay láº¡i Ä‘áº§u tá»‡p 0.</li>
<li>Checkpoint lÃ  vá»‹ trÃ­ hiá»‡n táº¡i cáº§n xÃ³a, cÅ©ng di chuyá»ƒn vá» phÃ­a sau vÃ  láº·p láº¡i. TrÆ°á»›c khi xÃ³a nháº­t kÃ½ cáº§n cáº­p nháº­t nháº­t kÃ½ vÃ o tá»‡p dá»¯ liá»‡u.</li>
<li>Khoáº£ng trá»‘ng giá»¯a write pos vÃ  checkpoint lÃ  pháº§n chÆ°a Ä‘Æ°á»£c sá»­ dá»¥ng, cÃ³ thá»ƒ ghi nháº­t kÃ½ má»›i.</li>
<li>Náº¿u write pos Ä‘uá»•i ká»‹p checkpoint, nghÄ©a lÃ  nháº­t kÃ½ Ä‘Ã£ Ä‘áº§y, khÃ´ng thá»ƒ thá»±c hiá»‡n cÃ¡c cáº­p nháº­t má»›i mÃ  pháº£i dá»«ng láº¡i Ä‘á»ƒ xÃ³a má»™t sá»‘ nháº­t kÃ½, Ä‘áº©y checkpoint vá» phÃ­a trÆ°á»›c.</li>
<li>Vá»›i redo log, khi cÆ¡ sá»Ÿ dá»¯ liá»‡u gáº·p sá»± cá»‘ vÃ  khá»Ÿi Ä‘á»™ng láº¡i, cÃ³ thá»ƒ khÃ´i phá»¥c dá»¯ liá»‡u chÆ°a Ä‘Æ°á»£c ghi vÃ o Ä‘Ä©a (dá»¯ liá»‡u sau checkpoint) tá»« redo log, Ä‘áº£m báº£o cÃ¡c báº£n ghi giao dá»‹ch Ä‘Ã£ Ä‘Æ°á»£c hoÃ n thÃ nh khÃ´ng bá»‹ máº¥t, kháº£ nÄƒng nÃ y Ä‘Æ°á»£c gá»i lÃ  <strong>crash-safe</strong>.</li>
</ul>
<h3>25. Nhá»¯ng nguyÃªn nhÃ¢n gÃ¬ khiáº¿n cÃ¢u lá»‡nh SQL Ä‘Ã¡ng láº½ thá»±c thi ráº¥t nhanh nhÆ°ng láº¡i cháº¡y cháº­m hÆ¡n dá»± kiáº¿n? LÃ m tháº¿ nÃ o Ä‘á»ƒ giáº£i quyáº¿t?</h3>
<p>NguyÃªn nhÃ¢n: Tá»« lá»›n Ä‘áº¿n nhá» cÃ³ thá»ƒ chia thÃ nh bá»‘n tÃ¬nh huá»‘ng:</p>
<ul>
<li>MySQL bá»‹ táº¯c ngháº½n, cháº³ng háº¡n nhÆ°: tÃ i nguyÃªn há»‡ thá»‘ng hoáº·c máº¡ng khÃ´ng Ä‘á»§.</li>
<li>CÃ¢u lá»‡nh SQL bá»‹ táº¯c ngháº½n, cháº³ng háº¡n nhÆ°: khÃ³a báº£ng, khÃ³a hÃ ng, lÃ m cho bá»™ mÃ¡y lÆ°u trá»¯ khÃ´ng thá»±c hiá»‡n cÃ¢u lá»‡nh SQL tÆ°Æ¡ng á»©ng.</li>
<li>Do sá»­ dá»¥ng chá»‰ má»¥c khÃ´ng Ä‘Ãºng, khÃ´ng sá»­ dá»¥ng chá»‰ má»¥c.</li>
<li>Äáº·c Ä‘iá»ƒm cá»§a dá»¯ liá»‡u trong báº£ng dáº«n Ä‘áº¿n, máº·c dÃ¹ cÃ³ chá»‰ má»¥c nhÆ°ng sá»‘ láº§n quay láº¡i báº£ng ráº¥t lá»›n.</li>
</ul>
<p>Giáº£i phÃ¡p:</p>
<ul>
<li>Xem xÃ©t sá»­ dá»¥ng force index Ä‘á»ƒ Ã©p buá»™c chá»n má»™t chá»‰ má»¥c.</li>
<li>Xem xÃ©t sá»­a Ä‘á»•i cÃ¢u lá»‡nh, hÆ°á»›ng dáº«n MySQL sá»­ dá»¥ng chá»‰ má»¥c mÃ  báº¡n mong muá»‘n. VÃ­ dá»¥, thay Ä‘á»•i "order by b limit 1" thÃ nh "order by b, a limit 1", logic ngá»¯ nghÄ©a lÃ  tÆ°Æ¡ng Ä‘Æ°Æ¡ng.</li>
<li>PhÆ°Æ¡ng phÃ¡p thá»© ba lÃ , trong má»™t sá»‘ tÃ¬nh huá»‘ng, cÃ³ thá»ƒ táº¡o má»™t chá»‰ má»¥c phÃ¹ há»£p hÆ¡n Ä‘á»ƒ cung cáº¥p cho bá»™ tá»‘i Æ°u hÃ³a Ä‘á»ƒ lá»±a chá»n, hoáº·c xÃ³a chá»‰ má»¥c bá»‹ sá»­ dá»¥ng sai.</li>
<li>Náº¿u xÃ¡c Ä‘á»‹nh chá»‰ má»¥c khÃ´ng cáº§n thiáº¿t, cÃ³ thá»ƒ xem xÃ©t xÃ³a chá»‰ má»¥c.</li>
</ul>
<h3>26. Cáº¥u trÃºc trang dá»¯ liá»‡u cá»§a InnoDB</h3>
<p>Má»™t trang dá»¯ liá»‡u Ä‘Æ°á»£c chia thÃ nh báº£y pháº§n:</p>
<ul>
<li>File Header: Biá»ƒu thá»‹ thÃ´ng tin chung cá»§a trang, chiáº¿m 38 byte cá»‘ Ä‘á»‹nh.</li>
<li>Page Header: Biá»ƒu thá»‹ thÃ´ng tin riÃªng cá»§a trang dá»¯ liá»‡u, chiáº¿m 56 byte cá»‘ Ä‘á»‹nh.</li>
<li>Minimum + Supermum: Hai báº£n ghi giáº£ láº­p, láº§n lÆ°á»£t biá»ƒu thá»‹ báº£n ghi nhá» nháº¥t vÃ  lá»›n nháº¥t trong trang, chiáº¿m 26 byte cá»‘ Ä‘á»‹nh.</li>
<li>User Records: Thá»±c sá»± lÆ°u trá»¯ dá»¯ liá»‡u chÃºng ta chÃ¨n vÃ o, kÃ­ch thÆ°á»›c khÃ´ng cá»‘ Ä‘á»‹nh.</li>
<li>Free Space: Pháº§n chÆ°a Ä‘Æ°á»£c sá»­ dá»¥ng trong trang, kÃ­ch thÆ°á»›c khÃ´ng cá»‘ Ä‘á»‹nh.</li>
<li>Page Directory: Vá»‹ trÃ­ tÆ°Æ¡ng Ä‘á»‘i cá»§a má»™t sá»‘ báº£n ghi trong trang, nghÄ©a lÃ  Ä‘á»‹a chá»‰ cá»§a má»—i báº£n ghi trong trang.</li>
<li>File Trailer: DÃ¹ng Ä‘á»ƒ kiá»ƒm tra trang cÃ³ hoÃ n chá»‰nh khÃ´ng, chiáº¿m 8 byte cá»‘ Ä‘á»‹nh.</li>
</ul>
<h2>CÃ¡c khÃ¡i niá»‡m liÃªn quan Ä‘áº¿n dá»¯ liá»‡u</h2>
<h3>27. MySQL Ä‘áº£m báº£o dá»¯ liá»‡u khÃ´ng bá»‹ máº¥t nhÆ° tháº¿ nÃ o?</h3>
<ul>
<li>Chá»‰ cáº§n <code>redolog</code> vÃ  <code>binlog</code> Ä‘áº£m báº£o Ä‘Æ°á»£c ghi vÃ o Ä‘Ä©a thÃ¬ cÃ³ thá»ƒ Ä‘áº£m báº£o dá»¯ liá»‡u cá»§a MySQL cÃ³ thá»ƒ Ä‘Æ°á»£c khÃ´i phá»¥c sau khi khá»Ÿi Ä‘á»™ng láº¡i do lá»—i.</li>
<li>Khi khÃ´i phá»¥c dá»¯ liá»‡u, náº¿u tráº¡ng thÃ¡i <code>redolog</code> lÃ  <code>commit</code> thÃ¬ cÃ³ nghÄ©a lÃ  <code>binlog</code> cÅ©ng Ä‘Ã£ thÃ nh cÃ´ng, dá»¯ liá»‡u Ä‘Æ°á»£c khÃ´i phá»¥c trá»±c tiáº¿p; náº¿u tráº¡ng thÃ¡i <code>redolog</code> lÃ  <code>prepare</code>, cáº§n kiá»ƒm tra giao dá»‹ch <code>binlog</code> tÆ°Æ¡ng á»©ng cÃ³ thÃ nh cÃ´ng hay khÃ´ng Ä‘á»ƒ quyáº¿t Ä‘á»‹nh khÃ´i phá»¥c hoáº·c rollback.</li>
</ul>
<h3>28. LÃ m gÃ¬ khi dá»¯ liá»‡u bá»‹ xÃ³a nháº§m?</h3>
<p>CÃ´ng viá»‡c cá»‘t lÃµi cá»§a DBA lÃ  Ä‘áº£m báº£o tÃ­nh toÃ n váº¹n cá»§a dá»¯ liá»‡u. TrÆ°á»›c tiÃªn, cáº§n thá»±c hiá»‡n cÃ¡c biá»‡n phÃ¡p phÃ²ng ngá»«a thÃ´ng qua cÃ¡c Ä‘iá»ƒm sau:</p>
<ul>
<li>Kiá»ƒm soÃ¡t vÃ  phÃ¢n quyá»n (quyá»n háº¡n cá»§a cÆ¡ sá»Ÿ dá»¯ liá»‡u vÃ  mÃ¡y chá»§)</li>
<li>Thiáº¿t láº­p quy trÃ¬nh thao tÃ¡c</li>
<li>ÄÃ o táº¡o Ä‘á»‹nh ká»³ cho cÃ¡c nhÃ  phÃ¡t triá»ƒn</li>
<li>XÃ¢y dá»±ng báº£n sao lÆ°u trá»…</li>
<li>Thá»±c hiá»‡n kiá»ƒm tra SQL, táº¥t cáº£ cÃ¡c cÃ¢u lá»‡nh thay Ä‘á»•i dá»¯ liá»‡u trÃªn mÃ´i trÆ°á»ng trá»±c tuyáº¿n (DML vÃ  DDL) cáº§n Ä‘Æ°á»£c kiá»ƒm tra ká»¹ lÆ°á»¡ng</li>
<li>Thá»±c hiá»‡n sao lÆ°u. CÃ³ hai phÆ°Æ¡ng phÃ¡p sao lÆ°u:
<ol>
<li>Náº¿u dá»¯ liá»‡u lá»›n, sá»­ dá»¥ng sao lÆ°u váº­t lÃ½ <code>xtrabackup</code>. Thá»±c hiá»‡n sao lÆ°u toÃ n bá»™ Ä‘á»‹nh ká»³ vÃ  cÃ³ thá»ƒ sao lÆ°u gia tÄƒng.</li>
<li>Náº¿u dá»¯ liá»‡u nhá», sá»­ dá»¥ng <code>mysqldump</code> hoáº·c <code>mysqldumper</code>. Sau Ä‘Ã³ khÃ´i phá»¥c báº±ng <code>binlog</code> hoáº·c xÃ¢y dá»±ng cáº¥u hÃ¬nh master-slave Ä‘á»ƒ khÃ´i phá»¥c dá»¯ liá»‡u. Äá»‹nh ká»³ sao lÆ°u tá»‡p <code>binlog</code> cÅ©ng ráº¥t cáº§n thiáº¿t.</li>
</ol>
</li>
<li>Khi xáº£y ra thao tÃ¡c xÃ³a dá»¯ liá»‡u, cÃ³ thá»ƒ khÃ´i phá»¥c theo cÃ¡c phÆ°Æ¡ng phÃ¡p sau:
<ul>
<li>Náº¿u thao tÃ¡c DML gÃ¢y máº¥t hoáº·c khÃ´ng hoÃ n chá»‰nh dá»¯ liá»‡u, cÃ³ thá»ƒ sá»­ dá»¥ng <code>flashback</code> hoáº·c cÃ´ng cá»¥ <code>myflash</code> cá»§a Meituan. Cáº£ hai Ä‘á»u phÃ¢n tÃ­ch sá»± kiá»‡n <code>binlog</code> vÃ  thá»±c hiá»‡n Ä‘áº£o ngÆ°á»£c cÃ¡c thao tÃ¡c nhÆ° <code>delete</code> thÃ nh <code>insert</code>, <code>insert</code> thÃ nh <code>delete</code>, hoÃ¡n Ä‘á»•i áº£nh trÆ°á»›c vÃ  sau cá»§a <code>update</code>. Äiá»u nÃ y Ä‘Ã²i há»i <code>binlog_format</code> pháº£i lÃ  <code>row</code> vÃ  <code>binlog_row_image</code> lÃ  <code>full</code>. KhÃ´i phá»¥c dá»¯ liá»‡u trÆ°á»›c tiÃªn nÃªn thá»±c hiá»‡n trÃªn instance táº¡m thá»i, sau Ä‘Ã³ khÃ´i phá»¥c lÃªn master.</li>
<li>Náº¿u thao tÃ¡c DDL nhÆ° <code>truncate</code> hoáº·c <code>drop</code> xáº£y ra, do DDL khÃ´ng ghi hÃ¬nh áº£nh (image) trong <code>binlog</code>, nÃªn khÃ´i phá»¥c sáº½ phá»©c táº¡p hÆ¡n, cáº§n sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p sao lÆ°u toÃ n bá»™ vÃ  Ã¡p dá»¥ng <code>binlog</code>. Khi dá»¯ liá»‡u lá»›n, thá»i gian khÃ´i phá»¥c sáº½ ráº¥t lÃ¢u.</li>
<li>Khi lá»‡nh <code>rm</code> xÃ³a dá»¯ liá»‡u, sá»­ dá»¥ng sao lÆ°u lÆ°u trá»¯ á»Ÿ trung tÃ¢m dá»¯ liá»‡u khÃ¡c hoáº·c tá»‘t nháº¥t lÃ  á»Ÿ thÃ nh phá»‘ khÃ¡c.</li>
</ul>
</li>
</ul>
<h3>29. Sá»± khÃ¡c biá»‡t giá»¯a <code>drop</code>, <code>truncate</code> vÃ  <code>delete</code></h3>
<ul>
<li>Lá»‡nh <code>DELETE</code> xÃ³a tá»«ng dÃ²ng trong báº£ng vÃ  ghi láº¡i thao tÃ¡c xÃ³a vÃ o nháº­t kÃ½ Ä‘á»ƒ cÃ³ thá»ƒ rollback.</li>
<li>Lá»‡nh <code>TRUNCATE TABLE</code> xÃ³a táº¥t cáº£ dá»¯ liá»‡u trong báº£ng mÃ  khÃ´ng ghi láº¡i tá»«ng thao tÃ¡c xÃ³a vÃ o nháº­t kÃ½, nÃªn khÃ´ng thá»ƒ khÃ´i phá»¥c. QuÃ¡ trÃ¬nh xÃ³a khÃ´ng kÃ­ch hoáº¡t trigger liÃªn quan vÃ  thá»±c thi nhanh chÃ³ng.</li>
<li>Lá»‡nh <code>drop</code> giáº£i phÃ³ng toÃ n bá»™ khÃ´ng gian báº£ng.</li>
<li>Vá» tá»‘c Ä‘á»™, <code>drop</code> &gt; <code>truncate</code> &gt; <code>delete</code>.</li>
<li>Náº¿u muá»‘n xÃ³a má»™t pháº§n dá»¯ liá»‡u, sá»­ dá»¥ng <code>delete</code> vá»›i Ä‘iá»u kiá»‡n <code>where</code> vÃ  Ä‘áº£m báº£o vÃ¹ng rollback Ä‘á»§ lá»›n.</li>
<li>Náº¿u muá»‘n xÃ³a báº£ng, sá»­ dá»¥ng <code>drop</code>; náº¿u muá»‘n giá»¯ báº£ng nhÆ°ng xÃ³a táº¥t cáº£ dá»¯ liá»‡u, sá»­ dá»¥ng <code>truncate</code> náº¿u khÃ´ng liÃªn quan Ä‘áº¿n giao dá»‹ch.</li>
<li>Náº¿u liÃªn quan Ä‘áº¿n giao dá»‹ch hoáº·c cáº§n trigger, sá»­ dá»¥ng <code>delete</code>. Náº¿u cáº§n sáº¯p xáº¿p láº¡i cÃ¡c Ä‘oáº¡n trá»‘ng trong báº£ng, sá»­ dá»¥ng <code>truncate</code> vá»›i <code>reuse storage</code>, sau Ä‘Ã³ nháº­p láº¡i dá»¯ liá»‡u.</li>
</ul>
<h3>30. CÃ³ hai lá»‡nh <code>kill</code> trong MySQL</h3>
<ul>
<li><code>kill query + id luá»“ng</code>, cháº¥m dá»©t cÃ¢u lá»‡nh Ä‘ang cháº¡y trong luá»“ng Ä‘Ã³.</li>
<li><code>kill connection + id luá»“ng</code> (hoáº·c <code>kill + id luá»“ng</code>), ngáº¯t káº¿t ná»‘i cá»§a luá»“ng Ä‘Ã³.</li>
</ul>
<p>LÃ½ do lá»‡nh <code>kill</code> khÃ´ng hoáº¡t Ä‘á»™ng:</p>
<ul>
<li>Lá»‡nh <code>kill</code> bá»‹ cháº·n vÃ  chÆ°a Ä‘áº¿n nÆ¡i.</li>
<li>Lá»‡nh <code>kill</code> Ä‘Ã£ Ä‘áº¿n nÆ¡i nhÆ°ng chÆ°a Ä‘Æ°á»£c kÃ­ch hoáº¡t ngay láº­p tá»©c.</li>
<li>Lá»‡nh <code>kill</code> Ä‘Ã£ Ä‘Æ°á»£c kÃ­ch hoáº¡t nhÆ°ng cáº§n thá»i gian Ä‘á»ƒ hoÃ n táº¥t.</li>
</ul>
<h3>31. Hiá»ƒu nhÆ° tháº¿ nÃ o vá» viá»‡c Ä‘á»c vÃ  gá»­i dá»¯ liá»‡u Ä‘á»“ng thá»i trong MySQL</h3>
<ul>
<li>Náº¿u khÃ¡ch hÃ ng nháº­n dá»¯ liá»‡u cháº­m, MySQL sáº½ gáº·p khÃ³ khÄƒn trong viá»‡c gá»­i káº¿t quáº£, lÃ m kÃ©o dÃ i thá»i gian thá»±c thi giao dá»‹ch.</li>
<li>MÃ¡y chá»§ khÃ´ng cáº§n lÆ°u trá»¯ toÃ n bá»™ táº­p káº¿t quáº£, quÃ¡ trÃ¬nh láº¥y vÃ  gá»­i dá»¯ liá»‡u Ä‘Æ°á»£c thá»±c hiá»‡n thÃ´ng qua <code>next_buffer</code>.</li>
<li>CÃ¡c trang dá»¯ liá»‡u trong bá»™ nhá»› Ä‘Æ°á»£c quáº£n lÃ½ trong <code>Buffer_Pool</code>.</li>
<li>InnoDB quáº£n lÃ½ <code>Buffer_Pool</code> báº±ng thuáº­t toÃ¡n LRU cáº£i tiáº¿n, sá»­ dá»¥ng danh sÃ¡ch liÃªn káº¿t vÃ  chia tá»· lá»‡ 5:3 thÃ nh cÃ¡c khu vá»±c <code>young</code> vÃ  <code>old</code>.</li>
</ul>
<h3>32. Táº¡i sao truy váº¥n báº£ng lá»›n trong MySQL khÃ´ng lÃ m Ä‘áº§y bá»™ nhá»›?</h3>
<ul>
<li>MySQL gá»­i dá»¯ liá»‡u Ä‘á»“ng thá»i khi Ä‘á»c, nÃªn khÃ´ng cáº§n lÆ°u trá»¯ toÃ n bá»™ táº­p káº¿t quáº£ trÃªn mÃ¡y chá»§. Náº¿u khÃ¡ch hÃ ng nháº­n dá»¯ liá»‡u cháº­m, quÃ¡ trÃ¬nh truy váº¥n MySQL sáº½ bá»‹ cháº·n nhÆ°ng khÃ´ng lÃ m Ä‘áº§y bá»™ nhá»›.</li>
<li>Ná»™i bá»™ InnoDB cÃ³ chiáº¿n lÆ°á»£c loáº¡i bá», quáº£n lÃ½ <code>Buffer_Pool</code> báº±ng thuáº­t toÃ¡n LRU cáº£i tiáº¿n. InnoDB chia danh sÃ¡ch liÃªn káº¿t LRU theo tá»· lá»‡ 5:3 thÃ nh cÃ¡c khu vá»±c <code>young</code> vÃ  <code>old</code>. Viá»‡c quÃ©t toÃ n bá»™ dá»¯ liá»‡u láº¡nh cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c kiá»ƒm soÃ¡t.</li>
</ul>
<h3>33. CÃ¡ch sá»­ dá»¥ng vÃ  Ä‘áº·c tÃ­nh cá»§a báº£ng táº¡m thá»i trong MySQL</h3>
<ul>
<li>Chá»‰ hiá»ƒn thá»‹ cho session hiá»‡n táº¡i.</li>
<li>CÃ³ thá»ƒ trÃ¹ng tÃªn vá»›i báº£ng thÆ°á»ng.</li>
<li>Sá»­ dá»¥ng Ä‘á»ƒ thÃªm, xÃ³a, sá»­a, truy váº¥n dá»¯ liá»‡u táº¡m thá»i.</li>
<li><code>show tables</code> khÃ´ng hiá»ƒn thá»‹ báº£ng táº¡m thá»i.</li>
<li>Trong á»©ng dá»¥ng thá»±c táº¿, báº£ng táº¡m thá»i thÆ°á»ng dÃ¹ng Ä‘á»ƒ xá»­ lÃ½ cÃ¡c logic tÃ­nh toÃ¡n phá»©c táº¡p.</li>
<li>VÃ¬ báº£ng táº¡m thá»i chá»‰ hiá»ƒn thá»‹ cho tá»«ng luá»“ng riÃªng láº», khÃ´ng cáº§n lo láº¯ng vá» viá»‡c trÃ¹ng tÃªn khi nhiá»u luá»“ng thá»±c thi cÃ¹ng má»™t xá»­ lÃ½. Báº£ng táº¡m thá»i sáº½ tá»± Ä‘á»™ng xÃ³a khi luá»“ng káº¿t thÃºc.</li>
</ul>
<h3>34. Giá»›i thiá»‡u cÃ¡c bá»™ mÃ¡y lÆ°u trá»¯ MySQL (InnoDB, MyISAM, MEMORY)</h3>
<ul>
<li>InnoDB lÃ  bá»™ mÃ¡y lÆ°u trá»¯ chÃ­nh cho cÆ¡ sá»Ÿ dá»¯ liá»‡u giao dá»‹ch, há»— trá»£ báº£ng an toÃ n giao dá»‹ch (ACID), khÃ³a dÃ²ng vÃ  khÃ³a ngoáº¡i. Tá»« MySQL 5.5.5 trá»Ÿ Ä‘i, InnoDB lÃ  bá»™ mÃ¡y lÆ°u trá»¯ máº·c Ä‘á»‹nh.</li>
<li>MyISAM dá»±a trÃªn ISAM vÃ  má»Ÿ rá»™ng thÃªm. ÄÃ¢y lÃ  bá»™ mÃ¡y lÆ°u trá»¯ phá»• biáº¿n trong cÃ¡c á»©ng dá»¥ng web, lÆ°u trá»¯ dá»¯ liá»‡u vÃ  cÃ¡c mÃ´i trÆ°á»ng khÃ¡c. MyISAM cÃ³ tá»‘c Ä‘á»™ chÃ¨n vÃ  truy váº¥n cao nhÆ°ng khÃ´ng há»— trá»£ giao dá»‹ch. TrÆ°á»›c phiÃªn báº£n MySQL 5.5.5, MyISAM lÃ  bá»™ mÃ¡y lÆ°u trá»¯ máº·c Ä‘á»‹nh.</li>
<li>MEMORY lÆ°u trá»¯ dá»¯ liá»‡u trong bá»™ nhá»›, cung cáº¥p truy cáº­p nhanh cho cÃ¡c truy váº¥n vÃ  tham chiáº¿u dá»¯ liá»‡u tá»« báº£ng khÃ¡c.</li>
</ul>
<h3>35. InnoDB tá»‘t, nhÆ°ng cÃ³ nÃªn sá»­ dá»¥ng bá»™ mÃ¡y MEMORY khÃ´ng?</h3>
<ul>
<li>Báº£ng bá»™ nhá»› lÃ  báº£ng Ä‘Æ°á»£c táº¡o báº±ng bá»™ mÃ¡y MEMORY.</li>
<li>TÃ´i khÃ´ng khuyáº¿n khÃ­ch sá»­ dá»¥ng báº£ng bá»™ nhá»› trong mÃ´i trÆ°á»ng sáº£n xuáº¥t vÃ¬ cÃ¡c lÃ½ do chÃ­nh sau: váº¥n Ä‘á» khÃ³a háº¡t má»‹n vÃ  váº¥n Ä‘á» lÆ°u trá»¯ dá»¯ liá»‡u.</li>
<li>Do dá»¯ liá»‡u bá»‹ máº¥t khi khá»Ÿi Ä‘á»™ng láº¡i, náº¿u má»™t mÃ¡y sao lÆ°u khá»Ÿi Ä‘á»™ng láº¡i, nÃ³ sáº½ dá»«ng Ä‘á»“ng bá»™ hÃ³a tá»« mÃ¡y chá»§ chÃ­nh. Náº¿u cáº¥u hÃ¬nh master-master, dá»¯ liá»‡u báº£ng bá»™ nhá»› trÃªn mÃ¡y chá»§ chÃ­nh cÅ©ng cÃ³ thá»ƒ bá»‹ xÃ³a.</li>
</ul>
<h3>36. LÃ m tháº¿ nÃ o Ä‘á»ƒ khÃ´i phá»¥c dá»¯ liá»‡u khi thao tÃ¡c nháº§m trÃªn cÆ¡ sá»Ÿ dá»¯ liá»‡u?</h3>
<p>Khi xáº£y ra thao tÃ¡c nháº§m, tÃ¬m Ä‘áº¿n <code>binlog</code> gáº§n nháº¥t vá»›i thá»i Ä‘iá»ƒm thao tÃ¡c nháº§m, phÃ¡t láº¡i trÃªn cÆ¡ sá»Ÿ dá»¯ liá»‡u táº¡m thá»i, sau Ä‘Ã³ chá»n dá»¯ liá»‡u bá»‹ xÃ³a nháº§m vÃ  khÃ´i phá»¥c láº¡i trÃªn cÆ¡ sá»Ÿ dá»¯ liá»‡u chÃ­nh.</p>
<h2>LiÃªn quan Ä‘áº¿n sao lÆ°u chÃ­nh phá»¥</h2>
<h3>37. MySQL Ä‘áº£m báº£o Ä‘á»“ng bá»™ chÃ­nh phá»¥ nhÆ° tháº¿ nÃ o?</h3>
<p>Thiáº¿t láº­p quan há»‡ chÃ­nh phá»¥:</p>
<ul>
<li>Ban Ä‘áº§u, khi thiáº¿t láº­p quan há»‡ chÃ­nh phá»¥, lÃ  do phá»¥ Ä‘á»‹nh trÆ°á»›c, vÃ­ dá»¥ dá»±a trÃªn quan há»‡ chÃ­nh phá»¥ theo Ä‘iá»ƒm vá»‹ trÃ­, phá»¥ sáº½ nÃ³i "TÃ´i muá»‘n Ä‘á»“ng bá»™ tá»« vá»‹ trÃ­ P cá»§a tá»‡p binlog A", vÃ  chÃ­nh sáº½ báº¯t Ä‘áº§u gá»­i tá»« vá»‹ trÃ­ Ä‘Ã³.</li>
<li>Sau khi thiáº¿t láº­p quan há»‡ chÃ­nh phá»¥, chÃ­nh quyáº¿t Ä‘á»‹nh gá»­i dá»¯ liá»‡u nÃ o cho phá»¥, do Ä‘Ã³, khi chÃ­nh cÃ³ nháº­t kÃ½ má»›i sáº½ gá»­i cho phá»¥.</li>
</ul>
<p>Quy trÃ¬nh chuyá»ƒn Ä‘á»•i chÃ­nh phá»¥ trong MySQL:</p>
<ul>
<li>KhÃ¡ch hÃ ng Ä‘á»c vÃ  ghi Ä‘á»u trá»±c tiáº¿p truy cáº­p vÃ o A, trong khi B lÃ  phá»¥, chá»‰ cáº§n Ä‘á»“ng bá»™ hÃ³a cÃ¡c cáº­p nháº­t cá»§a A Ä‘áº¿n B Ä‘á»ƒ Ä‘áº£m báº£o dá»¯ liá»‡u lÃ  giá»‘ng nhau.</li>
<li>Khi cáº§n chuyá»ƒn Ä‘á»•i, chá»‰ cáº§n Ä‘á»•i vá»‹ trÃ­, tá»©c lÃ  B trá»Ÿ thÃ nh chÃ­nh vÃ  A trá»Ÿ thÃ nh phá»¥.</li>
</ul>
<p>QuÃ¡ trÃ¬nh Ä‘á»“ng bá»™ hÃ³a má»™t giao dá»‹ch hoÃ n chá»‰nh:</p>
<ul>
<li>Phá»¥ B vÃ  chÃ­nh A thiáº¿t láº­p má»™t káº¿t ná»‘i dÃ i, trong A cÃ³ má»™t luá»“ng chuyÃªn dá»¥ng Ä‘á»ƒ duy trÃ¬ káº¿t ná»‘i dÃ i nÃ y.</li>
<li>TrÃªn phá»¥ B, sá»­ dá»¥ng lá»‡nh <code>changemaster</code> Ä‘á»ƒ thiáº¿t láº­p Ä‘á»‹a chá»‰ IP, cá»•ng, tÃªn ngÆ°á»i dÃ¹ng vÃ  máº­t kháº©u cá»§a chÃ­nh A cÅ©ng nhÆ° báº¯t Ä‘áº§u yÃªu cáº§u binlog tá»« vá»‹ trÃ­ nÃ o, bao gá»“m tÃªn tá»‡p vÃ  Ä‘á»™ lá»‡ch nháº­t kÃ½.</li>
<li>TrÃªn phá»¥ B, thá»±c hiá»‡n lá»‡nh <code>start-slave</code>, phá»¥ sáº½ khá»Ÿi Ä‘á»™ng hai luá»“ng: <code>io_thread</code> vÃ  <code>sql_thread</code> Ä‘á»ƒ thiáº¿t láº­p káº¿t ná»‘i vÃ  Ä‘á»c, phÃ¢n tÃ­ch vÃ  thá»±c thi nháº­t kÃ½ trung gian.</li>
<li>Phá»¥ Ä‘á»c tá»‡p binlog mÃ  chÃ­nh Ä‘Ã£ gá»­i vÃ  ghi láº¡i vÃ o nháº­t kÃ½ trung gian.</li>
<li>Sau nÃ y, do giá»›i thiá»‡u cá»§a phÆ°Æ¡ng phÃ¡p sao chÃ©p Ä‘a luá»“ng, <code>sql_thread</code> Ä‘Ã£ phÃ¡t triá»ƒn thÃ nh nhiá»u luá»“ng.</li>
</ul>
<h3>38. Äá»™ trá»… chÃ­nh phá»¥ lÃ  gÃ¬?</h3>
<p>Äá»™ trá»… giá»¯a chÃ­nh vÃ  phá»¥ khi thá»±c hiá»‡n cÃ¹ng má»™t giao dá»‹ch xáº£y ra do:</p>
<ul>
<li>Trong má»™t sá»‘ Ä‘iá»u kiá»‡n triá»ƒn khai, hiá»‡u suáº¥t cá»§a mÃ¡y phá»¥ kÃ©m hÆ¡n so vá»›i chÃ­nh.</li>
<li>Ãp lá»±c lá»›n trÃªn phá»¥.</li>
<li>Giao dá»‹ch lá»›n, náº¿u má»™t cÃ¢u lá»‡nh trÃªn chÃ­nh máº¥t 10 phÃºt Ä‘á»ƒ thá»±c hiá»‡n, thÃ¬ giao dá»‹ch nÃ y cÃ³ thá»ƒ gÃ¢y ra Ä‘á»™ trá»… 10 phÃºt trÃªn phá»¥.</li>
</ul>
<h3>39. Táº¡i sao cáº§n cÃ³ chiáº¿n lÆ°á»£c sao chÃ©p Ä‘a luá»“ng?</h3>
<ul>
<li>VÃ¬ kháº£ nÄƒng sao chÃ©p Ä‘Æ¡n luá»“ng hoÃ n toÃ n tháº¥p hÆ¡n so vá»›i sao chÃ©p Ä‘a luá»“ng, Ä‘á»‘i vá»›i chÃ­nh cÃ³ Ã¡p lá»±c cáº­p nháº­t lá»›n, phá»¥ cÃ³ thá»ƒ khÃ´ng bao giá» theo ká»‹p chÃ­nh, dáº«n Ä‘áº¿n giÃ¡ trá»‹ <code>seconds_behind_master</code> trÃªn phá»¥ ngÃ y cÃ ng lá»›n.</li>
<li>Trong á»©ng dá»¥ng thá»±c táº¿, nÃªn sá»­ dá»¥ng chiáº¿n lÆ°á»£c Æ°u tiÃªn Ä‘á»™ tin cáº­y Ä‘á»ƒ giáº£m Ä‘á»™ trá»… chÃ­nh phá»¥, tÄƒng tÃ­nh kháº£ dá»¥ng cá»§a há»‡ thá»‘ng vÃ  giáº£m thiá»ƒu thao tÃ¡c giao dá»‹ch lá»›n, chia nhá» giao dá»‹ch lá»›n thÃ nh giao dá»‹ch nhá».</li>
</ul>
<h3>40. CÃ¡c chiáº¿n lÆ°á»£c song song cá»§a MySQL lÃ  gÃ¬?</h3>
<ul>
<li>Chiáº¿n lÆ°á»£c phÃ¢n phá»‘i theo báº£ng: Náº¿u hai giao dá»‹ch cáº­p nháº­t cÃ¡c báº£ng khÃ¡c nhau, chÃºng cÃ³ thá»ƒ song song. Do dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ trong báº£ng, nÃªn phÃ¢n phá»‘i theo báº£ng cÃ³ thá»ƒ Ä‘áº£m báº£o hai worker khÃ´ng cáº­p nháº­t cÃ¹ng má»™t dÃ²ng. NhÆ°á»£c Ä‘iá»ƒm: Náº¿u gáº·p báº£ng nÃ³ng, tá»©c lÃ  táº¥t cáº£ cÃ¡c giao dá»‹ch cáº­p nháº­t Ä‘á»u liÃªn quan Ä‘áº¿n má»™t báº£ng, thÃ¬ táº¥t cáº£ cÃ¡c giao dá»‹ch sáº½ Ä‘Æ°á»£c phÃ¢n bá»• vÃ o má»™t worker, trá»Ÿ thÃ nh sao chÃ©p Ä‘Æ¡n luá»“ng.</li>
<li>Chiáº¿n lÆ°á»£c phÃ¢n phá»‘i theo dÃ²ng: Náº¿u hai giao dá»‹ch khÃ´ng cáº­p nháº­t cÃ¹ng má»™t dÃ²ng, chÃºng cÃ³ thá»ƒ song song trÃªn phá»¥. RÃµ rÃ ng, cháº¿ Ä‘á»™ nÃ y yÃªu cáº§u Ä‘á»‹nh dáº¡ng binlog pháº£i lÃ  <code>row</code>. NhÆ°á»£c Ä‘iá»ƒm: So vá»›i chiáº¿n lÆ°á»£c phÃ¢n phá»‘i song song theo báº£ng, chiáº¿n lÆ°á»£c phÃ¢n phá»‘i song song theo dÃ²ng cáº§n tá»‘n nhiá»u tÃ i nguyÃªn tÃ­nh toÃ¡n hÆ¡n khi quyáº¿t Ä‘á»‹nh phÃ¢n phá»‘i luá»“ng.</li>
</ul>
<h3>41. Sá»± khÃ¡c biá»‡t giá»¯a má»™t chÃ­nh má»™t phá»¥ vÃ  má»™t chÃ­nh nhiá»u phá»¥ trong MySQL lÃ  gÃ¬?</h3>
<p>Trong cáº¥u trÃºc má»™t chÃ­nh má»™t phá»¥ cá»§a mÃ´ hÃ¬nh M kÃ©p, chuyá»ƒn Ä‘á»•i chÃ­nh phá»¥ chá»‰ cáº§n chuyá»ƒn lÆ°u lÆ°á»£ng khÃ¡ch hÃ ng sang phá»¥; trong khi trong cáº¥u trÃºc má»™t chÃ­nh nhiá»u phá»¥, chuyá»ƒn Ä‘á»•i chÃ­nh phá»¥ khÃ´ng chá»‰ cáº§n chuyá»ƒn lÆ°u lÆ°á»£ng khÃ¡ch hÃ ng sang phá»¥ mÃ  cÃ²n cáº§n káº¿t ná»‘i cÃ¡c phá»¥ vá»›i chÃ­nh má»›i.</p>
<h3>42. LÃ m tháº¿ nÃ o Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» khi chÃ­nh gáº·p sá»± cá»‘?</h3>
<ul>
<li>Chuyá»ƒn Ä‘á»•i chÃ­nh phá»¥ dá»±a trÃªn Ä‘iá»ƒm vá»‹ trÃ­: CÃ³ váº¥n Ä‘á» tÃ¬m Ä‘iá»ƒm Ä‘á»“ng bá»™ hÃ³a.</li>
<li>PhiÃªn báº£n MySQL 5.6 Ä‘Ã£ giá»›i thiá»‡u GTID, giáº£i quyáº¿t triá»‡t Ä‘á»ƒ váº¥n Ä‘á» nÃ y. GTID lÃ  gÃ¬ vÃ  lÃ m tháº¿ nÃ o Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» tÃ¬m Ä‘iá»ƒm Ä‘á»“ng bá»™ hÃ³a?</li>
<li>GTID (Global Transaction ID): ID giao dá»‹ch toÃ n cáº§u, Ä‘Æ°á»£c táº¡o ra khi giao dá»‹ch Ä‘Æ°á»£c cam káº¿t, lÃ  Ä‘á»‹nh danh duy nháº¥t cá»§a giao dá»‹ch nÃ y; nÃ³ bao gá»“m hai pháº§n, Ä‘á»‹nh dáº¡ng lÃ : GTID=server_uuid:gno.</li>
<li>Má»—i phiÃªn báº£n MySQL duy trÃ¬ má»™t táº­p há»£p GTID Ä‘á»ƒ tÆ°Æ¡ng á»©ng vá»›i "táº¥t cáº£ cÃ¡c giao dá»‹ch mÃ  phiÃªn báº£n nÃ y Ä‘Ã£ thá»±c hiá»‡n".</li>
<li>Trong quan há»‡ chÃ­nh phá»¥ dá»±a trÃªn GTID, há»‡ thá»‘ng cho ráº±ng chá»‰ cáº§n thiáº¿t láº­p quan há»‡ chÃ­nh phá»¥ thÃ¬ pháº£i Ä‘áº£m báº£o ráº±ng nháº­t kÃ½ mÃ  chÃ­nh gá»­i cho phá»¥ lÃ  Ä‘áº§y Ä‘á»§. Do Ä‘Ã³, náº¿u phá»¥ B yÃªu cáº§u nháº­t kÃ½ khÃ´ng cÃ²n tá»“n táº¡i, A' sáº½ tá»« chá»‘i gá»­i nháº­t kÃ½ cho B.</li>
</ul>
<h3>43. CÃ¡c giáº£i phÃ¡p cho váº¥n Ä‘á» Ä‘á»c quÃ¡ háº¡n liÃªn quan Ä‘áº¿n phÃ¢n tÃ¡ch Ä‘á»c ghi trong MySQL lÃ  gÃ¬?</h3>
<ul>
<li>Giáº£i phÃ¡p báº¯t buá»™c truy cáº­p chÃ­nh.</li>
<li>Giáº£i phÃ¡p sá»­ dá»¥ng <code>sleep</code>.</li>
<li>Giáº£i phÃ¡p xÃ¡c Ä‘á»‹nh khÃ´ng cÃ³ Ä‘á»™ trá»… chÃ­nh phá»¥.</li>
<li>Giáº£i phÃ¡p káº¿t há»£p semi-sync.</li>
<li>Giáº£i phÃ¡p chá» Ä‘iá»ƒm vá»‹ trÃ­ cá»§a chÃ­nh.</li>
<li>Giáº£i phÃ¡p GTID.</li>
<li>Trong sáº£n xuáº¥t thá»±c táº¿, Ä‘áº§u tiÃªn phÃ¢n loáº¡i yÃªu cáº§u cá»§a khÃ¡ch hÃ ng, phÃ¢n biá»‡t yÃªu cáº§u nÃ o cÃ³ thá»ƒ cháº¥p nháº­n Ä‘á»c quÃ¡ háº¡n vÃ  yÃªu cáº§u nÃ o khÃ´ng thá»ƒ cháº¥p nháº­n Ä‘á»c quÃ¡ háº¡n; sau Ä‘Ã³, Ä‘á»‘i vá»›i cÃ¡c cÃ¢u lá»‡nh khÃ´ng thá»ƒ cháº¥p nháº­n Ä‘á»c quÃ¡ háº¡n, sá»­ dá»¥ng giáº£i phÃ¡p chá» GTID hoáº·c chá» Ä‘iá»ƒm vá»‹ trÃ­.</li>
</ul>
<h3>44. Sá»± khÃ¡c biá»‡t giá»¯a káº¿t ná»‘i Ä‘á»“ng thá»i vÃ  truy váº¥n Ä‘á»“ng thá»i trong MySQL lÃ  gÃ¬?</h3>
<ul>
<li>Trong káº¿t quáº£ cá»§a lá»‡nh <code>show processlist</code>, nhÃ¬n tháº¥y hÃ ng ngÃ n káº¿t ná»‘i, Ä‘Ã³ lÃ  káº¿t ná»‘i Ä‘á»“ng thá»i. CÃ²n cÃ¡c cÃ¢u lá»‡nh "Ä‘ang thá»±c hiá»‡n" má»›i lÃ  truy váº¥n Ä‘á»“ng thá»i.</li>
<li>Sá»‘ lÆ°á»£ng káº¿t ná»‘i Ä‘á»“ng thá»i lá»›n áº£nh hÆ°á»Ÿng Ä‘áº¿n bá»™ nhá»›, sá»‘ lÆ°á»£ng truy váº¥n Ä‘á»“ng thá»i cao áº£nh hÆ°á»Ÿng Ä‘áº¿n CPU. Má»™t mÃ¡y tÃ­nh cÃ³ sá»‘ lÆ°á»£ng lÃµi CPU háº¡n cháº¿, náº¿u táº¥t cáº£ cÃ¡c luá»“ng cÃ¹ng thá»±c hiá»‡n, chi phÃ­ chuyá»ƒn Ä‘á»•i ngá»¯ cáº£nh sáº½ quÃ¡ cao.</li>
<li>Do Ä‘Ã³, cáº§n thiáº¿t láº­p tham sá»‘ <code>innodb_thread_concurrency</code> Ä‘á»ƒ giá»›i háº¡n sá»‘ lÆ°á»£ng luá»“ng. Khi sá»‘ lÆ°á»£ng luá»“ng Ä‘áº¡t Ä‘áº¿n tham sá»‘ nÃ y, InnoDB sáº½ coi nhÆ° sá»‘ lÆ°á»£ng luá»“ng Ä‘Ã£ dÃ¹ng háº¿t vÃ  sáº½ ngÄƒn cháº·n cÃ¡c cÃ¢u lá»‡nh khÃ¡c vÃ o Ä‘á»™ng cÆ¡ thá»±c thi.</li>
</ul>
<h2>LiÃªn quan Ä‘áº¿n hiá»‡u suáº¥t</h2>
<h3>45. CÃ¡ch nÃ¢ng cao hiá»‡u suáº¥t MySQL trong thá»i gian ngáº¯n</h3>
<ul>
<li>PhÆ°Æ¡ng phÃ¡p thá»© nháº¥t: Xá»­ lÃ½ cÃ¡c káº¿t ná»‘i Ä‘ang chiáº¿m giá»¯ nhÆ°ng khÃ´ng hoáº¡t Ä‘á»™ng. Hoáº·c cÃ¢n nháº¯c ngáº¯t káº¿t ná»‘i trong giao dá»‹ch Ä‘Ã£ ráº£nh rá»—i quÃ¡ lÃ¢u. <code>kill connection + id</code>.</li>
<li>PhÆ°Æ¡ng phÃ¡p thá»© hai: Giáº£m thiá»ƒu chi phÃ­ cá»§a quÃ¡ trÃ¬nh káº¿t ná»‘i: Váº¥n Ä‘á» hiá»‡u suáº¥t truy váº¥n cháº­m trong MySQL cÃ³ thá»ƒ gÃ¢y ra cÃ¡c váº¥n Ä‘á» vá» hiá»‡u suáº¥t, cÃ³ ba kháº£ nÄƒng chÃ­nh: Thiáº¿t káº¿ chá»‰ má»¥c khÃ´ng tá»‘t; CÃ¢u lá»‡nh SQL viáº¿t khÃ´ng tá»‘t; MySQL chá»n sai chá»‰ má»¥c (dÃ¹ng <code>force index</code>).</li>
</ul>
<h3>46. Táº¡i sao ID khÃ³a chÃ­nh tá»± tÄƒng cá»§a MySQL khÃ´ng liÃªn tá»¥c?</h3>
<ul>
<li>
<p>Xung Ä‘á»™t khÃ³a duy nháº¥t.</p>
</li>
<li>
<p>Giao dá»‹ch bá»‹ quay lui.</p>
</li>
<li>
<p>YÃªu cáº§u tÄƒng sá»‘ lÆ°á»£ng khÃ³a chÃ­nh tá»± tÄƒng.</p>
</li>
<li>
<p>NguyÃªn nhÃ¢n sÃ¢u xa lÃ  MySQL khÃ´ng kiá»ƒm tra sá»± tá»“n táº¡i cá»§a khÃ³a chÃ­nh tá»± tÄƒng, nháº±m giáº£m pháº¡m vi vÃ  má»©c Ä‘á»™ khÃ³a, do Ä‘Ã³ cÃ³ thá»ƒ duy trÃ¬ hiá»‡u suáº¥t cao hÆ¡n, Ä‘áº£m báº£o khÃ³a chÃ­nh tá»± tÄƒng khÃ´ng thá»ƒ quay lui, vÃ¬ váº­y khÃ³a chÃ­nh tá»± tÄƒng khÃ´ng liÃªn tá»¥c.</p>
</li>
<li>
<p>LÃ m tháº¿ nÃ o Ä‘á»ƒ khÃ³a chÃ­nh tá»± tÄƒng Ä‘áº¡t Ä‘Æ°á»£c tÃ­nh duy nháº¥t? GiÃ¡ trá»‹ tá»± tÄƒng thÃªm 1 vÃ  kiá»ƒm soÃ¡t Ä‘á»“ng thá»i thÃ´ng qua khÃ³a tá»± tÄƒng.</p>
</li>
</ul>
<h3>47. Táº¡i sao InnoDB sá»­ dá»¥ng ID tá»± tÄƒng lÃ m khÃ³a chÃ­nh?</h3>
<ul>
<li>
<p>Cháº¿ Ä‘á»™ chÃ¨n khÃ³a chÃ­nh tá»± tÄƒng phÃ¹ há»£p vá»›i chÃ¨n tÄƒng dáº§n, má»—i láº§n Ä‘á»u lÃ  thao tÃ¡c bá»• sung, khÃ´ng liÃªn quan Ä‘áº¿n di chuyá»ƒn báº£n ghi, cÅ©ng khÃ´ng kÃ­ch hoáº¡t phÃ¢n chia nÃºt lÃ¡.</p>
</li>
<li>
<p>Má»—i láº§n chÃ¨n báº£n ghi má»›i sáº½ Ä‘Æ°á»£c thÃªm tuáº§n tá»± vÃ o vá»‹ trÃ­ tiáº¿p theo cá»§a nÃºt chá»‰ má»¥c hiá»‡n táº¡i, khi má»™t trang Ä‘Æ°á»£c viáº¿t Ä‘áº§y, sáº½ tá»± Ä‘á»™ng má»Ÿ ra má»™t trang má»›i.</p>
</li>
<li>
<p>Trong khi cÃ¡c trÆ°á»ng cÃ³ logic nghiá»‡p vá»¥ lÃ m khÃ³a chÃ­nh, khÃ´ng dá»… Ä‘áº£m báº£o chÃ¨n theo thá»© tá»±, do má»—i láº§n chÃ¨n giÃ¡ trá»‹ khÃ³a chÃ­nh gáº§n nhÆ° ngáº«u nhiÃªn.</p>
</li>
<li>
<p>Do Ä‘Ã³, má»—i báº£n ghi má»›i Ä‘á»u pháº£i Ä‘Æ°á»£c chÃ¨n vÃ o má»™t vá»‹ trÃ­ nÃ o Ä‘Ã³ giá»¯a cÃ¡c trang chá»‰ má»¥c hiá»‡n cÃ³, viá»‡c di chuyá»ƒn vÃ  phÃ¢n trang thÆ°á»ng xuyÃªn gÃ¢y ra nhiá»u máº£nh vá»¥n, dáº«n Ä‘áº¿n cáº¥u trÃºc chá»‰ má»¥c khÃ´ng Ä‘á»§ cháº·t cháº½, chi phÃ­ ghi dá»¯ liá»‡u cao.</p>
</li>
</ul>
<h3>48. CÃ¡ch sao chÃ©p má»™t báº£ng nhanh nháº¥t?</h3>
<ul>
<li>Äá»ƒ trÃ¡nh khÃ³a Ä‘á»c trÃªn báº£ng nguá»“n, phÆ°Æ¡ng phÃ¡p an toÃ n hÆ¡n lÃ  viáº¿t dá»¯ liá»‡u ra tá»‡p vÄƒn báº£n bÃªn ngoÃ i, sau Ä‘Ã³ ghi láº¡i vÃ o báº£ng Ä‘Ã­ch.</li>
<li>Má»™t cÃ¡ch lÃ  sá»­ dá»¥ng lá»‡nh <code>mysqldump</code> Ä‘á»ƒ xuáº¥t dá»¯ liá»‡u thÃ nh má»™t táº­p há»£p cÃ¡c cÃ¢u lá»‡nh <code>INSERT</code>.</li>
<li>CÃ¡ch khÃ¡c lÃ  xuáº¥t trá»±c tiáº¿p káº¿t quáº£ thÃ nh tá»‡p <code>.csv</code>. MySQL cung cáº¥p cÃº phÃ¡p Ä‘á»ƒ xuáº¥t káº¿t quáº£ truy váº¥n ra thÆ° má»¥c cá»¥c bá»™ cá»§a mÃ¡y chá»§: <code>select * from db1.t where a&gt;900 into outfile '/server_tmp/t.csv'</code>; sau khi cÃ³ tá»‡p xuáº¥t <code>.csv</code>, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng lá»‡nh <code>load data</code> sau Ä‘Ã¢y Ä‘á»ƒ nháº­p dá»¯ liá»‡u vÃ o báº£ng Ä‘Ã­ch <code>db2.t</code>: <code>load data infile '/server_tmp/t.csv' into table db2.t;</code>.</li>
<li>Sao chÃ©p váº­t lÃ½: PhiÃªn báº£n MySQL 5.6 Ä‘Ã£ giá»›i thiá»‡u phÆ°Æ¡ng phÃ¡p khÃ´ng gian báº£ng cÃ³ thá»ƒ truyá»n táº£i (transportable tablespace), cÃ³ thá»ƒ thá»±c hiá»‡n sao chÃ©p váº­t lÃ½ báº£ng thÃ´ng qua xuáº¥t vÃ  nháº­p khÃ´ng gian báº£ng.</li>
</ul>
<h3>49. Lá»‡nh <code>grant</code> vÃ  <code>flush privileges</code></h3>
<ul>
<li>Lá»‡nh <code>grant</code> sáº½ Ä‘á»“ng thá»i sá»­a Ä‘á»•i báº£ng dá»¯ liá»‡u vÃ  bá»™ nhá»›, viá»‡c xÃ¡c Ä‘á»‹nh quyá»n sá»­ dá»¥ng dá»¯ liá»‡u trong bá»™ nhá»›, do Ä‘Ã³, sá»­ dá»¥ng Ä‘Ãºng cÃ¡ch khÃ´ng cáº§n thÃªm lá»‡nh <code>flush privileges</code>.</li>
<li>Lá»‡nh <code>flush privileges</code> sáº½ xÃ¢y dá»±ng láº¡i dá»¯ liá»‡u quyá»n bá»™ nhá»› tá»« dá»¯ liá»‡u báº£ng, do Ä‘Ã³, chá»‰ sá»­ dá»¥ng khi dá»¯ liá»‡u quyá»n cÃ³ thá»ƒ khÃ´ng nháº¥t quÃ¡n.</li>
</ul>
<h3>50. CÃ³ nÃªn sá»­ dá»¥ng báº£ng phÃ¢n vÃ¹ng?</h3>
<ul>
<li>PhÃ¢n vÃ¹ng khÃ´ng pháº£i lÃ  cÃ ng nhá» cÃ ng tá»‘t. Thá»±c táº¿, báº£ng Ä‘Æ¡n hoáº·c phÃ¢n vÃ¹ng Ä‘Æ¡n cÃ³ dá»¯ liá»‡u 10 triá»‡u dÃ²ng, náº¿u khÃ´ng cÃ³ chá»‰ má»¥c quÃ¡ lá»›n, Ä‘á»‘i vá»›i kháº£ nÄƒng pháº§n cá»©ng hiá»‡n táº¡i, váº«n Ä‘Æ°á»£c coi lÃ  báº£ng nhá».</li>
<li>CÅ©ng khÃ´ng cáº§n dá»± trá»¯ quÃ¡ nhiá»u phÃ¢n vÃ¹ng trÆ°á»›c, chá»‰ cáº§n táº¡o trÆ°á»›c khi sá»­ dá»¥ng. VÃ­ dá»¥, náº¿u phÃ¢n vÃ¹ng theo thÃ¡ng, vÃ o cuá»‘i nÄƒm cÃ³ thá»ƒ táº¡o trÆ°á»›c 12 phÃ¢n vÃ¹ng má»›i cho nÄƒm tiáº¿p theo. Äá»‘i vá»›i cÃ¡c phÃ¢n vÃ¹ng lá»‹ch sá»­ khÃ´ng cÃ³ dá»¯ liá»‡u, cáº§n xÃ³a bá» ká»‹p thá»i.</li>
</ul>
<h3>51. CÃ¡ch sá»­ dá»¥ng <code>join</code></h3>
<ul>
<li>Sá»­ dá»¥ng <code>left join</code>, báº£ng bÃªn trÃ¡i khÃ´ng nháº¥t thiáº¿t lÃ  báº£ng dáº«n.</li>
<li>Náº¿u cáº§n ngá»¯ nghÄ©a <code>left join</code>, khÃ´ng nÃªn Ä‘áº·t cÃ¡c trÆ°á»ng cá»§a báº£ng dáº«n vÃ o Ä‘iá»u kiá»‡n <code>where</code> Ä‘á»ƒ thá»±c hiá»‡n so sÃ¡nh báº±ng hoáº·c khÃ´ng báº±ng, mÃ  pháº£i viáº¿t trong <code>on</code>.</li>
<li>CÃ¢u lá»‡nh <code>group by</code> tiÃªu chuáº©n cáº§n cÃ³ hÃ m tá»•ng há»£p trong pháº§n <code>select</code>, vÃ­ dá»¥: <code>select a, count(*) from t group by a order by null;</code>.</li>
</ul>
<h3>52. MySQL cÃ³ nhá»¯ng ID tá»± tÄƒng nÃ o? CÃ¡c trÆ°á»ng há»£p sá»­ dá»¥ng cá»§a chÃºng lÃ  gÃ¬?</h3>
<ul>
<li>
<p>Khi ID tá»± tÄƒng cá»§a báº£ng Ä‘áº¡t giá»›i háº¡n, viá»‡c yÃªu cáº§u giÃ¡ trá»‹ sáº½ khÃ´ng thay Ä‘á»•i, dáº«n Ä‘áº¿n lá»—i xung Ä‘á»™t khÃ³a chÃ­nh khi chÃ¨n dá»¯ liá»‡u liÃªn tá»¥c.</p>
</li>
<li>
<p>Khi <code>row_id</code> Ä‘áº¡t giá»›i háº¡n, sáº½ quay vá» 0 vÃ  tÄƒng láº¡i, náº¿u xuáº¥t hiá»‡n <code>row_id</code> trÃ¹ng láº·p, dá»¯ liá»‡u ghi sau sáº½ ghi Ä‘Ã¨ dá»¯ liá»‡u trÆ°á»›c Ä‘Ã³.</p>
</li>
<li>
<p><code>Xid</code> chá»‰ cáº§n khÃ´ng xuáº¥t hiá»‡n giÃ¡ trá»‹ trÃ¹ng láº·p trong cÃ¹ng má»™t tá»‡p binlog lÃ  Ä‘Æ°á»£c, lÃ½ thuyáº¿t cÃ³ thá»ƒ xuáº¥t hiá»‡n giÃ¡ trá»‹ trÃ¹ng láº·p nhÆ°ng xÃ¡c suáº¥t cá»±c nhá», cÃ³ thá»ƒ bá» qua.</p>
</li>
<li>
<p>GiÃ¡ trá»‹ tÄƒng cá»§a <code>max_trx_id</code> trong InnoDB sáº½ Ä‘Æ°á»£c lÆ°u láº¡i má»—i láº§n MySQL khá»Ÿi Ä‘á»™ng láº¡i.</p>
</li>
<li>
<p><code>Xid</code> Ä‘Æ°á»£c duy trÃ¬ bá»Ÿi lá»›p server. InnoDB sá»­ dá»¥ng <code>Xid</code> Ä‘á»ƒ lÃ m liÃªn káº¿t giá»¯a giao dá»‹ch InnoDB vÃ  server. Tuy nhiÃªn, <code>trx_id</code> cá»§a InnoDB lÃ  do InnoDB tá»± duy trÃ¬.</p>
</li>
<li>
<p><code>thread_id</code> lÃ  ID tá»± tÄƒng phá»• biáº¿n nháº¥t trong quÃ¡ trÃ¬nh sá»­ dá»¥ng vÃ  cÅ©ng Ä‘Æ°á»£c xá»­ lÃ½ tá»‘t nháº¥t, sá»­ dá»¥ng thuáº­t toÃ¡n <code>insert_unique</code>.</p>
</li>
</ul>
<h3>53. <code>Xid</code> trong MySQL Ä‘Æ°á»£c táº¡o ra nhÆ° tháº¿ nÃ o?</h3>
<p><strong>MySQL ná»™i bá»™ duy trÃ¬ má»™t biáº¿n toÃ n cá»¥c <code>global_query_id</code>, má»—i láº§n thá»±c hiá»‡n cÃ¢u lá»‡nh (bao gá»“m cáº£ cÃ¢u lá»‡nh <code>select</code>) sáº½ gÃ¡n giÃ¡ trá»‹ cá»§a nÃ³ cho <code>Query_id</code>, sau Ä‘Ã³ tÄƒng biáº¿n nÃ y lÃªn 1. Náº¿u cÃ¢u lá»‡nh hiá»‡n táº¡i lÃ  cÃ¢u lá»‡nh Ä‘áº§u tiÃªn cá»§a giao dá»‹ch, MySQL cÅ©ng sáº½ gÃ¡n giÃ¡ trá»‹ <code>Query_id</code> cho <code>Xid</code> cá»§a giao dá»‹ch nÃ y.</strong></p>
<p><code>global_query_id</code> lÃ  má»™t biáº¿n trong bá»™ nhá»›, sáº½ Ä‘Æ°á»£c Ä‘áº·t láº¡i vá» 0 khi khá»Ÿi Ä‘á»™ng láº¡i. Do Ä‘Ã³, trong cÃ¹ng má»™t phiÃªn báº£n cÆ¡ sá»Ÿ dá»¯ liá»‡u, <code>Xid</code> cá»§a cÃ¡c giao dá»‹ch khÃ¡c nhau cÃ³ thá»ƒ trÃ¹ng láº·p. Tuy nhiÃªn, MySQL sáº½ táº¡o ra tá»‡p binlog má»›i khi khá»Ÿi Ä‘á»™ng láº¡i, Ä‘áº£m báº£o ráº±ng trong cÃ¹ng má»™t tá»‡p binlog, <code>Xid</code> lÃ  duy nháº¥t.</p>
<h2>LiÃªn quan Ä‘áº¿n khÃ³a</h2>
<h3>54. NÃ³i vá» khÃ³a cá»§a MySQL</h3>
<ul>
<li>MySQL sá»­ dá»¥ng nhiá»u loáº¡i khÃ³a á»Ÿ cáº£ lá»›p server vÃ  lá»›p lÆ°u trá»¯.</li>
<li>Lá»›p server cá»§a MySQL cáº§n nháº¯c Ä‘áº¿n hai loáº¡i khÃ³a: khÃ³a MDL (metadata lock) vÃ  khÃ³a báº£ng (Table Lock).</li>
<li>MDL cÃ²n Ä‘Æ°á»£c gá»i lÃ  khÃ³a siÃªu dá»¯ liá»‡u. SiÃªu dá»¯ liá»‡u lÃ  báº¥t ká»³ thÃ´ng tin nÃ o mÃ´ táº£ cÆ¡ sá»Ÿ dá»¯ liá»‡u, cháº³ng háº¡n nhÆ° cáº¥u trÃºc báº£ng, cáº¥u trÃºc cÆ¡ sá»Ÿ dá»¯ liá»‡u, v.v. Táº¡i sao cáº§n khÃ³a MDL?</li>
<li>Chá»§ yáº¿u giáº£i quyáº¿t hai váº¥n Ä‘á»: váº¥n Ä‘á» cÃ¡ch ly giao dá»‹ch vÃ  váº¥n Ä‘á» sao chÃ©p dá»¯ liá»‡u.</li>
<li>InnoDB cÃ³ nÄƒm loáº¡i khÃ³a báº£ng: IS (Ã½ Ä‘á»‹nh Ä‘á»c), IX (Ã½ Ä‘á»‹nh viáº¿t), S (Ä‘á»c), X (viáº¿t), AUTO-INC.</li>
<li>Khi thá»±c hiá»‡n cÃ¡c lá»‡nh select/insert/delete/update trÃªn báº£ng sáº½ khÃ´ng thÃªm khÃ³a báº£ng.</li>
<li>IS vÃ  IX dÃ¹ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh xem trong báº£ng cÃ³ báº£n ghi nÃ o Ä‘Ã£ Ä‘Æ°á»£c khÃ³a hay khÃ´ng.</li>
<li>KhÃ³a tá»± tÄƒng (AUTO-INC) Ä‘áº£m báº£o giÃ¡ trá»‹ tá»± tÄƒng cá»§a khÃ³a chÃ­nh, á»Ÿ cáº¥p Ä‘á»™ cÃ¢u lá»‡nh: khi thÃªm cá»™t AUTO_INCREMENT vÃ o báº£ng, má»—i láº§n chÃ¨n báº£n ghi, giÃ¡ trá»‹ cá»§a cá»™t nÃ y sáº½ tá»± Ä‘á»™ng tÄƒng lÃªn.</li>
<li>InnoDB cÃ³ bá»‘n loáº¡i khÃ³a hÃ ng:
<ul>
<li>RecordLock: KhÃ³a báº£n ghi.</li>
<li>GapLock: KhÃ³a khoáº£ng cÃ¡ch Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» Ä‘á»c áº£o; khi má»™t truy váº¥n trÆ°á»›c Ä‘Ã³ khÃ´ng tÃ¬m tháº¥y dá»¯ liá»‡u nhÆ°ng truy váº¥n sau Ä‘Ã³ láº¡i tÃ¬m tháº¥y, Ä‘iá»u nÃ y xáº£y ra do cÃ³ giao dá»‹ch B chÃ¨n dá»¯ liá»‡u giá»¯a hai láº§n truy váº¥n cá»§a giao dá»‹ch A.</li>
<li>Next-KeyLock: KhÃ³a báº£n ghi hiá»‡n táº¡i vÃ  ngÄƒn cháº·n giao dá»‹ch khÃ¡c chÃ¨n báº£n ghi má»›i vÃ o khoáº£ng cÃ¡ch trÆ°á»›c báº£n ghi nÃ y.</li>
<li>InsertIntentionLock: KhÃ³a Ã½ Ä‘á»‹nh chÃ¨n; náº¿u nhiá»u giao dá»‹ch chÃ¨n vÃ o cÃ¹ng má»™t khoáº£ng cÃ¡ch mÃ  khÃ´ng cÃ¹ng vá»‹ trÃ­, thÃ¬ khÃ´ng cáº§n chá» Ä‘á»£i.</li>
</ul>
</li>
<li>Lá»±a chá»n giá»¯a khÃ³a hÃ ng vÃ  khÃ³a báº£ng:
<ul>
<li>Sá»­ dá»¥ng khÃ³a hÃ ng khi thá»±c hiá»‡n quÃ©t toÃ n bá»™ báº£ng.</li>
</ul>
</li>
</ul>
<h3>55. Tháº¿ nÃ o lÃ  Ä‘á»c áº£o (phantom read)?</h3>
<ul>
<li>Äá»c áº£o xáº£y ra khi trong cÃ¹ng má»™t giao dá»‹ch, cÃ³ hai láº§n truy váº¥n cÃ¹ng má»™t pháº¡m vi dá»¯ liá»‡u, nhÆ°ng láº§n thá»© hai tháº¥y dá»¯ liá»‡u mÃ  láº§n Ä‘áº§u khÃ´ng tháº¥y.</li>
</ul>
<p>CÃ¡c tÃ¬nh huá»‘ng dáº«n Ä‘áº¿n Ä‘á»c áº£o:</p>
<ul>
<li>Má»©c cÃ¡ch ly cá»§a giao dá»‹ch lÃ  Äá»c láº·p láº¡i (Repeatable Read), vÃ  lÃ  Ä‘á»c hiá»‡n táº¡i (Read commited).</li>
<li>Äá»c áº£o Ä‘á» cáº­p Ä‘áº¿n cÃ¡c hÃ ng má»›i Ä‘Æ°á»£c chÃ¨n.</li>
</ul>
<p>Váº¥n Ä‘á» do Ä‘á»c áº£o gÃ¢y ra:</p>
<ul>
<li>PhÃ¡ vá»¡ ngá»¯ nghÄ©a khÃ³a hÃ ng.</li>
<li>PhÃ¡ vá»¡ tÃ­nh nháº¥t quÃ¡n dá»¯ liá»‡u.</li>
</ul>
<p>Giáº£i phÃ¡p:</p>
<ul>
<li>ThÃªm khÃ³a khoáº£ng cÃ¡ch Ä‘á»ƒ khÃ³a khoáº£ng cÃ¡ch giá»¯a cÃ¡c hÃ ng, ngÄƒn cháº·n thao tÃ¡c chÃ¨n má»›i.</li>
<li>Váº¥n Ä‘á» do Ä‘Ã³ gÃ¢y ra: giáº£m Ä‘á»™ Ä‘á»“ng thá»i, cÃ³ thá»ƒ dáº«n Ä‘áº¿n deadlock.</li>
</ul>
<h2>Nhá»¯ng cÃ¢u há»i khÃ¡c</h2>
<h3>56. Táº¡i sao MySQL láº¡i thá»‰nh thoáº£ng cháº­m láº¡i?</h3>
<ul>
<li>CÃ¡c trang báº©n (dirty page) sáº½ Ä‘Æ°á»£c flush tá»± Ä‘á»™ng bá»Ÿi cÃ¡c luá»“ng ná»n, hoáº·c do loáº¡i bá» trang dá»¯ liá»‡u mÃ  gÃ¢y ra flush. QuÃ¡ trÃ¬nh flush trang báº©n sá»­ dá»¥ng tÃ i nguyÃªn, cÃ³ thá»ƒ lÃ m tÄƒng thá»i gian pháº£n há»“i cá»§a cÃ¡c lá»‡nh cáº­p nháº­t vÃ  truy váº¥n.</li>
</ul>
<h3>57. Táº¡i sao sau khi xÃ³a báº£ng, kÃ­ch thÆ°á»›c tá»‡p báº£ng váº«n khÃ´ng thay Ä‘á»•i?</h3>
<ul>
<li>Sau khi xÃ³a dá»¯ liá»‡u, má»™t trang trong InnoDB cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  cÃ³ thá»ƒ sá»­ dá»¥ng láº¡i.</li>
<li>Lá»‡nh delete xÃ³a toÃ n bá»™ dá»¯ liá»‡u trong báº£ng, káº¿t quáº£ lÃ , táº¥t cáº£ cÃ¡c trang dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  cÃ³ thá»ƒ sá»­ dá»¥ng láº¡i. NhÆ°ng trÃªn Ä‘Ä©a, kÃ­ch thÆ°á»›c tá»‡p sáº½ khÃ´ng thay Ä‘á»•i.</li>
<li>CÃ¡c báº£ng Ä‘Ã£ tráº£i qua nhiá»u láº§n thÃªm, xÃ³a, sá»­a Ä‘á»•i cÃ³ thá»ƒ cÃ³ cÃ¡c khoáº£ng trá»‘ng. CÃ¡c khoáº£ng trá»‘ng nÃ y cÅ©ng chiáº¿m dung lÆ°á»£ng, vÃ¬ váº­y, náº¿u cÃ³ thá»ƒ loáº¡i bá» cÃ¡c khoáº£ng trá»‘ng nÃ y, ta cÃ³ thá»ƒ giáº£m kÃ­ch thÆ°á»›c báº£ng.</li>
<li>Viá»‡c xÃ¢y dá»±ng láº¡i báº£ng cÃ³ thá»ƒ Ä‘áº¡t Ä‘Æ°á»£c má»¥c tiÃªu nÃ y. CÃ³ thá»ƒ sá»­ dá»¥ng lá»‡nh <code>alter table A engine=InnoDB</code> Ä‘á»ƒ xÃ¢y dá»±ng láº¡i báº£ng.</li>
</ul>
<h3>58. CÃ¡ch thá»±c hiá»‡n <code>count(*)</code> vÃ  so sÃ¡nh cÃ¡c loáº¡i count</h3>
<ul>
<li>Äá»‘i vá»›i <code>count(id chÃ­nh)</code>, InnoDB sáº½ duyá»‡t toÃ n bá»™ báº£ng, láº¥y ra giÃ¡ trá»‹ id cá»§a má»—i hÃ ng vÃ  tráº£ vá» cho lá»›p server. Lá»›p server sau Ä‘Ã³ kiá»ƒm tra id vÃ  cá»™ng dá»“n.</li>
<li>Äá»‘i vá»›i <code>count(1)</code>, InnoDB duyá»‡t toÃ n bá»™ báº£ng nhÆ°ng khÃ´ng láº¥y giÃ¡ trá»‹. Lá»›p server nháº­n má»—i hÃ ng vÃ  chÃ¨n má»™t sá»‘ â€œ1â€ vÃ o, kiá»ƒm tra khÃ´ng null vÃ  cá»™ng dá»“n. So vá»›i <code>count(id chÃ­nh)</code>, <code>count(1)</code> nhanh hÆ¡n vÃ¬ khÃ´ng cáº§n láº¥y vÃ  sao chÃ©p giÃ¡ trá»‹ trÆ°á»ng.</li>
<li>Äá»‘i vá»›i <code>count(trÆ°á»ng)</code>, náº¿u trÆ°á»ng Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a lÃ  not null, má»—i hÃ ng Ä‘Æ°á»£c Ä‘á»c vÃ  kiá»ƒm tra khÃ´ng null rá»“i cá»™ng dá»“n. Náº¿u trÆ°á»ng cÃ³ thá»ƒ null, pháº£i láº¥y giÃ¡ trá»‹ ra kiá»ƒm tra trÆ°á»›c khi cá»™ng dá»“n.</li>
<li><code>count(*)</code> Ä‘Æ°á»£c tá»‘i Æ°u hÃ³a, khÃ´ng láº¥y giÃ¡ trá»‹ mÃ  chá»‰ cá»™ng dá»“n.</li>
<li>Káº¿t luáº­n: hiá»‡u suáº¥t tá»« tháº¥p Ä‘áº¿n cao lÃ  <code>count(trÆ°á»ng) &lt; count(id chÃ­nh) &lt; count(1) â‰ˆ count(*)</code>, do Ä‘Ã³, nÃªn sá»­ dá»¥ng <code>count(*)</code> khi cÃ³ thá»ƒ.</li>
</ul>
<h3>59. NguyÃªn lÃ½ sáº¯p xáº¿p <code>orderby</code></h3>
<ul>
<li>MySQL sáº½ cáº¥p phÃ¡t má»™t bá»™ nhá»› (sort-buffer) cho má»—i luá»“ng Ä‘á»ƒ sáº¯p xáº¿p, kÃ­ch thÆ°á»›c lÃ  sort_buffer_size.</li>
<li>Náº¿u lÆ°á»£ng dá»¯ liá»‡u sáº¯p xáº¿p nhá» hÆ¡n sort_buffer_size, viá»‡c sáº¯p xáº¿p sáº½ hoÃ n thÃ nh trong bá»™ nhá»›.</li>
<li>CÃ³ hai loáº¡i sáº¯p xáº¿p ná»™i bá»™:
<ul>
<li>Sáº¯p xáº¿p toÃ n bá»™ trÆ°á»ng: tÃ¬m id chÃ­nh thá»a Ä‘iá»u kiá»‡n trong cÃ¢y chá»‰ má»¥c, láº¥y dá»¯ liá»‡u vÃ  Ä‘áº·t vÃ o sort_buffer, sau Ä‘Ã³ sáº¯p xáº¿p.</li>
<li>Sáº¯p xáº¿p rowid: kiá»ƒm soÃ¡t Ä‘á»™ dÃ i dá»¯ liá»‡u sáº¯p xáº¿p Ä‘á»ƒ tá»‘i Ä‘a hÃ³a sá»‘ lÆ°á»£ng dá»¯ liá»‡u trong sort_buffer.</li>
</ul>
</li>
<li>Náº¿u lÆ°á»£ng dá»¯ liá»‡u lá»›n, khÃ´ng Ä‘á»§ bá»™ nhá»›, sáº½ sá»­ dá»¥ng tá»‡p táº¡m thá»i trÃªn Ä‘Ä©a Ä‘á»ƒ há»— trá»£ sáº¯p xáº¿p, gá»i lÃ  sáº¯p xáº¿p bÃªn ngoÃ i.</li>
<li>Sáº¯p xáº¿p bÃªn ngoÃ i: MySQL sáº½ chia dá»¯ liá»‡u thÃ nh nhiá»u tá»‡p táº¡m thá»i, má»—i tá»‡p sáº¯p xáº¿p riÃªng rá»“i há»£p nháº¥t thÃ nh má»™t tá»‡p lá»›n.</li>
</ul>
<h3>60. CÃ¡ch sá»­ dá»¥ng MySQL Ä‘á»ƒ chá»n ngáº«u nhiÃªn má»™t cÃ¡ch hiá»‡u quáº£</h3>
<ul>
<li>Láº¥y ngáº«u nhiÃªn Y1, Y2, Y3, sau Ä‘Ã³ tÃ­nh Ymax, Ymin.</li>
<li>Sau khi cÃ³ id, tÃ­nh toÃ¡n Y1, Y2, Y3 tÆ°Æ¡ng á»©ng vá»›i ba id, cuá»‘i cÃ¹ng <code>select * from t where id in (id1, id2, id3)</code>, sá»‘ hÃ ng Ä‘Æ°á»£c quÃ©t lÃ  C + Ymax + 3.</li>
</ul>
<div class="language-mysql" data-ext="mysql" data-title="mysql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>mysql&gt; select count(*) into @C from t;</span></span>
<span class="line"><span>set @Y1 = floor(@C * rand());</span></span>
<span class="line"><span>set @Y2 = floor(@C * rand());</span></span>
<span class="line"><span>set @Y3 = floor(@C * rand());</span></span>
<span class="line"><span>Ymax = max(Y1,Y2,Y3)</span></span>
<span class="line"><span>Ymin = min(Y1,Y2,Y3)</span></span>
<span class="line"><span>select id from t limit Ymin, (Ymax - Ymin)</span></span></code></pre>
</div>]]></content:encoded>
      <enclosure url="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/herongwei/mysql-a2b8e123-41cb-4717-9225-3a8b49197004.png" type="image/png"/>
    </item>
    <item>
      <title>Redis Interview</title>
      <link>https://vanhung4499.github.io/interview/knowledge/redis-qa.html</link>
      <guid>https://vanhung4499.github.io/interview/knowledge/redis-qa.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Redis Interview</source>
      <description>Redis: 12 cÃ¢u há»i phá»ng váº¥n phá»• biáº¿n Redis lÃ  má»™t chá»§ Ä‘á» khÃ´ng thá»ƒ trÃ¡nh khá»i trong cÃ¡c buá»•i phá»ng váº¥n. Náº¿u báº¡n ghi ráº±ng Ä‘Ã£ sá»­ dá»¥ng Redis trong CV cá»§a mÃ¬nh, cháº¯c cháº¯n sáº½ khÃ´ng t...</description>
      <category>interview</category>
      <pubDate>Fri, 05 Jul 2024 10:10:42 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Redis lÃ  má»™t chá»§ Ä‘á» khÃ´ng thá»ƒ trÃ¡nh khá»i trong cÃ¡c buá»•i phá»ng váº¥n. Náº¿u báº¡n ghi ráº±ng Ä‘Ã£ sá»­ dá»¥ng Redis trong CV cá»§a mÃ¬nh, cháº¯c cháº¯n sáº½ khÃ´ng thá»ƒ thoÃ¡t khá»i nhá»¯ng cÃ¢u há»i vá» nÃ³. HÃ´m nay, chÃºng ta sáº½ mÃ´ phá»ng cÃ¡ch má»™t nhÃ  tuyá»ƒn dá»¥ng tá»«ng bÆ°á»›c Ä‘Ã¡nh giÃ¡ kiáº¿n thá»©c cá»§a á»©ng viÃªn vá» Redis.</p>
<p>á»¨ng viÃªn: Xin chÃ o, tÃ´i Ä‘áº¿n Ä‘á»ƒ phá»ng váº¥n.</p>
<p>NhÃ  tuyá»ƒn dá»¥ng: ChÃ o á»¨ng viÃªn. TÃ´i Ä‘Ã£ xem CV cá»§a báº¡n vÃ  tháº¥y ráº±ng báº¡n thÃ nh tháº¡o Redis, váº­y tÃ´i sáº½ há»i báº¡n má»™t vÃ i cÃ¢u há»i liÃªn quan Ä‘áº¿n Redis. Äáº§u tiÃªn, Redis lÃ  Ä‘Æ¡n luá»“ng hay Ä‘a luá»“ng?</p>
<p>á»¨ng viÃªn:</p>
<p>Redis sá»­ dá»¥ng mÃ´ hÃ¬nh luá»“ng khÃ¡c nhau á»Ÿ cÃ¡c phiÃªn báº£n khÃ¡c nhau. TrÆ°á»›c phiÃªn báº£n Redis 4.0, nÃ³ sá»­ dá»¥ng mÃ´ hÃ¬nh Ä‘Æ¡n luá»“ng, nhÆ°ng sau phiÃªn báº£n 4.0, Ä‘Ã£ thÃªm há»— trá»£ Ä‘a luá»“ng.</p>
<p>TrÆ°á»›c phiÃªn báº£n 4.0, máº·c dÃ¹ nÃ³i ráº±ng Redis lÃ  Ä‘Æ¡n luá»“ng, nhÆ°ng chá»‰ cÃ³ nghÄ©a lÃ  cÃ¡c thao tÃ¡c I/O máº¡ng vÃ  cÃ¡c lá»‡nh Set vÃ  Get Ä‘Æ°á»£c thá»±c hiá»‡n bá»Ÿi má»™t luá»“ng duy nháº¥t. Tuy nhiÃªn, cÃ¡c chá»©c nÄƒng nhÆ° lÆ°u trá»¯ dá»¯ liá»‡u, Ä‘á»“ng bá»™ hÃ³a cá»¥m váº«n sá»­ dá»¥ng cÃ¡c luá»“ng khÃ¡c.</p>
<p>Sau phiÃªn báº£n 4.0, thÃªm há»— trá»£ Ä‘a luá»“ng chá»§ yáº¿u á»Ÿ cÃ¡c chá»©c nÄƒng xÃ³a dá»¯ liá»‡u khÃ´ng Ä‘á»“ng bá»™, vÃ­ dá»¥ nhÆ° unlink key, flushdb async, flushall async, v.v.</p>
<p>NhÃ  tuyá»ƒn dá»¥ng: Tráº£ lá»i ráº¥t tá»‘t. Váº­y táº¡i sao Redis láº¡i chá»n sá»­ dá»¥ng Ä‘Æ¡n luá»“ng trÆ°á»›c phiÃªn báº£n 4.0? VÃ  táº¡i sao Ä‘Æ¡n luá»“ng láº¡i nhanh nhÆ° váº­y?</p>
<p>á»¨ng viÃªn:</p>
<p>Chá»n Ä‘Æ¡n luá»“ng chá»§ yáº¿u vÃ¬ nÃ³ Ä‘Æ¡n giáº£n, khÃ´ng cÃ³ sá»± cáº¡nh tranh cá»§a cÃ¡c khÃ³a, cÃ³ thá»ƒ hoÃ n thÃ nh má»i thao tÃ¡c mÃ  khÃ´ng cáº§n khÃ³a, khÃ´ng xáº£y ra tÃ¬nh tráº¡ng cháº¿t chá»‘t vÃ  khÃ´ng tá»‘n chi phÃ­ thá»i gian vÃ  hiá»‡u nÄƒng do chuyá»ƒn Ä‘á»•i luá»“ng. Tuy nhiÃªn, Ä‘Æ¡n luá»“ng khÃ´ng thá»ƒ táº­n dá»¥ng háº¿t hiá»‡u nÄƒng cá»§a CPU Ä‘a nhÃ¢n.</p>
<p>LÃ½ do táº¡i sao Ä‘Æ¡n luá»“ng láº¡i nhanh, tÃ´i nghÄ© lÃ  do cÃ¡c nguyÃªn nhÃ¢n sau:</p>
<ul>
<li>Pháº§n lá»›n cÃ¡c thao tÃ¡c cá»§a Redis Ä‘Æ°á»£c thá»±c hiá»‡n trong bá»™ nhá»›, vÃ  hiá»‡u suáº¥t thá»±c thi trong bá»™ nhá»› vá»‘n Ä‘Ã£ nhanh, vá»›i cÃ¡c cáº¥u trÃºc dá»¯ liá»‡u hiá»‡u quáº£ nhÆ° báº£ng bÄƒm vÃ  báº£ng nháº£y.</li>
<li>Sá»­ dá»¥ng Ä‘Æ¡n luá»“ng trÃ¡nh Ä‘Æ°á»£c sá»± cáº¡nh tranh cá»§a Ä‘a luá»“ng, tiáº¿t kiá»‡m thá»i gian vÃ  hiá»‡u nÄƒng do chuyá»ƒn Ä‘á»•i luá»“ng, vÃ  khÃ´ng xáº£y ra tÃ¬nh tráº¡ng cháº¿t chá»‘t.</li>
<li>Sá»­ dá»¥ng cÆ¡ cháº¿ I/O Ä‘a Ä‘Æ°á»ng Ä‘á»ƒ xá»­ lÃ½ nhiá»u yÃªu cáº§u Socket cá»§a khÃ¡ch hÃ ng, vÃ¬ Ä‘Ã¢y lÃ  mÃ´ hÃ¬nh I/O khÃ´ng cháº·n, giÃºp Redis cÃ³ thá»ƒ giao tiáº¿p máº¡ng hiá»‡u quáº£, vÃ  quÃ¡ trÃ¬nh Ä‘á»c ghi I/O khÃ´ng bá»‹ cháº·n.</li>
</ul>
<p>NhÃ  tuyá»ƒn dá»¥ng: Tá»‘t láº¯m, váº­y Redis lÃ m tháº¿ nÃ o Ä‘á»ƒ Ä‘áº£m báº£o dá»¯ liá»‡u khÃ´ng bá»‹ máº¥t?</p>
<p>á»¨ng viÃªn:</p>
<p>Dá»¯ liá»‡u Redis Ä‘Æ°á»£c lÆ°u trá»¯ trong bá»™ nhá»›, Ä‘á»ƒ Ä‘áº£m báº£o khÃ´ng bá»‹ máº¥t, cáº§n lÆ°u dá»¯ liá»‡u tá»« bá»™ nhá»› xuá»‘ng Ä‘Ä©a, Ä‘á»ƒ cÃ³ thá»ƒ khÃ´i phá»¥c láº¡i dá»¯ liá»‡u gá»‘c tá»« Ä‘Ä©a sau khi khá»Ÿi Ä‘á»™ng láº¡i mÃ¡y chá»§. ÄÃ¢y lÃ  viá»‡c lÆ°u trá»¯ dá»¯ liá»‡u cá»§a Redis. Redis cÃ³ ba cÃ¡ch lÆ°u trá»¯ dá»¯ liá»‡u.</p>
<p><strong>1) Nháº­t kÃ½ AOF (Append Only File, ghi ná»‘i thÃªm vÃ o tá»‡p)</strong>: Ghi láº¡i táº¥t cáº£ cÃ¡c lá»‡nh thao tÃ¡c vÃ  thÃªm vÃ o tá»‡p dÆ°á»›i dáº¡ng vÄƒn báº£n.</p>
<p><strong>2) áº¢nh chá»¥p RDB (Redis DataBase)</strong>: Ghi dá»¯ liá»‡u bá»™ nhá»› vÃ o Ä‘Ä©a dÆ°á»›i dáº¡ng nhá»‹ phÃ¢n táº¡i má»™t thá»i Ä‘iá»ƒm cá»¥ thá»ƒ.</p>
<p><strong>3) LÆ°u trá»¯ há»—n há»£p</strong>: Redis 4.0 bá»• sung cÃ¡ch lÆ°u trá»¯ há»—n há»£p, tÃ­ch há»£p Æ°u Ä‘iá»ƒm cá»§a cáº£ RDB vÃ  AOF.</p>
<p>NhÃ  tuyá»ƒn dá»¥ng: Váº­y hÃ£y giáº£i thÃ­ch nguyÃªn lÃ½ cá»§a AOF vÃ  RDB.</p>
<p>á»¨ng viÃªn:</p>
<p>AOF sá»­ dá»¥ng cÃ¡ch ghi nháº­t kÃ½ sau khi ghi dá»¯ liá»‡u. Redis thá»±c hiá»‡n lá»‡nh vÃ  ghi dá»¯ liá»‡u vÃ o bá»™ nhá»› trÆ°á»›c, sau Ä‘Ã³ ghi nháº­t kÃ½ vÃ o tá»‡p. AOF ghi láº¡i lá»‡nh thao tÃ¡c, khÃ´ng pháº£i dá»¯ liá»‡u thá»±c táº¿. Náº¿u sá»­ dá»¥ng AOF Ä‘á»ƒ phá»¥c há»“i lá»—i, cáº§n thá»±c hiá»‡n láº¡i toÃ n bá»™ nháº­t kÃ½.</p>
<p>RDB sá»­ dá»¥ng cÃ¡ch chá»¥p áº£nh bá»™ nhá»›, ghi láº¡i dá»¯ liá»‡u táº¡i má»™t thá»i Ä‘iá»ƒm cá»¥ thá»ƒ thay vÃ¬ lá»‡nh thao tÃ¡c. Do Ä‘Ã³, khi phá»¥c há»“i lá»—i báº±ng RDB, chá»‰ cáº§n Ä‘á»c tá»‡p RDB vÃ o bá»™ nhá»›, giÃºp phá»¥c há»“i nhanh chÃ³ng.</p>
<p>NhÃ  tuyá»ƒn dá»¥ng: Báº¡n vá»«a Ä‘á» cáº­p ráº±ng AOF sá»­ dá»¥ng cÃ¡ch "ghi nháº­t kÃ½ sau khi ghi dá»¯ liá»‡u", trong khi MySQL chÃºng ta thÆ°á»ng dÃ¹ng láº¡i sá»­ dá»¥ng "ghi nháº­t kÃ½ trÆ°á»›c khi ghi dá»¯ liá»‡u". Váº­y táº¡i sao Redis láº¡i thá»±c hiá»‡n lá»‡nh trÆ°á»›c, sau Ä‘Ã³ má»›i ghi dá»¯ liá»‡u vÃ o nháº­t kÃ½?</p>
<p>á»¨ng viÃªn: Äiá»u nÃ y chá»§ yáº¿u lÃ  do Redis khÃ´ng kiá»ƒm tra cÃº phÃ¡p lá»‡nh trÆ°á»›c khi ghi vÃ o nháº­t kÃ½, nÃªn chá»‰ ghi láº¡i cÃ¡c lá»‡nh thá»±c hiá»‡n thÃ nh cÃ´ng, trÃ¡nh ghi láº¡i cÃ¡c lá»‡nh sai, vÃ  viá»‡c ghi nháº­t kÃ½ sau khi thá»±c hiá»‡n lá»‡nh khÃ´ng gÃ¢y cháº·n cÃ¡c thao tÃ¡c ghi hiá»‡n táº¡i.</p>
<p>NhÃ  tuyá»ƒn dá»¥ng: Váº­y viá»‡c ghi nháº­t kÃ½ sau khi thá»±c hiá»‡n lá»‡nh cÃ³ rá»§i ro gÃ¬ khÃ´ng?</p>
<p>á»¨ng viÃªn: TÃ´i... cÃ¡i nÃ y tÃ´i khÃ´ng biáº¿t.</p>
<p>NhÃ  tuyá»ƒn dá»¥ng:</p>
<p>ÄÆ°á»£c rá»“i, ghi nháº­t kÃ½ sau khi thá»±c hiá»‡n lá»‡nh cÃ³ hai rá»§i ro chÃ­nh:</p>
<ul>
<li><strong>Dá»¯ liá»‡u cÃ³ thá»ƒ bá»‹ máº¥t</strong>: Náº¿u Redis vá»«a thá»±c hiá»‡n xong lá»‡nh vÃ  gáº·p sá»± cá»‘, sáº½ cÃ³ nguy cÆ¡ máº¥t lá»‡nh Ä‘Ã³.</li>
<li><strong>CÃ³ thá»ƒ cháº·n cÃ¡c thao tÃ¡c khÃ¡c</strong>: Nháº­t kÃ½ AOF cÅ©ng Ä‘Æ°á»£c thá»±c hiá»‡n trong luá»“ng chÃ­nh, vÃ¬ váº­y khi Redis ghi tá»‡p nháº­t kÃ½ vÃ o Ä‘Ä©a, sáº½ cháº·n cÃ¡c thao tÃ¡c tiáº¿p theo.</li>
</ul>
<p>TÃ´i cÃ³ má»™t cÃ¢u há»i ná»¯a, khi RDB chá»¥p áº£nh cÃ³ cháº·n luá»“ng khÃ´ng?</p>
<p>á»¨ng viÃªn: Redis cung cáº¥p hai lá»‡nh Ä‘á»ƒ táº¡o tá»‡p áº£nh chá»¥p RDB, lÃ  save vÃ  bgsave. Lá»‡nh save thá»±c hiá»‡n trong luá»“ng chÃ­nh, sáº½ gÃ¢y cháº·n. Lá»‡nh bgsave sáº½ táº¡o má»™t tiáº¿n trÃ¬nh con Ä‘á»ƒ thá»±c hiá»‡n viá»‡c ghi tá»‡p RDB, trÃ¡nh cháº·n luá»“ng chÃ­nh, Ä‘Ã¢y lÃ  cáº¥u hÃ¬nh máº·c Ä‘á»‹nh cá»§a Redis RDB.</p>
<p>NhÃ  tuyá»ƒn dá»¥ng: Khi táº¡o áº£nh chá»¥p nhanh RDB, dá»¯ liá»‡u cÃ³ thá»ƒ bá»‹ thay Ä‘á»•i khÃ´ng?</p>
<p>á»¨ng viÃªn: Lá»‡nh save lÃ  Ä‘á»“ng bá»™ vÃ  sáº½ cháº·n cÃ¡c lá»‡nh cá»§a khÃ¡ch hÃ ng, nhÆ°ng khi sá»­ dá»¥ng lá»‡nh bgsave, dá»¯ liá»‡u váº«n cÃ³ thá»ƒ bá»‹ thay Ä‘á»•i.</p>
<p>NhÃ  tuyá»ƒn dá»¥ng: Váº­y Redis giáº£i quyáº¿t váº¥n Ä‘á» cho phÃ©p dá»¯ liá»‡u thay Ä‘á»•i trong khi bgsave táº¡o áº£nh chá»¥p nhanh nhÆ° tháº¿ nÃ o?</p>
<p>á»¨ng viÃªn: Ã€, cÃ¡i nÃ y tÃ´i khÃ´ng rÃµ láº¯m...</p>
<p>NhÃ  tuyá»ƒn dá»¥ng:</p>
<p>Äiá»u nÃ y chá»§ yáº¿u Ä‘Æ°á»£c thá»±c hiá»‡n thÃ´ng qua luá»“ng con cá»§a bgsave, cá»¥ thá»ƒ nhÆ° sau:</p>
<ul>
<li>Náº¿u luá»“ng chÃ­nh thá»±c hiá»‡n thao tÃ¡c Ä‘á»c, luá»“ng chÃ­nh vÃ  luá»“ng con bgsave sáº½ khÃ´ng áº£nh hÆ°á»Ÿng láº«n nhau.</li>
<li>Náº¿u luá»“ng chÃ­nh thá»±c hiá»‡n thao tÃ¡c ghi, dá»¯ liá»‡u bá»‹ thay Ä‘á»•i sáº½ Ä‘Æ°á»£c sao chÃ©p má»™t báº£n, sau Ä‘Ã³ luá»“ng con bgsave sáº½ ghi dá»¯ liá»‡u sao chÃ©p nÃ y vÃ o tá»‡p RDB, trong quÃ¡ trÃ¬nh nÃ y, luá»“ng chÃ­nh váº«n cÃ³ thá»ƒ thay Ä‘á»•i dá»¯ liá»‡u gá»‘c.</li>
</ul>
<p>Cáº§n lÆ°u Ã½ ráº±ng táº§n suáº¥t thá»±c hiá»‡n RDB cá»§a Redis ráº¥t quan trá»ng, vÃ¬ Ä‘iá»u nÃ y sáº½ áº£nh hÆ°á»Ÿng Ä‘áº¿n tÃ­nh toÃ n váº¹n cá»§a dá»¯ liá»‡u áº£nh chá»¥p nhanh cÅ©ng nhÆ° Ä‘á»™ á»•n Ä‘á»‹nh cá»§a Redis. Do Ä‘Ã³, sau phiÃªn báº£n Redis 4.0, cÆ¡ cháº¿ lÆ°u trá»¯ dá»¯ liá»‡u há»—n há»£p AOF vÃ  RDB Ä‘Ã£ Ä‘Æ°á»£c thÃªm vÃ o: ghi dá»¯ liá»‡u vÃ o tá»‡p dÆ°á»›i dáº¡ng RDB, sau Ä‘Ã³ lÆ°u cÃ¡c lá»‡nh thao tÃ¡c tiáº¿p theo dÆ°á»›i dáº¡ng AOF, vá»«a Ä‘áº£m báº£o tá»‘c Ä‘á»™ khá»Ÿi Ä‘á»™ng láº¡i cá»§a Redis, vá»«a giáº£m thiá»ƒu rá»§i ro máº¥t dá»¯ liá»‡u.</p>
<p>á»¨ng viÃªn: Há»c Ä‘Æ°á»£c rá»“i, há»c Ä‘Æ°á»£c rá»“i.</p>
<p>NhÃ  tuyá»ƒn dá»¥ng: Váº­y báº¡n hÃ£y nÃ³i vá» cÃ¡ch Redis Ä‘áº¡t Ä‘Æ°á»£c tÃ­nh kháº£ dá»¥ng cao.</p>
<p>á»¨ng viÃªn: Redis Ä‘áº¡t Ä‘Æ°á»£c tÃ­nh kháº£ dá»¥ng cao chá»§ yáº¿u báº±ng ba cÃ¡ch: sao chÃ©p master-slave, cháº¿ Ä‘á»™ Sentinel vÃ  cá»¥m Redis.</p>
<p><strong>1) Sao chÃ©p master-slave</strong></p>
<p>Äá»“ng bá»™ dá»¯ liá»‡u tá»« má»™t mÃ¡y chá»§ Redis chÃ­nh sang nhiá»u mÃ¡y chá»§ Redis phá»¥, tá»©c lÃ  mÃ´ hÃ¬nh má»™t chÃ­nh nhiá»u phá»¥, tÆ°Æ¡ng tá»± nhÆ° nguyÃªn lÃ½ sao chÃ©p master-slave cá»§a MySQL.</p>
<p><strong>2) Cháº¿ Ä‘á»™ Sentinel</strong></p>
<p>Khi sá»­ dá»¥ng dá»‹ch vá»¥ master-slave cá»§a Redis, náº¿u mÃ¡y chá»§ master-slave cá»§a Redis gáº·p sá»± cá»‘, cáº§n pháº£i khÃ´i phá»¥c thá»§ cÃ´ng. Äá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y, Redis Ä‘Ã£ thÃªm cháº¿ Ä‘á»™ Sentinel (vÃ¬ cháº¿ Ä‘á»™ Sentinel cÃ³ thá»ƒ giÃ¡m sÃ¡t mÃ¡y chá»§ master-slave vÃ  cung cáº¥p chá»©c nÄƒng khÃ´i phá»¥c tá»± Ä‘á»™ng).</p>
<p><strong>3) Cá»¥m Redis (Redis Cluster)</strong></p>
<p>Redis Cluster lÃ  má»™t cháº¿ Ä‘á»™ hoáº¡t Ä‘á»™ng phÃ¢n tÃ¡n phi táº­p trung, Ä‘Æ°á»£c giá»›i thiá»‡u trong phiÃªn báº£n Redis 3.0. NÃ³ phÃ¢n phá»‘i dá»¯ liá»‡u trÃªn cÃ¡c mÃ¡y chá»§ khÃ¡c nhau Ä‘á»ƒ giáº£m sá»± phá»¥ thuá»™c vÃ o má»™t nÃºt chÃ­nh duy nháº¥t, tá»« Ä‘Ã³ cáº£i thiá»‡n hiá»‡u suáº¥t Ä‘á»c vÃ  ghi cá»§a dá»‹ch vá»¥ Redis.</p>
<p>NhÃ  tuyá»ƒn dá»¥ng: Sá»­ dá»¥ng cháº¿ Ä‘á»™ Sentinel, dá»¯ liá»‡u cÃ³ báº£n sao Ä‘áº£m báº£o tÃ­nh kháº£ dá»¥ng vÃ  cÃ³ Sentinel giÃ¡m sÃ¡t, náº¿u master gáº·p sá»± cá»‘ sáº½ chá»n slave lÃ m master. Äiá»u nÃ y Ä‘Ã£ Ä‘Ã¡p á»©ng nhu cáº§u sáº£n xuáº¥t cá»§a chÃºng ta. Váº­y táº¡i sao cáº§n sá»­ dá»¥ng cháº¿ Ä‘á»™ cá»¥m?</p>
<p>á»¨ng viÃªn: Cháº¿ Ä‘á»™ Sentinel thá»±c cháº¥t váº«n lÃ  cháº¿ Ä‘á»™ master-slave, trong cháº¿ Ä‘á»™ master-slave, chÃºng ta cÃ³ thá»ƒ má»Ÿ rá»™ng kháº£ nÄƒng Ä‘á»c báº±ng cÃ¡ch thÃªm cÃ¡c nÃºt slave, nhÆ°ng khÃ´ng thá»ƒ má»Ÿ rá»™ng kháº£ nÄƒng ghi vÃ  lÆ°u trá»¯. Kháº£ nÄƒng lÆ°u trá»¯ chá»‰ cÃ³ thá»ƒ Ä‘áº¡t Ä‘áº¿n giá»›i háº¡n cá»§a nÃºt master. VÃ¬ váº­y, Ä‘á»ƒ má»Ÿ rá»™ng kháº£ nÄƒng ghi vÃ  lÆ°u trá»¯, chÃºng ta cáº§n Ä‘Æ°a vÃ o cháº¿ Ä‘á»™ cá»¥m.</p>
<p>NhÃ  tuyá»ƒn dá»¥ng: CÃ³ nhiá»u nÃºt master trong cá»¥m, váº­y Redis Cluster xÃ¡c Ä‘á»‹nh chá»n nÃºt nÃ o Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u nhÆ° tháº¿ nÃ o?</p>
<p>á»¨ng viÃªn: Äiá»u nÃ y cÃ³ láº½ sá»­ dá»¥ng má»™t thuáº­t toÃ¡n hash nÃ o Ä‘Ã³, nhÆ°ng tÃ´i khÃ´ng rÃµ láº¯m...</p>
<p>NhÃ  tuyá»ƒn dá»¥ng: ÄÆ°á»£c rá»“i, buá»•i phá»ng váº¥n hÃ´m nay káº¿t thÃºc táº¡i Ä‘Ã¢y. Báº¡n vá» chá» thÃ´ng bÃ¡o phá»ng váº¥n cá»§a chÃºng tÃ´i.</p>
<p>á»¨ng viÃªn: VÃ¢ng, cáº£m Æ¡n nhÃ  tuyá»ƒn dá»¥ng. Báº¡n cÃ³ thá»ƒ cho tÃ´i biáº¿t cÃ¡ch Redis Cluster thá»±c hiá»‡n lá»±a chá»n nÃºt khÃ´ng?</p>
<p>NhÃ  tuyá»ƒn dá»¥ng:</p>
<p>Redis Cluster sá»­ dá»¥ng má»™t thuáº­t toÃ¡n hash nháº¥t quÃ¡n Ä‘á»ƒ thá»±c hiá»‡n lá»±a chá»n nÃºt. Redis Cluster chia thÃ nh 16384 Slot (vá»‹ trÃ­). Má»—i cáº·p khÃ³a-giÃ¡ trá»‹ Ä‘Æ°á»£c Ã¡nh xáº¡ vÃ o má»™t Slot theo khÃ³a cá»§a nÃ³, quy trÃ¬nh cá»¥ thá»ƒ nhÆ° sau:</p>
<ol>
<li>Theo khÃ³a cá»§a cáº·p khÃ³a-giÃ¡ trá»‹, tÃ­nh má»™t giÃ¡ trá»‹ 16 bit theo thuáº­t toÃ¡n CRC16.</li>
<li>DÃ¹ng giÃ¡ trá»‹ 16 bit nÃ y chia láº¥y dÆ° vá»›i 16384, nháº­n Ä‘Æ°á»£c sá»‘ dÆ° tá»« 0 Ä‘áº¿n 16383, má»—i sá»‘ dÆ° Ä‘áº¡i diá»‡n cho má»™t Slot tÆ°Æ¡ng á»©ng.</li>
</ol>
<p>Má»—i nÃºt Redis chá»‹u trÃ¡ch nhiá»‡m xá»­ lÃ½ má»™t pháº§n cÃ¡c Slot. Giáº£ sá»­ cÃ³ ba nÃºt master ABC, má»—i nÃºt xá»­ lÃ½ cÃ¡c Slot nhÆ° sau:</p>
<p>| NÃºt | Xá»­ lÃ½ Slot |<br>
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>Prepare</title>
      <link>https://vanhung4499.github.io/interview/prepare/REAMDE.html</link>
      <guid>https://vanhung4499.github.io/interview/prepare/REAMDE.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Prepare</source>
      <pubDate>Fri, 05 Jul 2024 10:10:42 GMT</pubDate>
    </item>
    <item>
      <title>BIO vs NIO vs AIO</title>
      <link>https://vanhung4499.github.io/programming/java/nio/bio-nio-aio.html</link>
      <guid>https://vanhung4499.github.io/programming/java/nio/bio-nio-aio.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">BIO vs NIO vs AIO</source>
      <description>Sá»± khÃ¡c biá»‡t giá»¯a BIO, NIO vÃ  AIO Trong pháº§n trÆ°á»›c, chÃºng ta Ä‘Ã£ tÃ¬m hiá»ƒu sá»± khÃ¡c biá»‡t giá»¯a NIO vÃ  IO truyá»n thá»‘ng. BÃ i viáº¿t nÃ y sáº½ giáº£i thÃ­ch sá»± khÃ¡c biá»‡t giá»¯a BIO, NIO vÃ  AIO, ...</description>
      <category>java</category>
      <pubDate>Thu, 04 Jul 2024 15:33:11 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>Trong pháº§n trÆ°á»›c, chÃºng ta Ä‘Ã£ tÃ¬m hiá»ƒu <a href="nio-better-io">sá»± khÃ¡c biá»‡t giá»¯a NIO vÃ  IO truyá»n thá»‘ng</a>. BÃ i viáº¿t nÃ y sáº½ giáº£i thÃ­ch sá»± khÃ¡c biá»‡t giá»¯a BIO, NIO vÃ  AIO, nhá»¯ng khÃ¡i niá»‡m nÃ y thÆ°á»ng dá»… bá»‹ nháº§m láº«n Ä‘á»‘i vá»›i ngÆ°á»i má»›i há»c, vÃ¬ váº­y chÃºng ta sáº½ cá»‘ gáº¯ng giáº£i thÃ­ch má»™t cÃ¡ch Ä‘Æ¡n giáº£n, phÃ¹ há»£p Ä‘á»ƒ nÃ³i vá»›i ngÆ°á»i nghe ğŸ‘‚.</p>
</blockquote>
<p>VÃ o má»™t buá»•i chiá»u cuá»‘i tuáº§n, khi tÃ´i Ä‘ang thá»±c hiá»‡n cuá»™c phá»ng váº¥n qua Ä‘iá»‡n thoáº¡i táº¡i nhÃ , tÃ´i Ä‘Ã£ há»i má»™t sá»‘ cÃ¢u há»i vá» IO vá»›i á»©ng viÃªn, bao gá»“m cÃ¡c cÃ¢u há»i vá» BIO, NIO vÃ  AIO lÃ  gÃ¬? Sá»± khÃ¡c biá»‡t giá»¯a ba loáº¡i nÃ y lÃ  gÃ¬? LÃ m tháº¿ nÃ o Ä‘á»ƒ sá»­ dá»¥ng chÃºng má»™t cÃ¡ch cá»¥ thá»ƒ? Tuy nhiÃªn, cÃ¢u tráº£ lá»i cá»§a á»©ng viÃªn khÃ´ng hÃ i lÃ²ng. VÃ¬ váº­y, tÃ´i Ä‘Ã£ viáº¿t trong Ä‘Ã¡nh giÃ¡ phá»ng váº¥n ráº±ng: "Sá»± hiá»ƒu biáº¿t vá» IO trong Java cá»§a báº¡n cÃ²n chÆ°a Ä‘á»§ sÃ¢u". VÃ o lÃºc nÃ y, ngÆ°á»i yÃªu cá»§a tÃ´i Ä‘Ã£ vÃ´ tÃ¬nh nhÃ¬n tháº¥y Ä‘iá»u nÃ y.</p>
<h3>Java IO vÃ  sá»± khÃ¡c biá»‡t giá»¯a BIO, NIO</h3>
<p>IO, thÆ°á»ng viáº¿t táº¯t lÃ  I/O, lÃ  viáº¿t táº¯t cá»§a Input/Output, cÃ³ nghÄ©a lÃ  Ä‘áº§u vÃ o/vÃ o ra. ThÃ´ng thÆ°á»ng nÃ³ Ã¡m chá»‰ quÃ¡ trÃ¬nh Ä‘Æ°a dá»¯ liá»‡u giá»¯a bá»™ nhá»› ná»™i (bá»™ nhá»›) vÃ  bá»™ nhá»› ngoÃ i (á»• Ä‘Ä©a cá»©ng, á»• USB vÃ  cÃ¡c thiáº¿t bá»‹ phá»¥ khÃ¡c).</p>
<p>Äáº§u vÃ o lÃ  tÃ­n hiá»‡u hoáº·c dá»¯ liá»‡u mÃ  há»‡ thá»‘ng nháº­n Ä‘Æ°á»£c, Ä‘áº§u ra lÃ  tÃ­n hiá»‡u hoáº·c dá»¯ liá»‡u mÃ  nÃ³ gá»­i Ä‘i.</p>
<p>Trong Java, cÃ³ má»™t loáº¡t cÃ¡c API Ä‘Æ°á»£c cung cáº¥p cho nhÃ  phÃ¡t triá»ƒn Ä‘á»ƒ Ä‘á»c vÃ  ghi dá»¯ liá»‡u bÃªn ngoÃ i hoáº·c tá»‡p tin. ChÃºng ta gá»i nhá»¯ng API nÃ y lÃ  Java IO.</p>
<p>IO lÃ  má»™t trong nhá»¯ng khÃ¡i niá»‡m quan trá»ng vÃ  khÃ³ cá»§a Java, chá»§ yáº¿u lÃ  do vá»›i sá»± phÃ¡t triá»ƒn cá»§a Java, hiá»‡n táº¡i cÃ³ ba loáº¡i IO cÃ¹ng tá»“n táº¡i. ChÃºng ta gá»i chÃºng lÃ  BIO, NIO vÃ  AIO.</p>
<p>BIO Ä‘áº§y Ä‘á»§ lÃ  Block-IO, lÃ  má»™t mÃ´ hÃ¬nh giao tiáº¿p Ä‘á»“ng bá»™ vÃ  cháº·n. ÄÃ¢y lÃ  má»™t cÃ¡ch tiáº¿p cáº­n giao tiáº¿p truyá»n thá»‘ng, mÃ´ hÃ¬nh Ä‘Æ¡n giáº£n, dá»… sá»­ dá»¥ng. Tuy nhiÃªn, nÃ³ cÃ³ kháº£ nÄƒng xá»­ lÃ½ song song tháº¥p, máº¥t thá»i gian giao tiáº¿p vÃ  phá»¥ thuá»™c vÃ o tá»‘c Ä‘á»™ máº¡ng.</p>
<p><a href="nio-better-io">Java NIO</a>, toÃ n tÃªn lÃ  Non-Block IO, lÃ  má»™t tÃ­nh nÄƒng tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t dÃ nh cho truyá»n thÃ´ng máº¡ng trong Java SE tá»« phiÃªn báº£n 1.4 trá»Ÿ lÃªn. ÄÃ¢y lÃ  má»™t mÃ´ hÃ¬nh giao tiáº¿p Ä‘á»“ng bá»™ khÃ´ng cháº·n.</p>
<p>NIO vÃ  IO truyá»n thá»‘ng cÃ³ cÃ¹ng má»¥c Ä‘Ã­ch vÃ  má»¥c Ä‘Ã­ch, sá»± khÃ¡c biá»‡t quan trá»ng nháº¥t giá»¯a chÃºng lÃ  cÃ¡ch dá»¯ liá»‡u Ä‘Æ°á»£c Ä‘Ã³ng gÃ³i vÃ  chuyá»ƒn táº£i. IO truyá»n thá»‘ng xá»­ lÃ½ dá»¯ liá»‡u theo luá»“ng, trong khi NIO xá»­ lÃ½ dá»¯ liá»‡u theo khá»‘i.</p>
<p>Há»‡ thá»‘ng IO hÆ°á»›ng luá»“ng xá»­ lÃ½ dá»¯ liá»‡u má»™t láº§n má»™t byte. Má»™t dÃ²ng Ä‘áº§u vÃ o táº¡o ra má»™t byte dá»¯ liá»‡u, má»™t dÃ²ng Ä‘áº§u ra tiÃªu thá»¥ má»™t byte dá»¯ liá»‡u.</p>
<p>Há»‡ thá»‘ng IO hÆ°á»›ng khá»‘i xá»­ lÃ½ dá»¯ liá»‡u dÆ°á»›i dáº¡ng khá»‘i. Má»—i hoáº¡t Ä‘á»™ng táº¡o ra hoáº·c tiÃªu thá»¥ má»™t khá»‘i dá»¯ liá»‡u trong má»™t bÆ°á»›c. Xá»­ lÃ½ dá»¯ liá»‡u theo khá»‘i nhanh hÆ¡n nhiá»u so vá»›i xá»­ lÃ½ dá»¯ liá»‡u theo byte. Tuy nhiÃªn, há»‡ thá»‘ng IO hÆ°á»›ng khá»‘i thiáº¿u má»™t sá»‘ tÃ­nh nÄƒng tinh táº¿ vÃ  Ä‘Æ¡n giáº£n cá»§a há»‡ thá»‘ng IO hÆ°á»›ng luá»“ng.</p>
<p>Java AIO, toÃ n tÃªn lÃ  Asynchronous IO, lÃ  má»™t mÃ´ hÃ¬nh giao tiáº¿p khÃ´ng Ä‘á»“ng bá»™ khÃ´ng cháº·n.</p>
<p>NgoÃ i ra, trÃªn ná»n táº£ng NIO, AIO Ä‘Ã£ giá»›i thiá»‡u khÃ¡i niá»‡m cÃ¡c kÃªnh báº¥t Ä‘á»“ng bá»™ má»›i, vÃ  cung cáº¥p cÃ i Ä‘áº·t kÃªnh táº­p tin báº¥t Ä‘á»“ng bá»™ vÃ  kÃªnh á»• Ä‘Ä©a báº¥t Ä‘á»“ng bá»™.</p>
<h3>Ba loáº¡i IO khÃ¡c nhau</h3>
<p>Äáº§u tiÃªn, chÃºng ta sáº½ Ä‘áº·t láº¡i Ä‘iá»ƒm ná»•i báº­t tá»« má»™t gÃ³c Ä‘á»™ tá»•ng quan:</p>
<p><strong>BIO (Blocking I/O):</strong> Cháº¿ Ä‘á»™ I/O Ä‘á»“ng bá»™ cháº·n.</p>
<p><strong>NIO (New I/O):</strong> Cháº¿ Ä‘á»™ Ä‘á»“ng bá»™ khÃ´ng cháº·n.</p>
<p><strong>AIO (Asynchronous I/O):</strong> MÃ´ hÃ¬nh I/O khÃ´ng Ä‘á»“ng bá»™ khÃ´ng cháº·n.</p>
<ul>
<li>
<p><strong>Cháº¿ Ä‘á»™ Ä‘á»“ng bá»™ cháº·n:</strong> Trong cháº¿ Ä‘á»™ nÃ y, chÃºng ta báº¯t Ä‘áº§u náº¥u nÆ°á»›c vÃ  ngá»“i trÆ°á»›c áº¥m Ä‘á»ƒ chá» nÆ°á»›c sÃ´i.</p>
</li>
<li>
<p><strong>Cháº¿ Ä‘á»™ Ä‘á»“ng bá»™ khÃ´ng cháº·n:</strong> TrÃ¡i láº¡i, chÃºng ta cÅ©ng báº¯t Ä‘áº§u náº¥u nÆ°á»›c, nhÆ°ng sau Ä‘Ã³ rá»i khá»i báº¿p vÃ  quay láº¡i xem ti vi má»—i vÃ i phÃºt Ä‘á»ƒ kiá»ƒm tra nÆ°á»›c cÃ³ sÃ´i chÆ°a.</p>
</li>
<li>
<p><strong>MÃ´ hÃ¬nh I/O khÃ´ng Ä‘á»“ng bá»™ khÃ´ng cháº·n:</strong> Trong cháº¿ Ä‘á»™ nÃ y, chÃºng ta cÅ©ng báº¯t Ä‘áº§u náº¥u nÆ°á»›c, nhÆ°ng khÃ´ng ngá»“i trÆ°á»›c áº¥m chá» Ä‘á»£i, cÅ©ng khÃ´ng pháº£i quay láº¡i xem. Thay vÃ o Ä‘Ã³, khi nÆ°á»›c sÃ´i, nÃ³ sáº½ tá»± Ä‘á»™ng thÃ´ng bÃ¡o cho chÃºng ta trong khi chÃºng ta Ä‘ang xem ti vi.</p>
</li>
</ul>
<p><strong>Cháº·n vs KhÃ´ng cháº·n:</strong> NgÆ°á»i cÃ³ ngá»“i trÆ°á»›c áº¥m chá» Ä‘á»£i hay khÃ´ng.</p>
<p><strong>Äá»“ng bá»™ vs Báº¥t Ä‘á»“ng bá»™:</strong> áº¤m cÃ³ thÃ´ng bÃ¡o cho ngÆ°á»i khi nÆ°á»›c sÃ´i hay khÃ´ng.</p>
<h4>CÃ¡c trÆ°á»ng há»£p sá»­ dá»¥ng</h4>
<ul>
<li>
<p>PhÆ°Æ¡ng phÃ¡p BIO thÃ­ch há»£p cho kiáº¿n trÃºc cÃ³ sá»‘ lÆ°á»£ng káº¿t ná»‘i nhá» vÃ  cá»‘ Ä‘á»‹nh, yÃªu cáº§u tÃ i nguyÃªn mÃ¡y chá»§ cao vÃ  giá»›i háº¡n Ä‘á»“ng thá»i trong á»©ng dá»¥ng, lÃ  lá»±a chá»n duy nháº¥t trÆ°á»›c JDK1.4, nhÆ°ng chÆ°Æ¡ng trÃ¬nh Ä‘Æ¡n giáº£n vÃ  dá»… hiá»ƒu.</p>
</li>
<li>
<p>PhÆ°Æ¡ng phÃ¡p NIO thÃ­ch há»£p cho kiáº¿n trÃºc cÃ³ sá»‘ lÆ°á»£ng káº¿t ná»‘i nhiá»u vÃ  káº¿t ná»‘i ngáº¯n (hoáº¡t Ä‘á»™ng nháº¹), cháº³ng háº¡n nhÆ° mÃ¡y chá»§ trÃ² chuyá»‡n, giá»›i háº¡n Ä‘á»“ng thá»i trong á»©ng dá»¥ng, láº­p trÃ¬nh phá»©c táº¡p hÆ¡n, há»— trá»£ tá»« JDK1.4 trá»Ÿ Ä‘i.</p>
</li>
<li>
<p>PhÆ°Æ¡ng phÃ¡p AIO thÃ­ch há»£p cho kiáº¿n trÃºc cÃ³ sá»‘ lÆ°á»£ng káº¿t ná»‘i nhiá»u vÃ  káº¿t ná»‘i dÃ i (hoáº¡t Ä‘á»™ng náº·ng), cháº³ng háº¡n nhÆ° mÃ¡y chá»§ album áº£nh, sá»­ dá»¥ng Ä‘áº§y Ä‘á»§ cÃ¡c hoáº¡t Ä‘á»™ng báº¥t Ä‘á»“ng bá»™ tá»« há»‡ Ä‘iá»u hÃ nh, láº­p trÃ¬nh phá»©c táº¡p hÆ¡n, há»— trá»£ tá»« JDK7 trá»Ÿ Ä‘i.</p>
</li>
</ul>
<h4>CÃ¡ch sá»­ dá»¥ng</h4>
<p>Sá»­ dá»¥ng BIO Ä‘á»ƒ thá»±c hiá»‡n viá»‡c Ä‘á»c vÃ  ghi táº­p tin.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> BioFileDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        BioFileDemo</span><span style="color:#E06C75;--shiki-dark:#E06C75"> demo</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BioFileDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        demo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        demo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Sá»­ dá»¥ng BIO Ä‘á»ƒ ghi vÃ o táº­p tin</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> writeFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> filename</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "logs/abc.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fileWriter</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileWriter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(filename);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            BufferedWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bufferedWriter</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedWriter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(fileWriter);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            bufferedWriter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"abcdefgh"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            bufferedWriter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÃ£ ghi vÃ o táº­p tin"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            bufferedWriter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            fileWriter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Sá»­ dá»¥ng BIO Ä‘á»ƒ Ä‘á»c táº­p tin</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> readFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> filename</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "logs/abc.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fileReader</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileReader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(filename);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            BufferedReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bufferedReader</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedReader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(fileReader);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> line</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            while</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ((line </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> bufferedReader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Ná»™i dung Ä‘Ã£ Ä‘á»c: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> line);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            bufferedReader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            fileReader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Äoáº¡n mÃ£ nÃ y mÃ´ táº£ cÃ¡ch sá»­ dá»¥ng Input/Output (I/O) cháº·n truyá»n thá»‘ng (BIO) trong Java Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c thao tÃ¡c Ä‘á»c vÃ  ghi táº­p tin. Trong phÆ°Æ¡ng thá»©c <code>writeFile()</code>, chÃºng ta sá»­ dá»¥ng FileWriter Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng vÃ  sá»­ dá»¥ng BufferedWriter Ä‘á»ƒ ghi dá»¯ liá»‡u vÃ o táº­p tin. Sau Ä‘Ã³, sá»­ dá»¥ng <code>bufferedWriter.write()</code> Ä‘á»ƒ viáº¿t chuá»—i vÃ o táº­p tin vÃ  <code>bufferedWriter.newLine()</code> Ä‘á»ƒ thÃªm dáº¥u xuá»‘ng dÃ²ng. Cuá»‘i cÃ¹ng, Ä‘Ã³ng BufferedWriter vÃ  FileWriter. Trong phÆ°Æ¡ng thá»©c <code>readFile()</code>, chÃºng ta sá»­ dá»¥ng FileReader Ä‘á»ƒ Ä‘á»c táº­p tin vÃ  BufferedReader Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u tá»« táº­p tin. VÃ²ng láº·p <code>while</code> Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘á»c tá»«ng dÃ²ng cá»§a táº­p tin cho Ä‘áº¿n khi Ä‘á»c háº¿t. Cuá»‘i cÃ¹ng, Ä‘Ã³ng BufferedReader vÃ  FileReader Ä‘á»ƒ giáº£i phÃ³ng tÃ i nguyÃªn.</p>
<p>ÄÃ¢y lÃ  mÃ£ vÃ­ dá»¥ vá» cÃ¡ch sá»­ dá»¥ng NIO:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.io.IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.nio.ByteBuffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.nio.channels.FileChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.nio.charset.StandardCharsets</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.nio.file.Path</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.nio.file.Paths</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.nio.file.StandardOpenOption</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.util.EnumSet</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NioFileDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        NioFileDemo</span><span style="color:#E06C75;--shiki-dark:#E06C75"> demo</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> NioFileDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        demo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        demo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Sá»­ dá»¥ng NIO Ä‘á»ƒ ghi vÃ o táº­p tin</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> writeFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Path</span><span style="color:#E06C75;--shiki-dark:#E06C75"> path</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Paths</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"logs/abc.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            FileChannel</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fileChannel</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> FileChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(path, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">EnumSet</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">of</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StandardOpenOption</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">CREATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StandardOpenOption</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">WRITE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            ByteBuffer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> buffer</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StandardCharsets</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UTF_8</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">encode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"abcdefgh"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            fileChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÃ£ ghi vÃ o táº­p tin"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            fileChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Sá»­ dá»¥ng NIO Ä‘á»ƒ Ä‘á»c táº­p tin</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> readFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Path</span><span style="color:#E06C75;--shiki-dark:#E06C75"> path</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Paths</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"logs/abc.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            FileChannel</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fileChannel</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> FileChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(path, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StandardOpenOption</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">READ</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            ByteBuffer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> buffer</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ByteBuffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">allocate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bytesRead</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fileChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            while</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (bytesRead </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                buffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">flip</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Ná»™i dung Ä‘Ã£ Ä‘á»c: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StandardCharsets</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UTF_8</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">decode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                buffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">clear</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                bytesRead </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fileChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            fileChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong vÃ­ dá»¥ nÃ y, chÃºng ta sá»­ dá»¥ng <code>FileChannel</code> cá»§a NIO Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c thao tÃ¡c Ä‘á»c vÃ  ghi file. Trong phÆ°Æ¡ng thá»©c <code>writeFile()</code>, chÃºng ta má»Ÿ <code>FileChannel</code> Ä‘á»ƒ táº¡o vÃ  ghi vÃ o táº­p tin, sau Ä‘Ã³ sá»­ dá»¥ng <code>ByteBuffer</code> Ä‘á»ƒ mÃ£ hÃ³a chuá»—i thÃ nh UTF-8 vÃ  ghi vÃ o táº­p tin. Trong phÆ°Æ¡ng thá»©c <code>readFile()</code>, chÃºng ta má»Ÿ <code>FileChannel</code> Ä‘á»ƒ Ä‘á»c tá»« táº­p tin vÃ  sá»­ dá»¥ng <code>ByteBuffer</code> Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u Ä‘á»c Ä‘Æ°á»£c. VÃ²ng láº·p sáº½ Ä‘á»c vÃ  giáº£i mÃ£ tá»«ng pháº§n dá»¯ liá»‡u tá»« <code>ByteBuffer</code> vÃ  in ra mÃ n hÃ¬nh cho Ä‘áº¿n khi Ä‘á»c háº¿t file. Cuá»‘i cÃ¹ng, ta Ä‘Ã³ng <code>FileChannel</code> Ä‘á»ƒ giáº£i phÃ³ng tÃ i nguyÃªn.</p>
<p>ÄÃ¢y lÃ  mÃ£ Java sá»­ dá»¥ng AsynchronousFileChannel Ä‘á»ƒ thá»±c hiá»‡n viá»‡c Ä‘á»c vÃ  ghi file má»™t cÃ¡ch báº¥t Ä‘á»“ng bá»™. DÆ°á»›i Ä‘Ã¢y lÃ  báº£n dá»‹ch tiáº¿ng Viá»‡t cá»§a mÃ£ nÃ y:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.io.IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.nio.ByteBuffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.nio.channels.AsynchronousFileChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.nio.charset.StandardCharsets</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.nio.file.Path</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.nio.file.Paths</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.nio.file.StandardOpenOption</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.util.concurrent.CompletionHandler</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.util.concurrent.Future</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AioDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        AioDemo</span><span style="color:#E06C75;--shiki-dark:#E06C75"> demo</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> AioDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        demo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        demo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Ghi file báº±ng AsynchronousFileChannel</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> writeFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Path</span><span style="color:#E06C75;--shiki-dark:#E06C75"> path</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Paths</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"logs/abc.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            AsynchronousFileChannel</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fileChannel</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AsynchronousFileChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(path, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StandardOpenOption</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">WRITE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StandardOpenOption</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">CREATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            ByteBuffer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> buffer</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StandardCharsets</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UTF_8</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">encode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"abcdefgh"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            Future</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">result</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fileChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            result</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÃ£ ghi file thÃ nh cÃ´ng"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            fileChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> | </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">InterruptedException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> | </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">java.util.concurrent.ExecutionException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Äá»c file báº±ng AsynchronousFileChannel</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> readFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Path</span><span style="color:#E06C75;--shiki-dark:#E06C75"> path</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Paths</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"logs/abc.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            AsynchronousFileChannel</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fileChannel</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AsynchronousFileChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(path, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StandardOpenOption</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">READ</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            ByteBuffer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> buffer</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ByteBuffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">allocate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            fileChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, buffer, </span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CompletionHandler</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ByteBuffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;() {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> completed</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> result</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ByteBuffer</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> attachment</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                    attachment</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">flip</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Ná»™i dung Ä‘á»c Ä‘Æ°á»£c: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StandardCharsets</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UTF_8</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">decode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(attachment));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                    attachment</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">clear</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                    try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                        fileChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                        e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> failed</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Throwable</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> exc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ByteBuffer</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> attachment</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Äá»c file tháº¥t báº¡i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                    exc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            Thread</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">sleep</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> | </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">InterruptedException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ÄÃ¢y lÃ  má»™t vÃ­ dá»¥ vá» lá»›p AioDemo, bao gá»“m hai phÆ°Æ¡ng thá»©c: <code>writeFile()</code> vÃ  <code>readFile()</code>. Cáº£ hai phÆ°Æ¡ng thá»©c nÃ y sá»­ dá»¥ng AsynchronousFileChannel Ä‘á»ƒ thá»±c hiá»‡n viá»‡c ghi vÃ  Ä‘á»c file báº¥t Ä‘á»“ng bá»™. CÃ¡c comment Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t Ä‘á»ƒ giáº£i thÃ­ch Ã½ nghÄ©a cá»¥ thá»ƒ cá»§a mÃ£.</p>
<h3>TÃ³m táº¯t</h3>
<p>BIO (Blocking I/O): Sá»­ dá»¥ng mÃ´ hÃ¬nh I/O cháº·n, luá»“ng bá»‹ cháº·n khi thá»±c hiá»‡n hoáº¡t Ä‘á»™ng I/O, khÃ´ng thá»ƒ xá»­ lÃ½ cÃ¡c nhiá»‡m vá»¥ khÃ¡c, phÃ¹ há»£p vá»›i cÃ¡c ká»‹ch báº£n cÃ³ sá»‘ lÆ°á»£ng káº¿t ná»‘i Ã­t vÃ  á»•n Ä‘á»‹nh.</p>
<p>NIO (New I/O hoáº·c Non-blocking I/O): Sá»­ dá»¥ng mÃ´ hÃ¬nh I/O khÃ´ng cháº·n, luá»“ng cÃ³ thá»ƒ thá»±c thi cÃ¡c nhiá»‡m vá»¥ khÃ¡c trong khi chá» Ä‘á»£i I/O, sá»­ dá»¥ng Selector Ä‘á»ƒ giÃ¡m sÃ¡t sá»± kiá»‡n trÃªn nhiá»u Channel, nÃ¢ng cao hiá»‡u suáº¥t vÃ  kháº£ nÄƒng má»Ÿ rá»™ng, phÃ¹ há»£p vá»›i cÃ¡c ká»‹ch báº£n cÃ³ táº£i cao.</p>
<p>AIO (Asynchronous I/O): Sá»­ dá»¥ng mÃ´ hÃ¬nh I/O báº¥t Ä‘á»“ng bá»™, luá»“ng tráº£ vá» ngay sau khi gá»­i yÃªu cáº§u I/O, thÃ´ng bÃ¡o cho luá»“ng thÃ´ng qua hÃ m gá»i láº¡i khi hoÃ n thÃ nh hoáº¡t Ä‘á»™ng I/O, nÃ¢ng cao kháº£ nÄƒng xá»­ lÃ½ song song, phÃ¹ há»£p vá»›i cÃ¡c ká»‹ch báº£n cÃ³ lÆ°u lÆ°á»£ng cao.</p>
]]></content:encoded>
    </item>
    <item>
      <title>NIO better than IO</title>
      <link>https://vanhung4499.github.io/programming/java/nio/nio-better-io.html</link>
      <guid>https://vanhung4499.github.io/programming/java/nio/nio-better-io.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">NIO better than IO</source>
      <description>NIO máº¡nh hÆ¡n IO á»Ÿ Ä‘iá»ƒm nÃ o? IO truyá»n thá»‘ng dá»±a trÃªn byte stream hoáº·c character stream (nhÆ° FileInputStream, BufferedReader, v.v.) Ä‘á»ƒ thá»±c hiá»‡n Ä‘á»c vÃ  ghi file, vÃ  sá»­ dá»¥ng Socke...</description>
      <category>java</category>
      <pubDate>Thu, 04 Jul 2024 15:33:11 GMT</pubDate>
      <content:encoded><![CDATA[
<p><a href="/programming/java/io/classification">IO truyá»n thá»‘ng</a> dá»±a trÃªn byte stream hoáº·c character stream (nhÆ° FileInputStream, BufferedReader, v.v.) Ä‘á»ƒ thá»±c hiá»‡n Ä‘á»c vÃ  ghi file, vÃ  sá»­ dá»¥ng Socket vÃ  ServerSocket Ä‘á»ƒ truyá»n táº£i máº¡ng.</p>
<p>NIO sá»­ dá»¥ng <a href="/programming/java/nio/buffer-channel">kÃªnh (Channel) vÃ  bá»™ Ä‘á»‡m (Buffer)</a> Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c thao tÃ¡c file, vÃ  sá»­ dá»¥ng SocketChannel vÃ  ServerSocketChannel Ä‘á»ƒ truyá»n táº£i máº¡ng.</p>
<p>IO truyá»n thá»‘ng Ã¡p dá»¥ng mÃ´ hÃ¬nh cháº·n, má»—i káº¿t ná»‘i cáº§n pháº£i táº¡o má»™t luá»“ng riÃªng Ä‘á»ƒ xá»­ lÃ½ cÃ¡c thao tÃ¡c Ä‘á»c ghi. Khi má»™t luá»“ng Ä‘ang chá» thao tÃ¡c I/O, nÃ³ khÃ´ng thá»ƒ thá»±c hiá»‡n cÃ¡c nhiá»‡m vá»¥ khÃ¡c. Äiá»u nÃ y dáº«n Ä‘áº¿n viá»‡c táº¡o vÃ  há»§y bá» nhiá»u luá»“ng, cÃ¹ng vá»›i viá»‡c chuyá»ƒn Ä‘á»•i ngá»¯ cáº£nh, lÃ m giáº£m hiá»‡u suáº¥t cá»§a há»‡ thá»‘ng.</p>
<p>NIO sá»­ dá»¥ng mÃ´ hÃ¬nh khÃ´ng cháº·n, cho phÃ©p luá»“ng thá»±c hiá»‡n cÃ¡c nhiá»‡m vá»¥ khÃ¡c trong khi chá» I/O. MÃ´ hÃ¬nh nÃ y sá»­ dá»¥ng bá»™ chá»n (Selector) Ä‘á»ƒ giÃ¡m sÃ¡t cÃ¡c sá»± kiá»‡n I/O trÃªn nhiá»u kÃªnh (Channel), Ä‘áº¡t Ä‘Æ°á»£c hiá»‡u suáº¥t vÃ  kháº£ nÄƒng má»Ÿ rá»™ng cao hÆ¡n.</p>
<h3>01. Sá»± khÃ¡c biá»‡t giá»¯a NIO vÃ  IO truyá»n thá»‘ng khi thao tÃ¡c tá»‡p</h3>
<p>Trong JDK 1.4, gÃ³i <code>java.nio.*</code> giá»›i thiá»‡u thÆ° viá»‡n Java I/O má»›i nháº±m <strong>tÄƒng tá»‘c Ä‘á»™</strong>. Thá»±c táº¿, gÃ³i I/O "cÅ©" Ä‘Ã£ Ä‘Æ°á»£c <strong>triá»ƒn khai láº¡i báº±ng NIO</strong>, cho nÃªn chÃºng ta cÃ³ thá»ƒ <strong>hÆ°á»Ÿng lá»£i tá»« nÃ³ mÃ  khÃ´ng cáº§n láº­p trÃ¬nh NIO má»™t cÃ¡ch rÃµ rÃ ng</strong>.</p>
<ul>
<li>NIO cÃ³ thá»ƒ dá»‹ch lÃ  no-blocking io hoáº·c new io Ä‘á»u Ä‘Æ°á»£c, cáº£ hai Ä‘á»u cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c~</li>
</ul>
<p>Khi Ä‘á»c sÃ¡ch "Java Programming Thought", cÃ¢u "chÃºng ta cÃ³ thá»ƒ hÆ°á»Ÿng lá»£i tá»« nÃ³ mÃ  khÃ´ng cáº§n láº­p trÃ¬nh NIO má»™t cÃ¡ch rÃµ rÃ ng" Ä‘Ã£ thu hÃºt sá»± chÃº Ã½ cá»§a tÃ´i, vÃ¬ váº­y: chÃºng ta <strong>thá»­ nghiá»‡m</strong> hiá»‡u suáº¥t sao chÃ©p tá»‡p sá»­ dá»¥ng NIO vÃ  <a href="/programming/java/io/file">IO truyá»n thá»‘ng</a>:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> SimpleFileTransferTest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p I/O truyá»n thá»‘ng Ä‘á»ƒ truyá»n tá»‡p</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> long</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> transferFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> source</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> des</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> startTime</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">currentTimeMillis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">des</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">exists</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">())</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            des</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">createNewFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Táº¡o luá»“ng Ä‘áº§u vÃ o vÃ  Ä‘áº§u ra</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        BufferedInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bis</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedInputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(source));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        BufferedOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bos</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedOutputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(des));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Sá»­ dá»¥ng máº£ng Ä‘á»ƒ truyá»n dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        byte</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75">bytes</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> byte</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> *</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1024</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">];</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        while</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ((len </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> bis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(bytes)) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            bos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(bytes, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, len);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> endTime</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">currentTimeMillis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> endTime </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> startTime;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p NIO Ä‘á»ƒ truyá»n tá»‡p</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> long</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> transferFileWithNIO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> source</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> des</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> startTime</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">currentTimeMillis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">des</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">exists</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">())</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            des</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">createNewFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Táº¡o Ä‘á»‘i tÆ°á»£ng RandomAccessFile</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        RandomAccessFile</span><span style="color:#E06C75;--shiki-dark:#E06C75"> read</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> RandomAccessFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(source, </span><span style="color:#98C379;--shiki-dark:#98C379">"rw"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        RandomAccessFile</span><span style="color:#E06C75;--shiki-dark:#E06C75"> write</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> RandomAccessFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(des, </span><span style="color:#98C379;--shiki-dark:#98C379">"rw"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Láº¥y kÃªnh tá»‡p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        FileChannel</span><span style="color:#E06C75;--shiki-dark:#E06C75"> readChannel</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        FileChannel</span><span style="color:#E06C75;--shiki-dark:#E06C75"> writeChannel</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Táº¡o vÃ  sá»­ dá»¥ng ByteBuffer Ä‘á»ƒ truyá»n dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        ByteBuffer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> byteBuffer</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ByteBuffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">allocate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> *</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1024</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        while</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">readChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(byteBuffer) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            byteBuffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">flip</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            writeChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(byteBuffer);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            byteBuffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">clear</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // ÄÃ³ng kÃªnh tá»‡p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        writeChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        readChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> endTime</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">currentTimeMillis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> endTime </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> startTime;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        SimpleFileTransferTest</span><span style="color:#E06C75;--shiki-dark:#E06C75"> simpleFileTransferTest</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> SimpleFileTransferTest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> source</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"[ç”µå½±å¤©å ‚www.dygod.cn]çŒœç«è½¦-cd1.rmvb"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> destination</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"io.avi"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> nioFile</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"nio.avi"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // So sÃ¡nh thá»i gian sao chÃ©p tá»‡p sá»­ dá»¥ng I/O truyá»n thá»‘ng vÃ  NIO</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> time</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> simpleFileTransferTest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">transferFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(source, destination);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(time </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> "ï¼šThá»i gian byte stream thÃ´ng thÆ°á»ng"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> timeNio</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> simpleFileTransferTest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">transferFileWithNIO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(source, nioFile);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(timeNio </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> "ï¼šThá»i gian NIO"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>TrÆ°á»›c khi giáº£i thÃ­ch Ä‘oáº¡n mÃ£ nÃ y, chÃºng ta Ä‘Ã£ tá»«ng nÃ³i vá» <a href="/programming/java/io/file">RandomAccessFile</a>. FileChannel lÃ  má»™t lá»›p trong thÆ° viá»‡n Java NIO (New I/O), cung cáº¥p cÃ¡c thao tÃ¡c I/O hiá»‡u quáº£ Ä‘á»‘i vá»›i tá»‡p tin, há»— trá»£ truy cáº­p ngáº«u nhiÃªn vÃ o tá»‡p tin vÃ  cho phÃ©p Ä‘á»c ghi dá»¯ liá»‡u á»Ÿ báº¥t ká»³ vá»‹ trÃ­ nÃ o trong tá»‡p tin.</p>
<p>KhÃ¡c vá»›i RandomAccessFile, FileChannel sá»­ dá»¥ng <a href="/programming/java/nio/buffer-channel">ByteBuffer (bá»™ Ä‘á»‡m)</a> Ä‘á»ƒ truyá»n dá»¯ liá»‡u.</p>
<p>Tuy nhiÃªn, trÆ°á»›c khi tÃ´i Ä‘Æ°a ra káº¿t luáº­n thá»±c táº¿, báº¡n cÃ³ nhá»¯ng nháº­n Ä‘á»‹nh sau Ä‘Ã¢y khÃ´ng?</p>
<ul>
<li>Äá»‘i vá»›i cÃ¡c tá»‡p nhá», sá»± khÃ¡c biá»‡t vá» hiá»‡u suáº¥t giá»¯a NIO vÃ  IO thÃ´ng thÆ°á»ng cÃ³ thá»ƒ khÃ´ng rÃµ rá»‡t láº¯m, vÃ¬ tá»‡p nhá» nÃªn quÃ¡ trÃ¬nh sao chÃ©p diá»…n ra nhanh chÃ³ng.</li>
<li>Äá»‘i vá»›i cÃ¡c tá»‡p lá»›n, hiá»‡u suáº¥t sá»­ dá»¥ng NIO cÃ³ thá»ƒ cao hÆ¡n Ä‘Ã¡ng ká»ƒ so vá»›i IO thÃ´ng thÆ°á»ng. VÃ¬ NIO sá»­ dá»¥ng cÆ¡ cháº¿ bá»™ Ä‘á»‡m vÃ  kÃªnh hiá»‡u quáº£ hÆ¡n, nÃ³ cÃ³ thá»ƒ truyá»n dá»¯ liá»‡u nhanh hÆ¡n trong bá»™ nhá»›.</li>
</ul>
<p>Tuy nhiÃªn, káº¿t quáº£ thá»±c táº¿ cÃ³ thá»ƒ khiáº¿n báº¡n ngáº¡c nhiÃªn:</p>
<figure><img src="https://cdn.tobebetterjavaer.com/stutymore/why-20230331191748.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>Khi tá»‡p tin cÃ ng lá»›n, tá»‘c Ä‘á»™ cá»§a byte stream thÃ´ng thÆ°á»ng (IO truyá»n thá»‘ng) láº¡i nhanh hÆ¡n (táº¥t nhiÃªn, Ä‘Ã¢y lÃ  thá»­ nghiá»‡m cÃ¡ nhÃ¢n, cÃ³ thá»ƒ khÃ´ng chÃ­nh xÃ¡c), váº­y NIO cÃ²n cáº§n lÃ m gÃ¬?</p>
<p>HÆ¡n ná»¯a, chi phÃ­ há»c táº­p cá»§a NIO cÅ©ng cao hÆ¡n so vá»›i IO truyá»n thá»‘ng.</p>
<p>Váº­y cÃ³ nghÄ©a lÃ  chÃºng ta <strong>cÃ³ thá»ƒ khÃ´ng cáº§n/ khÃ´ng nÃªn há»c NIO</strong>?</p>
<p>CÃ¢u tráº£ lá»i lÃ  <strong>khÃ´ng</strong>. Thao tÃ¡c I/O thÆ°á»ng xuyÃªn Ä‘Æ°á»£c sá»­ dá»¥ng trong <strong>hai tÃ¬nh huá»‘ng</strong> sau:</p>
<ul>
<li>I/O tá»‡p tin</li>
<li>I/O máº¡ng</li>
</ul>
<p>VÃ  sá»± háº¥p dáº«n cá»§a NIO chá»§ yáº¿u lÃ  á»Ÿ <strong>máº¡ng</strong>!</p>
<p>Má»¥c tiÃªu thiáº¿t káº¿ cá»§a NIO (New I/O) lÃ  giáº£i quyáº¿t nhÆ°á»£c Ä‘iá»ƒm hiá»‡u suáº¥t cá»§a I/O truyá»n thá»‘ng (BIO, Blocking I/O) khi xá»­ lÃ½ nhiá»u káº¿t ná»‘i Ä‘á»“ng thá»i. I/O truyá»n thá»‘ng trong giao tiáº¿p máº¡ng chá»§ yáº¿u sá»­ dá»¥ng I/O cháº·n, chá»‰ Ä‘á»‹nh má»™t luá»“ng cho má»—i káº¿t ná»‘i. Khi sá»‘ lÆ°á»£ng káº¿t ná»‘i tÄƒng lÃªn, hiá»‡u suáº¥t há»‡ thá»‘ng sáº½ bá»‹ áº£nh hÆ°á»Ÿng nghiÃªm trá»ng, vÃ  tÃ i nguyÃªn luá»“ng trá»Ÿ thÃ nh rÃ o cáº£n quan trá»ng. NIO cung cáº¥p I/O khÃ´ng cháº·n vÃ  nhiá»u lá»±a chá»n I/O, cÃ³ thá»ƒ xá»­ lÃ½ nhiá»u káº¿t ná»‘i Ä‘á»“ng thá»i trong má»™t luá»“ng, tá»« Ä‘Ã³ cáº£i thiá»‡n Ä‘Ã¡ng ká»ƒ hiá»‡u suáº¥t trong truyá»n thÃ´ng máº¡ng.</p>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c lÃ½ do mÃ  NIO vÆ°á»£t trá»™i hÆ¡n so vá»›i I/O truyá»n thá»‘ng trong truyá»n thÃ´ng máº¡ng:</p>
<p>â‘  NIO há»— trá»£ I/O khÃ´ng cháº·n, Ä‘iá»u nÃ y cÃ³ nghÄ©a lÃ  khi thá»±c hiá»‡n cÃ¡c thao tÃ¡c I/O, luá»“ng sáº½ khÃ´ng bá»‹ cháº·n láº¡i. Äiá»u nÃ y giÃºp quáº£n lÃ½ cÃ¡c káº¿t ná»‘i Ä‘á»“ng thá»i má»™t cÃ¡ch hiá»‡u quáº£ trong truyá»n thÃ´ng máº¡ng (cÃ³ thá»ƒ lÃ  hÃ ng ngÃ n hoáº·c tháº­m chÃ­ hÃ ng triá»‡u káº¿t ná»‘i). Tuy nhiÃªn, trong cÃ¡c hoáº¡t Ä‘á»™ng Ä‘á»c ghi tá»‡p, Æ°u Ä‘iá»ƒm nÃ y khÃ´ng rÃµ rá»‡t báº±ng vÃ¬ viá»‡c Ä‘á»c ghi tá»‡p thÆ°á»ng khÃ´ng Ä‘Ã²i há»i nhiá»u hoáº¡t Ä‘á»™ng Ä‘á»“ng thá»i.</p>
<p>â‘¡ NIO há»— trá»£ nhiá»u lá»±a chá»n I/O, Ä‘iá»u nÃ y cÃ³ nghÄ©a lÃ  má»™t luá»“ng cÃ³ thá»ƒ giÃ¡m sÃ¡t Ä‘á»“ng thá»i nhiá»u kÃªnh (nhÆ° socket), vÃ  xá»­ lÃ½ chÃºng khi cÃ³ sá»± kiá»‡n I/O (nhÆ° cÃ³ thá»ƒ Ä‘á»c, cÃ³ thá»ƒ ghi) sáºµn sÃ ng. Äiá»u nÃ y cáº£i thiá»‡n Ä‘Ã¡ng ká»ƒ hiá»‡u suáº¥t trong truyá»n thÃ´ng máº¡ng, vÃ¬ má»™t luá»“ng duy nháº¥t cÃ³ thá»ƒ quáº£n lÃ½ hiá»‡u quáº£ nhiá»u káº¿t ná»‘i Ä‘á»“ng thá»i. Tuy nhiÃªn, trong cÃ¡c hoáº¡t Ä‘á»™ng Ä‘á»c ghi tá»‡p, Æ°u Ä‘iá»ƒm nÃ y cÅ©ng khÃ´ng thá»ƒ hiá»‡n rÃµ rá»‡t.</p>
<p>â‘¢ NIO cung cáº¥p lá»›p ByteBuffer, cÃ³ thá»ƒ quáº£n lÃ½ bá»™ Ä‘á»‡m má»™t cÃ¡ch hiá»‡u quáº£. Äiá»u nÃ y quan trá»ng trong truyá»n thÃ´ng máº¡ng, vÃ¬ dá»¯ liá»‡u thÆ°á»ng Ä‘Æ°á»£c truyá»n Ä‘i dÆ°á»›i dáº¡ng byte stream. Tuy ráº±ng trong viá»‡c Ä‘á»c ghi tá»‡p, cÅ©ng cÃ³ bá»™ Ä‘á»‡m, nhÆ°ng Æ°u Ä‘iá»ƒm cá»§a nÃ³ khÃ´ng rÃµ rá»‡t láº¯m.</p>
<p>Here's the translation from Chinese to Vietnamese:</p>
<p>HÃ£y xem sá»± khÃ¡c biá»‡t trong mÃ£ mÃ¡y chá»§.</p>
<p>IO sá»­ dá»¥ng Socket, mÃ£ nguá»“n Ä‘Æ¡n giáº£n, tÃ´i sáº½ khÃ´ng thÃªm chÃº thÃ­ch vÃ¬ Ä‘Ã£ há»c trÆ°á»›c Ä‘Ã³, cÃ³ láº½ báº¡n cÅ©ng cÃ³ thá»ƒ hiá»ƒu, sá»­ dá»¥ng vÃ²ng láº·p while Ä‘á»ƒ láº¯ng nghe Socket tá»« phÃ­a mÃ¡y khÃ¡ch:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IOServer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            ServerSocket</span><span style="color:#E06C75;--shiki-dark:#E06C75"> serverSocket</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ServerSocket</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">8080</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            while</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                Socket</span><span style="color:#E06C75;--shiki-dark:#E06C75"> client</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> serverSocket</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">accept</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                InputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> in</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> client</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getInputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                OutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> out</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> client</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getOutputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                byte</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75">buffer</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> byte</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">];</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bytesRead</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, bytesRead);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                client</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>NIO, pháº§n nÃ y tÃ´i Ä‘Ã£ thÃªm chÃº thÃ­ch, chá»§ yáº¿u sá»­ dá»¥ng ServerSocketChannel vÃ  Selector:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NIOServer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Táº¡o ServerSocketChannel</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            ServerSocketChannel</span><span style="color:#E06C75;--shiki-dark:#E06C75"> serverSocketChannel</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ServerSocketChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // RÃ ng buá»™c cá»•ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            serverSocketChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">bind</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> InetSocketAddress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">8081</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Thiáº¿t láº­p cháº¿ Ä‘á»™ khÃ´ng cháº·n</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            serverSocketChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">configureBlocking</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Táº¡o Selector</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            Selector</span><span style="color:#E06C75;--shiki-dark:#E06C75"> selector</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Selector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // ÄÄƒng kÃ½ ServerSocketChannel vá»›i Selector, quan tÃ¢m Ä‘áº¿n sá»± kiá»‡n OP_ACCEPT</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            serverSocketChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">register</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(selector, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">SelectionKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">OP_ACCEPT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // VÃ²ng láº·p vÃ´ háº¡n, xá»­ lÃ½ sá»± kiá»‡n</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            while</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                // Cháº·n cho Ä‘áº¿n khi cÃ³ sá»± kiá»‡n xáº£y ra</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                selector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                // Láº¥y SelectionKey cÃ³ sá»± kiá»‡n xáº£y ra</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                Iterator</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">SelectionKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">iterator</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> selector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">selectedKeys</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">iterator</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                while</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">iterator</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">hasNext</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                    SelectionKey</span><span style="color:#E06C75;--shiki-dark:#E06C75"> key</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> iterator</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">next</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                    // Sau khi xá»­ lÃ½ xong, loáº¡i bá» khá»i táº­p selectedKeys</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                    iterator</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">remove</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                    // Kiá»ƒm tra loáº¡i sá»± kiá»‡n</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                    if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isAcceptable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                        // CÃ³ yÃªu cáº§u káº¿t ná»‘i má»›i</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                        ServerSocketChannel</span><span style="color:#E06C75;--shiki-dark:#E06C75"> server</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (ServerSocketChannel) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">channel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                        // Cháº¥p nháº­n káº¿t ná»‘i</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                        SocketChannel</span><span style="color:#E06C75;--shiki-dark:#E06C75"> client</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> server</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">accept</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                        // Thiáº¿t láº­p cháº¿ Ä‘á»™ khÃ´ng cháº·n</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                        client</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">configureBlocking</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                        // ÄÄƒng kÃ½ SocketChannel má»›i vá»›i Selector, quan tÃ¢m Ä‘áº¿n sá»± kiá»‡n OP_READ</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                        client</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">register</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(selector, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">SelectionKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">OP_READ</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#C678DD;--shiki-dark:#C678DD"> if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isReadable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                        // CÃ³ dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘á»c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                        SocketChannel</span><span style="color:#E06C75;--shiki-dark:#E06C75"> client</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (SocketChannel) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">channel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                        // Táº¡o bá»™ Ä‘á»‡m ByteBuffer</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                        ByteBuffer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> buffer</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ByteBuffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">allocate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                        // Äá»c dá»¯ liá»‡u tá»« SocketChannel vÃ  ghi vÃ o ByteBuffer</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                        client</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                        // Äáº£o ngÆ°á»£c ByteBuffer Ä‘á»ƒ chuáº©n bá»‹ Ä‘á»c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                        buffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">flip</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                        // Ghi dá»¯ liá»‡u tá»« ByteBuffer trá»Ÿ láº¡i SocketChannel</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                        client</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                        // ÄÃ³ng káº¿t ná»‘i</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                        client</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>DÆ°á»›i Ä‘Ã¢y lÃ  mÃ£ nguá»“n táº¡o má»™t mÃ¡y chá»§ TCP Ä‘Æ¡n giáº£n dá»±a trÃªn Java NIO. NÃ³ sá»­ dá»¥ng <a href="/programming/java/nio/buffer-channel.html" target="_blank">ServerSocketChannel vÃ  Selector (sáº½ Ä‘Æ°á»£c giáº£i thÃ­ch sau)</a> Ä‘á»ƒ thá»±c hiá»‡n I/O khÃ´ng cháº·n vÃ  I/O Ä‘a kÃªnh. MÃ¡y chá»§ láº·p láº¡i láº¯ng nghe sá»± kiá»‡n, khi cÃ³ yÃªu cáº§u káº¿t ná»‘i má»›i, nÃ³ sáº½ cháº¥p nháº­n káº¿t ná»‘i vÃ  Ä‘Äƒng kÃ½ SocketChannel má»›i vÃ o Selector, quan tÃ¢m Ä‘áº¿n sá»± kiá»‡n OP_READ. Khi cÃ³ dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘á»c, nÃ³ sáº½ Ä‘á»c dá»¯ liá»‡u tá»« SocketChannel vÃ  ghi vÃ o ByteBuffer, sau Ä‘Ã³ gá»­i dá»¯ liá»‡u tá»« ByteBuffer trá»Ÿ láº¡i SocketChannel.</p>
<p>ÄÃ¢y lÃ  giáº£i thÃ­ch Ä‘Æ¡n giáº£n vá» Socket vÃ  ServerSocket, cÃ¹ng vá»›i ServerSocketChannel vÃ  SocketChannel.</p>
<ul>
<li>Socket vÃ  ServerSocket lÃ  cÃ¡ch láº­p trÃ¬nh I/O cháº·n truyá»n thá»‘ng, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thiáº¿t láº­p vÃ  quáº£n lÃ½ káº¿t ná»‘i TCP.
<ul>
<li>Socket: Äáº¡i diá»‡n cho socket cá»§a mÃ¡y khÃ¡ch, chá»‹u trÃ¡ch nhiá»‡m thiáº¿t láº­p káº¿t ná»‘i vÃ  truyá»n dá»¯ liá»‡u vá»›i mÃ¡y chá»§.</li>
<li>ServerSocket: Äáº¡i diá»‡n cho socket cá»§a mÃ¡y chá»§, chá»‹u trÃ¡ch nhiá»‡m láº¯ng nghe yÃªu cáº§u káº¿t ná»‘i tá»« mÃ¡y khÃ¡ch. Khi cÃ³ yÃªu cáº§u káº¿t ná»‘i má»›i, ServerSocket sáº½ táº¡o má»™t Socket má»›i Ä‘á»ƒ giao tiáº¿p vá»›i mÃ¡y khÃ¡ch.</li>
</ul>
</li>
</ul>
<p>Trong láº­p trÃ¬nh I/O cháº·n truyá»n thá»‘ng, má»—i káº¿t ná»‘i Ä‘á»u cáº§n má»™t luá»“ng riÃªng Ä‘á»ƒ xá»­ lÃ½, Ä‘iá»u nÃ y dáº«n Ä‘áº¿n váº¥n Ä‘á» vá» hiá»‡u suáº¥t trong cÃ¡c tÃ¬nh huá»‘ng cÃ³ nhiá»u káº¿t ná»‘i. Äiá»u nÃ y sáº½ Ä‘Æ°á»£c tháº¥y rÃµ hÆ¡n trong cÃ¡c trÆ°á»ng há»£p kiá»ƒm tra mÃ¡y khÃ¡ch sáº¯p tá»›i.</p>
<p>Äá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» hiá»‡u suáº¥t trong láº­p trÃ¬nh I/O cháº·n truyá»n thá»‘ng, Java NIO Ä‘Ã£ giá»›i thiá»‡u <a href="/programming/java/nio/network-connect">ServerSocketChannel vÃ  SocketChannel</a>. ChÃºng há»— trá»£ I/O khÃ´ng cháº·n, cho phÃ©p xá»­ lÃ½ nhiá»u káº¿t ná»‘i trong cÃ¹ng má»™t luá»“ng.</p>
<ul>
<li>ServerSocketChannel: TÆ°Æ¡ng tá»± nhÆ° ServerSocket, Ä‘áº¡i diá»‡n cho kÃªnh socket mÃ¡y chá»§. NÃ³ láº¯ng nghe yÃªu cáº§u káº¿t ná»‘i tá»« mÃ¡y khÃ¡ch vÃ  cÃ³ thá»ƒ Ä‘Æ°á»£c thiáº¿t láº­p trong cháº¿ Ä‘á»™ khÃ´ng cháº·n, cÃ³ nghÄ©a lÃ  khÃ´ng cháº·n luá»“ng khi Ä‘ang chá» yÃªu cáº§u káº¿t ná»‘i tá»« phÃ­a mÃ¡y khÃ¡ch.</li>
<li>SocketChannel: TÆ°Æ¡ng tá»± nhÆ° Socket, Ä‘áº¡i diá»‡n cho kÃªnh socket mÃ¡y khÃ¡ch. NÃ³ chá»‹u trÃ¡ch nhiá»‡m thiáº¿t láº­p káº¿t ná»‘i vá»›i mÃ¡y chá»§ vÃ  truyá»n dá»¯ liá»‡u. SocketChannel cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c thiáº¿t láº­p trong cháº¿ Ä‘á»™ khÃ´ng cháº·n, khÃ´ng cháº·n luá»“ng khi Ä‘ang Ä‘á»c vÃ  ghi dá»¯ liá»‡u.</li>
</ul>
<p>Tiáº¿p theo lÃ  <a href="/programming/java/nio/buffer-channel">Selector</a>, chÃºng ta sáº½ nÃ³i chi tiáº¿t sau.</p>
<p>Selector lÃ  má»™t thÃ nh pháº§n chÃ­nh trong Java NIO, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ triá»ƒn khai <a href="/programming/java/nio/multiplexing">I/O Ä‘a kÃªnh</a>. NÃ³ cho phÃ©p theo dÃµi Ä‘á»“ng thá»i nhiá»u ServerSocketChannel vÃ  SocketChannel trong má»™t luá»“ng duy nháº¥t vÃ  xÃ¡c Ä‘á»‹nh cÃ¡c sá»± kiá»‡n quan tÃ¢m báº±ng SelectionKey. Khi cÃ³ sá»± kiá»‡n xáº£y ra, Selector sáº½ thÃªm SelectionKey tÆ°Æ¡ng á»©ng vÃ o táº­p cÃ¡c khÃ³a Ä‘Ã£ chá»n. Báº±ng cÃ¡ch sá»­ dá»¥ng Selector, cÃ³ thá»ƒ xá»­ lÃ½ Ä‘á»“ng thá»i nhiá»u káº¿t ná»‘i trong má»™t luá»“ng duy nháº¥t má»™t cÃ¡ch hiá»‡u quáº£, Ä‘áº·c biá»‡t lÃ  trong cÃ¡c tÃ¬nh huá»‘ng cÃ³ nhiá»u káº¿t ná»‘i Ä‘á»“ng thá»i.</p>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  trÆ°á»ng há»£p kiá»ƒm tra mÃ¡y khÃ¡ch Ä‘Æ¡n giáº£n:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TestClient</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> InterruptedException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> clientCount</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        ExecutorService</span><span style="color:#E06C75;--shiki-dark:#E06C75"> executorServiceIO</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Executors</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newFixedThreadPool</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        ExecutorService</span><span style="color:#E06C75;--shiki-dark:#E06C75"> executorServiceNIO</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Executors</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newFixedThreadPool</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // mÃ¡y khÃ¡ch sá»­ dá»¥ng IO truyá»n thá»‘ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Runnable</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ioClient</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> () </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                Socket</span><span style="color:#E06C75;--shiki-dark:#E06C75"> socket</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Socket</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"localhost"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">8080</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                OutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> out</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> socket</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getOutputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                InputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> in</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> socket</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getInputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Hello, æ²‰é»˜ç‹äºŒ IO!"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getBytes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                byte</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75">buffer</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> byte</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">];</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                socket</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // mÃ¡y khÃ¡ch sá»­ dá»¥ng NIO</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Runnable</span><span style="color:#E06C75;--shiki-dark:#E06C75"> nioClient</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> () </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                SocketChannel</span><span style="color:#E06C75;--shiki-dark:#E06C75"> socketChannel</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> SocketChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                socketChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">connect</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> InetSocketAddress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"localhost"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">8081</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                ByteBuffer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> buffer</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ByteBuffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">wrap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Hello, æ²‰é»˜ç‹äºŒ NIO!"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getBytes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                socketChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                buffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">clear</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                socketChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                socketChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Kiá»ƒm tra hiá»‡u suáº¥t cá»§a mÃ¡y chá»§ NIO vÃ  IO truyá»n thá»‘ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> startTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">endTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        startTime </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">currentTimeMillis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> clientCount; i++) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            executorServiceIO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">execute</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(ioClient);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        executorServiceIO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">shutdown</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        executorServiceIO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">awaitTermination</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TimeUnit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">MINUTES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        endTime </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">currentTimeMillis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"MÃ¡y chá»§ IO truyá»n thá»‘ng xá»­ lÃ½ "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> clientCount </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> " mÃ¡y khÃ¡ch trong: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (endTime </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> startTime) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> "ms"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        startTime </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">currentTimeMillis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> clientCount; i++) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            executorServiceNIO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">execute</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(nioClient);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        executorServiceNIO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">shutdown</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        executorServiceNIO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">awaitTermination</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TimeUnit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">MINUTES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        endTime </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">currentTimeMillis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"MÃ¡y chá»§ NIO xá»­ lÃ½ "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> clientCount </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> " mÃ¡y khÃ¡ch trong: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (endTime </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> startTime) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> "ms"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong bÃ i kiá»ƒm tra hiá»‡u suáº¥t Ä‘Æ¡n giáº£n nÃ y, chÃºng ta sá»­ dá»¥ng Thread Pool cá»‘ Ä‘á»‹nh (10 luá»“ng) Ä‘á»ƒ mÃ´ phá»ng yÃªu cáº§u mÃ¡y khÃ¡ch Ä‘á»“ng thá»i. ChÃºng ta kiá»ƒm tra thá»i gian mÃ¡y chá»§ NIO vÃ  mÃ¡y chá»§ IO truyá»n thá»‘ng máº¥t Ä‘á»ƒ xá»­ lÃ½ 10000 yÃªu cáº§u mÃ¡y khÃ¡ch. HÃ£y xem káº¿t quáº£.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>MÃ¡y chá»§ IO truyá»n thá»‘ng xá»­ lÃ½ 10000 mÃ¡y khÃ¡ch trong: 8432 ms</span></span>
<span class="line"><span>MÃ¡y chá»§ NIO xá»­ lÃ½ 10000 mÃ¡y khÃ¡ch trong: 3749 ms</span></span></code></pre>
</div><p>CÃ³ thá»ƒ tháº¥y, NIO nhanh gáº¥p Ä‘Ã´i so vá»›i IO truyá»n thá»‘ng. Táº¥t nhiÃªn, Ä‘Ã¢y lÃ  káº¿t quáº£ trÃªn mÃ¡y cá»¥c bá»™ cá»§a tÃ´i, náº¿u triá»ƒn khai mÃ¡y chá»§ trong mÃ´i trÆ°á»ng product, káº¿t quáº£ cÃ³ thá»ƒ khÃ¡c. Tuy nhiÃªn, tÃ´i Ä‘Ã£ cháº¡y thá»­ nhiá»u láº§n trÃªn mÃ¡y cá»¥c bá»™ vÃ  káº¿t quáº£ gáº§n nhÆ° nhÆ° váº­y.</p>
<p>Äiá»u nÃ y cho tháº¥y ráº±ng NIO thá»±c sá»± cÃ³ hiá»‡u suáº¥t cao hÆ¡n trong truyá»n thÃ´ng máº¡ng so vá»›i IO truyá»n thá»‘ng.</p>
<h3>03. Tá»•ng káº¿t</h3>
<p>Ná»™i dung cá»§a bÃ i viáº¿t táº­p trung vÃ o sá»± khÃ¡c biá»‡t giá»¯a NIO (New IO) vÃ  IO truyá»n thá»‘ng, bao gá»“m mÃ´ hÃ¬nh IO, hoáº¡t Ä‘á»™ng trÃªn tá»‡p tin vÃ  truyá»n thÃ´ng máº¡ng.</p>
<ul>
<li>
<p>IO truyá»n thá»‘ng sá»­ dá»¥ng mÃ´ hÃ¬nh cháº·n, trong Ä‘Ã³ luá»“ng khÃ´ng thá»ƒ thá»±c thi cÃ¡c tÃ¡c vá»¥ khÃ¡c trong khi chá» Ä‘á»£i hoáº¡t Ä‘á»™ng IO. NIO sá»­ dá»¥ng mÃ´ hÃ¬nh khÃ´ng cháº·n, cho phÃ©p luá»“ng thá»±c thi cÃ¡c tÃ¡c vá»¥ khÃ¡c trong khi chá» Ä‘á»£i IO. Báº±ng cÃ¡ch sá»­ dá»¥ng Selector Ä‘á»ƒ giÃ¡m sÃ¡t sá»± kiá»‡n IO trÃªn nhiá»u kÃªnh (Channel), NIO cáº£i thiá»‡n hiá»‡u suáº¥t vÃ  kháº£ nÄƒng má»Ÿ rá»™ng.</p>
</li>
<li>
<p>IO truyá»n thá»‘ng sá»­ dá»¥ng cÃ¡c lá»›p dá»±a trÃªn luá»“ng byte hoáº·c luá»“ng kÃ½ tá»± (nhÆ° FileInputStream, BufferedReader) Ä‘á»ƒ Ä‘á»c vÃ  ghi tá»‡p tin. NIO sá»­ dá»¥ng Channel vÃ  Buffer Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng tá»‡p tin, tuy nhiÃªn khÃ´ng cÃ³ nhiá»u lá»£i tháº¿ vá» hiá»‡u suáº¥t so vá»›i IO truyá»n thá»‘ng.</p>
</li>
<li>
<p>IO truyá»n thá»‘ng sá»­ dá»¥ng Socket vÃ  ServerSocket cho truyá»n thÃ´ng máº¡ng, Ä‘á»“ng thá»i gáº·p pháº£i váº¥n Ä‘á» cháº·n. NIO cung cáº¥p SocketChannel vÃ  ServerSocketChannel Ä‘á»ƒ há»— trá»£ truyá»n thÃ´ng máº¡ng khÃ´ng cháº·n, tÄƒng kháº£ nÄƒng xá»­ lÃ½ Ä‘a nhiá»‡m.</p>
</li>
</ul>
]]></content:encoded>
      <enclosure url="https://cdn.tobebetterjavaer.com/stutymore/why-20230331191748.png" type="image/png"/>
    </item>
    <item>
      <title>Java 14 Features</title>
      <link>https://vanhung4499.github.io/programming/java/java8/java14.html</link>
      <guid>https://vanhung4499.github.io/programming/java/java8/java14.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Java 14 Features</source>
      <description>CÃ¡c TÃ­nh NÄƒng Má»›i cá»§a Java 14 Java 14 Ä‘Ã£ giá»›i thiá»‡u cÃ¡c tÃ­nh nÄƒng má»›i nhÆ° Record, pattern matching vá»›i instanceof, vÃ  chÃ­nh thá»©c hÃ³a biá»ƒu thá»©c switch tá»« Java 12. HÃ£y cÃ¹ng chÃºng ...</description>
      <category>java</category>
      <pubDate>Thu, 04 Jul 2024 13:24:36 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Java 14 Ä‘Ã£ giá»›i thiá»‡u cÃ¡c tÃ­nh nÄƒng má»›i nhÆ° Record, pattern matching vá»›i instanceof, vÃ  chÃ­nh thá»©c hÃ³a biá»ƒu thá»©c switch tá»« Java 12. HÃ£y cÃ¹ng chÃºng ta tÃ¬m hiá»ƒu qua cÃ¡c tÃ­nh nÄƒng nÃ y.</p>
<figure><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xMTc5Mzg5LTA2N2E2NGZiZWY3OTU0MTAucG5n?x-oss-process=image/format,png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h3>01. <code>instanceof</code></h3>
<p>Theo thá»© tá»± cÃ¡c tÃ­nh nÄƒng má»›i, chÃºng ta sáº½ báº¯t Ä‘áº§u vá»›i <code>instanceof</code>. CÃ¡ch sá»­ dá»¥ng <code>instanceof</code> cÅ© nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> OldInstanceOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Object</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "Java 14ï¼ŒçœŸé¦™"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (str </span><span style="color:#C678DD;--shiki-dark:#C678DD">instanceof</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> String) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> s</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (String) str;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">s</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Báº¡n cáº§n sá»­ dá»¥ng <code>instanceof</code> Ä‘á»ƒ kiá»ƒm tra xem kiá»ƒu cá»§a <code>str</code> cÃ³ pháº£i lÃ  <code>String</code> hay khÃ´ng (bÆ°á»›c Ä‘áº§u tiÃªn), sau Ä‘Ã³ trong cÃ¢u lá»‡nh <code>if</code> báº¡n pháº£i Ã©p kiá»ƒu <code>str</code> thÃ nh <code>String</code> (bÆ°á»›c thá»© hai) vÃ  pháº£i khai bÃ¡o má»™t biáº¿n má»›i Ä‘á»ƒ lÆ°u giÃ¡ trá»‹ sau khi Ã©p kiá»ƒu (bÆ°á»›c thá»© ba).</p>
<p>Ba bÆ°á»›c nÃ y khÃ´ng pháº£i lÃ  quÃ¡ nhiá»u, nhÆ°ng váº«n cáº£m tháº¥y cÃ³ thá»ƒ cÃ³ cÃº phÃ¡p tá»‘t hÆ¡n. VÃ  Ä‘Ãºng váº­y, Java 14 Ä‘Ã£ nghÄ© Ä‘áº¿n Ä‘iá»u nÃ y.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NewInstanceOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Object</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "Java 14ï¼ŒçœŸé¦™"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (str </span><span style="color:#C678DD;--shiki-dark:#C678DD">instanceof</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> s) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">s</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Báº¡n cÃ³ thá»ƒ trá»±c tiáº¿p thÃªm má»™t biáº¿n vÃ o trong Ä‘iá»u kiá»‡n <code>if</code> khi kiá»ƒm tra kiá»ƒu, khÃ´ng cáº§n pháº£i Ã©p kiá»ƒu vÃ  khai bÃ¡o biáº¿n má»›i ná»¯a. Tháº­t lÃ  ngáº¯n gá»n, pháº£i khÃ´ng? Tuy nhiÃªn, <code>instanceof</code> vá»›i pattern matching trong Java 14 chá»‰ lÃ  phiÃªn báº£n xem trÆ°á»›c vÃ  khÃ´ng Ä‘Æ°á»£c báº­t máº·c Ä‘á»‹nh, do Ä‘Ã³ Ä‘oáº¡n mÃ£ nÃ y sáº½ gáº·p lá»—i biÃªn dá»‹ch (Java 14 khÃ´ng há»— trá»£ <code>instanceof</code> vá»›i pattern matching).</p>
<figure><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xMTc5Mzg5LTg1MTQ4YWI3MjI2ZmM4ZTUucG5n?x-oss-process=image/format,png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>Váº­y lÃ m tháº¿ nÃ o Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y? Báº¡n cáº§n pháº£i cáº¥u hÃ¬nh láº¡i phiÃªn báº£n ngÃ´n ngá»¯ trong dá»± Ã¡n cá»§a mÃ¬nh.</p>
<figure><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xMTc5Mzg5LTdhMzE3MDYwNjk5NTJmMDgucG5n?x-oss-process=image/format,png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>Sau khi thiáº¿t láº­p xong, lá»—i biÃªn dá»‹ch sáº½ biáº¿n máº¥t. Káº¿t quáº£ chÆ°Æ¡ng trÃ¬nh nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>10</span></span></code></pre>
</div><p>Ráº¥t tá»‘t, tháº­t tuyá»‡t vá»i. Báº¡n cÃ³ muá»‘n biáº¿t trÃ¬nh biÃªn dá»‹ch Java Ä‘Ã£ lÃ m gÃ¬ á»Ÿ phÃ­a sau khÃ´ng? HÃ£y xem mÃ£ bytecode sau khi dá»‹ch ngÆ°á»£c.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NewInstanceOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> NewInstanceOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Object</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "Java 14ï¼ŒçœŸé¦™"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> s</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (str </span><span style="color:#C678DD;--shiki-dark:#C678DD">instanceof</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> String </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&amp;&amp;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (s </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (String) str) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (String) str) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">s</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>TrÆ°á»›c khi kiá»ƒm tra Ä‘iá»u kiá»‡n trong <code>if</code>, trÃ¬nh biÃªn dá»‹ch Ä‘Ã£ khai bÃ¡o biáº¿n <code>s</code>, sau Ä‘Ã³ trong Ä‘iá»u kiá»‡n <code>if</code> nÃ³ thá»±c hiá»‡n Ã©p kiá»ƒu <code>s = (String) str</code> vÃ  kiá»ƒm tra xem <code>s</code> vÃ  <code>str</code> cÃ³ báº±ng nhau hay khÃ´ng. ÄÃ¢y thá»±c sá»± lÃ  má»™t tÃ­nh nÄƒng tá»‘t giÃºp tÄƒng nÄƒng suáº¥t cá»§a láº­p trÃ¬nh viÃªn, ráº¥t hy vá»ng tÃ­nh nÄƒng nÃ y sáº½ Ä‘Æ°á»£c chÃ­nh thá»©c hÃ³a trong phiÃªn báº£n tiáº¿p theo.</p>
<h3>02. <code>Records</code></h3>
<p>Trong bÃ i viáº¿t trÆ°á»›c, tÃ´i Ä‘Ã£ nÃ³i vá» <a href="/programming/extra/immutable">tÃ­nh báº¥t biáº¿n cá»§a lá»›p</a>, nÃ³ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a nhÆ° sau:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Writer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Writer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">age</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getAge</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Äá»‘i vá»›i <code>Records</code>, má»™t Record Ä‘áº¡i diá»‡n cho má»™t tráº¡ng thÃ¡i báº¥t biáº¿n. Máº·c dÃ¹ nÃ³ sáº½ cung cáº¥p cÃ¡c phÆ°Æ¡ng thá»©c nhÆ° <code>equals()</code>, <code>hashCode()</code>, <code>toString()</code>, constructor, vÃ  cÃ¡c getter cá»§a trÆ°á»ng, nhÆ°ng nÃ³ khÃ´ng thay tháº¿ lá»›p Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ thay Ä‘á»•i (khÃ´ng cÃ³ setter), cÅ©ng nhÆ° cÃ¡c tÃ­nh nÄƒng do Lombok cung cáº¥p.</p>
<p>HÃ£y dÃ¹ng <code>Records</code> Ä‘á»ƒ thay tháº¿ lá»›p <code>Writer</code> á»Ÿ trÃªn:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> record</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Writer</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> age) </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span></code></pre>
</div><p>Báº¡n tháº¥y Ä‘áº¥y, chá»‰ cáº§n má»™t dÃ²ng mÃ£ lÃ  Ä‘á»§. Quan trá»ng lÃ  nÃ³ cÃ³ nhiá»u tÃ­nh nÄƒng hÆ¡n so vá»›i mÃ£ trÆ°á»›c Ä‘Ã³. HÃ£y xem mÃ£ bytecode sau khi dá»‹ch ngÆ°á»£c:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Writer</span><span style="color:#C678DD;--shiki-dark:#C678DD"> extends</span><span style="color:#E06C75;--shiki-dark:#E06C75"> java.lang.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Record</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">lang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Writer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">java</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">lang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">/* compiled code */</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">lang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">/* compiled code */</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> hashCode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">/* compiled code */</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> boolean</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> equals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">java</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">lang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Object</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> o</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">/* compiled code */</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">lang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">/* compiled code */</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">/* compiled code */</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Lá»›p lÃ  <code>final</code>, cÃ¡c trÆ°á»ng lÃ  <code>private final</code>, constructor cÃ³ hai tham sá»‘, cÃ¡c phÆ°Æ¡ng thá»©c <code>toString()</code>, <code>hashCode()</code>, <code>equals()</code> cÅ©ng cÃ³, phÆ°Æ¡ng thá»©c getter cÅ©ng cÃ³, chá»‰ khÃ¡c lÃ  khÃ´ng cÃ³ tiá»n tá»‘ <code>get</code>. NhÆ°ng khÃ´ng cÃ³ phÆ°Æ¡ng thá»©c setter, tá»©c lÃ  <code>Records</code> thá»±c sá»± dÃ nh cho cÃ¡c Ä‘á»‘i tÆ°á»£ng báº¥t biáº¿n - Ä‘Ã£ Ä‘Æ°á»£c xÃ¡c minh. Váº­y sá»­ dá»¥ng <code>Records</code> nhÆ° tháº¿ nÃ o?</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> WriterDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Writer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> writer</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Writer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">18</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"toString: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> writer);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"hashCode: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> writer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">hashCode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"name: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> writer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"age: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> writer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Writer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> writer1</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Writer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">18</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"equals: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">writer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">equals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(writer1)));</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Káº¿t quáº£ chÆ°Æ¡ng trÃ¬nh nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>toString: Writer[name=Tom, age=18]</span></span>
<span class="line"><span>hashCode: 1130697218</span></span>
<span class="line"><span>name: Tom</span></span>
<span class="line"><span>age: 18</span></span>
<span class="line"><span>equals: true</span></span></code></pre>
</div><p>Ráº¥t tá»‘t, tháº­t tuyá»‡t vá»i. Sau nÃ y viá»‡c Ä‘á»‹nh nghÄ©a cÃ¡c lá»›p báº¥t biáº¿n sáº½ Ä‘Æ¡n giáº£n hÆ¡n ráº¥t nhiá»u, ráº¥t mong ráº±ng tÃ­nh nÄƒng nÃ y sáº½ Ä‘Æ°á»£c chÃ­nh thá»©c hÃ³a trong phiÃªn báº£n tiáº¿p theo.</p>
<h3>03. Biá»ƒu thá»©c <code>switch</code></h3>
<p>Vá» biá»ƒu thá»©c <code>switch</code>, tÃ´i Ä‘Ã£ giáº£i thÃ­ch chi tiáº¿t trong má»™t bÃ i viáº¿t trÆ°á»›c Ä‘Ã¢y, báº¡n cÃ³ thá»ƒ nháº¥p vÃ o <a href="https://mp.weixin.qq.com/s/1BDDLDSKDGwQAfIFMyySdg" target="_blank" rel="noopener noreferrer">liÃªn káº¿t nÃ y</a> Ä‘á»ƒ xem láº¡i. Hai tuáº§n trÃ´i qua, biá»ƒu thá»©c <code>switch</code> cuá»‘i cÃ¹ng Ä‘Ã£ Ä‘Æ°á»£c chÃ­nh thá»©c cÃ´ng nháº­n, chÃºc má»«ng chÃºc má»«ng.</p>
<p>Nhá»› khi Ä‘Äƒng bÃ i viáº¿t nÃ y lÃªn Juejin, tÃ´i Ä‘Ã£ bá»‹ ráº¥t nhiá»u ngÆ°á»i chá»‰ trÃ­ch vÃ´ lÃ½, há» nÃ³i: â€œCá»© tÆ°á»Ÿng cÃ³ ká»¹ thuáº­t gÃ¬ má»›i, khÃ´ng ngá» láº¡i dÃ¹ng Java 13, mÃ  chÃºng tÃ´i váº«n Ä‘ang dá»«ng á»Ÿ Java 8!â€. ÄÃ¢y rÃµ rÃ ng lÃ  má»™t thÃ¡i Ä‘á»™ báº£o thá»§, ráº¥t Ä‘Ã¡ng trÃ¡nh, láº­p trÃ¬nh viÃªn khÃ´ng nÃªn nhÆ° váº­y. Má»™t lÃ½ do Ä‘Æ¡n giáº£n lÃ , Java 6 cÅ©ng tá»«ng ráº¥t kinh Ä‘iá»ƒn, nhÆ°ng khÃ´ng pháº£i Ä‘Ã£ bá»‹ Java 8 thay tháº¿ sao? Theo thá»i gian, Java 8 sá»›m muá»™n cÅ©ng sáº½ bá»‹ thay tháº¿ bá»Ÿi cÃ¡c phiÃªn báº£n má»›i vÃ  cáº£i tiáº¿n hÆ¡n - luÃ´n cáº§n pháº£i tiáº¿n bá»™.</p>
<p>Vá» biá»ƒu thá»©c <code>switch</code>, tÃ´i sáº½ Ä‘Æ¡n giáº£n Ä‘Æ°a ra má»™t vÃ­ dá»¥ Ä‘á»ƒ báº¡n xem:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> SwitchDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    enum</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PlayerTypes</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">        TENNIS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">        FOOTBALL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">        BASKETBALL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">        PINGPANG</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">        UNKNOWN</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">createPlayer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PlayerTypes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">BASKETBALL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> createPlayer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PlayerTypes</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> playerType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#C678DD;--shiki-dark:#C678DD"> switch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (playerType) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            case</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> TENNIS </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#98C379;--shiki-dark:#98C379"> "Váº­n Ä‘á»™ng viÃªn quáº§n vá»£t Federer"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            case</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> FOOTBALL </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#98C379;--shiki-dark:#98C379"> "Cáº§u thá»§ bÃ³ng Ä‘Ã¡ Ronaldo"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            case</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> BASKETBALL </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#98C379;--shiki-dark:#98C379"> "Cáº§u thá»§ bÃ³ng rá»• LeBron James"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            case</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> PINGPANG </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#98C379;--shiki-dark:#98C379"> "Váº­n Ä‘á»™ng viÃªn bÃ³ng bÃ n Ma Long"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            case</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> UNKNOWN </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> IllegalArgumentException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"KhÃ´ng xÃ¡c Ä‘á»‹nh"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        };</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>NgoÃ i viá»‡c cÃ³ thá»ƒ sá»­ dá»¥ng cÃº phÃ¡p má»›i <code>-&gt;</code>, nÃ³ cÃ²n cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng nhÆ° má»™t káº¿t quáº£ tráº£ vá», tháº­t tuyá»‡t vá»i.</p>
<h3>04. Text Blocks</h3>
<p>TrÆ°á»›c khi khá»‘i vÄƒn báº£n (Text Blocks) xuáº¥t hiá»‡n, náº¿u chÃºng ta cáº§n ná»‘i chuá»—i nhiá»u dÃ²ng, chÃºng ta pháº£i sá»­ dá»¥ng ráº¥t nhiá»u dáº¥u ngoáº·c kÃ©p vÃ  dáº¥u cá»™ng, trÃ´ng nhÆ° má»™t má»› há»—n Ä‘á»™n vÃ  ráº¥t khÃ´ng tháº©m má»¹. Náº¿u tÃ¬nh cá» pháº£i ná»‘i cÃ¡c vÄƒn báº£n Ä‘á»‹nh dáº¡ng HTML (SQL nguyÃªn báº£n cÅ©ng váº­y), chÃºng ta cÃ²n pháº£i sáº¯p xáº¿p báº±ng khoáº£ng tráº¯ng vÃ  sá»­ dá»¥ng kÃ½ tá»± thoÃ¡t dÃ²ng <code>\n</code> Ä‘á»ƒ xuá»‘ng dÃ²ng, nhá»¯ng cÃ´ng viá»‡c rÆ°á»m rÃ  nÃ y thá»±c sá»± lÃ  má»™t tháº£m há»a Ä‘á»‘i vá»›i má»™t láº­p trÃ¬nh viÃªn.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> OldTextBlock</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> html</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "&lt;html&gt;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">                "    &lt;body&gt;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">                "        &lt;p&gt;Hello, world&lt;/p&gt;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">                "    &lt;/body&gt;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">                "&lt;/html&gt;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(html);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Java 14 thÃ¬ hoÃ n toÃ n khÃ¡c:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NewTextBlock</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> html</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> """</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">              &lt;html&gt;</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">                  &lt;body&gt;</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">                      &lt;p&gt;Hello, world&lt;/p&gt;</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">                  &lt;/body&gt;</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">              &lt;/html&gt;</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">              """</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(html);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Dáº¥u ngoáº·c kÃ©p, dáº¥u cá»™ng, kÃ½ tá»± thoÃ¡t dÃ²ng thá»«a thÃ£i, táº¥t cáº£ Ä‘á»u biáº¿n máº¥t. Chá»‰ cáº§n ba dáº¥u ngoáº·c kÃ©p á»Ÿ Ä‘áº§u vÃ  cuá»‘i lÃ  Ä‘á»§. TÃ´i chá»‰ cÃ³ thá»ƒ nÃ³i, tuyá»‡t vá»i, nÃ³ thá»±c sá»± tuyá»‡t vá»i!</p>
]]></content:encoded>
      <enclosure url="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xMTc5Mzg5LTA2N2E2NGZiZWY3OTU0MTAucG5n?x-oss-process=image/format,png" type="image/"/>
    </item>
    <item>
      <title>Lambda</title>
      <link>https://vanhung4499.github.io/programming/java/java8/lambda.html</link>
      <guid>https://vanhung4499.github.io/programming/java/java8/lambda.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Lambda</source>
      <description>Hiá»ƒu RÃµ Vá» Lambda Expression 01. SÆ¡ LÆ°á»£c Vá» Lambda Biá»ƒu thá»©c Lambda mÃ´ táº£ má»™t khá»‘i mÃ£ (hay cÃ²n gá»i lÃ  phÆ°Æ¡ng thá»©c áº©n danh), cÃ³ thá»ƒ Ä‘Æ°á»£c truyá»n lÃ m tham sá»‘ cho cÃ¡c phÆ°Æ¡ng thá»©c kh...</description>
      <category>java</category>
      <pubDate>Thu, 04 Jul 2024 13:24:36 GMT</pubDate>
      <content:encoded><![CDATA[
<h3>01. SÆ¡ LÆ°á»£c Vá» Lambda</h3>
<p>Biá»ƒu thá»©c Lambda mÃ´ táº£ má»™t khá»‘i mÃ£ (hay cÃ²n gá»i lÃ  phÆ°Æ¡ng thá»©c áº©n danh), cÃ³ thá»ƒ Ä‘Æ°á»£c truyá»n lÃ m tham sá»‘ cho cÃ¡c phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o hoáº·c phÆ°Æ¡ng thá»©c thÃ´ng thÆ°á»ng Ä‘á»ƒ thá»±c thi sau Ä‘Ã³. HÃ£y xem Ä‘oáº¡n mÃ£ dÆ°á»›i Ä‘Ã¢y:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">() </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span></code></pre>
</div><p>HÃ£y giáº£i thÃ­ch tá»« trÃ¡i sang pháº£i, <code>()</code> lÃ  danh sÃ¡ch tham sá»‘ cá»§a biá»ƒu thá»©c Lambda (trong trÆ°á»ng há»£p nÃ y khÃ´ng cÃ³ tham sá»‘), <code>-&gt;</code> biá»ƒu thá»‹ Ä‘oáº¡n mÃ£ nÃ y lÃ  biá»ƒu thá»©c Lambda (tá»©c lÃ  khi tháº¥y <code>-&gt;</code> chÃºng ta biáº¿t Ä‘Ã¢y lÃ  Lambda), vÃ  <code>System.out.println("Tom")</code> lÃ  mÃ£ sáº½ Ä‘Æ°á»£c thá»±c thi, nghÄ©a lÃ  sáº½ in ra "Tom" vÃ o luá»“ng Ä‘áº§u ra chuáº©n.</p>
<p>Nhá»¯ng ai cÃ³ ná»n táº£ng Java cÆ¡ báº£n háº³n khÃ´ng láº¡ gÃ¬ vá»›i interface Runnable, Ä‘Ã¢y lÃ  má»™t interface ná»n táº£ng cá»§a Ä‘a luá»“ng, Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FunctionalInterface</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Runnable</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">   public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> abstract</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> run</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Interface Runnable ráº¥t Ä‘Æ¡n giáº£n, chá»‰ cÃ³ má»™t phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng <code>run()</code>; nhá»¯ng ngÆ°á»i cáº©n tháº­n sáº½ nháº­n tháº¥y má»™t chÃº thÃ­ch láº¡ <code>@FunctionalInterface</code>, chÃº thÃ­ch nÃ y cÃ³ Ã½ nghÄ©a gÃ¬?</p>
<p>TÃ´i Ä‘Ã£ xem mÃ£ nguá»“n cá»§a nÃ³ vÃ  tháº¥y cÃ³ Ä‘oáº¡n chÃº thÃ­ch nhÆ° sau:</p>
<blockquote>
<p>Note that instances of functional interfaces can be created with lambda expressions, method references, or constructor references.</p>
</blockquote>
<p>Ã chÃ­nh lÃ , cÃ¡c thá»ƒ hiá»‡n cá»§a interface chá»©c nÄƒng Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u báº±ng <code>@FunctionalInterface</code> cÃ³ thá»ƒ Ä‘Æ°á»£c táº¡o ra báº±ng biá»ƒu thá»©c Lambda, tham chiáº¿u phÆ°Æ¡ng thá»©c hoáº·c tham chiáº¿u cáº¥u trÃºc.</p>
<p>Thá»±c táº¿ thÃ¬ sao?</p>
<p>TrÆ°á»›c Ä‘Ã¢y, khi táº¡o vÃ  khá»Ÿi Ä‘á»™ng má»™t luá»“ng, chÃºng ta lÃ m nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> LambdaTest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Thread</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Runnable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> run</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">start</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>CÃ²n vá»›i biá»ƒu thá»©c Lambda? ChÃºng ta chá»‰ cáº§n lÃ m nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> LambdaTest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Thread</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(() </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">start</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>CÃ³ pháº£i ráº¥t tuyá»‡t khÃ´ng! So vá»›i lá»›p áº©n danh, biá»ƒu thá»©c Lambda khÃ´ng chá»‰ dá»… hiá»ƒu hÆ¡n mÃ  cÃ²n Ä‘Æ¡n giáº£n hÃ³a Ä‘Ã¡ng ká»ƒ lÆ°á»£ng mÃ£ cáº§n viáº¿t.</p>
<h3>02. CÃº PhÃ¡p Lambda</h3>
<p>Má»—i biá»ƒu thá»©c Lambda tuÃ¢n theo cÃ¡c quy táº¯c sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>( danh sÃ¡ch-tham sá»‘ ) -&gt; { biá»ƒu-thá»©c-hoáº·c-cÃ¡c-cÃ¢u-lá»‡nh }</span></span></code></pre>
</div><p><code>()</code> chá»©a <code>danh sÃ¡ch-tham sá»‘</code> lÃ  cÃ¡c tham sá»‘ Ä‘Æ°á»£c ngÄƒn cÃ¡ch bá»Ÿi dáº¥u pháº©y. Báº¡n cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh loáº¡i tham sá»‘ hoáº·c khÃ´ng (trÃ¬nh biÃªn dá»‹ch sáº½ suy luáº­n dá»±a trÃªn ngá»¯ cáº£nh). Sau Java 11, báº¡n cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng tá»« khÃ³a <code>var</code> nhÆ° loáº¡i tham sá»‘, tÆ°Æ¡ng tá»± nhÆ° JavaScript.</p>
<p><code>-&gt;</code> lÃ  kÃ½ hiá»‡u cá»§a Lambda, giá»‘ng nhÆ° khi tháº¥y má»™t chá»‰ thá»‹ hoÃ ng gia thÃ¬ biáº¿t Ä‘Ã³ lÃ  cá»§a vua.</p>
<p><code>{}</code> chá»©a <code>biá»ƒu-thá»©c-hoáº·c-cÃ¡c-cÃ¢u-lá»‡nh</code> lÃ  pháº§n thÃ¢n cá»§a Lambda, cÃ³ thá»ƒ lÃ  má»™t dÃ²ng lá»‡nh hoáº·c nhiá»u dÃ²ng.</p>
<p>CÃ³ nhiá»u viá»‡c cÃ³ thá»ƒ lÃ m vá»›i biá»ƒu thá»©c Lambda, vÃ­ dá»¥ nhÆ°:</p>
<ol>
<li>GÃ¡n giÃ¡ trá»‹ cho biáº¿n, nhÆ° sau:</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Runnable</span><span style="color:#E06C75;--shiki-dark:#E06C75"> r </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> () </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> { </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"æ²‰é»˜ç‹äºŒ"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#E06C75;--shiki-dark:#E06C75"> }</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">r</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">run</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><ol start="2">
<li>LÃ m káº¿t quáº£ tráº£ vá», nhÆ° sau:</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> FileFilter</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getFilter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ext) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (pathname) </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> pathname</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">endsWith</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(ext);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><ol start="3">
<li>LÃ m pháº§n tá»­ cá»§a máº£ng, nhÆ° sau:</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PathMatcher</span><span style="color:#E06C75;--shiki-dark:#E06C75"> matchers[] </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        (path) </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> path</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">endsWith</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">),</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        (path) </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> path</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">endsWith</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"java"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><ol start="4">
<li>LÃ m tham sá»‘ cá»§a phÆ°Æ¡ng thá»©c hoáº·c phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o, nhÆ° sau:</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Thread</span><span style="color:#E06C75;--shiki-dark:#E06C75">(() </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"æ²‰é»˜ç‹äºŒ"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">start</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>Cáº§n chÃº Ã½ Ä‘áº¿n pháº¡m vi hoáº¡t Ä‘á»™ng cá»§a biá»ƒu thá»©c Lambda.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] args) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> limit </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Runnable</span><span style="color:#E06C75;--shiki-dark:#E06C75"> r </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> () </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> limit </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        for</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> limit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">++</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(i);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Äoáº¡n mÃ£ trÃªn sáº½ bÃ¡o lá»—i khi biÃªn dá»‹ch: biáº¿n limit Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trÆ°á»›c.</p>
<p>Giá»‘ng nhÆ° lá»›p áº©n danh, khÃ´ng nÃªn thay Ä‘á»•i biáº¿n cá»¥c bá»™ trong phÆ°Æ¡ng thá»©c á»Ÿ pháº§n thÃ¢n biá»ƒu thá»©c Lambda, náº¿u khÃ´ng biÃªn dá»‹ch sáº½ khÃ´ng thÃ nh cÃ´ng: biáº¿n sá»­ dá»¥ng trong biá»ƒu thá»©c Lambda pháº£i lÃ  <code>final</code>.</p>
<figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/java8/Lambda-3.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>NguyÃªn nhÃ¢n cá»§a váº¥n Ä‘á» nÃ y lÃ  do quy táº¯c Java quy Ä‘á»‹nh:</p>
<blockquote>
<p>Báº¥t ká»³ biáº¿n cá»¥c bá»™, tham sá»‘ hÃ¬nh thá»©c hoáº·c tham sá»‘ ngoáº¡i lá»‡ nÃ o Ä‘Æ°á»£c sá»­ dá»¥ng nhÆ°ng khÃ´ng Ä‘Æ°á»£c khai bÃ¡o trong biá»ƒu thá»©c lambda<br>
pháº£i Ä‘Æ°á»£c khai bÃ¡o lÃ  final hoáº·c effectively final <a href="http://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.12.4" target="_blank" rel="noopener noreferrer">(Â§4.12.4)</a>,<br>
náº¿u khÃ´ng sáº½ xáº£y ra lá»—i biÃªn dá»‹ch khi cá»‘ gáº¯ng sá»­ dá»¥ng.</p>
</blockquote>
<p>Ã chÃ­nh lÃ , cÃ¡c biáº¿n Ä‘Æ°á»£c sá»­ dá»¥ng trong biá»ƒu thá»©c Lambda nhÆ°ng khÃ´ng khai bÃ¡o trong biá»ƒu thá»©c Ä‘Ã³ pháº£i Ä‘Æ°á»£c khai bÃ¡o lÃ  final hoáº·c effectively final, náº¿u khÃ´ng sáº½ xáº£y ra lá»—i biÃªn dá»‹ch.</p>
<p>Vá» sá»± khÃ¡c biá»‡t giá»¯a final vÃ  effectively final, cÃ³ thá»ƒ cÃ³ má»™t sá»‘ báº¡n chÆ°a rÃµ, tÃ´i sáº½ giáº£i thÃ­ch thÃªm.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">a </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// a = 2; // a lÃ  final, nÃªn khÃ´ng thá»ƒ gÃ¡n giÃ¡ trá»‹ láº¡i</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> b</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">b </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// b sau Ä‘Ã³ khÃ´ng thay Ä‘á»•i ná»¯a</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// b lÃ  effectively final</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> c</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">c </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// c ban Ä‘áº§u Ä‘Æ°á»£c gÃ¡n giÃ¡ trá»‹ 1, sau Ä‘Ã³ gÃ¡n láº¡i giÃ¡ trá»‹ 2</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">c </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// c khÃ´ng pháº£i lÃ  effectively final</span></span></code></pre>
</div><p>Hiá»ƒu sá»± khÃ¡c biá»‡t giá»¯a final vÃ  effectively final, chÃºng ta biáº¿t ráº±ng náº¿u khai bÃ¡o limit lÃ  final, thÃ¬ khÃ´ng thá»ƒ thay Ä‘á»•i giÃ¡ trá»‹ cá»§a biáº¿n Ä‘Ã³ trong biá»ƒu thá»©c Lambda. Váº­y cÃ³ giáº£i phÃ¡p nÃ o Ä‘á»ƒ vá»«a khÃ´ng bá»‹ cáº£nh bÃ¡o khi biÃªn dá»‹ch, vá»«a cÃ³ thá»ƒ thay Ä‘á»•i giÃ¡ trá»‹ cá»§a biáº¿n khÃ´ng?</p>
<p>Sau khi suy nghÄ© vÃ  thá»­ nghiá»‡m, tÃ´i Ä‘Ã£ tÃ¬m ra 3 giáº£i phÃ¡p kháº£ thi:</p>
<ol>
<li>
<p>Khai bÃ¡o biáº¿n limit lÃ  static.</p>
</li>
<li>
<p>Khai bÃ¡o biáº¿n limit lÃ  AtomicInteger.</p>
</li>
<li>
<p>Sá»­ dá»¥ng máº£ng.</p>
</li>
</ol>
<p>Sau Ä‘Ã¢y lÃ  chi tiáº¿t tá»«ng giáº£i phÃ¡p.</p>
<h4>01) Khai bÃ¡o biáº¿n limit lÃ  static</h4>
<p>Äá»ƒ khai bÃ¡o biáº¿n limit lÃ  static, ta cáº§n Ä‘áº·t biáº¿n limit bÃªn ngoÃ i phÆ°Æ¡ng thá»©c <code>main()</code> vÃ¬ báº£n thÃ¢n phÆ°Æ¡ng thá»©c <code>main()</code> lÃ  static. VÃ­ dá»¥ mÃ£ Ä‘áº§y Ä‘á»§ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ModifyVariable2StaticInsideLambda</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> limit </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Runnable</span><span style="color:#E06C75;--shiki-dark:#E06C75"> r</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> () </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            limit </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> limit; i++) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(i);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        };</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Thread</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(r).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">start</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>HÃ£y xem káº¿t quáº£ Ä‘áº§u ra cá»§a chÆ°Æ¡ng trÃ¬nh:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>0</span></span>
<span class="line"><span>1</span></span>
<span class="line"><span>2</span></span>
<span class="line"><span>3</span></span>
<span class="line"><span>4</span></span></code></pre>
</div><p>OK, giáº£i phÃ¡p nÃ y lÃ  kháº£ thi.</p>
<h4>02) Khai bÃ¡o biáº¿n limit lÃ  AtomicInteger</h4>
<p>AtomicInteger cÃ³ thá»ƒ Ä‘áº£m báº£o viá»‡c thay Ä‘á»•i giÃ¡ trá»‹ int lÃ  nguyÃªn tá»­, cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>set()</code> Ä‘á»ƒ Ä‘áº·t má»™t giÃ¡ trá»‹ int má»›i vÃ  phÆ°Æ¡ng thá»©c <code>get()</code> Ä‘á»ƒ láº¥y giÃ¡ trá»‹ int hiá»‡n táº¡i.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ModifyVariable2AtomicInsideLambda</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AtomicInteger</span><span style="color:#E06C75;--shiki-dark:#E06C75"> limit</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> AtomicInteger</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Runnable</span><span style="color:#E06C75;--shiki-dark:#E06C75"> r</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> () </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            limit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> limit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(); i++) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(i);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        };</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Thread</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(r).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">start</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>HÃ£y xem káº¿t quáº£ Ä‘áº§u ra cá»§a chÆ°Æ¡ng trÃ¬nh:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>0</span></span>
<span class="line"><span>1</span></span>
<span class="line"><span>2</span></span>
<span class="line"><span>3</span></span>
<span class="line"><span>4</span></span></code></pre>
</div><p>OK, giáº£i phÃ¡p nÃ y cÅ©ng kháº£ thi.</p>
<h4>03) Sá»­ dá»¥ng máº£ng</h4>
<p>CÃ¡ch sá»­ dá»¥ng máº£ng cÃ³ má»™t chÃºt lá»«a dá»‘i, khi khai bÃ¡o máº£ng ta Ä‘áº·t lÃ  final, nhÆ°ng khi thay Ä‘á»•i giÃ¡ trá»‹ int thÃ¬ ta thay Ä‘á»•i má»™t pháº§n tá»­ cá»§a máº£ng.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ModifyVariable2ArrayInsideLambda</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [] </span><span style="color:#E06C75;--shiki-dark:#E06C75">limits</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">};</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Runnable</span><span style="color:#E06C75;--shiki-dark:#E06C75"> r</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> () </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            limits[</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">] </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> limits[</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]; i++) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(i);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        };</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Thread</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(r).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">start</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>HÃ£y xem káº¿t quáº£ Ä‘áº§u ra cá»§a chÆ°Æ¡ng trÃ¬nh:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>0</span></span>
<span class="line"><span>1</span></span>
<span class="line"><span>2</span></span>
<span class="line"><span>3</span></span>
<span class="line"><span>4</span></span></code></pre>
</div><p>OK, giáº£i phÃ¡p nÃ y cÅ©ng kháº£ thi.</p>
<h3>03. Lambda vÃ  tá»« khÃ³a this</h3>
<p>Biá»ƒu thá»©c Lambda khÃ´ng táº¡o ra pháº¡m vi má»›i, Ä‘iá»u nÃ y khÃ¡c vá»›i lá»›p áº©n danh. NÃ³i cÃ¡ch khÃ¡c, tá»« khÃ³a this trong thÃ¢n biá»ƒu thá»©c Lambda giá»‘ng vá»›i thá»ƒ hiá»‡n cá»§a lá»›p mÃ  nÃ³ Ä‘ang náº±m trong Ä‘Ã³.</p>
<p>HÃ£y xem vÃ­ dá»¥ sau:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> LamadaTest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> LamadaTest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">work</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> work</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"this = %s%n"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Runnable</span><span style="color:#E06C75;--shiki-dark:#E06C75"> r</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Runnable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> run</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"this = %s%n"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        };</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Thread</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(r).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">start</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Thread</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(() </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"this = %s%n"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">start</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Gá»£i Ã½: <code>%s</code> Ä‘áº¡i diá»‡n cho chuá»—i táº¡i vá»‹ trÃ­ hiá»‡n táº¡i, <code>%n</code> Ä‘áº¡i diá»‡n cho kÃ½ tá»± xuá»‘ng dÃ²ng, cÅ©ng cÃ³ thá»ƒ dÃ¹ng <code>\n</code> thay tháº¿, nhÆ°ng <code>%n</code> lÃ  Ä‘a ná»n táº£ng.</p>
<p>MÃ£ trong phÆ°Æ¡ng thá»©c <code>work()</code> cÃ³ thá»ƒ chia thÃ nh 3 pháº§n:</p>
<ol>
<li>Tá»« khÃ³a this Ä‘á»™c láº­p</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"this = %s%n"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Trong Ä‘Ã³, this lÃ  Ä‘á»‘i tÆ°á»£ng LamadaTest Ä‘Æ°á»£c táº¡o thÃ´ng qua tá»« khÃ³a new trong phÆ°Æ¡ng thá»©c <code>main()</code> â€” <code>new LamadaTest()</code>.</p>
<ol start="2">
<li>Tá»« khÃ³a this trong lá»›p áº©n danh</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Runnable</span><span style="color:#E06C75;--shiki-dark:#E06C75"> r </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Runnable</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">{</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> run</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"this = %s%n"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>Trong Ä‘Ã³, this lÃ  Ä‘á»‘i tÆ°á»£ng Runnable Ä‘Æ°á»£c táº¡o trong phÆ°Æ¡ng thá»©c <code>work()</code> thÃ´ng qua tá»« khÃ³a new â€” <code>new Runnable(){...}</code>.</p>
<ol start="3">
<li>Tá»« khÃ³a this trong biá»ƒu thá»©c Lambda</li>
</ol>
<p>Trong Ä‘Ã³, tá»« khÃ³a this giá»‘ng vá»›i pháº§n 1.</p>
<p>ChÃºng ta hÃ£y xem káº¿t quáº£ Ä‘áº§u ra cá»§a chÆ°Æ¡ng trÃ¬nh:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> com</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">cmower</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">java_demo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">journal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">LamadaTest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">3feba861</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> com</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">cmower</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">java_demo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">journal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">LamadaTest$1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">64f033cb</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> com</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">cmower</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">java_demo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">journal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">LamadaTest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">3feba861</span></span></code></pre>
</div><p>PhÃ¹ há»£p vá»›i phÃ¢n tÃ­ch cá»§a chÃºng ta.</p>
<h3>04. Cuá»‘i cÃ¹ng</h3>
<p>Máº·c dÃ¹ biá»ƒu thá»©c Lambda Ä‘Ã£ lÃ m ráº¥t nhiá»u Ä‘iá»u Ä‘Ã¡ng kinh ngáº¡c trong viá»‡c Ä‘Æ¡n giáº£n hÃ³a láº­p trÃ¬nh Java, nhÆ°ng trong má»™t sá»‘ trÆ°á»ng há»£p, sá»­ dá»¥ng khÃ´ng Ä‘Ãºng cÃ¡ch váº«n cÃ³ thá»ƒ dáº«n Ä‘áº¿n sá»± lá»™n xá»™n khÃ´ng cáº§n thiáº¿t, vÃ¬ váº­y má»i ngÆ°á»i hÃ£y cáº©n tháº­n khi sá»­ dá»¥ng.</p>
]]></content:encoded>
      <enclosure url="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/java8/Lambda-3.jpg" type="image/jpeg"/>
    </item>
    <item>
      <title>Optional</title>
      <link>https://vanhung4499.github.io/programming/java/java8/optional.html</link>
      <guid>https://vanhung4499.github.io/programming/java/java8/optional.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Optional</source>
      <description>Tá»‘i Æ°u Optional Há»c há»i khÃ´ng bao giá» lÃ  muá»™n, Ä‘áº·c biá»‡t lÃ  Ä‘á»‘i vá»›i nhá»¯ng Ä‘iá»u tá»‘t trong Java 8, Optional chÃ­nh lÃ  má»™t trong sá»‘ Ä‘Ã³. Lá»›p nÃ y cung cáº¥p má»™t giáº£i phÃ¡p cáº¥p lá»›p cho viá»‡...</description>
      <category>java</category>
      <pubDate>Thu, 04 Jul 2024 10:38:26 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Há»c há»i khÃ´ng bao giá» lÃ  muá»™n, Ä‘áº·c biá»‡t lÃ  Ä‘á»‘i vá»›i nhá»¯ng Ä‘iá»u tá»‘t trong Java 8, Optional chÃ­nh lÃ  má»™t trong sá»‘ Ä‘Ã³. Lá»›p nÃ y cung cáº¥p má»™t giáº£i phÃ¡p cáº¥p lá»›p cho viá»‡c biá»ƒu diá»…n giÃ¡ trá»‹ cÃ³ thá»ƒ cÃ³ hoáº·c khÃ´ng thay vÃ¬ tham chiáº¿u null. LÃ  má»™t láº­p trÃ¬nh viÃªn Java, tÃ´i thá»±c sá»± Ä‘Ã£ quÃ¡ chÃ¡n ngáº¥y vá»›i NullPointerException (NPE). DÃ¹ tÃ´i quen thuá»™c vá»›i nÃ³ nhÆ° má»™t ngÆ°á»i báº¡n cÅ©, nhÆ°ng viá»‡c gáº·p pháº£i nÃ³ tháº­t khÃ´ng may â€” khi chÆ°Æ¡ng trÃ¬nh Ä‘ang sá»­ dá»¥ng má»™t Ä‘á»‘i tÆ°á»£ng nhÆ°ng láº¡i tháº¥y giÃ¡ trá»‹ cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ lÃ  null, Java Virtual Machine sáº½ ná»•i giáº­n vÃ  nÃ©m nÃ³ ra nhÆ° má»™t tá»™i pháº¡m.</p>
<p>Táº¥t nhiÃªn, chÃºng ta lÃ  nhá»¯ng ngÆ°á»i láº­p trÃ¬nh cÃ³ trÃ¡ch nhiá»‡m, khÃ´ng thá»ƒ ngá»“i im mÃ  khÃ´ng lÃ m gÃ¬ cáº£, vÃ¬ váº­y Ä‘Ã£ cÃ³ ráº¥t nhiá»u kiá»ƒm tra giÃ¡ trá»‹ null. Máº·c dÃ¹ Ä‘Ã´i khi cÃ¡c kiá»ƒm tra nÃ y hoÃ n toÃ n khÃ´ng cáº§n thiáº¿t, nhÆ°ng chÃºng ta Ä‘Ã£ quen vá»›i nÃ³ nhÆ° má»™t thÃ³i quen. Cuá»‘i cÃ¹ng, Java 8 Ä‘Ã£ khÃ´ng thá»ƒ chá»‹u Ä‘á»±ng Ä‘Æ°á»£c ná»¯a, nÃªn Ä‘Ã£ giá»›i thiá»‡u Optional, Ä‘á»ƒ mÃ£ cá»§a chÃºng ta khÃ´ng cÃ²n kháº¯c nghiá»‡t vÃ  cá»©ng nháº¯c nhÆ° váº­y ná»¯a.</p>
<h3>01. Váº¥n Ä‘á» khi khÃ´ng sá»­ dá»¥ng Optional</h3>
<p>ChÃºng ta hÃ£y mÃ´ phá»ng má»™t tÃ¬nh huá»‘ng thá»±c táº¿. NgÃ y Ä‘áº§u tiÃªn lÃ m viá»‡c, leader giao cho dev nhiá»‡m vá»¥ lÃ  tá»« cÆ¡ sá»Ÿ dá»¯ liá»‡u láº¥y tÃªn cá»§a má»™t thÃ nh viÃªn dá»±a trÃªn ID vÃ  in tÃªn Ä‘Ã³ lÃªn console. Máº·c dÃ¹ lÃ  má»›i, nhÆ°ng nhiá»‡m vá»¥ nÃ y khÃ´ng lÃ m khÃ³ Ä‘Æ°á»£c dev, vÃ¬ váº­y anh ta dÃ nh 10 phÃºt viáº¿t Ä‘oáº¡n mÃ£ sau:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> WithoutOptionalDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Member</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> setName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Member</span><span style="color:#E06C75;--shiki-dark:#E06C75"> mem</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getMemberByIdFromDB</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (mem </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">mem</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Member</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getMemberByIdFromDB</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // ThÃ nh viÃªn cÃ³ ID hiá»‡n táº¡i khÃ´ng tá»“n táº¡i</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Do thÃ nh viÃªn cÃ³ ID hiá»‡n táº¡i khÃ´ng tá»“n táº¡i, phÆ°Æ¡ng thá»©c <code>getMemberByIdFromDB()</code> tráº£ vá» null Ä‘á»ƒ biá»ƒu thá»‹ ráº±ng khÃ´ng láº¥y Ä‘Æ°á»£c thÃ nh viÃªn nÃ y. Äiá»u nÃ y Ä‘á»“ng nghÄ©a ráº±ng khi in tÃªn thÃ nh viÃªn lÃªn console, báº¡n pháº£i kiá»ƒm tra mem cÃ³ null khÃ´ng trÆ°á»›c, náº¿u khÃ´ng sáº½ cÃ³ lá»—i NPE, khÃ´ng tin? HÃ£y xÃ³a <code>if (mem != null)</code> vÃ  thá»­ láº¡i, console ngay láº­p tá»©c in ra má»™t Ä‘á»‘ng lá»—i Ä‘á»ƒ báº¡n chiÃªm ngÆ°á»¡ng:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Exception in thread "main" java.lang.NullPointerException</span></span>
<span class="line"><span>	at com.cmower.dzone.optional.WithoutOptionalDemo.main(WithoutOptionalDemo.java:24)</span></span></code></pre>
</div><h3>02. Optional lÃ m tháº¿ nÃ o Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y</h3>
<p>Sau khi Ä‘Ã£ ná»™p mÃ£, anh ta vui váº» Ä‘i tÃ¬m leader Ä‘á»ƒ nháº­n nhiá»‡m vá»¥ má»›i. Vá»›i tinh tháº§n há»c há»i khiÃªm tá»‘n, dev yÃªu cáº§u leader xem láº¡i mÃ£ cá»§a mÃ¬nh. leader sau Ä‘Ã³ cho biáº¿t dev nÃªn thá»­ dÃ¹ng Optional Ä‘á»ƒ trÃ¡nh cÃ¡c kiá»ƒm tra giÃ¡ trá»‹ null khÃ´ng cáº§n thiáº¿t. BÃ¢y giá», hÃ£y xem dev Ä‘Ã£ lÃ m tháº¿ nÃ o Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» trÃªn báº±ng Optional.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> OptionalDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Member</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">optional</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getMemberByIdFromDB</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ifPresent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(mem </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Há» vÃ  tÃªn thÃ nh viÃªn: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> mem</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        });</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Member</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getMemberByIdFromDB</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        boolean</span><span style="color:#E06C75;--shiki-dark:#E06C75"> hasName</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (hasName) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">of</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Member</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Chim Má»“i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">empty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Member</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Member</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // getter / setter</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>PhÆ°Æ¡ng thá»©c <code>getMemberByIdFromDB()</code> tráº£ vá» <code>Optional&lt;Member&gt;</code> nhÆ° má»™t káº¿t quáº£, cho biáº¿t ráº±ng Member cÃ³ thá»ƒ tá»“n táº¡i hoáº·c khÃ´ng tá»“n táº¡i, Ä‘iá»u nÃ y cho phÃ©p sá»­ dá»¥ng biá»ƒu thá»©c Lambda trong phÆ°Æ¡ng thá»©c <code>ifPresent()</code> cá»§a Optional Ä‘á»ƒ in káº¿t quáº£ trá»±c tiáº¿p.</p>
<p>Optional cÃ³ thá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» NPE bá»Ÿi vÃ¬ nÃ³ rÃµ rÃ ng cho chÃºng ta biáº¿t khÃ´ng cáº§n pháº£i kiá»ƒm tra null. NÃ³ giá»‘ng nhÆ° má»™t biá»ƒn bÃ¡o á»Ÿ ngÃ£ ba Ä‘Æ°á»ng, rÃµ rÃ ng cho báº¡n biáº¿t nÃªn Ä‘i hÆ°á»›ng nÃ o.</p>
<h3>03. Táº¡o Ä‘á»‘i tÆ°á»£ng Optional</h3>
<ol>
<li>CÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c tÄ©nh <code>empty()</code> Ä‘á»ƒ táº¡o má»™t Ä‘á»‘i tÆ°á»£ng Optional rá»—ng</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> empty </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">empty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(empty);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Output: Optional.empty</span></span></code></pre>
</div><ol start="2">
<li>CÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c tÄ©nh <code>of()</code> Ä‘á»ƒ táº¡o má»™t Ä‘á»‘i tÆ°á»£ng Optional khÃ´ng rá»—ng</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> opt </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">of</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Chim Má»“i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(opt);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Output: Optional[Chim Má»“i]</span></span></code></pre>
</div><p>Táº¥t nhiÃªn, Ä‘á»‘i sá»‘ Ä‘Æ°á»£c chuyá»ƒn cho phÆ°Æ¡ng thá»©c <code>of()</code> pháº£i lÃ  khÃ´ng rá»—ng, tá»©c lÃ  khÃ´ng Ä‘Æ°á»£c lÃ  null, náº¿u khÃ´ng sáº½ váº«n nÃ©m ra NullPointerException.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> optnull </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">of</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(name);</span></span></code></pre>
</div><ol start="3">
<li>CÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c tÄ©nh <code>ofNullable()</code> Ä‘á»ƒ táº¡o má»™t Ä‘á»‘i tÆ°á»£ng Optional cÃ³ thá»ƒ rá»—ng hoáº·c khÃ´ng rá»—ng</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> optOrNull </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ofNullable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(name);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(optOrNull);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Output: Optional.empty</span></span></code></pre>
</div><p>PhÆ°Æ¡ng thá»©c <code>ofNullable()</code> cÃ³ má»™t biá»ƒu thá»©c ba ngÃ´i bÃªn trong, náº¿u Ä‘á»‘i sá»‘ lÃ  null, nÃ³ sáº½ tráº£ vá» háº±ng sá»‘ EMPTY; náº¿u khÃ´ng, nÃ³ sáº½ táº¡o má»™t Ä‘á»‘i tÆ°á»£ng Optional má»›i báº±ng tá»« khoÃ¡ new â€” khÃ´ng bao giá» nÃ©m ra NPE ná»¯a.</p>
<h3>04. Kiá»ƒm tra giÃ¡ trá»‹ cÃ³ tá»“n táº¡i khÃ´ng</h3>
<p>CÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>isPresent()</code> Ä‘á»ƒ kiá»ƒm tra xem má»™t Ä‘á»‘i tÆ°á»£ng Optional cÃ³ tá»“n táº¡i khÃ´ng. Náº¿u tá»“n táº¡i, phÆ°Æ¡ng thá»©c nÃ y tráº£ vá» true, ngÆ°á»£c láº¡i tráº£ vá» false â€” thay tháº¿ cho viá»‡c kiá»ƒm tra <code>obj != null</code>.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> opt </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">of</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Chim Má»“i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">opt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isPresent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Output: true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> optOrNull </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ofNullable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">optOrNull</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isPresent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Output: false</span></span></code></pre>
</div><p>Tá»« Java 11 trá»Ÿ Ä‘i, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>isEmpty()</code> Ä‘á»ƒ Ä‘áº£o ngÆ°á»£c káº¿t quáº£ so vá»›i <code>isPresent()</code>.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> opt </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">of</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Chim Má»“i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">opt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isEmpty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Output: false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> optOrNull </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ofNullable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">optOrNull</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isEmpty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Output: true</span></span></code></pre>
</div><h3>05. Biá»ƒu thá»©c khÃ´ng rá»—ng</h3>
<p>Optional cÃ³ má»™t phÆ°Æ¡ng thá»©c hiá»‡n Ä‘áº¡i ráº¥t há»¯u Ã­ch lÃ  <code>ifPresent()</code>, cho phÃ©p chÃºng ta thá»±c hiá»‡n mÃ£ nguá»“n theo cÃ¡ch láº­p trÃ¬nh hÃ m, do Ä‘Ã³, tÃ´i gá»i nÃ³ lÃ  biá»ƒu thá»©c khÃ´ng rá»—ng. Náº¿u khÃ´ng cÃ³ phÆ°Æ¡ng thá»©c nÃ y, chÃºng ta thÆ°á»ng pháº£i kiá»ƒm tra Ä‘á»‘i tÆ°á»£ng Optional trÆ°á»›c báº±ng phÆ°Æ¡ng thá»©c <code>isPresent()</code> trÆ°á»›c khi thá»±c hiá»‡n mÃ£ nguá»“n tÆ°Æ¡ng á»©ng:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> optOrNull </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ofNullable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">optOrNull</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isPresent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">optOrNull</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Khi sá»­ dá»¥ng <code>ifPresent()</code>, má»i thá»© trá»Ÿ nÃªn khÃ¡c biá»‡t hoÃ n toÃ n, báº¡n cÃ³ thá»ƒ truyá»n biá»ƒu thá»©c Lambda trá»±c tiáº¿p vÃ o phÆ°Æ¡ng thá»©c nÃ y, mÃ£ nguá»“n trá»Ÿ nÃªn ngáº¯n gá»n hÆ¡n vÃ  rÃµ rÃ ng hÆ¡n.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> opt </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">of</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Chim Má»“i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">opt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ifPresent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">str</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()));</span></span></code></pre>
</div><p>Tá»« Java 9 trá»Ÿ Ä‘i, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>ifPresentOrElse(action, emptyAction)</code> Ä‘á»ƒ thá»±c hiá»‡n hai loáº¡i hÃ nh Ä‘á»™ng khÃ¡c nhau: thá»±c hiá»‡n <code>action</code> khi khÃ´ng rá»—ng vÃ  <code>emptyAction</code> khi rá»—ng.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> opt </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">of</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Chim Má»“i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">opt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ifPresentOrElse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">str</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()), () </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Äá»‘i tÆ°á»£ng rá»—ng"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span></code></pre>
</div><h3>06. Thiáº¿t láº­p (láº¥y) giÃ¡ trá»‹ máº·c Ä‘á»‹nh</h3>
<p>ÄÃ´i khi khi táº¡o (láº¥y) Ä‘á»‘i tÆ°á»£ng Optional, chÃºng ta cáº§n má»™t giÃ¡ trá»‹ máº·c Ä‘á»‹nh. ÄÃ³ lÃ  lÃºc phÆ°Æ¡ng thá»©c <code>orElse()</code> vÃ  <code>orElseGet()</code> trá»Ÿ nÃªn há»¯u Ã­ch.</p>
<p>PhÆ°Æ¡ng thá»©c <code>orElse()</code> Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tráº£ vá» giÃ¡ trá»‹ bao bá»c trong Ä‘á»‘i tÆ°á»£ng Optional. Náº¿u giÃ¡ trá»‹ Ä‘Ã³ khÃ´ng pháº£i lÃ  null, nÃ³ tráº£ vá» giÃ¡ trá»‹ Ä‘Ã³; náº¿u khÃ´ng, nÃ³ tráº£ vá» giÃ¡ trá»‹ máº·c Ä‘á»‹nh. Kiá»ƒu dá»¯ liá»‡u cá»§a tham sá»‘ pháº£i trÃ¹ng vá»›i kiá»ƒu dá»¯ liá»‡u cá»§a giÃ¡ trá»‹.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> nullName </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ofNullable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(nullName).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">orElse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Chim Má»“i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(name);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Output: Chim Má»“i</span></span></code></pre>
</div><p>PhÆ°Æ¡ng thá»©c <code>orElseGet()</code> tÆ°Æ¡ng tá»± nhÆ° <code>orElse()</code>, nhÆ°ng tham sá»‘ lÃ  má»™t hÃ m. Náº¿u giÃ¡ trá»‹ trong Ä‘á»‘i tÆ°á»£ng Optional lÃ  null, hÃ m nÃ y sáº½ Ä‘Æ°á»£c thá»±c thi Ä‘á»ƒ sinh ra giÃ¡ trá»‹ máº·c Ä‘á»‹nh.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> nullName </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ofNullable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(nullName).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">orElseGet</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(()</span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#98C379;--shiki-dark:#98C379">"Chim Má»“i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(name);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Output: Chim Má»“i</span></span></code></pre>
</div><p>So vá»›i nhau, cÃ¡c phÆ°Æ¡ng thá»©c nÃ y ráº¥t giá»‘ng nhau, Ä‘iá»u nÃ y khiáº¿n chÃºng ta nghi ngá» liá»‡u cÃ¡c nhÃ  thiáº¿t káº¿ thÆ° viá»‡n Java cÃ³ cáº§n thiáº¿t pháº£i lÃ m nhÆ° váº­y khÃ´ng?</p>
<p>Giáº£ sá»­ cÃ³ má»™t phÆ°Æ¡ng thá»©c nháº­n giÃ¡ trá»‹ máº·c Ä‘á»‹nh theo cÃ¡ch truyá»n thá»‘ng.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getDefaultValue</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"getDefaultValue"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#98C379;--shiki-dark:#98C379"> "Chim Má»“i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Sau Ä‘Ã³, sá»­ dá»¥ng <code>orElse()</code> vÃ  <code>orElseGet()</code> Ä‘á»ƒ láº¥y giÃ¡ trá»‹ máº·c Ä‘á»‹nh tá»« <code>getDefaultValue()</code>.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] args) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"orElse"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ofNullable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(name).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">orElse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getDefaultValue</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"orElseGet"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name3 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ofNullable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(name).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">orElseGet</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(OrElseOptionalDemo</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getDefaultValue);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>ChÃº Ã½: <code>TÃªn lá»›p :: TÃªn phÆ°Æ¡ng thá»©c</code> lÃ  cÃº phÃ¡p Ä‘Æ°á»£c giá»›i thiá»‡u tá»« Java 8, khÃ´ng cÃ³ dáº¥u <code>()</code> sau tÃªn phÆ°Æ¡ng thá»©c Ä‘á»ƒ chá»‰ ra ráº±ng phÆ°Æ¡ng thá»©c nÃ y khÃ´ng nháº¥t Ä‘á»‹nh pháº£i Ä‘Æ°á»£c gá»i.</p>
<p>Káº¿t quáº£ xuáº¥t ra nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">orElse</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">getDefaultValue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">orElseGet</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">getDefaultValue</span></span></code></pre>
</div><p>Káº¿t quáº£ xuáº¥t ra khÃ¡ giá»‘ng nhau, khÃ´ng cÃ³ sá»± khÃ¡c biá»‡t Ä‘Ã¡ng ká»ƒ, báº¡n Ä‘Ã£ hiá»ƒu Ä‘Æ°á»£c táº¡i sao chÆ°a?</p>
<h3>07. Láº¥y giÃ¡ trá»‹</h3>
<p>Vá» máº·t ngá»¯ nghÄ©a, phÆ°Æ¡ng thá»©c <code>get()</code> lÃ  phÆ°Æ¡ng phÃ¡p chÃ­nh thá»©c nháº¥t Ä‘á»ƒ láº¥y giÃ¡ trá»‹ cá»§a Ä‘á»‘i tÆ°á»£ng Optional, nhÆ°ng tiáº¿c lÃ  phÆ°Æ¡ng thá»©c nÃ y cÃ³ má»™t sá»‘ háº¡n cháº¿, vÃ¬ náº¿u giÃ¡ trá»‹ cá»§a Optional lÃ  null, phÆ°Æ¡ng thá»©c nÃ y sáº½ nÃ©m ra ngoáº¡i lá»‡ NoSuchElementException. Äiá»u nÃ y hoÃ n toÃ n trÃ¡i ngÆ°á»£c vá»›i má»¥c Ä‘Ã­ch sá»­ dá»¥ng Optional.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> GetOptionalDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">optOrNull</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ofNullable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(name);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">optOrNull</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Äoáº¡n mÃ£ nÃ y sáº½ nÃ©m ra ngoáº¡i lá»‡ khi thá»±c thi:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Exception in thread "main" java.util.NoSuchElementException: No value present</span></span>
<span class="line"><span>	at java.base/java.util.Optional.get(Optional.java:141)</span></span>
<span class="line"><span>	at com.cmower.dzone.optional.GetOptionalDemo.main(GetOptionalDemo.java:9)</span></span></code></pre>
</div><p>Máº·c dÃ¹ ngoáº¡i lá»‡ Ä‘Æ°á»£c nÃ©m ra lÃ  NoSuchElementException thay vÃ¬ NullPointerException, nhÆ°ng váº«n lÃ  má»™t káº¿t quáº£ khÃ´ng mong muá»‘n khi sá»­ dá»¥ng Optional. Äá» nghá»‹ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>orElseGet()</code> Ä‘á»ƒ láº¥y giÃ¡ trá»‹ cá»§a Ä‘á»‘i tÆ°á»£ng Optional.</p>
<h3>08. Lá»c giÃ¡ trá»‹</h3>
<p>Sau khi nÃ¢ng cáº¥p mÃ£ cá»§a mÃ¬nh báº±ng lá»›p Optional, Xiaowang láº¡i hÄƒng hÃ¡i cháº¡y tá»›i xin nhiá»‡m vá»¥ vá»›i LÃ£o MÃ£. LÃ£o MÃ£ cáº£m tháº¥y chÃ ng trai nÃ y khÃ´ng tá»“i, Ä‘áº§u Ã³c minh máº«n vÃ  lÃ m viá»‡c tÃ­ch cá»±c, xá»©ng Ä‘Ã¡ng Ä‘á»ƒ Ä‘Ã o táº¡o thÃªm, vÃ¬ váº­y láº¡i giao cho Xiaowang má»™t nhiá»‡m vá»¥ má»›i: kiá»ƒm tra Ä‘á»™ dÃ i cá»§a máº­t kháº©u khi ngÆ°á»i dÃ¹ng Ä‘Äƒng kÃ½.</p>
<p>Xiaowang khi nháº­n nhiá»‡m vá»¥, ráº¥t vui váº» bá»Ÿi anh ta má»›i há»c Ä‘Æ°á»£c phÆ°Æ¡ng thá»©c <code>filter()</code> cá»§a lá»›p Optional, vÃ  giá» Ä‘Ã¢y nÃ³ sáº½ cÃ³ Ã­ch.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> FilterOptionalDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> password</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "12345"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">opt</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ofNullable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(password);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">opt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">filter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(pwd </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> pwd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 6</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isPresent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Tham sá»‘ cá»§a phÆ°Æ¡ng thá»©c <code>filter()</code> lÃ  má»™t Predicate (má»™t giao diá»‡n hÃ m mÃ  Java 8 giá»›i thiá»‡u), cÃ³ nghÄ©a lÃ  báº¡n cÃ³ thá»ƒ chuyá»ƒn má»™t biá»ƒu thá»©c Lambda vÃ o phÆ°Æ¡ng thá»©c nÃ y lÃ m Ä‘iá»u kiá»‡n. Náº¿u káº¿t quáº£ cá»§a biá»ƒu thá»©c lÃ  false, phÆ°Æ¡ng thá»©c sáº½ tráº£ vá» má»™t Optional rá»—ng (EMPTY); náº¿u khÃ´ng, nÃ³ tráº£ vá» Optional Ä‘Ã£ Ä‘Æ°á»£c lá»c.</p>
<p>Trong vÃ­ dá»¥ trÃªn, vÃ¬ Ä‘á»™ dÃ i cá»§a password lÃ  5, káº¿t quáº£ xuáº¥t ra lÃ  false. Giáº£ sá»­ yÃªu cáº§u Ä‘á»™ dÃ i máº­t kháº©u tá»« 6 Ä‘áº¿n 10 kÃ½ tá»±, báº¡n cÃ³ thá»ƒ thÃªm má»™t Ä‘iá»u kiá»‡n ná»¯a. HÃ£y xem Xiaowang thÃªm Ä‘iá»u kiá»‡n phá»©c táº¡p hÆ¡n vÃ o mÃ£ cá»§a mÃ¬nh.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Predicate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len6 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> pwd </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> pwd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 6</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Predicate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len10 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> pwd </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> pwd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &lt;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">password </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "1234567"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">opt </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ofNullable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(password);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">boolean</span><span style="color:#E06C75;--shiki-dark:#E06C75"> result </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> opt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">filter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">len6</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">and</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(len10)).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isPresent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(result);</span></span></code></pre>
</div><p>Láº§n nÃ y, káº¿t quáº£ xuáº¥t ra lÃ  true, vÃ¬ máº­t kháº©u cÃ³ 7 kÃ½ tá»±, náº±m trong khoáº£ng tá»« 6 Ä‘áº¿n 10 kÃ½ tá»±. HÃ£y tÆ°á»Ÿng tÆ°á»£ng náº¿u Xiaowang dÃ¹ng if-else Ä‘á»ƒ lÃ m nhiá»‡m vá»¥ nÃ y, mÃ£ sáº½ dÃ i ra sao.</p>
<h3>09. Chuyá»ƒn Ä‘á»•i giÃ¡ trá»‹</h3>
<p>Sau khi kiá»ƒm tra Ä‘á»™ dÃ i máº­t kháº©u, Xiaowang váº«n cáº£m tháº¥y chÆ°a thá»a mÃ£n, anh ta muá»‘n kiá»ƒm tra sá»©c máº¡nh cá»§a máº­t kháº©u, vÃ­ dá»¥ nhÆ° máº­t kháº©u khÃ´ng Ä‘Æ°á»£c lÃ  "password", vÃ¬ máº­t kháº©u nhÆ° váº­y quÃ¡ yáº¿u. VÃ¬ váº­y, anh ta láº¡i báº¯t Ä‘áº§u nghiÃªn cá»©u vá» phÆ°Æ¡ng thá»©c <code>map()</code>, phÆ°Æ¡ng thá»©c nÃ y cho phÃ©p chuyá»ƒn Ä‘á»•i Ä‘á»‘i tÆ°á»£ng Optional gá»‘c thÃ nh má»™t Ä‘á»‘i tÆ°á»£ng Optional má»›i theo má»™t quy táº¯c nháº¥t Ä‘á»‹nh, Ä‘á»“ng thá»i Ä‘á»‘i tÆ°á»£ng Optional gá»‘c khÃ´ng thay Ä‘á»•i.</p>
<p>HÃ£y xem má»™t vÃ­ dá»¥ Ä‘Æ¡n giáº£n mÃ  Xiaowang viáº¿t:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> OptionalMapDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "Chim Má»“i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">nameOptional</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">of</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(name);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">intOpt</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> nameOptional</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">map</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(String</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">length);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        </span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">( </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">intOpt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">orElse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Trong vÃ­ dá»¥ trÃªn, tham sá»‘ cá»§a <code>map()</code> lÃ  <code>String::length</code>, cÃ³ nghÄ©a lÃ  chÃºng ta sáº½ táº¡o má»™t Optional má»›i tá»« Ä‘á»‘i tÆ°á»£ng Optional kiá»ƒu String ban Ä‘áº§u báº±ng cÃ¡ch tÃ­nh Ä‘á»™ dÃ i cá»§a chuá»—i vÃ  chuyá»ƒn Ä‘á»•i nÃ³ thÃ nh má»™t Optional kiá»ƒu Integer.</p>
<p>Sau khi hiá»ƒu Ä‘Æ°á»£c cÃ¡ch sá»­ dá»¥ng cÆ¡ báº£n cá»§a phÆ°Æ¡ng thá»©c <code>map()</code>, Xiaowang quyáº¿t Ä‘á»‹nh káº¿t há»£p <code>map()</code> vá»›i <code>filter()</code> Ä‘á»ƒ sá»­ dá»¥ng. Pháº§n Ä‘áº§u dÃ¹ng Ä‘á»ƒ chuyá»ƒn máº­t kháº©u thÃ nh chá»¯ thÆ°á»ng, pháº§n sau dÃ¹ng Ä‘á»ƒ kiá»ƒm tra Ä‘á»™ dÃ i vÃ  xem liá»‡u máº­t kháº©u cÃ³ pháº£i lÃ  "password".</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> OptionalMapFilterDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> password</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "password"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;  </span><span style="color:#E06C75;--shiki-dark:#E06C75">opt</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ofNullable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(password);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Predicate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">len6</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> pwd </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> pwd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 6</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Predicate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">len10</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> pwd </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> pwd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Predicate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">eq</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> pwd </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> pwd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">equals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"password"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        boolean</span><span style="color:#E06C75;--shiki-dark:#E06C75"> result</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> opt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">map</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(String</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">toLowerCase).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">filter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">len6</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">and</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(len10 ).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">and</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(eq)).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isPresent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(result);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>ÄÆ°á»£c rá»“i, cÃ¡c báº¡n Ä‘á»c giáº£ thÃ¢n máº¿n, Ä‘Ã¢y lÃ  toÃ n bá»™ ná»™i dung cá»§a bÃ i viáº¿t nÃ y!</p>
]]></content:encoded>
    </item>
    <item>
      <title>Stream</title>
      <link>https://vanhung4499.github.io/programming/java/java8/stream.html</link>
      <guid>https://vanhung4499.github.io/programming/java/java8/stream.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Stream</source>
      <description>Java Stream Chá»‰ tá»« tá»« &amp;quot;Stream&amp;quot; nÃ y, nghe cÃ³ váº» liÃªn quan Ä‘áº¿n InputStream vÃ  OutputStream trong gÃ³i java.io pháº£i khÃ´ng? NhÆ°ng thá»±c táº¿ thÃ¬ khÃ´ng liÃªn quan gÃ¬ cáº£. Stream má»›i cá»§a Ja...</description>
      <category>java</category>
      <pubDate>Thu, 04 Jul 2024 10:38:26 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Chá»‰ tá»« tá»« "Stream" nÃ y, nghe cÃ³ váº» liÃªn quan Ä‘áº¿n InputStream vÃ  OutputStream trong gÃ³i <a href="http://java.io" target="_blank" rel="noopener noreferrer">java.io</a> pháº£i khÃ´ng? NhÆ°ng thá»±c táº¿ thÃ¬ khÃ´ng liÃªn quan gÃ¬ cáº£. Stream má»›i cá»§a Java 8 Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ giáº£i phÃ³ng nÄƒng suáº¥t cá»§a láº­p trÃ¬nh viÃªn khi lÃ m viá»‡c vá»›i cÃ¡c Collection, vÃ  pháº§n lá»›n thÃ nh cÃ´ng Ä‘Ã³ Ä‘áº¿n tá»« Lambda Expression cÃ¹ng ra Ä‘á»i.</p>
<p>Stream lÃ  gÃ¬?</p>
<blockquote>
<p>Stream giá»‘ng nhÆ° má»™t bá»™ láº·p cao cáº¥p, nhÆ°ng chá»‰ cÃ³ thá»ƒ láº·p qua má»™t láº§n, giá»‘ng nhÆ° dÃ²ng sÃ´ng xuÃ´i vá» phÃ­a Ä‘Ã´ng; trong quÃ¡ trÃ¬nh láº·p qua, thá»±c hiá»‡n cÃ¡c thao tÃ¡c trÃªn cÃ¡c pháº§n tá»­ cá»§a dÃ²ng, vÃ­ dá»¥ nhÆ° "lá»c bá» cÃ¡c chuá»—i cÃ³ Ä‘á»™ dÃ i lá»›n hÆ¡n 10", "láº¥y kÃ½ tá»± Ä‘áº§u tiÃªn cá»§a má»—i chuá»—i" vÃ  nhÆ° tháº¿.</p>
</blockquote>
<p>Äá»ƒ lÃ m viá»‡c vá»›i Stream, Ä‘áº§u tiÃªn cáº§n cÃ³ má»™t nguá»“n dá»¯ liá»‡u, cÃ³ thá»ƒ lÃ  máº£ng hoáº·c bá»™ sÆ°u táº­p. Má»—i láº§n thá»±c hiá»‡n thao tÃ¡c sáº½ tráº£ vá» má»™t stream má»›i, thuáº­n tiá»‡n cho viá»‡c thá»±c hiá»‡n chuá»—i thao tÃ¡c, nhÆ°ng Ä‘á»‘i tÆ°á»£ng stream gá»‘c váº«n Ä‘Æ°á»£c giá»¯ nguyÃªn.</p>
<p>CÃ¡c hoáº¡t Ä‘á»™ng trÃªn Stream cÃ³ thá»ƒ chia thÃ nh hai loáº¡i:</p>
<ol>
<li>
<p>Thao tÃ¡c trung gian, cÃ³ thá»ƒ cÃ³ nhiá»u thao tÃ¡c, má»—i láº§n tráº£ vá» má»™t stream má»›i Ä‘á»ƒ thá»±c hiá»‡n chuá»—i.</p>
</li>
<li>
<p>Thao tÃ¡c káº¿t thÃºc, chá»‰ cÃ³ thá»ƒ cÃ³ má»™t, má»—i láº§n thá»±c hiá»‡n xong, stream nÃ y sáº½ bá»‹ "dÃ¹ng sáº¡ch", khÃ´ng thá»ƒ tiáº¿p tá»¥c thá»±c hiá»‡n thao tÃ¡c tiáº¿p theo, vÃ¬ váº­y chá»‰ nÃªn Ä‘áº·t á»Ÿ cuá»‘i cÃ¹ng.</p>
</li>
</ol>
<p>HÃ£y xem má»™t vÃ­ dá»¥.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"one"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"two"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"three"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"three"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> count </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">distinct</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(count);</span></span></code></pre>
</div><p>PhÆ°Æ¡ng thá»©c <code>distinct()</code> lÃ  má»™t thao tÃ¡c trung gian (loáº¡i bá» cÃ¡c pháº§n tá»­ trÃ¹ng láº·p), nÃ³ sáº½ tráº£ vá» má»™t stream má»›i (khÃ´ng cÃ³ pháº§n tá»­ chung).</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Stream</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">T</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> distinct</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>PhÆ°Æ¡ng thá»©c <code>count()</code> lÃ  má»™t thao tÃ¡c káº¿t thÃºc, tráº£ vá» sá»‘ lÆ°á»£ng pháº§n tá»­ trong stream.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">long</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> count</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>CÃ¡c thao tÃ¡c trung gian khÃ´ng thá»±c hiá»‡n ngay láº­p tá»©c, chá»‰ khi cÃ³ thao tÃ¡c káº¿t thÃºc, stream má»›i báº¯t Ä‘áº§u láº·p, Ä‘Æ°á»£c sá»­ dá»¥ng cho Ã¡nh xáº¡, lá»c, v.v. NÃ³i má»™t cÃ¡ch dá»… hiá»ƒu hÆ¡n lÃ  thá»±c hiá»‡n nhiá»u thao tÃ¡c trong má»™t láº§n láº·p, hiá»‡u suáº¥t Ä‘Æ°á»£c cáº£i thiá»‡n Ä‘Ã¡ng ká»ƒ.</p>
<p>LÃ½ thuyáº¿t Ä‘Ã£ nÃ³i Ä‘á»§, bÃ¢y giá» chÃºng ta sáº½ Ä‘i vÃ o pháº§n thá»±c hÃ nh ngay.</p>
<h3>01. Táº¡o stream trong Java</h3>
<p>Náº¿u lÃ  máº£ng, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng <code>Arrays.stream()</code> hoáº·c <code>Stream.of()</code> Ä‘á»ƒ táº¡o stream; náº¿u lÃ  má»™t collection, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>stream()</code> trá»±c tiáº¿p, vÃ¬ phÆ°Æ¡ng thá»©c nÃ y Ä‘Ã£ Ä‘Æ°á»£c thÃªm vÃ o giao diá»‡n Collection.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CreateStreamDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75">arr</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[]{</span><span style="color:#98C379;--shiki-dark:#98C379">"one"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"two"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"three"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">};</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">stream</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(arr);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        stream </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">of</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"one"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"two"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"three"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">list</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"one"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"two"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"three"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        stream </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Náº¿u báº¡n xem mÃ£ nguá»“n cá»§a Stream, báº¡n sáº½ tháº¥y phÆ°Æ¡ng thá»©c <code>of()</code> thá»±c táº¿ gá»i phÆ°Æ¡ng thá»©c <code>Arrays.stream()</code> bÃªn trong.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">T</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Stream</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">T</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> of</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">T</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">...</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> values</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(values);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>NgoÃ i ra, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>parallelStream()</code> cá»§a bá»™ sÆ°u táº­p Ä‘á»ƒ táº¡o stream song song, máº·c Ä‘á»‹nh sá»­ dá»¥ng <code>ForkJoinPool.commonPool()</code> lÃ m bá»™ xá»­ lÃ½ stream.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Long</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> aList </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Long</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> parallelStream </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> aList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">parallelStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><h3>02. Hoáº¡t Ä‘á»™ng trÃªn Stream</h3>
<p>Lá»›p Stream cung cáº¥p nhiá»u phÆ°Æ¡ng thá»©c há»¯u Ã­ch Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng trÃªn luá»“ng. DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ phÆ°Æ¡ng thá»©c thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng.</p>
<h4>1) Lá»c (Filter)</h4>
<p>Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>filter()</code> Ä‘á»ƒ lá»c ra cÃ¡c pháº§n tá»­ mÃ  báº¡n muá»‘n tá»« luá»“ng.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> FilterStreamDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">list</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"eat"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"sleep"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"code"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"play"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">stream</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">filter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(element </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> element</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">contains</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ee"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">forEach</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">println);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>PhÆ°Æ¡ng thá»©c <code>filter()</code> nháº­n má»™t Ä‘á»‘i sá»‘ kiá»ƒu Predicate (má»™t giao diá»‡n hÃ m má»›i Ä‘Æ°á»£c thÃªm vÃ o tá»« Java 8, nháº­n Ä‘áº§u vÃ o vÃ  tráº£ vá» káº¿t quáº£ boolean), cho phÃ©p báº¡n truyá»n má»™t biá»ƒu thá»©c Lambda nhÆ° <code>element -&gt; element.contains("ee")</code> Ä‘á»ƒ lá»c cÃ¡c chuá»—i cÃ³ chá»©a tá»« "ee".</p>
<p>PhÆ°Æ¡ng thá»©c <code>forEach()</code> nháº­n má»™t Ä‘á»‘i sá»‘ kiá»ƒu Consumer (má»™t giao diá»‡n hÃ m má»›i nháº­n Ä‘áº§u vÃ o vÃ  khÃ´ng cÃ³ giÃ¡ trá»‹ tráº£ vá»), vÃ  <code>System.out::println</code> lÃ  cÃº phÃ¡p má»›i Ä‘Æ°á»£c giá»›i thiá»‡u tá»« Java 8, tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i vÃ²ng láº·p <code>for</code> in ra tá»«ng pháº§n tá»­.</p>
<p>Káº¿t quáº£ cá»§a chÆ°Æ¡ng trÃ¬nh lÃ :</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>sleep</span></span></code></pre>
</div><h4>2) Ãnh xáº¡ (Map)</h4>
<p>Náº¿u báº¡n muá»‘n chuyá»ƒn Ä‘á»•i cÃ¡c pháº§n tá»­ trong má»™t luá»“ng sang cÃ¡c pháº§n tá»­ khÃ¡c báº±ng má»™t phÆ°Æ¡ng phÃ¡p nÃ o Ä‘Ã³, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>map()</code>.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> MapStreamDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">list</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"eat"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"sleep"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"code"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"play"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">stream</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">map</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(String</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">length);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">forEach</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">println);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>PhÆ°Æ¡ng thá»©c <code>map()</code> nháº­n má»™t Ä‘á»‘i sá»‘ kiá»ƒu Function (má»™t giao diá»‡n hÃ m má»›i nháº­n Ä‘áº§u vÃ o T vÃ  tráº£ vá» káº¿t quáº£ R), á»Ÿ Ä‘Ã¢y lÃ  <code>String::length</code> Ä‘á»ƒ chuyá»ƒn Ä‘á»•i tá»« <code>Stream&lt;String&gt;</code> thÃ nh <code>Stream&lt;Integer&gt;</code> vá»›i Ä‘á»™ dÃ i cá»§a má»—i chuá»—i.</p>
<p>Káº¿t quáº£ cá»§a chÆ°Æ¡ng trÃ¬nh lÃ :</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>3</span></span>
<span class="line"><span>5</span></span>
<span class="line"><span>4</span></span>
<span class="line"><span>4</span></span></code></pre>
</div><h4>3) Kiá»ƒm tra (Match)</h4>
<p>Lá»›p Stream cung cáº¥p ba phÆ°Æ¡ng thá»©c Ä‘á»ƒ kiá»ƒm tra cÃ¡c pháº§n tá»­:</p>
<ul>
<li><code>anyMatch()</code>: Tráº£ vá» true náº¿u cÃ³ Ã­t nháº¥t má»™t pháº§n tá»­ thá»a mÃ£n Ä‘iá»u kiá»‡n.</li>
<li><code>allMatch()</code>: Tráº£ vá» true náº¿u táº¥t cáº£ cÃ¡c pháº§n tá»­ Ä‘á»u thá»a mÃ£n Ä‘iá»u kiá»‡n.</li>
<li><code>noneMatch()</code>: Tráº£ vá» true náº¿u khÃ´ng cÃ³ pháº§n tá»­ nÃ o thá»a mÃ£n Ä‘iá»u kiá»‡n.</li>
</ul>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> MatchStreamDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">list</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"eat"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"sleep"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"code"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"play"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        boolean</span><span style="color:#E06C75;--shiki-dark:#E06C75"> anyMatchFlag</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">anyMatch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(element </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> element</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">contains</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ee"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        boolean</span><span style="color:#E06C75;--shiki-dark:#E06C75"> allMatchFlag</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">allMatch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(element </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> element</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        boolean</span><span style="color:#E06C75;--shiki-dark:#E06C75"> noneMatchFlag</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">noneMatch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(element </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> element</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">endsWith</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"abc"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(anyMatchFlag);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(allMatchFlag);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(noneMatchFlag);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>VÃ¬ chuá»—i "sleep" báº¯t cÃ³ "ee", nÃªn anyMatchFlag sáº½ lÃ  true; vÃ¬ Ä‘á»™ dÃ i cá»§a cÃ¡c chuá»—i "eat", "sleep", "code", "play" Ä‘á»u lá»›n hÆ¡n 1, nÃªn allMatchFlag lÃ  true; vÃ¬ khÃ´ng cÃ³ chuá»—i nÃ o káº¿t thÃºc báº±ng "abc", nÃªn noneMatchFlag lÃ  true.</p>
<p>Káº¿t quáº£ cá»§a chÆ°Æ¡ng trÃ¬nh lÃ :</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>true</span></span>
<span class="line"><span>true</span></span>
<span class="line"><span>true</span></span></code></pre>
</div><h4>4) Tá»•ng há»£p (Reduce)</h4>
<p>PhÆ°Æ¡ng thá»©c <code>reduce()</code> chá»§ yáº¿u Ä‘á»ƒ káº¿t há»£p cÃ¡c pháº§n tá»­ trong Stream láº¡i vá»›i nhau. CÃ³ hai cÃ¡ch sá»­ dá»¥ng:</p>
<ul>
<li><code>Optional&lt;T&gt; reduce(BinaryOperator&lt;T&gt; accumulator)</code>: KhÃ´ng cÃ³ giÃ¡ trá»‹ khá»Ÿi Ä‘áº§u, chá»‰ cÃ³ má»™t tham sá»‘ lÃ  quy táº¯c tÃ­nh toÃ¡n, tráº£ vá» Optional.</li>
<li><code>T reduce(T identity, BinaryOperator&lt;T&gt; accumulator)</code>: CÃ³ giÃ¡ trá»‹ khá»Ÿi Ä‘áº§u vÃ  quy táº¯c tÃ­nh toÃ¡n, hai tham sá»‘, tráº£ vá» cÃ¹ng loáº¡i vá»›i giÃ¡ trá»‹ khá»Ÿi Ä‘áº§u.</li>
</ul>
<p>Xem vÃ­ dá»¥ sau Ä‘Ã¢y.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ReduceStreamDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75">ints</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">};</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">list</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">asList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(ints);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">optional</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">reduce</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">((a, b) </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> a </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> b);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">optional1</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">reduce</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(Integer</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">sum);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">orElse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">optional1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">orElse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> reduce</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">reduce</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">6</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, (a, b) </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> a </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> b);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reduce);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> reduce1</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">reduce</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">6</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, Integer</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">sum);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reduce1);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Quy táº¯c tÃ­nh toÃ¡n cÃ³ thá»ƒ lÃ  biá»ƒu thá»©c Lambda (nhÆ° <code>(a, b) -&gt; a + b</code>), hoáº·c <code>TÃªn lá»›p::TÃªn phÆ°Æ¡ng thá»©c</code> (nhÆ° <code>Integer::sum</code>).</p>
<p>Káº¿t quáº£ cá»§a chÆ°Æ¡ng trÃ¬nh lÃ :</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">6</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">6</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">12</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">12</span></span></code></pre>
</div><p>Khi khÃ´ng cÃ³ giÃ¡ trá»‹ khá»Ÿi Ä‘áº§u, káº¿t quáº£ cá»§a viá»‡c cá»™ng cÃ¡c pháº§n tá»­ trong list lÃ  6; khi cÃ³ giÃ¡ trá»‹ khá»Ÿi Ä‘áº§u lÃ  6, káº¿t quáº£ lÃ  12.</p>
<h3>03. Chuyá»ƒn Ä‘á»•i Stream</h3>
<p>Náº¿u báº¡n cÃ³ thá»ƒ chuyá»ƒn Ä‘á»•i cÃ¡c máº£ng hoáº·c collection thÃ nh Stream, thÃ¬ cÅ©ng cáº§n cÃ³ cÃ¡c phÆ°Æ¡ng thá»©c tÆ°Æ¡ng á»©ng Ä‘á»ƒ chuyá»ƒn Ä‘á»•i Stream trá»Ÿ láº¡i â€” phÆ°Æ¡ng thá»©c <code>collect()</code> lÃ m Ä‘Ã¡p á»©ng nhu cáº§u nÃ y.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CollectStreamDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">list</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"eat"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"sleep"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"code"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"play"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75">strArray</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toArray</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[]</span><span style="color:#C678DD;--shiki-dark:#C678DD">::new</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(strArray));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">list1</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">map</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(String</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">length).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">collect</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collectors</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">list2</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">collect</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collectors</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toCollection</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(ArrayList</span><span style="color:#C678DD;--shiki-dark:#C678DD">::new</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list1);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list2);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">collect</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collectors</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">joining</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">", "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>PhÆ°Æ¡ng thá»©c <code>toArray()</code> cÃ³ thá»ƒ chuyá»ƒn Ä‘á»•i Stream thÃ nh máº£ng, báº¡n cÃ³ thá»ƒ tháº¯c máº¯c vá» <code>String[]::new</code>, nÃ³ lÃ  gÃ¬? HÃ£y xem mÃ£ nguá»“n cá»§a <code>toArray()</code>.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">A</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> A</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toArray</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IntFunction</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">A</span><span style="color:#E06C75;--shiki-dark:#E06C75">[]</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> generator)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>Äiá»u nÃ y cÃ³ nghÄ©a lÃ  <code>String[]::new</code> lÃ  má»™t IntFunction, má»™t hÃ m cÃ³ thá»ƒ táº¡o ra má»™t máº£ng má»›i cáº§n thiáº¿t, báº¡n cÃ³ thá»ƒ giáº£i mÃ£ mÃ£ byte Ä‘á»ƒ xem nÃ³ thá»±c sá»± lÃ  gÃ¬:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] strArray </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[])</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toArray</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">((x$0) </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[x$0];</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">});</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(strArray));</span></span></code></pre>
</div><p>Äiá»u nÃ y tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i viá»‡c tráº£ vá» má»™t máº£ng chuá»—i cÃ³ Ä‘á»™ dÃ i Ä‘Ã£ chá»‰ Ä‘á»‹nh.</p>
<p>Khi báº¡n cáº§n chuyá»ƒn Ä‘á»•i má»™t bá»™ sÆ°u táº­p thÃ nh má»™t bá»™ sÆ°u táº­p khÃ¡c theo má»™t quy táº¯c nÃ o Ä‘Ã³, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng <code>map()</code> vÃ  <code>collect()</code> cÃ¹ng nhau.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">map</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(String</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">length).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">collect</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collectors</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span></code></pre>
</div><p>Sau khi táº¡o luá»“ng tá»« phÆ°Æ¡ng thá»©c <code>stream()</code>, báº¡n cÃ³ thá»ƒ Ã¡nh xáº¡ nÃ³ thÃ nh má»™t luá»“ng má»›i cá»§a Ä‘á»™ dÃ i chuá»—i báº±ng <code>map(String:length)</code>, vÃ  sau Ä‘Ã³ chuyá»ƒn Ä‘á»•i nÃ³ thÃ nh má»™t bá»™ sÆ°u táº­p má»›i báº±ng phÆ°Æ¡ng thá»©c <code>collect()</code>.</p>
<p>Collectors lÃ  má»™t lá»›p tiá»‡n Ã­ch cho viá»‡c thu tháº­p, nÃ³ bao gá»“m cÃ¡c triá»ƒn khai thu tháº­p nhÆ° <code>toList()</code> Ä‘á»ƒ thu tháº­p thÃ nh má»™t <code>java.util.List</code> má»›i, <code>toCollection()</code> Ä‘á»ƒ thu tháº­p vÃ o má»™t <code>java.util.ArrayList</code> má»›i, vÃ  <code>joining()</code> Ä‘á»ƒ thu tháº­p vÃ o má»™t chuá»—i Ä‘Æ°á»£c phÃ¢n tÃ¡ch báº±ng dáº¥u pháº©y.</p>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  káº¿t quáº£ cá»§a chÆ°Æ¡ng trÃ¬nh:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">[eat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> sleep</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> code</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> play]</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 4</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">[eat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> sleep</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> code</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> play]</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">eat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> sleep</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> code</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> play</span></span></code></pre>
</div>]]></content:encoded>
    </item>
    <item>
      <title>Common Tools</title>
      <link>https://vanhung4499.github.io/programming/java/common-tool/</link>
      <guid>https://vanhung4499.github.io/programming/java/common-tool/</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Common Tools</source>
      <pubDate>Thu, 04 Jul 2024 09:37:15 GMT</pubDate>
    </item>
    <item>
      <title>Arrays</title>
      <link>https://vanhung4499.github.io/programming/java/common-tool/arrays.html</link>
      <guid>https://vanhung4499.github.io/programming/java/common-tool/arrays.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Arrays</source>
      <description>Arrays Lá»›p cÃ´ng cá»¥ chuyÃªn dÃ¹ng cho máº£ng mÃ  chÃºng ta Ä‘ang nÃ³i Ä‘áº¿n lÃ  lá»›p java.util.Arrays. Háº§u háº¿t cÃ¡c thao tÃ¡c phá»• biáº¿n trÃªn máº£ng Ä‘á»u Ä‘Æ°á»£c cung cáº¥p dÆ°á»›i dáº¡ng cÃ¡c phÆ°Æ¡ng thá»©c tÄ©n...</description>
      <category>java</category>
      <pubDate>Thu, 04 Jul 2024 09:37:15 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Lá»›p cÃ´ng cá»¥ chuyÃªn dÃ¹ng cho máº£ng mÃ  chÃºng ta Ä‘ang nÃ³i Ä‘áº¿n lÃ  lá»›p <code>java.util.Arrays</code>. Háº§u háº¿t cÃ¡c thao tÃ¡c phá»• biáº¿n trÃªn máº£ng Ä‘á»u Ä‘Æ°á»£c cung cáº¥p dÆ°á»›i dáº¡ng cÃ¡c phÆ°Æ¡ng thá»©c tÄ©nh cá»§a lá»›p nÃ y. VÃ¬ báº£n thÃ¢n máº£ng Ä‘á»ƒ hoÃ n thÃ nh cÃ¡c thao tÃ¡c nÃ y váº«n khÃ¡ phá»©c táº¡p, nÃªn cÃ³ lá»›p nÃ y Ä‘á»ƒ bá»c láº¡i thÃ¬ tiá»‡n lá»£i hÆ¡n nhiá»u.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">package</span><span style="color:#C678DD;--shiki-dark:#C678DD"> java.util</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> * @auther Josh Bloch</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> * @auther Neal Gafter</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> * @auther John Rose</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;font-style:italic;--shiki-dark-font-style:italic">@since</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  1.2</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {}</span></span></code></pre>
</div><p>Cá»¥ thá»ƒ, cÃ¡c thao tÃ¡c trÃªn máº£ng cÃ³ thá»ƒ chia thÃ nh 9 loáº¡i sau.</p>
<ul>
<li>Táº¡o máº£ng</li>
<li>So sÃ¡nh máº£ng</li>
<li>Sáº¯p xáº¿p máº£ng</li>
<li>TÃ¬m kiáº¿m trong máº£ng</li>
<li>Chuyá»ƒn máº£ng thÃ nh stream</li>
<li>In máº£ng</li>
<li>Chuyá»ƒn máº£ng thÃ nh List</li>
<li>setAll (chÆ°a nghÄ© ra tÃªn tiáº¿ng Viá»‡t)</li>
<li>parallelPrefix (chÆ°a nghÄ© ra tÃªn tiáº¿ng Viá»‡t)</li>
</ul>
<h3>01. Táº¡o Máº£ng</h3>
<p>Sá»­ dá»¥ng lá»›p <code>Arrays</code> Ä‘á»ƒ táº¡o máº£ng cÃ³ thá»ƒ thÃ´ng qua ba phÆ°Æ¡ng thá»©c sau:</p>
<ul>
<li><code>copyOf</code>: Sao chÃ©p máº£ng Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh, cáº¯t bá»›t hoáº·c Ä‘iá»n báº±ng <code>null</code>.</li>
<li><code>copyOfRange</code>: Sao chÃ©p máº£ng trong pháº¡m vi Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh vÃ o má»™t máº£ng má»›i.</li>
<li><code>fill</code>: Äiá»n vÃ o máº£ng.</li>
</ul>
<h4>1) <code>copyOf</code></h4>
<p>HÃ£y xem vÃ­ dá»¥ sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] intro </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] { </span><span style="color:#98C379;--shiki-dark:#98C379">"a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "b"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "d"</span><span style="color:#E06C75;--shiki-dark:#E06C75"> }</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] revised </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">copyOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(intro, </span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] expanded </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">copyOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(intro, </span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(revised));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(expanded));</span></span></code></pre>
</div><p><code>revised</code> vÃ  <code>expanded</code> lÃ  cÃ¡c máº£ng má»›i Ä‘Æ°á»£c sao chÃ©p, cÃ³ Ä‘á»™ dÃ i láº§n lÆ°á»£t lÃ  3 vÃ  5, trong khi máº£ng gá»‘c cÃ³ Ä‘á»™ dÃ i lÃ  4. Xem káº¿t quáº£ Ä‘áº§u ra:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>[a, b, c]</span></span>
<span class="line"><span>[a, b, c, d, null]</span></span></code></pre>
</div><p>Tháº¥y khÃ´ng? <code>revised</code> Ä‘Ã£ cáº¯t bá» pháº§n tá»­ cuá»‘i cÃ¹ng vÃ¬ Ä‘á»™ dÃ i lÃ  3, cÃ²n <code>expanded</code> Ä‘Æ°á»£c Ä‘iá»n thÃªm má»™t giÃ¡ trá»‹ <code>null</code> vÃ¬ Ä‘á»™ dÃ i lÃ  5.</p>
<p>PhÆ°Æ¡ng thá»©c <code>grow()</code> trong mÃ£ nguá»“n cá»§a <code>ArrayList</code> (cáº¥u trÃºc dá»¯ liá»‡u ná»™i bá»™ sá»­ dá»¥ng máº£ng) cÅ©ng gá»i phÆ°Æ¡ng thá»©c <code>copyOf()</code>. Khi kÃ­ch thÆ°á»›c ban Ä‘áº§u cá»§a <code>ArrayList</code> khÃ´ng Ä‘Ã¡p á»©ng Ä‘Æ°á»£c sá»± tÄƒng trÆ°á»Ÿng cá»§a pháº§n tá»­, nÃ³ sáº½ má»Ÿ rá»™ng:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Object</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">grow</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> minCapacity) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#E06C75;--shiki-dark:#E06C75"> elementData </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">copyOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(elementData, </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newCapacity</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(minCapacity));</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><h4>2) <code>copyOfRange</code></h4>
<p>HÃ£y xem vÃ­ dá»¥ sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] intro </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] { </span><span style="color:#98C379;--shiki-dark:#98C379">"a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "b"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "d"</span><span style="color:#E06C75;--shiki-dark:#E06C75"> }</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] abridgement </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">copyOfRange</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(intro, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(abridgement));</span></span></code></pre>
</div><p>PhÆ°Æ¡ng thá»©c <code>copyOfRange()</code> cáº§n ba tham sá»‘, tham sá»‘ Ä‘áº§u tiÃªn lÃ  máº£ng Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh, tham sá»‘ thá»© hai lÃ  vá»‹ trÃ­ báº¯t Ä‘áº§u (bao gá»“m), tham sá»‘ thá»© ba lÃ  vá»‹ trÃ­ káº¿t thÃºc (khÃ´ng bao gá»“m). Xem káº¿t quáº£ Ä‘áº§u ra:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">[a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> b</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> c]</span></span></code></pre>
</div><p>Vá»‹ trÃ­ 0 lÃ  "a", vá»‹ trÃ­ 3 lÃ  "d", tá»©c lÃ  Ä‘Ã£ cáº¯t tá»« vá»‹ trÃ­ 0 (bao gá»“m) Ä‘áº¿n vá»‹ trÃ­ 3 (khÃ´ng bao gá»“m) cá»§a cÃ¡c pháº§n tá»­ máº£ng. Váº­y náº¿u chá»‰ sá»‘ vÆ°á»£t quÃ¡ Ä‘á»™ dÃ i cá»§a máº£ng thÃ¬ sao?</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] abridgementExpanded </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">copyOfRange</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(intro, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">6</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(abridgementExpanded));</span></span></code></pre>
</div><p>Vá»‹ trÃ­ káº¿t thÃºc lÃ  6, vÆ°á»£t quÃ¡ Ä‘á»™ dÃ i cá»§a máº£ng gá»‘c lÃ  4. Xem káº¿t quáº£ Ä‘áº§u ra:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>[a, b, c, d, null, null]</span></span></code></pre>
</div><p>Váº«n sá»­ dá»¥ng <code>null</code> Ä‘á»ƒ Ä‘iá»n vÃ o.</p>
<p>Táº¡i sao pháº£i lÃ m nhÆ° váº­y?</p>
<p>TÃ´i nghÄ© lÃ  nhÃ  thiáº¿t káº¿ cá»§a <code>Arrays</code> Ä‘Ã£ tÃ­nh Ä‘áº¿n váº¥n Ä‘á» vÆ°á»£t quÃ¡ chá»‰ sá»‘ cá»§a máº£ng, náº¿u khÃ´ng má»—i láº§n gá»i lá»›p <code>Arrays</code> Ä‘á»u pháº£i kiá»ƒm tra Ä‘á»™ dÃ i ráº¥t nhiá»u láº§n, ráº¥t phiá»n phá»©c.</p>
<h4>3) <code>fill</code></h4>
<p>HÃ£y xem vÃ­ dá»¥ sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] stutter </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">fill</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(stutter, </span><span style="color:#98C379;--shiki-dark:#98C379">"abcd"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(stutter));</span></span></code></pre>
</div><p>Sá»­ dá»¥ng tá»« khÃ³a <code>new</code> Ä‘á»ƒ táº¡o má»™t máº£ng cÃ³ Ä‘á»™ dÃ i lÃ  4, sau Ä‘Ã³ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>fill()</code> Ä‘á»ƒ Ä‘iá»n táº¥t cáº£ 4 vá»‹ trÃ­ báº±ng "abcd". Xem káº¿t quáº£ Ä‘áº§u ra:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>[abcd, abcd, abcd, abcd]</span></span></code></pre>
</div><p>Náº¿u muá»‘n má»™t máº£ng cÃ³ cÃ¡c pháº§n tá»­ giá»‘ng há»‡t nhau, phÆ°Æ¡ng thá»©c <code>fill()</code> sáº½ ráº¥t há»¯u Ã­ch.</p>
<h3>02. So SÃ¡nh Máº£ng</h3>
<p>PhÆ°Æ¡ng thá»©c <code>equals()</code> cá»§a lá»›p <code>Arrays</code> dÃ¹ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh xem hai máº£ng cÃ³ báº±ng nhau hay khÃ´ng. HÃ£y xem vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] intro </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] { </span><span style="color:#98C379;--shiki-dark:#98C379">"a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "b"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "d"</span><span style="color:#E06C75;--shiki-dark:#E06C75"> }</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">boolean</span><span style="color:#E06C75;--shiki-dark:#E06C75"> result </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">equals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] { </span><span style="color:#98C379;--shiki-dark:#98C379">"a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"b"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"d"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }, intro);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(result);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">boolean</span><span style="color:#E06C75;--shiki-dark:#E06C75"> result1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">equals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] { </span><span style="color:#98C379;--shiki-dark:#98C379">"a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"b"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"e"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }, intro);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(result1);</span></span></code></pre>
</div><p>Káº¿t quáº£ Ä‘áº§u ra nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>true</span></span>
<span class="line"><span>false</span></span></code></pre>
</div><p>Máº£ng Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh lÃ  "abcd", máº£ng so sÃ¡nh lÃ  "abcd" vÃ  "abce", do Ä‘Ã³ <code>result</code> lÃ  <code>true</code>, cÃ²n <code>result1</code> lÃ  <code>false</code>.</p>
<p>HÃ£y xem qua mÃ£ nguá»“n cá»§a phÆ°Æ¡ng thá»©c <code>equals()</code>:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> boolean</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> equals</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Object</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Object</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] a2) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (a </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#E06C75;--shiki-dark:#E06C75"> a2)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (a </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ||</span><span style="color:#E06C75;--shiki-dark:#E06C75"> a2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> length </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">a2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">length</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> !=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> length)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    for</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">++</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">equals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(a[i], a2[i])</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            return</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>VÃ¬ máº£ng lÃ  má»™t Ä‘á»‘i tÆ°á»£ng, nÃªn trÆ°á»›c tiÃªn sá»­ dá»¥ng toÃ¡n tá»­ <code>==</code> Ä‘á»ƒ kiá»ƒm tra. Náº¿u khÃ´ng báº±ng nhau, tiáº¿p tá»¥c kiá»ƒm tra xem cÃ³ null hay khÃ´ng, náº¿u má»™t trong hai máº£ng lÃ  null, tráº£ vá» false. Sau Ä‘Ã³ kiá»ƒm tra Ä‘á»™ dÃ i, náº¿u khÃ´ng báº±ng nhau, tráº£ vá» false. Náº¿u báº±ng nhau, láº§n lÆ°á»£t gá»i <code>Objects.equals()</code> Ä‘á»ƒ so sÃ¡nh cÃ¡c pháº§n tá»­ á»Ÿ vá»‹ trÃ­ tÆ°Æ¡ng á»©ng.</p>
<p>Äoáº¡n mÃ£ nÃ y ráº¥t nghiÃªm ngáº·t, Ä‘Ãºng khÃ´ng? ÄÃ¢y chÃ­nh lÃ  Ã½ nghÄ©a cá»§a viá»‡c há»c mÃ£ nguá»“n, vá»«a cÃ³ thá»ƒ ngÆ°á»¡ng má»™ vá»«a cÃ³ thá»ƒ há»c há»i tÆ° duy mÃ£ hÃ³a rÃµ rÃ ng cá»§a tÃ¡c giáº£ mÃ£ nguá»“n.</p>
<p>NgoÃ i phÆ°Æ¡ng thá»©c <code>equals()</code>, cÃ²n cÃ³ má»™t máº¹o khÃ¡c Ä‘á»ƒ xÃ¡c Ä‘á»‹nh hai máº£ng cÃ³ báº±ng nhau hay khÃ´ng, máº·c dÃ¹ cÃ³ thá»ƒ khÃ´ng chÃ­nh xÃ¡c hoÃ n toÃ n. ÄÃ³ lÃ  phÆ°Æ¡ng thá»©c <code>Arrays.hashCode()</code>. HÃ£y xem qua mÃ£ nguá»“n cá»§a phÆ°Æ¡ng thá»©c nÃ y:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> hashCode</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Object</span><span style="color:#E06C75;--shiki-dark:#E06C75"> a[]) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (a </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> result </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    for</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Object</span><span style="color:#E06C75;--shiki-dark:#E06C75"> element </span><span style="color:#C678DD;--shiki-dark:#C678DD">:</span><span style="color:#E06C75;--shiki-dark:#E06C75"> a)</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        result </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 31</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> *</span><span style="color:#E06C75;--shiki-dark:#E06C75"> result </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (element </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#C678DD;--shiki-dark:#C678DD"> ?</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#C678DD;--shiki-dark:#C678DD"> :</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> element</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">hashCode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#E06C75;--shiki-dark:#E06C75"> result</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Thuáº­t toÃ¡n bÄƒm vá»‘n dÄ© ráº¥t nghiÃªm ngáº·t, vÃ¬ váº­y náº¿u hai máº£ng cÃ³ giÃ¡ trá»‹ bÄƒm báº±ng nhau, thÃ¬ gáº§n nhÆ° cÃ³ thá»ƒ xÃ¡c Ä‘á»‹nh hai máº£ng Ä‘Ã³ báº±ng nhau.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] intro </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] { </span><span style="color:#98C379;--shiki-dark:#98C379">"a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "b"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "d"</span><span style="color:#E06C75;--shiki-dark:#E06C75"> }</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">hashCode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(intro));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">hashCode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] { </span><span style="color:#98C379;--shiki-dark:#98C379">"a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"b"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"d"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }));</span></span></code></pre>
</div><p>Káº¿t quáº£ Ä‘áº§u ra nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>3910595</span></span>
<span class="line"><span>3910595</span></span></code></pre>
</div><p>Hai máº£ng cÃ³ giÃ¡ trá»‹ bÄƒm báº±ng nhau, vÃ¬ cÃ¡c pháº§n tá»­ giá»‘ng nhau. Tuy nhiÃªn, cÃ¡ch nÃ y khÃ´ng hoÃ n toÃ n chÃ­nh xÃ¡c, nÃªn Æ°u tiÃªn sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>Objects.equals()</code>. Khi chÃºng ta muá»‘n nhanh chÃ³ng xÃ¡c Ä‘á»‹nh hai máº£ng cÃ³ báº±ng nhau hay khÃ´ng, cÃ³ thá»ƒ so sÃ¡nh hashCode Ä‘á»ƒ xÃ¡c nháº­n - má»™t cÃ¡ch lÃ m cÃ³ lá»£i vÃ  rá»§i ro cao!</p>
<h3>03. Sáº¯p Xáº¿p Máº£ng</h3>
<p>PhÆ°Æ¡ng thá»©c <code>sort()</code> cá»§a lá»›p <code>Arrays</code> dÃ¹ng Ä‘á»ƒ sáº¯p xáº¿p máº£ng. HÃ£y xem vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] intro1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] { </span><span style="color:#98C379;--shiki-dark:#98C379">"a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "b"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "d"</span><span style="color:#E06C75;--shiki-dark:#E06C75"> }</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] sorted </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">copyOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(intro1, </span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">sort</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(sorted);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(sorted));</span></span></code></pre>
</div><p>Do viá»‡c sáº¯p xáº¿p sáº½ thay Ä‘á»•i máº£ng gá»‘c, nÃªn chÃºng ta sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>copyOf()</code> Ä‘á»ƒ sao chÃ©p má»™t báº£n má»›i. Káº¿t quáº£ Ä‘áº§u ra nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>[a, b, c, d]</span></span></code></pre>
</div><p>CÃ³ thá»ƒ tháº¥y, viá»‡c sáº¯p xáº¿p dá»±a trÃªn thá»© tá»± tÄƒng dáº§n cá»§a kÃ½ tá»± Ä‘áº§u tiÃªn. CÃ¡c kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n Ä‘Æ°á»£c sáº¯p xáº¿p theo thuáº­t toÃ¡n QuickSort hai trá»¥c, cÃ²n cÃ¡c kiá»ƒu dá»¯ liá»‡u tham chiáº¿u Ä‘Æ°á»£c sáº¯p xáº¿p theo thuáº­t toÃ¡n TimSort, sá»­ dá»¥ng ká»¹ thuáº­t trong "Sáº¯p xáº¿p láº¡c quan vÃ  Ä‘á»™ phá»©c táº¡p lÃ½ thuyáº¿t thÃ´ng tin" cá»§a Peter McIlroy.</p>
<h3>04. TÃ¬m Kiáº¿m Trong Máº£ng</h3>
<p>Sau khi sáº¯p xáº¿p máº£ng, cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>binarySearch()</code> cá»§a lá»›p <code>Arrays</code> Ä‘á»ƒ tÃ¬m kiáº¿m nhá»‹ phÃ¢n. Náº¿u khÃ´ng sáº¯p xáº¿p, chá»‰ cÃ³ thá»ƒ tÃ¬m kiáº¿m tuyáº¿n tÃ­nh, hiá»‡u suáº¥t sáº½ tháº¥p hÆ¡n nhiá»u.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] intro1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] { </span><span style="color:#98C379;--shiki-dark:#98C379">"a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "b"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "d"</span><span style="color:#E06C75;--shiki-dark:#E06C75"> }</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] sorted </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">copyOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(intro1, </span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">sort</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(sorted);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> exact </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">binarySearch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(sorted, </span><span style="color:#98C379;--shiki-dark:#98C379">"c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(exact);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> caseInsensitive </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">binarySearch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(sorted, </span><span style="color:#98C379;--shiki-dark:#98C379">"C"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, String</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">compareToIgnoreCase);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(caseInsensitive);</span></span></code></pre>
</div><p>PhÆ°Æ¡ng thá»©c <code>binarySearch()</code> cÃ³ thá»ƒ thá»±c hiá»‡n tÃ¬m kiáº¿m chÃ­nh xÃ¡c hoáº·c tÃ¬m kiáº¿m khÃ´ng phÃ¢n biá»‡t chá»¯ hoa chá»¯ thÆ°á»ng. Káº¿t quáº£ Ä‘áº§u ra nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>3</span></span>
<span class="line"><span>3</span></span></code></pre>
</div><p>Káº¿t quáº£ sáº¯p xáº¿p lÃ  <code>[a, b, c, d]</code>, nÃªn chá»‰ sá»‘ tÃ¬m kiáº¿m Ä‘Æ°á»£c lÃ  3.</p>
<p>"Tam Muá»™i, nhá»› lÃ  sau nÃ y náº¿u muá»‘n tÃ¬m kiáº¿m pháº§n tá»­ trong máº£ng hoáº·c táº­p há»£p, nÃªn sáº¯p xáº¿p trÆ°á»›c rá»“i sá»­ dá»¥ng tÃ¬m kiáº¿m nhá»‹ phÃ¢n Ä‘á»ƒ tÄƒng hiá»‡u quáº£."</p>
<p>Tam Muá»™i gáº­t Ä‘áº§u tá» váº» hiá»ƒu.</p>
<h3>05. Chuyá»ƒn Máº£ng ThÃ nh Stream</h3>
<p>Stream lÃ  gÃ¬ váº­y?</p>
<p>Stream trong tiáº¿ng Anh cÃ³ nghÄ©a lÃ  dÃ²ng cháº£y. NÃ³ cÃ³ thá»ƒ giÃºp tÄƒng nÄƒng suáº¥t cá»§a láº­p trÃ¬nh viÃªn Java ráº¥t nhiá»u, cho phÃ©p viáº¿t mÃ£ hiá»‡u quáº£, sáº¡ch sáº½ vÃ  ngáº¯n gá»n. Phong cÃ¡ch nÃ y coi táº­p há»£p cáº§n xá»­ lÃ½ nhÆ° má»™t dÃ²ng cháº£y qua cÃ¡c á»‘ng dáº«n, chÃºng ta cÃ³ thá»ƒ xá»­ lÃ½ dÃ²ng cháº£y nÃ y trong á»‘ng dáº«n, vÃ­ dá»¥ nhÆ° lá»c, sáº¯p xáº¿p, v.v. <a href="/programming/java/java8/stream">CÃ¡ch sá»­ dá»¥ng Stream cá»¥ thá»ƒ</a>, chÃºng ta sáº½ Ä‘á»ƒ láº¡i sau Ä‘á»ƒ nÃ³i chi tiáº¿t, bÃ¢y giá» báº¡n chá»‰ cáº§n cÃ³ má»™t áº¥n tÆ°á»£ng chung lÃ  Ä‘Æ°á»£c.</p>
<p>PhÆ°Æ¡ng thá»©c <code>stream()</code> cá»§a lá»›p <code>Arrays</code> cÃ³ thá»ƒ chuyá»ƒn Ä‘á»•i máº£ng thÃ nh stream:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] intro </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] { </span><span style="color:#98C379;--shiki-dark:#98C379">"a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "b"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "d"</span><span style="color:#E06C75;--shiki-dark:#E06C75"> }</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(intro).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span></code></pre>
</div><p>CÅ©ng cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh chá»‰ sá»‘ báº¯t Ä‘áº§u vÃ  káº¿t thÃºc cho phÆ°Æ¡ng thá»©c <code>stream()</code>:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(intro, </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span></code></pre>
</div><p>Náº¿u pháº¡m vi chá»‰ sá»‘ sai, vÃ­ dá»¥ tá»« 2 Ä‘áº¿n 1, chÆ°Æ¡ng trÃ¬nh sáº½ nÃ©m ngoáº¡i lá»‡ ArrayIndexOutOfBoundsException:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: origin(2) &gt; fence(1)</span></span>
<span class="line"><span>	at java.base/java.util.Spliterators.checkFromToBounds(Spliterators.java:387)</span></span></code></pre>
</div><h3>06. In Máº£ng</h3>
<p>VÃ¬ máº£ng lÃ  má»™t Ä‘á»‘i tÆ°á»£ng, náº¿u báº¡n sá»­ dá»¥ng trá»±c tiáº¿p <code>System.out.println</code>, káº¿t quáº£ sáº½ nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>[Ljava.lang.String;@3d075dc0</span></span></code></pre>
</div><p><a href="/programming/java/array/print.html" target="_blank">CÃ¡ch in máº£ng tá»‘t nháº¥t</a> lÃ  sá»­ dá»¥ng <code>Arrays.toString()</code>, thá»±c ra Ä‘Ã£ Ä‘Æ°á»£c Ä‘á» cáº­p trÆ°á»›c Ä‘Ã¢y. HÃ£y xem qua mÃ£ nguá»“n cá»§a phÆ°Æ¡ng thá»©c nÃ y:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> toString</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Object</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] a) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (a </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#98C379;--shiki-dark:#98C379"> "null"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> iMax </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">length</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (iMax </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#98C379;--shiki-dark:#98C379"> "[]"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    StringBuilder</span><span style="color:#E06C75;--shiki-dark:#E06C75"> b </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> StringBuilder</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    b</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">append</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'['</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    for</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">++</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        b</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">append</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">valueOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(a[i]));</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#E06C75;--shiki-dark:#E06C75"> iMax)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> b</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">append</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">']'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        b</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">append</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">", "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>Äáº§u tiÃªn, kiá»ƒm tra null, náº¿u Ä‘Ãºng, tráº£ vá» chuá»—i <code>null</code>;</li>
<li>Láº¥y Ä‘á»™ dÃ i cá»§a máº£ng, náº¿u Ä‘á»™ dÃ i cá»§a máº£ng lÃ  0 (tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i length - 1 báº±ng -1), tráº£ vá» dáº¥u ngoáº·c vuÃ´ng <code>[]</code>, biá»ƒu thá»‹ máº£ng rá»—ng;</li>
<li>Náº¿u máº£ng khÃ´ng pháº£i lÃ  null vÃ  Ä‘á»™ dÃ i khÃ´ng pháº£i lÃ  0, khai bÃ¡o Ä‘á»‘i tÆ°á»£ng StringBuilder, sau Ä‘Ã³ thÃªm dáº¥u báº¯t Ä‘áº§u cá»§a máº£ng <code>[</code>, tiáº¿p theo duyá»‡t qua máº£ng vÃ  thÃªm tá»«ng pháº§n tá»­ vÃ o; má»™t máº¹o nhá» lÃ , khi gáº·p pháº§n tá»­ cuá»‘i cÃ¹ng (i == iMax), khÃ´ng thÃªm dáº¥u pháº©y vÃ  khoáº£ng tráº¯ng â€œ, â€ mÃ  thÃªm dáº¥u káº¿t thÃºc cá»§a máº£ng <code>]</code>.</li>
</ul>
<p>VÃ¬ sao khi kiá»ƒm tra Ä‘á»™ dÃ i cá»§a máº£ng lÃ  0 láº¡i so sÃ¡nh vá»›i -1 sau khi trá»« 1? Táº¡i sao khÃ´ng so sÃ¡nh trá»±c tiáº¿p vá»›i 0?</p>
<p>Thá»±c ra lÃ  cÃ³ liÃªn quan Ä‘áº¿n viá»‡c kiá»ƒm tra <code>i == iMax</code> khi duyá»‡t máº£ng, náº¿u khÃ´ng, pháº£i dÃ¹ng <code>i == iMax -1</code> Ä‘á»ƒ kiá»ƒm tra liá»‡u Ä‘Ã£ Ä‘áº¿n pháº§n tá»­ cuá»‘i cÃ¹ng cá»§a máº£ng hay chÆ°a.</p>
<h3>07. Chuyá»ƒn Máº£ng ThÃ nh List</h3>
<p>DÃ¹ máº£ng ráº¥t máº¡nh máº½, nhÆ°ng cÃ¡c phÆ°Æ¡ng thá»©c tiá»‡n Ã­ch mÃ  nÃ³ cÃ³ thá»ƒ thá»±c hiá»‡n láº¡i ráº¥t Ã­t, cháº³ng háº¡n nhÆ° kiá»ƒm tra xem máº£ng cÃ³ chá»©a má»™t giÃ¡ trá»‹ nÃ o Ä‘Ã³ hay khÃ´ng. Náº¿u cÃ³ thá»ƒ chuyá»ƒn Ä‘á»•i thÃ nh List, má»i thá»© sáº½ Ä‘Æ¡n giáº£n hÆ¡n nhiá»u, vÃ¬ trong <a href="/programming/java/collection/overview">List</a> cá»§a Java cÃ³ ráº¥t nhiá»u phÆ°Æ¡ng thá»©c tiá»‡n dá»¥ng.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] intro </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] { </span><span style="color:#98C379;--shiki-dark:#98C379">"a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "b"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "d"</span><span style="color:#E06C75;--shiki-dark:#E06C75"> }</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> rets </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">asList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(intro);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">rets</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">contains</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"d"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span></code></pre>
</div><p>Tuy nhiÃªn, cáº§n lÆ°u Ã½ ráº±ng, <code>Arrays.asList()</code> tráº£ vá» <code>java.util.Arrays.ArrayList</code>, khÃ´ng pháº£i lÃ  <a href="/programming/java/collection/arraylist"><code>java.util.ArrayList</code></a>, Ä‘á»™ dÃ i cá»§a nÃ³ cá»‘ Ä‘á»‹nh, khÃ´ng thá»ƒ xÃ³a hoáº·c thÃªm pháº§n tá»­.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">rets</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"e"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">rets</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">remove</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"d"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Äiá»u nÃ y cáº§n chÃº Ã½ khi viáº¿t mÃ£, náº¿u khÃ´ng sáº½ nÃ©m ra ngoáº¡i lá»‡ khi thá»±c hiá»‡n hai phÆ°Æ¡ng thá»©c nÃ y:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Exception in thread "main" java.lang.UnsupportedOperationException</span></span>
<span class="line"><span>	at java.base/java.util.AbstractList.add(AbstractList.java:153)</span></span>
<span class="line"><span>	at java.base/java.util.AbstractList.add(AbstractList.java:111)</span></span></code></pre>
</div><p>Náº¿u muá»‘n thao tÃ¡c cÃ¡c pháº§n tá»­, cáº§n chuyá»ƒn Ä‘á»•i thÃªm má»™t bÆ°á»›c ná»¯a, chuyá»ƒn thÃ nh <code>java.util.ArrayList</code> thá»±c sá»±:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> rets1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">asList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(intro)</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">rets1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"e"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">rets1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">remove</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"d"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><h3>08. setAll</h3>
<p>Java 8 Ä‘Ã£ bá»• sung phÆ°Æ¡ng thá»©c <code>setAll()</code>, nÃ³ cung cáº¥p má»™t Ä‘iá»ƒm vÃ o <a href="/programming/java/java8/lambda">láº­p trÃ¬nh hÃ m</a>, cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ Ä‘iá»n giÃ¡ trá»‹ cho cÃ¡c pháº§n tá»­ cá»§a máº£ng:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] array </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setAll</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(array, i </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">*</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(array));</span></span></code></pre>
</div><p>i tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i chá»‰ sá»‘ cá»§a máº£ng, giÃ¡ trá»‹ báº¯t Ä‘áº§u tá»« 0 vÃ  káº¿t thÃºc á»Ÿ 9, do Ä‘Ã³ <code>i * 10</code> cÃ³ nghÄ©a lÃ  giÃ¡ trá»‹ báº¯t Ä‘áº§u tá»« 0 * 10 Ä‘áº¿n 9 * 10. HÃ£y xem káº¿t quáº£ Ä‘áº§u ra:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>[0, 10, 20, 30, 40, 50, 60, 70, 80, 90]</span></span></code></pre>
</div><p>PhÆ°Æ¡ng thá»©c nÃ y cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ Ä‘iá»n cÃ¡c pháº§n tá»­ má»›i dá»±a trÃªn máº£ng gá»‘c.</p>
<h3>09. <code>parallelPrefix</code></h3>
<p>PhÆ°Æ¡ng thá»©c <code>parallelPrefix()</code> giá»‘ng vá»›i phÆ°Æ¡ng thá»©c <code>setAll()</code>, Ä‘á»u Ä‘Æ°á»£c cung cáº¥p sau Java 8, vÃ  cung cáº¥p má»™t Ä‘iá»ƒm vÃ o cho láº­p trÃ¬nh hÃ m. NÃ³ duyá»‡t qua cÃ¡c pháº§n tá»­ trong máº£ng, thá»±c hiá»‡n thao tÃ¡c giá»¯a pháº§n tá»­ á»Ÿ vá»‹ trÃ­ chá»‰ má»¥c hiá»‡n táº¡i vá»›i cÃ¡c pháº§n tá»­ trÆ°á»›c Ä‘Ã³, rá»“i ghi Ä‘Ã¨ káº¿t quáº£ cá»§a thao tÃ¡c vÃ o vá»‹ trÃ­ chá»‰ má»¥c hiá»‡n táº¡i.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] arr </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] { </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 4</span><span style="color:#E06C75;--shiki-dark:#E06C75"> }</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">parallelPrefix</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(arr, (left, right) </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> left </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> right);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(arr));</span></span></code></pre>
</div><p>Äoáº¡n mÃ£ trÃªn cÃ³ má»™t biá»ƒu thá»©c Lambda (<code>(left, right) -&gt; left + right</code>), cÃ³ nghÄ©a lÃ  gÃ¬? Äoáº¡n mÃ£ nÃ y tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] arr </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] { </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 4</span><span style="color:#E06C75;--shiki-dark:#E06C75"> }</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">parallelPrefix</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(arr, (left, right) </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(left </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> "ï¼Œ"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> right);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> left </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> right;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">});</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(arr));</span></span></code></pre>
</div><p>HÃ£y xem káº¿t quáº£ Ä‘áº§u ra Ä‘á»ƒ hiá»ƒu rÃµ hÆ¡n:</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>1ï¼Œ2</span></span>
<span class="line"><span>3ï¼Œ3</span></span>
<span class="line"><span>6ï¼Œ4</span></span>
<span class="line"><span>[1, 3, 6, 10]</span></span></code></pre>
</div><p>CÃ³ nghÄ©a lÃ , biá»ƒu thá»©c Lambda Ä‘Ã£ Ä‘Æ°á»£c thá»±c thi ba láº§n:</p>
<ul>
<li>Láº§n Ä‘áº§u tiÃªn, cá»™ng 1 vÃ  2, káº¿t quáº£ lÃ  3, thay tháº¿ vá»‹ trÃ­ chá»‰ má»¥c 1.</li>
<li>Láº§n thá»© hai, cá»™ng 3 vÃ  3, káº¿t quáº£ lÃ  6, nghÄ©a lÃ  káº¿t quáº£ láº§n Ä‘áº§u tiÃªn cá»™ng vá»›i pháº§n tá»­ á»Ÿ chá»‰ má»¥c 2.</li>
<li>Láº§n thá»© ba, cá»™ng 6 vÃ  4, káº¿t quáº£ lÃ  10, nghÄ©a lÃ  káº¿t quáº£ láº§n thá»© hai cá»™ng vá»›i pháº§n tá»­ á»Ÿ chá»‰ má»¥c 3.</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Collections</title>
      <link>https://vanhung4499.github.io/programming/java/common-tool/collections.html</link>
      <guid>https://vanhung4499.github.io/programming/java/common-tool/collections.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Collections</source>
      <description>Collections Collections lÃ  má»™t lá»›p cÃ´ng cá»¥ do JDK cung cáº¥p, náº±m trong gÃ³i java.util. NÃ³ cung cáº¥p má»™t loáº¡t cÃ¡c phÆ°Æ¡ng thá»©c tÄ©nh Ä‘á»ƒ giÃºp chÃºng ta thá»±c hiá»‡n cÃ¡c thao tÃ¡c trÃªn cÃ¡c c...</description>
      <category>any</category>
      <pubDate>Thu, 04 Jul 2024 09:37:15 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Collections lÃ  má»™t lá»›p cÃ´ng cá»¥ do JDK cung cáº¥p, náº±m trong gÃ³i java.util. NÃ³ cung cáº¥p má»™t loáº¡t cÃ¡c phÆ°Æ¡ng thá»©c tÄ©nh Ä‘á»ƒ giÃºp chÃºng ta thá»±c hiá»‡n cÃ¡c thao tÃ¡c trÃªn cÃ¡c collection má»™t cÃ¡ch dá»… dÃ ng, Ä‘Æ°á»£c coi nhÆ° lÃ  quáº£n gia cá»§a framework collection.</p>
<p>CÃ¡ch sá»­ dá»¥ng Collections ráº¥t Ä‘Æ¡n giáº£n. Trong Intellij IDEA, khi báº¡n gÃµ <code>Collections.</code> thÃ¬ sáº½ tháº¥y táº¥t cáº£ cÃ¡c phÆ°Æ¡ng thá»©c mÃ  nÃ³ cung cáº¥p. Chá»‰ cáº§n nhÃ¬n qua tÃªn phÆ°Æ¡ng thá»©c vÃ  cÃ¡c tham sá»‘ lÃ  báº¡n cÃ³ thá»ƒ biáº¿t phÆ°Æ¡ng thá»©c Ä‘Ã³ dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704191622.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>Äá»ƒ tiáº¿t kiá»‡m thá»i gian há»c táº­p cá»§a báº¡n, tÃ´i Ä‘Ã£ phÃ¢n loáº¡i cÃ¡c phÆ°Æ¡ng thá»©c nÃ y vÃ  Ä‘Æ°a ra má»™t sá»‘ vÃ­ dá»¥ Ä‘Æ¡n giáº£n.</p>
<h3>01. CÃ¡c Thao TÃ¡c Sáº¯p Xáº¿p</h3>
<ul>
<li><code>reverse(List list)</code>: Äáº£o ngÆ°á»£c thá»© tá»±</li>
<li><code>shuffle(List list)</code>: Trá»™n ngáº«u nhiÃªn thá»© tá»±</li>
<li><code>sort(List list)</code>: Sáº¯p xáº¿p theo thá»© tá»± tÄƒng dáº§n tá»± nhiÃªn</li>
<li><code>sort(List list, Comparator c)</code>: Sáº¯p xáº¿p theo Comparator tÃ¹y chá»‰nh</li>
<li><code>swap(List list, int i, int j)</code>: HoÃ¡n Ä‘á»•i vá»‹ trÃ­ cá»§a hai pháº§n tá»­ táº¡i vá»‹ trÃ­ i vÃ  j</li>
</ul>
<p>VÃ­ dá»¥:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"one"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"two"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"three"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"four"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"five"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Thá»© tá»± ban Ä‘áº§u: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> list);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äáº£o ngÆ°á»£c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">reverse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Sau khi Ä‘áº£o ngÆ°á»£c: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> list);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Trá»™n ngáº«u nhiÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">shuffle</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Sau khi trá»™n: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> list);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Sáº¯p xáº¿p theo thá»© tá»± tá»± nhiÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">sort</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Sau khi sáº¯p xáº¿p tÄƒng dáº§n: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> list);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// HoÃ¡n Ä‘á»•i</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">swap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list, </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Sau khi hoÃ¡n Ä‘á»•i: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> list);</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Káº¿t quáº£ Ä‘áº§u ra:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Thá»© tá»± ban Ä‘áº§u: [one, two, three, four, five]</span></span>
<span class="line"><span>Sau khi Ä‘áº£o ngÆ°á»£c: [five, four, three, two, one]</span></span>
<span class="line"><span>Sau khi trá»™n: [four, one, five, two, three]</span></span>
<span class="line"><span>Sau khi sáº¯p xáº¿p tÄƒng dáº§n: [one, two, three, four, five]</span></span>
<span class="line"><span>Sau khi hoÃ¡n Ä‘á»•i: [one, two, five, four, three]</span></span></code></pre>
</div><h3>02. CÃ¡c Thao TÃ¡c TÃ¬m Kiáº¿m</h3>
<ul>
<li><code>binarySearch(List list, Object key)</code>: TÃ¬m kiáº¿m nhá»‹ phÃ¢n, yÃªu cáº§u List Ä‘Ã£ Ä‘Æ°á»£c sáº¯p xáº¿p</li>
<li><code>max(Collection coll)</code>: Tráº£ vá» pháº§n tá»­ lá»›n nháº¥t</li>
<li><code>max(Collection coll, Comparator comp)</code>: Tráº£ vá» pháº§n tá»­ lá»›n nháº¥t dá»±a trÃªn Comparator tÃ¹y chá»‰nh</li>
<li><code>min(Collection coll)</code>: Tráº£ vá» pháº§n tá»­ nhá» nháº¥t</li>
<li><code>min(Collection coll, Comparator comp)</code>: Tráº£ vá» pháº§n tá»­ nhá» nháº¥t dá»±a trÃªn Comparator tÃ¹y chá»‰nh</li>
<li><code>fill(List list, Object obj)</code>: Äiá»n má»™t Ä‘á»‘i tÆ°á»£ng vÃ o táº¥t cáº£ cÃ¡c pháº§n tá»­ trong danh sÃ¡ch</li>
<li><code>frequency(Collection c, Object o)</code>: Äáº¿m sá»‘ láº§n xuáº¥t hiá»‡n cá»§a Ä‘á»‘i tÆ°á»£ng trong collection</li>
</ul>
<p>VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Pháº§n tá»­ lá»›n nháº¥t: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">max</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Pháº§n tá»­ nhá» nháº¥t: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">min</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Sá»‘ láº§n xuáº¥t hiá»‡n: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">frequency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list, </span><span style="color:#98C379;--shiki-dark:#98C379">"one"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ChÆ°a sáº¯p xáº¿p mÃ  gá»i binarySearch, káº¿t quáº£ khÃ´ng xÃ¡c Ä‘á»‹nh</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Káº¿t quáº£ tÃ¬m kiáº¿m nhá»‹ phÃ¢n trÆ°á»›c khi sáº¯p xáº¿p: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">binarySearch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list, </span><span style="color:#98C379;--shiki-dark:#98C379">"one"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">sort</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Sau khi sáº¯p xáº¿p, káº¿t quáº£ tÃ¬m kiáº¿m nhá»‹ phÃ¢n chÃ­nh xÃ¡c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Káº¿t quáº£ tÃ¬m kiáº¿m nhá»‹ phÃ¢n sau khi sáº¯p xáº¿p: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">binarySearch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list, </span><span style="color:#98C379;--shiki-dark:#98C379">"one"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">fill</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list, </span><span style="color:#98C379;--shiki-dark:#98C379">"tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Káº¿t quáº£ sau khi Ä‘iá»n: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> list);</span></span></code></pre>
</div><p>Káº¿t quáº£ Ä‘áº§u ra:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Thá»© tá»± ban Ä‘áº§u: [one, two, three, four, five]</span></span>
<span class="line"><span>Pháº§n tá»­ lá»›n nháº¥t: five</span></span>
<span class="line"><span>Pháº§n tá»­ nhá» nháº¥t: one</span></span>
<span class="line"><span>Sá»‘ láº§n xuáº¥t hiá»‡n: 1</span></span>
<span class="line"><span>Káº¿t quáº£ tÃ¬m kiáº¿m nhá»‹ phÃ¢n trÆ°á»›c khi sáº¯p xáº¿p: -1</span></span>
<span class="line"><span>Káº¿t quáº£ tÃ¬m kiáº¿m nhá»‹ phÃ¢n sau khi sáº¯p xáº¿p: 0</span></span>
<span class="line"><span>Káº¿t quáº£ sau khi Ä‘iá»n: [tom, tom, tom, tom, tom]</span></span></code></pre>
</div><h3>03. Äá»“ng Bá»™ HÃ³a</h3>
<p><a href="/programming/java/collection/hashmap">HashMap khÃ´ng an toÃ n khi dÃ¹ng trong Ä‘a luá»“ng</a>, chÃºng ta Ä‘Ã£ nÃ³i vá» Ä‘iá»u nÃ y trÆ°á»›c Ä‘Ã¢y. Thá»±c ra, ArrayList cÅ©ng khÃ´ng an toÃ n khi dÃ¹ng trong Ä‘a luá»“ng vÃ  khÃ´ng thá»ƒ sá»­ dá»¥ng trong mÃ´i trÆ°á»ng Ä‘a luá»“ng. Tuy nhiÃªn, lá»›p cÃ´ng cá»¥ Collections cung cáº¥p má»™t sá»‘ phÆ°Æ¡ng thá»©c synchronizedXxx Ä‘á»ƒ tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c Ä‘á»“ng bá»™ hÃ³a, tá»« Ä‘Ã³ giáº£i quyáº¿t váº¥n Ä‘á» an toÃ n khi truy cáº­p collection trong Ä‘a luá»“ng.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704191648.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Sá»­ dá»¥ng cÅ©ng ráº¥t Ä‘Æ¡n giáº£n:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> synchronizedList </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">synchronizedList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list);</span></span></code></pre>
</div><p>NhÃ¬n vÃ o mÃ£ nguá»“n cá»§a SynchronizedList sáº½ hiá»ƒu ngay, nÃ³ chá»‰ thÃªm má»™t lá»›p khÃ³a báº±ng tá»« khÃ³a <a href="/programming/java/thread/synchronized-1">synchronized</a> vÃ o cÃ¡c phÆ°Æ¡ng thá»©c mÃ  thÃ´i.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> SynchronizedList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">E</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> SynchronizedCollection</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">E</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">E</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> serialVersionUID </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">7754090372962971524L</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">E</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    SynchronizedList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">E</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        super</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Gá»i hÃ m khá»Ÿi táº¡o cá»§a lá»›p cha SynchronizedCollection, truyá»n vÃ o list</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> list; </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Khá»Ÿi táº¡o biáº¿n thÃ nh viÃªn list</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Láº¥y pháº§n tá»­ táº¡i chá»‰ má»¥c chá»‰ Ä‘á»‹nh</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> E</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        synchronized</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (mutex) {</span><span style="color:#C678DD;--shiki-dark:#C678DD">return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(index);} </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ThÃªm khÃ³a, gá»i phÆ°Æ¡ng thá»©c get cá»§a list Ä‘á»ƒ láº¥y pháº§n tá»­</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // ThÃªm pháº§n tá»­ táº¡i chá»‰ má»¥c chá»‰ Ä‘á»‹nh</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">E</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> element</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        synchronized</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (mutex) {</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(index, element);} </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ThÃªm khÃ³a, gá»i phÆ°Æ¡ng thá»©c add cá»§a list Ä‘á»ƒ thÃªm pháº§n tá»­</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // XÃ³a pháº§n tá»­ táº¡i chá»‰ má»¥c chá»‰ Ä‘á»‹nh</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> E</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> remove</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        synchronized</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (mutex) {</span><span style="color:#C678DD;--shiki-dark:#C678DD">return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">remove</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(index);} </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ThÃªm khÃ³a, gá»i phÆ°Æ¡ng thá»©c remove cá»§a list Ä‘á»ƒ xÃ³a pháº§n tá»­</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>NhÆ° váº­y, hiá»‡u suáº¥t sáº½ tÆ°Æ¡ng tá»± nhÆ° viá»‡c sá»­ dá»¥ng trá»±c tiáº¿p tá»« khÃ³a synchronized trÃªn cÃ¡c phÆ°Æ¡ng thá»©c cá»§a <a href="/programming/java/collection/overview">Vector, Hashtable</a> (Ä‘Ã£ cÃ³ tá»« JDK 1.0), nhÆ°ng cÃ¡c lá»›p collection nÃ y háº§u nhÆ° Ä‘Ã£ bá»‹ loáº¡i bá» vÃ  Ã­t Ä‘Æ°á»£c sá»­ dá»¥ng.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Vector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">E</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AbstractList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">E</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">E</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> RandomAccess</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Cloneable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> java.io.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Serializable</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Láº¥y pháº§n tá»­ táº¡i chá»‰ má»¥c chá»‰ Ä‘á»‹nh</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> synchronized</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> E</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (index </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> elementCount) </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Náº¿u chá»‰ má»¥c vÆ°á»£t quÃ¡ kÃ­ch thÆ°á»›c cá»§a danh sÃ¡ch, nÃ©m ra ngoáº¡i lá»‡ ArrayIndexOutOfBoundsException</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ArrayIndexOutOfBoundsException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(index);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> elementData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(index); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Tráº£ vá» pháº§n tá»­ táº¡i chá»‰ má»¥c chá»‰ Ä‘á»‹nh</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // XÃ³a pháº§n tá»­ táº¡i chá»‰ má»¥c chá»‰ Ä‘á»‹nh</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> synchronized</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> E</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> remove</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        modCount++; </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äáº¿m sá»‘ láº§n sá»­a Ä‘á»•i, Ä‘Ã¡nh dáº¥u danh sÃ¡ch Ä‘Ã£ bá»‹ thay Ä‘á»•i</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (index </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> elementCount) </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Náº¿u chá»‰ má»¥c vÆ°á»£t quÃ¡ kÃ­ch thÆ°á»›c cá»§a danh sÃ¡ch, nÃ©m ra ngoáº¡i lá»‡ ArrayIndexOutOfBoundsException</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ArrayIndexOutOfBoundsException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(index);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        E</span><span style="color:#E06C75;--shiki-dark:#E06C75"> oldValue</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> elementData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(index); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Láº¥y pháº§n tá»­ táº¡i chá»‰ má»¥c chá»‰ Ä‘á»‹nh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> numMoved</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> elementCount </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> index </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// TÃ­nh sá»‘ pháº§n tá»­ cáº§n di chuyá»ƒn</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (numMoved </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Náº¿u cáº§n di chuyá»ƒn pháº§n tá»­</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">arraycopy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(elementData, index</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, elementData, index,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                             numMoved); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Di chuyá»ƒn cÃ¡c pháº§n tá»­ trong máº£ng vá» bÃªn trÃ¡i má»™t vá»‹ trÃ­</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        elementData[--elementCount] </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äáº·t pháº§n tá»­ cuá»‘i cÃ¹ng thÃ nh null Ä‘á»ƒ chá» thu há»“i bá»™ nhá»›</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> oldValue; </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Tráº£ vá» pháº§n tá»­ bá»‹ xÃ³a</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>CÃ¡ch Ä‘Ãºng Ä‘áº¯n lÃ  sá»­ dá»¥ng cÃ¡c lá»›p trong gÃ³i Ä‘á»“ng bá»™ hÃ³a nhÆ° <a href="/programming/java/thread/CopyOnWriteArrayList">CopyOnWriteArrayList</a> vÃ  <a href="/programming/java/thread/ConcurrentHashMap">ConcurrentHashMap</a>. ChÃºng ta sáº½ bÃ n vá» nhá»¯ng váº¥n Ä‘á» nÃ y khi nÃ³i vá» láº­p trÃ¬nh Ä‘á»“ng bá»™ hÃ³a.</p>
<h3>04. Táº­p Há»£p KhÃ´ng Thay Äá»•i</h3>
<ul>
<li><code>emptyXxx()</code>ï¼šTáº¡o má»™t táº­p há»£p khÃ´ng thay Ä‘á»•i rá»—ng.</li>
<li><code>singletonXxx()</code>ï¼šTáº¡o má»™t táº­p há»£p khÃ´ng thay Ä‘á»•i chá»‰ chá»©a má»™t pháº§n tá»­.</li>
<li><code>unmodifiableXxx()</code>ï¼šTáº¡o má»™t táº­p há»£p khÃ´ng thay Ä‘á»•i tá»« táº­p há»£p Ä‘Ã£ cho.</li>
</ul>
<p>VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> emptyList </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">emptyList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">emptyList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"KhÃ´ng Rá»—ng"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // DÃ²ng mÃ£ nÃ y sáº½ gÃ¢y ra lá»—i khi thá»±c thi.</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(emptyList);</span></span></code></pre>
</div><p>Khi thá»±c thi Ä‘oáº¡n mÃ£ nÃ y, sáº½ cÃ³ má»™t ngoáº¡i lá»‡ Ä‘Æ°á»£c nÃ©m ra:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Exception in thread "main" java.lang.UnsupportedOperationException</span></span>
<span class="line"><span>	at java.util.AbstractList.add(AbstractList.java:148)</span></span>
<span class="line"><span>	at java.util.AbstractList.add(AbstractList.java:108)</span></span>
<span class="line"><span>	at com.itwanger.s64.Demo.main(Demo.java:61)</span></span></code></pre>
</div><p>LÃ½ do lÃ  <code>Collections.emptyList()</code> tráº£ vá» má»™t lá»›p trong ná»™i bá»™ cá»§a Collections lÃ  EmptyList, vÃ  EmptyList khÃ´ng override phÆ°Æ¡ng thá»©c <code>add(int index, E element)</code> cá»§a lá»›p cha AbstractList. Do Ä‘Ã³, khi thá»±c thi, nÃ³ sáº½ nÃ©m ra ngoáº¡i lá»‡ UnsupportedOperationException vÃ¬ khÃ´ng há»— trá»£ thao tÃ¡c nÃ y.</p>
<p>Äiá»u nÃ y Ä‘Æ°á»£c suy ra tá»« viá»‡c phÃ¢n tÃ­ch mÃ£ nguá»“n cá»§a phÆ°Æ¡ng thá»©c add. NgoÃ i ra, phÆ°Æ¡ng thá»©c emptyList lÃ  final vÃ  EMPTY_LIST Ä‘Æ°á»£c tráº£ vá» cÅ©ng lÃ  final, cho tháº¥y rÃµ ráº±ng emptyList tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng khÃ´ng thay Ä‘á»•i vÃ  khÃ´ng thá»ƒ thá»±c hiá»‡n cÃ¡c thao tÃ¡c thÃªm, xÃ³a, sá»­a.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">T</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> List</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">T</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> emptyList</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">T</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">) EMPTY_LIST</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> List</span><span style="color:#E06C75;--shiki-dark:#E06C75"> EMPTY_LIST </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> EmptyList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><h3>05. KhÃ¡c</h3>
<p>CÃ²n hai phÆ°Æ¡ng thá»©c khÃ¡c thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng:</p>
<ul>
<li><code>addAll(Collection&lt;? super T&gt; c, T... elements)</code>: ThÃªm cÃ¡c pháº§n tá»­ vÃ o táº­p há»£p.</li>
<li><code>disjoint(Collection&lt;?&gt; c1, Collection&lt;?&gt; c2)</code>: Kiá»ƒm tra xem hai táº­p há»£p cÃ³ pháº§n tá»­ chung hay khÃ´ng.</li>
</ul>
<p>VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> allList </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">addAll</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(allList, </span><span style="color:#98C379;--shiki-dark:#98C379">"nine"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">"ten"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">"one"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Sau khi thÃªm vÃ o allList: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> allList);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Hai táº­p há»£p khÃ´ng cÃ³ pháº§n tá»­ chung: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">disjoint</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list, allList) </span><span style="color:#C678DD;--shiki-dark:#C678DD">?</span><span style="color:#98C379;--shiki-dark:#98C379"> "CÃ³"</span><span style="color:#C678DD;--shiki-dark:#C678DD"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "KhÃ´ng"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span></code></pre>
</div><p>Sau khi thá»±c thi:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Danh sÃ¡ch ban Ä‘áº§u: [one, two, three, four, five]</span></span>
<span class="line"><span>Sau khi thÃªm vÃ o allList: [nine, ten, one]</span></span>
<span class="line"><span>Hai táº­p há»£p khÃ´ng cÃ³ pháº§n tá»­ chung: KhÃ´ng</span></span></code></pre>
</div><h3>06. CollectionUtils: CÃ¡c lá»›p tiá»‡n Ã­ch cho táº­p há»£p tá»« Spring vÃ  Apache</h3>
<p>NgoÃ i cÃ¡c cÃ´ng cá»¥ tá»« JDK nhÆ° <code>Collections</code>, <code>CollectionUtils</code> tá»« Spring vÃ  Apache cÅ©ng ráº¥t phá»• biáº¿n.</p>
<p>Hiá»‡n táº¡i, phá»• biáº¿n nháº¥t lÃ  <code>CollectionUtils</code> trong gÃ³i <code>org.springframework.util</code> cá»§a Spring.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704192055.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>VÃ  <code>CollectionUtils</code> trong gÃ³i <code>org.apache.commons.collections</code> cá»§a Apache.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704192106.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>CÃ¡c Maven coordinates nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;dependency&gt;</span></span>
<span class="line"><span>    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;</span></span>
<span class="line"><span>    &lt;artifactId&gt;commons-collections4&lt;/artifactId&gt;</span></span>
<span class="line"><span>    &lt;version&gt;4.4&lt;/version&gt;</span></span>
<span class="line"><span>&lt;/dependency&gt;</span></span></code></pre>
</div><p>CÃ¡c phÆ°Æ¡ng thá»©c tá»« Apache nhiá»u hÆ¡n so vá»›i Spring, chÃºng ta sáº½ láº¥y vÃ­ dá»¥ vá»›i Apache Ä‘á»ƒ giá»›i thiá»‡u má»™t sá»‘ phÆ°Æ¡ng thá»©c thÃ´ng dá»¥ng.</p>
<h4>Kiá»ƒm tra táº­p há»£p cÃ³ rá»—ng hay khÃ´ng</h4>
<p>Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>isEmpty</code> cá»§a <code>CollectionUtils</code> Ä‘á»ƒ dá»… dÃ ng kiá»ƒm tra táº­p há»£p cÃ³ rá»—ng khÃ´ng, vÃ  <code>isNotEmpty</code> Ä‘á»ƒ kiá»ƒm tra táº­p há»£p khÃ´ng rá»—ng.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">CollectionUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isEmpty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list)</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Táº­p há»£p rá»—ng"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">CollectionUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isNotEmpty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list)</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Táº­p há»£p khÃ´ng rá»—ng"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><h4>Thao tÃ¡c vá»›i hai táº­p há»£p</h4>
<p>ÄÃ´i khi chÃºng ta cáº§n thá»±c hiá»‡n cÃ¡c thao tÃ¡c nhÆ° láº¥y há»£p, giao, hay bÃ¹ cá»§a hai táº­p há»£p Ä‘Ã£ cÃ³.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Láº¥y há»£p cá»§a hai táº­p há»£p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collection</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> unionList </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CollectionUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">union</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list1, list2);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(unionList);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Láº¥y giao cá»§a hai táº­p há»£p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collection</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> intersectionList </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CollectionUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">intersection</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list1, list2);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(intersectionList);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Láº¥y bÃ¹ cá»§a giao cá»§a hai táº­p há»£p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collection</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> disjunctionList </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CollectionUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">disjunction</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list1, list2);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(disjunctionList);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Láº¥y hiá»‡u cá»§a hai táº­p há»£p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collection</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> subtractList </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CollectionUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">subtract</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list1, list2);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(subtractList);</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Káº¿t quáº£ thá»±c thi:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 4</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 4</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 3</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span></span></code></pre>
</div><p>Tháº­t sá»±, trong thá»±c táº¿ lÃ m viá»‡c, thao tÃ¡c vá»›i hai táº­p há»£p nhÆ° váº­y ráº¥t phá»• biáº¿n, Ä‘áº·c biá»‡t lÃ  trong cÃ¡c ká»‹ch báº£n xá»­ lÃ½ hÃ ng loáº¡t. TrÆ°á»›c Ä‘Ã¢y chÃºng ta cáº§n pháº£i viáº¿t ráº¥t nhiá»u mÃ£, nhÆ°ng giá» cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c thÆ° viá»‡n cÃ³ sáºµn.</p>
<h3>07. Tá»•ng Káº¿t</h3>
<p>Tá»•ng quan, lá»›p tiá»‡n Ã­ch <code>Collections</code> lÃ  ngÆ°á»i quáº£n lÃ½ lá»›n cá»§a khuÃ´n khá»• táº­p há»£p, cung cáº¥p cÃ¡c phÆ°Æ¡ng thá»©c ráº¥t tiá»‡n lá»£i Ä‘á»ƒ chÃºng ta gá»i vÃ  dá»… dÃ ng Ä‘á»ƒ hiá»ƒu, khÃ´ng cÃ³ gÃ¬ khÃ³ khÄƒn, chá»‰ cáº§n xem chÃº thÃ­ch cá»§a phÆ°Æ¡ng thá»©c lÃ  cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c nÃ³ lÃ m gÃ¬.</p>
<p>Tuy nhiÃªn, cÃ´ng cá»¥ Ä‘Ã¢u Ä‘Ã³, cÃ¡ch sá»­ dá»¥ng nÃ³ láº¡i lÃ  váº¥n Ä‘á» khÃ¡c. Kháº£ nÄƒng nÃ¢ng cao ká»¹ nÄƒng láº­p trÃ¬nh cá»§a báº¡n, phá»¥ thuá»™c lá»›n vÃ o viá»‡c báº¡n cÃ³ khai thÃ¡c mÃ£ nguá»“n cá»§a chÃºng, xem cÃ¡ch cÃ¡c báº­c tháº§y thiáº¿t káº¿ JDK viáº¿t mÃ£, há»c má»™t vÃ i ká»¹ thuáº­t, trong cÃ´ng viá»‡c thá»±c táº¿, báº¡n cÃ³ thá»ƒ ná»•i báº­t nhanh chÃ³ng.</p>
<p>CÃ³ láº½ nhá»¯ng ngÆ°á»i thiáº¿t káº¿ JDK má»›i lÃ  giÃ¡o viÃªn tá»‘t nháº¥t trÃªn tháº¿ giá»›i nÃ y, tÃ i liá»‡u viáº¿t ráº¥t chi tiáº¿t, mÃ£ viáº¿t ráº¥t sÃ¡ng sá»§a, háº§u nhÆ° Ä‘Ã£ Ä‘áº¡t Ä‘áº¿n Ä‘iá»ƒm tá»‘i Æ°u vá» hiá»‡u suáº¥t.</p>
<p>CÃ³ thá»ƒ cÃ³ ngÆ°á»i nÃ³i ráº±ng, lá»›p tiá»‡n Ã­ch khÃ´ng cÃ³ gÃ¬ giÃ¡ trá»‹, chá»‰ lÃ  gá»i phÆ°Æ¡ng thá»©c thÃ´i, nhÆ°ng Ä‘Ã³ lÃ  sai láº§m lá»›n: náº¿u báº¡n Ä‘Æ°á»£c yÃªu cáº§u viáº¿t, liá»‡u báº¡n cÃ³ viáº¿t Ä‘Æ°á»£c má»™t lá»›p tiá»‡n Ã­ch nhÆ° Collections khÃ´ng?</p>
<p>ÄÃ³ lÃ  cÃ¢u há»i mÃ  nhá»¯ng ngÆ°á»i giá»i cáº§n suy nghÄ©.</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704191622.png" type="image/png"/>
    </item>
    <item>
      <title>Guava</title>
      <link>https://vanhung4499.github.io/programming/java/common-tool/guava.html</link>
      <guid>https://vanhung4499.github.io/programming/java/common-tool/guava.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Guava</source>
      <description>Guava QuÃ¡ khá»© vÃ  hiá»‡n táº¡i Guava Ä‘Æ°á»£c Google cÃ´ng bá»‘ mÃ£ nguá»“n má»Ÿ vÃ  hiá»‡n Ä‘Ã£ cÃ³ 49k ngÆ°á»i hÃ¢m má»™ trÃªn GitHub, chá»©ng tá» sá»± phá»• biáº¿n cá»§a guava. Guava chá»§ yáº¿u bao gá»“m cÃ¡c mÃ´-Ä‘un phá»• ...</description>
      <category>java</category>
      <pubDate>Thu, 04 Jul 2024 09:37:15 GMT</pubDate>
      <content:encoded><![CDATA[
<h3>QuÃ¡ khá»© vÃ  hiá»‡n táº¡i</h3>
<p><a href="https://github.com/google/guava" target="_blank" rel="noopener noreferrer">Guava</a> Ä‘Æ°á»£c Google cÃ´ng bá»‘ mÃ£ nguá»“n má»Ÿ vÃ  hiá»‡n Ä‘Ã£ cÃ³ 49k ngÆ°á»i hÃ¢m má»™ trÃªn GitHub, chá»©ng tá» sá»± phá»• biáº¿n cá»§a guava.</p>
<p>Guava chá»§ yáº¿u bao gá»“m cÃ¡c mÃ´-Ä‘un phá»• biáº¿n sau: collection [collections], bá»™ Ä‘á»‡m [caching], há»— trá»£ kiá»ƒu nguyÃªn thá»§y [primitives support], thÆ° viá»‡n Ä‘á»“ng bá»™ [concurrency libraries], annotations thÃ´ng thÆ°á»ng [common annotations], xá»­ lÃ½ chuá»—i [string processing], I/O, vv. PhiÃªn báº£n JDK má»›i Ä‘Ã£ trá»±c tiáº¿p tÃ­ch há»£p guave, cho tháº¥y sá»± xuáº¥t sáº¯c cá»§a guava!</p>
<p>Náº¿u biáº¿t cÃ¡ch sá»­ dá»¥ng guava má»™t cÃ¡ch hiá»‡u quáº£, báº¡n sáº½ viáº¿t mÃ£ nhanh hÆ¡n vÃ  Ä‘áº¹p hÆ¡n trong láº­p trÃ¬nh!</p>
<h3>02. ÄÆ°a Guava vÃ o dá»± Ã¡n</h3>
<p>Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng dá»± Ã¡n Maven, báº¡n cáº§n thÃªm dependency cá»§a guava vÃ o file pom.xml.</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;com.google.guava&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;guava&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;30.1-jre&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><p>YÃªu cáº§u JDK phiÃªn báº£n 8 trá»Ÿ lÃªn.</p>
<h3>03. CÃ´ng cá»¥ cÆ¡ báº£n</h3>
<p>Doug Lea, tÃ¡c giáº£ cá»§a gÃ³i java.util.concurrent, tá»«ng nÃ³i: null tháº­t sá»± tá»“i tá»‡". Tony Hoare, nhÃ  Ä‘oáº¡t giáº£i Turing vÃ  tÃ¡c giáº£ cá»§a thuáº­t toÃ¡n sáº¯p xáº¿p nhanh, cÅ©ng lÃ  ngÆ°á»i sÃ¡ng láº­p ra null, cÅ©ng tá»«ng cÃ³ cÃ¢u nÃ³i tÆ°Æ¡ng tá»±: "Viá»‡c sá»­ dá»¥ng null khiáº¿n guava máº¥t Ä‘i má»™t tá»· USD". VÃ¬ váº­y, guava sá»­ dá»¥ng Optional Ä‘á»ƒ biá»ƒu thá»‹ Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ lÃ  null.</p>
<p>Äoáº¡n mÃ£ vÃ­ dá»¥ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> possible </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Optional</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">of</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">possible</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isPresent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // tráº£ vá» true</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">possible</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // tráº£ vá» 5</span></span></code></pre>
</div><p>Optional cá»§a guava lÃ  abstract, cÃ³ nghÄ©a lÃ  cÃ³ thá»ƒ cÃ³ cÃ¡c lá»›p con; Optional cá»§a JDK lÃ  final, khÃ´ng thá»ƒ cÃ³ lá»›p con.<br>
Optional cá»§a guava thá»±c hiá»‡n Serializable interface Ä‘á»ƒ cÃ³ thá»ƒ serialize; Optional cá»§a JDK khÃ´ng há»— trá»£ Ä‘iá»u nÃ y.<br>
Má»™t sá»‘ phÆ°Æ¡ng thá»©c cá»§a guava vÃ  JDK cÅ©ng khÃ¡c nhau.</p>
<p>Viá»‡c sá»­ dá»¥ng Optional khÃ´ng chá»‰ cáº¥p cho null má»™t Ã½ nghÄ©a mÃ  cÃ²n tÄƒng tÃ­nh Ä‘á»c cá»§a mÃ£. Äiá»ƒm máº¡nh nháº¥t cá»§a Optional lÃ  nÃ³ lÃ  má»™t lá»›p báº£o vá»‡ Ä‘Æ¡n giáº£n. Optional báº¯t buá»™c báº¡n suy nghÄ© má»™t cÃ¡ch tÃ­ch cá»±c vá» trÆ°á»ng há»£p tham chiáº¿u khÃ´ng cÃ³ máº·t, vÃ¬ báº¡n pháº£i rÃµ rÃ ng láº¥y tham chiáº¿u tá»« Optional.</p>
<p>NgoÃ i Optional, guava cÃ²n cung cáº¥p:</p>
<ul>
<li>Kiá»ƒm tra tham sá»‘</li>
<li>CÃ¡c phÆ°Æ¡ng thá»©c thÃ´ng thÆ°á»ng cá»§a Ä‘á»‘i tÆ°á»£ng, vÃ­ dá»¥ nhÆ° Objects.equals, Objects.hashCode, lá»›p Objects Ä‘Æ°á»£c JDK 7 giá»›i thiá»‡u cÅ©ng cung cáº¥p cÃ¡c phÆ°Æ¡ng thá»©c tÆ°Æ¡ng tá»±, dÆ°á»ng nhÆ° cÅ©ng lÃ  tá»« guava mÃ  ra.</li>
<li>Bá»™ so sÃ¡nh máº¡nh máº½ hÆ¡n</li>
</ul>
<h3>04. Collection</h3>
<p>Äáº§u tiÃªn, tÃ´i sáº½ giáº£i thÃ­ch táº¡i sao cáº§n cÃ³ cÃ¡c collection khÃ´ng thay Ä‘á»•i.</p>
<ul>
<li>Äáº£m báº£o an toÃ n luá»“ng. Trong cÃ¡c chÆ°Æ¡ng trÃ¬nh Ä‘á»“ng thá»i, viá»‡c sá»­ dá»¥ng collection khÃ´ng thay Ä‘á»•i khÃ´ng chá»‰ Ä‘áº£m báº£o tÃ­nh an toÃ n cá»§a luá»“ng mÃ  cÃ²n tÄƒng Ä‘Ã¡ng ká»ƒ hiá»‡u suáº¥t khi cháº¡y Ä‘á»“ng thá»i (so vá»›i viá»‡c sá»­ dá»¥ng khÃ³a Ä‘á»“ng thá»i).</li>
<li>Náº¿u má»™t Ä‘á»‘i tÆ°á»£ng khÃ´ng cáº§n há»— trá»£ cÃ¡c thao tÃ¡c sá»­a Ä‘á»•i, cÃ¡c collection khÃ´ng thay Ä‘á»•i sáº½ tiáº¿t kiá»‡m Ä‘Æ°á»£c khÃ´ng gian vÃ  thá»i gian.</li>
<li>CÃ³ thá»ƒ coi chÃºng nhÆ° cÃ¡c háº±ng sá»‘ vÃ  cÃ¡c Ä‘á»‘i tÆ°á»£ng trong collection sáº½ khÃ´ng bao giá» bá»‹ thay Ä‘á»•i sau nÃ y.</li>
</ul>
<p>So vá»›i cÃ¡c collection khÃ´ng thay Ä‘á»•i Ä‘Æ°á»£c cung cáº¥p trong JDK, collection Immutable mÃ  guava cung cáº¥p má»›i lÃ  thá»±c sá»± khÃ´ng thay Ä‘á»•i. Táº¡i sao láº¡i nhÆ° váº­y? HÃ£y xem vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y.</p>
<p>MÃ£ dÆ°á»›i Ä‘Ã¢y sá»­ dá»¥ng <code>Collections.unmodifiableList(list)</code> cá»§a JDK Ä‘á»ƒ nháº­n má»™t danh sÃ¡ch khÃ´ng thá»ƒ sá»­a Ä‘á»•i tá»« <code>list</code>.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ArrayList</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"LÃª CÃ¢n"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Quyá»ƒn ChÃ¢u"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#E06C75;--shiki-dark:#E06C75"> unmodifiableList </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">unmodifiableList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">unmodifiableList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"MÃ£ VÃ¢n"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Khi cháº¡y mÃ£, sáº½ nháº­n Ä‘Æ°á»£c exception sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Exception in thread "main" java.lang.UnsupportedOperationException</span></span>
<span class="line"><span>	at java.base/java.util.Collections$UnmodifiableCollection.add(Collections.java:1060)</span></span>
<span class="line"><span>	at com.itwanger.guava.NullTest.main(NullTest.java:29)</span></span></code></pre>
</div><p>Tá»‘t láº¯m, viá»‡c gá»i <code>unmodifiableList.add()</code> Ä‘Ã£ gÃ¢y ra exception UnsupportedOperationException, cho tháº¥y <code>Collections.unmodifiableList()</code> Ä‘Ã£ tráº£ vá» má»™t danh sÃ¡ch khÃ´ng thá»ƒ sá»­a Ä‘á»•i. NhÆ°ng liá»‡u thá»±c sá»± lÃ  nhÆ° váº­y khÃ´ng?</p>
<p>Báº¡n cÃ³ thá»ƒ thay tháº¿ <code>unmodifiableList.add()</code> báº±ng <code>list.add()</code>.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ArrayList</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"LÃª CÃ¢n"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Quyá»ƒn ChÃ¢u"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#E06C75;--shiki-dark:#E06C75"> unmodifiableList </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">unmodifiableList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"MÃ£ VÃ¢n"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Khi cháº¡y láº¡i, chÆ°Æ¡ng trÃ¬nh khÃ´ng bÃ¡o lá»—i vÃ  báº¡n sáº½ tháº¥y ráº±ng <code>unmodifiableList</code> thá»±c sá»± Ä‘Ã£ thÃªm má»™t pháº§n tá»­ má»›i. Äiá»u nÃ y cÃ³ Ã½ nghÄ©a gÃ¬?</p>
<p>PhÆ°Æ¡ng thá»©c <code>Collections.unmodifiableList(...)</code> thá»±c sá»± khÃ´ng táº¡o ra má»™t collection khÃ´ng thay Ä‘á»•i hoÃ n chá»‰nh; khi danh sÃ¡ch gá»‘c bá»‹ thay Ä‘á»•i, cÃ¡c pháº§n tá»­ trong danh sÃ¡ch khÃ´ng thay Ä‘á»•i cÅ©ng sáº½ thay Ä‘á»•i theo.</p>
<p>guava sáº½ khÃ´ng máº¯c lá»—i nÃ y, hÃ£y xem Ä‘oáº¡n mÃ£ dÆ°á»›i Ä‘Ã¢y.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> stringArrayList </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Lists</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"LÃª CÃ¢n"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Quyá»ƒn ChÃ¢u"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">ImmutableList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> immutableList </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ImmutableList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">copyOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(stringArrayList);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">immutableList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"MÃ£ VÃ¢n"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Khi cá»‘ gáº¯ng gá»i <code>immutableList.add()</code>, nÃ³ sáº½ nÃ©m ra <code>UnsupportedOperationException</code>. guava Ä‘Ã£ Ä‘Ã¡nh dáº¥u phÆ°Æ¡ng thá»©c <code>add()</code> trong mÃ£ nguá»“n lÃ  lá»—i cÅ©.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  * Äáº£m báº£o nÃ©m ra exception vÃ  khÃ´ng lÃ m thay Ä‘á»•i collection.</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  *</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  * </span><span style="color:#C678DD;--shiki-dark:#C678DD;font-style:italic;--shiki-dark-font-style:italic">@throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;font-style:italic;--shiki-dark-font-style:italic"> UnsupportedOperationException</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> luÃ´n luÃ´n nÃ©m ra exception nÃ y.</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  * </span><span style="color:#C678DD;--shiki-dark:#C678DD;font-style:italic;--shiki-dark-font-style:italic">@deprecated</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> Thao tÃ¡c khÃ´ng Ä‘Æ°á»£c há»— trá»£.</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  */</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">CanIgnoreReturnValue</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Deprecated</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> boolean</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> add</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">E</span><span style="color:#E06C75;--shiki-dark:#E06C75"> e) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> UnsupportedOperationException</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Khi cá»‘ gáº¯ng thay Ä‘á»•i <code>stringArrayList.add()</code>, collection khÃ´ng thay Ä‘á»•i <code>immutableList</code> sáº½ khÃ´ng bá»‹ áº£nh hÆ°á»Ÿng bá»Ÿi Ä‘iá»u nÃ y.</p>
<p>NgoÃ i cÃ¡c collection khÃ´ng thay Ä‘á»•i, guava cÅ©ng cung cáº¥p cÃ¡c loáº¡i collection má»›i nhÆ°:</p>
<ul>
<li>Multiset, cÃ³ thá»ƒ thÃªm nhiá»u pháº§n tá»­ giá»‘ng nhau. Khi xem Multiset nhÆ° má»™t Collection thÃ´ng thÆ°á»ng, nÃ³ hoáº¡t Ä‘á»™ng giá»‘ng nhÆ° ArrayList khÃ´ng cÃ³ thá»© tá»±; khi xem Multiset nhÆ° <code>Map&lt;E, Integer&gt;</code>, nÃ³ cung cáº¥p cÃ¡c thao tÃ¡c truy váº¥n phÃ¹ há»£p vá»›i hiá»‡u suáº¥t mong Ä‘á»£i.</li>
<li>Multimap, dá»… dÃ ng Ã¡nh xáº¡ má»™t khÃ³a sang nhiá»u giÃ¡ trá»‹.</li>
<li>BiMap, má»™t loáº¡i Map Ä‘áº·c biá»‡t, cÃ³ thá»ƒ dÃ¹ng <code>inverse()</code> Ä‘á»ƒ Ä‘áº£o ngÆ°á»£c Ã¡nh xáº¡ khÃ³a giÃ¡ trá»‹ trong <code>BiMap&lt;K, V&gt;</code>; Ä‘áº£m báº£o giÃ¡ trá»‹ lÃ  duy nháº¥t, do Ä‘Ã³ <code>values()</code> tráº£ vá» Set thay vÃ¬ Collection thÃ´ng thÆ°á»ng.</li>
</ul>
<h3>05. Xá»­ lÃ½ chuá»—i</h3>
<p>Chuá»—i lÃ  má»™t dÃ£y khÃ´ng thá»ƒ thay Ä‘á»•i cÃ¡c kÃ½ tá»± sau khi Ä‘Ã£ Ä‘Æ°á»£c táº¡o ra. Trong cÃ´ng viá»‡c hÃ ng ngÃ y cá»§a chÃºng ta, viá»‡c sá»­ dá»¥ng chuá»—i ráº¥t phá»• biáº¿n, vÃ  viá»‡c thao tÃ¡c thÃ nh tháº¡o trÃªn chÃºng cÃ³ thá»ƒ cá»±c ká»³ gia tÄƒng hiá»‡u suáº¥t lÃ m viá»‡c cá»§a chÃºng ta.</p>
<p>guava cung cáº¥p má»™t cÃ´ng cá»¥ ná»‘i chuá»—i gá»i lÃ  Joiner, cÃ³ thá»ƒ ná»‘i cÃ¡c chuá»—i láº¡i vá»›i nhau báº±ng má»™t kÃ½ tá»± phÃ¢n tÃ¡ch. Äoáº¡n mÃ£ dÆ°á»›i Ä‘Ã¢y sáº½ tráº£ vá» "LÃª CÃ¢n; Quyá»ƒn ChÃ¢u", báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>useForNull(String)</code> Ä‘á»ƒ thay tháº¿ null báº±ng má»™t chuá»—i nÃ o Ä‘Ã³, thay vÃ¬ bá» qua null nhÆ° phÆ°Æ¡ng thá»©c <code>skipNulls()</code>.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Joiner</span><span style="color:#E06C75;--shiki-dark:#E06C75"> joiner </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Joiner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">on</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"; "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">skipNulls</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> joiner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">join</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"LÃª CÃ¢n"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Quyá»ƒn ChÃ¢u"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>guava cÅ©ng cung cáº¥p má»™t cÃ´ng cá»¥ tÃ¡ch chuá»—i gá»i lÃ  Splitter, cÃ³ thá»ƒ tÃ¡ch má»™t chuá»—i thÃ nh cÃ¡c pháº§n vá»›i má»™t kÃ½ tá»± phÃ¢n tÃ¡ch cá»¥ thá»ƒ.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Splitter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">on</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">','</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">trimResults</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">omitEmptyStrings</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">split</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"LÃª CÃ¢n, Quyá»ƒn ChÃ¢u,,   MÃ£ VÃ¢n"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><h3>06. Bá»™ nhá»› cache</h3>
<p>Bá»™ nhá»› cache cÃ³ Ã­ch trong nhiá»u tÃ¬nh huá»‘ng khÃ¡c nhau. Báº¡n nÃªn biáº¿t ráº±ng chi phÃ­ Ä‘á»ƒ truy xuáº¥t má»™t giÃ¡ trá»‹ cÃ³ thá»ƒ ráº¥t cao, Ä‘áº·c biá»‡t lÃ  khi cáº§n truy xuáº¥t giÃ¡ trá»‹ nhiá»u láº§n, lÃºc Ä‘Ã³ nÃªn cÃ¢n nháº¯c sá»­ dá»¥ng bá»™ nhá»› cache.</p>
<p>Guava cung cáº¥p Cache vÃ  nÃ³ khÃ¡ giá»‘ng vá»›i ConcurrentMap, nhÆ°ng khÃ´ng hoÃ n toÃ n giá»‘ng. Sá»± khÃ¡c biá»‡t cÆ¡ báº£n nháº¥t lÃ  ConcurrentMap sáº½ giá»¯ táº¥t cáº£ cÃ¡c pháº§n tá»­ Ä‘Ã£ thÃªm cho Ä‘áº¿n khi chÃºng Ä‘Æ°á»£c loáº¡i bá» má»™t cÃ¡ch rÃµ rÃ ng. NgÆ°á»£c láº¡i, Cache mÃ  guava cung cáº¥p sáº½ tá»± Ä‘á»™ng loáº¡i bá» cÃ¡c pháº§n tá»­ Ä‘á»ƒ giá»›i háº¡n sá»­ dá»¥ng bá»™ nhá»›.</p>
<p>Náº¿u báº¡n sáºµn lÃ²ng tiÃªu tá»‘n má»™t sá»‘ khÃ´ng gian bá»™ nhá»› Ä‘á»ƒ cáº£i thiá»‡n tá»‘c Ä‘á»™, vÃ  báº¡n cÃ³ thá»ƒ dá»± Ä‘oÃ¡n ráº±ng má»™t sá»‘ key sáº½ Ä‘Æ°á»£c truy váº¥n nhiá»u hÆ¡n má»™t láº§n, vÃ  tá»•ng sá»‘ dá»¯ liá»‡u trong cache khÃ´ng vÆ°á»£t quÃ¡ dung lÆ°á»£ng bá»™ nhá»›, thÃ¬ báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng Cache.</p>
<p>HÃ£y xem má»™t vÃ­ dá»¥ Ä‘á»ƒ cáº£m nháº­n.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Test</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> testCache</span><span style="color:#E06C75;--shiki-dark:#E06C75">() throws ExecutionException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> InterruptedException {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    CacheLoader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> cacheLoader </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CacheLoader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Animal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Náº¿u khÃ´ng tÃ¬m tháº¥y pháº§n tá»­, phÆ°Æ¡ng thá»©c nÃ y sáº½ Ä‘Æ°á»£c gá»i</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Animal</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> load</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> s</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            return</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    LoadingCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Animal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> loadingCache </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CacheBuilder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newBuilder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">maximumSize</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Dung lÆ°á»£ng</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">expireAfterWrite</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TimeUnit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">SECONDS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Thá»i gian háº¿t háº¡n</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">removalListener</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> MyRemovalListener</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">())</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Láº¯ng nghe khi loáº¡i bá»</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">build</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(cacheLoader);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> //</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    loadingCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ChÃ³"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Animal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"VÆ°á»£ng CÃ¡i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    loadingCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"MÃ¨o"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Animal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Táº£o Má»…"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    loadingCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"SÃ³i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Animal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Huy Tai LÃ´"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    loadingCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">invalidate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"MÃ¨o"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Tá»± Ä‘á»™ng loáº¡i bá»</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Animal</span><span style="color:#E06C75;--shiki-dark:#E06C75"> animal </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> loadingCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"SÃ³i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(animal);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Thread</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">sleep</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> *</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // SÃ³i Ä‘Ã£ háº¿t háº¡n, láº¥y giÃ¡ trá»‹ null sáº½ bÃ¡o lá»—i</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">loadingCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"SÃ³i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> * Lá»›p láº¯ng nghe khi loáº¡i bá» cache</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> MyRemovalListener</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> RemovalListener</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Animal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> onRemoval</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RemovalNotification</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Animal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">notification</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> reason</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">format</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key=%s,value=%s,reason=%s"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">notification</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">notification</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getValue</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">notification</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getCause</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reason);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Animal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Animal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">age</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>CacheLoader Ä‘Ã£ Ä‘Æ°á»£c viáº¿t láº¡i phÆ°Æ¡ng thá»©c load, phÆ°Æ¡ng thá»©c nÃ y sáº½ Ä‘Æ°á»£c gá»i khi cache khÃ´ng trÃºng key, á»Ÿ Ä‘Ã¢y guava chá»‰ Ä‘Æ¡n giáº£n tráº£ vá» null, thá»±c táº¿ sáº½ cÃ³ thÃ´ng tin ngoáº¡i lá»‡ tráº£ vá» CacheLoader returned null for key.</p>
<p>MyRemovalListener lÃ  lá»›p láº¯ng nghe sá»± kiá»‡n khi cÃ¡c pháº§n tá»­ cache bá»‹ loáº¡i bá», phÆ°Æ¡ng thá»©c nÃ y lÃ  Ä‘á»“ng bá»™, náº¿u nÃ³ máº¥t nhiá»u thá»i gian, nÃ³ sáº½ cháº·n Ä‘áº¿n khi hoÃ n táº¥t xá»­ lÃ½.</p>
<p>LoadingCache lÃ  Ä‘á»‘i tÆ°á»£ng chÃ­nh Ä‘á»ƒ thao tÃ¡c vá»›i cache, phÆ°Æ¡ng thá»©c phá»• biáº¿n lÃ  put vÃ  get.</p>
<h3>07. CÃ´ng cá»¥ cho cÃ¡c táº­p há»£p</h3>
<p>CÃ¡c cÃ´ng cá»¥ táº­p há»£p trong gÃ³i <code>com.google.common.collect</code>, vÃ­ dá»¥ nhÆ° <code>Lists</code>, cÅ©ng ráº¥t máº¡nh máº½.</p>
<h4>Táº¡o táº­p há»£p rá»—ng</h4>
<p>ÄÃ´i khi, chÃºng ta muá»‘n táº¡o má»™t táº­p há»£p rá»—ng. Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>newArrayList</code> cá»§a Lists, vÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Lists</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><h4>Khá»Ÿi táº¡o nhanh táº­p há»£p</h4>
<p>ÄÃ´i khi, chÃºng ta muá»‘n khá»Ÿi táº¡o má»™t táº­p há»£p vá»›i má»™t sá»‘ pháº§n tá»­. ÄÃ¢y lÃ  cÃ¡ch sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>newArrayList</code> cá»§a Lists:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Lists</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Káº¿t quáº£ thá»±c thi:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 3</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span></span></code></pre>
</div><h4>TÃ­ch Descartes</h4>
<p>Náº¿u báº¡n muá»‘n tÃ­nh toÃ¡n <code>tÃ­ch Descartes</code> cá»§a hai táº­p há»£p, phÆ°Æ¡ng thá»©c <code>cartesianProduct</code> cá»§a Lists cÃ³ thá»ƒ giÃºp báº¡n:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Lists</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Lists</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> productList </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Lists</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">cartesianProduct</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list1,list2);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(productList);</span></span></code></pre>
</div><p>Káº¿t quáº£ thá»±c thi:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">[[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 4</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> [</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 5</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> [</span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 4</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> [</span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 5</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> [</span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 4</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> [</span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 5</span><span style="color:#E06C75;--shiki-dark:#E06C75">]]</span></span></code></pre>
</div><h4>PhÃ¢n trang</h4>
<p>Náº¿u báº¡n muá»‘n chia má»™t <code>táº­p há»£p lá»›n</code> thÃ nh cÃ¡c <code>táº­p há»£p con nhá»</code>, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>partition</code> cá»§a Lists:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Lists</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> partitionList </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Lists</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">partition</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list, </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(partitionList);</span></span></code></pre>
</div><p>Káº¿t quáº£ thá»±c thi:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">[[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> [</span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 4</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> [</span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#E06C75;--shiki-dark:#E06C75">]]</span></span></code></pre>
</div><p>Trong vÃ­ dá»¥ nÃ y, list cÃ³ 5 pháº§n tá»­, guava Ä‘Ã£ chia list thÃ nh 3 pháº§n, má»—i pháº§n cÃ³ kÃ­ch thÆ°á»›c lÃ  2.</p>
<p>ÄÃ¢y lÃ  má»™t trong nhá»¯ng phÆ°Æ¡ng thá»©c tÃ´i thÃ­ch nháº¥t, thÆ°á»ng xuyÃªn sá»­ dá»¥ng trong cÃ¡c dá»± Ã¡n.</p>
<p>VÃ­ dá»¥, náº¿u báº¡n cÃ³ yÃªu cáº§u: hiá»‡n cÃ³ 5000 id, cáº§n gá»i API truy váº¥n ngÆ°á»i dÃ¹ng theo lÃ´ Ä‘á»ƒ láº¥y dá»¯ liá»‡u ngÆ°á»i dÃ¹ng. NhÆ°ng náº¿u báº¡n trá»±c tiáº¿p truy váº¥n 5000 ngÆ°á»i dÃ¹ng, thá»i gian pháº£n há»“i cá»§a API má»™t láº§n cÃ³ thá»ƒ ráº¥t cháº­m. Náº¿u chuyá»ƒn sang xá»­ lÃ½ phÃ¢n trang, má»—i láº§n chá»‰ truy váº¥n 500 ngÆ°á»i dÃ¹ng, gá»i API báº¥t Ä‘á»“ng bá»™ 10 láº§n, sáº½ khÃ´ng cÃ³ váº¥n Ä‘á» vá» thá»i gian pháº£n há»“i cá»§a API má»™t láº§n.</p>
<h4>Xá»­ lÃ½ luá»“ng</h4>
<p>Náº¿u chÃºng ta muá»‘n chuyá»ƒn Ä‘á»•i má»™t táº­p há»£p nÃ y sang má»™t interface khÃ¡c, cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>transform</code> cá»§a Lists. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Lists</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">"b"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">"c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> transformList </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Lists</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">transform</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list, x </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> x</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toUpperCase</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(transformList);</span></span></code></pre>
</div><p>Chuyá»ƒn Ä‘á»•i cÃ¡c kÃ½ tá»± thÆ°á»ng thÃ nh kÃ½ tá»± in hoa.</p>
<h4>Äáº£o ngÆ°á»£c thá»© tá»±</h4>
<p>Lists cÃ³ phÆ°Æ¡ng thá»©c <code>reverse</code> Ä‘á»ƒ Ä‘áº£o ngÆ°á»£c thá»© tá»±. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Lists</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> reverseList </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Lists</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">reverse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reverseList);</span></span></code></pre>
</div><p>Káº¿t quáº£ thá»±c thi:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 3</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span></span></code></pre>
</div><p>Thá»© tá»± ban Ä‘áº§u cá»§a list lÃ  312, sau khi sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>reverse</code>, nÃ³ trá»Ÿ thÃ nh 213.</p>
<p>Lists cÃ²n cÃ³ cÃ¡c cÃ´ng cá»¥ há»¯u Ã­ch khÃ¡c, tÃ´i chá»‰ Ä‘Æ°a ra má»™t sá»‘ vÃ­ dá»¥, báº¡n cÃ³ thá»ƒ tá»± nghiÃªn cá»©u thÃªm.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704191742.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<h3>08. Tá»•ng káº¿t</h3>
<p>TrÃªn Ä‘Ã¢y lÃ  nhá»¯ng tÃ­nh nÄƒng tÃ´i cho lÃ  phá»• biáº¿n nháº¥t, lÃ  má»™t thÆ° viá»‡n lÃµi phÃ¡t triá»ƒn Java Ä‘Æ°á»£c Google phÃ¡t hÃ nh, tÃ´i nghÄ© ráº±ng tÃ­nh há»¯u dá»¥ng cá»§a nÃ³ ráº¥t cao (náº¿u khÃ´ng thÃ¬ thÃ´i?). Sau khi tÃ­ch há»£p vÃ o dá»± Ã¡n cá»§a báº¡n, khÃ´ng chá»‰ cÃ³ thá»ƒ nhanh chÃ³ng triá»ƒn khai cÃ¡c tÃ­nh nÄƒng phá»• biáº¿n trong phÃ¡t triá»ƒn mÃ  cÃ²n lÃ m cho mÃ£ nguá»“n trá»Ÿ nÃªn thanh thoÃ¡t vÃ  Ä‘Æ¡n giáº£n hÆ¡n.</p>
<p>TÃ´i nghÄ© ráº±ng nÃ³ phÃ¹ há»£p vá»›i má»i dá»± Ã¡n Java, cÃ²n nhá»¯ng tÃ­nh nÄƒng khÃ¡c nhÆ° bÄƒm, bus sá»± kiá»‡n, toÃ¡n há»c, pháº£n chiáº¿u, thÃ¬ chá» báº¡n khÃ¡m phÃ¡ nhÃ©.</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704191742.png" type="image/png"/>
    </item>
    <item>
      <title>Hutool</title>
      <link>https://vanhung4499.github.io/programming/java/common-tool/hutool.html</link>
      <guid>https://vanhung4499.github.io/programming/java/common-tool/hutool.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Hutool</source>
      <description>Hutool Má»™t thÃ nh viÃªn trong nhÃ³m Ä‘á»c giáº£ cá»§a tÃ´i Ä‘Ã£ thá»‘t lÃªn ráº±ng, &amp;quot;ThÆ° viá»‡n mÃ£ nguá»“n má»Ÿ Hutool tháº­t sá»± tuyá»‡t vá»i, nÃ³ cÃ³ Ä‘áº§y Ä‘á»§ cÃ¡c cÃ´ng cá»¥ mÃ  chÃºng ta cáº§n.&amp;quot; Thá»±c sá»±, tÃ´i cÅ©ng t...</description>
      <category>java</category>
      <pubDate>Thu, 04 Jul 2024 09:37:15 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Má»™t thÃ nh viÃªn trong nhÃ³m Ä‘á»c giáº£ cá»§a tÃ´i Ä‘Ã£ thá»‘t lÃªn ráº±ng, "ThÆ° viá»‡n mÃ£ nguá»“n má»Ÿ Hutool tháº­t sá»± tuyá»‡t vá»i, nÃ³ cÃ³ Ä‘áº§y Ä‘á»§ cÃ¡c cÃ´ng cá»¥ mÃ  chÃºng ta cáº§n." Thá»±c sá»±, tÃ´i cÅ©ng thÆ°á»ng xuyÃªn sá»­ dá»¥ng Hutool trong cÃ´ng viá»‡c hÃ ng ngÃ y. NÃ³ giÃºp chÃºng ta Ä‘Æ¡n giáº£n hÃ³a tá»«ng dÃ²ng mÃ£, mang láº¡i sá»± thanh lá»‹ch nhÆ° ngÃ´n ngá»¯ hÃ m cho Java, lÃ m cho Java trá»Ÿ nÃªn Ä‘áº¹p hÆ¡n.</p>
<h3>01. ThÃªm Hutool vÃ o dá»± Ã¡n</h3>
<p>Dá»± Ã¡n Maven chá»‰ cáº§n thÃªm dependency sau vÃ o file pom.xml.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;dependency&gt;</span></span>
<span class="line"><span>    &lt;groupId&gt;cn.hutool&lt;/groupId&gt;</span></span>
<span class="line"><span>    &lt;artifactId&gt;hutool-all&lt;/artifactId&gt;</span></span>
<span class="line"><span>    &lt;version&gt;5.4.3&lt;/version&gt;</span></span>
<span class="line"><span>&lt;/dependency&gt;</span></span></code></pre>
</div><p>Triáº¿t lÃ½ thiáº¿t káº¿ cá»§a Hutool lÃ  giáº£m thiá»ƒu cÃ¡c Ä‘á»‹nh nghÄ©a láº·p láº¡i, giÃºp cho gÃ³i util trong dá»± Ã¡n cÃ ng Ã­t cÃ ng tá»‘t. Má»™t thÆ° viá»‡n tá»‘t cÃ³ thá»ƒ giÃºp trÃ¡nh Ä‘Æ°á»£c viá»‡c "sao chÃ©p vÃ  dÃ¡n", tá»« Ä‘Ã³ tiáº¿t kiá»‡m thá»i gian cá»§a chÃºng ta trong viá»‡c Ä‘Ã³ng gÃ³i cÃ¡c thÆ° viá»‡n vÃ  phÆ°Æ¡ng thá»©c cÃ´ng cá»¥ dÃ¹ng chung. Äá»“ng thá»i, má»™t thÆ° viá»‡n mÃ£ nguá»“n má»Ÿ hoÃ n chá»‰nh cÅ©ng giÃºp giáº£m thiá»ƒu tá»‘i Ä‘a cÃ¡c lá»—i phÃ¡t sinh tá»« viá»‡c Ä‘Ã³ng gÃ³i khÃ´ng hoÃ n thiá»‡n.</p>
<p>NhÆ° tÃ¡c giáº£ Ä‘Ã£ nÃ³i trÃªn trang web:</p>
<ul>
<li>TrÆ°á»›c Ä‘Ã¢y, chÃºng ta má»Ÿ cÃ´ng cá»¥ tÃ¬m kiáº¿m -&gt; TÃ¬m kiáº¿m "Java MD5 encryption" -&gt; Má»Ÿ má»™t bÃ i blog -&gt; Sao chÃ©p vÃ  dÃ¡n -&gt; Chá»‰nh sá»­a má»™t chÃºt Ä‘á»ƒ dÃ¹ng Ä‘Æ°á»£c</li>
<li>BÃ¢y giá», vá»›i Hutool, chá»‰ cáº§n thÃªm Hutool -&gt; Gá»i trá»±c tiáº¿p <code>SecureUtil.md5()</code></li>
</ul>
<p>Hutool khÃ´ng chá»‰ Ä‘Ã³ng gÃ³i cÃ¡c lá»›p cÆ¡ báº£n cá»§a JDK nhÆ° file, stream, mÃ£ hÃ³a vÃ  giáº£i mÃ£, mÃ£ hÃ³a kÃ½ tá»±, regex, luá»“ng, XML, mÃ  cÃ²n cung cáº¥p cÃ¡c thÃ nh pháº§n sau:</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704191802.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Ráº¥t nhiá»u vÃ  ráº¥t Ä‘áº§y Ä‘á»§, vÃ¬ váº­y tÃ´i chá»‰ chá»n má»™t sá»‘ thÃ nh pháº§n mÃ  tÃ´i thÃ­ch Ä‘á»ƒ giá»›i thiá»‡u.</p>
<h3>02. Chuyá»ƒn Ä‘á»•i loáº¡i dá»¯ liá»‡u</h3>
<p>Chuyá»ƒn Ä‘á»•i loáº¡i dá»¯ liá»‡u ráº¥t phá»• biáº¿n trong phÃ¡t triá»ƒn Java, Ä‘áº·c biá»‡t lÃ  khi láº¥y tham sá»‘ tá»« HttpRequest. PhÃ­a trÆ°á»›c truyá»n sá»‘ nguyÃªn, nhÆ°ng phÃ­a sau chá»‰ cÃ³ thá»ƒ láº¥y Ä‘Æ°á»£c chuá»—i, sau Ä‘Ã³ pháº£i gá»i phÆ°Æ¡ng thá»©c <code>parseXXX()</code> Ä‘á»ƒ chuyá»ƒn Ä‘á»•i vÃ  pháº£i kiá»ƒm tra null, ráº¥t phiá»n phá»©c.</p>
<p>Lá»›p Convert cá»§a Hutool cÃ³ thá»ƒ Ä‘Æ¡n giáº£n hÃ³a viá»‡c nÃ y, nÃ³ cÃ³ thá»ƒ chuyá»ƒn Ä‘á»•i báº¥t ká»³ loáº¡i dá»¯ liá»‡u nÃ o thÃ nh loáº¡i chá»‰ Ä‘á»‹nh, tham sá»‘ thá»© hai defaultValue cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ tráº£ vá» giÃ¡ trá»‹ máº·c Ä‘á»‹nh khi chuyá»ƒn Ä‘á»•i tháº¥t báº¡i.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> param </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "10"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> paramInt </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Convert</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toInt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(param);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> paramIntDefault </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Convert</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toInt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(param, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Chuyá»ƒn chuá»—i thÃ nh ngÃ y thÃ¡ng:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> dateStr </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "2020-09-29"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Date</span><span style="color:#E06C75;--shiki-dark:#E06C75"> date </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Convert</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toDate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(dateStr);</span></span></code></pre>
</div><p>Chuyá»ƒn chuá»—i thÃ nh Unicode:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> unicodeStr </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "HÃ¹ng"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> unicode </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Convert</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">strToUnicode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(unicodeStr);</span></span></code></pre>
</div><h3>03. NgÃ y vÃ  Thá»i gian</h3>
<p>JDK cung cáº¥p cÃ¡c lá»›p Date vÃ  Calendar nhÆ°ng khÃ´ng thá»±c sá»± tiá»‡n lá»£i. Hutool Ä‘Ã£ Ä‘Ã³ng gÃ³i lá»›p DateUtil, giÃºp viá»‡c sá»­ dá»¥ng dá»… dÃ ng hÆ¡n nhiá»u!</p>
<p>Láº¥y ngÃ y hiá»‡n táº¡i:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Date</span><span style="color:#E06C75;--shiki-dark:#E06C75"> date </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DateUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">date</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p><code>DateUtil.date()</code> thá»±c cháº¥t tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng DateTime, káº¿ thá»«a tá»« lá»›p Date vÃ  ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c <code>toString()</code>, tráº£ vá» chuá»—i Ä‘á»‹nh dáº¡ng <code>yyyy-MM-dd HH:mm:ss</code>.</p>
<p>Má»™t sá»‘ báº¡n cÃ³ thá»ƒ muá»‘n biáº¿t thá»i gian tÃ´i viáº¿t bÃ i nÃ y, Ä‘Ã¢y lÃ  káº¿t quáº£ khi in ra:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>System.out.println(date); // 2024-06-29 04:28:02</span></span></code></pre>
</div><p>Chuyá»ƒn chuá»—i thÃ nh ngÃ y:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> dateStr </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "2020-09-29"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Date</span><span style="color:#E06C75;--shiki-dark:#E06C75"> date </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DateUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">parse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(dateStr);</span></span></code></pre>
</div><p><code>DateUtil.parse()</code> sáº½ tá»± Ä‘á»™ng nháº­n diá»‡n má»™t sá»‘ Ä‘á»‹nh dáº¡ng phá»• biáº¿n, vÃ­ dá»¥:</p>
<ul>
<li>yyyy-MM-dd HH:mm:ss</li>
<li>yyyy-MM-dd</li>
<li>HH:mm:ss</li>
<li>yyyy-MM-dd HH:mm</li>
<li>yyyy-MM-dd HH:mm:ss.SSS</li>
</ul>
<p>Äá»‹nh dáº¡ng chÃªnh lá»‡ch thá»i gian:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> dateStr1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "2020-09-29 22:33:23"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Date</span><span style="color:#E06C75;--shiki-dark:#E06C75"> date1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DateUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">parse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(dateStr1);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> dateStr2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "2020-10-01 23:34:27"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Date</span><span style="color:#E06C75;--shiki-dark:#E06C75"> date2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DateUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">parse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(dateStr2);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> betweenDay </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DateUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">between</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(date1, date2, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">DateUnit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">MS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Output: 2 days, 1 hour, 1 minute and 4 seconds</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> formatBetween </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DateUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">formatBetween</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(betweenDay, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">BetweenFormater</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Level</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">SECOND</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Cung hoÃ ng Ä‘áº¡o vÃ  con giÃ¡p:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Sagittarius</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> zodiac </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DateUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getZodiac</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Month</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">DECEMBER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getValue</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), </span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Rabbit</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> chineseZodiac </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DateUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getChineseZodiac</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1999</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><h3>04. IO liÃªn quan</h3>
<p><a href="/programming/java/io/shangtou.html" target="_blank">IO bao gá»“m Ä‘á»c vÃ  ghi</a>, á»©ng dá»¥ng chÃ­nh trong cÃ¡c hoáº¡t Ä‘á»™ng máº¡ng vÃ  thao tÃ¡c file. ThÆ° viá»‡n Java nguyÃªn gá»‘c phÃ¢n biá»‡t giá»¯a <a href="/programming/java/io/character">character stream</a> vÃ  <a href="/programming/java/io/stream.html" target="_blank">byte stream</a>, cÃ³ ráº¥t nhiá»u loáº¡i InputStream vÃ  OutputStream, viá»‡c sá»­ dá»¥ng cÃ³ thá»ƒ lÃ m ngÆ°á»i ta Ä‘au Ä‘áº§u.</p>
<p>Hutool Ä‘Ã³ng gÃ³i cÃ¡c cÃ´ng cá»¥ thao tÃ¡c luá»“ng nhÆ° IoUtil, cÃ´ng cá»¥ Ä‘á»c vÃ  ghi file FileUtil, cÃ´ng cá»¥ xÃ¡c Ä‘á»‹nh loáº¡i file FileTypeUtil, v.v.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">BufferedInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> in </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> FileUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getInputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"hutool/origin.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">BufferedOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> out </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> FileUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getOutputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"hutool/to.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> copySize </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IoUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">copy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(in, out, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IoUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">DEFAULT_BUFFER_SIZE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Trong cÃ¡c thao tÃ¡c IO, viá»‡c xá»­ lÃ½ file tÆ°Æ¡ng Ä‘á»‘i phá»©c táº¡p nhÆ°ng cÅ©ng ráº¥t thÆ°á»ng gáº·p, háº§u háº¿t cÃ¡c dá»± Ã¡n Ä‘á»u cÃ³ má»™t lá»›p cÃ´ng cá»¥ gá»i lÃ  FileUtil hoáº·c FileUtils. Lá»›p FileUtil cá»§a Hutool bao gá»“m cÃ¡c thao tÃ¡c sau:</p>
<ul>
<li>Thao tÃ¡c file: bao gá»“m táº¡o má»›i, xÃ³a, sao chÃ©p, di chuyá»ƒn, Ä‘á»•i tÃªn file vÃ  thÆ° má»¥c</li>
<li>Kiá»ƒm tra file: kiá»ƒm tra xem file hoáº·c thÆ° má»¥c cÃ³ rá»—ng khÃ´ng, cÃ³ pháº£i lÃ  thÆ° má»¥c hoáº·c file khÃ´ng</li>
<li>ÄÆ°á»ng dáº«n tuyá»‡t Ä‘á»‘i: chuyá»ƒn Ä‘á»•i file trong ClassPath thÃ nh Ä‘Æ°á»ng dáº«n tuyá»‡t Ä‘á»‘i</li>
<li>TÃªn file: láº¥y tÃªn file chÃ­nh vÃ  pháº§n má»Ÿ rá»™ng</li>
<li>Äá»c file: bao gá»“m cÃ¡c thao tÃ¡c getReader, readXXX</li>
<li>Ghi file: bao gá»“m cÃ¡c thao tÃ¡c getWriter, writeXXX</li>
</ul>
<p>NÃ³i thÃªm vá» classpath.</p>
<p>Trong thá»±c táº¿ láº­p trÃ¬nh, chÃºng ta thÆ°á»ng cáº§n Ä‘á»c dá»¯ liá»‡u tá»« má»™t sá»‘ file nhÆ° file cáº¥u hÃ¬nh, file vÄƒn báº£n, hÃ¬nh áº£nh, v.v. Nhá»¯ng file nÃ y thÆ°á»ng Ä‘Æ°á»£c Ä‘áº·t á»Ÿ Ä‘Ã¢u?</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704191817.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Äáº·t trong thÆ° má»¥c resources cá»§a cáº¥u trÃºc dá»± Ã¡n, khi dá»± Ã¡n Ä‘Æ°á»£c biÃªn dá»‹ch, chÃºng sáº½ xuáº¥t hiá»‡n trong thÆ° má»¥c classes. TrÃªn Ä‘Ä©a, nÃ³ sáº½ trÃ´ng nhÆ° tháº¿ nÃ y:</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704191825.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Khi Ä‘á»c file, tÃ´i khÃ´ng khuyáº¿n nghá»‹ sá»­ dá»¥ng Ä‘Æ°á»ng dáº«n tuyá»‡t Ä‘á»‘i vÃ¬ cÃ¡c há»‡ Ä‘iá»u hÃ nh khÃ¡c nhau sáº½ cÃ³ cÃ¡c dáº¥u phÃ¢n cÃ¡ch Ä‘Æ°á»ng dáº«n khÃ¡c nhau. Tá»‘t nháº¥t lÃ  sá»­ dá»¥ng Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i.</p>
<p>Giáº£ sá»­ cÃ³ má»™t file tÃªn lÃ  origin.txt náº±m trong thÆ° má»¥c <code>src/resources</code>, Ä‘Æ°á»ng dáº«n sáº½ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getInputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"origin.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Náº¿u file náº±m trong thÆ° má»¥c <code>src/resources/hutool</code>, thÃ¬ Ä‘Æ°á»ng dáº«n sáº½ lÃ :</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getInputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"hutool/origin.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><h3>05. CÃ´ng cá»¥ chuá»—i</h3>
<p>Lá»›p cÃ´ng cá»¥ chuá»—i cá»§a Hutool lÃ  StrUtil, tÆ°Æ¡ng tá»± vá»›i lá»›p StringUtils trong Apache Commons Lang. TÃ¡c giáº£ cho ráº±ng Æ°u Ä‘iá»ƒm cá»§a Str lÃ  ngáº¯n hÆ¡n String, máº·c dÃ¹ tÃ´i khÃ´ng tháº¥y váº­y. Tuy nhiÃªn, tÃ´i ráº¥t thÃ­ch má»™t trong nhá»¯ng phÆ°Æ¡ng thá»©c cá»§a nÃ³:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> template </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "{}, {}"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StrUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">format</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(template, </span><span style="color:#98C379;--shiki-dark:#98C379">"Hung"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Dev"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><h3>06. CÃ´ng cá»¥ reflect</h3>
<p>CÆ¡ cháº¿ reflect cÃ³ thá»ƒ lÃ m cho Java linh hoáº¡t hÆ¡n, do Ä‘Ã³ trong má»™t sá»‘ trÆ°á»ng há»£p, reflect cÃ³ thá»ƒ Ä‘áº¡t Ä‘Æ°á»£c hiá»‡u quáº£ cao. Hutool Ä‘Ã³ng gÃ³i cÃ´ng cá»¥ reflect ReflectUtil bao gá»“m:</p>
<ul>
<li>Láº¥y phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o</li>
<li>Láº¥y trÆ°á»ng</li>
<li>Láº¥y giÃ¡ trá»‹ trÆ°á»ng</li>
<li>Láº¥y phÆ°Æ¡ng thá»©c</li>
<li>Thá»±c hiá»‡n phÆ°Æ¡ng thá»©c (phÆ°Æ¡ng thá»©c Ä‘á»‘i tÆ°á»£ng vÃ  phÆ°Æ¡ng thá»©c tÄ©nh)</li>
</ul>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">package</span><span style="color:#C678DD;--shiki-dark:#C678DD"> com.ittom.hutool.reflect</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> cn.hutool.core.util.ReflectUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.lang.reflect.Constructor</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.lang.reflect.Field</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.lang.reflect.Method</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ReflectDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ReflectDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"PhÆ°Æ¡ng thá»©c khá»Ÿi táº¡o"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"TÃ´i lÃ  Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IllegalAccessException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Táº¡o Ä‘á»‘i tÆ°á»£ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        ReflectDemo</span><span style="color:#E06C75;--shiki-dark:#E06C75"> reflectDemo</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ReflectUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newInstance</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ReflectDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Láº¥y phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Constructor</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75">constructors</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ReflectUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getConstructors</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ReflectDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Constructor</span><span style="color:#E06C75;--shiki-dark:#E06C75"> constructor</span><span style="color:#C678DD;--shiki-dark:#C678DD"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> constructors) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">constructor</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Láº¥y trÆ°á»ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Field</span><span style="color:#E06C75;--shiki-dark:#E06C75"> field</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ReflectUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getField</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ReflectDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        field</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setInt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reflectDemo, </span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Láº¥y giÃ¡ trá»‹ trÆ°á»ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ReflectUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getFieldValue</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reflectDemo, field));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Láº¥y táº¥t cáº£ phÆ°Æ¡ng thá»©c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Method</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75">methods</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ReflectUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getMethods</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ReflectDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Method</span><span style="color:#E06C75;--shiki-dark:#E06C75"> m</span><span style="color:#C678DD;--shiki-dark:#C678DD"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> methods) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">m</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Láº¥y phÆ°Æ¡ng thá»©c cá»¥ thá»ƒ</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Method</span><span style="color:#E06C75;--shiki-dark:#E06C75"> method</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ReflectUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getMethod</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ReflectDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"print"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">method</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Thá»±c hiá»‡n phÆ°Æ¡ng thá»©c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        ReflectUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">invoke</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reflectDemo, </span><span style="color:#98C379;--shiki-dark:#98C379">"print"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>07. CÃ´ng cá»¥ nÃ©n</h3>
<p>Trong Java, viá»‡c nÃ©n vÃ  giáº£i nÃ©n cÃ¡c tá»‡p vÃ  thÆ° má»¥c lÃ  má»™t viá»‡c khÃ¡ phá»©c táº¡p. Hutool Ä‘Ã³ng gÃ³i cÃ´ng cá»¥ ZipUtil, tá»‘i Æ°u hÃ³a gÃ³i java.util.zip, cÃ³ thá»ƒ sá»­ dá»¥ng má»™t phÆ°Æ¡ng thá»©c Ä‘á»ƒ thá»±c hiá»‡n viá»‡c nÃ©n vÃ  giáº£i nÃ©n, tá»± Ä‘á»™ng xá»­ lÃ½ cÃ¡c váº¥n Ä‘á» liÃªn quan Ä‘áº¿n tá»‡p vÃ  thÆ° má»¥c, giÃºp Ä‘Æ¡n giáº£n hÃ³a Ä‘Ã¡ng ká»ƒ Ä‘á»™ phá»©c táº¡p cá»§a viá»‡c nÃ©n vÃ  giáº£i nÃ©n.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">ZipUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">zip</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"hutool"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"hutool.zip"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> unzip </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ZipUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">unzip</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"hutool.zip"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"hutoolzip"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><h3>08. CÃ´ng cá»¥ xÃ¡c thá»±c tháº» cÄƒn cÆ°á»›c</h3>
<p>Hutool Ä‘Ã³ng gÃ³i cÃ´ng cá»¥ IdcardUtil cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ xÃ¡c thá»±c tháº» cÄƒn cÆ°á»›c, há»— trá»£ tháº» cÄƒn cÆ°á»›c 15 sá»‘ vÃ  18 sá»‘ cá»§a Trung Quá»‘c Ä‘áº¡i lá»¥c, tháº» cÄƒn cÆ°á»›c 10 sá»‘ cá»§a Hong Kong, Macao vÃ  ÄÃ i Loan.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ID_18 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "321083197812162119"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ID_15 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "150102880730303"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">boolean</span><span style="color:#E06C75;--shiki-dark:#E06C75"> valid </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IdcardUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isValidCard</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(ID_18);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">boolean</span><span style="color:#E06C75;--shiki-dark:#E06C75"> valid15 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IdcardUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isValidCard</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(ID_15);</span></span></code></pre>
</div><h3>09. Má»Ÿ rá»™ng HashMap</h3>
<p>HashMap trong Java lÃ  kiá»ƒu dá»¯ liá»‡u máº¡nh, nhÆ°ng Hutool Ä‘Ã³ng gÃ³i Dict khÃ´ng yÃªu cáº§u kháº¯t khe vá» kiá»ƒu dá»¯ liá»‡u cá»§a key.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Dict</span><span style="color:#E06C75;--shiki-dark:#E06C75"> dict </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Dict</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">create</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"age"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">18</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"birthday"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">DateTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">now</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> age </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> dict</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getInt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"age"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> dict</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getStr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><h3>10. In ra console</h3>
<p>Trong quÃ¡ trÃ¬nh mÃ£ hÃ³a cá»¥c bá»™, thÆ°á»ng cáº§n sá»­ dá»¥ng <code>System.out</code> Ä‘á»ƒ in káº¿t quáº£, nhÆ°ng thÆ°á»ng má»™t sá»‘ Ä‘á»‘i tÆ°á»£ng phá»©c táº¡p khÃ´ng há»— trá»£ in trá»±c tiáº¿p, cháº³ng háº¡n nhÆ° máº£ng, cáº§n gá»i <code>Arrays.toString</code>. Lá»›p Console cá»§a Hutool láº¥y cáº£m há»©ng tá»« <code>console.log()</code> trong JavaScript, lÃ m cho viá»‡c in trá»Ÿ nÃªn ráº¥t thuáº­n tiá»‡n.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ConsoleDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // In chuá»—i</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tomï¼ŒDev"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // In máº«u chuá»—i</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tom is {}"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">13</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        int</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [] </span><span style="color:#E06C75;--shiki-dark:#E06C75">ints</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">};</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // In máº£ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(ints);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3>11. Bá»™ kiá»ƒm tra trÆ°á»ng</h3>
<p>Khi phÃ¡t triá»ƒn Web, phÃ­a server thÆ°á»ng cáº§n kiá»ƒm tra dá»¯ liá»‡u tá»« form gá»­i Ä‘áº¿n. Hutool Ä‘Ã³ng gÃ³i Validator cÃ³ thá»ƒ thá»±c hiá»‡n nhiá»u Ä‘iá»u kiá»‡n kiá»ƒm tra hiá»‡u quáº£:</p>
<ul>
<li>CÃ³ pháº£i email khÃ´ng</li>
<li>CÃ³ pháº£i IP V4, V6 khÃ´ng</li>
<li>CÃ³ pháº£i sá»‘ Ä‘iá»‡n thoáº¡i khÃ´ng</li>
<li>VÃ  nhiá»u Ä‘iá»u kiá»‡n khÃ¡c</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704191837.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Validator</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isEmail</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Validator</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isMobile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"botay.com"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><h3>12. Map tÃ¬m kiáº¿m hai chiá»u</h3>
<p><a href="/programming/java/common-tool/guava">Guava</a> cung cáº¥p má»™t cáº¥u trÃºc Map Ä‘áº·c biá»‡t, gá»i lÃ  BiMap, thá»±c hiá»‡n chá»©c nÄƒng tÃ¬m kiáº¿m hai chiá»u, cÃ³ thá»ƒ tÃ¬m giÃ¡ trá»‹ báº±ng key vÃ  tÃ¬m key báº±ng giÃ¡ trá»‹. Hutool cÅ©ng cung cáº¥p cáº¥u trÃºc Map nÃ y.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">BiMap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> biMap </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> BiMap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> HashMap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">())</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">biMap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">biMap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"cat"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Cat"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Láº¥y giÃ¡ trá»‹ báº±ng key</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">biMap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">biMap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"cat"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Láº¥y key báº±ng giÃ¡ trá»‹</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">biMap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">biMap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Cat"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Trong cÃ´ng viá»‡c phÃ¡t triá»ƒn thá»±c táº¿, tÃ´i thÆ°á»ng thÃ­ch sá»­ dá»¥ng BiMap cá»§a Guava hÆ¡n lÃ  cá»§a Hutool. TÃ´i Ä‘á» cáº­p Ä‘áº¿n Ä‘iá»u nÃ y vÃ¬ tÃ´i phÃ¡t hiá»‡n ra má»™t lá»—i trong tÃ i liá»‡u trá»±c tuyáº¿n cá»§a Hutool vÃ  Ä‘Ã£ bÃ¡o cÃ¡o váº¥n Ä‘á».</p>
<h3>13. CÃ´ng cá»¥ hÃ¬nh áº£nh</h3>
<p>ImgUtil cá»§a Hutool cÃ³ thá»ƒ thá»±c hiá»‡n cÃ¡c thao tÃ¡c nhÆ° thu nhá», cáº¯t, chuyá»ƒn thÃ nh Ä‘en tráº¯ng vÃ  thÃªm watermark cho hÃ¬nh áº£nh.</p>
<p>Thu nhá» hÃ¬nh áº£nh:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">ImgUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">scale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        FileUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"hutool/cat.jpg"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">),</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        FileUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"hutool/cat_small.jpg"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">),</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">        0.5f</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Cáº¯t hÃ¬nh áº£nh:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">ImgUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">cut</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        FileUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"hutool/cat.jpg"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">),</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        FileUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"hutool/cat_cut.jpg"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">),</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Rectangle</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">200</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">200</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>ThÃªm watermark:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">ImgUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">pressText</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">//</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        FileUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"hutool/cat.jpg"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">),</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        FileUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"hutool/cat_logo.jpg"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">),</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">        "Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Color</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">WHITE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Font</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Fira Code"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Font</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">BOLD</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">),</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">        0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">        0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">        0.8f</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><h3>14. Táº­p tin cáº¥u hÃ¬nh</h3>
<blockquote>
<p>NhÆ° má»i ngÆ°á»i Ä‘Ã£ biáº¿t, táº­p tin cáº¥u hÃ¬nh Properties Ä‘Æ°á»£c sá»­ dá»¥ng rá»™ng rÃ£i trong Java cÃ³ má»™t nhÆ°á»£c Ä‘iá»ƒm lá»›n: khÃ´ng há»— trá»£ tiáº¿ng Trung. Má»—i khi sá»­ dá»¥ng, náº¿u muá»‘n lÆ°u trá»¯ kÃ½ tá»± tiáº¿ng Trung, báº¡n pháº£i sá»­ dá»¥ng plugin liÃªn quan Ä‘áº¿n IDE Ä‘á»ƒ chuyá»ƒn sang kÃ½ hiá»‡u Unicode, vÃ  loáº¡i kÃ½ hiá»‡u pháº£n nhÃ¢n tÃ­nh nÃ y hoÃ n toÃ n khÃ´ng thá»ƒ Ä‘á»c Ä‘Æ°á»£c trÃªn dÃ²ng lá»‡nh.</p>
</blockquote>
<p>Do Ä‘Ã³, Setting cá»§a Hutool ra Ä‘á»i. NgoÃ i viá»‡c tÆ°Æ¡ng thÃ­ch vá»›i Ä‘á»‹nh dáº¡ng táº­p tin Properties, Setting cÃ²n cung cáº¥p má»™t sá»‘ tÃ­nh nÄƒng Ä‘áº·c biá»‡t bao gá»“m:</p>
<ul>
<li>Há»— trá»£ nhiá»u cÃ¡ch mÃ£ hÃ³a</li>
<li>Há»— trá»£ biáº¿n</li>
<li>Há»— trá»£ phÃ¢n nhÃ³m</li>
</ul>
<p>Äáº§u tiÃªn, táº¡o má»™t táº­p tin cáº¥u hÃ¬nh example.setting vá»›i ná»™i dung nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>name=Tom</span></span>
<span class="line"><span>age=18</span></span></code></pre>
</div><p>Sau Ä‘Ã³, Ä‘á»c vÃ  cáº­p nháº­t táº­p tin cáº¥u hÃ¬nh:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> SettingDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> SETTING </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "hutool/example.setting"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Khá»Ÿi táº¡o Setting</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Setting</span><span style="color:#E06C75;--shiki-dark:#E06C75"> setting</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Setting</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(SETTING);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Äá»c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        setting</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getStr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Tá»± Ä‘á»™ng táº£i khi táº­p tin cáº¥u hÃ¬nh thay Ä‘á»•i</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        setting</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">autoLoad</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // ThÃªm cáº·p key-value báº±ng mÃ£ lá»‡nh</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        setting</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"birthday"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"2020/02/02"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        setting</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">store</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(SETTING);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>15. LogFactory</h3>
<p>LogFactory cá»§a Hutool tÆ°Æ¡ng thÃ­ch vá»›i cÃ¡c framework nháº­t kÃ½ lá»›n vÃ  ráº¥t dá»… sá»­ dá»¥ng.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> LogDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Log</span><span style="color:#E06C75;--shiki-dark:#E06C75"> log </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> LogFactory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">debug</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"abcd"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>TrÆ°á»›c tiÃªn, sá»­ dá»¥ng <code>LogFactory.get()</code> Ä‘á»ƒ tá»± Ä‘á»™ng nháº­n diá»‡n framework nháº­t kÃ½ Ä‘Ã£ Ä‘Æ°á»£c tÃ­ch há»£p vÃ  táº¡o Ä‘á»‘i tÆ°á»£ng Log tÆ°Æ¡ng á»©ng, sau Ä‘Ã³ gá»i cÃ¡c phÆ°Æ¡ng thá»©c nhÆ° <code>debug()</code> vÃ  <code>info()</code> Ä‘á»ƒ xuáº¥t nháº­t kÃ½.</p>
<p>Náº¿u khÃ´ng muá»‘n táº¡o Ä‘á»‘i tÆ°á»£ng Log, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng StaticLog, má»™t lá»›p nháº­t kÃ½ cung cáº¥p cÃ¡c phÆ°Æ¡ng thá»©c tÄ©nh.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">StaticLog</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">info</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Web Server {}."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"TomCat"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><h3>16. CÃ´ng cá»¥ Cache</h3>
<p>CacheUtil lÃ  má»™t cÃ´ng cá»¥ tiá»‡n Ã­ch cá»§a Hutool Ä‘á»ƒ táº¡o cÃ¡c Ä‘á»‘i tÆ°á»£ng cache khÃ¡c nhau:</p>
<ul>
<li><strong>FIFOCache</strong>: Äáº§u vÃ o Ä‘áº§u ra, cÃ¡c pháº§n tá»­ Ä‘Æ°á»£c thÃªm vÃ o cache cho Ä‘áº¿n khi cache Ä‘áº§y, khi Ä‘Ã³ cÃ¡c Ä‘á»‘i tÆ°á»£ng cache Ä‘Ã£ háº¿t háº¡n sáº½ Ä‘Æ°á»£c xÃ³a Ä‘i, náº¿u váº«n cÃ²n Ä‘áº§y, cÃ¡c pháº§n tá»­ nháº­p trÆ°á»›c sáº½ bá»‹ xÃ³a Ä‘i.</li>
</ul>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Cache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fifoCache </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CacheUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newFIFOCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fifoCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"one"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fifoCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key2"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"two"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fifoCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key3"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"three"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fifoCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key4"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"four"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Vá»›i kÃ­ch thÆ°á»›c lÃ  3, khi key3 Ä‘Æ°á»£c thÃªm vÃ o, key1 sáº½ bá»‹ xÃ³a</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> value1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fifoCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><ul>
<li><strong>LFUCache</strong>: Ãt sá»­ dá»¥ng nháº¥t, dá»±a trÃªn sá»‘ láº§n sá»­ dá»¥ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh liá»‡u Ä‘á»‘i tÆ°á»£ng cÃ³ nÃªn Ä‘Æ°á»£c giá»¯ trong cache hay khÃ´ng. Khi cache Ä‘áº§y, cÃ¡c Ä‘á»‘i tÆ°á»£ng Ã­t Ä‘Æ°á»£c truy cáº­p nháº¥t sáº½ bá»‹ xÃ³a Ä‘i Ä‘á»ƒ nhÆ°á»ng chá»— cho cÃ¡c Ä‘á»‘i tÆ°á»£ng má»›i.</li>
</ul>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Cache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> lfuCache </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CacheUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newLFUCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">lfuCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"one"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">lfuCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // TÄƒng sá»‘ láº§n sá»­ dá»¥ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">lfuCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key2"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"two"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">lfuCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key3"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"three"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">lfuCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key4"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"four"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Vá»›i dung lÆ°á»£ng cache lÃ  3, khi thÃªm pháº§n tá»­ thá»© 4 vÃ o, pháº§n tá»­ Ã­t Ä‘Æ°á»£c sá»­ dá»¥ng nháº¥t (key2, key3) sáº½ bá»‹ xÃ³a</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> value2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> lfuCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key2"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> value3 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> lfuCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key3"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><ul>
<li><strong>LRUCache</strong>: Sá»­ dá»¥ng gáº§n Ä‘Ã¢y nháº¥t, dá»±a trÃªn thá»i gian sá»­ dá»¥ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh liá»‡u Ä‘á»‘i tÆ°á»£ng cÃ³ nÃªn Ä‘Æ°á»£c giá»¯ trong cache hay khÃ´ng. Khi cache Ä‘áº§y, cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng lÃ¢u nháº¥t sáº½ bá»‹ xÃ³a Ä‘i.</li>
</ul>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Cache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> lruCache </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CacheUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newLRUCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">lruCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"one"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">lruCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key2"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"two"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">lruCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key3"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"three"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">lruCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Gáº§n Ä‘Ã¢y Ä‘Æ°á»£c sá»­ dá»¥ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">lruCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key4"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"four"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Vá»›i dung lÆ°á»£ng cache lÃ  3, khi thÃªm pháº§n tá»­ thá»© 4 vÃ o, pháº§n tá»­ Ä‘Æ°á»£c sá»­ dá»¥ng lÃ¢u nháº¥t (key2) sáº½ bá»‹ xÃ³a</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> value2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> lruCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key2"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(value2);</span></span></code></pre>
</div><h3>17. MÃ£ hÃ³a vÃ  Giáº£i mÃ£</h3>
<p>MÃ£ hÃ³a Ä‘Æ°á»£c chia thÃ nh ba loáº¡i:</p>
<ul>
<li><strong>MÃ£ hÃ³a Ä‘á»‘i xá»©ng (Symmetric)</strong>: VÃ­ dá»¥: AES, DES, vv.</li>
<li><strong>MÃ£ hÃ³a khÃ´ng Ä‘á»‘i xá»©ng (Asymmetric)</strong>: VÃ­ dá»¥: RSA, DSA, vv.</li>
<li><strong>MÃ£ hÃ³a bÄƒm (Digest)</strong>: VÃ­ dá»¥: MD5, SHA-1, SHA-256, HMAC, vv.</li>
</ul>
<p>Hutool Ä‘Ã£ Ä‘Ã³ng gÃ³i cÃ¡c cÃ´ng cá»¥ cho ba trÆ°á»ng há»£p nÃ y:</p>
<ul>
<li>MÃ£ hÃ³a Ä‘á»‘i xá»©ng SymmetricCrypto</li>
<li>MÃ£ hÃ³a khÃ´ng Ä‘á»‘i xá»©ng AsymmetricCrypto</li>
<li>MÃ£ hÃ³a bÄƒm Digester</li>
</ul>
<p>CÃ´ng cá»¥ nhanh chÃ³ng SecureUtil cÃ³ cÃ¡c phÆ°Æ¡ng thá»©c sau:</p>
<ol>
<li>MÃ£ hÃ³a Ä‘á»‘i xá»©ng</li>
</ol>
<ul>
<li>SecureUtil.aes</li>
<li>SecureUtil.des</li>
</ul>
<ol start="2">
<li>MÃ£ hÃ³a khÃ´ng Ä‘á»‘i xá»©ng</li>
</ol>
<ul>
<li>SecureUtil.rsa</li>
<li>SecureUtil.dsa</li>
</ul>
<ol start="3">
<li>MÃ£ hÃ³a bÄƒm</li>
</ol>
<ul>
<li>SecureUtil.md5</li>
<li>SecureUtil.sha1</li>
<li>SecureUtil.hmac</li>
<li>SecureUtil.hmacMd5</li>
<li>SecureUtil.hmacSha1</li>
</ul>
<p>HÃ£y xem má»™t vÃ­ dá»¥ Ä‘Æ¡n giáº£n Ä‘á»ƒ tham kháº£o:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> SecureUtilDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AES</span><span style="color:#E06C75;--shiki-dark:#E06C75"> aes </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> SecureUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">aes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> encry</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> aes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">encryptHex</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"two"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(encry);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> oo</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> aes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">decryptStr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(encry);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(oo);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3>18. ThÆ° viá»‡n khÃ¡c</h3>
<p>Hutool cÃ³ nhiá»u thÆ° viá»‡n khÃ¡c nhau, Ä‘áº·c biá»‡t lÃ  cÃ¡c thÆ° viá»‡n Ä‘Ã³ng gÃ³i láº¡i tá»« cÃ¡c thÆ° viá»‡n cá»§a bÃªn thá»© ba, cháº³ng háº¡n nhÆ° cÃ´ng cá»¥ email MailUtil, cÃ´ng cá»¥ mÃ£ QR QrCodeUtil, cÃ´ng cá»¥ Emoji EmojiUtil, cÃ¡c báº¡n cÃ³ thá»ƒ tham kháº£o tÃ i liá»‡u chÃ­nh thá»©c cá»§a Hutool: <a href="https://www.hutool.cn/" target="_blank" rel="noopener noreferrer">https://www.hutool.cn/</a></p>
<p>Äá»‹a chá»‰ mÃ£ nguá»“n dá»± Ã¡n: <a href="https://github.com/looly/hutool" target="_blank" rel="noopener noreferrer">https://github.com/looly/hutool</a></p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704191802.png" type="image/png"/>
    </item>
    <item>
      <title>Objects</title>
      <link>https://vanhung4499.github.io/programming/java/common-tool/objects.html</link>
      <guid>https://vanhung4499.github.io/programming/java/common-tool/objects.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Objects</source>
      <description>Objects Lá»›p Objects trong Java lÃ  má»™t lá»›p tiá»‡n Ã­ch chá»©a má»™t loáº¡t cÃ¡c phÆ°Æ¡ng thá»©c tÄ©nh dÃ¹ng Ä‘á»ƒ xá»­ lÃ½ Ä‘á»‘i tÆ°á»£ng. NÃ³ náº±m trong gÃ³i java.util vÃ  Ä‘Æ°á»£c giá»›i thiá»‡u tá»« Java 7. Má»¥c Ä‘Ã­ch ...</description>
      <category>java</category>
      <pubDate>Thu, 04 Jul 2024 09:37:15 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Lá»›p <code>Objects</code> trong Java lÃ  má»™t lá»›p tiá»‡n Ã­ch chá»©a má»™t loáº¡t cÃ¡c phÆ°Æ¡ng thá»©c tÄ©nh dÃ¹ng Ä‘á»ƒ xá»­ lÃ½ Ä‘á»‘i tÆ°á»£ng. NÃ³ náº±m trong gÃ³i <code>java.util</code> vÃ  Ä‘Æ°á»£c giá»›i thiá»‡u tá»« Java 7. Má»¥c Ä‘Ã­ch chÃ­nh cá»§a lá»›p <code>Objects</code> lÃ  giáº£m thiá»ƒu rá»§i ro exception NullPointerException trong mÃ£ nguá»“n, Ä‘á»“ng thá»i cung cáº¥p má»™t sá»‘ phÆ°Æ¡ng thá»©c ráº¥t há»¯u Ã­ch cho chÃºng ta sá»­ dá»¥ng.</p>
<h3>Kiá»ƒm Tra Äá»‘i TÆ°á»£ng Null</h3>
<p>Trong Java, má»i thá»© Ä‘á»u lÃ  Ä‘á»‘i tÆ°á»£ng, vÃ¬ váº­y viá»‡c kiá»ƒm tra Ä‘á»‘i tÆ°á»£ng cÃ³ null hay khÃ´ng ráº¥t phá»• biáº¿n. PhÆ°Æ¡ng thá»©c <code>isNull</code> cá»§a <code>Objects</code> Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ kiá»ƒm tra xem Ä‘á»‘i tÆ°á»£ng cÃ³ null hay khÃ´ng, trong khi phÆ°Æ¡ng thá»©c <code>nonNull</code> Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ kiá»ƒm tra Ä‘á»‘i tÆ°á»£ng khÃ´ng null. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> integer </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isNull</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(integer)</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Äá»‘i tÆ°á»£ng lÃ  null"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">nonNull</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(integer)</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Äá»‘i tÆ°á»£ng khÃ´ng pháº£i lÃ  null"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><h3>NÃ©m exception Khi Äá»‘i TÆ°á»£ng Null</h3>
<p>Náº¿u chÃºng ta muá»‘n nÃ©m exception con trá» null khi Ä‘á»‘i tÆ°á»£ng lÃ  null, cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>requireNonNull</code> cá»§a <code>Objects</code>. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> integer1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">128</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">requireNonNull</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(integer1);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">requireNonNull</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(integer1, </span><span style="color:#98C379;--shiki-dark:#98C379">"Tham sá»‘ khÃ´ng Ä‘Æ°á»£c null"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">requireNonNull</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(integer1, () </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#98C379;--shiki-dark:#98C379"> "Tham sá»‘ khÃ´ng Ä‘Æ°á»£c null"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Trong vÃ­ dá»¥ trÃªn:</p>
<ul>
<li><code>Objects.requireNonNull(integer1)</code> kiá»ƒm tra xem <code>integer1</code> cÃ³ null khÃ´ng vÃ  nÃ©m exception náº¿u null.</li>
<li><code>Objects.requireNonNull(integer1, "Tham sá»‘ khÃ´ng Ä‘Æ°á»£c null")</code> kiá»ƒm tra vÃ  nÃ©m exception vá»›i thÃ´ng bÃ¡o tÃ¹y chá»‰nh náº¿u <code>integer1</code> lÃ  null.</li>
<li><code>Objects.requireNonNull(integer1, () -&gt; "Tham sá»‘ khÃ´ng Ä‘Æ°á»£c null")</code> kiá»ƒm tra vÃ  nÃ©m exception vá»›i thÃ´ng bÃ¡o Ä‘Æ°á»£c táº¡o tá»« lambda náº¿u <code>integer1</code> lÃ  null.</li>
</ul>
<h3>Kiá»ƒm Tra Hai Äá»‘i TÆ°á»£ng CÃ³ Báº±ng Nhau KhÃ´ng</h3>
<p>ChÃºng ta thÆ°á»ng cáº§n kiá»ƒm tra hai Ä‘á»‘i tÆ°á»£ng cÃ³ báº±ng nhau khÃ´ng, <code>Objects</code> cung cáº¥p phÆ°Æ¡ng thá»©c <code>equals</code> giÃºp chÃºng ta thá»±c hiá»‡n Ä‘iá»u nÃ y má»™t cÃ¡ch ráº¥t thuáº­n tiá»‡n:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> integer1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> integer2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">equals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(integer1, integer2));</span></span></code></pre>
</div><p>Káº¿t quáº£ thá»±c thi:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span></code></pre>
</div><p>Tuy nhiÃªn, sá»­ dá»¥ng phÆ°Æ¡ng thá»©c nÃ y cÃ³ thá»ƒ gáº·p pháº£i má»™t sá»‘ ráº¯c rá»‘i, vÃ­ dá»¥ nhÆ° trong trÆ°á»ng há»£p sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> integer1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> integer2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Long</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">equals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(integer1, integer2));</span></span></code></pre>
</div><p>Káº¿t quáº£ thá»±c thi:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">false</span></span></code></pre>
</div><p>DÃ¹ <code>Objects.equals()</code> Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ trÃ¡nh lá»—i báº±ng cÃ¡ch xá»­ lÃ½ viá»‡c so sÃ¡nh vá»›i giÃ¡ trá»‹ null mÃ  khÃ´ng nÃ©m ra ngoáº¡i lá»‡ con trá» null, Ä‘iá»u nÃ y khÃ´ng cÃ³ nghÄ©a lÃ  nÃ³ khÃ´ng gáº·p váº¥n Ä‘á» tiá»m áº©n. Thá»±c táº¿, má»™t váº¥n Ä‘á» tiá»m áº©n cá»§a <code>Objects.equals()</code> lÃ  nÃ³ phá»¥ thuá»™c vÃ o viá»‡c triá»ƒn khai phÆ°Æ¡ng thá»©c <code>equals()</code> cá»§a cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c so sÃ¡nh.</p>
<p>Khi lá»›p cá»§a hai Ä‘á»‘i tÆ°á»£ng khÃ´ng triá»ƒn khai Ä‘Ãºng phÆ°Æ¡ng thá»©c <code>equals()</code>, phÆ°Æ¡ng thá»©c <code>Objects.equals()</code> cÃ³ thá»ƒ cho káº¿t quáº£ khÃ´ng nhÆ° mong Ä‘á»£i. VÃ­ dá»¥:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ObjectsDemo1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Person</span><span style="color:#E06C75;--shiki-dark:#E06C75"> person1</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Person</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"abcd"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">18</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Person</span><span style="color:#E06C75;--shiki-dark:#E06C75"> person2</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Person</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"abcd"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">18</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">equals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(person1, person2)); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// false</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Person</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    Person</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">age</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong vÃ­ dá»¥ trÃªn, chÃºng ta táº¡o má»™t lá»›p tÃªn lÃ  <code>Person</code> nhÆ°ng khÃ´ng ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c <code>equals()</code>. Sau Ä‘Ã³, chÃºng ta táº¡o hai Ä‘á»‘i tÆ°á»£ng <code>Person</code> cÃ³ cÃ¹ng thuá»™c tÃ­nh vÃ  sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>Objects.equals()</code> Ä‘á»ƒ so sÃ¡nh chÃºng. Máº·c dÃ¹ hai Ä‘á»‘i tÆ°á»£ng nÃ y cÃ³ cÃ¹ng thuá»™c tÃ­nh, nhÆ°ng káº¿t quáº£ láº¡i lÃ  <code>false</code>. Äiá»u nÃ y lÃ  do <code>Objects.equals()</code> phá»¥ thuá»™c vÃ o phÆ°Æ¡ng thá»©c <code>equals()</code> cá»§a Ä‘á»‘i tÆ°á»£ng, vÃ  trong vÃ­ dá»¥ nÃ y, lá»›p <code>Person</code> khÃ´ng triá»ƒn khai Ä‘Ãºng phÆ°Æ¡ng thá»©c <code>equals()</code>, nÃªn phÆ°Æ¡ng thá»©c máº·c Ä‘á»‹nh <code>equals()</code> cá»§a lá»›p <code>Object</code> Ä‘Æ°á»£c sá»­ dá»¥ng, chá»‰ so sÃ¡nh Ä‘á»‹a chá»‰ tham chiáº¿u cá»§a Ä‘á»‘i tÆ°á»£ng.</p>
<p>Äá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y, chÃºng ta cáº§n ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c <code>equals()</code> trong lá»›p <code>Person</code>:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> boolean</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> equals</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Object</span><span style="color:#E06C75;--shiki-dark:#E06C75"> obj) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ==</span><span style="color:#E06C75;--shiki-dark:#E06C75"> obj) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (obj </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ||</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getClass</span><span style="color:#E06C75;--shiki-dark:#E06C75">() </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getClass</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Person</span><span style="color:#E06C75;--shiki-dark:#E06C75"> person </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (Person) obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#E06C75;--shiki-dark:#E06C75"> age </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> person</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">age</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &amp;&amp;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">equals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(name, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">person</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>BÃ¢y giá», khi chÃºng ta sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>Objects.equals()</code> Ä‘á»ƒ so sÃ¡nh hai Ä‘á»‘i tÆ°á»£ng <code>Person</code> cÃ³ cÃ¹ng thuá»™c tÃ­nh, káº¿t quáº£ sáº½ lÃ  <code>true</code>, Ä‘Ãºng nhÆ° mong Ä‘á»£i.</p>
<h3>Láº¥y hashCode cá»§a Äá»‘i TÆ°á»£ng</h3>
<p>Náº¿u báº¡n muá»‘n láº¥y giÃ¡ trá»‹ <code>hashCode</code> cá»§a má»™t Ä‘á»‘i tÆ°á»£ng nÃ o Ä‘Ã³, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>hashCode</code> cá»§a <code>Objects</code>. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"abcd"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">hashCode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str));</span></span></code></pre>
</div><p>Káº¿t quáº£ thá»±c thi:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">867758096</span></span></code></pre>
</div><h3>So SÃ¡nh Hai Äá»‘i TÆ°á»£ng</h3>
<p>PhÆ°Æ¡ng thá»©c <code>compare()</code> Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ so sÃ¡nh hai Ä‘á»‘i tÆ°á»£ng, thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng trong viá»‡c sáº¯p xáº¿p tÃ¹y chá»‰nh. NÃ³ yÃªu cáº§u má»™t Comparator lÃ m tham sá»‘. Náº¿u Comparator lÃ  null, thá»© tá»± tá»± nhiÃªn sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng. DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ vá» phÆ°Æ¡ng thá»©c <code>compare()</code>:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ObjectsCompareDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        PersonCompare</span><span style="color:#E06C75;--shiki-dark:#E06C75"> person1</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> PersonCompare</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">30</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        PersonCompare</span><span style="color:#E06C75;--shiki-dark:#E06C75"> person2</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> PersonCompare</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"jerry"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">25</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Comparator</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PersonCompare</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">ageComparator</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Comparator</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">comparingInt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(p </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> p</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ageComparisonResult</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">compare</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(person1, person2, ageComparator);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"So sÃ¡nh tuá»•i: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ageComparisonResult); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Káº¿t quáº£ï¼š1ï¼ˆè¡¨ç¤º age cá»§a person1 sau person2ï¼‰</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PersonCompare</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    PersonCompare</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">age</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>So SÃ¡nh Hai Máº£ng</h3>
<p>PhÆ°Æ¡ng thá»©c <code>deepEquals()</code> Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ so sÃ¡nh hai Ä‘á»‘i tÆ°á»£ng loáº¡i <a href="https://javabetter.cn/array/array.html" target="_blank" rel="noopener noreferrer">máº£ng</a>. Khi Ä‘á»‘i tÆ°á»£ng khÃ´ng pháº£i lÃ  máº£ng, hÃ nh vi sáº½ giá»‘ng vá»›i phÆ°Æ¡ng thá»©c <code>equals()</code>.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] array1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 3</span><span style="color:#E06C75;--shiki-dark:#E06C75">}</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] array2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 3</span><span style="color:#E06C75;--shiki-dark:#E06C75">}</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] array3 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 4</span><span style="color:#E06C75;--shiki-dark:#E06C75">}</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">deepEquals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(array1, array2));</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Káº¿t quáº£ï¼štrueï¼ˆvÃ¬ ná»™i dung cá»§a array1 vÃ  array2 giá»‘ng nhauï¼‰</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">deepEquals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(array1, array3));</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Káº¿t quáº£ï¼šfalseï¼ˆvÃ¬ ná»™i dung cá»§a array1 vÃ  array3 khÃ¡c nhauï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»‘i vá»›i cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ´ng pháº£i lÃ  máº£ng, deepEquals() hoáº¡t Ä‘á»™ng giá»‘ng nhÆ° equals()</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> string1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "hello"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> string2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "hello"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> string3 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "world"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">deepEquals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(string1, string2));</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Káº¿t quáº£ï¼štrueï¼ˆvÃ¬ string1 vÃ  string2 giá»‘ng nhauï¼‰</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">deepEquals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(string1, string3));</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Káº¿t quáº£ï¼šfalseï¼ˆvÃ¬ string1 vÃ  string3 khÃ¡c nhauï¼‰</span></span></code></pre>
</div><p>DÆ°á»›i Ä‘Ã¢y lÃ  vÃ­ dá»¥ vá» <a href="/programming/java/array/double-array">máº£ng hai chiá»u</a>:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[][] nestedArray1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {{"A", "B"}, {"C", "D"}}</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[][] nestedArray2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {{"A", "B"}, {"C", "D"}}</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[][] nestedArray3 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {{"A", "B"}, {"C", "E"}}</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">deepEquals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(nestedArray1, nestedArray2));</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Káº¿t quáº£ï¼štrue (vÃ¬ cÃ¡c pháº§n tá»­ cá»§a máº£ng lá»“ng giá»‘ng nhau)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Objects</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">deepEquals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(nestedArray1, nestedArray3));</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Káº¿t quáº£ï¼šfalse (vÃ¬ cÃ¡c pháº§n tá»­ cá»§a máº£ng lá»“ng khÃ¡c nhau)</span></span></code></pre>
</div><h3>TÃ³m Táº¯t</h3>
<p>NgoÃ i cÃ¡c phÆ°Æ¡ng thá»©c Ä‘Ã£ Ä‘á» cáº­p á»Ÿ trÃªn, Objects cÃ²n cung cáº¥p má»™t sá»‘ phÆ°Æ¡ng thá»©c khÃ¡c nhÆ° <code>toString</code>, báº¡n cÃ³ thá»ƒ thá»­ náº¿u cÃ³ há»©ng thÃº.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704192653.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>TÃ³m láº¡i, cÃ¡c phÆ°Æ¡ng thá»©c mÃ  lá»›p Objects cung cáº¥p ráº¥t há»¯u Ã­ch trong nhiá»u trÆ°á»ng há»£p, giÃºp Ä‘Æ¡n giáº£n hÃ³a mÃ£ nguá»“n vÃ  giáº£m thiá»ƒu kháº£ nÄƒng xáº£y ra lá»—i.</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704192653.png" type="image/png"/>
    </item>
    <item>
      <title>Scanner</title>
      <link>https://vanhung4499.github.io/programming/java/common-tool/scanner.html</link>
      <guid>https://vanhung4499.github.io/programming/java/common-tool/scanner.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Scanner</source>
      <description>Scanner Lá»›p Scanner cá»§a Java lÃ  má»™t cÃ´ng cá»¥ tiá»‡n Ã­ch Ä‘á»ƒ quÃ©t Ä‘áº§u vÃ o tá»« bÃ n phÃ­m, máº·c dÃ¹ nÃ³ cÅ©ng cÃ³ thá»ƒ quÃ©t ná»™i dung cá»§a tá»‡p, nhÆ°ng chÃºng ta thÆ°á»ng thÃ­ch nÃ³ trong vai trÃ² quÃ©t ...</description>
      <category>java</category>
      <pubDate>Thu, 04 Jul 2024 09:37:15 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Lá»›p Scanner cá»§a Java lÃ  má»™t cÃ´ng cá»¥ tiá»‡n Ã­ch Ä‘á»ƒ quÃ©t Ä‘áº§u vÃ o tá»« bÃ n phÃ­m, máº·c dÃ¹ nÃ³ cÅ©ng cÃ³ thá»ƒ quÃ©t ná»™i dung cá»§a tá»‡p, nhÆ°ng chÃºng ta thÆ°á»ng thÃ­ch nÃ³ trong vai trÃ² quÃ©t Ä‘áº§u vÃ o tá»« bÃ n phÃ­m hÆ¡n, vÃ¬ quÃ©t tá»‡p cÃ³ thá»ƒ Ä‘Æ°á»£c thá»±c hiá»‡n thÃ´ng qua <a href="/programming/java/io/file">File Stream</a>.</p>
<p>Tiáº¿p theo, chÃºng ta sáº½ tháº£o luáº­n vá» lá»›p Scanner thÃ´ng qua má»™t vÃ i vÃ­ dá»¥ Ä‘Æ¡n giáº£n.</p>
<h3>01. QuÃ©t Äáº§u VÃ o Tá»« BÃ n PhÃ­m</h3>
<p>ThÃ´ng thÆ°á»ng, chÃºng ta sáº½ sá»­ dá»¥ng lá»›p Scanner Ä‘á»ƒ quÃ©t Ä‘áº§u vÃ o tá»« bÃ n phÃ­m, Ä‘áº·c biá»‡t Ä‘á»‘i vá»›i nhá»¯ng ngÆ°á»i má»›i há»c Java, Ä‘iá»u nÃ y sáº½ ráº¥t thÃº vá»‹ vÃ¬ cuá»‘i cÃ¹ng chÃºng ta cÅ©ng cÃ³ thá»ƒ nháº­n Ä‘Æ°á»£c dá»¯ liá»‡u mÃ  chÃºng ta muá»‘n nháº­p vÃ o.</p>
<p>HÃ£y xem vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Scanner</span><span style="color:#E06C75;--shiki-dark:#E06C75"> scanner </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Scanner</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">in</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Táº¡o Ä‘á»‘i tÆ°á»£ng Scanner, Ä‘á»c dá»¯ liá»‡u tá»« Ä‘áº§u vÃ o tiÃªu chuáº©n</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Vui lÃ²ng nháº­p má»™t sá»‘ nguyÃªn: "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> num </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">nextInt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Láº¥y sá»‘ nguyÃªn ngÆ°á»i dÃ¹ng nháº­p vÃ o</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Sá»‘ nguyÃªn báº¡n Ä‘Ã£ nháº­p lÃ : "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> num);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">nextLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Äá»c kÃ½ tá»± xuá»‘ng dÃ²ng Ä‘á»ƒ trÃ¡nh áº£nh hÆ°á»Ÿng Ä‘áº¿n láº§n Ä‘á»c tiáº¿p theo</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Vui lÃ²ng nháº­p má»™t chuá»—i: "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">nextLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Láº¥y chuá»—i ngÆ°á»i dÃ¹ng nháº­p vÃ o</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Chuá»—i báº¡n Ä‘Ã£ nháº­p lÃ : "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> str);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // ÄÃ³ng Ä‘á»‘i tÆ°á»£ng Scanner</span></span></code></pre>
</div><p>Cháº¡y chÆ°Æ¡ng trÃ¬nh, báº¡n cÃ³ thá»ƒ tÆ°Æ¡ng tÃ¡c vá»›i báº£ng Ä‘iá»u khiá»ƒn, Ä‘á»‘i vá»›i ngÆ°á»i má»›i há»c, Ä‘iá»u nÃ y sáº½ khÃ¡ thÃº vá»‹.</p>
<p>Trong Ä‘Ã³, <a href="http://System.in" target="_blank" rel="noopener noreferrer">System.in</a> tráº£ vá» má»™t <a href="/programming/java/io/stream.html" target="_blank">Input Byte Stream</a> InputStream, tÆ°Æ¡ng á»©ng vá»›i System.out.</p>
<h4>1. <code>nextLine</code></h4>
<p>PhÆ°Æ¡ng thá»©c <code>nextLine()</code> sáº½ quÃ©t cÃ¡c kÃ½ tá»± trong luá»“ng Ä‘áº§u vÃ o cho Ä‘áº¿n khi gáº·p kÃ½ tá»± xuá»‘ng dÃ²ng <code>\n</code>, sau Ä‘Ã³ tráº£ vá» ná»™i dung cá»§a dÃ²ng Ä‘Ã³ dÆ°á»›i dáº¡ng má»™t chuá»—i. Äá»“ng thá»i, <code>nextLine()</code> sáº½ di chuyá»ƒn vá»‹ trÃ­ cá»§a Ä‘á»‘i tÆ°á»£ng Scanner Ä‘áº¿n Ä‘áº§u dÃ²ng tiáº¿p theo Ä‘á»ƒ chuáº©n bá»‹ cho láº§n Ä‘á»c tiáº¿p theo.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Scanner</span><span style="color:#E06C75;--shiki-dark:#E06C75"> scanner </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Scanner</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">in</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Táº¡o Ä‘á»‘i tÆ°á»£ng Scanner, Ä‘á»c dá»¯ liá»‡u tá»« Ä‘áº§u vÃ o tiÃªu chuáº©n</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Vui lÃ²ng nháº­p nhiá»u dÃ²ng vÄƒn báº£n, káº¿t thÃºc báº±ng má»™t dÃ²ng trá»‘ng:"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringBuilder</span><span style="color:#E06C75;--shiki-dark:#E06C75"> sb </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> StringBuilder</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Táº¡o Ä‘á»‘i tÆ°á»£ng StringBuilder Ä‘á»ƒ lÆ°u trá»¯ vÄƒn báº£n Ä‘Æ°á»£c Ä‘á»c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> line </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">nextLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Äá»c dÃ²ng Ä‘áº§u tiÃªn tá»« luá»“ng Ä‘áº§u vÃ o</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">line</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isEmpty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Náº¿u dÃ²ng Ä‘á»c Ä‘Æ°á»£c khÃ´ng rá»—ng, tiáº¿p tá»¥c Ä‘á»c dÃ²ng tiáº¿p theo</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    sb</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">append</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(line).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">append</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // ThÃªm ná»™i dung cá»§a dÃ²ng hiá»‡n táº¡i vÃ o Ä‘á»‘i tÆ°á»£ng StringBuilder vÃ  xuá»‘ng dÃ²ng</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    line </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">nextLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Äá»c dÃ²ng tiáº¿p theo</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"VÄƒn báº£n báº¡n Ä‘Ã£ nháº­p lÃ :</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> sb</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // In ra vÄƒn báº£n Ä‘Ã£ Ä‘á»c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // ÄÃ³ng Ä‘á»‘i tÆ°á»£ng Scanner</span></span></code></pre>
</div><h4>2. <code>nextInt</code></h4>
<p><code>nextInt()</code> dÃ¹ng Ä‘á»ƒ Ä‘á»c sá»‘ nguyÃªn tiáº¿p theo tá»« luá»“ng Ä‘áº§u vÃ o vÃ  tráº£ vá» giÃ¡ trá»‹ Ä‘Ã³. Náº¿u trong luá»“ng Ä‘áº§u vÃ o khÃ´ng cÃ³ sá»‘ nguyÃªn, hoáº·c khÃ´ng pháº£i lÃ  sá»‘ nguyÃªn, sáº½ nÃ©m ra ngoáº¡i lá»‡ InputMismatchException.</p>
<h4>3. CÃ¡c PhÆ°Æ¡ng Thá»©c KhÃ¡c</h4>
<p>NgoÃ i hai phÆ°Æ¡ng thá»©c thÆ°á»ng dÃ¹ng á»Ÿ trÃªn, lá»›p Scanner cÃ²n cÃ³ má»™t sá»‘ phÆ°Æ¡ng thá»©c khÃ¡c:</p>
<ul>
<li><code>boolean hasNext()</code>: Kiá»ƒm tra xem luá»“ng Ä‘áº§u vÃ o cÃ³ pháº§n tá»­ tiáº¿p theo khÃ´ng.</li>
<li><code>boolean hasNextLine()</code>: Kiá»ƒm tra xem luá»“ng Ä‘áº§u vÃ o cÃ³ dÃ²ng tiáº¿p theo khÃ´ng.</li>
<li><code>String next()</code>: Äá»c pháº§n tá»­ tiáº¿p theo trong luá»“ng Ä‘áº§u vÃ o (sá»­ dá»¥ng dáº¥u phÃ¢n cÃ¡ch máº·c Ä‘á»‹nh, thÆ°á»ng lÃ  dáº¥u cÃ¡ch hoáº·c kÃ½ tá»± xuá»‘ng dÃ²ng).</li>
<li><code>double nextDouble()</code>: Äá»c sá»‘ thá»±c tiáº¿p theo trong luá»“ng Ä‘áº§u vÃ o.</li>
</ul>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ demo.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Scanner</span><span style="color:#E06C75;--shiki-dark:#E06C75"> scanner </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Scanner</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">in</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Táº¡o Ä‘á»‘i tÆ°á»£ng Scanner, Ä‘á»c dá»¯ liá»‡u tá»« Ä‘áº§u vÃ o tiÃªu chuáº©n</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Vui lÃ²ng nháº­p má»™t sá»‘ nguyÃªn: "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">hasNextInt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Kiá»ƒm tra xem luá»“ng Ä‘áº§u vÃ o cÃ³ sá»‘ nguyÃªn tiáº¿p theo khÃ´ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> num </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">nextInt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Äá»c sá»‘ nguyÃªn tiáº¿p theo tá»« luá»“ng Ä‘áº§u vÃ o</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Sá»‘ nguyÃªn báº¡n Ä‘Ã£ nháº­p lÃ : "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> num);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"KhÃ´ng pháº£i lÃ  sá»‘ nguyÃªn!"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">nextLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Äá»c kÃ½ tá»± xuá»‘ng dÃ²ng tá»« luá»“ng Ä‘áº§u vÃ o</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Vui lÃ²ng nháº­p nhiá»u tá»«, cÃ¡ch nhau báº±ng dáº¥u cÃ¡ch: "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">hasNext</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Kiá»ƒm tra xem luá»“ng Ä‘áº§u vÃ o cÃ³ pháº§n tá»­ tiáº¿p theo khÃ´ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> word </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">next</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Äá»c tá»« tiáº¿p theo tá»« luá»“ng Ä‘áº§u vÃ o</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tá»« báº¡n Ä‘Ã£ nháº­p lÃ : "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> word);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">nextLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Äá»c kÃ½ tá»± xuá»‘ng dÃ²ng tá»« luá»“ng Ä‘áº§u vÃ o</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Vui lÃ²ng nháº­p má»™t sá»‘ thá»±c: "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">hasNextDouble</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Kiá»ƒm tra xem luá»“ng Ä‘áº§u vÃ o cÃ³ sá»‘ thá»±c tiáº¿p theo khÃ´ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    double</span><span style="color:#E06C75;--shiki-dark:#E06C75"> num </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">nextDouble</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Äá»c sá»‘ thá»±c tiáº¿p theo tá»« luá»“ng Ä‘áº§u vÃ o</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Sá»‘ thá»±c báº¡n Ä‘Ã£ nháº­p lÃ : "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> num);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"KhÃ´ng pháº£i lÃ  sá»‘ thá»±c!"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">nextLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Äá»c kÃ½ tá»± xuá»‘ng dÃ²ng tá»« luá»“ng Ä‘áº§u vÃ o</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Vui lÃ²ng nháº­p má»™t chuá»—i: "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">hasNextLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Kiá»ƒm tra xem luá»“ng Ä‘áº§u vÃ o cÃ³ dÃ²ng tiáº¿p theo khÃ´ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> line </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">nextLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Äá»c dÃ²ng tiáº¿p theo tá»« luá»“ng Ä‘áº§u vÃ o</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Chuá»—i báº¡n Ä‘Ã£ nháº­p lÃ : "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> line);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"KhÃ´ng pháº£i lÃ  chuá»—i!"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // ÄÃ³ng Ä‘á»‘i tÆ°á»£ng Scanner</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>02. QuÃ©t Táº­p Tin</h3>
<p>Táº¥t nhiÃªn, Scanner cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ quÃ©t táº­p tin, vÃ  cÃ¡ch thá»±c hiá»‡n cÅ©ng ráº¥t Ä‘Æ¡n giáº£n. DÆ°á»›i Ä‘Ã¢y lÃ  vÃ­ dá»¥ mÃ£:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Táº¡o Ä‘á»‘i tÆ°á»£ng File, Ä‘áº¡i diá»‡n cho táº­p tin cáº§n quÃ©t</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"docs/abcd.md"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Scanner</span><span style="color:#E06C75;--shiki-dark:#E06C75"> scanner </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Scanner</span><span style="color:#E06C75;--shiki-dark:#E06C75">(file)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Táº¡o Ä‘á»‘i tÆ°á»£ng Scanner, Ä‘á»c dá»¯ liá»‡u tá»« táº­p tin</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">hasNextLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Kiá»ƒm tra táº­p tin cÃ³ dÃ²ng tiáº¿p theo hay khÃ´ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> line </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">nextLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Äá»c dÃ²ng tiáº¿p theo tá»« táº­p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(line);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // In ra dÃ²ng Ä‘Ã£ Ä‘á»c</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // ÄÃ³ng Ä‘á»‘i tÆ°á»£ng Scanner</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Táº­p tin khÃ´ng tá»“n táº¡i!"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Trong vÃ­ dá»¥ trÃªn, Ä‘áº§u tiÃªn chÃºng ta táº¡o má»™t Ä‘á»‘i tÆ°á»£ng File, Ä‘áº¡i diá»‡n cho táº­p tin cáº§n quÃ©t. Sau Ä‘Ã³, chÃºng ta sá»­ dá»¥ng phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o cá»§a lá»›p Scanner Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng Scanner, truyá»n táº­p tin vÃ o lÃ m tham sá»‘ cho phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o. Trong vÃ²ng láº·p while, chÃºng ta sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>hasNextLine()</code> Ä‘á»ƒ kiá»ƒm tra xem táº­p tin cÃ³ dÃ²ng tiáº¿p theo khÃ´ng, náº¿u cÃ³, sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>nextLine()</code> Ä‘á»ƒ Ä‘á»c chuá»—i cá»§a dÃ²ng Ä‘Ã³ vÃ  sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>println()</code> Ä‘á»ƒ in ra. Cuá»‘i cÃ¹ng, trÆ°á»›c khi káº¿t thÃºc chÆ°Æ¡ng trÃ¬nh, chÃºng ta sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>close()</code> Ä‘á»ƒ Ä‘Ã³ng Ä‘á»‘i tÆ°á»£ng Scanner.</p>
<p>NgoÃ i viá»‡c sá»­ dá»¥ng vÃ²ng láº·p + nextLine, chÃºng ta cÃ²n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>useDelimiter</code> Ä‘á»ƒ Ä‘áº·t dáº¥u káº¿t thÃºc táº­p tin lÃ  <code>\Z</code> Ä‘á»ƒ Ä‘á»c toÃ n bá»™ táº­p tin.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o Ä‘á»‘i tÆ°á»£ng File, Ä‘áº¡i diá»‡n cho táº­p tin cáº§n quÃ©t</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Scanner</span><span style="color:#E06C75;--shiki-dark:#E06C75"> scanner </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Scanner</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"docs/abcd.md"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Táº¡o Ä‘á»‘i tÆ°á»£ng Scanner, Ä‘á»c dá»¯ liá»‡u tá»« táº­p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">useDelimiter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\\</span><span style="color:#98C379;--shiki-dark:#98C379">Z"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Äáº·t dáº¥u phÃ¢n cÃ¡ch lÃ  káº¿t thÃºc táº­p tin</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">hasNext</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Kiá»ƒm tra táº­p tin cÃ³ dÃ²ng tiáº¿p theo hay khÃ´ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> content </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">next</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Äá»c dÃ²ng tiáº¿p theo tá»« táº­p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(content);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // In ra dÃ²ng Ä‘Ã£ Ä‘á»c</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // ÄÃ³ng Ä‘á»‘i tÆ°á»£ng Scanner</span></span></code></pre>
</div><p>Trong biá»ƒu thá»©c chÃ­nh quy, <code>\Z</code> biá»ƒu thá»‹ káº¿t thÃºc cá»§a Ä‘áº§u vÃ o, tá»©c lÃ  dáº¥u káº¿t thÃºc táº­p tin. Trong lá»›p Scanner, chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng <code>\Z</code> lÃ m dáº¥u phÃ¢n cÃ¡ch Ä‘á»ƒ Ä‘á»c toÃ n bá»™ ná»™i dung cá»§a táº­p tin.</p>
<h3>03. TÃ¬m Kiáº¿m Má»¥c Khá»›p</h3>
<p>NgoÃ i viá»‡c quÃ©t Ä‘áº§u vÃ o tá»« bÃ n phÃ­m vÃ  táº­p tin nhÆ° Ä‘Ã£ Ä‘á» cáº­p á»Ÿ trÃªn, Scanner cÃ²n cung cáº¥p bá»‘n phÆ°Æ¡ng thá»©c khÃ¡c báº¯t Ä‘áº§u vá»›i find Ä‘á»ƒ tÃ¬m kiáº¿m má»¥c khá»›p:</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704192731.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>HÃ£y xem vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> input </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "good good study, day day up."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Scanner</span><span style="color:#E06C75;--shiki-dark:#E06C75"> scanner </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Scanner</span><span style="color:#E06C75;--shiki-dark:#E06C75">(input)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> result</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c findInLine() Ä‘á»ƒ tÃ¬m kiáº¿m tá»« trong chuá»—i</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">result </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">findInLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"study"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"findInLine(): "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> result);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // In ra "study"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c findWithinHorizon() Ä‘á»ƒ tÃ¬m kiáº¿m tá»« trong chuá»—i</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">scanner </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Scanner</span><span style="color:#E06C75;--shiki-dark:#E06C75">(input)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">result </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">findWithinHorizon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"study"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"findWithinHorizon(): "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> result);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // In ra "study"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // ÄÃ³ng Ä‘á»‘i tÆ°á»£ng Scanner</span></span></code></pre>
</div><p>Trong vÃ­ dá»¥ trÃªn, Ä‘áº§u tiÃªn chÃºng ta táº¡o má»™t chuá»—i input, Ä‘áº¡i diá»‡n cho vÄƒn báº£n cáº§n tÃ¬m kiáº¿m. Sau Ä‘Ã³, chÃºng ta sá»­ dá»¥ng phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o cá»§a lá»›p Scanner Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng Scanner vÃ  truyá»n input vÃ o lÃ m luá»“ng Ä‘áº§u vÃ o. Tiáº¿p theo, chÃºng ta sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>findInLine()</code> vÃ  <code>findWithinHorizon()</code> Ä‘á»ƒ tÃ¬m kiáº¿m tá»« "study" trong chuá»—i. Trong Ä‘Ã³, phÆ°Æ¡ng thá»©c <code>findInLine()</code> tÃ¬m kiáº¿m má»¥c khá»›p trong dÃ²ng hiá»‡n táº¡i, cÃ²n phÆ°Æ¡ng thá»©c <code>findWithinHorizon()</code> tÃ¬m kiáº¿m má»¥c khá»›p trong pháº¡m vi giá»›i háº¡n Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh. Trong vÃ­ dá»¥ nÃ y, chÃºng ta giá»›i háº¡n pháº¡m vi tÃ¬m kiáº¿m lÃ  20 kÃ½ tá»± Ä‘áº§u tiÃªn.</p>
<p>Cáº§n lÆ°u Ã½ ráº±ng, phÆ°Æ¡ng thá»©c <code>findInLine()</code> vÃ  <code>findWithinHorizon()</code> Ä‘á»u tráº£ vá» má»¥c khá»›p tÃ¬m Ä‘Æ°á»£c. Náº¿u khÃ´ng tÃ¬m tháº¥y má»¥c khá»›p, sáº½ tráº£ vá» null. NgoÃ i ra, phÆ°Æ¡ng thá»©c <code>findInLine()</code> vÃ  <code>findWithinHorizon()</code> Ä‘á»u bá» qua dáº¥u phÃ¢n cÃ¡ch máº·c Ä‘á»‹nh, vÃ¬ váº­y cáº§n sá»­ dá»¥ng biá»ƒu thá»©c chÃ­nh quy Ä‘á»ƒ chá»‰ Ä‘á»‹nh máº«u tÃ¬m kiáº¿m. Trong vÃ­ dá»¥ nÃ y, chÃºng ta sá»­ dá»¥ng chuá»—i "study" lÃ m máº«u tÃ¬m kiáº¿m.</p>
<p>Táº¥t nhiÃªn, chÃºng ta cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng biá»ƒu thá»©c chÃ­nh quy, vÃ­ dá»¥ nhÆ° chÃºng ta cáº§n tÃ¬m tá»« khÃ³a openjdk trong táº­p tin dÆ°á»›i Ä‘Ã¢y.</p>
<div class="language-md" data-ext="md" data-title="md"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">## jdk install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">### ubuntu</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">`</span><span style="color:#98C379;--shiki-dark:#98C379">apt install openjdk-8-jdk</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">### centos</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">`</span><span style="color:#98C379;--shiki-dark:#98C379">yum install openjdk-8-jdk</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">`</span></span></code></pre>
</div><p>MÃ£ cÃ³ thá»ƒ viáº¿t nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o Ä‘á»‘i tÆ°á»£ng File, Ä‘áº¡i diá»‡n cho táº­p tin cáº§n quÃ©t</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Scanner</span><span style="color:#E06C75;--shiki-dark:#E06C75"> scanner </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Scanner</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"docs/abcd.md"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Táº¡o Ä‘á»‘i tÆ°á»£ng Scanner, Ä‘á»c dá»¯ liá»‡u tá»« táº­p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Pattern</span><span style="color:#E06C75;--shiki-dark:#E06C75"> pattern </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Pattern</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">compile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"op..jdk"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> result</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((result </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">findWithinHorizon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(pattern, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"findWithinHorizon(): "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> result);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>ChÃºng ta sá»­ dá»¥ng biá»ƒu thá»©c chÃ­nh quy pattern Ä‘á»ƒ biá»ƒu diá»…n tá»« khÃ³a <code>openjdk</code>, trong Ä‘Ã³ <code>op..jdk</code> cÃ³ <code>.</code> biá»ƒu thá»‹ báº¥t ká»³ kÃ½ tá»± nÃ o. Báº¡n cÃ³ thá»ƒ tÃ¬m hiá»ƒu thÃªm vá» biá»ƒu thá»©c chÃ­nh quy Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t.</p>
<p>Sau Ä‘Ã³, chÃºng ta sá»­ dá»¥ng vÃ²ng láº·p while Ä‘á»ƒ tÃ¬m táº¥t cáº£ cÃ¡c má»¥c <code>openjdk</code> trong táº­p tin, trong Ä‘Ã³ tham sá»‘ thá»© hai cá»§a phÆ°Æ¡ng thá»©c findWithinHorizon náº¿u lÃ  0 sáº½ biá»ƒu thá»‹ bá» qua giá»›i háº¡n. Náº¿u khÃ´ng tÃ¬m tháº¥y, sáº½ tráº£ vá» null.</p>
<p>VÃ¬ trong táº­p tin cÃ³ hai tá»« khÃ³a openjdk, nÃªn káº¿t quáº£ Ä‘áº§u ra sáº½ nhÆ° sau:</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>findWithinHorizon(): openjdk</span></span>
<span class="line"><span>findWithinHorizon(): openjdk</span></span></code></pre>
</div><h3>04. TÃ³m Táº¯t</h3>
<p>TÃ³m láº¡i, lá»›p Scanner lÃ  má»™t cÃ´ng cá»¥ máº¡nh máº½ Ä‘á»ƒ xá»­ lÃ½ Ä‘áº§u vÃ o, khÃ´ng chá»‰ cÃ³ thá»ƒ quÃ©t Ä‘áº§u vÃ o tá»« bÃ n phÃ­m mÃ  cÃ²n cÃ³ thá»ƒ quÃ©t táº­p tin vÃ  cung cáº¥p nhiá»u phÆ°Æ¡ng thá»©c Ä‘á»ƒ Ä‘á»c cÃ¡c loáº¡i dá»¯ liá»‡u khÃ¡c nhau nhÆ° <code>next()</code>, <code>nextInt()</code>, <code>nextLine()</code>, <code>nextDouble()</code>.</p>
<p>NgoÃ i ra, cÃ²n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>useDelimiter()</code> Ä‘á»ƒ Ä‘áº·t dáº¥u phÃ¢n cÃ¡ch, sá»­ dá»¥ng <code>findInLine()</code>, <code>findWithinHorizon()</code> Ä‘á»ƒ tÃ¬m kiáº¿m má»¥c khá»›p, v.v.</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704192731.png" type="image/png"/>
    </item>
    <item>
      <title>StringUtils</title>
      <link>https://vanhung4499.github.io/programming/java/common-tool/string-utils.html</link>
      <guid>https://vanhung4499.github.io/programming/java/common-tool/string-utils.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">StringUtils</source>
      <description>Apache StringUtils Chuá»—i (String) trong cÃ´ng viá»‡c hÃ ng ngÃ y cá»§a chÃºng ta Ä‘Æ°á»£c sá»­ dá»¥ng ráº¥t, ráº¥t nhiá»u. Trong mÃ£ nguá»“n cá»§a chÃºng ta, thÆ°á»ng xuyÃªn cáº§n pháº£i kiá»ƒm tra chuá»—i rá»—ng, cáº¯t...</description>
      <category>java</category>
      <pubDate>Thu, 04 Jul 2024 09:37:15 GMT</pubDate>
      <content:encoded><![CDATA[
<p><code>Chuá»—i</code> (<a href="/programming/java/string/immutable">String</a>) trong cÃ´ng viá»‡c hÃ ng ngÃ y cá»§a chÃºng ta Ä‘Æ°á»£c sá»­ dá»¥ng ráº¥t, ráº¥t nhiá»u.</p>
<p>Trong mÃ£ nguá»“n cá»§a chÃºng ta, thÆ°á»ng xuyÃªn cáº§n pháº£i kiá»ƒm tra chuá»—i rá»—ng, cáº¯t chuá»—i, chuyá»ƒn Ä‘á»•i chá»¯ hoa, chá»¯ thÆ°á»ng, <a href="/programming/java/string/split">phÃ¢n tÃ¡ch chuá»—i</a>, <a href="/programming/java/string/equals">so sÃ¡nh chuá»—i</a>, loáº¡i bá» khoáº£ng tráº¯ng thá»«a, <a href="/programming/java/string/join">ná»‘i chuá»—i</a>, sá»­ dá»¥ng biá»ƒu thá»©c chÃ­nh quy, v.v.</p>
<p>Náº¿u chá»‰ sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c Ä‘Æ°á»£c cung cáº¥p bá»Ÿi lá»›p String, chÃºng ta sáº½ cáº§n viáº¿t thÃªm ráº¥t nhiá»u mÃ£ phá»¥, náº¿u khÃ´ng dá»… gÃ¢y ra cÃ¡c ngoáº¡i lá»‡ khÃ¡c nhau.</p>
<p>BÃ¢y giá» cÃ³ má»™t tin tá»‘t lÃ : lá»›p tiá»‡n Ã­ch <code>StringUtils</code> trong gÃ³i <code>org.apache.commons.lang3</code> cung cáº¥p cho chÃºng ta ráº¥t nhiá»u lá»±a chá»n phong phÃº.</p>
<p>Cáº¥u hÃ¬nh Maven:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;dependency&gt;</span></span>
<span class="line"><span>    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;</span></span>
<span class="line"><span>    &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;</span></span>
<span class="line"><span>    &lt;version&gt;3.12.0&lt;/version&gt;</span></span>
<span class="line"><span>&lt;/dependency&gt;</span></span></code></pre>
</div><p>StringUtils cung cáº¥p ráº¥t nhiá»u phÆ°Æ¡ng thá»©c há»¯u Ã­ch, cÃ³ khoáº£ng bá»‘n Ä‘áº¿n nÄƒm trang nhÆ° hÃ¬nh dÆ°á»›i Ä‘Ã¢y, tÃ´i chá»‰ chá»¥p hai trang, thá»±c sá»± lÃ  quÃ¡ nhiá»u.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704192812.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Tiáº¿p theo, chÃºng ta sáº½ láº¥y má»™t sá»‘ phÆ°Æ¡ng thá»©c thÆ°á»ng dÃ¹ng Ä‘á»ƒ minh há»a.</p>
<h3>Kiá»ƒm Tra Chuá»—i Rá»—ng</h3>
<p>Thá»±c táº¿, chuá»—i rá»—ng khÃ´ng chá»‰ lÃ  null, mÃ  cÃ²n cÃ³ "", " ", "null", v.v., nhiá»u trÆ°á»ng há»£p khÃ¡c nhau.</p>
<p>StringUtils cung cáº¥p cho chÃºng ta nhiá»u phÆ°Æ¡ng thá»©c tÄ©nh Ä‘á»ƒ kiá»ƒm tra chuá»—i rá»—ng, vÃ­ dá»¥:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> ""</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str3 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> " "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str4 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "abc"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isEmpty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str1));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isEmpty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str2));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isEmpty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str3));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isEmpty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str4));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"====="</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isNotEmpty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str1));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isNotEmpty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str2));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isNotEmpty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str3));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isNotEmpty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str4));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"====="</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isBlank</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str1));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isBlank</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str2));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isBlank</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str3));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isBlank</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str4));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"====="</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isNotBlank</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str1));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isNotBlank</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str2));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isNotBlank</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str3));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isNotBlank</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str4));</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Káº¿t quáº£ thá»±c thi:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">=====</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">=====</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">=====</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong vÃ­ dá»¥: <code>isEmpty</code>, <code>isNotEmpty</code>, <code>isBlank</code> vÃ  <code>isNotBlank</code>, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng 4 phÆ°Æ¡ng thá»©c kiá»ƒm tra chuá»—i rá»—ng nÃ y tÃ¹y theo tÃ¬nh huá»‘ng thá»±c táº¿.</p>
<p>Æ¯u tiÃªn sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c <code>isBlank</code> vÃ  <code>isNotBlank</code> vÃ¬ chÃºng cÅ©ng sáº½ xem xÃ©t chuá»—i <code>" "</code>.</p>
<h3>PhÃ¢n TÃ¡ch Chuá»—i</h3>
<p>PhÃ¢n tÃ¡ch chuá»—i lÃ  má»™t nhu cáº§u phá»• biáº¿n. Náº¿u sá»­ dá»¥ng trá»±c tiáº¿p phÆ°Æ¡ng thá»©c split cá»§a lá»›p String, cÃ³ thá»ƒ gáº·p pháº£i ngoáº¡i lá»‡ con trá» null.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">split</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str1, </span><span style="color:#98C379;--shiki-dark:#98C379">","</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">str1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">split</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">","</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span></code></pre>
</div><p>Káº¿t quáº£ thá»±c thi:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">null</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Exception</span><span style="color:#E06C75;--shiki-dark:#E06C75"> in thread </span><span style="color:#98C379;--shiki-dark:#98C379">"main"</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">lang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NullPointerException</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">\tat </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">com</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">sue</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">jump</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">service</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">test1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UtilTest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UtilTest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">java</span><span style="color:#C678DD;--shiki-dark:#C678DD">:</span><span style="color:#D19A66;--shiki-dark:#D19A66">21</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span></code></pre>
</div><p>Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c split cá»§a StringUtils sáº½ tráº£ vá» null, trong khi sá»­ dá»¥ng phÆ°Æ¡ng thá»©c split cá»§a String sáº½ bÃ¡o lá»—i ngoáº¡i lá»‡ con trá» null.</p>
<h3>Kiá»ƒm Tra Chuá»—i CÃ³ Pháº£i LÃ  Sá»‘ Thuáº§n</h3>
<p>Cho má»™t chuá»—i, Ä‘á»ƒ kiá»ƒm tra nÃ³ cÃ³ pháº£i lÃ  sá»‘ thuáº§n hay khÃ´ng, cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>isNumeric</code>. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "123"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "123q"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str3 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "0.33"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isNumeric</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str1));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isNumeric</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str2));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isNumeric</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str3));</span></span></code></pre>
</div><p>Káº¿t quáº£ thá»±c thi:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">false</span></span></code></pre>
</div><h3>Ná»‘i CÃ¡c Pháº§n Tá»­ Cá»§a Má»™t Táº­p Há»£p ThÃ nh Chuá»—i</h3>
<p>ÄÃ´i khi, chÃºng ta cáº§n ná»‘i ná»™i dung cá»§a má»™t táº­p há»£p thÃ nh má»™t chuá»—i rá»“i xuáº¥t ra, lÃºc nÃ y cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>join</code>. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Lists</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"b"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Lists</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">join</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list, </span><span style="color:#98C379;--shiki-dark:#98C379">","</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">join</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(list2, </span><span style="color:#98C379;--shiki-dark:#98C379">" "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span></code></pre>
</div><p>Káº¿t quáº£ thá»±c thi:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">b</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">c</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 3</span></span></code></pre>
</div><h3>CÃ¡c PhÆ°Æ¡ng Thá»©c KhÃ¡c</h3>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ phÆ°Æ¡ng thá»©c khÃ¡c, báº¡n cÃ³ thá»ƒ tá»± nghiÃªn cá»©u thÃªm.</p>
<ul>
<li><code>trim(String str)</code>ï¼šLoáº¡i bá» khoáº£ng tráº¯ng á»Ÿ Ä‘áº§u vÃ  cuá»‘i chuá»—i.</li>
<li><code>trimToEmpty(String str)</code>ï¼šLoáº¡i bá» khoáº£ng tráº¯ng á»Ÿ Ä‘áº§u vÃ  cuá»‘i chuá»—i, náº¿u chuá»—i lÃ  null, tráº£ vá» chuá»—i rá»—ng.</li>
<li><code>trimToNull(String str)</code>ï¼šLoáº¡i bá» khoáº£ng tráº¯ng á»Ÿ Ä‘áº§u vÃ  cuá»‘i chuá»—i, náº¿u káº¿t quáº£ lÃ  chuá»—i rá»—ng, tráº£ vá» null.</li>
<li><code>equals(String str1, String str2)</code>ï¼šSo sÃ¡nh hai chuá»—i cÃ³ báº±ng nhau hay khÃ´ng.</li>
<li><code>equalsIgnoreCase(String str1, String str2)</code>ï¼šSo sÃ¡nh hai chuá»—i cÃ³ báº±ng nhau hay khÃ´ng, khÃ´ng phÃ¢n biá»‡t chá»¯ hoa vÃ  chá»¯ thÆ°á»ng.</li>
<li><code>startsWith(String str, String prefix)</code>ï¼šKiá»ƒm tra chuá»—i cÃ³ báº¯t Ä‘áº§u báº±ng tiá»n tá»‘ Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh hay khÃ´ng.</li>
<li><code>endsWith(String str, String suffix)</code>ï¼šKiá»ƒm tra chuá»—i cÃ³ káº¿t thÃºc báº±ng háº­u tá»‘ Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh hay khÃ´ng.</li>
<li><code>contains(String str, CharSequence seq)</code>ï¼šKiá»ƒm tra chuá»—i cÃ³ chá»©a chuá»—i con Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh hay khÃ´ng.</li>
<li><code>indexOf(String str, CharSequence seq)</code>ï¼šTráº£ vá» chá»‰ má»¥c cá»§a chuá»—i con Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh xuáº¥t hiá»‡n Ä‘áº§u tiÃªn trong chuá»—i, náº¿u khÃ´ng tÃ¬m tháº¥y, tráº£ vá» -1.</li>
<li><code>lastIndexOf(String str, CharSequence seq)</code>ï¼šTráº£ vá» chá»‰ má»¥c cá»§a chuá»—i con Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh xuáº¥t hiá»‡n láº§n cuá»‘i cÃ¹ng trong chuá»—i, náº¿u khÃ´ng tÃ¬m tháº¥y, tráº£ vá» -1.</li>
<li><code>substring(String str, int start, int end)</code>ï¼šCáº¯t chuá»—i con tá»« vá»‹ trÃ­ báº¯t Ä‘áº§u Ä‘áº¿n vá»‹ trÃ­ káº¿t thÃºc chá»‰ Ä‘á»‹nh.</li>
<li><code>replace(String str, String searchString, String replacement)</code>ï¼šThay tháº¿ táº¥t cáº£ cÃ¡c xuáº¥t hiá»‡n cá»§a chuá»—i tÃ¬m kiáº¿m trong chuá»—i báº±ng chuá»—i thay tháº¿ Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh.</li>
<li><code>replaceAll(String str, String regex, String replacement)</code>ï¼šSá»­ dá»¥ng biá»ƒu thá»©c chÃ­nh quy Ä‘á»ƒ thay tháº¿ táº¥t cáº£ cÃ¡c pháº§n khá»›p trong chuá»—i.</li>
<li><code>join(Iterable&lt;?&gt; iterable, String separator)</code>ï¼šSá»­ dá»¥ng dáº¥u phÃ¢n cÃ¡ch Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh Ä‘á»ƒ ná»‘i cÃ¡c pháº§n tá»­ trong Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ láº·p láº¡i thÃ nh má»™t chuá»—i.</li>
<li><code>split(String str, String separator)</code>ï¼šSá»­ dá»¥ng dáº¥u phÃ¢n cÃ¡ch Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh Ä‘á»ƒ phÃ¢n tÃ¡ch chuá»—i thÃ nh má»™t máº£ng chuá»—i.</li>
<li><code>capitalize(String str)</code>ï¼šChuyá»ƒn kÃ½ tá»± Ä‘áº§u tiÃªn cá»§a chuá»—i thÃ nh chá»¯ hoa.</li>
<li><code>uncapitalize(String str)</code>ï¼šChuyá»ƒn kÃ½ tá»± Ä‘áº§u tiÃªn cá»§a chuá»—i thÃ nh chá»¯ thÆ°á»ng.</li>
</ul>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704192812.png" type="image/png"/>
    </item>
    <item>
      <title>Other Utils</title>
      <link>https://vanhung4499.github.io/programming/java/common-tool/utils.html</link>
      <guid>https://vanhung4499.github.io/programming/java/common-tool/utils.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Other Utils</source>
      <description>Other Utils NgoÃ i cÃ¡c lá»›p tiá»‡n Ã­ch cá»§a Java nhÆ° Arrays, Objects, Collections, Scanner Ä‘Ã£ Ä‘Æ°á»£c Ä‘á» cáº­p trÆ°á»›c Ä‘Ã³, cÃ²n cÃ³ má»™t sá»‘ lá»›p tiá»‡n Ã­ch cá»§a bÃªn thá»© ba nhÆ° Hutool, Guava, vÃ  nh...</description>
      <category>java</category>
      <pubDate>Thu, 04 Jul 2024 09:37:15 GMT</pubDate>
      <content:encoded><![CDATA[<h3>Other Utils</h3>
<p>NgoÃ i cÃ¡c lá»›p tiá»‡n Ã­ch cá»§a Java nhÆ° <a href="/programming/java/common-tool/arrays">Arrays</a>, <a href="/programming/java/common-tool/objects">Objects</a>, <a href="/programming/java/common-tool/collections">Collections</a>, <a href="/programming/java/common-tool/scanner">Scanner</a> Ä‘Ã£ Ä‘Æ°á»£c Ä‘á» cáº­p trÆ°á»›c Ä‘Ã³, cÃ²n cÃ³ má»™t sá»‘ lá»›p tiá»‡n Ã­ch cá»§a bÃªn thá»© ba nhÆ° <a href="/programming/java/common-tool/hutool">Hutool</a>, <a href="/programming/java/common-tool/guava">Guava</a>, vÃ  nhá»¯ng cÃ¡i khÃ¡c nhÆ° IpUtil, CollectionUtils, StringUtils, MDC, ClassUtils, BeanUtils, ReflectionUtils vv., cÃ³ thá»ƒ giÃºp cáº£i thiá»‡n Ä‘Ã¡ng ká»ƒ hiá»‡u suáº¥t sáº£n xuáº¥t cá»§a chÃºng ta.</p>
<p>Táº¥t nhiÃªn, náº¿u báº¡n cÃ³ thá»ƒ xem xÃ©t mÃ£ nguá»“n cá»§a chÃºng, nÃ¢ng cao ká»¹ nÄƒng ká»¹ thuáº­t sáº½ ráº¥t há»¯u Ã­ch.</p>
<h3>IpUtil: Láº¥y Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y local</h3>
<p>Viá»‡c láº¥y Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y local lÃ  má»™t yÃªu cáº§u khÃ¡ phá»• biáº¿n, vÃ­ dá»¥ nhÆ° trong cáº£nh bÃ¡o doanh nghiá»‡p, cÃ³ thá»ƒ kÃ¨m theo Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y gáº·p váº¥n Ä‘á» Ä‘á»ƒ dá»… dÃ ng nhÃ¬n vÃ o nháº­t kÃ½ vÃ  Ä‘á»‹nh vá»‹ váº¥n Ä‘á». Váº­y lÃ m tháº¿ nÃ o Ä‘á»ƒ láº¥y Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y tÃ­nh?</p>
<h4>1. PhÆ°Æ¡ng phÃ¡p cÆ¡ báº£n</h4>
<p>Äá»ƒ láº¥y Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y tÃ­nh, náº¿u báº¡n Ä‘Ã£ hiá»ƒu vá» lá»›p <code>InetAddress</code>, viá»‡c viáº¿t má»™t cÃ´ng cá»¥ Ä‘Æ¡n giáº£n nhÆ° sau dá»… dÃ ng:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getLocalIP</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> InetAddress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getLocalHost</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getHostAddress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UnknownHostException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> RuntimeException</span><span style="color:#E06C75;--shiki-dark:#E06C75">(e)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Viá»‡c triá»ƒn khai trÃªn khÃ´ng cÃ³ váº¥n Ä‘á» gÃ¬.</p>
<h4>2. PhiÃªn báº£n nÃ¢ng cao</h4>
<p>Äá»ƒ láº¥y Ä‘á»‹a chá»‰ IPv4, báº¡n cÃ³ thá»ƒ thá»±c hiá»‡n má»™t sá»‘ thay Ä‘á»•i nhá» trong mÃ£ nguá»“n:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getLocalIpByNetcard</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Láº·p qua táº¥t cáº£ cÃ¡c interface máº¡ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        for</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Enumeration</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NetworkInterface</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> e </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkInterface</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getNetworkInterfaces</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">hasMoreElements</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Láº¥y interface máº¡ng hiá»‡n táº¡i</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            NetworkInterface</span><span style="color:#E06C75;--shiki-dark:#E06C75"> item </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">nextElement</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Láº·p qua táº¥t cáº£ cÃ¡c Ä‘á»‹a chá»‰ cá»§a interface máº¡ng hiá»‡n táº¡i</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            for</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">InterfaceAddress</span><span style="color:#E06C75;--shiki-dark:#E06C75"> address </span><span style="color:#C678DD;--shiki-dark:#C678DD">:</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getInterfaceAddresses</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                // Bá» qua Ä‘á»‹a chá»‰ vÃ²ng láº·p vÃ  cÃ¡c interface máº¡ng chÆ°a kÃ­ch hoáº¡t</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isLoopback</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ||</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> !</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isUp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                    continue</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                // Náº¿u Ä‘á»‹a chá»‰ hiá»‡n táº¡i lÃ  Ä‘á»‹a chá»‰ IPv4, tráº£ vá» Ä‘á»‹a chá»‰ dÆ°á»›i dáº¡ng chuá»—i</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">address</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getAddress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#C678DD;--shiki-dark:#C678DD"> instanceof</span><span style="color:#E06C75;--shiki-dark:#E06C75"> Inet4Address) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                    Inet4Address</span><span style="color:#E06C75;--shiki-dark:#E06C75"> inet4Address </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (Inet4Address) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">address</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getAddress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                    return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> inet4Address</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getHostAddress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Náº¿u khÃ´ng tÃ¬m tháº¥y Ä‘á»‹a chá»‰ IPv4 nÃ o thÃ­ch há»£p, tráº£ vá» Ä‘á»‹a chá»‰ localhost</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> InetAddress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getLocalHost</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getHostAddress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">SocketException</span><span style="color:#E06C75;--shiki-dark:#E06C75"> | </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UnknownHostException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // NÃ©m ra ngoáº¡i lá»‡ cháº¡y khi xáº£y ra lá»—i</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> RuntimeException</span><span style="color:#E06C75;--shiki-dark:#E06C75">(e)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>LÆ°u Ã½ ráº±ng Ä‘oáº¡n mÃ£ nÃ y chá»‰ tráº£ vá» Ä‘á»‹a chá»‰ IPv4 cá»§a mÃ¡y local vÃ  chá»‰ tráº£ vá» Ä‘á»‹a chá»‰ Ä‘áº§u tiÃªn phÃ¹ há»£p. Náº¿u mÃ¡y local cÃ³ nhiá»u interface máº¡ng hoáº·c má»—i interface cÃ³ nhiá»u Ä‘á»‹a chá»‰, cÃ³ thá»ƒ khÃ´ng tráº£ vá» Ä‘á»‹a chá»‰ mong muá»‘n. NgoÃ i ra, náº¿u khÃ´ng tÃ¬m tháº¥y báº¥t ká»³ Ä‘á»‹a chá»‰ IPv4 nÃ o, nÃ³ sáº½ tráº£ vá» Ä‘á»‹a chá»‰ localhost.</p>
<h4>3. Lá»›p tiá»‡n Ã­ch hoÃ n chá»‰nh</h4>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.net.*</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.util.Enumeration</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IPUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> DEFAULT_IP </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "127.0.0.1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * Tráº£ vá» Ä‘á»‹a chá»‰ IPv4 cá»§a mÃ¡y local dá»±a trÃªn Ä‘á»‹a chá»‰ máº¡ng Ä‘áº§u tiÃªn</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     *</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;--shiki-dark:#C678DD;font-style:italic;--shiki-dark-font-style:italic">@return</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> Äá»‹a chá»‰ IPv4 ná»™i bá»™ Ä‘áº§u tiÃªn phÃ¹ há»£p</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getLocalIpByNetcard</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Láº·p qua táº¥t cáº£ cÃ¡c interface máº¡ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Enumeration</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NetworkInterface</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">e</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NetworkInterface</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getNetworkInterfaces</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(); </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">hasMoreElements</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(); ) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                // Láº¥y interface máº¡ng hiá»‡n táº¡i</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                NetworkInterface</span><span style="color:#E06C75;--shiki-dark:#E06C75"> item</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">nextElement</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                // Láº·p qua táº¥t cáº£ cÃ¡c Ä‘á»‹a chá»‰ cá»§a interface máº¡ng hiá»‡n táº¡i</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">InterfaceAddress</span><span style="color:#E06C75;--shiki-dark:#E06C75"> address</span><span style="color:#C678DD;--shiki-dark:#C678DD"> :</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getInterfaceAddresses</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                    // Bá» qua Ä‘á»‹a chá»‰ vÃ²ng láº·p vÃ  cÃ¡c interface máº¡ng chÆ°a kÃ­ch hoáº¡t</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                    if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isLoopback</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">||</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> !</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isUp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                        continue</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                    }</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                    // Náº¿u Ä‘á»‹a chá»‰ hiá»‡n táº¡i lÃ  Ä‘á»‹a chá»‰ IPv4, tráº£ vá» Ä‘á»‹a chá»‰ dÆ°á»›i dáº¡ng chuá»—i</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                    if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">address</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getAddress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() </span><span style="color:#C678DD;--shiki-dark:#C678DD">instanceof</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> Inet4Address) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                        Inet4Address</span><span style="color:#E06C75;--shiki-dark:#E06C75"> inet4Address</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (Inet4Address) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">address</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getAddress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> inet4Address</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getHostAddress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Náº¿u khÃ´ng tÃ¬m tháº¥y Ä‘á»‹a chá»‰ IPv4 phÃ¹ há»£p, tráº£ vá» Ä‘á»‹a chá»‰ localhost</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> InetAddress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getLocalHost</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getHostAddress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">SocketException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> | </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UnknownHostException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> RuntimeException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(e);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * Láº¥y Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y local</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     *</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;--shiki-dark:#C678DD;font-style:italic;--shiki-dark-font-style:italic">@return</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> Äá»‹a chá»‰ IP cá»§a mÃ¡y local</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getLocalIP</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> InetAddress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getLocalHost</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getHostAddress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UnknownHostException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> RuntimeException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(e);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Lá»›p IPUtil cÃ³ Ä‘á»‹nh nghÄ©a hai phÆ°Æ¡ng thá»©c: <code>getLocalIpByNetcard()</code> vÃ  <code>getLocalIP()</code>. PhÆ°Æ¡ng thá»©c Ä‘áº§u tiÃªn lÃ  Ä‘á»ƒ láº¥y Ä‘á»‹a chá»‰ IPv4 ná»™i bá»™ cá»§a mÃ¡y local, trÃ¡nh viá»‡c tráº£ vá» 127.0.0.1. PhÆ°Æ¡ng thá»©c thá»© hai lÃ  Ä‘á»ƒ láº¥y Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y local, náº¿u mÃ¡y local cÃ³ nhiá»u Ä‘á»‹a chá»‰ IP, cÃ³ thá»ƒ tráº£ vá» báº¥t ká»³ Ä‘á»‹a chá»‰ nÃ o trong sá»‘ Ä‘Ã³.</p>
<h3>MDC: Má»™t cÃ´ng cá»¥ lÆ°u truyá»n tham sá»‘ an toÃ n cho luá»“ng</h3>
<p><code>MDC</code> lÃ  má»™t lá»›p trong gÃ³i [<code>org.slf4j</code>], viáº¿t táº¯t cá»§a Mapped Diagnostic Context, cÃ³ thá»ƒ coi lÃ  má»™t bá»™ chá»©a an toÃ n cho cÃ¡c nháº­t kÃ½ cháº©n Ä‘oÃ¡n Ä‘Æ°á»£c lÆ°u trá»¯ trong luá»“ng.</p>
<p>MDC sá»­ dá»¥ng <a href="/programming/java/thread/ThreadLocal.html" target="_blank"><code>ThreadLocal</code></a> Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u á»Ÿ cáº¥p Ä‘á»™ luá»“ng.</p>
<p>ChÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng nÃ³ Ä‘á»ƒ truyá»n tham sá»‘. VÃ­ dá»¥, trong má»™t ká»‹ch báº£n nhÆ° sau: khi sá»­ dá»¥ng <code>RestTemplate</code> Ä‘á»ƒ gá»i má»™t API tá»« xa, Ä‘Ã´i khi cáº§n truyá»n má»™t sá»‘ thÃ´ng tin trong <code>header</code>, vÃ­ dá»¥ nhÆ° traceId, source vÃ  cÃ²n ná»¯a, Ä‘á»ƒ cÃ³ thá»ƒ liÃªn káº¿t toÃ n bá»™ chuá»—i yÃªu cáº§u má»™t cÃ¡ch hoÃ n chá»‰nh khi xem nháº­t kÃ½ vÃ  nhanh chÃ³ng Ä‘á»‹nh vá»‹ váº¥n Ä‘á».</p>
<p>Ká»‹ch báº£n kinh doanh nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c thá»±c hiá»‡n thÃ´ng qua giao diá»‡n <code>ClientHttpRequestInterceptor</code>, cá»¥ thá»ƒ nhÆ° sau:</p>
<p>BÆ°á»›c Ä‘áº§u tiÃªn, Ä‘á»‹nh nghÄ©a má»™t bá»™ lá»c <code>LogFilter</code> Ä‘á»ƒ cháº·n táº¥t cáº£ cÃ¡c yÃªu cáº§u gá»i API vÃ  thiáº¿t láº­p traceId trong MDC:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> LogFilter</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Filter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> doFilter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ServletRequest</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> request</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ServletResponse</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> response</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FilterChain</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> chain</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ServletException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        MdcUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UUID</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">randomUUID</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Ghi nháº­t kÃ½ yÃªu cáº§u"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        chain</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">doFilter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(request, response);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Ghi nháº­t kÃ½ pháº£n há»“i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // CÃ¡c phÆ°Æ¡ng thá»©c khÃ¡c cá»§a Filter khÃ´ng Ä‘Æ°á»£c hiá»ƒn thá»‹ Ä‘á»ƒ ngáº¯n gá»n</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>BÆ°á»›c thá»© hai, triá»ƒn khai <code>ClientHttpRequestInterceptor</code> Ä‘á»ƒ láº¥y traceId hiá»‡n táº¡i tá»« MDC vÃ  thiáº¿t láº­p nÃ³ vÃ o header cá»§a yÃªu cáº§u:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> RestTemplateInterceptor</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ClientHttpRequestInterceptor</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ClientHttpResponse</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> intercept</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">HttpRequest</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> request</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">body</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ClientHttpRequestExecution</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> execution</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        request</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getHeaders</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"traceId"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">MdcUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> execution</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">execute</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(request, body);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>BÆ°á»›c thá»© ba, Ä‘á»‹nh nghÄ©a má»™t lá»›p cáº¥u hÃ¬nh Ä‘á»ƒ cáº¥u hÃ¬nh <code>RestTemplateInterceptor</code> Ä‘Ã£ Ä‘á»‹nh nghÄ©a:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Configuration</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> RestTemplateConfiguration</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Bean</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> RestTemplate</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> restTemplate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        RestTemplate</span><span style="color:#E06C75;--shiki-dark:#E06C75"> restTemplate</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> RestTemplate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        restTemplate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setInterceptors</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">singletonList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">restTemplateInterceptor</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()));</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> restTemplate;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Bean</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> RestTemplateInterceptor</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> restTemplateInterceptor</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> RestTemplateInterceptor</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Trong Ä‘Ã³, <code>MdcUtil</code> thá»±c cháº¥t lÃ  má»™t lá»›p sá»­ dá»¥ng cÃ´ng cá»¥ MDC Ä‘á»ƒ lÆ°u trá»¯ vÃ  truy xuáº¥t traceId trong <code>ThreadLocal</code>:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> MdcUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> TRACE_ID </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "TRACE_ID"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> MDC</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(TRACE_ID);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> value</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        MDC</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(TRACE_ID, value);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Trong vÃ­ dá»¥ nÃ y, chÃºng ta khÃ´ng thá»ƒ tháº¥y cá»¥ thá»ƒ nÆ¡i <code>add</code> phÆ°Æ¡ng thá»©c cá»§a lá»›p MdcUtil Ä‘Æ°á»£c gá»i, thÆ°á»ng thÃ¬ chÃºng ta sáº½ táº¡o traceId trÆ°á»›c khi thá»±c hiá»‡n phÆ°Æ¡ng thá»©c cá»§a giao diá»‡n, thÃªm nÃ³ vÃ o MDC báº±ng cÃ¡ch gá»i <code>add</code> phÆ°Æ¡ng thá»©c cá»§a lá»›p MdcUtil, sau Ä‘Ã³ á»Ÿ cÃ¡c nÆ¡i khÃ¡c cá»§a cÃ¹ng má»™t yÃªu cáº§u, chÃºng ta cÃ³ thá»ƒ láº¥y Ä‘Æ°á»£c traceId nÃ y thÃ´ng qua <code>get</code> phÆ°Æ¡ng thá»©c cá»§a lá»›p MdcUtil.</p>
<p>Viá»‡c sá»­ dá»¥ng MDC Ä‘á»ƒ lÆ°u trá»¯ cÃ¡c tham sá»‘ nhÆ° traceId trong suá»‘t quÃ¡ trÃ¬nh cá»§a yÃªu cáº§u lÃ  vÃ¬, khi yÃªu cáº§u cá»§a ngÆ°á»i dÃ¹ng Ä‘áº¿n mÃ¡y chá»§ á»©ng dá»¥ng, Tomcat sáº½ cáº¥p phÃ¡t má»™t luá»“ng tá»« bá»ƒ luá»“ng Ä‘á»ƒ xá»­ lÃ½ yÃªu cáº§u nÃ y.</p>
<p>Do Ä‘Ã³, cÃ¡c tham sá»‘ Ä‘Æ°á»£c lÆ°u trá»¯ trong MDC, trong ThreadLocal, cÅ©ng chá»‰ thuá»™c vá» luá»“ng Ä‘Ã³, vÃ¬ váº­y khÃ´ng cÃ³ váº¥n Ä‘á» vá» an toÃ n luá»“ng.</p>
<h3>ClassUtils</h3>
<p><code>ClassUtils</code> lÃ  má»™t lá»›p trong gÃ³i <code>org.springframework.util</code> cá»§a Spring, nÃ³ cung cáº¥p nhiá»u chá»©c nÄƒng há»¯u Ã­ch liÃªn quan Ä‘áº¿n lá»›p vÃ  Ä‘á»‘i tÆ°á»£ng.</p>
<h4>Láº¥y táº¥t cáº£ cÃ¡c interface cá»§a Ä‘á»‘i tÆ°á»£ng</h4>
<p>Náº¿u báº¡n muá»‘n láº¥y táº¥t cáº£ cÃ¡c interface cá»§a má»™t Ä‘á»‘i tÆ°á»£ng, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>getAllInterfaces</code> cá»§a <code>ClassUtils</code>. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#C678DD;--shiki-dark:#C678DD">?</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] allInterfaces </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ClassUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getAllInterfaces</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> User</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span></code></pre>
</div><h4>Láº¥y tÃªn gÃ³i cá»§a má»™t lá»›p</h4>
<p>Náº¿u báº¡n muá»‘n láº¥y tÃªn gÃ³i cá»§a má»™t lá»›p, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>getPackageName</code> cá»§a <code>ClassUtils</code>. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> packageName </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ClassUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getPackageName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">User</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(packageName);</span></span></code></pre>
</div><h4>Kiá»ƒm tra xem má»™t lá»›p cÃ³ pháº£i lÃ  lá»›p ná»™i bá»™ khÃ´ng</h4>
<p>Náº¿u báº¡n muá»‘n kiá»ƒm tra xem má»™t lá»›p cÃ³ pháº£i lÃ  lá»›p ná»™i bá»™ khÃ´ng, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>isInnerClass</code> cá»§a <code>ClassUtils</code>. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ClassUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isInnerClass</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">User</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span></code></pre>
</div><h4>Kiá»ƒm tra xem má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ pháº£i lÃ  Ä‘á»‘i tÆ°á»£ng proxy khÃ´ng</h4>
<p>Náº¿u báº¡n muá»‘n kiá»ƒm tra xem má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ pháº£i lÃ  Ä‘á»‘i tÆ°á»£ng proxy khÃ´ng, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>isCglibProxy</code> cá»§a <code>ClassUtils</code>. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ClassUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isCglibProxy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> User</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()));</span></span></code></pre>
</div><p><code>ClassUtils</code> cÃ²n ráº¥t nhiá»u phÆ°Æ¡ng thá»©c há»¯u Ã­ch khÃ¡c Ä‘ang chá» báº¡n khÃ¡m phÃ¡. Náº¿u báº¡n quan tÃ¢m, báº¡n cÃ³ thá»ƒ tÃ¬m hiá»ƒu thÃªm vá» chÃºng.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704192914.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<h3>BeanUtils</h3>
<p>Spring cung cáº¥p cho chÃºng ta má»™t cÃ´ng cá»¥ tiá»‡n Ã­ch cho cÃ¡c JavaBean, náº±m trong gÃ³i <code>org.springframework.beans</code>, Ä‘Æ°á»£c gá»i lÃ  <code>BeanUtils</code>.</p>
<p>HÃ£y cÃ¹ng nhau khÃ¡m phÃ¡ nhá»¯ng Ä‘iá»u báº¥t ngá» mÃ  cÃ´ng cá»¥ nÃ y cÃ³ thá»ƒ mang láº¡i.</p>
<h4>Sao chÃ©p cÃ¡c thuá»™c tÃ­nh cá»§a Ä‘á»‘i tÆ°á»£ng</h4>
<p>ÄÃ´i khi báº¡n cÃ³ nhu cáº§u sao chÃ©p táº¥t cáº£ cÃ¡c thuá»™c tÃ­nh cá»§a má»™t Ä‘á»‘i tÆ°á»£ng sang má»™t Ä‘á»‘i tÆ°á»£ng khÃ¡c. Khi Ä‘Ã³ báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>copyProperties</code> cá»§a <code>BeanUtils</code>. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">User</span><span style="color:#E06C75;--shiki-dark:#E06C75"> user1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> User</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">user1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1L</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">user1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">user1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setAddress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"NY"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">User</span><span style="color:#E06C75;--shiki-dark:#E06C75"> user2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> User</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">BeanUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">copyProperties</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(user1, user2);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(user2);</span></span></code></pre>
</div><h4>Instantiate má»™t lá»›p cá»¥ thá»ƒ</h4>
<p>Náº¿u báº¡n muá»‘n khá»Ÿi táº¡o má»™t Ä‘á»‘i tÆ°á»£ng cá»§a má»™t lá»›p báº±ng pháº£n chiáº¿u, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>instantiateClass</code> cá»§a <code>BeanUtils</code>. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">User</span><span style="color:#E06C75;--shiki-dark:#E06C75"> user </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> BeanUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">instantiateClass</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">User</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(user);</span></span></code></pre>
</div><h4>Láº¥y phÆ°Æ¡ng thá»©c cá»¥ thá»ƒ cá»§a má»™t lá»›p</h4>
<p>Náº¿u báº¡n muá»‘n láº¥y má»™t phÆ°Æ¡ng thá»©c cá»¥ thá»ƒ cá»§a má»™t lá»›p, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>findDeclaredMethod</code> cá»§a <code>BeanUtils</code>. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Method</span><span style="color:#E06C75;--shiki-dark:#E06C75"> declaredMethod </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> BeanUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">findDeclaredMethod</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">User</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"getId"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">declaredMethod</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span></code></pre>
</div><h4>Láº¥y tham sá»‘ cá»§a má»™t phÆ°Æ¡ng thá»©c cá»¥ thá»ƒ</h4>
<p>Náº¿u báº¡n muá»‘n láº¥y cÃ¡c tham sá»‘ cá»§a má»™t phÆ°Æ¡ng thá»©c, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>findPropertyForMethod</code> cá»§a <code>BeanUtils</code>. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Method</span><span style="color:#E06C75;--shiki-dark:#E06C75"> declaredMethod </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> BeanUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">findDeclaredMethod</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">User</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"getId"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">PropertyDescriptor</span><span style="color:#E06C75;--shiki-dark:#E06C75"> propertyForMethod </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> BeanUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">findPropertyForMethod</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(declaredMethod);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">propertyForMethod</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span></code></pre>
</div><p>Náº¿u báº¡n quan tÃ¢m Ä‘áº¿n <code>BeanUtils</code>, báº¡n cÃ³ thá»ƒ tÃ¬m hiá»ƒu thÃªm vá» nÃ³ trong nhá»¯ng ná»™i dung dÆ°á»›i Ä‘Ã¢y:</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704192949.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<h3>ReflectionUtils</h3>
<p>ÄÃ´i khi, chÃºng ta cáº§n sá»­ dá»¥ng tÃ­nh nÄƒng <code>pháº£n xáº¡</code> trong dá»± Ã¡n. Náº¿u sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng phÃ¡p cÆ¡ báº£n Ä‘á»ƒ phÃ¡t triá»ƒn, mÃ£ sáº½ ráº¥t dÃ i vÃ  phá»©c táº¡p, yÃªu cáº§u xá»­ lÃ½ nhiá»u ngoáº¡i lá»‡ vÃ  váº¥n Ä‘á» quyá»n truy cáº­p.</p>
<p>Tin vui lÃ  Spring cung cáº¥p cho chÃºng ta má»™t cÃ´ng cá»¥ tiá»‡n Ã­ch <code>ReflectionUtils</code>, náº±m trong gÃ³i <code>org.springframework.util</code>.</p>
<h4>Láº¥y phÆ°Æ¡ng thá»©c</h4>
<p>Náº¿u báº¡n muá»‘n láº¥y má»™t phÆ°Æ¡ng thá»©c cá»¥ thá»ƒ cá»§a má»™t lá»›p, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>findMethod</code> cá»§a lá»›p <code>ReflectionUtils</code>. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Method</span><span style="color:#E06C75;--shiki-dark:#E06C75"> method </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ReflectionUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">findMethod</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">User</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"getId"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><h4>Láº¥y trÆ°á»ng</h4>
<p>Náº¿u báº¡n muá»‘n láº¥y má»™t trÆ°á»ng cá»¥ thá»ƒ cá»§a má»™t lá»›p, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>findField</code> cá»§a lá»›p <code>ReflectionUtils</code>. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Field</span><span style="color:#E06C75;--shiki-dark:#E06C75"> field </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ReflectionUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">findField</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">User</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><h4>Thá»±c thi phÆ°Æ¡ng thá»©c</h4>
<p>Náº¿u báº¡n muá»‘n gá»i má»™t phÆ°Æ¡ng thá»©c thÃ´ng qua pháº£n xáº¡ vÃ  truyá»n tham sá»‘, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>invokeMethod</code> cá»§a lá»›p <code>ReflectionUtils</code>. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">ReflectionUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">invokeMethod</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(method, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">springContextsUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getBean</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(beanName), param);</span></span></code></pre>
</div><h4>Kiá»ƒm tra xem trÆ°á»ng cÃ³ pháº£i lÃ  háº±ng sá»‘</h4>
<p>Náº¿u báº¡n muá»‘n kiá»ƒm tra xem má»™t trÆ°á»ng cÃ³ pháº£i lÃ  háº±ng sá»‘ khÃ´ng, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>isPublicStaticFinal</code> cá»§a lá»›p <code>ReflectionUtils</code>. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Field</span><span style="color:#E06C75;--shiki-dark:#E06C75"> field </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ReflectionUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">findField</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">User</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ReflectionUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isPublicStaticFinal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(field));</span></span></code></pre>
</div><h4>Kiá»ƒm tra xem phÆ°Æ¡ng thá»©c cÃ³ pháº£i lÃ  phÆ°Æ¡ng thá»©c equals</h4>
<p>Náº¿u báº¡n muá»‘n kiá»ƒm tra xem má»™t phÆ°Æ¡ng thá»©c cÃ³ pháº£i lÃ  phÆ°Æ¡ng thá»©c equals khÃ´ng, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>isEqualsMethod</code> cá»§a lá»›p <code>ReflectionUtils</code>. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Method</span><span style="color:#E06C75;--shiki-dark:#E06C75"> method </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ReflectionUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">findMethod</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">User</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"getId"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ReflectionUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isEqualsMethod</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(method));</span></span></code></pre>
</div><p>Lá»›p nÃ y cÃ²n cÃ³ nhiá»u phÆ°Æ¡ng thá»©c thÃº vá»‹ khÃ¡c. Náº¿u báº¡n quan tÃ¢m, cÃ³ thá»ƒ tÃ¬m hiá»ƒu thÃªm trong cÃ¡c ná»™i dung dÆ°á»›i Ä‘Ã¢y:</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704193001.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240704192914.png" type="image/png"/>
    </item>
    <item>
      <title>Exception Handling Best Practices</title>
      <link>https://vanhung4499.github.io/programming/java/exception/best-practices.html</link>
      <guid>https://vanhung4499.github.io/programming/java/exception/best-practices.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Exception Handling Best Practices</source>
      <description>Exception Handling Best Practices 20 Best Practices Vá» Xá»­ LÃ½ Exception 01. TrÃ¡nh báº¯t RuntimeException náº¿u cÃ³ thá»ƒ Java Development Manual cá»§a Alibaba quy Ä‘á»‹nh nhÆ° sau: TrÃ¡nh báº¯t ...</description>
      <category>java</category>
      <pubDate>Wed, 03 Jul 2024 16:21:43 GMT</pubDate>
      <content:encoded><![CDATA[
<p>20 Best Practices Vá» Xá»­ LÃ½ Exception</p>
<h3>01. TrÃ¡nh báº¯t RuntimeException náº¿u cÃ³ thá»ƒ</h3>
<p>Java Development Manual cá»§a Alibaba quy Ä‘á»‹nh nhÆ° sau:</p>
<blockquote>
<p>TrÃ¡nh báº¯t RuntimeException náº¿u cÃ³ thá»ƒ, cháº³ng háº¡n nhÆ° NullPointerException, IndexOutOfBoundsException, v.v. NÃªn sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p kiá»ƒm tra trÆ°á»›c Ä‘á»ƒ ngÄƒn ngá»«a.</p>
</blockquote>
<p>VÃ­ dá»¥ Ä‘Ãºng:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (obj </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  //...</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>VÃ­ dá»¥ sai:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> { </span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">  obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">method</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#E06C75;--shiki-dark:#E06C75"> </span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NullPointerException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  //...</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Váº­y náº¿u cÃ³ nhá»¯ng exception mÃ  khÃ´ng thá»ƒ kiá»ƒm tra trÆ°á»›c thÃ¬ sao?</p>
<p>Thá»±c táº¿ sáº½ cÃ³ nhá»¯ng trÆ°á»ng há»£p nhÆ° váº­y, cháº³ng háº¡n nhÆ° NumberFormatException, máº·c dÃ¹ cÅ©ng thuá»™c RuntimeException nhÆ°ng khÃ´ng thá»ƒ kiá»ƒm tra trÆ°á»›c, vÃ¬ váº­y váº«n nÃªn sá»­ dá»¥ng catch Ä‘á»ƒ báº¯t vÃ  xá»­ lÃ½.</p>
<h3>02. Cá»‘ gáº¯ng sá»­ dá»¥ng try-with-resource Ä‘á»ƒ Ä‘Ã³ng tÃ i nguyÃªn</h3>
<p>Khi cáº§n Ä‘Ã³ng tÃ i nguyÃªn, trÃ¡nh sá»­ dá»¥ng try-catch-finally, vÃ  khÃ´ng Ä‘Ã³ng tÃ i nguyÃªn trá»±c tiáº¿p trong khá»‘i try.</p>
<p>VÃ­ dá»¥ sai:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> doNotCloseResourceInTry</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> inputStream </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"./tmp.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        inputStream </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(file)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        inputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">error</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(e);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">error</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(e);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Táº¡i sao láº¡i nhÆ° váº­y?</p>
<p>LÃ½ do ráº¥t Ä‘Æ¡n giáº£n, vÃ¬ náº¿u xáº£y ra exception trÆ°á»›c khi <code>close()</code>, tÃ i nguyÃªn sáº½ khÃ´ng Ä‘Æ°á»£c Ä‘Ã³ng. Sá»­ dá»¥ng <a href="https://javabetter.cn/exception/try-with-resources.html" target="_blank" rel="noopener noreferrer">try-with-resource</a> Ä‘á»ƒ xá»­ lÃ½ lÃ  cÃ¡ch tá»‘t nháº¥t.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> automaticallyCloseResource</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"./tmp.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> inputStream </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(file)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">error</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(e);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">error</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(e);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Trá»« khi tÃ i nguyÃªn khÃ´ng triá»ƒn khai interface AutoCloseable. HÃ£y Ä‘Ã³ng tÃ i nguyÃªn trong khá»‘i finally.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> closeResourceInFinally</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> inputStream </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"./tmp.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        inputStream </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(file)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">error</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(e);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">finally</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (inputStream </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                inputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">error</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(e);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>03. KhÃ´ng báº¯t Throwable</h3>
<p>Throwable lÃ  cha cá»§a exception vÃ  error, náº¿u báº¯t Throwable trong khá»‘i catch, cÃ³ thá»ƒ báº¯t luÃ´n cáº£ nhá»¯ng lá»—i vÆ°á»£t quÃ¡ kháº£ nÄƒng xá»­ lÃ½ cá»§a chÆ°Æ¡ng trÃ¬nh.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> doNotCatchThrowable</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Throwable</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> t</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Äá»«ng lÃ m tháº¿ nÃ y</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Táº¡i sao láº¡i nhÆ° váº­y?</p>
<p>VÃ¬ cÃ³ nhá»¯ng lá»—i khÃ´ng cáº§n chÆ°Æ¡ng trÃ¬nh xá»­ lÃ½ vÃ  chÆ°Æ¡ng trÃ¬nh cÅ©ng khÃ´ng thá»ƒ xá»­ lÃ½ Ä‘Æ°á»£c, nhÆ° OutOfMemoryError hoáº·c StackOverflowError. OutOfMemoryError xáº£y ra khi Java VM khÃ´ng thá»ƒ yÃªu cáº§u Ä‘á»§ khÃ´ng gian bá»™ nhá»›, cÃ²n StackOverflowError xáº£y ra khi Ä‘á»™ sÃ¢u cá»§a stack mÃ  má»™t thread yÃªu cáº§u vÆ°á»£t quÃ¡ Ä‘á»™ sÃ¢u tá»‘i Ä‘a cho phÃ©p. Náº¿u báº¯t chÃºng, sáº½ che giáº¥u nhá»¯ng lá»—i nghiÃªm trá»ng mÃ  chÆ°Æ¡ng trÃ¬nh cáº§n phÃ¡t hiá»‡n.</p>
<p>VÃ­ dá»¥ nhÆ° má»™t con ngá»±a chá»‰ cÃ³ thá»ƒ kÃ©o má»™t toa hÃ ng, náº¿u kÃ©o hai toa cÃ³ thá»ƒ sáº½ gá»¥c ngÃ£, nhÆ°ng náº¿u báº¯t lá»—i, sáº½ khÃ´ng phÃ¡t hiá»‡n ra váº¥n Ä‘á».</p>
<h3>04. KhÃ´ng bá» qua viá»‡c ghi láº¡i thÃ´ng tin exception</h3>
<p>Nhiá»u khi, do báº¥t cáº©n, chÃºng ta dá»… dÃ ng báº¯t exception mÃ  khÃ´ng ghi láº¡i thÃ´ng tin exception, dáº«n Ä‘áº¿n viá»‡c khi chÆ°Æ¡ng trÃ¬nh gáº·p sá»± cá»‘ tháº­t sá»±, khÃ´ng cÃ³ thÃ´ng tin ghi láº¡i Ä‘á»ƒ kiá»ƒm tra.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> doNotIgnoreExceptions</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NumberFormatException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // KhÃ´ng ghi láº¡i exception</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>NÃªn ghi láº¡i thÃ´ng tin lá»—i.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> logAnException</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NumberFormatException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">error</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Ã”i, lá»—i Ä‘Ã£ xáº£y ra: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> e);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><h3>05. KhÃ´ng ghi láº¡i exception rá»“i láº¡i nÃ©m ra exception</h3>
<p>Äiá»u nÃ y hoÃ n toÃ n thá»«a thÃ£i vÃ  dá»… gÃ¢y ra sá»± nháº§m láº«n vá» thÃ´ng tin lá»—i.</p>
<p>VÃ­ dá»¥ sai:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NumberFormatException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">error</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(e);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    throw</span><span style="color:#E06C75;--shiki-dark:#E06C75"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Náº¿u nÃ©m ra exception thÃ¬ hÃ£y nÃ©m ra, khÃ´ng cáº§n ghi láº¡i. Ghi láº¡i rá»“i nÃ©m ra cÅ©ng giá»‘ng nhÆ° thá»«a thÃ£i.</p>
<p>VÃ­ dá»¥ sai:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> wrapException</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> input) throws MyBusinessException {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NumberFormatException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> MyBusinessException</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ThÃ´ng tin lá»—i: "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> e)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Äiá»u nÃ y cÅ©ng tÆ°Æ¡ng tá»±, Ä‘Ã£ báº¯t exception thÃ¬ khÃ´ng cáº§n nÃ©m ra trong chá»¯ kÃ½ phÆ°Æ¡ng thá»©c.</p>
<h3>06. KhÃ´ng sá»­ dá»¥ng return trong khá»‘i finally</h3>
<p>Java Development Manual cá»§a Alibaba quy Ä‘á»‹nh nhÆ° sau:</p>
<blockquote>
<p>Khi cÃ¢u lá»‡nh return trong khá»‘i try thá»±c thi thÃ nh cÃ´ng, sáº½ khÃ´ng tráº£ vá» ngay láº­p tá»©c, mÃ  sáº½ tiáº¿p tá»¥c thá»±c thi cÃ¡c cÃ¢u lá»‡nh trong khá»‘i finally. Náº¿u trong khá»‘i finally cÅ©ng cÃ³ cÃ¢u lá»‡nh return, thÃ¬ cÃ¢u lá»‡nh return trong khá»‘i try sáº½ bá»‹ ghi Ä‘Ã¨.</p>
</blockquote>
<p>VÃ­ dá»¥ sai:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> x </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> checkReturn</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ++</span><span style="color:#E06C75;--shiki-dark:#E06C75">x</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">finally</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ++</span><span style="color:#E06C75;--shiki-dark:#E06C75">x</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>GiÃ¡ trá»‹ cá»§a x tráº£ vá» tá»« khá»‘i try lÃ  1, nhÆ°ng Ä‘áº¿n khá»‘i finally láº¡i tráº£ vá» 2.</p>
<h3>07. NÃ©m ra cÃ¡c exception kiá»ƒm tra cá»¥ thá»ƒ thay vÃ¬ Exception</h3>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> foo</span><span style="color:#E06C75;--shiki-dark:#E06C75">() throws Exception { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// CÃ¡ch sai</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Nháº¥t Ä‘á»‹nh pháº£i trÃ¡nh xuáº¥t hiá»‡n Ä‘oáº¡n mÃ£ nhÆ° trÃªn, nÃ³ phÃ¡ vá»¡ má»¥c Ä‘Ã­ch cá»§a exception kiá»ƒm tra (checked exception). PhÆ°Æ¡ng thá»©c Ä‘Æ°á»£c khai bÃ¡o nÃªn nÃ©m ra cÃ¡c exception kiá»ƒm tra cá»¥ thá»ƒ.</p>
<p>VÃ­ dá»¥, náº¿u má»™t phÆ°Æ¡ng thá»©c cÃ³ thá»ƒ nÃ©m ra exception SQLException, nÃªn khai bÃ¡o rÃµ rÃ ng nÃ©m ra SQLException thay vÃ¬ exception kiá»ƒu Exception. NhÆ° váº­y, cÃ¡c nhÃ  phÃ¡t triá»ƒn khÃ¡c cÃ³ thá»ƒ hiá»ƒu rÃµ hÆ¡n Ã½ Ä‘á»‹nh vÃ  cÃ¡ch xá»­ lÃ½ exception cá»§a mÃ£, vÃ  cÃ³ thá»ƒ xÃ¡c Ä‘á»‹nh cÃ¡ch xá»­ lÃ½ vÃ  chiáº¿n lÆ°á»£c dá»±a trÃªn Ä‘á»‹nh nghÄ©a vÃ  tÃ i liá»‡u cá»§a SQLException.</p>
<h3>08. Báº¯t cÃ¡c lá»›p con cá»¥ thá»ƒ thay vÃ¬ báº¯t lá»›p Exception</h3>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">   someMethod</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Exception</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// CÃ¡ch sai</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">   LOGGER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">error</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"method has failed"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, e);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Náº¿u trong khá»‘i catch báº¯t exception kiá»ƒu Exception, sáº½ báº¯t táº¥t cáº£ cÃ¡c loáº¡i exception, dáº«n Ä‘áº¿n cÃ¡c váº¥n Ä‘á» khÃ´ng cáº§n thiáº¿t cho chÆ°Æ¡ng trÃ¬nh. Cá»¥ thá»ƒ, náº¿u báº¯t exception kiá»ƒu Exception, cÃ³ thá»ƒ dáº«n Ä‘áº¿n cÃ¡c váº¥n Ä‘á» sau:</p>
<ul>
<li>KhÃ³ nháº­n diá»‡n vÃ  Ä‘á»‹nh vá»‹ exception: Náº¿u báº¯t exception kiá»ƒu Exception, cÃ³ thá»ƒ sáº½ báº¯t nhá»¯ng exception khÃ´ng nÃªn Ä‘Æ°á»£c xá»­ lÃ½, dáº«n Ä‘áº¿n viá»‡c chÆ°Æ¡ng trÃ¬nh khÃ³ nháº­n diá»‡n vÃ  Ä‘á»‹nh vá»‹ exception.</li>
<li>KhÃ³ gá»¡ lá»—i vÃ  sá»­a lá»—i: Náº¿u báº¯t exception kiá»ƒu Exception, cÃ³ thá»ƒ lÃ m cho viá»‡c gá»¡ lá»—i vÃ  sá»­a lá»—i trá»Ÿ nÃªn khÃ³ khÄƒn hÆ¡n, vÃ¬ khÃ´ng thá»ƒ xÃ¡c Ä‘á»‹nh loáº¡i exception cá»¥ thá»ƒ vÃ  nguyÃªn nhÃ¢n xáº£y ra exception.</li>
</ul>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ Ä‘á»ƒ minh há»a táº¡i sao nÃªn báº¯t cÃ¡c lá»›p con cá»¥ thá»ƒ thay vÃ¬ exception kiá»ƒu Exception.</p>
<p>Giáº£ sá»­ chÃºng ta cÃ³ má»™t phÆ°Æ¡ng thá»©c <code>readFromFile(String filePath)</code>, dÃ¹ng Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u tá»« má»™t tá»‡p chá»‰ Ä‘á»‹nh. Trong quÃ¡ trÃ¬nh thá»±c hiá»‡n phÆ°Æ¡ng thá»©c, cÃ³ thá»ƒ xuáº¥t hiá»‡n hai loáº¡i exception: FileNotFoundException vÃ  IOException.</p>
<p>Náº¿u trong phÆ°Æ¡ng thá»©c sá»­ dá»¥ng khá»‘i catch sau Ä‘á»ƒ báº¯t exception:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // MÃ£ Ä‘á»c dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Exception</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // MÃ£ xá»­ lÃ½ exception</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>CÃ¡ch lÃ m nÃ y sáº½ báº¯t táº¥t cáº£ cÃ¡c loáº¡i exception, bao gá»“m cáº£ Checked Exception vÃ  Unchecked Exception. Äiá»u nÃ y cÃ³ thá»ƒ dáº«n Ä‘áº¿n cÃ¡c váº¥n Ä‘á» sau:</p>
<ul>
<li>Khi xáº£y ra exception kiá»ƒu RuntimeException, cÅ©ng sáº½ bá»‹ báº¯t, dáº«n Ä‘áº¿n viá»‡c che giáº¥u thÃ´ng tin exception thá»±c sá»±.</li>
<li>Khi gá»¡ lá»—i vÃ  sá»­a lá»—i, khÃ´ng thá»ƒ xÃ¡c Ä‘á»‹nh loáº¡i exception cá»¥ thá»ƒ vÃ  nguyÃªn nhÃ¢n xáº£y ra exception, tÄƒng Ä‘á»™ khÃ³ khÄƒn trong viá»‡c gá»¡ lá»—i vÃ  sá»­a lá»—i.</li>
<li>Khi chÆ°Æ¡ng trÃ¬nh cháº¡y, cÃ³ thá»ƒ báº¯t má»™t sá»‘ exception khÃ´ng cáº§n thiáº¿t pháº£i xá»­ lÃ½ (nhÆ° NullPointerException, IllegalArgumentException, v.v.), dáº«n Ä‘áº¿n giáº£m hiá»‡u suáº¥t vÃ  á»•n Ä‘á»‹nh cá»§a chÆ°Æ¡ng trÃ¬nh.</li>
</ul>
<p>Do Ä‘Ã³, Ä‘á»ƒ Ä‘á»‹nh vá»‹ vÃ  xá»­ lÃ½ exception tá»‘t hÆ¡n, nÃªn báº¯t cÃ¡c lá»›p con cá»¥ thá»ƒ, vÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // MÃ£ Ä‘á»c dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // MÃ£ xá»­ lÃ½ exception tá»‡p khÃ´ng tÃ¬m tháº¥y</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // MÃ£ xá»­ lÃ½ exception Ä‘áº§u vÃ o/Ä‘áº§u ra</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>CÃ¡ch lÃ m nÃ y giÃºp báº¯t exception chÃ­nh xÃ¡c hÆ¡n, tá»« Ä‘Ã³ cáº£i thiá»‡n Ä‘á»™ bá»n vá»¯ng vÃ  á»•n Ä‘á»‹nh cá»§a chÆ°Æ¡ng trÃ¬nh.</p>
<h3>09. Khi tá»± Ä‘á»‹nh nghÄ©a exception, Ä‘á»«ng bá» qua theo dÃµi ngÄƒn xáº¿p</h3>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NoSuchMethodException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">   throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> MyServiceException</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Some information: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getMessage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  // CÃ¡ch sai</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Äiá»u nÃ y phÃ¡ vá»¡ theo dÃµi ngÄƒn xáº¿p cá»§a exception gá»‘c, cÃ¡ch Ä‘Ãºng lÃ :</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NoSuchMethodException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">   throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> MyServiceException</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Some information: "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> e)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  // CÃ¡ch Ä‘Ãºng</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>VÃ­ dá»¥, dÆ°á»›i Ä‘Ã¢y lÃ  má»™t lá»›p exception tá»± Ä‘á»‹nh nghÄ©a, nÃ³ ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c <code>printStackTrace()</code> Ä‘á»ƒ in thÃ´ng tin theo dÃµi ngÄƒn xáº¿p:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> MyException</span><span style="color:#C678DD;--shiki-dark:#C678DD"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> MyException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> message</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Throwable</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> cause</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        super</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(message, cause);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">err</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"MyException:"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        super</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>CÃ¡ch lÃ m nÃ y giÃºp giá»¯ láº¡i thÃ´ng tin theo dÃµi ngÄƒn xáº¿p, Ä‘á»“ng thá»i cung cáº¥p thÃ´ng tin exception tá»± Ä‘á»‹nh nghÄ©a. Khi nÃ©m ra exception MyException, báº¡n cÃ³ thá»ƒ nháº­n Ä‘Æ°á»£c thÃ´ng tin theo dÃµi ngÄƒn xáº¿p Ä‘áº§y Ä‘á»§, giÃºp Ä‘á»‹nh vá»‹ vÃ  giáº£i quyáº¿t exception tá»‘t hÆ¡n.</p>
<h3>10. Äá»«ng nÃ©m ra báº¥t ká»³ exception nÃ o trong khá»‘i finally</h3>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  someMethod</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  // NÃ©m ra exceptionOne</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">finally</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  cleanUp</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Náº¿u finally cÅ©ng nÃ©m ra exception, thÃ¬ exceptionOne sáº½ bá»‹ máº¥t</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Khá»‘i finally Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘á»‹nh nghÄ©a má»™t Ä‘oáº¡n mÃ£, dÃ¹ khá»‘i try cÃ³ xuáº¥t hiá»‡n exception hay khÃ´ng, thÃ¬ Ä‘oáº¡n mÃ£ nÃ y váº«n sáº½ Ä‘Æ°á»£c thá»±c thi. Khá»‘i finally thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ giáº£i phÃ³ng tÃ i nguyÃªn, Ä‘Ã³ng tá»‡p vÃ  cÃ¡c thao tÃ¡c cáº§n thiáº¿t khÃ¡c.</p>
<p>Náº¿u trong khá»‘i finally nÃ©m ra exception, cÃ³ thá»ƒ dáº«n Ä‘áº¿n viá»‡c exception gá»‘c bá»‹ che giáº¥u. VÃ­ dá»¥, trong Ä‘oáº¡n mÃ£ trÃªn, náº¿u cleanup nÃ©m ra exception, thÃ¬ exception trong someMethod sáº½ bá»‹ ghi Ä‘Ã¨.</p>
<h3>11. Äá»«ng sá»­ dá»¥ng <code>printStackTrace()</code> trong mÃ´i trÆ°á»ng sáº£n xuáº¥t</h3>
<p>Trong Java, phÆ°Æ¡ng thá»©c <code>printStackTrace()</code> Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xuáº¥t thÃ´ng tin theo dÃµi ngÄƒn xáº¿p cá»§a exception ra luá»“ng lá»—i chuáº©n. PhÆ°Æ¡ng thá»©c nÃ y ráº¥t há»¯u Ã­ch cho viá»‡c gá»¡ lá»—i vÃ  sá»­a lá»—i. Tuy nhiÃªn, trong mÃ´i trÆ°á»ng sáº£n xuáº¥t, khÃ´ng nÃªn sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>printStackTrace()</code>, vÃ¬ nÃ³ cÃ³ thá»ƒ gÃ¢y ra cÃ¡c váº¥n Ä‘á» sau:</p>
<ul>
<li>PhÆ°Æ¡ng thá»©c <code>printStackTrace()</code> sáº½ xuáº¥t thÃ´ng tin theo dÃµi ngÄƒn xáº¿p cá»§a exception ra luá»“ng lá»—i chuáº©n, cÃ³ thá»ƒ lÃ m lá»™ thÃ´ng tin nháº¡y cáº£m nhÆ° Ä‘Æ°á»ng dáº«n tá»‡p, tÃªn ngÆ°á»i dÃ¹ng, máº­t kháº©u, v.v.</li>
<li>PhÆ°Æ¡ng thá»©c <code>printStackTrace()</code> sáº½ xuáº¥t thÃ´ng tin theo dÃµi ngÄƒn xáº¿p ra luá»“ng lá»—i chuáº©n, cÃ³ thá»ƒ áº£nh hÆ°á»Ÿng Ä‘áº¿n hiá»‡u suáº¥t vÃ  Ä‘á»™ á»•n Ä‘á»‹nh cá»§a chÆ°Æ¡ng trÃ¬nh. Trong mÃ´i trÆ°á»ng sáº£n xuáº¥t cÃ³ Ä‘á»™ táº£i cao, lÆ°á»£ng lá»›n thÃ´ng tin theo dÃµi ngÄƒn xáº¿p cá»§a exception cÃ³ thá»ƒ dáº«n Ä‘áº¿n há»‡ thá»‘ng bá»‹ treo hoáº·c xuáº¥t hiá»‡n hÃ nh vi khÃ´ng mong muá»‘n.</li>
<li>VÃ¬ mÃ´i trÆ°á»ng sáº£n xuáº¥t thÆ°á»ng lÃ  há»‡ thá»‘ng phá»©c táº¡p Ä‘a luá»“ng, phÃ¢n tÃ¡n, thÃ´ng tin theo dÃµi ngÄƒn xáº¿p Ä‘Æ°á»£c xuáº¥t ra bá»Ÿi phÆ°Æ¡ng thá»©c <code>printStackTrace()</code> cÃ³ thá»ƒ khÃ´ng Ä‘áº§y Ä‘á»§ hoáº·c khÃ´ng chÃ­nh xÃ¡c.</li>
</ul>
<p>Trong mÃ´i trÆ°á»ng sáº£n xuáº¥t, nÃªn sá»­ dá»¥ng há»‡ thá»‘ng nháº­t kÃ½ Ä‘á»ƒ ghi láº¡i thÃ´ng tin exception, vÃ­ dá»¥ nhÆ° <a href="/tools/log4j.html" target="_blank">log4j</a>, <a href="/tools/slf4j.html" target="_blank">slf4j</a>, <a href="/tools/logback.html" target="_blank">logback</a>, v.v. Há»‡ thá»‘ng nháº­t kÃ½ cÃ³ thá»ƒ ghi láº¡i thÃ´ng tin exception vÃ o tá»‡p hoáº·c cÆ¡ sá»Ÿ dá»¯ liá»‡u, mÃ  khÃ´ng lÃ m lá»™ thÃ´ng tin nháº¡y cáº£m vÃ  khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n hiá»‡u suáº¥t vÃ  Ä‘á»™ á»•n Ä‘á»‹nh cá»§a chÆ°Æ¡ng trÃ¬nh. Äá»“ng thá»i, há»‡ thá»‘ng nháº­t kÃ½ cÅ©ng cung cáº¥p nhiá»u chá»©c nÄƒng hÆ¡n nhÆ° kiá»ƒm soÃ¡t cáº¥p Ä‘á»™, nháº­t kÃ½ cuá»™n, thÃ´ng bÃ¡o qua email, v.v.</p>
<p>VÃ­ dá»¥, cÃ³ thá»ƒ sá»­ dá»¥ng logback Ä‘á»ƒ ghi láº¡i thÃ´ng tin exception nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // some code</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Exception</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    logger</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">error</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"An error occurred: "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, e);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><h3>12. Äá»‘i vá»›i cÃ¡c exception khÃ´ng Ä‘á»‹nh xá»­ lÃ½, chá»‰ sá»­ dá»¥ng try-finally mÃ  khÃ´ng dÃ¹ng catch</h3>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  method1</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  // Sáº½ gá»i Method 2</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">finally</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  cleanUp</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  // Thá»±c hiá»‡n dá»n dáº¹p á»Ÿ Ä‘Ã¢y</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Náº¿u method1 Ä‘ang gá»i Method 2, vÃ  Method 2 nÃ©m ra má»™t exception mÃ  báº¡n khÃ´ng muá»‘n xá»­ lÃ½ trong Method 1, nhÆ°ng váº«n muá»‘n thá»±c hiá»‡n má»™t sá»‘ viá»‡c dá»n dáº¹p khi xáº£y ra exception, báº¡n cÃ³ thá»ƒ thá»±c hiá»‡n viá»‡c dá»n dáº¹p trá»±c tiáº¿p trong khá»‘i finally mÃ  khÃ´ng cáº§n sá»­ dá»¥ng khá»‘i catch.</p>
<h3>13. Ghi nhá»› nguyÃªn táº¯c "nÃ©m sá»›m, báº¯t muá»™n"</h3>
<p>"nÃ©m sá»›m, báº¯t muá»™n" lÃ  má»™t nguyÃªn táº¯c xá»­ lÃ½ exception trong Java. NguyÃªn táº¯c nÃ y cÃ³ nghÄ©a lÃ  nÃ©m exception cÃ ng sá»›m cÃ ng tá»‘t trong mÃ£ nguá»“n Ä‘á»ƒ cÃ³ thá»ƒ xá»­ lÃ½ ká»‹p thá»i khi xáº£y ra exception. Äá»“ng thá»i, cá»‘ gáº¯ng báº¯t exception muá»™n nháº¥t cÃ³ thá»ƒ trong khá»‘i catch Ä‘á»ƒ cÃ³ Ä‘Æ°á»£c nhiá»u thÃ´ng tin ngá»¯ cáº£nh hÆ¡n, tá»« Ä‘Ã³ xá»­ lÃ½ exception tá»‘t hÆ¡n.</p>
<p>HÃ£y xem má»™t vÃ­ dá»¥ vá» "nÃ©m sá»›m", náº¿u má»™t phÆ°Æ¡ng thá»©c cáº§n truyá»n tham sá»‘ vÃ  tham sá»‘ Ä‘Ã³ pháº£i Ä‘Ã¡p á»©ng má»™t sá»‘ Ä‘iá»u kiá»‡n nháº¥t Ä‘á»‹nh, náº¿u tham sá»‘ khÃ´ng thá»a mÃ£n Ä‘iá»u kiá»‡n, thÃ¬ nÃªn nÃ©m exception ngay láº­p tá»©c thay vÃ¬ thá»±c hiá»‡n cÃ¡c thao tÃ¡c khÃ¡c trong phÆ°Æ¡ng thá»©c. Äiá»u nÃ y Ä‘áº£m báº£o exception Ä‘Æ°á»£c xá»­ lÃ½ ká»‹p thá»i khi xáº£y ra, trÃ¡nh cÃ¡c váº¥n Ä‘á» nghiÃªm trá»ng hÆ¡n.</p>
<p>Tiáº¿p theo lÃ  má»™t vÃ­ dá»¥ vá» "báº¯t muá»™n", náº¿u má»™t phÆ°Æ¡ng thá»©c gá»i cÃ¡c phÆ°Æ¡ng thá»©c khÃ¡c vÃ  cÃ³ thá»ƒ nÃ©m ra exception, náº¿u báº¯t exception ngay trong phÆ°Æ¡ng thá»©c, Ä‘iá»u nÃ y cÃ³ thá»ƒ dáº«n Ä‘áº¿n viá»‡c xá»­ lÃ½ exception khÃ´ng Ä‘áº§y Ä‘á»§.</p>
<p>Xem Ä‘oáº¡n mÃ£ sau:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ExceptionDemo1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Scanner</span><span style="color:#E06C75;--shiki-dark:#E06C75"> sc</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Scanner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> sc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">nextLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> num</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> parseInt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Káº¿t quáº£ chuyá»ƒn Ä‘á»•i: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> num);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NumberFormatException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Chuyá»ƒn Ä‘á»•i tháº¥t báº¡i: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getMessage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> parseInt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> str</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (str </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ||</span><span style="color:#98C379;--shiki-dark:#98C379"> ""</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">equals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str)) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> NullPointerException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Chuá»—i trá»‘ng"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">str</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">matches</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\\</span><span style="color:#98C379;--shiki-dark:#98C379">d+"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> NumberFormatException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Chuá»—i khÃ´ng pháº£i lÃ  sá»‘"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">parseInt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong vÃ­ dá»¥ nÃ y, phÆ°Æ¡ng thá»©c <code>parseInt()</code> Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a Ä‘á»ƒ chuyá»ƒn Ä‘á»•i chuá»—i thÃ nh sá»‘ nguyÃªn. Trong phÆ°Æ¡ng thá»©c nÃ y, Ä‘áº§u tiÃªn kiá»ƒm tra xem chuá»—i cÃ³ trá»‘ng khÃ´ng, náº¿u trá»‘ng thÃ¬ nÃ©m exception NullPointerException ngay láº­p tá»©c. Sau Ä‘Ã³, kiá»ƒm tra chuá»—i cÃ³ pháº£i lÃ  sá»‘ khÃ´ng, náº¿u khÃ´ng pháº£i sá»‘ thÃ¬ nÃ©m exception NumberFormatException. Cuá»‘i cÃ¹ng, sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>Integer.parseInt()</code> Ä‘á»ƒ chuyá»ƒn Ä‘á»•i chuá»—i thÃ nh sá»‘ nguyÃªn vÃ  tráº£ vá».</p>
<p>Trong phÆ°Æ¡ng thá»©c <code>main()</code> cá»§a vÃ­ dá»¥, gá»i phÆ°Æ¡ng thá»©c <code>parseInt()</code> vÃ  sá»­ dá»¥ng khá»‘i try-catch Ä‘á»ƒ báº¯t exception NumberFormatException cÃ³ thá»ƒ bá»‹ nÃ©m ra. Náº¿u chuyá»ƒn Ä‘á»•i thÃ nh cÃ´ng, in ra káº¿t quáº£ chuyá»ƒn Ä‘á»•i, náº¿u khÃ´ng thÃ¬ in ra thÃ´ng tin chuyá»ƒn Ä‘á»•i tháº¥t báº¡i.</p>
<p>VÃ­ dá»¥ nÃ y Ã¡p dá»¥ng nguyÃªn táº¯c "nÃ©m sá»›m, báº¯t muá»™n", trong phÆ°Æ¡ng thá»©c <code>parseInt()</code> nÃ©m exception cÃ ng sá»›m cÃ ng tá»‘t, trong phÆ°Æ¡ng thá»©c <code>main()</code> báº¯t exception cÃ ng muá»™n cÃ ng tá»‘t Ä‘á»ƒ cÃ³ Ä‘Æ°á»£c nhiá»u thÃ´ng tin ngá»¯ cáº£nh hÆ¡n, tá»« Ä‘Ã³ xá»­ lÃ½ exception tá»‘t hÆ¡n.</p>
<p>Cháº¡y vÃ­ dá»¥ nÃ y, náº¿u nháº­p vÃ o má»™t chuá»—i sá»‘, cÃ³ thá»ƒ tháº¥y káº¿t quáº£ chuyá»ƒn Ä‘á»•i Ä‘Æ°á»£c in ra. Náº¿u nháº­p vÃ o má»™t chuá»—i khÃ´ng pháº£i lÃ  sá»‘, thÃ¬ thÃ´ng tin chuyá»ƒn Ä‘á»•i tháº¥t báº¡i sáº½ Ä‘Æ°á»£c in ra.</p>
<h3>14. Chá»‰ nÃ©m ra cÃ¡c exception liÃªn quan Ä‘áº¿n phÆ°Æ¡ng thá»©c</h3>
<p>Má»‘i liÃªn quan lÃ  ráº¥t quan trá»ng Ä‘á»ƒ giá»¯ mÃ£ code gá»n gÃ ng. Má»™t phÆ°Æ¡ng thá»©c cá»‘ gáº¯ng Ä‘á»c tá»‡p, náº¿u nÃ©m ra NullPointerException, thÃ¬ nÃ³ sáº½ khÃ´ng cung cáº¥p thÃ´ng tin há»¯u Ã­ch cho ngÆ°á»i dÃ¹ng. Thay vÃ o Ä‘Ã³, viá»‡c bá»c exception nÃ y trong má»™t exception tÃ¹y chá»‰nh sáº½ tá»‘t hÆ¡n. VÃ­ dá»¥, sá»­ dá»¥ng NoSuchFileFoundException sáº½ há»¯u Ã­ch hÆ¡n Ä‘á»‘i vá»›i ngÆ°á»i dÃ¹ng cá»§a phÆ°Æ¡ng thá»©c nÃ y.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Demo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> result</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> divide</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Káº¿t quáº£ lÃ : "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> result);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ArithmeticException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">err</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Lá»—i: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getMessage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> divide</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> b</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ArithmeticException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (b </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ArithmeticException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Chia cho sá»‘ khÃ´ng"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> a </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">/</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> b;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong vÃ­ dá»¥ nÃ y, chá»‰ cÃ³ exception ArithmeticException liÃªn quan Ä‘áº¿n phÆ°Æ¡ng thá»©c Ä‘Æ°á»£c nÃ©m ra, Ä‘iá»u nÃ y lÃ m cho mÃ£ code trá»Ÿ nÃªn rÃµ rÃ ng vÃ  dá»… báº£o trÃ¬ hÆ¡n.</p>
<h3>15. KhÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng exception Ä‘á»ƒ Ä‘iá»u khiá»ƒn luá»“ng trong mÃ£ code</h3>
<p>Sá»­ dá»¥ng exception Ä‘á»ƒ Ä‘iá»u khiá»ƒn luá»“ng trong mÃ£ code sáº½ dáº«n Ä‘áº¿n váº¥n Ä‘á» vá» Ä‘á»™ Ä‘á»c Ä‘Æ°á»£c, dá»… báº£o trÃ¬ vÃ  hiá»‡u suáº¥t cá»§a mÃ£ code.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Demo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> input</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "1,2,3,a,5"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75">values</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> input</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">split</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">","</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> value</span><span style="color:#C678DD;--shiki-dark:#C678DD"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> values) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> num</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Integer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">parseInt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(value);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(num);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NumberFormatException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">err</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(value </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> " khÃ´ng pháº£i lÃ  sá»‘ há»£p lá»‡"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Máº·c dÃ¹ vÃ­ dá»¥ nÃ y cÃ³ thá»ƒ xá»­ lÃ½ cÃ¡c kÃ½ tá»± khÃ´ng pháº£i sá»‘ trong chuá»—i nháº­p vÃ o má»™t cÃ¡ch chÃ­nh xÃ¡c, nhÆ°ng viá»‡c sá»­ dá»¥ng exception Ä‘á»ƒ Ä‘iá»u khiá»ƒn luá»“ng lÃ m cho mÃ£ code trá»Ÿ nÃªn lá»™n xá»™n vÃ  khÃ³ hiá»ƒu. NÃªn sá»­ dá»¥ng cÃ¡c cáº¥u trÃºc Ä‘iá»u khiá»ƒn khÃ¡c phÃ¹ há»£p nhÆ° if, switch, vÃ²ng láº·p Ä‘á»ƒ quáº£n lÃ½ luá»“ng cá»§a chÆ°Æ¡ng trÃ¬nh.</p>
<h3>16. XÃ¡c minh ngay láº­p tá»©c Ä‘áº§u vÃ o ngÆ°á»i dÃ¹ng Ä‘á»ƒ báº¯t lá»—i sá»›m trong xá»­ lÃ½ yÃªu cáº§u</h3>
<p>VÃ­ dá»¥: Trong ká»‹ch báº£n kinh doanh Ä‘Äƒng kÃ½ ngÆ°á»i dÃ¹ng, náº¿u thá»±c hiá»‡n nhÆ° sau:</p>
<ol>
<li>XÃ¡c minh ngÆ°á»i dÃ¹ng</li>
<li>ChÃ¨n dá»¯ liá»‡u ngÆ°á»i dÃ¹ng</li>
<li>XÃ¡c minh Ä‘á»‹a chá»‰</li>
<li>ChÃ¨n dá»¯ liá»‡u Ä‘á»‹a chá»‰</li>
<li>Náº¿u cÃ³ váº¥n Ä‘á», quay láº¡i tráº¡ng thÃ¡i ban Ä‘áº§u</li>
</ol>
<p>ÄÃ¢y lÃ  cÃ¡ch lÃ m khÃ´ng Ä‘Ãºng, nÃ³ cÃ³ thá»ƒ khiáº¿n cÆ¡ sá»Ÿ dá»¯ liá»‡u á»Ÿ tráº¡ng thÃ¡i khÃ´ng nháº¥t quÃ¡n trong nhiá»u tÃ¬nh huá»‘ng. Thay vÃ o Ä‘Ã³, báº¡n nÃªn xÃ¡c minh táº¥t cáº£ ná»™i dung trÆ°á»›c khi cáº­p nháº­t cÆ¡ sá»Ÿ dá»¯ liá»‡u. CÃ¡ch lÃ m Ä‘Ãºng lÃ :</p>
<ol>
<li>XÃ¡c minh ngÆ°á»i dÃ¹ng</li>
<li>XÃ¡c minh Ä‘á»‹a chá»‰</li>
<li>ChÃ¨n dá»¯ liá»‡u ngÆ°á»i dÃ¹ng</li>
<li>ChÃ¨n dá»¯ liá»‡u Ä‘á»‹a chá»‰</li>
<li>Náº¿u cÃ³ váº¥n Ä‘á», quay láº¡i tráº¡ng thÃ¡i ban Ä‘áº§u</li>
</ol>
<p>VÃ­ dá»¥, náº¿u chÃºng ta sá»­ dá»¥ng JDBC Ä‘á»ƒ chÃ¨n dá»¯ liá»‡u vÃ o cÆ¡ sá»Ÿ dá»¯ liá»‡u, thÃ¬ tá»‘t nháº¥t lÃ  validate trÆ°á»›c, sau Ä‘Ã³ insert, thay vÃ¬ validateUserInput, insertUserData, validateAddressInput, insertAddressData.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Connection</span><span style="color:#E06C75;--shiki-dark:#E06C75"> conn </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Káº¿t ná»‘i Ä‘áº¿n cÆ¡ sá»Ÿ dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    conn </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DriverManager</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getConnection</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"jdbc:mysql://localhost:3306/mydatabase"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"username"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"password"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Báº¯t Ä‘áº§u giao dá»‹ch</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    conn</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setAutoCommit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // XÃ¡c minh Ä‘áº§u vÃ o ngÆ°á»i dÃ¹ng</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    validateUserInput</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // ChÃ¨n dá»¯ liá»‡u ngÆ°á»i dÃ¹ng</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    insertUserData</span><span style="color:#E06C75;--shiki-dark:#E06C75">(conn)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // XÃ¡c minh Ä‘áº§u vÃ o Ä‘á»‹a chá»‰</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    validateAddressInput</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // ChÃ¨n dá»¯ liá»‡u Ä‘á»‹a chá»‰</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    insertAddressData</span><span style="color:#E06C75;--shiki-dark:#E06C75">(conn)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Commit giao dá»‹ch náº¿u má»i thá»© thÃ nh cÃ´ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    conn</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">commit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">SQLException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Quay láº¡i giao dá»‹ch náº¿u cÃ³ lá»—i</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (conn </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            conn</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">rollback</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">SQLException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> ex</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">err</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Lá»—i: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ex</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getMessage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">err</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Lá»—i: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getMessage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">finally</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // ÄÃ³ng káº¿t ná»‘i cÆ¡ sá»Ÿ dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (conn </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            conn</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">SQLException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">err</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Lá»—i: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getMessage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ÄÃ¢y lÃ  má»™t vÃ­ dá»¥ minh há»a vá» cÃ¡ch xá»­ lÃ½ giao dá»‹ch trong JDBC, trong Ä‘Ã³ Ä‘áº§u tiÃªn lÃ  xÃ¡c minh Ä‘áº§u vÃ o trÆ°á»›c khi thá»±c hiá»‡n cÃ¡c thao tÃ¡c cÆ¡ sá»Ÿ dá»¯ liá»‡u, vÃ  quay láº¡i tráº¡ng thÃ¡i ban Ä‘áº§u náº¿u cÃ³ lá»—i xáº£y ra.</p>
<h3>17. Má»—i exception chá»‰ nÃªn Ä‘Æ°á»£c bao gá»“m trong má»™t báº£n ghi nháº­t kÃ½</h3>
<p>KhÃ´ng nÃªn lÃ m nhÆ° tháº¿ nÃ y:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">debug</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Using cache sector A"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">debug</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Using retry sector B"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Trong mÃ´i trÆ°á»ng Ä‘Æ¡n luá»“ng, Ä‘iá»u nÃ y cÃ³ váº» khÃ´ng cÃ³ váº¥n Ä‘á» gÃ¬, nhÆ°ng trong mÃ´i trÆ°á»ng Ä‘a luá»“ng, hai dÃ²ng mÃ£ nÃ y cÃ³ thá»ƒ in ra ráº¥t nhiá»u ná»™i dung khÃ¡c nhau á»Ÿ giá»¯a chÃºng, lÃ m cho viá»‡c Ä‘iá»u tra váº¥n Ä‘á» trá»Ÿ nÃªn ráº¥t khÃ³ khÄƒn. Thay vÃ o Ä‘Ã³, báº¡n nÃªn lÃ m nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">LOGGER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">debug</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Using cache sector A, using retry sector B"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><h3>18. Truyá»n táº¥t cáº£ thÃ´ng tin liÃªn quan tá»‘i Ä‘a cÃ³ thá»ƒ cho exception</h3>
<p>ThÃ´ng tin exception vÃ  Ä‘Ã¡m mÃ¢y cá»§a nÃ³ lÃ  ráº¥t quan trá»ng. Náº¿u nháº­t kÃ½ cá»§a báº¡n khÃ´ng thá»ƒ xÃ¡c Ä‘á»‹nh vá»‹ trÃ­ cá»§a exception, thÃ¬ nÃ³ cÅ©ng vÃ´ dá»¥ng.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi thÃ´ng bÃ¡o exception vÃ  Ä‘Ã¡m mÃ¢y</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">LOGGER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">debug</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Lá»—i khi Ä‘á»c táº­p tin"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, e);</span></span></code></pre>
</div><p>HÃ£y cá»‘ gáº¯ng truyá»n cáº£ <code>String message, Throwable cause</code> Ä‘á»ƒ ghi ra thÃ´ng tin exception vÃ  Ä‘Ã¡m mÃ¢y.</p>
<h3>19. Dá»«ng luá»“ng bá»‹ giÃ¡n Ä‘oáº¡n</h3>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Thread</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">sleep</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">100000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">InterruptedException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {} </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»«ng lÃ m nhÆ° váº­y</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  doSomethingCool</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>InterruptedException cho biáº¿t ráº±ng báº¡n nÃªn dá»«ng viá»‡c mÃ  chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n Ä‘ang lÃ m, vÃ­ dá»¥ nhÆ° thá»i gian chá» hoáº·c Ä‘Ã³ng má»™t bá»ƒ luá»“ng.</p>
<p>NÃªn cá»‘ gáº¯ng hoÃ n thÃ nh viá»‡c Ä‘ang lÃ m vÃ  káº¿t thÃºc luá»“ng hiá»‡n táº¡i Ä‘ang thá»±c thi thay vÃ¬ bá» qua InterruptedException. ChÆ°Æ¡ng trÃ¬nh Ä‘Æ°á»£c sá»­a Ä‘á»•i nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Thread</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">sleep</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">100000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">InterruptedException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    break</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">doSomethingCool</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><h3>20. Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c máº«u cho cÃ¡c khá»‘i try-catch láº·p láº¡i</h3>
<p>CÃ¡c khá»‘i catch tÆ°Æ¡ng tá»± khÃ´ng cÃ³ Ã­ch vÃ  chá»‰ lÃ m tÄƒng sá»± láº·p láº¡i cá»§a mÃ£. Äá»‘i vá»›i cÃ¡c váº¥n Ä‘á» nhÆ° váº­y, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c máº«u.</p>
<p>VÃ­ dá»¥, trong xá»­ lÃ½ exception khi Ä‘Ã³ng káº¿t ná»‘i cÆ¡ sá»Ÿ dá»¯ liá»‡u.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DBUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> closeConnection</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Connection</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> conn</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            conn</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Exception</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> ex</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Ghi nháº­t kÃ½ exception - KhÃ´ng thá»ƒ Ä‘Ã³ng káº¿t ná»‘i</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>PhÆ°Æ¡ng thá»©c nÃ y sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng á»Ÿ nhiá»u nÆ¡i trong á»©ng dá»¥ng cá»§a báº¡n. Thay vÃ¬ Ä‘áº·t mÃ£ nÃ y kháº¯p nÆ¡i, báº¡n nÃªn Ä‘á»‹nh nghÄ©a phÆ°Æ¡ng thá»©c nhÆ° trÃªn, sau Ä‘Ã³ sá»­ dá»¥ng nÃ³ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> dataAccessCode</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Connection</span><span style="color:#E06C75;--shiki-dark:#E06C75"> conn </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        conn </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getConnection</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // ... CÃ¡c thao tÃ¡c truy cáº­p dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">finally</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        DBUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">closeConnection</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(conn);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Vá» pháº§n thá»±c hÃ nh xá»­ lÃ½ exception thÃ¬ Ä‘Ã¢y lÃ  20 Ä‘iá»u mÃ¬nh Ä‘Ã£ nÃ³i trÃªn. Trong thá»±c táº¿, khi lÃ m viá»‡c, cÃ³ thá»ƒ báº¡n sáº½ gáº·p pháº£i má»™t sá»‘ váº¥n Ä‘á» khÃ¡c, nhÆ°ng sáº½ dá»… nhá»› hÆ¡n náº¿u báº¡n tá»± mÃ¬nh váº¥p pháº£i chÃºng.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Try With Resources</title>
      <link>https://vanhung4499.github.io/programming/java/exception/try-with-resources.html</link>
      <guid>https://vanhung4499.github.io/programming/java/exception/try-with-resources.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Try With Resources</source>
      <description>try-with-resources TrÆ°á»›c khi báº¯t Ä‘áº§u, chÃºng ta hÃ£y cÃ¹ng Ã´n láº¡i má»™t chÃºt vá» tryâ€“catch-finally Ä‘á»ƒ lÃ m ná»n táº£ng nhÃ©. Trong khá»‘i try, chÃºng ta Ä‘á»c ná»™i dung tá»« tá»‡p vÃ  in tá»«ng dÃ²ng ra...</description>
      <category>java</category>
      <pubDate>Wed, 03 Jul 2024 16:21:43 GMT</pubDate>
      <content:encoded><![CDATA[
<p>TrÆ°á»›c khi báº¯t Ä‘áº§u, chÃºng ta hÃ£y cÃ¹ng Ã´n láº¡i má»™t chÃºt vá» tryâ€“catch-finally Ä‘á»ƒ lÃ m ná»n táº£ng nhÃ©.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TrycatchfinallyDecoder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        BufferedReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> br</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> path</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TrycatchfinallyDecoder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getResource</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/abc.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> decodePath</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> URLDecoder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">decode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(path,</span><span style="color:#98C379;--shiki-dark:#98C379">"utf-8"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            br </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedReader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileReader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(decodePath));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            while</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ((str </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> br</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">finally</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (br </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                    br</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong khá»‘i try, chÃºng ta Ä‘á»c ná»™i dung tá»« tá»‡p vÃ  in tá»«ng dÃ²ng ra mÃ n hÃ¬nh Ä‘iá»u khiá»ƒn. Náº¿u khÃ´ng tÃ¬m tháº¥y tá»‡p hoáº·c xáº£y ra lá»—i Ä‘á»c/ghi IO, thÃ¬ lá»—i sáº½ Ä‘Æ°á»£c báº¯t trong khá»‘i catch vÃ  in ra thÃ´ng tin ngÄƒn xáº¿p lá»—i. Cuá»‘i cÃ¹ng, trong khá»‘i finally, chÃºng ta Ä‘Ã³ng Ä‘á»‘i tÆ°á»£ng BufferedReader, Ä‘áº£m báº£o ráº±ng tÃ i nguyÃªn Ä‘Æ°á»£c Ä‘Ã³ng Ä‘Ãºng cÃ¡ch Ä‘á»ƒ trÃ¡nh háº­u quáº£ nghiÃªm trá»ng vá» hiá»‡u suáº¥t khi tÃ i nguyÃªn khÃ´ng Ä‘Æ°á»£c Ä‘Ã³ng.</p>
<p>TrÆ°á»›c Java 7, tryâ€“catch-finally lÃ  cÃ¡ch tá»‘t nháº¥t Ä‘á»ƒ Ä‘áº£m báº£o tÃ i nguyÃªn sáº½ Ä‘Æ°á»£c Ä‘Ã³ng ká»‹p thá»i, dÃ¹ chÆ°Æ¡ng trÃ¬nh cÃ³ nÃ©m ra exception hay khÃ´ng.</p>
<p>Tuy nhiÃªn, Ä‘oáº¡n mÃ£ nÃ y váº«n cÃ³ chÃºt cá»“ng ká»nh, Ä‘áº·c biá»‡t lÃ  pháº§n mÃ£ trong khá»‘i finally. HÆ¡n ná»¯a, tryâ€“catch-finally luÃ´n tiá»m áº©n má»™t nguy cÆ¡ nghiÃªm trá»ng: phÆ°Æ¡ng thá»©c <code>br.readLine()</code> trong khá»‘i try cÃ³ thá»ƒ nÃ©m ra <code>IOException</code>, vÃ  phÆ°Æ¡ng thá»©c <code>br.close()</code> trong khá»‘i finally cÅ©ng cÃ³ thá»ƒ nÃ©m ra <code>IOException</code>. Náº¿u khÃ´ng may cáº£ hai nÆ¡i Ä‘á»u nÃ©m ra IOException, thÃ¬ viá»‡c gá»¡ lá»—i chÆ°Æ¡ng trÃ¬nh sáº½ trá»Ÿ nÃªn phá»©c táº¡p hÆ¡n, vÃ  viá»‡c xÃ¡c Ä‘á»‹nh lá»—i xáº£y ra á»Ÿ Ä‘Ã¢u sáº½ tá»‘n nhiá»u cÃ´ng sá»©c hÆ¡n, Ä‘iá»u nÃ y lÃ  Ä‘iá»u mÃ  chÃºng ta khÃ´ng mong muá»‘n.</p>
<p>Minh há»a báº±ng má»™t vÃ­ dá»¥ nhÃ©!</p>
<p>Äáº§u tiÃªn, chÃºng ta Ä‘á»‹nh nghÄ©a má»™t lá»›p nhÆ° MyfinallyReadLineThrow, nÃ³ cÃ³ hai phÆ°Æ¡ng thá»©c, <code>readLine()</code> vÃ  <code>close()</code>, cáº£ hai phÆ°Æ¡ng thá»©c Ä‘á»u nÃ©m ra exception má»™t cÃ¡ch chá»§ Ä‘á»™ng.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> MyfinallyReadLineThrow</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"close"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> readLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"readLine"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Sau Ä‘Ã³, trong phÆ°Æ¡ng thá»©c <code>main()</code> chÃºng ta sá»­ dá»¥ng cÃ¡ch try-catch-finally Ä‘á»ƒ gá»i cÃ¡c phÆ°Æ¡ng thá»©c <code>readLine()</code> vÃ  <code>close()</code> cá»§a MyfinallyReadLineThrow.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TryfinallyCustomReadLineThrow</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        MyfinallyReadLineThrow</span><span style="color:#E06C75;--shiki-dark:#E06C75"> myThrow</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            myThrow </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> MyfinallyReadLineThrow</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            myThrow</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">finally</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            myThrow</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Khi cháº¡y Ä‘oáº¡n mÃ£ trÃªn, ngÄƒn xáº¿p lá»—i sáº½ hiá»ƒn thá»‹ nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Exception in thread "main" java.lang.Exception: close</span></span>
<span class="line"><span>	at com.hnv99.dzone.trycatchfinally.MyfinallyOutThrow.close(TryfinallyCustomOutThrow.java:17)</span></span>
<span class="line"><span>	at com.hnv99.dzone.trycatchfinally.TryfinallyCustomOutThrow.main(TryfinallyCustomOutThrow.java:10)</span></span></code></pre>
</div><p>Báº¡n cÃ³ tháº¥y váº¥n Ä‘á» gÃ¬ khÃ´ng?</p>
<p>ThÃ´ng tin exception cá»§a phÆ°Æ¡ng thá»©c <code>readLine()</code> bá»‹ thÃ´ng tin ngÄƒn xáº¿p cá»§a phÆ°Æ¡ng thá»©c <code>close()</code> che máº¥t rá»“i!</p>
<p>Äiá»u nÃ y sáº½ khiáº¿n chÃºng ta nháº§m tÆ°á»Ÿng váº¥n Ä‘á» cáº§n Ä‘iá»u tra lÃ  phÆ°Æ¡ng thá»©c <code>close()</code> thay vÃ¬ <code>readLine()</code> - máº·c dÃ¹ nÃ³ cÅ©ng lÃ  Ä‘á»‘i tÆ°á»£ng cáº§n nghi ngá».</p>
<p>NhÆ°ng khi cÃ³ try-with-resources, nhá»¯ng váº¥n Ä‘á» nÃ y Ä‘Æ°á»£c giáº£i quyáº¿t triá»‡t Ä‘á»ƒ. Äiá»u kiá»‡n duy nháº¥t lÃ  tÃ i nguyÃªn cáº§n Ä‘Æ°á»£c giáº£i phÃ³ng (nhÆ° BufferedReader) pháº£i triá»ƒn khai interface AutoCloseable.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">BufferedReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> br </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(decodePath))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((str </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> br</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Khá»‘i finally Ä‘Ã£ biáº¿n máº¥t, thay vÃ o Ä‘Ã³ lÃ  viá»‡c viáº¿t tÃ i nguyÃªn cáº§n giáº£i phÃ³ng trong <code>()</code> ngay sau try. Náº¿u cÃ³ nhiá»u tÃ i nguyÃªn (nhÆ° BufferedReader vÃ  PrintWriter) cáº§n giáº£i phÃ³ng, chÃºng ta cÃ³ thá»ƒ thÃªm trá»±c tiáº¿p vÃ o trong <code>()</code>.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">BufferedReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> br </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(decodePath))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">     PrintWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> writer </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> PrintWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(writePath))) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((str </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> br</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        writer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Náº¿u muá»‘n giáº£i phÃ³ng tÃ i nguyÃªn tá»± Ä‘á»‹nh nghÄ©a, chá»‰ cáº§n cho nÃ³ triá»ƒn khai interface AutoCloseable vÃ  cung cáº¥p phÆ°Æ¡ng thá»©c <code>close()</code> lÃ  Ä‘Æ°á»£c.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TrywithresourcesCustom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">MyResource</span><span style="color:#E06C75;--shiki-dark:#E06C75"> resource</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> MyResource</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();) {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Exception</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> MyResource</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AutoCloseable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÃ³ng tÃ i nguyÃªn tá»± Ä‘á»‹nh nghÄ©a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>HÃ£y xem káº¿t quáº£ Ä‘áº§u ra sau khi cháº¡y Ä‘oáº¡n mÃ£:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>ÄÃ³ng tÃ i nguyÃªn tá»± Ä‘á»‹nh nghÄ©a</span></span></code></pre>
</div><p>Trong <code>try ()</code> chá»‰ new má»™t Ä‘á»‘i tÆ°á»£ng cá»§a MyResource, khÃ´ng lÃ m gÃ¬ khÃ¡c mÃ  phÆ°Æ¡ng thá»©c <code>close()</code> Ä‘Ã£ Ä‘Æ°á»£c gá»i rá»“i!</p>
<p>Báº¡n biáº¿t táº¡i sao khÃ´ng?</p>
<p>CÃ¹ng xem bytecode sau khi Ä‘Æ°á»£c dá»‹ch ngÆ°á»£c:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> MyResource</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AutoCloseable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    MyResource</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÃ³ng tÃ i nguyÃªn tá»± Ä‘á»‹nh nghÄ©a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TrywithresourcesCustom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> TrywithresourcesCustom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            MyResource</span><span style="color:#E06C75;--shiki-dark:#E06C75"> resource</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> MyResource</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            resource</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Exception</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> var2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            var2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>TrÃ¬nh biÃªn dá»‹ch tá»± Ä‘á»™ng thÃªm mÃ£ gá»i phÆ°Æ¡ng thá»©c <code>close()</code> vÃ o trong khá»‘i <code>try-with-resources</code>.</p>
<p>Tiáº¿p theo, chÃºng ta sáº½ thÃªm má»™t phÆ°Æ¡ng thá»©c <code>out()</code> vÃ o trong lá»›p <code>MyResourceOut</code>.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> MyResourceOut</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AutoCloseable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÃ³ng tÃ i nguyÃªn tá»± Ä‘á»‹nh nghÄ©a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tráº§m Máº·c VÆ°Æ¡ng Nhá»‹, má»™t láº­p trÃ¬nh viÃªn thÃº vá»‹"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Láº§n nÃ y, chÃºng ta sáº½ gá»i phÆ°Æ¡ng thá»©c <code>out()</code> trong khá»‘i try.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TrywithresourcesCustomOut</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">MyResourceOut</span><span style="color:#E06C75;--shiki-dark:#E06C75"> resource</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> MyResourceOut</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            resource</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Exception</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>HÃ£y xem mÃ£ bytecode sau khi Ä‘Æ°á»£c dá»‹ch ngÆ°á»£c láº¡i láº§n nÃ y.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TrywithresourcesCustomOut</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> TrywithresourcesCustomOut</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            MyResourceOut</span><span style="color:#E06C75;--shiki-dark:#E06C75"> resource</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> MyResourceOut</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                resource</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Throwable</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> var5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                    resource</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Throwable</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> var4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                    var5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">addSuppressed</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(var4);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                throw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> var5;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            resource</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Exception</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> var6</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            var6</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Láº§n nÃ y, khá»‘i <code>catch</code> tá»± Ä‘á»™ng gá»i <code>resource.close()</code>, vÃ  cÃ³ má»™t Ä‘oáº¡n mÃ£ ráº¥t quan trá»ng <code>var5.addSuppressed(var4)</code>.</p>
<p>VÃ¬ sao láº¡i cáº§n lÃ m váº­y?</p>
<p>Khi má»™t exception Ä‘Æ°á»£c nÃ©m ra, cÃ³ thá»ƒ cÃ³ nhá»¯ng exception khÃ¡c bá»‹ á»©c cháº¿ bá»Ÿi exception Ä‘Ã³, khÃ´ng thá»ƒ nÃ©m ra bÃ¬nh thÆ°á»ng. Khi Ä‘Ã³, chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>addSuppressed()</code> Ä‘á»ƒ ghi láº¡i nhá»¯ng exception bá»‹ á»©c cháº¿ nÃ y, sau Ä‘Ã³ nhá»¯ng exception bá»‹ á»©c cháº¿ sáº½ xuáº¥t hiá»‡n trong thÃ´ng tin ngÄƒn xáº¿p cá»§a exception Ä‘Æ°á»£c nÃ©m ra. ChÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>getSuppressed()</code> Ä‘á»ƒ láº¥y nhá»¯ng exception nÃ y. Äiá»u nÃ y giÃºp chÃºng ta khÃ´ng bá» lá»¡ báº¥t ká»³ exception nÃ o, thuáº­n tiá»‡n cho viá»‡c gá»¡ lá»—i.</p>
<p>Báº¡n nhá»› vÃ­ dá»¥ trÆ°á»›c Ä‘Ã³ khÃ´ng - trong try-catch-finally, thÃ´ng tin exception cá»§a phÆ°Æ¡ng thá»©c <code>readLine()</code> bá»‹ thÃ´ng tin ngÄƒn xáº¿p cá»§a phÆ°Æ¡ng thá»©c <code>close()</code> che máº¥t. Giá» Ä‘Ã¢y, vá»›i try-with-resources, hÃ£y xem liá»‡u phÆ°Æ¡ng thá»©c <code>out()</code> tÆ°Æ¡ng tá»± cÃ³ bá»‹ <code>close()</code> che máº¥t khÃ´ng nhÃ©.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> MyResourceOutThrow</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AutoCloseable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"close()"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"out()"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Gá»i hai phÆ°Æ¡ng thá»©c nÃ y.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TrywithresourcesCustomOutThrow</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">MyResourceOutThrow</span><span style="color:#E06C75;--shiki-dark:#E06C75"> resource</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> MyResourceOutThrow</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            resource</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Exception</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Káº¿t quáº£ Ä‘áº§u ra cá»§a chÆ°Æ¡ng trÃ¬nh nhÆ° sau.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>java.lang.Exception: out()</span></span>
<span class="line"><span>	at com.hnv99.dzone.trycatchfinally.MyResourceOutThrow.out(TrywithresourcesCustomOutThrow.java:20)</span></span>
<span class="line"><span>	at com.hnv99.dzone.trycatchfinally.TrywithresourcesCustomOutThrow.main(TrywithresourcesCustomOutThrow.java:6)</span></span>
<span class="line"><span>	Suppressed: java.lang.Exception: close()</span></span>
<span class="line"><span>		at com.hnv99.dzone.trycatchfinally.MyResourceOutThrow.close(TrywithresourcesCustomOutThrow.java:16)</span></span>
<span class="line"><span>		at com.hnv99.dzone.trycatchfinally.TrywithresourcesCustomOutThrow.main(TrywithresourcesCustomOutThrow.java:5)</span></span></code></pre>
</div><p>Xem nÃ y, láº§n nÃ y khÃ´ng cÃ²n ná»¯a, thÃ´ng tin ngÄƒn xáº¿p cá»§a <code>out()</code> Ä‘Ã£ Ä‘Æ°á»£c in ra, vÃ  thÃ´ng tin ngÄƒn xáº¿p cá»§a phÆ°Æ¡ng thá»©c <code>close()</code> Ä‘Ã£ cÃ³ thÃªm tá»« khÃ³a <code>Suppressed</code>, rÃµ rÃ ng dá»… tháº¥y.</p>
<p>Báº¡n cÃ³ pháº£i cáº£m tháº¥y try-with-resources há»¯u dá»¥ng hÆ¡n khÃ´ng!</p>
<p>Tá»•ng káº¿t láº¡i nhÃ©, khi xá»­ lÃ½ cÃ¡c tÃ i nguyÃªn cáº§n pháº£i Ä‘Ã³ng, luÃ´n Æ°u tiÃªn sá»­ dá»¥ng try-with-resources thay vÃ¬ try-catch-finally. CÃ¡ch Ä‘áº§u tiÃªn giÃºp mÃ£ nguá»“n trá»Ÿ nÃªn ngáº¯n gá»n, rÃµ rÃ ng hÆ¡n, vÃ  thÃ´ng tin exception cÅ©ng chÃ­nh xÃ¡c hÆ¡n.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Exception Analysis</title>
      <link>https://vanhung4499.github.io/programming/java/exception/analysis.html</link>
      <guid>https://vanhung4499.github.io/programming/java/exception/analysis.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Exception Analysis</source>
      <description>Exception Handling analysis 01. Exception LÃ  GÃ¬ Chá»‰ khi xá»­ lÃ½ Ä‘Ãºng cÃ¡c exception, chÃºng ta má»›i cÃ³ thá»ƒ Ä‘áº£m báº£o Ä‘Æ°á»£c Ä‘á»™ tin cáº­y cá»§a chÆ°Æ¡ng trÃ¬nh, vÃ¬ váº­y viá»‡c há»c vá» exception lÃ  r...</description>
      <category>java</category>
      <pubDate>Wed, 03 Jul 2024 13:21:21 GMT</pubDate>
      <content:encoded><![CDATA[
<h3>01. Exception LÃ  GÃ¬</h3>
<p>Chá»‰ khi xá»­ lÃ½ Ä‘Ãºng cÃ¡c exception, chÃºng ta má»›i cÃ³ thá»ƒ Ä‘áº£m báº£o Ä‘Æ°á»£c Ä‘á»™ tin cáº­y cá»§a chÆ°Æ¡ng trÃ¬nh, vÃ¬ váº­y viá»‡c há»c vá» exception lÃ  ráº¥t cáº§n thiáº¿t.</p>
<p>Váº­y exception lÃ  gÃ¬?</p>
<p>Exception (exception) lÃ  má»™t sá»± kiá»‡n khÃ´ng xÃ¡c Ä‘á»‹nh lÃ m giÃ¡n Ä‘oáº¡n quÃ¡ trÃ¬nh thá»±c thi bÃ¬nh thÆ°á»ng cá»§a chÆ°Æ¡ng trÃ¬nh. Khi exception xáº£y ra, luá»“ng thá»±c thi bÃ¬nh thÆ°á»ng cá»§a chÆ°Æ¡ng trÃ¬nh sáº½ bá»‹ giÃ¡n Ä‘oáº¡n. ThÃ´ng thÆ°á»ng, chÆ°Æ¡ng trÃ¬nh sáº½ cÃ³ nhiá»u cÃ¢u lá»‡nh, náº¿u khÃ´ng cÃ³ cÆ¡ cháº¿ xá»­ lÃ½ exception, khi má»™t cÃ¢u lá»‡nh trÆ°á»›c gáº·p exception, cÃ¡c cÃ¢u lá»‡nh sau sáº½ khÃ´ng thá»ƒ tiáº¿p tá»¥c thá»±c thi.</p>
<p>Vá»›i cÆ¡ cháº¿ xá»­ lÃ½ exception, chÆ°Æ¡ng trÃ¬nh sáº½ khÃ´ng bá»‹ giÃ¡n Ä‘oáº¡n khi xáº£y ra exception, chÃºng ta cÃ³ thá»ƒ báº¯t exception vÃ  thay Ä‘á»•i luá»“ng thá»±c thi cá»§a chÆ°Æ¡ng trÃ¬nh.</p>
<p>HÆ¡n ná»¯a, cÆ¡ cháº¿ xá»­ lÃ½ exception giÃºp chÃºng ta cung cáº¥p thÃ´ng tin cáº£nh bÃ¡o thÃ¢n thiá»‡n Ä‘áº¿n ngÆ°á»i dÃ¹ng, thay vÃ¬ cÃ¡c thÃ´ng tin exception gá»‘c cá»§a chÆ°Æ¡ng trÃ¬nh mÃ  ngÆ°á»i dÃ¹ng khÃ´ng thá»ƒ hiá»ƒu Ä‘Æ°á»£c.</p>
<p>Tuy nhiÃªn, tá»« gÃ³c nhÃ¬n cá»§a nhÃ  phÃ¡t triá»ƒn, chÃºng ta muá»‘n tháº¥y thÃ´ng tin exception gá»‘c, vÃ¬ Ä‘iá»u nÃ y giÃºp chÃºng ta nhanh chÃ³ng tÃ¬m ra nguá»“n gá»‘c cá»§a lá»—i, cÃ²n thÃ´ng tin exception bá»‹ Ä‘Ã³ng gÃ³i quÃ¡ má»©c sáº½ lÃ m nhiá»…u táº§m nhÃ¬n cá»§a chÃºng ta.</p>
<p>NgÃ´n ngá»¯ Java tá»« Ä‘áº§u Ä‘Ã£ cung cáº¥p cÆ¡ cháº¿ xá»­ lÃ½ exception tÆ°Æ¡ng Ä‘á»‘i hoÃ n thiá»‡n, cÆ¡ cháº¿ nÃ y giÃºp giáº£m Ä‘Ã¡ng ká»ƒ ngÆ°á»¡ng viáº¿t chÆ°Æ¡ng trÃ¬nh Ä‘Ã¡ng tin cáº­y, Ä‘Ã¢y cÅ©ng lÃ  má»™t trong nhá»¯ng lÃ½ do Java trá»Ÿ nÃªn phá»• biáº¿n.</p>
<p>Váº­y nhá»¯ng nguyÃªn nhÃ¢n nÃ o dáº«n Ä‘áº¿n chÆ°Æ¡ng trÃ¬nh nÃ©m ra exception?</p>
<p>VÃ­ dá»¥ nhÆ°:</p>
<ul>
<li>ChÆ°Æ¡ng trÃ¬nh cá»‘ gáº¯ng má»Ÿ má»™t tá»‡p khÃ´ng tá»“n táº¡i;</li>
<li>ChÆ°Æ¡ng trÃ¬nh gáº·p váº¥n Ä‘á» káº¿t ná»‘i máº¡ng;</li>
<li>NgÆ°á»i dÃ¹ng nháº­p dá»¯ liá»‡u khÃ´ng há»£p lá»‡;</li>
<li>ChÆ°Æ¡ng trÃ¬nh khÃ´ng xá»­ lÃ½ trÆ°á»ng há»£p chia cho 0 khi giáº£i quyáº¿t váº¥n Ä‘á» toÃ¡n há»c;</li>
</ul>
<p>v.v...</p>
<p>HÃ£y láº¥y má»™t nguyÃªn nhÃ¢n Ä‘Æ¡n giáº£n nháº¥t.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Demo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> /</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Äoáº¡n mÃ£ nÃ y khi cháº¡y sáº½ nÃ©m ra thÃ´ng tin exception nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Exception in thread "main" java.lang.ArithmeticException: / by zero</span></span>
<span class="line"><span>    at com.hnv99.ex.Demo.main(Demo.java:8)</span></span></code></pre>
</div><p>Báº¡n tháº¥y khÃ´ng, thÃ´ng tin exception gá»‘c nÃ y ráº¥t khÃ³ hiá»ƒu Ä‘á»‘i vá»›i ngÆ°á»i dÃ¹ng, nhÆ°ng Ä‘á»‘i vá»›i nhÃ  phÃ¡t triá»ƒn nhÆ° chÃºng ta, thÃ¬ quÃ¡ rÃµ rÃ ng â€” ráº¥t dá»… xÃ¡c Ä‘á»‹nh nguá»“n gá»‘c cá»§a exception.</p>
<h3>02. Sá»± KhÃ¡c Biá»‡t Giá»¯a Exception vÃ  Error</h3>
<p>Exception vÃ  Error, sá»± khÃ¡c biá»‡t giá»¯a chÃºng lÃ  gÃ¬?</p>
<p>Tá»« nghÄ©a cá»§a tá»«, error cÃ³ nghÄ©a lÃ  lá»—i, cÃ²n exception cÃ³ nghÄ©a lÃ  ngoáº¡i lá»‡, má»©c Ä‘á»™ nghiÃªm trá»ng cá»§a error rÃµ rÃ ng cao hÆ¡n exception.</p>
<p>Tá»« gÃ³c Ä‘á»™ chÆ°Æ¡ng trÃ¬nh, cÅ©ng Ä‘Ãºng nhÆ° váº­y.</p>
<p>Error xuáº¥t hiá»‡n cÃ³ nghÄ©a lÃ  chÆ°Æ¡ng trÃ¬nh gáº·p pháº£i váº¥n Ä‘á» nghiÃªm trá»ng, vÃ  nhá»¯ng váº¥n Ä‘á» nÃ y khÃ´ng nÃªn Ä‘Æ°á»£c xá»­ lÃ½ bá»Ÿi cÆ¡ cháº¿ xá»­ lÃ½ exception cá»§a Java, chÆ°Æ¡ng trÃ¬nh nÃªn bá»‹ sáº­p ngay láº­p tá»©c, vÃ­ dá»¥ nhÆ° OutOfMemoryError, lá»—i trÃ n bá»™ nhá»›, Ä‘iá»u nÃ y cÃ³ nghÄ©a lÃ  bá»™ nhá»› mÃ  chÆ°Æ¡ng trÃ¬nh yÃªu cáº§u khi cháº¡y vÆ°á»£t quÃ¡ bá»™ nhá»› mÃ  há»‡ thá»‘ng cÃ³ thá»ƒ cung cáº¥p, dáº«n Ä‘áº¿n lá»—i, loáº¡i lá»—i nÃ y Ä‘á»‘i vá»›i chÆ°Æ¡ng trÃ¬nh lÃ  chÃ­ máº¡ng.</p>
<p>Exception xuáº¥t hiá»‡n cÃ³ nghÄ©a lÃ  chÆ°Æ¡ng trÃ¬nh gáº·p má»™t sá»‘ váº¥n Ä‘á» trong pháº¡m vi cÃ³ thá»ƒ kiá»ƒm soÃ¡t, chÃºng ta nÃªn thá»±c hiá»‡n cÃ¡c biá»‡n phÃ¡p Ä‘á»ƒ cá»©u vÃ£n.</p>
<p>VÃ­ dá»¥ nhÆ° ArithmeticException Ä‘Ã£ Ä‘á» cáº­p trÆ°á»›c Ä‘Ã³, rÃµ rÃ ng lÃ  do chia cho 0, chÃºng ta cÃ³ thá»ƒ chá»n báº¯t exception vÃ  thÃ´ng bÃ¡o cho ngÆ°á»i dÃ¹ng ráº±ng khÃ´ng nÃªn thá»±c hiá»‡n phÃ©p chia cho 0, táº¥t nhiÃªn, cÃ¡ch tá»‘t hÆ¡n lÃ  kiá»ƒm tra sá»‘ chia, náº¿u lÃ  0 thÃ¬ khÃ´ng thá»±c hiá»‡n phÃ©p chia mÃ  thÃ´ng bÃ¡o cho ngÆ°á»i dÃ¹ng chá»n má»™t sá»‘ khÃ¡c khÃ´ng Ä‘á»ƒ thá»±c hiá»‡n phÃ©p chia.</p>
<h3>03. Checked vÃ  Unchecked Exception</h3>
<p>Exception cÃ³ thá»ƒ Ä‘Æ°á»£c chia thÃ nh checked vÃ  unchecked exception, chÃºng cÃ³ gÃ¬ khÃ¡c nhau?</p>
<p>Checked exception trong mÃ£ nguá»“n pháº£i Ä‘Æ°á»£c báº¯t hoáº·c nÃ©m rÃµ rÃ ng, náº¿u khÃ´ng trÃ¬nh biÃªn dá»‹ch sáº½ nháº¯c báº¡n thá»±c hiá»‡n thao tÃ¡c tÆ°Æ¡ng á»©ng. CÃ²n unchecked exception lÃ  runtime exception, thÆ°á»ng cÃ³ thá»ƒ Ä‘Æ°á»£c trÃ¡nh báº±ng mÃ£ hÃ³a, khÃ´ng cáº§n pháº£i báº¯t hoáº·c nÃ©m rÃµ rÃ ng.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240703210645.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Äáº§u tiÃªn, cáº£ Exception vÃ  Error Ä‘á»u káº¿ thá»«a tá»« lá»›p Throwable. NÃ³i cÃ¡ch khÃ¡c, chá»‰ cÃ³ cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p Throwable (hoáº·c lá»›p con cá»§a nÃ³) má»›i cÃ³ thá»ƒ Ä‘Æ°á»£c nÃ©m ra báº±ng tá»« khÃ³a throw hoáº·c Ä‘Æ°á»£c sá»­ dá»¥ng lÃ m tham sá»‘ cá»§a catch.</p>
<p>Má»™t cÃ¢u há»i phá»• biáº¿n trong phá»ng váº¥n lÃ , NoClassDefFoundError vÃ  ClassNotFoundException cÃ³ gÃ¬ khÃ¡c nhau?</p>
<p>Cáº£ hai Ä‘á»u do há»‡ thá»‘ng khÃ´ng tÃ¬m tháº¥y lá»›p cáº§n táº£i trong thá»i gian cháº¡y, nhÆ°ng nguyÃªn nhÃ¢n kÃ­ch hoáº¡t láº¡i khÃ¡c nhau.</p>
<ul>
<li>NoClassDefFoundError: Lá»—i nÃ y xáº£y ra khi chÆ°Æ¡ng trÃ¬nh cÃ³ thá»ƒ tÃ¬m tháº¥y lá»›p phá»¥ thuá»™c trong thá»i gian biÃªn dá»‹ch nhÆ°ng khÃ´ng thá»ƒ tÃ¬m tháº¥y tá»‡p lá»›p trong thá»i gian cháº¡y; nguyÃªn nhÃ¢n cÃ³ thá»ƒ lÃ  do thiáº¿u tá»‡p jar hoáº·c gá»i má»™t lá»›p Ä‘Ã£ khá»Ÿi táº¡o khÃ´ng thÃ nh cÃ´ng.</li>
<li>ClassNotFoundException: exception nÃ y Ä‘Æ°á»£c nÃ©m ra khi khÃ´ng tÃ¬m tháº¥y lá»›p tÆ°Æ¡ng á»©ng trong quÃ¡ trÃ¬nh táº£i Ä‘á»™ng Ä‘á»‘i tÆ°á»£ng Class; nguyÃªn nhÃ¢n cÃ³ thá»ƒ lÃ  lá»›p cáº§n táº£i khÃ´ng tá»“n táº¡i hoáº·c tÃªn lá»›p bá»‹ viáº¿t sai.</li>
</ul>
<p>Tiáº¿p theo, nhÆ° IOException, ClassNotFoundException, SQLException Ä‘á»u thuá»™c loáº¡i checked exception; cÃ²n nhÆ° RuntimeException vÃ  cÃ¡c lá»›p con nhÆ° ArithmeticException, ClassCastException, ArrayIndexOutOfBoundsException, NullPointerException, Ä‘á»u thuá»™c loáº¡i unchecked exception.</p>
<p>unchecked exception cÃ³ thá»ƒ khÃ´ng cáº§n xá»­ lÃ½ rÃµ rÃ ng trong chÆ°Æ¡ng trÃ¬nh, nhÆ° ArithmeticException Ä‘Ã£ Ä‘á» cáº­p trÆ°á»›c Ä‘Ã³; nhÆ°ng checked exception pháº£i Ä‘Æ°á»£c xá»­ lÃ½ rÃµ rÃ ng.</p>
<p>VÃ­ dá»¥, mÃ£ sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Class</span><span style="color:#E06C75;--shiki-dark:#E06C75"> clz </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">forName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"com.hnv99.ex.Demo1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Náº¿u khÃ´ng xá»­ lÃ½, vÃ­ dá»¥ nhÆ° trong mÃ´i trÆ°á»ng Intellij IDEA, nÃ³ sáº½ nháº¯c báº¡n ráº±ng dÃ²ng mÃ£ nÃ y cÃ³ thá»ƒ nÃ©m ra <code>java.lang.ClassNotFoundException</code>.</p>
<p>Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng try-catch Ä‘á»ƒ báº¯t exception:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Class</span><span style="color:#E06C75;--shiki-dark:#E06C75"> clz </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">forName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"com.hnv99.ex.Demo1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ClassNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>LÆ°u Ã½ phÆ°Æ¡ng thá»©c <code>printStackTrace()</code> in ra thÃ´ng tin ngÄƒn xáº¿p cá»§a exception, phÆ°Æ¡ng thá»©c nÃ y sáº½ in thÃ´ng tin ngÄƒn xáº¿p cá»§a exception ra mÃ n hÃ¬nh Ä‘iá»u khiá»ƒn chuáº©n, náº¿u lÃ  mÃ´i trÆ°á»ng kiá»ƒm thá»­ thÃ¬ cÃ¡ch viáº¿t nÃ y táº¡m cháº¥p nháº­n Ä‘Æ°á»£c, nhÆ°ng náº¿u lÃ  mÃ´i trÆ°á»ng sáº£n xuáº¥t thÃ¬ khÃ´ng nÃªn, pháº£i sá»­ dá»¥ng khung log Ä‘á»ƒ ghi thÃ´ng tin ngÄƒn xáº¿p cá»§a exception vÃ o há»‡ thá»‘ng log, náº¿u khÃ´ng sáº½ khÃ³ mÃ  theo dÃµi.</p>
<p>Hoáº·c sá»­ dá»¥ng tá»« khÃ³a throws trong chá»¯ kÃ½ cá»§a phÆ°Æ¡ng thá»©c Ä‘á»ƒ nÃ©m exception:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Demo1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ClassNotFoundException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Class</span><span style="color:#E06C75;--shiki-dark:#E06C75"> clz</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">forName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"com.hnv99.ex.Demo1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>CÃ¡ch lÃ m nÃ y cÃ³ lá»£i lÃ  khÃ´ng cáº§n pháº£i báº¯t exception, chá»‰ cáº§n giao cho Java Virtual Machine xá»­ lÃ½; nhÆ°ng nhÆ°á»£c Ä‘iá»ƒm lÃ  khÃ´ng thá»ƒ xá»­ lÃ½ tÃ¬nh huá»‘ng cá»¥ thá»ƒ.</p>
<p>Vá» checked exception, tÃ´i cÃ³ tháº¥y má»™t bÃ i viáº¿t nÃ³i ráº±ng checked exception trong Java lÃ  khÃ´ng cáº§n thiáº¿t, exception nÃ y trong giai Ä‘oáº¡n biÃªn dá»‹ch pháº£i dÃ¹ng try-catch hoáº·c throws, nhÆ°ng khÃ´ng nháº¥t thiáº¿t sáº½ xáº£y ra exception, báº¡n nghÄ© thiáº¿t káº¿ nhÆ° váº­y cÃ³ Ã½ nghÄ©a khÃ´ng?</p>
<p>Thá»±c ra, checked exception gÃ¢y tranh cÃ£i trong ngÃ nh, nÃ³ giáº£ Ä‘á»‹nh ráº±ng chÃºng ta sáº½ báº¯t exception vÃ  xá»­ lÃ½ tÃ¬nh huá»‘ng nÃ y, nhÆ°ng Ä‘Ã´i khi, khÃ´ng thá»ƒ xá»­ lÃ½ Ä‘Æ°á»£c. VÃ­ dá»¥ nhÆ° exception ClassNotFoundException Ä‘Ã£ Ä‘á» cáº­p trÆ°á»›c Ä‘Ã³, giáº£ sá»­ chÃºng ta Ä‘Ã£ try-catch nÃ³, nhÆ°ng khi exception ClassNotFoundException thá»±c sá»± xáº£y ra, chÃºng ta cÅ©ng khÃ´ng thá»ƒ lÃ m gÃ¬ nhiá»u, láº¡i <code>Class.forName()</code> má»™t láº§n ná»¯a?</p>
<p>NgoÃ i ra, checked exception cÅ©ng khÃ´ng tÆ°Æ¡ng thÃ­ch vá»›i láº­p trÃ¬nh hÃ m, sau nÃ y khi em viáº¿t code Lambda/Stream, báº¡n sáº½ cáº£m nháº­n Ä‘Æ°á»£c sá»± khÃ³ khÄƒn nÃ y.</p>
<p>Tuy nhiÃªn, checked exception khÃ´ng pháº£i lÃ  hoÃ n toÃ n vÃ´ dá»¥ng, Ä‘áº·c biá»‡t lÃ  khi gáº·p pháº£i cÃ¡c IO hoáº·c network exception, cháº³ng háº¡n nhÆ° khi thá»±c hiá»‡n káº¿t ná»‘i Socket, hÃ£y xem Ä‘oáº¡n mÃ£ sau:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Demo2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> mHost</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> mPort</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Socket</span><span style="color:#E06C75;--shiki-dark:#E06C75"> mSocket</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Object</span><span style="color:#E06C75;--shiki-dark:#E06C75"> mLock </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Object</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> run</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> initSocket</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        while</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                Socket</span><span style="color:#E06C75;--shiki-dark:#E06C75"> socket</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Socket</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(mHost, mPort);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                synchronized</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (mLock) {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                    mSocket </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> socket;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                }</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                break</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Khi xáº£y ra IOException, socket sáº½ thá»­ káº¿t ná»‘i láº¡i, náº¿u khÃ´ng sáº½ break ra khá»i vÃ²ng láº·p. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  náº¿u IOException khÃ´ng pháº£i lÃ  checked exception, cÃ¡ch viáº¿t nÃ y sáº½ khÃ´ng rÃµ rÃ ng, vÃ¬ IOException khÃ´ng thá»ƒ Ä‘Æ°á»£c trÃ¡nh nhÆ° ArithmeticException báº±ng cÃ¡ch sá»­ dá»¥ng má»™t cÃ¢u lá»‡nh if Ä‘á»ƒ kiá»ƒm tra xem sá»‘ chia cÃ³ pháº£i lÃ  0 khÃ´ng.</p>
<p>Hoáº·c nÃ³i cÃ¡ch khÃ¡c, checked exception báº¯t buá»™c cÃ³ thá»ƒ khiáº¿n chÃºng ta suy nghÄ© khi láº­p trÃ¬nh, lÃ m tháº¿ nÃ o Ä‘á»ƒ xá»­ lÃ½ exception nÃ y má»™t cÃ¡ch tá»‘t hÆ¡n. RÃµ rÃ ng, trong láº­p trÃ¬nh Socket, cháº¯c cháº¯n sáº½ gáº·p pháº£i IOException, giáº£ sá»­ IOException lÃ  unchecked exception, Ä‘iá»u nÃ y cÃ³ nghÄ©a lÃ  nhÃ  phÃ¡t triá»ƒn cÃ³ thá»ƒ khÃ´ng cáº§n quan tÃ¢m, bá» qua, giao cho Java Virtual Machine xá»­ lÃ½, nhÆ°ng tÃ´i nghÄ© cÃ¡ch lÃ m nÃ y khÃ´ng phÃ¹ há»£p.</p>
<h3>04. Vá» tá»« khÃ³a <code>throw</code> vÃ  <code>throws</code></h3>
<p>Sá»± khÃ¡c biá»‡t giá»¯a tá»« khÃ³a <code>throw</code> vÃ  <code>throws</code> lÃ  gÃ¬?</p>
<p>Tá»« khÃ³a <code>throw</code> Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ chá»§ Ä‘á»™ng nÃ©m ra má»™t exception. ThÃ´ng thÆ°á»ng, khi sá»‘ chia lÃ  0, chÆ°Æ¡ng trÃ¬nh sáº½ tá»± Ä‘á»™ng nÃ©m ra exception ArithmeticException. NhÆ°ng náº¿u chÃºng ta muá»‘n nÃ©m ra exception ArithmeticException khi sá»‘ chia lÃ  1, chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng tá»« khÃ³a <code>throw</code> Ä‘á»ƒ chá»§ Ä‘á»™ng nÃ©m exception.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> exception_class</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"error message"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>CÃº phÃ¡p ráº¥t Ä‘Æ¡n giáº£n, tá»« khÃ³a <code>throw</code> Ä‘i kÃ¨m vá»›i tá»« khÃ³a <code>new</code>, kiá»ƒu exception vÃ  cÃ¡c tham sá»‘.</p>
<p>VÃ­ dá»¥.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ThrowDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> checkEligibilty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> stuage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">){</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(stuage</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#D19A66;--shiki-dark:#D19A66">18</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ArithmeticException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ChÆ°a Ä‘á»§ 18 tuá»•i, khÃ´ng Ä‘Æ°á»£c xem phim"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"HÃ£y thÆ°á»Ÿng thá»©c bá»™ phim!!"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[]){</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        checkEligibilty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Cuá»‘i tuáº§n vui váº».."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Äoáº¡n mÃ£ nÃ y khi cháº¡y sáº½ nÃ©m ra lá»—i sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Exception in thread "main" java.lang.ArithmeticException: ChÆ°a Ä‘á»§ 18 tuá»•i, khÃ´ng Ä‘Æ°á»£c xem phim</span></span>
<span class="line"><span>    at com.hnv99.ex.ThrowDemo.checkEligibilty(ThrowDemo.java:9)</span></span>
<span class="line"><span>    at com.hnv99.ex.ThrowDemo.main(ThrowDemo.java:16)</span></span></code></pre>
</div><p>Tá»« khÃ³a <code>throws</code> cÃ³ tÃ¡c dá»¥ng hoÃ n toÃ n khÃ¡c vá»›i <code>throw</code>. á» pháº§n trÆ°á»›c, chÃºng ta Ä‘Ã£ nÃ³i vá» checked exception vÃ  unchecked exception, Ä‘á»‘i vá»›i checked exception, náº¿u báº¡n khÃ´ng xá»­ lÃ½, trÃ¬nh biÃªn dá»‹ch sáº½ nháº¯c báº¡n.</p>
<p>PhÆ°Æ¡ng thá»©c <code>Class.forName()</code> khi thá»±c thi cÃ³ thá»ƒ gáº·p exception <code>java.lang.ClassNotFoundException</code>, má»™t checked exception, náº¿u khÃ´ng xá»­ lÃ½, IDE sáº½ nháº¯c báº¡n, hoáº·c khai bÃ¡o trong method signature (<code>com.hnv99.ex.Demo1</code>), hoáº·c Ä‘áº·t trong try-catch.</p>
<p>Váº­y khi nÃ o sá»­ dá»¥ng <code>throws</code> thay vÃ¬ <code>try-catch</code>?</p>
<p>Giáº£ sá»­ cÃ³ má»™t phÆ°Æ¡ng thá»©c <code>myMethod()</code> cÃ³ thá»ƒ xuáº¥t hiá»‡n exception ArithmeticException vÃ  NullPointerException. Trong trÆ°á»ng há»£p nÃ y, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng <code>try-catch</code> Ä‘á»ƒ xá»­ lÃ½.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> myMethod</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // CÃ³ thá»ƒ nÃ©m ra exception</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ArithmeticException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // exception toÃ¡n há»c</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NullPointerException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // exception con trá» null</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>NhÆ°ng náº¿u cÃ³ nhiá»u phÆ°Æ¡ng thá»©c giá»‘ng nhÆ° <code>myMethod()</code>, viá»‡c thÃªm <code>try-catch</code> cho tá»«ng phÆ°Æ¡ng thá»©c sáº½ ráº¥t cá»“ng ká»nh. MÃ£ sáº½ trá»Ÿ nÃªn dÃ i dÃ²ng vÃ  khÃ³ Ä‘á»c.</p>
<p>Má»™t giáº£i phÃ¡p lÃ  sá»­ dá»¥ng tá»« khÃ³a <code>throws</code> Ä‘á»ƒ khai bÃ¡o exception cÃ³ thá»ƒ nÃ©m ra trong method signature, sau Ä‘Ã³ xá»­ lÃ½ táº¡i nÆ¡i gá»i phÆ°Æ¡ng thá»©c báº±ng <code>try-catch</code>.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> args[]){</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        myMethod1</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ArithmeticException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // exception toÃ¡n há»c</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NullPointerException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // exception con trá» null</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> myMethod1</span><span style="color:#E06C75;--shiki-dark:#E06C75">() throws ArithmeticException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> NullPointerException{</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Khai bÃ¡o exception trong method signature</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Tá»•ng káº¿t láº¡i sá»± khÃ¡c biá»‡t giá»¯a <code>throw</code> vÃ  <code>throws</code>:</p>
<ol>
<li>
<p>Tá»« khÃ³a <code>throws</code> Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ khai bÃ¡o exception, nÃ³ cÃ³ tÃ¡c dá»¥ng tÆ°Æ¡ng tá»± nhÆ° <code>try-catch</code>; cÃ²n tá»« khÃ³a <code>throw</code> Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ nÃ©m ra exception rÃµ rÃ ng.</p>
</li>
<li>
<p>Sau tá»« khÃ³a <code>throws</code> lÃ  tÃªn cá»§a exception; cÃ²n sau tá»« khÃ³a <code>throw</code> lÃ  Ä‘á»‘i tÆ°á»£ng cá»§a exception.</p>
</li>
</ol>
<p>VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">throws ArithmeticException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ArithmeticException</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Arithmetic Exception"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><ol start="3">
<li>
<p>Tá»« khÃ³a <code>throws</code> xuáº¥t hiá»‡n trong method signature, cÃ²n tá»« khÃ³a <code>throw</code> xuáº¥t hiá»‡n trong thÃ¢n phÆ°Æ¡ng thá»©c.</p>
</li>
<li>
<p>Tá»« khÃ³a <code>throws</code> khi khai bÃ¡o exception cÃ³ thá»ƒ kÃ¨m nhiá»u exception, Ä‘Æ°á»£c ngÄƒn cÃ¡ch báº±ng dáº¥u pháº©y; cÃ²n tá»« khÃ³a <code>throw</code> má»—i láº§n chá»‰ cÃ³ thá»ƒ nÃ©m ra má»™t exception.</p>
</li>
</ol>
<h3>05. Vá» <code>try-catch-finally</code></h3>
<p>Tá»« khÃ³a <code>try</code> sáº½ Ä‘i kÃ¨m vá»›i má»™t cáº·p ngoáº·c nhá»n <code>{}</code>, chÃºng ta Ä‘áº·t má»™t sá»‘ Ä‘oáº¡n mÃ£ cÃ³ thá»ƒ xáº£y ra exception vÃ o trong ngoáº·c nhá»n nÃ y; khá»‘i <code>try</code> thÆ°á»ng sáº½ Ä‘i kÃ¨m vá»›i khá»‘i <code>catch</code>, Ä‘á»ƒ xá»­ lÃ½ tÃ¬nh huá»‘ng xáº£y ra exception; dÄ© nhiÃªn, exception khÃ´ng pháº£i lÃºc nÃ o cÅ©ng xáº£y ra, Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng dÃ¹ cÃ³ xáº£y ra exception hay khÃ´ng, má»™t sá»‘ Ä‘oáº¡n mÃ£ váº«n sáº½ Ä‘Æ°á»£c thá»±c thi, chÃºng ta sáº½ kÃ¨m theo má»™t khá»‘i <code>finally</code>.</p>
<p>CÃº phÃ¡p cá»§a khá»‘i <code>try</code> ráº¥t Ä‘Æ¡n giáº£n:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75">{</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// MÃ£ cÃ³ thá»ƒ xáº£y ra exception</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>ChÃº Ã½ nhÃ©,  náº¿u má»™t sá»‘ Ä‘oáº¡n mÃ£ cháº¯c cháº¯n sáº½ khÃ´ng nÃ©m ra exception, thÃ¬ Ä‘á»«ng bao bá»c chÃºng trong khá»‘i <code>try</code>, vÃ¬ mÃ£ cÃ³ xá»­ lÃ½ exception sáº½ tá»‘n thá»i gian hÆ¡n mÃ£ khÃ´ng cÃ³ xá»­ lÃ½ exception.</p>
<p>CÃº phÃ¡p cá»§a khá»‘i <code>catch</code> cÅ©ng ráº¥t Ä‘Æ¡n giáº£n:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75">{</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// MÃ£ cÃ³ thá»ƒ xáº£y ra exception</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">exception</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">type</span><span style="color:#E06C75;--shiki-dark:#E06C75">) e(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">object</span><span style="color:#E06C75;--shiki-dark:#E06C75">)){</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// MÃ£ xá»­ lÃ½ exception</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Má»™t khá»‘i <code>try</code> cÃ³ thá»ƒ kÃ¨m theo nhiá»u khá»‘i <code>catch</code>, Ä‘á»ƒ báº¯t cÃ¡c loáº¡i exception khÃ¡c nhau vÃ  xá»­ lÃ½ tÆ°Æ¡ng á»©ng. Khi má»™t dÃ²ng mÃ£ trong khá»‘i <code>try</code> xáº£y ra exception, cÃ¡c dÃ²ng mÃ£ sau Ä‘Ã³ sáº½ khÃ´ng Ä‘Æ°á»£c thá»±c thi, mÃ  sáº½ chuyá»ƒn Ä‘áº¿n khá»‘i <code>catch</code> tÆ°Æ¡ng á»©ng Ä‘á»ƒ thá»±c thi.</p>
<p>Náº¿u má»™t khá»‘i <code>try</code> kÃ¨m theo nhiá»u khá»‘i <code>catch</code> liÃªn quan, thÃ¬ nÃªn Ä‘áº·t cÃ¡c exception cá»¥ thá»ƒ á»Ÿ phÃ­a trÆ°á»›c, cÃ¡c exception chung chung á»Ÿ phÃ­a sau, náº¿u khÃ´ng trÃ¬nh biÃªn dá»‹ch sáº½ bÃ¡o lá»—i. VÃ­ dá»¥:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> test</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> num1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> num2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        num1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        num2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 62</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> /</span><span style="color:#E06C75;--shiki-dark:#E06C75"> num1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(num2);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"CÃ¢u cuá»‘i cÃ¹ng trong khá»‘i try"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ArithmeticException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Chuyá»ƒn Ä‘áº¿n Ä‘Ã¢y khi xáº£y ra lá»—i toÃ¡n há»c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Sá»‘ chia khÃ´ng thá»ƒ lÃ  0"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Exception</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // exception chung cÃ³ thá»ƒ báº¯t táº¥t cáº£ cÃ¡c loáº¡i exception, nÃ³ nÃªn Ä‘áº·t á»Ÿ cuá»‘i cÃ¹ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÃ£ xáº£y ra exception"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"MÃ£ ngoÃ i try-catch."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Táº¡i sao khÃ´ng Ä‘áº·t <code>Exception</code> trÆ°á»›c <code>ArithmeticException</code>?</p>
<p>VÃ¬ <code>ArithmeticException</code> lÃ  má»™t lá»›p con cá»§a <code>Exception</code>, nÃ³ cá»¥ thá»ƒ hÆ¡n, khi tháº¥y exception nÃ y chÃºng ta biáº¿t ngay Ä‘Ã³ lÃ  lá»—i toÃ¡n há»c, cÃ²n <code>Exception</code> thÃ¬ chung chung hÆ¡n, nÃ³ che giáº¥u thÃ´ng tin cá»¥ thá»ƒ vá» exception, khiáº¿n viá»‡c xÃ¡c Ä‘á»‹nh loáº¡i exception gáº·p khÃ³ khÄƒn. HÆ¡n ná»¯a, náº¿u Ä‘áº·t exception chung chung á»Ÿ phÃ­a trÆ°á»›c, cÃ³ nghÄ©a lÃ  cÃ¡c khá»‘i <code>catch</code> khÃ¡c sáº½ khÃ´ng bao giá» Ä‘Æ°á»£c thá»±c thi, vÃ¬ váº­y trÃ¬nh biÃªn dá»‹ch sáº½ bÃ¡o lá»—i.</p>
<p>ThÃªm má»™t vÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> test1</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75">{</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> arr[] </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">7</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        arr[</span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span><span style="color:#E06C75;--shiki-dark:#E06C75">] </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 30</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> /</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"CÃ¢u cuá»‘i cÃ¹ng trong khá»‘i try"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ArithmeticException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">){</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Sá»‘ chia pháº£i lÃ  0"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ArrayIndexOutOfBoundsException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">){</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Truy cáº­p ngoÃ i giá»›i háº¡n máº£ng"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Exception</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">){</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Má»™t sá»‘ exception khÃ¡c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"MÃ£ ngoÃ i try-catch"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Äoáº¡n mÃ£ nÃ y khi thá»±c thi, khá»‘i <code>catch</code> Ä‘áº§u tiÃªn sáº½ Ä‘Æ°á»£c thá»±c thi vÃ¬ sá»‘ chia lÃ  0; tÃ´i sáº½ thay Ä‘á»•i Ä‘oáº¡n mÃ£ má»™t chÃºt.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> test1</span><span style="color:#E06C75;--shiki-dark:#E06C75"> () {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75">{</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> arr[]</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">7</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        arr[</span><span style="color:#D19A66;--shiki-dark:#D19A66">9</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66">30</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">/</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"CÃ¢u cuá»‘i cÃ¹ng trong khá»‘i try"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ArithmeticException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">){</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Sá»‘ chia pháº£i lÃ  0"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ArrayIndexOutOfBoundsException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">){</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Truy cáº­p ngoÃ i giá»›i háº¡n máº£ng"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Exception</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">){</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Má»™t sá»‘ exception khÃ¡c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"MÃ£ ngoÃ i try-catch"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Khá»‘i <code>catch</code> thá»© hai sáº½ thá»±c thi vÃ¬ khÃ´ng xáº£y ra arithmetic exception, nhÆ°ng máº£ng Ä‘Ã£ bá»‹ truy cáº­p ngoÃ i giá»›i háº¡n</p>
<p>Sá»­a láº¡i mÃ£ má»™t chÃºt:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> test1</span><span style="color:#E06C75;--shiki-dark:#E06C75"> () {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75">{</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> arr[]</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">7</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        arr[</span><span style="color:#D19A66;--shiki-dark:#D19A66">9</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66">30</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">/</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"CÃ¢u cuá»‘i cÃ¹ng trong khá»‘i try"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ArithmeticException</span><span style="color:#E06C75;--shiki-dark:#E06C75"> | </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ArrayIndexOutOfBoundsException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">){</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Sá»‘ chia pháº£i lÃ  0"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"MÃ£ ngoÃ i try-catch"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Khi cÃ³ nhiá»u khá»‘i <code>catch</code>, cÅ©ng cÃ³ thá»ƒ gá»™p chÃºng láº¡i vá»›i nhau, sá»­ dá»¥ng dáº¥u gáº¡ch Ä‘á»©ng <code>|</code> Ä‘á»ƒ ngÄƒn cÃ¡ch.  NhÆ° váº­y tá»‘t hÆ¡n, nhÃ¬n gá»n gÃ ng hÆ¡n.</p>
<p>CÃº phÃ¡p cá»§a khá»‘i <code>finally</code> cÅ©ng khÃ´ng phá»©c táº¡p.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // MÃ£ cÃ³ thá»ƒ xáº£y ra exception</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">   // Xá»­ lÃ½ exception</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span><span style="color:#C678DD;--shiki-dark:#C678DD">finally</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">   // MÃ£ pháº£i Ä‘Æ°á»£c thá»±c thi</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>TrÆ°á»›c khi cÃ³ <a href="try-with-resources"><code>try-with-resources</code></a>, khá»‘i <code>finally</code> thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ Ä‘Ã³ng cÃ¡c tÃ i nguyÃªn nhÆ° socket, káº¿t ná»‘i cÆ¡ sá»Ÿ dá»¯ liá»‡u, luá»“ng IO, v.v.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">OutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> osf </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"filename"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">OutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> osb </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(osf)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectOutput</span><span style="color:#E06C75;--shiki-dark:#E06C75"> op </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(osb)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    output</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(writableObject);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">finally</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    op</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>ChÃº Ã½, khi sá»­ dá»¥ng khá»‘i <code>finally</code>, cáº§n tuÃ¢n thá»§ cÃ¡c quy táº¯c sau:</p>
<ul>
<li>Khá»‘i <code>finally</code> pháº£i Ä‘i kÃ¨m vá»›i khá»‘i <code>try</code>, khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng <code>finally</code> má»™t mÃ¬nh. TrÃ¬nh biÃªn dá»‹ch cÅ©ng khÃ´ng cho phÃ©p lÃ m nhÆ° váº­y.</li>
<li>Khá»‘i <code>finally</code> khÃ´ng pháº£i lÃ  báº¯t buá»™c, cÃ³ khá»‘i <code>try</code> thÃ¬ khÃ´ng nháº¥t thiáº¿t pháº£i cÃ³ khá»‘i <code>finally</code>.</li>
<li>Náº¿u mÃ£ trong khá»‘i <code>finally</code> cÃ³ thá»ƒ xáº£y ra exception, cÅ©ng nÃªn bao bá»c báº±ng khá»‘i <code>try-catch</code>.</li>
<li>Ngay cáº£ khi trong khá»‘i <code>try</code> cÃ³ cÃ¡c cÃ¢u lá»‡nh <code>return</code>, <code>break</code>, <code>continue</code>, khá»‘i <code>finally</code> váº«n sáº½ Ä‘Æ°á»£c thá»±c thi.</li>
</ul>
<p>HÃ£y thá»­ xem thÃ¬ biáº¿t ngay:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> test2</span><span style="color:#E06C75;--shiki-dark:#E06C75"> () {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 112</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">finally</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Ngay cáº£ khi khá»‘i try cÃ³ return, khá»‘i finally váº«n sáº½ thá»±c thi"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Xem káº¿t quáº£ xuáº¥t ra:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Ngay cáº£ khi khá»‘i try cÃ³ return, khá»‘i finally váº«n sáº½ thá»±c thi</span></span></code></pre>
</div><p>CÃ³ trÆ°á»ng há»£p nÃ o mÃ  khá»‘i <code>finally</code> khÃ´ng Ä‘Æ°á»£c thá»±c thi khÃ´ng?</p>
<p>CÃ³ chá»©:</p>
<ul>
<li>Gáº·p pháº£i vÃ²ng láº·p vÃ´ táº­n.</li>
<li>Thá»±c thi lá»‡nh <code>System.exit()</code>.</li>
</ul>
<p>CÃ¢u lá»‡nh <code>System.exit()</code> vÃ  cÃ¢u lá»‡nh <code>return</code> khÃ¡c nhau, cÃ¡i trÆ°á»›c dÃ¹ng Ä‘á»ƒ thoÃ¡t chÆ°Æ¡ng trÃ¬nh, cÃ¡i sau chá»‰ quay láº¡i phÆ°Æ¡ng thá»©c gá»i trÆ°á»›c Ä‘Ã³.</p>
<p>Xem khai bÃ¡o cá»§a phÆ°Æ¡ng thá»©c Ä‘á»ƒ hiá»ƒu rÃµ hÆ¡n:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> exit</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> status)</span></span></code></pre>
</div><p>Vá» giÃ¡ trá»‹ cá»§a tham sá»‘ <code>status</code> cÅ©ng ráº¥t dá»… hiá»ƒu, náº¿u lÃ  thoÃ¡t do exception, Ä‘áº·t giÃ¡ trá»‹ khÃ¡c 0, thÆ°á»ng dÃ¹ng 1 Ä‘á»ƒ biá»ƒu thá»‹; náº¿u muá»‘n thoÃ¡t chÆ°Æ¡ng trÃ¬nh bÃ¬nh thÆ°á»ng, dÃ¹ng 0 Ä‘á»ƒ biá»ƒu thá»‹.</p>
<h3>06. TÃ³m táº¯t</h3>
<p>Xá»­ lÃ½ exception trong Java lÃ  má»™t cÆ¡ cháº¿ quan trá»ng, giÃºp chÃºng ta xá»­ lÃ½ cÃ¡c lá»—i hoáº·c exception xáº£y ra trong quÃ¡ trÃ¬nh thá»±c thi chÆ°Æ¡ng trÃ¬nh.</p>
<p>Exception Ä‘Æ°á»£c chia thÃ nh hai loáº¡i: Checked Exception vÃ  Unchecked Exception, trong Ä‘Ã³ Checked Exception cáº§n pháº£i Ä‘Æ°á»£c xá»­ lÃ½ hoáº·c khai bÃ¡o rÃµ rÃ ng trong mÃ£, cÃ²n Unchecked Exception khÃ´ng cáº§n pháº£i Ä‘Æ°á»£c xá»­ lÃ½ hoáº·c khai bÃ¡o rÃµ rÃ ng. Xá»­ lÃ½ exception thÆ°á»ng sá»­ dá»¥ng cÃ¡c khá»‘i try-catch-finally hoáº·c sá»­ dá»¥ng tá»« khÃ³a throws Ä‘á»ƒ nÃ©m exception cho ngÆ°á»i gá»i xá»­ lÃ½.</p>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ tÃ³m táº¯t vá» xá»­ lÃ½ exception trong Java:</p>
<ul>
<li>Sá»­ dá»¥ng khá»‘i try-catch Ä‘á»ƒ báº¯t vÃ  xá»­ lÃ½ exception, giÃºp trÃ¡nh viá»‡c chÆ°Æ¡ng trÃ¬nh bá»‹ sáº­p do exception.</li>
<li>CÃ³ thá»ƒ sá»­ dá»¥ng nhiá»u khá»‘i catch Ä‘á»ƒ báº¯t cÃ¡c loáº¡i exception khÃ¡c nhau vÃ  xá»­ lÃ½ chÃºng má»™t cÃ¡ch khÃ¡c nhau.</li>
<li>CÃ³ thá»ƒ sá»­ dá»¥ng khá»‘i finally Ä‘á»ƒ thá»±c hiá»‡n má»™t sá»‘ cÃ´ng viá»‡c dá»n dáº¹p cáº§n thiáº¿t, dÃ¹ cÃ³ hay khÃ´ng xáº£y ra exception.</li>
<li>CÃ³ thá»ƒ sá»­ dá»¥ng tá»« khÃ³a throw Ä‘á»ƒ tá»± Ä‘á»™ng nÃ©m exception, nháº±m chá»‰ rÃµ má»™t sá»‘ tÃ¬nh huá»‘ng exception trong chÆ°Æ¡ng trÃ¬nh.</li>
<li>CÃ³ thá»ƒ sá»­ dá»¥ng tá»« khÃ³a throws Ä‘á»ƒ nÃ©m exception cho ngÆ°á»i gá»i xá»­ lÃ½, Ä‘Æ°á»£c khai bÃ¡o trong chá»¯ kÃ½ phÆ°Æ¡ng thá»©c.</li>
<li>Checked Exception thÆ°á»ng lÃ  do cÃ¡c yáº¿u tá»‘ bÃªn ngoÃ i gÃ¢y ra, cáº§n pháº£i Ä‘Æ°á»£c xá»­ lÃ½ hoáº·c khai bÃ¡o rÃµ rÃ ng trong mÃ£.</li>
<li>Unchecked Exception thÆ°á»ng lÃ  do logic hoáº·c dá»¯ liá»‡u báº¥t thÆ°á»ng bÃªn trong chÆ°Æ¡ng trÃ¬nh gÃ¢y ra, cÃ³ thá»ƒ khÃ´ng cáº§n xá»­ lÃ½ hoáº·c xá»­ lÃ½ khi cáº§n thiáº¿t.</li>
<li>Khi xá»­ lÃ½ exception, nÃªn xá»­ lÃ½ theo loáº¡i exception cá»¥ thá»ƒ, cháº³ng háº¡n nhÆ° cÃ³ thá»ƒ thá»­ má»Ÿ láº¡i tá»‡p, thiáº¿t láº­p láº¡i káº¿t ná»‘i máº¡ng, v.v.</li>
<li>Xá»­ lÃ½ exception nÃªn dá»±a vÃ o nhu cáº§u kinh doanh cá»¥ thá»ƒ vÃ  cÃ¡c nguyÃªn táº¯c thiáº¿t káº¿, trÃ¡nh viá»‡c báº¯t vÃ  xá»­ lÃ½ exception quÃ¡ má»©c, tá»« Ä‘Ã³ giáº£m hiá»‡u suáº¥t vÃ  kháº£ nÄƒng báº£o trÃ¬ cá»§a chÆ°Æ¡ng trÃ¬nh.</li>
</ul>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240703210645.png" type="image/png"/>
    </item>
    <item>
      <title>Print Stream</title>
      <link>https://vanhung4499.github.io/programming/java/IO/print.html</link>
      <guid>https://vanhung4499.github.io/programming/java/IO/print.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Print Stream</source>
      <description>Print Stream Trong sá»± nghiá»‡p cá»§a tÃ´i, táº§n suáº¥t sá»­ dá»¥ng System.out.println() cÃ³ láº½ khÃ´ng kÃ©m gÃ¬ táº§n suáº¥t sá»­ dá»¥ng phÆ°Æ¡ng thá»©c main. System.out tráº£ vá» má»™t PrintStream. NgoÃ i ra, cÃ²...</description>
      <category>java</category>
      <pubDate>Wed, 03 Jul 2024 05:00:24 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Trong sá»± nghiá»‡p cá»§a tÃ´i, táº§n suáº¥t sá»­ dá»¥ng <code>System.out.println()</code> cÃ³ láº½ khÃ´ng kÃ©m gÃ¬ táº§n suáº¥t sá»­ dá»¥ng phÆ°Æ¡ng thá»©c main. <code>System.out</code> tráº£ vá» má»™t <code>PrintStream</code>.</p>
<p>NgoÃ i ra, cÃ²n cÃ³ má»™t anh em sinh Ä‘Ã´i khÃ¡c lÃ  PrintWriter. PrintStream lÃ  má»™t lá»›p con cá»§a OutputStream, cÃ²n PrintWriter lÃ  má»™t lá»›p con cá»§a Writer, tá»©c lÃ  má»™t <a href="/programming/java/IO/programming/java/io/stream.html" target="_blank">byte stream</a> vÃ  má»™t <a href="character">character stream</a>.</p>
<p>print stream cÃ³ cÃ¡c Ä‘áº·c Ä‘iá»ƒm sau:</p>
<ul>
<li>CÃ³ thá»ƒ tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i loáº¡i dá»¯ liá»‡u: print stream cÃ³ thá»ƒ chuyá»ƒn Ä‘á»•i cÃ¡c loáº¡i dá»¯ liá»‡u khÃ¡c nhau thÃ nh chuá»—i vÃ  xuáº¥t ra dÃ²ng Ä‘áº§u ra Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh.</li>
<li>CÃ³ thá»ƒ tá»± Ä‘á»™ng thá»±c hiá»‡n thao tÃ¡c xuá»‘ng dÃ²ng: print stream cÃ³ thá»ƒ tá»± Ä‘á»™ng thÃªm kÃ½ tá»± xuá»‘ng dÃ²ng á»Ÿ cuá»‘i chuá»—i xuáº¥t ra, tiá»‡n lá»£i cho viá»‡c kiá»ƒm soÃ¡t Ä‘á»‹nh dáº¡ng khi xuáº¥t nhiá»u chuá»—i.</li>
<li>CÃ³ thá»ƒ xuáº¥t ra mÃ n hÃ¬nh hoáº·c tá»‡p tin: print stream cÃ³ thá»ƒ xuáº¥t dá»¯ liá»‡u ra mÃ n hÃ¬nh hoáº·c tá»‡p tin, thuáº­n tiá»‡n cho viá»‡c gá»¡ lá»—i vÃ  ghi log (máº·c dÃ¹ trong mÃ´i trÆ°á»ng sáº£n xuáº¥t thÃ¬ nÃªn sá»­ dá»¥ng Logback, ELK, v.v.).</li>
</ul>
<p>CÃ¡c phÆ°Æ¡ng thá»©c phá»• biáº¿n cá»§a lá»›p PrintStream bao gá»“m:</p>
<ul>
<li><code>print()</code>: Xuáº¥t biá»ƒu diá»…n chuá»—i cá»§a má»™t Ä‘á»‘i tÆ°á»£ng.</li>
<li><code>println()</code>: Xuáº¥t biá»ƒu diá»…n chuá»—i cá»§a má»™t Ä‘á»‘i tÆ°á»£ng vÃ  thÃªm má»™t kÃ½ tá»± xuá»‘ng dÃ²ng á»Ÿ cuá»‘i.</li>
<li><code>printf()</code>: Sá»­ dá»¥ng chuá»—i Ä‘á»‹nh dáº¡ng vÃ  tham sá»‘ chá»‰ Ä‘á»‹nh Ä‘á»ƒ xuáº¥t chuá»—i Ä‘Æ°á»£c Ä‘á»‹nh dáº¡ng.</li>
</ul>
<p>HÃ£y xem má»™t vÃ­ dá»¥ Ä‘á»ƒ tráº£i nghiá»‡m.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">PrintStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ps </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">ps</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Hung"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">ps</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"H "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">ps</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"u "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">ps</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"n "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">ps</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"g "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">ps</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">ps</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Nameï¼š%sï¼ŒAgeï¼š%dï¼ŒScoreï¼š%f"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Hung"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">18</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">99.9</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Trong vÃ­ dá»¥ nÃ y, chÃºng ta táº¡o má»™t Ä‘á»‘i tÆ°á»£ng PrintStream ps, nÃ³ xuáº¥t ra mÃ n hÃ¬nh. ChÃºng ta sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c print vÃ  println cá»§a ps Ä‘á»ƒ xuáº¥t má»™t sá»‘ chuá»—i.</p>
<p>Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c printf Ä‘á»ƒ xuáº¥t má»™t chuá»—i Ä‘á»‹nh dáº¡ng, trong Ä‘Ã³ %s, %d vÃ  %.2f láº§n lÆ°á»£t Ä‘áº¡i diá»‡n cho Ä‘á»‹nh dáº¡ng chuá»—i, sá»‘ nguyÃªn vÃ  sá»‘ tháº­p phÃ¢n. ChÃºng ta sá»­ dá»¥ng danh sÃ¡ch tham sá»‘ phÃ¢n cÃ¡ch báº±ng dáº¥u pháº©y Ä‘á»ƒ chá»‰ Ä‘á»‹nh cÃ¡c giÃ¡ trá»‹ cáº§n xuáº¥t.</p>
<p>HÃ£y nÃ³i chi tiáº¿t vá» phÆ°Æ¡ng thá»©c printf.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PrintStream</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> printf</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> format</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Object</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">...</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> args</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>Trong Ä‘Ã³, tham sá»‘ format lÃ  chuá»—i Ä‘á»‹nh dáº¡ng vÃ  tham sá»‘ args lÃ  danh sÃ¡ch cÃ¡c tham sá»‘ cáº§n xuáº¥t. Chuá»—i Ä‘á»‹nh dáº¡ng chá»©a cÃ¡c kÃ½ tá»± thÃ´ng thÆ°á»ng vÃ  cÃ¡c chá»‰ Ä‘á»‹nh chuyá»ƒn Ä‘á»•i. CÃ¡c kÃ½ tá»± thÃ´ng thÆ°á»ng lÃ  cÃ¡c kÃ½ tá»± khÃ´ng pháº£i chá»‰ Ä‘á»‹nh chuyá»ƒn Ä‘á»•i, chÃºng Ä‘Æ°á»£c xuáº¥t trá»±c tiáº¿p khi xuáº¥t ra. Chá»‰ Ä‘á»‹nh chuyá»ƒn Ä‘á»•i bao gá»“m dáº¥u pháº§n trÄƒm (%) vÃ  má»™t hoáº·c nhiá»u kÃ½ tá»±, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ chá»‰ Ä‘á»‹nh Ä‘á»‹nh dáº¡ng vÃ  loáº¡i dá»¯ liá»‡u cáº§n xuáº¥t.</p>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c chá»‰ Ä‘á»‹nh chuyá»ƒn Ä‘á»•i thÆ°á»ng dÃ¹ng trong Java vÃ  Ä‘á»‹nh dáº¡ng Ä‘áº§u ra tÆ°Æ¡ng á»©ng:</p>
<ul>
<li><code>%s</code>: Xuáº¥t má»™t chuá»—i.</li>
<li><code>%d</code> hoáº·c <code>%i</code>: Xuáº¥t má»™t sá»‘ nguyÃªn há»‡ tháº­p phÃ¢n.</li>
<li><code>%x</code> hoáº·c <code>%X</code>: Xuáº¥t má»™t sá»‘ nguyÃªn há»‡ tháº­p lá»¥c phÃ¢n, <code>%x</code> xuáº¥t chá»¯ cÃ¡i thÆ°á»ng, <code>%X</code> xuáº¥t chá»¯ cÃ¡i hoa.</li>
<li><code>%f</code> hoáº·c <code>%F</code>: Xuáº¥t má»™t sá»‘ tháº­p phÃ¢n.</li>
<li><code>%e</code> hoáº·c <code>%E</code>: Xuáº¥t má»™t sá»‘ tháº­p phÃ¢n dáº¡ng khoa há»c, <code>%e</code> xuáº¥t chá»¯ cÃ¡i thÆ°á»ng e, <code>%E</code> xuáº¥t chá»¯ cÃ¡i hoa E.</li>
<li><code>%g</code> hoáº·c <code>%G</code>: Xuáº¥t má»™t sá»‘ tháº­p phÃ¢n, tá»± Ä‘á»™ng chá»n Ä‘á»‹nh dáº¡ng <code>%f</code> hoáº·c <code>%e/%E</code> Ä‘á»ƒ xuáº¥t.</li>
<li><code>%c</code>: Xuáº¥t má»™t kÃ½ tá»±.</li>
<li><code>%b</code>: Xuáº¥t má»™t giÃ¡ trá»‹ boolean.</li>
<li><code>%h</code>: Xuáº¥t má»™t mÃ£ bÄƒm (há»‡ tháº­p lá»¥c phÃ¢n).</li>
<li><code>%n</code>: KÃ½ tá»± xuá»‘ng dÃ²ng.</li>
</ul>
<p>NgoÃ i cÃ¡c chá»‰ Ä‘á»‹nh chuyá»ƒn Ä‘á»•i, phÆ°Æ¡ng thá»©c printf cá»§a Java cÃ²n há»— trá»£ má»™t sá»‘ chá»‰ Ä‘á»‹nh sá»­a Ä‘á»•i, dÃ¹ng Ä‘á»ƒ chá»‰ Ä‘á»‹nh Ä‘á»™ rá»™ng, Ä‘á»™ chÃ­nh xÃ¡c, cÃ¡ch cÄƒn chá»‰nh, v.v. cá»§a Ä‘áº§u ra.</p>
<ul>
<li>Chá»‰ Ä‘á»‹nh Ä‘á»™ rá»™ng: DÃ¹ng sá»‘ Ä‘á»ƒ chá»‰ Ä‘á»‹nh Ä‘á»™ rá»™ng tá»‘i thiá»ƒu cá»§a Ä‘áº§u ra, náº¿u dá»¯ liá»‡u Ä‘áº§u ra khÃ´ng Ä‘á»§ Ä‘á»™ rá»™ng chá»‰ Ä‘á»‹nh thÃ¬ sáº½ thÃªm khoáº£ng tráº¯ng hoáº·c sá»‘ khÃ´ng á»Ÿ bÃªn trÃ¡i hoáº·c bÃªn pháº£i.</li>
<li>Chá»‰ Ä‘á»‹nh Ä‘á»™ chÃ­nh xÃ¡c: DÃ¹ng dáº¥u cháº¥m (.) vÃ  sá»‘ Ä‘á»ƒ chá»‰ Ä‘á»‹nh Ä‘á»™ chÃ­nh xÃ¡c cá»§a sá»‘ tháº­p phÃ¢n hoáº·c chuá»—i, Ä‘á»‘i vá»›i sá»‘ tháº­p phÃ¢n, chá»‰ Ä‘á»‹nh sá»‘ chá»¯ sá»‘ sau dáº¥u tháº­p phÃ¢n, Ä‘á»‘i vá»›i chuá»—i, chá»‰ Ä‘á»‹nh sá»‘ kÃ½ tá»± cáº§n xuáº¥t.</li>
<li>Chá»‰ Ä‘á»‹nh cÄƒn chá»‰nh: DÃ¹ng dáº¥u trá»« (-) hoáº·c sá»‘ khÃ´ng (0) Ä‘á»ƒ chá»‰ Ä‘á»‹nh cÃ¡ch cÄƒn chá»‰nh Ä‘áº§u ra, dáº¥u trá»« biá»ƒu thá»‹ cÄƒn chá»‰nh trÃ¡i, sá»‘ khÃ´ng biá»ƒu thá»‹ cÄƒn chá»‰nh pháº£i vÃ  thÃªm sá»‘ khÃ´ng.</li>
</ul>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ vÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> num </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 123</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"%5d</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, num);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Xuáº¥t "  123"</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"%-5d</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, num);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Xuáº¥t "123  "</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"%05d</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, num);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Xuáº¥t "00123"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">double</span><span style="color:#E06C75;--shiki-dark:#E06C75"> pi </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Math</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PI</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"%10.2f</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, pi);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Xuáº¥t "      3.14"</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"%-10.4f</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, pi);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Xuáº¥t "3.1416    "</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "Hung"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"%10s</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, name);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Xuáº¥t "     Hung"</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"%-10s</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, name);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Xuáº¥t "Hung     "</span></span></code></pre>
</div><p>Cá»¥ thá»ƒ,</p>
<ul>
<li>ChÃºng ta sá»­ dá»¥ng <code>%5d</code> Ä‘á»ƒ chá»‰ Ä‘á»‹nh sá»‘ nguyÃªn Ä‘áº§u ra chiáº¿m 5 kÃ½ tá»± Ä‘á»™ rá»™ng, pháº§n thiáº¿u sáº½ Ä‘Æ°á»£c thÃªm khoáº£ng tráº¯ng á»Ÿ bÃªn trÃ¡i.</li>
<li>Sá»­ dá»¥ng <code>%-5d</code> Ä‘á»ƒ chá»‰ Ä‘á»‹nh sá»‘ nguyÃªn Ä‘áº§u ra chiáº¿m 5 kÃ½ tá»± Ä‘á»™ rá»™ng, pháº§n thiáº¿u sáº½ Ä‘Æ°á»£c thÃªm khoáº£ng tráº¯ng á»Ÿ bÃªn pháº£i.</li>
<li>Sá»­ dá»¥ng <code>%05d</code> Ä‘á»ƒ chá»‰ Ä‘á»‹nh sá»‘ nguyÃªn Ä‘áº§u ra chiáº¿m 5 kÃ½ tá»± Ä‘á»™ rá»™ng, pháº§n thiáº¿u sáº½ Ä‘Æ°á»£c thÃªm sá»‘ khÃ´ng á»Ÿ bÃªn trÃ¡i.</li>
<li>Sá»­ dá»¥ng <code>%10.2f</code> Ä‘á»ƒ chá»‰ Ä‘á»‹nh sá»‘ tháº­p phÃ¢n Ä‘áº§u ra chiáº¿m 10 kÃ½ tá»± Ä‘á»™ rá»™ng, giá»¯ láº¡i 2 chá»¯ sá»‘ tháº­p phÃ¢n, pháº§n thiáº¿u sáº½ Ä‘Æ°á»£c thÃªm khoáº£ng tráº¯ng á»Ÿ bÃªn trÃ¡i.</li>
<li>Sá»­ dá»¥ng <code>%-10.4f</code> Ä‘á»ƒ chá»‰ Ä‘á»‹nh sá»‘ tháº­p phÃ¢n Ä‘áº§u ra chiáº¿m 10 kÃ½ tá»± Ä‘á»™ rá»™ng, giá»¯ láº¡i 4 chá»¯ sá»‘ tháº­p phÃ¢n, pháº§n thiáº¿u sáº½ Ä‘Æ°á»£c thÃªm khoáº£ng tráº¯ng á»Ÿ bÃªn pháº£i.</li>
<li>Sá»­ dá»¥ng <code>%10s</code> Ä‘á»ƒ chá»‰ Ä‘á»‹nh chuá»—i Ä‘áº§u ra chiáº¿m 10 kÃ½ tá»± Ä‘á»™ rá»™ng, pháº§n thiáº¿u sáº½ Ä‘Æ°á»£c thÃªm khoáº£ng tráº¯ng á»Ÿ bÃªn trÃ¡i.</li>
<li>Sá»­ dá»¥ng <code>%-10s</code> Ä‘á»ƒ chá»‰ Ä‘á»‹nh chuá»—i Ä‘áº§u ra chiáº¿m 10 kÃ½ tá»± Ä‘á»™ rá»™ng, pháº§n thiáº¿u sáº½ Ä‘Æ°á»£c thÃªm khoáº£ng tráº¯ng á»Ÿ bÃªn pháº£i.</li>
</ul>
<p>Tiáº¿p theo, chÃºng ta hÃ£y xem má»™t vÃ­ dá»¥ vá» PrintWriter:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">PrintWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> writer </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> PrintWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"output.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">writer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Hung"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">writer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Age: %d.</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">18</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">writer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>TrÆ°á»›c tiÃªn, chÃºng ta táº¡o má»™t Ä‘á»‘i tÆ°á»£ng PrintWriter, hÃ m dá»±ng cá»§a nÃ³ nháº­n má»™t Ä‘á»‘i tÆ°á»£ng Writer lÃ m tham sá»‘. á» Ä‘Ã¢y, chÃºng ta sá»­ dá»¥ng FileWriter Ä‘á»ƒ táº¡o má»™t dÃ²ng Ä‘áº§u ra tá»‡p vÃ  truyá»n nÃ³ vÃ o hÃ m dá»±ng cá»§a PrintWriter. Sau Ä‘Ã³, chÃºng ta sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c println vÃ  printf cá»§a PrintWriter Ä‘á»ƒ xuáº¥t hai dÃ²ng ná»™i dung, trong Ä‘Ã³ phÆ°Æ¡ng thá»©c printf cÃ³ thá»ƒ nháº­n chuá»—i Ä‘á»‹nh dáº¡ng. Cuá»‘i cÃ¹ng, chÃºng ta gá»i phÆ°Æ¡ng thá»©c close cá»§a PrintWriter Ä‘á»ƒ Ä‘Ã³ng dÃ²ng Ä‘áº§u ra.</p>
<p>ChÃºng ta cÅ©ng cÃ³ thá»ƒ khÃ´ng táº¡o Ä‘á»‘i tÆ°á»£ng FileWriter, mÃ  chá»‰ Ä‘á»‹nh tÃªn tá»‡p trá»±c tiáº¿p.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">PrintWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> pw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> PrintWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"output.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">pw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Hung"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">pw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Age: %d.</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">18</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">pw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>ÄÆ°á»£c rá»“i, vá» print stream chÃºng ta nÃ³i Ä‘áº¿n Ä‘Ã¢y thÃ´i, khÃ¡ Ä‘Æ¡n giáº£n. Äá»‘i vá»›i má»™t sá»‘ quy táº¯c cá»§a printf, khi cáº§n sá»­ dá»¥ng thÃ¬ cÃ³ thá»ƒ tra cá»©u hÆ°á»›ng dáº«n sá»­ dá»¥ng hoáº·c xem tÃ i liá»‡u API, khÃ´ng cáº§n nhá»› háº¿t.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Transient</title>
      <link>https://vanhung4499.github.io/programming/java/IO/transient.html</link>
      <guid>https://vanhung4499.github.io/programming/java/IO/transient.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Transient</source>
      <description>Transient Báº¡n ráº¥t rÃ nh vá» Java, nhÆ°ng nhiá»u kiáº¿n thá»©c cÆ¡ báº£n cá»§a Java láº¡i khÃ´ng biáº¿t, vÃ­ dá»¥ nhÆ° tá»« khÃ³a transient trÆ°á»›c Ä‘Ã¢y chÆ°a tá»«ng sá»­ dá»¥ng qua nÃªn khÃ´ng biáº¿t nÃ³ cÃ³ tÃ¡c dá»¥ng g...</description>
      <category>java</category>
      <pubDate>Wed, 03 Jul 2024 05:00:24 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Báº¡n ráº¥t rÃ nh vá» Java, nhÆ°ng nhiá»u kiáº¿n thá»©c cÆ¡ báº£n cá»§a Java láº¡i khÃ´ng biáº¿t, vÃ­ dá»¥ nhÆ° tá»« khÃ³a <code>transient</code> trÆ°á»›c Ä‘Ã¢y chÆ°a tá»«ng sá»­ dá»¥ng qua nÃªn khÃ´ng biáº¿t nÃ³ cÃ³ tÃ¡c dá»¥ng gÃ¬. HÃ´m nay khi Ä‘i phá»ng váº¥n á»Ÿ ngÃ¢n hÃ ng, nhÃ  tuyá»ƒn dá»¥ng Ä‘Ã£ há»i vá» tá»« khÃ³a nÃ y: "HÃ£y nÃ³i vá» tá»« khÃ³a <code>transient</code> trong Java Ä‘i." Káº¿t quáº£ lÃ  báº¡n hoÃ n toÃ n bá»‹ bá»‘i rá»‘i.</p>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  tá»•ng káº¿t cá»§a anh áº¥y sau khi phá»ng váº¥n khÃ´ng thÃ nh cÃ´ng, chia sáº» Ä‘á»ƒ má»i ngÆ°á»i cÃ¹ng há»c há»i. ÄÆ°á»£c rá»“i, khÃ´ng nÃ³i nhiá»u ná»¯a, báº¯t Ä‘áº§u nÃ o:</p>
<h3>01. TÃ¡c dá»¥ng vÃ  cÃ¡ch sá»­ dá»¥ng cá»§a tá»« khÃ³a transient</h3>
<p>ChÃºng ta biáº¿t ráº±ng, má»™t Ä‘á»‘i tÆ°á»£ng chá»‰ cáº§n triá»ƒn khai interface <a href="Serializbale">Serializable</a>, thÃ¬ nÃ³ cÃ³ thá»ƒ Ä‘Æ°á»£c <a href="serialize">serialize</a>.</p>
<p>Trong quÃ¡ trÃ¬nh phÃ¡t triá»ƒn thá»±c táº¿, chÃºng ta thÆ°á»ng gáº·p pháº£i váº¥n Ä‘á» nhÆ° váº­y: má»™t sá»‘ trÆ°á»ng cá»§a lá»›p cáº§n serialize, trong khi má»™t sá»‘ trÆ°á»ng khÃ¡c khÃ´ng cáº§n, vÃ­ dá»¥ nhÆ° má»™t sá»‘ thÃ´ng tin nháº¡y cáº£m cá»§a ngÆ°á»i dÃ¹ng (nhÆ° máº­t kháº©u, sá»‘ tháº» ngÃ¢n hÃ ng, v.v.). VÃ¬ lÃ½ do an toÃ n, khÃ´ng muá»‘n truyá»n hoáº·c lÆ°u trá»¯ trÃªn tá»‡p Ä‘Ä©a trong cÃ¡c hoáº¡t Ä‘á»™ng máº¡ng, nhá»¯ng trÆ°á»ng nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c thÃªm tá»« khÃ³a <code>transient</code>.</p>
<p>Cáº§n lÆ°u Ã½ ráº±ng, cÃ¡c biáº¿n thÃ nh viÃªn Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi tá»« khÃ³a <code>transient</code> sáº½ Ä‘Æ°á»£c tá»± Ä‘á»™ng khá»Ÿi táº¡o láº¡i giÃ¡ trá»‹ máº·c Ä‘á»‹nh khi deserialize, vÃ­ dá»¥ nhÆ° cÃ¡c kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n sáº½ lÃ  0, cÃ¡c kiá»ƒu tham chiáº¿u sáº½ lÃ  null.</p>
<p>HÃ£y xem vÃ­ dá»¥:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TransientTest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        </span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        User</span><span style="color:#E06C75;--shiki-dark:#E06C75"> user</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> User</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        user</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setUsername</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        user</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setPasswd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"123456"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        </span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"read before Serializable: "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"username: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> user</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getUsername</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">err</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"password: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> user</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getPasswd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> os</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectOutputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                    new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"user.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            os</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(user); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi Ä‘á»‘i tÆ°á»£ng User vÃ o tá»‡p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            os</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">flush</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            os</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            ObjectInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> is</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectInputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">                    "user.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            user </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (User) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">is</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c dá»¯ liá»‡u User tá»« luá»“ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            is</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            </span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">read after Serializable: "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"username: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> user</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getUsername</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">err</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"password: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> user</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getPasswd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ClassNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> User</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Serializable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> serialVersionUID </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 8294180014912103005L</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75">  </span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> username</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> transient</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> passwd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getUsername</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> username;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> setUsername</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> username</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">username</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> username;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getPasswd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> passwd;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> setPasswd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> passwd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">passwd</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> passwd;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Káº¿t quáº£ Ä‘áº§u ra:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>read before Serializable:</span></span>
<span class="line"><span>username: Tom</span></span>
<span class="line"><span>password: 123456 </span></span>
<span class="line"><span>read after Serializable:</span></span>
<span class="line"><span>username: Tom</span></span>
<span class="line"><span>password: null</span></span></code></pre>
</div><p>TrÆ°á»ng máº­t kháº©u lÃ  null, Ä‘iá»u nÃ y cho tháº¥y ráº±ng khi deserialize, thÃ´ng tin nÃ y khÃ´ng Ä‘Æ°á»£c láº¥y tá»« tá»‡p.</p>
<h3>02. Tá»•ng káº¿t vá» cÃ¡ch sá»­ dá»¥ng transient</h3>
<ol>
<li>
<p>Má»™t khi trÆ°á»ng Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi <code>transient</code>, biáº¿n thÃ nh viÃªn sáº½ khÃ´ng cÃ²n lÃ  má»™t pháº§n cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c lÆ°u trá»¯, giÃ¡ trá»‹ cá»§a biáº¿n nÃ y khÃ´ng thá»ƒ truy cáº­p Ä‘Æ°á»£c sau khi serialize.</p>
</li>
<li>
<p>Tá»« khÃ³a <code>transient</code> chá»‰ cÃ³ thá»ƒ sá»­a Ä‘á»•i trÆ°á»ng, khÃ´ng thá»ƒ sá»­a Ä‘á»•i phÆ°Æ¡ng thá»©c vÃ  lá»›p.</p>
</li>
<li>
<p>CÃ¡c trÆ°á»ng Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi tá»« khÃ³a <code>transient</code> khÃ´ng thá»ƒ Ä‘Æ°á»£c serialize, vÃ  má»™t biáº¿n tÄ©nh (Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi tá»« khÃ³a <a href="/programming/java/oo/static">static</a>) dÃ¹ cÃ³ Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi <code>transient</code> hay khÃ´ng, Ä‘á»u khÃ´ng thá»ƒ Ä‘Æ°á»£c serialize nhÆ° Ä‘Ã£ nÃ³i trÆ°á»›c Ä‘Ã³ <a href="serializbale">á»Ÿ Ä‘Ã¢y</a>.</p>
</li>
</ol>
<p>HÃ£y xem vÃ­ dá»¥:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TransientTest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        </span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        User</span><span style="color:#E06C75;--shiki-dark:#E06C75"> user</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> User</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        user</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setUsername</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        user</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setPasswd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"123456"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        </span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"read before Serializable: "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"username: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> user</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getUsername</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">err</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"password: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> user</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getPasswd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> os</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectOutputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                    new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"user.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            os</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(user); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi Ä‘á»‘i tÆ°á»£ng User vÃ o tá»‡p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            os</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">flush</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            os</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Thay Ä‘á»•i giÃ¡ trá»‹ cá»§a username trÆ°á»›c khi deserialize</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            User</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">username</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "Jerry"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            </span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            ObjectInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> is</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectInputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">                    "user.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            user </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (User) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">is</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c dá»¯ liá»‡u User tá»« luá»“ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            is</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            </span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">read after Serializable: "</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"username: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> user</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getUsername</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">err</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"password: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> user</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getPasswd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ClassNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> User</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Serializable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> serialVersionUID </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 8294180014912103005L</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75">  </span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> username</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> transient</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> passwd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getUsername</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> username;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> setUsername</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> username</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">username</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> username;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getPasswd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> passwd;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> setPasswd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> passwd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">passwd</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> passwd;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Káº¿t quáº£ Ä‘áº§u ra:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>read before Serializable:</span></span>
<span class="line"><span>username: Tom</span></span>
<span class="line"><span>password: 123456 </span></span>
<span class="line"><span>read after Serializable:</span></span>
<span class="line"><span>username: Jerry</span></span>
<span class="line"><span>password: null</span></span></code></pre>
</div><p>TrÆ°á»›c khi serialize, trÆ°á»ng <code>username</code> Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi <code>static</code> cÃ³ giÃ¡ trá»‹ lÃ  Tom, sau Ä‘Ã³ chÃºng ta thay Ä‘á»•i giÃ¡ trá»‹ cá»§a nÃ³ thÃ nh Jerry trÆ°á»›c khi deserialize. Náº¿u nhÆ° trÆ°á»ng Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi <code>static</code> cÃ³ thá»ƒ giá»¯ Ä‘Æ°á»£c tráº¡ng thÃ¡i, thÃ¬ sau khi deserialize, nÃ³ nÃªn cÃ³ giÃ¡ trá»‹ lÃ  Tom, Ä‘Ãºng khÃ´ng?</p>
<p>NhÆ°ng káº¿t quáº£ láº¡i lÃ  Jerry, Ä‘iá»u nÃ y chá»©ng minh cho káº¿t luáº­n trÆ°á»›c Ä‘Ã³ cá»§a chÃºng ta: <strong>TrÆ°á»ng Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi <code>static</code> khÃ´ng thá»ƒ Ä‘Æ°á»£c serialize</strong>.</p>
<h3>03. CÃ¡c trÆ°á»ng Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi transient thá»±c sá»± khÃ´ng thá»ƒ Ä‘Æ°á»£c serialize?</h3>
<p>HÃ£y suy nghÄ© vá» vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ExternalizableTest</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Externalizable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> transient</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> content </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "ÄÃºng váº­y, tÃ´i sáº½ Ä‘Æ°á»£c serialize, dÃ¹ tÃ´i cÃ³ Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi tá»« khÃ³a transient hay khÃ´ng"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> writeExternal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectOutput</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(content);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> readExternal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectInput</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            ClassNotFoundException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        content </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (String) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        </span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        ExternalizableTest</span><span style="color:#E06C75;--shiki-dark:#E06C75"> et</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ExternalizableTest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        ObjectOutput</span><span style="color:#E06C75;--shiki-dark:#E06C75"> out</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectOutputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"test"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(et);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        ObjectInput</span><span style="color:#E06C75;--shiki-dark:#E06C75"> in</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectInputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">                "test"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)));</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        et </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (ExternalizableTest) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">et</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">content</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>HÃ£y xem káº¿t quáº£ Ä‘áº§u ra:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>ÄÃºng váº­y, tÃ´i sáº½ Ä‘Æ°á»£c serialize, dÃ¹ tÃ´i cÃ³ Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi tá»« khÃ³a transient hay khÃ´ng</span></span></code></pre>
</div><p>Táº¡i sao láº¡i nhÆ° váº­y? KhÃ´ng pháº£i nÃ³i ráº±ng cÃ¡c trÆ°á»ng Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi tá»« khÃ³a transient khÃ´ng thá»ƒ serialize sao?</p>
<p>Äá»ƒ tÃ´i giáº£i thÃ­ch. ÄÃ³ lÃ  vÃ¬ chÃºng ta Ä‘Ã£ sá»­ dá»¥ng interface Externalizable thay vÃ¬ interface Serializable. ChÃºng ta Ä‘Ã£ Ä‘á» cáº­p Ä‘áº¿n kiáº¿n thá»©c nÃ y trÆ°á»›c Ä‘Ã¢y <a href="serializbale">á»Ÿ Ä‘Ã¢y</a>.</p>
<p>Trong Java, viá»‡c serialize Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ Ä‘Æ°á»£c triá»ƒn khai báº±ng cÃ¡ch triá»ƒn khai hai interface. Náº¿u triá»ƒn khai interface Serializable, táº¥t cáº£ quÃ¡ trÃ¬nh serialize sáº½ tá»± Ä‘á»™ng diá»…n ra. Náº¿u triá»ƒn khai interface Externalizable, thÃ¬ cáº§n pháº£i chá»‰ Ä‘á»‹nh cÃ¡c trÆ°á»ng cáº§n serialize trong phÆ°Æ¡ng thá»©c writeExternal, vÃ  viá»‡c nÃ y khÃ´ng liÃªn quan Ä‘áº¿n tá»« khÃ³a transient.</p>
<p>VÃ¬ váº­y, káº¿t quáº£ Ä‘áº§u ra cá»§a vÃ­ dá»¥ lÃ  ná»™i dung cá»§a biáº¿n <code>content</code>, chá»© khÃ´ng pháº£i lÃ  <code>null</code>.</p>
<h3>04. TÃ³m táº¯t</h3>
<p>Tá»« khÃ³a transient Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ sá»­a Ä‘á»•i cÃ¡c biáº¿n thÃ nh viÃªn cá»§a lá»›p. Khi serialize Ä‘á»‘i tÆ°á»£ng, cÃ¡c biáº¿n thÃ nh viÃªn Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi transient sáº½ khÃ´ng Ä‘Æ°á»£c serialize vÃ  lÆ°u trá»¯ vÃ o tá»‡p. Má»¥c Ä‘Ã­ch cá»§a nÃ³ lÃ  thÃ´ng bÃ¡o cho JVM ráº±ng khÃ´ng cáº§n lÆ°u giÃ¡ trá»‹ cá»§a biáº¿n nÃ y khi serialize Ä‘á»‘i tÆ°á»£ng, giÃºp trÃ¡nh cÃ¡c váº¥n Ä‘á» vá» báº£o máº­t hoáº·c hiá»‡u suáº¥t. Tuy nhiÃªn, cÃ¡c biáº¿n thÃ nh viÃªn Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi transient sáº½ Ä‘Æ°á»£c khá»Ÿi táº¡o láº¡i vá»›i giÃ¡ trá»‹ máº·c Ä‘á»‹nh khi deserialize (vÃ­ dá»¥: kiá»ƒu int sáº½ Ä‘Æ°á»£c khá»Ÿi táº¡o láº¡i lÃ  0, kiá»ƒu tham chiáº¿u sáº½ Ä‘Æ°á»£c khá»Ÿi táº¡o láº¡i lÃ  null), vÃ¬ váº­y cáº§n xá»­ lÃ½ thÃ­ch há»£p trong chÆ°Æ¡ng trÃ¬nh.</p>
<p>Tá»« khÃ³a transient vÃ  static Ä‘á»u cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ sá»­a Ä‘á»•i cÃ¡c biáº¿n thÃ nh viÃªn cá»§a lá»›p. Trong Ä‘Ã³, tá»« khÃ³a transient chá»‰ ra ráº±ng biáº¿n thÃ nh viÃªn nÃ y khÃ´ng tham gia vÃ o quÃ¡ trÃ¬nh serialize vÃ  deserialize, cÃ²n tá»« khÃ³a static chá»‰ ra ráº±ng biáº¿n thÃ nh viÃªn nÃ y thuá»™c vá» lá»›p, khÃ´ng thuá»™c vá» Ä‘á»‘i tÆ°á»£ng, vÃ¬ váº­y khÃ´ng cáº§n serialize vÃ  deserialize.</p>
<p>Trong interface Serializable vÃ  Externalizable, tá»« khÃ³a transient cÅ©ng cÃ³ hÃ nh vi khÃ¡c nhau. Trong Serializable, nÃ³ chá»‰ ra ráº±ng biáº¿n thÃ nh viÃªn nÃ y khÃ´ng tham gia vÃ o quÃ¡ trÃ¬nh serialize vÃ  deserialize. Trong Externalizable, nÃ³ khÃ´ng cÃ³ tÃ¡c dá»¥ng vÃ¬ interface Externalizable yÃªu cáº§u triá»ƒn khai cÃ¡c phÆ°Æ¡ng thá»©c readExternal vÃ  writeExternal, cáº§n triá»ƒn khai serialize vÃ  deserialize báº±ng tay.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Serializable</title>
      <link>https://vanhung4499.github.io/programming/java/IO/serializable.html</link>
      <guid>https://vanhung4499.github.io/programming/java/IO/serializable.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Serializable</source>
      <description>Serializable Interface Äá»‘i vá»›i viá»‡c serialize trong Java, trÆ°á»›c Ä‘Ã¢y tÃ´i luÃ´n cÃ³ hiá»ƒu biáº¿t ráº¥t cÆ¡ báº£n - chá»‰ cáº§n triá»ƒn khai interface Serializable cho lá»›p cáº§n Ä‘Æ°á»£c serialize lÃ  xo...</description>
      <category>java</category>
      <pubDate>Tue, 02 Jul 2024 15:44:39 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Äá»‘i vá»›i viá»‡c serialize trong Java, trÆ°á»›c Ä‘Ã¢y tÃ´i luÃ´n cÃ³ hiá»ƒu biáº¿t ráº¥t cÆ¡ báº£n - chá»‰ cáº§n triá»ƒn khai interface <code>Serializable</code> cho lá»›p cáº§n Ä‘Æ°á»£c <a href="serialize">serialize</a> lÃ  xong.</p>
<p>TÃ´i dÆ°á»ng nhÆ° khÃ´ng muá»‘n nghiÃªn cá»©u sÃ¢u hÆ¡n vÃ¬ chá»‰ cáº§n biáº¿t cÃ¡ch sá»­ dá»¥ng lÃ  Ä‘á»§ rá»“i mÃ .</p>
<p>NhÆ°ng theo thá»i gian, tÃ´i gáº·p <code>Serializable</code> ngÃ y cÃ ng nhiá»u, vÃ  tÃ´i báº¯t Ä‘áº§u quan tÃ¢m Ä‘áº¿n nÃ³. ÄÃ£ Ä‘áº¿n lÃºc dÃ nh chÃºt thá»i gian Ä‘á»ƒ nghiÃªn cá»©u vá» nÃ³.</p>
<h3>01. Báº¯t Ä‘áº§u vá»›i lÃ½ thuyáº¿t</h3>
<p>Serialize trong Java lÃ  má»™t táº­p há»£p cÃ¡c tÃ­nh nÄƒng tiÃªn phong Ä‘Æ°á»£c giá»›i thiá»‡u tá»« JDK 1.1, dÃ¹ng Ä‘á»ƒ chuyá»ƒn Ä‘á»•i cÃ¡c Ä‘á»‘i tÆ°á»£ng Java thÃ nh máº£ng byte, tiá»‡n lá»£i cho viá»‡c lÆ°u trá»¯ hoáº·c truyá»n táº£i. Sau Ä‘Ã³, cÃ³ thá»ƒ chuyá»ƒn Ä‘á»•i máº£ng byte trá»Ÿ láº¡i tráº¡ng thÃ¡i ban Ä‘áº§u cá»§a Ä‘á»‘i tÆ°á»£ng Java.</p>
<p>Ã tÆ°á»Ÿng cá»§a serialize lÃ  "Ä‘Ã³ng bÄƒng" tráº¡ng thÃ¡i cá»§a Ä‘á»‘i tÆ°á»£ng, sau Ä‘Ã³ ghi vÃ o Ä‘Ä©a hoáº·c truyá»n qua máº¡ng; Ã½ tÆ°á»Ÿng cá»§a <a href="https://javabetter.cn/io/serialize.html" target="_blank" rel="noopener noreferrer">deserialize</a> lÃ  "rÃ£ Ä‘Ã´ng" tráº¡ng thÃ¡i cá»§a Ä‘á»‘i tÆ°á»£ng, khÃ´i phá»¥c láº¡i Ä‘á»‘i tÆ°á»£ng Java cÃ³ thá»ƒ sá»­ dá»¥ng.</p>
<p>CÃ³ má»™t quy táº¯c trong serialize, Ä‘Ã³ lÃ  Ä‘á»‘i tÆ°á»£ng cáº§n serialize pháº£i triá»ƒn khai interface <code>Serializable</code>, náº¿u khÃ´ng sáº½ nÃ©m ra ngoáº¡i lá»‡ <code>NotSerializableException</code>.</p>
<p>Tá»‘t, hÃ£y xem Ä‘á»‹nh nghÄ©a cá»§a interface <code>Serializable</code>:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Serializable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>KhÃ´ng cÃ²n gÃ¬ khÃ¡c ná»¯a!</p>
<p>Chá»‰ cÃ³ má»™t interface trá»‘ng thÃ´i mÃ , váº­y mÃ  láº¡i cÃ³ thá»ƒ Ä‘áº£m báº£o ráº±ng lá»›p triá»ƒn khai nÃ³ cÃ³ thá»ƒ Ä‘Æ°á»£c serialize vÃ  deserialize?</p>
<h3>02. Tiáº¿p theo lÃ  thá»±c hÃ nh</h3>
<p>TrÆ°á»›c khi tráº£ lá»i cÃ¢u há»i trÃªn, chÃºng ta hÃ£y táº¡o má»™t lá»›p (chá»‰ cÃ³ hai trÆ°á»ng vÃ  cÃ¡c phÆ°Æ¡ng thá»©c <code>getter/setter</code> tÆ°Æ¡ng á»©ng) Ä‘á»ƒ thá»±c hiá»‡n serialize vÃ  deserialize.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Wanger</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> setName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getAge</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> setAge</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">age</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Tiáº¿p theo, chÃºng ta táº¡o má»™t lá»›p thá»­ nghiá»‡m, sá»­ dá»¥ng <code>ObjectOutputStream</code> Ä‘á»ƒ ghi "Wanger 18 tuá»•i" vÃ o tá»‡p, thá»±c cháº¥t lÃ  quÃ¡ trÃ¬nh serialize; sau Ä‘Ã³ sá»­ dá»¥ng <code>ObjectInputStream</code> Ä‘á»ƒ Ä‘á»c "Wanger 18 tuá»•i" tá»« tá»‡p ra, thá»±c cháº¥t lÃ  quÃ¡ trÃ¬nh deserialize. (ChÃºng ta Ä‘Ã£ há»c vá» <a href="https://javabetter.cn/io/serialize.html" target="_blank" rel="noopener noreferrer">dÃ²ng tuáº§n tá»±</a> trÆ°á»›c Ä‘Ã¢y)</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Khá»Ÿi táº¡o</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Wanger</span><span style="color:#E06C75;--shiki-dark:#E06C75"> wanger </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Wanger</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">wanger</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ç‹äºŒ"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">wanger</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setAge</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">18</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(wanger);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi Ä‘á»‘i tÆ°á»£ng vÃ o tá»‡p</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> oos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"chenmo"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))){</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    oos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(wanger);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c Ä‘á»‘i tÆ°á»£ng tá»« tá»‡p</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ois </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"chenmo"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)))){</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Wanger</span><span style="color:#E06C75;--shiki-dark:#E06C75"> wanger1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (Wanger) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ois</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(wanger1);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75"> | </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ClassNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Tuy nhiÃªn, vÃ¬ lá»›p <code>Wanger</code> khÃ´ng triá»ƒn khai interface <code>Serializable</code>, nÃªn khi cháº¡y lá»›p thá»­ nghiá»‡m, sáº½ xáº£y ra ngoáº¡i lá»‡ vÃ  thÃ´ng tin ngÄƒn xáº¿p nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>java.io.NotSerializableException: com.cmower.java_demo.xuliehua.Wanger</span></span>
<span class="line"><span>    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1184)</span></span>
<span class="line"><span>    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)</span></span>
<span class="line"><span>    at com.cmower.java_demo.xuliehua.Test.main(Test.java:21)</span></span></code></pre>
</div><p>Dá»±a vÃ o thÃ´ng tin tá»« ngÄƒn xáº¿p, chÃºng ta xem xÃ©t phÆ°Æ¡ng thá»©c <code>writeObject0()</code> cá»§a <code>ObjectOutputStream</code>. Má»™t pháº§n mÃ£ nguá»“n nhÆ° sau:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Kiá»ƒm tra xem Ä‘á»‘i tÆ°á»£ng cÃ³ pháº£i lÃ  kiá»ƒu chuá»—i khÃ´ng, náº¿u cÃ³ thÃ¬ gá»i phÆ°Æ¡ng thá»©c writeString Ä‘á»ƒ serialize</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (obj </span><span style="color:#C678DD;--shiki-dark:#C678DD">instanceof</span><span style="color:#E06C75;--shiki-dark:#E06C75"> String) {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    writeString</span><span style="color:#E06C75;--shiki-dark:#E06C75">((String) obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> unshared)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Kiá»ƒm tra xem Ä‘á»‘i tÆ°á»£ng cÃ³ pháº£i lÃ  kiá»ƒu máº£ng khÃ´ng, náº¿u cÃ³ thÃ¬ gá»i phÆ°Æ¡ng thá»©c writeArray Ä‘á»ƒ serialize</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#C678DD;--shiki-dark:#C678DD"> if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">cl</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isArray</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    writeArray</span><span style="color:#E06C75;--shiki-dark:#E06C75">(obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> unshared)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Kiá»ƒm tra xem Ä‘á»‘i tÆ°á»£ng cÃ³ pháº£i lÃ  kiá»ƒu enum khÃ´ng, náº¿u cÃ³ thÃ¬ gá»i phÆ°Æ¡ng thá»©c writeEnum Ä‘á»ƒ serialize</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#C678DD;--shiki-dark:#C678DD"> if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (obj </span><span style="color:#C678DD;--shiki-dark:#C678DD">instanceof</span><span style="color:#E06C75;--shiki-dark:#E06C75"> Enum) {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    writeEnum</span><span style="color:#E06C75;--shiki-dark:#E06C75">((</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Enum</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#C678DD;--shiki-dark:#C678DD">?</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">) obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> unshared)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Kiá»ƒm tra xem Ä‘á»‘i tÆ°á»£ng cÃ³ pháº£i lÃ  kiá»ƒu cÃ³ thá»ƒ serialize khÃ´ng, náº¿u cÃ³ thÃ¬ gá»i phÆ°Æ¡ng thá»©c writeOrdinaryObject Ä‘á»ƒ serialize</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#C678DD;--shiki-dark:#C678DD"> if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (obj </span><span style="color:#C678DD;--shiki-dark:#C678DD">instanceof</span><span style="color:#E06C75;--shiki-dark:#E06C75"> Serializable) {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    writeOrdinaryObject</span><span style="color:#E06C75;--shiki-dark:#E06C75">(obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> unshared)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Náº¿u Ä‘á»‘i tÆ°á»£ng khÃ´ng thá»ƒ serialize, thÃ¬ nÃ©m ngoáº¡i lá»‡ NotSerializableException</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (extendedDebugInfo) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> NotSerializableException</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        cl</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#98C379;--shiki-dark:#98C379"> "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> debugInfoStack</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> NotSerializableException</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">cl</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>NÃ³i cÃ¡ch khÃ¡c, khi <code>ObjectOutputStream</code> serialize, nÃ³ sáº½ kiá»ƒm tra loáº¡i cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c serialize lÃ  loáº¡i nÃ o: chuá»—i, máº£ng, enum hay <code>Serializable</code>. Náº¿u khÃ´ng pháº£i loáº¡i nÃ o trong sá»‘ Ä‘Ã³, nÃ³ sáº½ nÃ©m ra ngoáº¡i lá»‡ <code>NotSerializableException</code>.</p>
<p>Náº¿u <code>Wanger</code> thá»±c hiá»‡n interface <code>Serializable</code>, nÃ³ cÃ³ thá»ƒ Ä‘Æ°á»£c serialize vÃ  deserialize.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Wanger</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Serializable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> serialVersionUID </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">2095916884810199532L</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Cá»¥ thá»ƒ, quÃ¡ trÃ¬nh serialize diá»…n ra nhÆ° tháº¿ nÃ o?</p>
<p>Äá»‘i vá»›i <code>ObjectOutputStream</code>, khi serialize, nÃ³ sáº½ láº§n lÆ°á»£t gá»i cÃ¡c phÆ°Æ¡ng thá»©c <code>writeObject()</code>â†’<code>writeObject0()</code>â†’<code>writeOrdinaryObject()</code>â†’<code>writeSerialData()</code>â†’<code>invokeWriteObject()</code>â†’<code>defaultWriteFields()</code>.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> defaultWriteFields</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Object</span><span style="color:#E06C75;--shiki-dark:#E06C75"> obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ObjectStreamClass</span><span style="color:#E06C75;--shiki-dark:#E06C75"> desc) throws IOException {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Láº¥y lá»›p cá»§a Ä‘á»‘i tÆ°á»£ng vÃ  kiá»ƒm tra xem nÃ³ cÃ³ thá»ƒ serialize theo máº·c Ä‘á»‹nh khÃ´ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#C678DD;--shiki-dark:#C678DD">?</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> cl </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">forClass</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">checkDefaultSerialize</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Láº¥y sá»‘ lÆ°á»£ng vÃ  giÃ¡ trá»‹ cÃ¡c trÆ°á»ng kiá»ƒu nguyÃªn thá»§y cá»§a Ä‘á»‘i tÆ°á»£ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> primDataSize </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getPrimDataSize</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getPrimFieldValues</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(obj, primVals);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Ghi giÃ¡ trá»‹ cá»§a cÃ¡c trÆ°á»ng kiá»ƒu nguyÃªn thá»§y vÃ o luá»“ng Ä‘áº§u ra</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    bout</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(primVals, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, primDataSize, </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Láº¥y giÃ¡ trá»‹ cÃ¡c trÆ°á»ng khÃ´ng pháº£i kiá»ƒu nguyÃªn thá»§y cá»§a Ä‘á»‘i tÆ°á»£ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    ObjectStreamField</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] fields </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getFields</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Object</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] objVals </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Object</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getNumObjFields</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> numPrimFields </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fields</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">length</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> objVals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getObjFieldValues</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(obj, objVals);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // VÃ²ng láº·p Ä‘á»ƒ ghi giÃ¡ trá»‹ cÃ¡c trÆ°á»ng khÃ´ng pháº£i kiá»ƒu nguyÃªn thá»§y cá»§a Ä‘á»‘i tÆ°á»£ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    for</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> objVals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">++</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Gá»i phÆ°Æ¡ng thá»©c writeObject0 Ä‘á»ƒ serialize vÃ  ghi cÃ¡c trÆ°á»ng khÃ´ng pháº£i kiá»ƒu nguyÃªn thá»§y vÃ o luá»“ng Ä‘áº§u ra</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            writeObject0</span><span style="color:#E06C75;--shiki-dark:#E06C75">(objVals[i]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fields[numPrimFields </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isUnshared</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        }</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Náº¿u xáº£y ra ngoáº¡i lá»‡ trong quÃ¡ trÃ¬nh ghi, thÃ¬ bao ngoáº¡i lá»‡ thÃ nh IOException vÃ  nÃ©m ra</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> ex</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (abortIOException </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                abortIOException </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ex</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Váº­y deserialize diá»…n ra nhÆ° tháº¿ nÃ o?</p>
<p>Äá»‘i vá»›i <code>ObjectInputStream</code>, khi deserialize, nÃ³ sáº½ láº§n lÆ°á»£t gá»i cÃ¡c phÆ°Æ¡ng thá»©c <code>readObject()</code>â†’<code>readObject0()</code>â†’<code>readOrdinaryObject()</code>â†’<code>readSerialData()</code>â†’<code>defaultReadFields()</code>.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> defaultReadFields</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Object</span><span style="color:#E06C75;--shiki-dark:#E06C75"> obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ObjectStreamClass</span><span style="color:#E06C75;--shiki-dark:#E06C75"> desc) throws IOException {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Láº¥y lá»›p cá»§a Ä‘á»‘i tÆ°á»£ng vÃ  kiá»ƒm tra xem Ä‘á»‘i tÆ°á»£ng cÃ³ thuá»™c lá»›p Ä‘Ã³ khÃ´ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#C678DD;--shiki-dark:#C678DD">?</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> cl </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">forClass</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (cl </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &amp;&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> obj </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &amp;&amp;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> !</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">cl</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isInstance</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(obj)</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ClassCastException</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Láº¥y sá»‘ lÆ°á»£ng vÃ  giÃ¡ trá»‹ cÃ¡c trÆ°á»ng kiá»ƒu nguyÃªn thá»§y cá»§a Ä‘á»‘i tÆ°á»£ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> primDataSize </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getPrimDataSize</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (primVals </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ||</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> primVals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">length</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> primDataSize) {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        primVals </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[primDataSize]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Äá»c giÃ¡ trá»‹ cá»§a cÃ¡c trÆ°á»ng kiá»ƒu nguyÃªn thá»§y tá»« luá»“ng Ä‘áº§u vÃ o vÃ  lÆ°u trá»¯ trong máº£ng primVals</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    bin</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readFully</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(primVals, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, primDataSize, </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (obj </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Äáº·t giÃ¡ trá»‹ cá»§a cÃ¡c trÆ°á»ng kiá»ƒu nguyÃªn thá»§y tá»« máº£ng primVals vÃ o cÃ¡c trÆ°á»ng tÆ°Æ¡ng á»©ng cá»§a Ä‘á»‘i tÆ°á»£ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setPrimFieldValues</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(obj, primVals);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Láº¥y sá»‘ lÆ°á»£ng vÃ  giÃ¡ trá»‹ cÃ¡c trÆ°á»ng khÃ´ng pháº£i kiá»ƒu nguyÃªn thá»§y cá»§a Ä‘á»‘i tÆ°á»£ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> objHandle </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> passHandle</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    ObjectStreamField</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] fields </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getFields</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Object</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] objVals </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Object</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getNumObjFields</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> numPrimFields </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fields</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">length</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> objVals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // VÃ²ng láº·p Ä‘á»ƒ Ä‘á»c giÃ¡ trá»‹ cÃ¡c trÆ°á»ng khÃ´ng pháº£i kiá»ƒu nguyÃªn thá»§y cá»§a Ä‘á»‘i tÆ°á»£ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    for</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> objVals</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">++</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Gá»i phÆ°Æ¡ng thá»©c readObject0 Ä‘á»ƒ Ä‘á»c giÃ¡ trá»‹ cÃ¡c trÆ°á»ng khÃ´ng pháº£i kiá»ƒu nguyÃªn thá»§y cá»§a Ä‘á»‘i tÆ°á»£ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        ObjectStreamField</span><span style="color:#E06C75;--shiki-dark:#E06C75"> f </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fields[numPrimFields </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        objVals[i] </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> readObject0</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Object</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> f</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isUnshared</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Náº¿u trÆ°á»ng Ä‘Ã³ lÃ  má»™t trÆ°á»ng tham chiáº¿u, thÃ¬ Ä‘Ã¡nh dáº¥u nÃ³ phá»¥ thuá»™c vÃ o Ä‘á»‘i tÆ°á»£ng nÃ y</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">f</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getField</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> !=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            handles</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">markDependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(objHandle, passHandle);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (obj </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Äáº·t giÃ¡ trá»‹ cá»§a cÃ¡c trÆ°á»ng khÃ´ng pháº£i kiá»ƒu nguyÃªn thá»§y tá»« máº£ng objVals vÃ o cÃ¡c trÆ°á»ng tÆ°Æ¡ng á»©ng cá»§a Ä‘á»‘i tÆ°á»£ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setObjFieldValues</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(obj, objVals);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    passHandle </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> objHandle</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Äáº¿n Ä‘Ã¢y, cÃ³ láº½ báº¡n Ä‘Ã£ hiá»ƒu ra táº¡i sao interface <code>Serializable</code> láº¡i Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a lÃ  trá»‘ng. NÃ³ chá»‰ Ä‘Ã³ng vai trÃ² nhÆ° má»™t dáº¥u hiá»‡u, bÃ¡o cho chÆ°Æ¡ng trÃ¬nh biáº¿t ráº±ng cÃ¡c Ä‘á»‘i tÆ°á»£ng thá»±c hiá»‡n nÃ³ cÃ³ thá»ƒ Ä‘Æ°á»£c serialize, nhÆ°ng viá»‡c serialize vÃ  deserialize thá»±c sá»± khÃ´ng cáº§n nÃ³ Ä‘á»ƒ hoÃ n thÃ nh.</p>
<h3>03. Má»™t sá»‘ Ä‘iá»ƒm cáº§n lÆ°u Ã½</h3>
<p>NÃ³i tháº³ng vÃ o váº¥n Ä‘á», cÃ¡c trÆ°á»ng Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi <a href="/programming/java/oo/static"><code>static</code></a> vÃ  <a href="transient"><code>transient</code></a> sáº½ khÃ´ng Ä‘Æ°á»£c serialize.</p>
<p>Táº¡i sao láº¡i nhÆ° váº­y? ChÃºng ta hÃ£y chá»©ng minh trÆ°á»›c rá»“i giáº£i thÃ­ch sau.</p>
<p>Äáº§u tiÃªn, thÃªm hai trÆ°á»ng vÃ o lá»›p <code>Wanger</code>.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Wanger</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Serializable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> serialVersionUID </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">2095916884810199532L</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> pre </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "æ²‰é»˜"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    transient</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> meizi </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "ç‹ä¸‰"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#98C379;--shiki-dark:#98C379"> "Wanger{"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#98C379;--shiki-dark:#98C379"> "name="</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> ",age="</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> ",pre="</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> pre </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> ",meizi="</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> meizi </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> "}"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Tiáº¿p theo, trong lá»›p kiá»ƒm thá»­, in ra Ä‘á»‘i tÆ°á»£ng trÆ°á»›c vÃ  sau khi serialize, Ä‘á»“ng thá»i thay Ä‘á»•i giÃ¡ trá»‹ cá»§a trÆ°á»ng <code>static</code> sau khi serialize vÃ  trÆ°á»›c khi deserialize. MÃ£ cá»¥ thá»ƒ nhÆ° sau:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Khá»Ÿi táº¡o</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Wanger</span><span style="color:#E06C75;--shiki-dark:#E06C75"> wanger </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Wanger</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">wanger</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ç‹äºŒ"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">wanger</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setAge</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">18</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(wanger);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi Ä‘á»‘i tÆ°á»£ng vÃ o tá»‡p</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> oos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"chenmo"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))){</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    oos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(wanger);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Thay Ä‘á»•i giÃ¡ trá»‹ cá»§a trÆ°á»ng static</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Wanger</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">pre</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "ä¸æ²‰é»˜"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c Ä‘á»‘i tÆ°á»£ng tá»« tá»‡p</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ois </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"chenmo"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)))){</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Wanger</span><span style="color:#E06C75;--shiki-dark:#E06C75"> wanger1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (Wanger) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ois</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(wanger1);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75"> | </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ClassNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Káº¿t quáº£ Ä‘áº§u ra:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Wanger{name=ç‹äºŒ,age=18,pre=æ²‰é»˜,meizi=ç‹ä¸‰}</span></span>
<span class="line"><span>Wanger{name=ç‹äºŒ,age=18,pre=ä¸æ²‰é»˜,meizi=null}</span></span></code></pre>
</div><p>Tá»« káº¿t quáº£ so sÃ¡nh, chÃºng ta cÃ³ thá»ƒ tháº¥y:</p>
<ol>
<li>TrÆ°á»›c khi serialize, giÃ¡ trá»‹ cá»§a <code>pre</code> lÃ  "æ²‰é»˜", sau khi serialize, giÃ¡ trá»‹ cá»§a <code>pre</code> Ä‘Ã£ Ä‘Æ°á»£c thay Ä‘á»•i thÃ nh "ä¸æ²‰é»˜", vÃ  sau khi deserialize, giÃ¡ trá»‹ cá»§a <code>pre</code> lÃ  "ä¸æ²‰é»˜", chá»© khÃ´ng pháº£i tráº¡ng thÃ¡i trÆ°á»›c khi serialize lÃ  "æ²‰é»˜".</li>
</ol>
<p>Táº¡i sao láº¡i nhÆ° váº­y? Bá»Ÿi vÃ¬ serialize lÆ°u trá»¯ tráº¡ng thÃ¡i cá»§a Ä‘á»‘i tÆ°á»£ng, trong khi cÃ¡c trÆ°á»ng Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi <code>static</code> thuá»™c vá» tráº¡ng thÃ¡i cá»§a lá»›p, do Ä‘Ã³ cÃ³ thá»ƒ chá»©ng minh serialize khÃ´ng lÆ°u trá»¯ cÃ¡c trÆ°á»ng Ä‘Æ°á»£c sá»­a Ä‘á»•i bá»Ÿi <code>static</code>.</p>
<ol start="2">
<li>TrÆ°á»›c khi serialize, giÃ¡ trá»‹ cá»§a <code>meizi</code> lÃ  "ç‹ä¸‰", sau khi deserialize, giÃ¡ trá»‹ cá»§a <code>meizi</code> lÃ  <code>null</code>, chá»© khÃ´ng pháº£i tráº¡ng thÃ¡i trÆ°á»›c khi serialize lÃ  "ç‹ä¸‰".</li>
</ol>
<p>Táº¡i sao láº¡i nhÆ° váº­y? <code>transient</code> cÃ³ nghÄ©a lÃ  "táº¡m thá»i", nÃ³ cÃ³ thá»ƒ ngÄƒn cáº£n trÆ°á»ng Ä‘Æ°á»£c serialize vÃ o tá»‡p. Sau khi deserialize, giÃ¡ trá»‹ cá»§a trÆ°á»ng <code>transient</code> Ä‘Æ°á»£c Ä‘áº·t vá» giÃ¡ trá»‹ ban Ä‘áº§u, cháº³ng háº¡n nhÆ° giÃ¡ trá»‹ ban Ä‘áº§u cá»§a kiá»ƒu <code>int</code> lÃ  0, giÃ¡ trá»‹ ban Ä‘áº§u cá»§a Ä‘á»‘i tÆ°á»£ng lÃ  <code>null</code>.</p>
<p>Náº¿u muá»‘n nghiÃªn cá»©u sÃ¢u mÃ£ nguá»“n, báº¡n cÃ³ thá»ƒ tháº¥y Ä‘oáº¡n mÃ£ sau trong <code>ObjectStreamClass</code>:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ObjectStreamField</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getDefaultSerialFields</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Class</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#C678DD;--shiki-dark:#C678DD">?</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> cl) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Láº¥y táº¥t cáº£ cÃ¡c trÆ°á»ng Ä‘Æ°á»£c khai bÃ¡o trong lá»›p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Field</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] clFields </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> cl</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getDeclaredFields</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectStreamField</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> mask </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Modifier</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">STATIC</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> |</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Modifier</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TRANSIENT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Duyá»‡t qua táº¥t cáº£ cÃ¡c trÆ°á»ng, thÃªm cÃ¡c trÆ°á»ng khÃ´ng pháº£i static vÃ  transient vÃ o danh sÃ¡ch</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    for</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> clFields</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">++</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Field</span><span style="color:#E06C75;--shiki-dark:#E06C75"> field </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> clFields[i]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> mods </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> field</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getModifiers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((mods </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> mask) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng ObjectStreamField dá»±a trÃªn tÃªn trÆ°á»ng, kiá»ƒu trÆ°á»ng vÃ  kháº£ nÄƒng serialize cá»§a trÆ°á»ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            ObjectStreamField</span><span style="color:#E06C75;--shiki-dark:#E06C75"> osf </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectStreamField</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">field</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(),</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> field</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(),</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> !</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Serializable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isAssignableFrom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(cl)</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(osf);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> size </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Náº¿u danh sÃ¡ch rá»—ng, tráº£ vá» má»™t máº£ng ObjectStreamField rá»—ng, náº¿u khÃ´ng, chuyá»ƒn Ä‘á»•i danh sÃ¡ch thÃ nh máº£ng ObjectStreamField vÃ  tráº£ vá»</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (size </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">?</span><span style="color:#E06C75;--shiki-dark:#E06C75"> NO_FIELDS </span><span style="color:#C678DD;--shiki-dark:#C678DD">:</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toArray</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ObjectStreamField</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[size]);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Báº¡n tháº¥y <code>Modifier.STATIC | Modifier.TRANSIENT</code> chá»©? CÃ¡c trÆ°á»ng Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u bá»Ÿi hai sá»­a Ä‘á»•i nÃ y khÃ´ng Ä‘Æ°á»£c Ä‘Æ°a vÃ o cÃ¡c trÆ°á»ng Ä‘Æ°á»£c serialize, báº¡n Ä‘Ã£ hiá»ƒu chÆ°a?</p>
<h3>04. Má»™t chÃºt thÃ´ng tin há»¯u Ã­ch</h3>
<p>NgoÃ i <code>Serializable</code>, Java cÃ²n cung cáº¥p má»™t interface serialize khÃ¡c lÃ  <code>Externalizable</code> (Ä‘á»c hÆ¡i khÃ³).</p>
<p>Hai interface nÃ y cÃ³ gÃ¬ khÃ¡c nhau khÃ´ng? Thá»­ lÃ  biáº¿t ngay.</p>
<p>Äáº§u tiÃªn, thay tháº¿ interface <code>Serializable</code> cá»§a lá»›p <code>Wanger</code> báº±ng <code>Externalizable</code>.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Wanger</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Externalizable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Wanger</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#98C379;--shiki-dark:#98C379"> "Wanger{"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#98C379;--shiki-dark:#98C379"> "name="</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> ",age="</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> "}"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> writeExternal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectOutput</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> readExternal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectInput</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ClassNotFoundException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Lá»›p <code>Wanger</code> thá»±c hiá»‡n interface <code>Externalizable</code> cÃ³ má»™t sá»‘ Ä‘iá»ƒm khÃ¡c biá»‡t so vá»›i lá»›p thá»±c hiá»‡n interface <code>Serializable</code>:</p>
<ol>
<li>ThÃªm má»™t phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o khÃ´ng tham sá»‘.</li>
</ol>
<p>Khi sá»­ dá»¥ng <code>Externalizable</code> Ä‘á»ƒ deserialize, nÃ³ sáº½ gá»i phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o khÃ´ng tham sá»‘ cá»§a lá»›p Ä‘Æ°á»£c serialize Ä‘á»ƒ táº¡o má»™t Ä‘á»‘i tÆ°á»£ng má»›i, sau Ä‘Ã³ sao chÃ©p giÃ¡ trá»‹ cá»§a cÃ¡c trÆ°á»ng cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c lÆ°u trá»¯ vÃ o. Náº¿u khÃ´ng, sáº½ nÃ©m ra ngoáº¡i lá»‡ sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>java.io.InvalidClassException: com.cmower.java_demo.xuliehua1.Wanger; no valid constructor</span></span>
<span class="line"><span>    at java.io.ObjectStreamClass$ExceptionInfo.newInvalidClassException(ObjectStreamClass.java:150)</span></span>
<span class="line"><span>    at java.io.ObjectStreamClass.checkDeserialize(ObjectStreamClass.java:790)</span></span>
<span class="line"><span>    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1782)</span></span>
<span class="line"><span>    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1353)</span></span>
<span class="line"><span>    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:373)</span></span>
<span class="line"><span>    at com.cmower.java_demo.xuliehua1.Test.main(Test.java:27)</span></span></code></pre>
</div><ol start="2">
<li>ThÃªm hai phÆ°Æ¡ng thá»©c <code>writeExternal()</code> vÃ  <code>readExternal()</code>, cáº§n thiáº¿t Ä‘á»ƒ thá»±c hiá»‡n interface <code>Externalizable</code>.</li>
</ol>
<p>Sau Ä‘Ã³, in ra Ä‘á»‘i tÆ°á»£ng trÆ°á»›c vÃ  sau khi serialize trong lá»›p kiá»ƒm thá»­.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Khá»Ÿi táº¡o</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Wanger</span><span style="color:#E06C75;--shiki-dark:#E06C75"> wanger </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Wanger</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">wanger</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ç‹äºŒ"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">wanger</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setAge</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">18</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(wanger);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi Ä‘á»‘i tÆ°á»£ng vÃ o tá»‡p</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> oos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"chenmo"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    oos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(wanger);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c Ä‘á»‘i tÆ°á»£ng tá»« tá»‡p</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ois </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"chenmo"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Wanger</span><span style="color:#E06C75;--shiki-dark:#E06C75"> wanger1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (Wanger) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ois</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(wanger1);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75"> | </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ClassNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Wanger{name=ç‹äºŒ,age=18}</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Wanger{name=null,age=0}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Tá»« káº¿t quáº£ Ä‘áº§u ra, ta cÃ³ thá»ƒ tháº¥y cÃ¡c trÆ°á»ng cá»§a Ä‘á»‘i tÆ°á»£ng sau khi deserialize Ä‘á»u trá»Ÿ vá» giÃ¡ trá»‹ máº·c Ä‘á»‹nh, nghÄ©a lÃ  tráº¡ng thÃ¡i cá»§a Ä‘á»‘i tÆ°á»£ng trÆ°á»›c khi serialize khÃ´ng Ä‘Æ°á»£c "Ä‘Ã³ng bÄƒng" láº¡i.</p>
<p>Táº¡i sao váº­y? VÃ¬ chÃºng ta chÆ°a ghi Ä‘Ã¨ cá»¥ thá»ƒ cÃ¡c phÆ°Æ¡ng thá»©c <code>writeExternal()</code> vÃ  <code>readExternal()</code> cho lá»›p <code>Wanger</code>. Váº­y lÃ m sao Ä‘á»ƒ ghi Ä‘Ã¨ chÃºng?</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> writeExternal</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectOutput</span><span style="color:#E06C75;--shiki-dark:#E06C75"> out) throws IOException {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(name);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeInt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(age);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> readExternal</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectInput</span><span style="color:#E06C75;--shiki-dark:#E06C75"> in) throws IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ClassNotFoundException {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (String) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    age </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readInt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><ol>
<li>
<p>Gá»i phÆ°Æ¡ng thá»©c <code>writeObject()</code> cá»§a <code>ObjectOutput</code> Ä‘á»ƒ ghi trÆ°á»ng <code>name</code> kiá»ƒu chuá»—i vÃ o luá»“ng Ä‘áº§u ra;</p>
</li>
<li>
<p>Gá»i phÆ°Æ¡ng thá»©c <code>writeInt()</code> cá»§a <code>ObjectOutput</code> Ä‘á»ƒ ghi trÆ°á»ng <code>age</code> kiá»ƒu sá»‘ nguyÃªn vÃ o luá»“ng Ä‘áº§u ra;</p>
</li>
<li>
<p>Gá»i phÆ°Æ¡ng thá»©c <code>readObject()</code> cá»§a <code>ObjectInput</code> Ä‘á»ƒ Ä‘á»c trÆ°á»ng <code>name</code> kiá»ƒu chuá»—i tá»« luá»“ng Ä‘áº§u vÃ o;</p>
</li>
<li>
<p>Gá»i phÆ°Æ¡ng thá»©c <code>readInt()</code> cá»§a <code>ObjectInput</code> Ä‘á»ƒ Ä‘á»c trÆ°á»ng <code>age</code> kiá»ƒu sá»‘ nguyÃªn tá»« luá»“ng Ä‘áº§u vÃ o.</p>
</li>
</ol>
<p>Cháº¡y láº¡i lá»›p kiá»ƒm thá»­, báº¡n sáº½ tháº¥y Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ serialize vÃ  deserialize bÃ¬nh thÆ°á»ng.</p>
<blockquote name="ç‹äºŒ,age=18">
<p>serialize trÆ°á»›c: Wanger{name=ç‹äºŒ,age=18}<br>
serialize sau: Wanger</p>
</blockquote>
<p>TÃ³m láº¡i:</p>
<p>Externalizable vÃ  Serializable Ä‘á»u Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ serialize vÃ  deserialize cÃ¡c Ä‘á»‘i tÆ°á»£ng Java, nhÆ°ng chÃºng cÃ³ sá»± khÃ¡c biá»‡t sau:</p>
<ol>
<li>Serializable lÃ  interface do thÆ° viá»‡n chuáº©n cá»§a Java cung cáº¥p, cÃ²n Externalizable lÃ  interface con cá»§a Serializable;</li>
</ol>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240702223842.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<ol start="2">
<li>
<p>interface Serializable khÃ´ng cáº§n thá»±c hiá»‡n báº¥t ká»³ phÆ°Æ¡ng thá»©c nÃ o, chá»‰ cáº§n Ä‘Ã¡nh dáº¥u lá»›p cáº§n serialize lÃ  Serializable, trong khi interface Externalizable cáº§n thá»±c hiá»‡n hai phÆ°Æ¡ng thá»©c writeExternal vÃ  readExternal;</p>
</li>
<li>
<p>interface Externalizable cung cáº¥p kháº£ nÄƒng kiá»ƒm soÃ¡t serialize cao hÆ¡n, cho phÃ©p thá»±c hiá»‡n cÃ¡c xá»­ lÃ½ tÃ¹y chá»‰nh trong quÃ¡ trÃ¬nh serialize vÃ  deserialize, cháº³ng háº¡n nhÆ° mÃ£ hÃ³a vÃ  giáº£i mÃ£ má»™t sá»‘ thÃ´ng tin nháº¡y cáº£m.</p>
</li>
</ol>
<h3>05. Má»™t chÃºt thÃ´ng tin bá»• sung</h3>
<p>HÃ£y Ä‘á»ƒ tÃ´i há»i báº¡n trÆ°á»›c, báº¡n cÃ³ biáº¿t Ä‘oáº¡n mÃ£ <code>private static final long serialVersionUID = -2095916884810199532L;</code> cÃ³ tÃ¡c dá»¥ng gÃ¬ khÃ´ng?</p>
<p>á»ªm...</p>
<p><code>serialVersionUID</code> Ä‘Æ°á»£c gá»i lÃ  ID serialize, nÃ³ lÃ  yáº¿u tá»‘ quan trá»ng quyáº¿t Ä‘á»‹nh liá»‡u Ä‘á»‘i tÆ°á»£ng Java cÃ³ thá»ƒ deserialize thÃ nh cÃ´ng hay khÃ´ng. Khi deserialize, mÃ¡y áº£o Java sáº½ so sÃ¡nh <code>serialVersionUID</code> trong byte stream vá»›i <code>serialVersionUID</code> trong lá»›p Ä‘Æ°á»£c serialize, náº¿u giá»‘ng nhau thÃ¬ cÃ³ thá»ƒ thá»±c hiá»‡n deserialize, náº¿u khÃ´ng sáº½ nÃ©m ra ngoáº¡i lá»‡ phiÃªn báº£n serialize khÃ´ng khá»›p.</p>
<p>Khi má»™t lá»›p thá»±c hiá»‡n interface <code>Serializable</code>, IDE sáº½ nháº¯c báº¡n ráº±ng lá»›p Ä‘Ã³ nÃªn cÃ³ má»™t ID serialize, nhÆ° tháº¿ nÃ y:</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240702223905.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<ol>
<li>ThÃªm má»™t ID serialize phiÃªn báº£n máº·c Ä‘á»‹nh:</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> serialVersionUID </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1L</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><ol start="2">
<li>ThÃªm má»™t ID serialize ngáº«u nhiÃªn khÃ´ng trÃ¹ng láº·p.</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> serialVersionUID </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">2095916884810199532L</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><ol start="3">
<li>ThÃªm chÃº thÃ­ch <code>@SuppressWarnings</code>.</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">SuppressWarnings</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"serial"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span></code></pre>
</div><p>Lá»±a chá»n nhÆ° tháº¿ nÃ o?</p>
<p>TrÆ°á»›c háº¿t, chÃºng ta sá»­ dá»¥ng cÃ¡ch thá»© hai, thÃªm má»™t ID serialize ngáº«u nhiÃªn vÃ o lá»›p Ä‘Æ°á»£c serialize.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Wanger</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Serializable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> serialVersionUID </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">2095916884810199532L</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // CÃ¡c mÃ£ khÃ¡c bá» qua</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Sau Ä‘Ã³, serialize má»™t Ä‘á»‘i tÆ°á»£ng <code>Wanger</code> vÃ o tá»‡p.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Khá»Ÿi táº¡o</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Wanger</span><span style="color:#E06C75;--shiki-dark:#E06C75"> wanger </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Wanger</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">wanger</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ç‹äºŒ"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">wanger</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setAge</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">18</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(wanger);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi Ä‘á»‘i tÆ°á»£ng vÃ o tá»‡p</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> oos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"chenmo"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    oos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(wanger);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>LÃºc nÃ y, chÃºng ta thay Ä‘á»•i ID serialize cá»§a lá»›p <code>Wanger</code> má»™t cÃ¡ch bÃ­ máº­t.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// private static final long serialVersionUID = -2095916884810199532L;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> serialVersionUID </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">2095916884810199533L</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>ÄÆ°á»£c rá»“i, chuáº©n bá»‹ deserialize nÃ o.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ois </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"chenmo"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Wanger</span><span style="color:#E06C75;--shiki-dark:#E06C75"> wanger </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (Wanger) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ois</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(wanger);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75"> | </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ClassNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>á»’, Ä‘Ã£ xáº£y ra lá»—i.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>java.io.InvalidClassException:  local class incompatible: stream classdesc </span></span>
<span class="line"><span>serialVersionUID = -2095916884810199532,</span></span>
<span class="line"><span>local class serialVersionUID = -2095916884810199533</span></span>
<span class="line"><span>    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1521)</span></span>
<span class="line"><span>    at com.cmower.java_demo.xuliehua1.Test.main(Test.java:27)</span></span></code></pre>
</div><p>ThÃ´ng tin ngoáº¡i lá»‡ trong ngÄƒn xáº¿p cho biáº¿t ráº±ng ID serialize Ä‘á»c tá»« tá»‡p khÃ´ng khá»›p vá»›i ID serialize cá»¥c bá»™, khÃ´ng thá»ƒ deserialize.</p>
<p>Váº­y náº¿u chÃºng ta sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p thá»© ba, thÃªm chÃº thÃ­ch <code>@SuppressWarnings("serial")</code> cho lá»›p <code>Wanger</code> thÃ¬ sao?</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">SuppressWarnings</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"serial"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Wanger</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Serializable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // CÃ¡c mÃ£ khÃ¡c bá» qua</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>ÄÆ°á»£c rá»“i, thá»­ deserialize láº¡i. NhÆ°ng tiáº¿c lÃ  váº«n bÃ¡o lá»—i.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>java.io.InvalidClassException:  local class incompatible: stream classdesc </span></span>
<span class="line"><span>serialVersionUID = -2095916884810199532, </span></span>
<span class="line"><span>local class serialVersionUID = -3818877437117647968</span></span>
<span class="line"><span>    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1521)</span></span>
<span class="line"><span>    at com.cmower.java_demo.xuliehua1.Test.main(Test.java:27)</span></span></code></pre>
</div><p>ThÃ´ng tin ngoáº¡i lá»‡ trong ngÄƒn xáº¿p cho biáº¿t ráº±ng ID serialize cá»¥c bá»™ lÃ  -3818877437117647968, vÃ  khÃ´ng khá»›p vá»›i ID serialize Ä‘á»c tá»« tá»‡p, khÃ´ng thá»ƒ deserialize. Äiá»u nÃ y cho tháº¥y gÃ¬? Khi sá»­ dá»¥ng chÃº thÃ­ch <code>@SuppressWarnings("serial")</code>, chÃº thÃ­ch nÃ y sáº½ tá»± Ä‘á»™ng táº¡o má»™t ID serialize ngáº«u nhiÃªn cho lá»›p Ä‘Æ°á»£c serialize.</p>
<p>Do Ä‘Ã³ cÃ³ thá»ƒ chá»©ng minh ráº±ng, <strong>Java Virtual Machine cÃ³ cho phÃ©p deserialize hay khÃ´ng khÃ´ng chá»‰ phá»¥ thuá»™c vÃ o Ä‘Æ°á»ng dáº«n lá»›p vÃ  mÃ£ chá»©c nÄƒng cÃ³ nháº¥t quÃ¡n hay khÃ´ng, mÃ  cÃ²n phá»¥ thuá»™c ráº¥t nhiá»u vÃ o viá»‡c ID serialize cÃ³ nháº¥t quÃ¡n hay khÃ´ng</strong>.</p>
<p>NÃ³i cÃ¡ch khÃ¡c, náº¿u khÃ´ng cÃ³ yÃªu cáº§u Ä‘áº·c biá»‡t, sá»­ dá»¥ng ID serialize máº·c Ä‘á»‹nh (1L) lÃ  Ä‘Æ°á»£c, Ä‘iá»u nÃ y Ä‘áº£m báº£o ráº±ng mÃ£ nháº¥t quÃ¡n thÃ¬ deserialize sáº½ thÃ nh cÃ´ng.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Wanger</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Serializable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> serialVersionUID </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1L</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // CÃ¡c mÃ£ khÃ¡c bá» qua</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div>]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240702223842.png" type="image/png"/>
    </item>
    <item>
      <title>Conversion Stream</title>
      <link>https://vanhung4499.github.io/programming/java/IO/char-byte.html</link>
      <guid>https://vanhung4499.github.io/programming/java/IO/char-byte.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Conversion Stream</source>
      <description>Conversion Stream Conversion stream cÃ³ thá»ƒ Ä‘Ã³ng gÃ³i má»™t byte stream thÃ nh má»™t character stream, hoáº·c Ä‘Ã³ng gÃ³i má»™t character stream thÃ nh byte stream. Chuyá»ƒn Ä‘á»•i nÃ y thÆ°á»ng Ä‘Æ°á»£c ...</description>
      <category>java</category>
      <pubDate>Mon, 01 Jul 2024 16:00:06 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Conversion stream cÃ³ thá»ƒ Ä‘Ã³ng gÃ³i má»™t byte stream thÃ nh má»™t character stream, hoáº·c Ä‘Ã³ng gÃ³i má»™t character stream thÃ nh byte stream. Chuyá»ƒn Ä‘á»•i nÃ y thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xá»­ lÃ½ dá»¯ liá»‡u vÄƒn báº£n, nhÆ° Ä‘á»c tá»‡p vÄƒn báº£n hoáº·c truyá»n dá»¯ liá»‡u tá»« máº¡ng Ä‘áº¿n á»©ng dá»¥ng.</p>
<p>conversion stream chá»§ yáº¿u cÃ³ hai loáº¡i: InputStreamReader vÃ  OutputStreamWriter.</p>
<p>InputStreamReader chuyá»ƒn Ä‘á»•i má»™t luá»“ng Ä‘áº§u vÃ o byte thÃ nh má»™t luá»“ng Ä‘áº§u vÃ o kÃ½ tá»±, trong khi OutputStreamWriter chuyá»ƒn Ä‘á»•i má»™t luá»“ng Ä‘áº§u ra byte thÃ nh má»™t luá»“ng Ä‘áº§u ra kÃ½ tá»±. ChÃºng sá»­ dá»¥ng bá»™ kÃ½ tá»± Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh Ä‘á»ƒ chuyá»ƒn Ä‘á»•i giá»¯a byte stream vÃ  character stream. CÃ¡c bá»™ kÃ½ tá»± thÃ´ng dá»¥ng bao gá»“m UTF-8, GBK, ISO-8859-1, v.v.</p>
<h3>01. MÃ£ hÃ³a vÃ  Giáº£i mÃ£</h3>
<p>Trong mÃ¡y tÃ­nh, dá»¯ liá»‡u thÆ°á»ng Ä‘Æ°á»£c lÆ°u trá»¯ vÃ  truyá»n dÆ°á»›i dáº¡ng nhá»‹ phÃ¢n.</p>
<ul>
<li>MÃ£ hÃ³a lÃ  viá»‡c chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u gá»‘c (vÃ­ dá»¥ nhÆ° vÄƒn báº£n, hÃ¬nh áº£nh, video, Ã¢m thanh, v.v.) thÃ nh dáº¡ng nhá»‹ phÃ¢n.</li>
<li>Giáº£i mÃ£ lÃ  viá»‡c chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u nhá»‹ phÃ¢n thÃ nh dá»¯ liá»‡u gá»‘c, lÃ  má»™t quÃ¡ trÃ¬nh ngÆ°á»£c láº¡i.</li>
</ul>
<p>CÃ³ nhiá»u phÆ°Æ¡ng thá»©c mÃ£ hÃ³a vÃ  giáº£i mÃ£ phá»• biáº¿n, dÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ vÃ­ dá»¥:</p>
<ul>
<li>MÃ£ hÃ³a vÃ  giáº£i mÃ£ ASCII: Trong mÃ¡y tÃ­nh, thÆ°á»ng sá»­ dá»¥ng mÃ£ ASCII Ä‘á»ƒ biá»ƒu diá»…n cÃ¡c kÃ½ tá»±, nhÆ° cÃ¡c chá»¯ cÃ¡i, sá»‘ vÃ  kÃ½ hiá»‡u trÃªn bÃ n phÃ­m. VÃ­ dá»¥, chá»¯ A tÆ°Æ¡ng á»©ng vá»›i mÃ£ ASCII 65, kÃ½ tá»± + tÆ°Æ¡ng á»©ng vá»›i mÃ£ ASCII 43.</li>
<li>MÃ£ hÃ³a vÃ  giáº£i mÃ£ Unicode: Unicode lÃ  má»™t bá»™ kÃ½ tá»± há»— trá»£ nhiá»u ngÃ´n ngá»¯ vÃ  bá»™ kÃ½ tá»±. Trong mÃ¡y tÃ­nh, Unicode cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c mÃ£ hÃ³a nhÆ° UTF-8, UTF-16 Ä‘á»ƒ chuyá»ƒn Ä‘á»•i kÃ½ tá»± thÃ nh dá»¯ liá»‡u nhá»‹ phÃ¢n Ä‘á»ƒ lÆ°u trá»¯ vÃ  truyá»n táº£i.</li>
<li>MÃ£ hÃ³a vÃ  giáº£i mÃ£ Base64: Base64 lÃ  má»™t phÆ°Æ¡ng thá»©c mÃ£ hÃ³a chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u nhá»‹ phÃ¢n thÃ nh mÃ£ ASCII. NÃ³ chuyá»ƒn Ä‘á»•i 3 byte dá»¯ liá»‡u nhá»‹ phÃ¢n thÃ nh 4 kÃ½ tá»± ASCII Ä‘á»ƒ sá»­ dá»¥ng trong truyá»n táº£i máº¡ng. VÃ­ dá»¥, khi mÃ£ hÃ³a chuá»—i "Hello, world!" báº±ng Base64, káº¿t quáº£ sáº½ lÃ  "SGVsbG8sIHdvcmxkIQ==".</li>
<li>MÃ£ hÃ³a vÃ  giáº£i mÃ£ hÃ¬nh áº£nh: Trong xá»­ lÃ½ hÃ¬nh áº£nh, thÆ°á»ng sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c mÃ£ hÃ³a nhÆ° JPEG, PNG, GIF Ä‘á»ƒ chuyá»ƒn Ä‘á»•i hÃ¬nh áº£nh thÃ nh dá»¯ liá»‡u nhá»‹ phÃ¢n Ä‘á»ƒ lÆ°u trá»¯ vÃ  truyá»n táº£i. Khi giáº£i mÃ£, dá»¯ liá»‡u nhá»‹ phÃ¢n cÃ³ thá»ƒ Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i thÃ nh hÃ¬nh áº£nh Ä‘á»ƒ hiá»ƒn thá»‹ hoáº·c xá»­ lÃ½.</li>
<li>MÃ£ hÃ³a vÃ  giáº£i mÃ£ video: Trong xá»­ lÃ½ video, thÆ°á»ng sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c mÃ£ hÃ³a nhÆ° H.264, AVC, MPEG-4 Ä‘á»ƒ chuyá»ƒn Ä‘á»•i video thÃ nh dá»¯ liá»‡u nhá»‹ phÃ¢n Ä‘á»ƒ lÆ°u trá»¯ vÃ  truyá»n táº£i. Khi giáº£i mÃ£, dá»¯ liá»‡u nhá»‹ phÃ¢n cÃ³ thá»ƒ Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i thÃ nh video Ä‘á»ƒ phÃ¡t hoáº·c xá»­ lÃ½.</li>
</ul>
<p>NÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n:</p>
<ul>
<li>MÃ£ hÃ³a: kÃ½ tá»± (cÃ³ thá»ƒ Ä‘á»c Ä‘Æ°á»£c) --&gt; byte (khÃ´ng thá»ƒ Ä‘á»c Ä‘Æ°á»£c)</li>
<li>Giáº£i mÃ£: byte (khÃ´ng thá»ƒ Ä‘á»c Ä‘Æ°á»£c) --&gt; kÃ½ tá»± (cÃ³ thá»ƒ Ä‘á»c Ä‘Æ°á»£c)</li>
</ul>
<p>TÃ´i sáº½ dÃ¹ng mÃ£ nguá»“n Ä‘á»ƒ minh há»a:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "æ²‰é»˜ç‹äºŒ"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> charsetName </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "UTF-8"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// MÃ£ hÃ³a</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] bytes </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> str</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getBytes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Charset</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">forName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(charsetName));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"MÃ£ hÃ³a: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> bytes);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Giáº£i mÃ£</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> decodedStr </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75">(bytes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Charset</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">forName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(charsetName)</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Giáº£i mÃ£: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> decodedStr);</span></span></code></pre>
</div><p>Trong vÃ­ dá»¥ nÃ y, Ä‘áº§u tiÃªn Ä‘á»‹nh nghÄ©a má»™t biáº¿n chuá»—i str vÃ  má»™t tÃªn bá»™ kÃ½ tá»± charsetName. Sau Ä‘Ã³, sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>Charset.forName()</code> Ä‘á»ƒ láº¥y Ä‘á»‘i tÆ°á»£ng Charset cá»§a bá»™ kÃ½ tá»± chá»‰ Ä‘á»‹nh. Tiáº¿p theo, sá»­ dá»¥ng phÆ°Æ¡ng thá»©c getBytes() cá»§a chuá»—i Ä‘á»ƒ mÃ£ hÃ³a chuá»—i thÃ nh máº£ng byte cá»§a bá»™ kÃ½ tá»± chá»‰ Ä‘á»‹nh. Cuá»‘i cÃ¹ng, sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>new String()</code> Ä‘á»ƒ giáº£i mÃ£ máº£ng byte thÃ nh chuá»—i.</p>
<p>Cáº§n lÆ°u Ã½ ráº±ng trong quÃ¡ trÃ¬nh mÃ£ hÃ³a vÃ  giáº£i mÃ£, cáº§n Ä‘áº£m báº£o sá»­ dá»¥ng cÃ¹ng má»™t bá»™ kÃ½ tá»± Ä‘á»ƒ chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u chÃ­nh xÃ¡c.</p>
<h3>02. Bá»™ kÃ½ tá»±</h3>
<p>Charset: Bá»™ kÃ½ tá»±, lÃ  má»™t táº­p há»£p cÃ¡c kÃ½ tá»±, má»—i kÃ½ tá»± cÃ³ má»™t giÃ¡ trá»‹ mÃ£ duy nháº¥t, cÃ²n Ä‘Æ°á»£c gá»i lÃ  Ä‘iá»ƒm mÃ£.</p>
<p>CÃ¡c bá»™ kÃ½ tá»± thÃ´ng dá»¥ng bao gá»“m ASCII vÃ  Unicode, trong Ä‘Ã³ bá»™ kÃ½ tá»± Unicode bao gá»“m nhiá»u phÆ°Æ¡ng thá»©c mÃ£ hÃ³a nhÆ° UTF-8, UTF-16.</p>
<h4><strong>Bá»™ kÃ½ tá»± ASCII</strong></h4>
<p>Bá»™ kÃ½ tá»± ASCII (American Standard Code for Information Interchange, MÃ£ tiÃªu chuáº©n Má»¹ cho trao Ä‘á»•i thÃ´ng tin) lÃ  má»™t trong nhá»¯ng bá»™ kÃ½ tá»± Ä‘áº§u tiÃªn, bao gá»“m 128 kÃ½ tá»±, trong Ä‘Ã³ cÃ³ cÃ¡c kÃ½ tá»± Ä‘iá»u khiá»ƒn, sá»‘, chá»¯ cÃ¡i tiáº¿ng Anh vÃ  má»™t sá»‘ kÃ½ hiá»‡u. Má»—i kÃ½ tá»± trong bá»™ kÃ½ tá»± ASCII cÃ³ má»™t mÃ£ nhá»‹ phÃ¢n 7 bit duy nháº¥t (gá»“m 0 vÃ  1), cÃ³ thá»ƒ Ä‘Æ°á»£c biá»ƒu diá»…n dÆ°á»›i dáº¡ng sá»‘ tháº­p phÃ¢n hoáº·c sá»‘ tháº­p lá»¥c phÃ¢n.</p>
<p>PhÆ°Æ¡ng thá»©c mÃ£ hÃ³a ASCII lÃ  má»™t phÆ°Æ¡ng thá»©c mÃ£ hÃ³a cÃ³ Ä‘á»™ dÃ i cá»‘ Ä‘á»‹nh, má»—i kÃ½ tá»± sá»­ dá»¥ng mÃ£ nhá»‹ phÃ¢n 7 bit Ä‘á»ƒ biá»ƒu diá»…n. MÃ£ hÃ³a ASCII chá»‰ cÃ³ thá»ƒ biá»ƒu diá»…n chá»¯ cÃ¡i tiáº¿ng Anh, sá»‘ vÃ  má»™t sá»‘ Ã­t kÃ½ hiá»‡u, khÃ´ng thá»ƒ biá»ƒu diá»…n cÃ¡c kÃ½ tá»± vÃ  kÃ½ hiá»‡u cá»§a ngÃ´n ngá»¯ khÃ¡c, do Ä‘Ã³ á»©ng dá»¥ng toÃ n cáº§u bá»‹ háº¡n cháº¿ ráº¥t nhiá»u.</p>
<h4>Bá»™ kÃ½ tá»± Unicode</h4>
<p>Unicode bao gá»“m háº§u háº¿t táº¥t cáº£ cÃ¡c kÃ½ tá»± trÃªn tháº¿ giá»›i, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ biá»ƒu diá»…n cÃ¡c ngÃ´n ngá»¯, kÃ½ hiá»‡u vÃ  biá»ƒu tÆ°á»£ng cá»§a con ngÆ°á»i. Má»—i kÃ½ tá»± trong bá»™ kÃ½ tá»± Unicode cÃ³ má»™t Ä‘iá»ƒm mÃ£ duy nháº¥t (code point), Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ biá»ƒu diá»…n vá»‹ trÃ­ cá»§a kÃ½ tá»± trong bá»™ kÃ½ tá»±, cÃ³ thá»ƒ Ä‘Æ°á»£c biá»ƒu diá»…n dÆ°á»›i dáº¡ng sá»‘ tháº­p lá»¥c phÃ¢n.</p>
<p>Äá»ƒ lÆ°u trá»¯ vÃ  truyá»n táº£i cÃ¡c kÃ½ tá»± trong bá»™ kÃ½ tá»± Unicode trÃªn mÃ¡y tÃ­nh, cáº§n sá»­ dá»¥ng má»™t phÆ°Æ¡ng thá»©c mÃ£ hÃ³a. UTF-8, UTF-16 vÃ  UTF-32 Ä‘á»u lÃ  cÃ¡c phÆ°Æ¡ng thá»©c mÃ£ hÃ³a cá»§a bá»™ kÃ½ tá»± Unicode, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ chuyá»ƒn Ä‘á»•i cÃ¡c kÃ½ tá»± trong bá»™ kÃ½ tá»± Unicode thÃ nh chuá»—i byte, Ä‘á»ƒ lÆ°u trá»¯ vÃ  truyá»n táº£i. Sá»± khÃ¡c biá»‡t giá»¯a chÃºng náº±m á»Ÿ Ä‘á»™ dÃ i byte sá»­ dá»¥ng.</p>
<ul>
<li>UTF-8 lÃ  má»™t phÆ°Æ¡ng thá»©c mÃ£ hÃ³a cÃ³ Ä‘á»™ dÃ i biáº¿n Ä‘á»•i, Ä‘á»‘i vá»›i cÃ¡c kÃ½ tá»± ASCII (pháº¡m vi mÃ£ <code>0x00~0x7F</code>), sá»­ dá»¥ng má»™t byte Ä‘á»ƒ biá»ƒu diá»…n, Ä‘á»‘i vá»›i cÃ¡c kÃ½ tá»± Unicode khÃ¡c, sá»­ dá»¥ng hai, ba hoáº·c bá»‘n byte Ä‘á»ƒ biá»ƒu diá»…n. PhÆ°Æ¡ng thá»©c mÃ£ hÃ³a UTF-8 Ä‘Æ°á»£c sá»­ dá»¥ng rá»™ng rÃ£i trong lÄ©nh vá»±c Internet vÃ  mÃ¡y tÃ­nh vÃ¬ nÃ³ cÃ³ thá»ƒ nÃ©n dá»¯ liá»‡u hiá»‡u quáº£, phÃ¹ há»£p cho truyá»n táº£i vÃ  lÆ°u trá»¯ máº¡ng.</li>
<li>UTF-16 lÃ  má»™t phÆ°Æ¡ng thá»©c mÃ£ hÃ³a cÃ³ Ä‘á»™ dÃ i cá»‘ Ä‘á»‹nh, Ä‘á»‘i vá»›i cÃ¡c kÃ½ tá»± trong máº·t pháº³ng Ä‘a ngÃ´n ngá»¯ cÆ¡ báº£n (Basic Multilingual Plane, má»™t pháº¡m vi mÃ£ cá»§a bá»™ kÃ½ tá»± Unicode, bao gá»“m háº§u háº¿t cÃ¡c kÃ½ tá»± thÃ´ng dá»¥ng trÃªn tháº¿ giá»›i, tá»•ng cá»™ng hÆ¡n 65,000 mÃ£), sá»­ dá»¥ng hai byte Ä‘á»ƒ biá»ƒu diá»…n, Ä‘á»‘i vá»›i cÃ¡c kÃ½ tá»± Unicode khÃ¡c, sá»­ dá»¥ng bá»‘n byte Ä‘á»ƒ biá»ƒu diá»…n.</li>
<li>UTF-32 lÃ  má»™t phÆ°Æ¡ng thá»©c mÃ£ hÃ³a cÃ³ Ä‘á»™ dÃ i cá»‘ Ä‘á»‹nh, Ä‘á»‘i vá»›i táº¥t cáº£ cÃ¡c kÃ½ tá»± Unicode, sá»­ dá»¥ng bá»‘n byte Ä‘á»ƒ biá»ƒu diá»…n.</li>
</ul>
<h3>03. Lá»—i mÃ£ hÃ³a</h3>
<p>Khi sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c mÃ£ hÃ³a khÃ¡c nhau Ä‘á»ƒ Ä‘á»c hoáº·c ghi tá»‡p, sáº½ xuáº¥t hiá»‡n váº¥n Ä‘á» lá»—i mÃ£ hÃ³a, hÃ£y xem vÃ­ dá»¥.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> s </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "æ²‰é»˜ç‹äºŒï¼"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // LÆ°u chuá»—i dÆ°á»›i dáº¡ng mÃ£ hÃ³a GBK vÃ o tá»‡p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    OutputStreamWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> out </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> OutputStreamWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"logs/test_utf8.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "GBK"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(s);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fileReader </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"logs/test_utf8.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((read </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fileReader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">((</span><span style="color:#C678DD;--shiki-dark:#C678DD">char</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)read);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    fileReader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong mÃ£ vÃ­ dá»¥ trÃªn, Ä‘áº§u tiÃªn Ä‘á»‹nh nghÄ©a má»™t chuá»—i chá»©a cÃ¡c kÃ½ tá»± Trung Quá»‘c, sau Ä‘Ã³ lÆ°u chuá»—i nÃ y dÆ°á»›i dáº¡ng mÃ£ hÃ³a GBK vÃ o tá»‡p, tiáº¿p theo Ä‘á»c tá»‡p báº±ng phÆ°Æ¡ng thá»©c mÃ£ hÃ³a máº·c Ä‘á»‹nh (UTF-8) vÃ  hiá»ƒn thá»‹ ná»™i dung. LÃºc nÃ y sáº½ xuáº¥t hiá»‡n váº¥n Ä‘á» lá»—i mÃ£ hÃ³a, hiá»ƒn thá»‹ lÃ  â€œï¿½ï¿½Ä¬ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½â€.</p>
<p>ÄÃ³ lÃ  vÃ¬ cÃ¡c kÃ½ tá»± mÃ£ hÃ³a GBK trong tá»‡p khÃ´ng thá»ƒ Ä‘Æ°á»£c giáº£i mÃ£ Ä‘Ãºng cÃ¡ch báº±ng phÆ°Æ¡ng thá»©c mÃ£ hÃ³a UTF-8, dáº«n Ä‘áº¿n xuáº¥t hiá»‡n lá»—i mÃ£ hÃ³a.</p>
<p>Váº­y lÃ m tháº¿ nÃ o Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» lá»—i mÃ£ hÃ³a?</p>
<p>Äiá»u nÃ y dáº«n chÃºng ta Ä‘áº¿n chá»§ Ä‘á» chÃ­nh cá»§a hÃ´m nay - conversion stream.</p>
<h3>04. InputStreamReader</h3>
<p><code>java.io.InputStreamReader</code> lÃ  má»™t lá»›p con cá»§a lá»›p Reader. Chá»©c nÄƒng cá»§a nÃ³ lÃ  chuyá»ƒn Ä‘á»•i byte stream (InputStream) thÃ nh character stream (Reader), Ä‘á»“ng thá»i há»— trá»£ phÆ°Æ¡ng thá»©c mÃ£ hÃ³a bá»™ kÃ½ tá»± Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh, tá»« Ä‘Ã³ thá»±c hiá»‡n chuyá»ƒn Ä‘á»•i giá»¯a character stream vÃ  byte stream.</p>
<h4>1ï¼‰PhÆ°Æ¡ng thá»©c khá»Ÿi táº¡o</h4>
<ul>
<li><code>InputStreamReader(InputStream in)</code>: Táº¡o má»™t character stream sá»­ dá»¥ng bá»™ kÃ½ tá»± máº·c Ä‘á»‹nh.</li>
<li><code>InputStreamReader(InputStream in, String charsetName)</code>: Táº¡o má»™t character stream sá»­ dá»¥ng bá»™ kÃ½ tá»± Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh.</li>
</ul>
<p>VÃ­ dá»¥ mÃ£:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">InputStreamReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> isr </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> InputStreamReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"in.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">InputStreamReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> isr2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> InputStreamReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"in.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "GBK"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><h4>2ï¼‰Giáº£i quyáº¿t váº¥n Ä‘á» mÃ£ hÃ³a</h4>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ mÃ£ sá»­ dá»¥ng InputStreamReader Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» lá»—i mÃ£ hÃ³a:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> s </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "æ²‰é»˜ç‹äºŒï¼"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // LÆ°u chuá»—i dÆ°á»›i dáº¡ng mÃ£ hÃ³a GBK vÃ o tá»‡p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    OutputStreamWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> outUtf8 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> OutputStreamWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"logs/test_utf8.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "GBK"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    outUtf8</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(s);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    outUtf8</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Chuyá»ƒn Ä‘á»•i byte stream thÃ nh character stream, sá»­ dá»¥ng mÃ£ hÃ³a GBK</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    InputStreamReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> isr </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> InputStreamReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"logs/test_utf8.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "GBK"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Äá»c character stream</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> c</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((c </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> isr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">((</span><span style="color:#C678DD;--shiki-dark:#C678DD">char</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) c);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    isr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>VÃ¬ sá»­ dá»¥ng InputStreamReader Ä‘á»ƒ chuyá»ƒn Ä‘á»•i mÃ£ hÃ³a byte stream, nÃªn khi Ä‘á»c character stream, cÃ³ thá»ƒ giáº£i mÃ£ chÃ­nh xÃ¡c cÃ¡c kÃ½ tá»± Trung Quá»‘c, trÃ¡nh Ä‘Æ°á»£c váº¥n Ä‘á» lá»—i mÃ£ hÃ³a.</p>
<h3>05. OutputStreamWriter</h3>
<p><code>java.io.OutputStreamWriter</code> lÃ  má»™t lá»›p con cá»§a Writer, tÃªn gá»i dá»… gÃ¢y nháº§m láº«n ráº±ng nÃ³ chuyá»ƒn Ä‘á»•i thÃ nh character stream, nhÆ°ng thá»±c ra lÃ  chuyá»ƒn Ä‘á»•i character stream thÃ nh byte stream, lÃ  cáº§u ná»‘i giá»¯a character stream vÃ  byte stream.</p>
<ul>
<li><code>OutputStreamWriter(OutputStream in)</code>: Táº¡o má»™t character stream sá»­ dá»¥ng bá»™ kÃ½ tá»± máº·c Ä‘á»‹nh.</li>
<li><code>OutputStreamWriter(OutputStream in, String charsetName)</code>: Táº¡o má»™t character stream sá»­ dá»¥ng bá»™ kÃ½ tá»± Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh.</li>
</ul>
<p>VÃ­ dá»¥ mÃ£:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">OutputStreamWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> osw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> OutputStreamWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"a.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">OutputStreamWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> osw2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> OutputStreamWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"b.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "GBK"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>ThÃ´ng thÆ°á»ng Ä‘á»ƒ nÃ¢ng cao hiá»‡u suáº¥t Ä‘á»c ghi, chÃºng ta sáº½ thÃªm má»™t lá»›p buffered stream trÃªn conversion stream, hÃ£y xem vÃ­ dá»¥ mÃ£ dÆ°á»›i Ä‘Ã¢y:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Äá»c byte stream tá»« tá»‡p, sá»­ dá»¥ng mÃ£ hÃ³a UTF-8</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fis </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"test.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Chuyá»ƒn Ä‘á»•i byte stream thÃ nh character stream, sá»­ dá»¥ng mÃ£ hÃ³a UTF-8</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    InputStreamReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> isr </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> InputStreamReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(fis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "UTF-8"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Sá»­ dá»¥ng buffered stream Ä‘á»ƒ bá»c character stream, nÃ¢ng cao hiá»‡u suáº¥t Ä‘á»c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    BufferedReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> br </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(isr)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Táº¡o output stream, sá»­ dá»¥ng mÃ£ hÃ³a UTF-8</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"output.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Chuyá»ƒn Ä‘á»•i output stream thÃ nh character stream, sá»­ dá»¥ng mÃ£ hÃ³a UTF-8</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    OutputStreamWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> osw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> OutputStreamWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "UTF-8"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Sá»­ dá»¥ng buffered stream Ä‘á»ƒ bá»c conversion stream, nÃ¢ng cao hiá»‡u suáº¥t ghi</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    BufferedWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(osw)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Äá»c tá»«ng dÃ²ng cá»§a tá»‡p Ä‘áº§u vÃ o, ghi vÃ o tá»‡p Ä‘áº§u ra</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> line</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((line </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> br</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        bw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(line);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        bw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">newLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Viáº¿t kÃ½ tá»± xuá»‘ng dÃ²ng sau má»—i dÃ²ng</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // ÄÃ³ng cÃ¡c stream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    br</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    bw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong Ä‘oáº¡n mÃ£ vÃ­ dá»¥ trÃªn, Ä‘áº§u tiÃªn sá»­ dá»¥ng FileInputStream Ä‘á»ƒ Ä‘á»c byte stream tá»« tá»‡p, sá»­ dá»¥ng mÃ£ hÃ³a UTF-8 Ä‘á»ƒ Ä‘á»c. Sau Ä‘Ã³, sá»­ dá»¥ng InputStreamReader Ä‘á»ƒ chuyá»ƒn Ä‘á»•i byte stream thÃ nh character stream, sá»­ dá»¥ng mÃ£ hÃ³a UTF-8 Ä‘á»ƒ chuyá»ƒn Ä‘á»•i. Tiáº¿p theo, sá»­ dá»¥ng BufferedReader Ä‘á»ƒ bá»c character stream, nÃ¢ng cao hiá»‡u suáº¥t Ä‘á»c. Tiáº¿p theo, táº¡o FileOutputStream Ä‘á»ƒ xuáº¥t ra tá»‡p, sá»­ dá»¥ng mÃ£ hÃ³a UTF-8 Ä‘á»ƒ táº¡o. Sau Ä‘Ã³, sá»­ dá»¥ng OutputStreamWriter Ä‘á»ƒ chuyá»ƒn Ä‘á»•i output stream thÃ nh character stream, sá»­ dá»¥ng mÃ£ hÃ³a UTF-8 Ä‘á»ƒ chuyá»ƒn Ä‘á»•i. Cuá»‘i cÃ¹ng, sá»­ dá»¥ng BufferedWriter Ä‘á»ƒ bá»c conversion stream, nÃ¢ng cao hiá»‡u suáº¥t ghi.</p>
<h3>06. Tá»•ng káº¿t</h3>
<p>InputStreamReader vÃ  OutputStreamWriter lÃ  cÃ¡c lá»›p chuyá»ƒn Ä‘á»•i dÃ²ng byte thÃ nh dÃ²ng kÃ½ tá»± hoáº·c dÃ²ng kÃ½ tá»± thÃ nh dÃ²ng byte. ChÃºng thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» chuyá»ƒn Ä‘á»•i giá»¯a dÃ²ng byte vÃ  dÃ²ng kÃ½ tá»±, cho phÃ©p chuyá»ƒn Ä‘á»•i dÃ²ng byte sang dÃ²ng kÃ½ tá»± theo má»™t bá»™ kÃ½ tá»± Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh, hoáº·c chuyá»ƒn Ä‘á»•i dÃ²ng kÃ½ tá»± sang dÃ²ng byte theo má»™t bá»™ kÃ½ tá»± Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh.</p>
<p>CÃ¡c phÆ°Æ¡ng thá»©c thÆ°á»ng dÃ¹ng cá»§a lá»›p InputStreamReader bao gá»“m:</p>
<ul>
<li><code>read()</code>: Äá»c má»™t kÃ½ tá»± tá»« dÃ²ng Ä‘áº§u vÃ o.</li>
<li><code>read(char[] cbuf, int off, int len)</code>: Äá»c len kÃ½ tá»± tá»« dÃ²ng Ä‘áº§u vÃ o vÃ  lÆ°u vÃ o máº£ng kÃ½ tá»± cbuf báº¯t Ä‘áº§u tá»« vá»‹ trÃ­ off.</li>
<li><code>ready()</code>: Kiá»ƒm tra xem dÃ²ng nÃ y Ä‘Ã£ sáºµn sÃ ng Ä‘á»ƒ Ä‘á»c chÆ°a.</li>
<li><code>close()</code>: ÄÃ³ng dÃ²ng Ä‘áº§u vÃ o.</li>
</ul>
<p>CÃ¡c phÆ°Æ¡ng thá»©c thÆ°á»ng dÃ¹ng cá»§a lá»›p OutputStreamWriter bao gá»“m:</p>
<ul>
<li><code>write(int c)</code>: Ghi má»™t kÃ½ tá»± vÃ o dÃ²ng Ä‘áº§u ra.</li>
<li><code>write(char[] cbuf, int off, int len)</code>: Ghi len kÃ½ tá»± tá»« máº£ng kÃ½ tá»± cbuf vÃ o dÃ²ng Ä‘áº§u ra báº¯t Ä‘áº§u tá»« vá»‹ trÃ­ off.</li>
<li><code>flush()</code>: Äáº©y dá»¯ liá»‡u tá»« bá»™ Ä‘á»‡m ra dÃ²ng Ä‘áº§u ra.</li>
<li><code>close()</code>: ÄÃ³ng dÃ²ng Ä‘áº§u ra.</li>
</ul>
<p>Khi sá»­ dá»¥ng cÃ¡c dÃ²ng chuyá»ƒn Ä‘á»•i, cáº§n chá»‰ Ä‘á»‹nh Ä‘Ãºng bá»™ kÃ½ tá»± mÃ£ hÃ³a, náº¿u khÃ´ng cÃ³ thá»ƒ dáº«n Ä‘áº¿n viá»‡c Ä‘á»c hoáº·c ghi dá»¯ liá»‡u bá»‹ lá»—i hiá»ƒn thá»‹.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Serialize/Deserialize Stream</title>
      <link>https://vanhung4499.github.io/programming/java/IO/serialize.html</link>
      <guid>https://vanhung4499.github.io/programming/java/IO/serialize.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Serialize/Deserialize Stream</source>
      <description>Serialize/Deserialize Stream Serialize/Deserialize Stream trong Java (ObjectInputStream vÃ  ObjectOutputStream) lÃ  má»™t loáº¡i stream cÃ³ thá»ƒ serialize vÃ  deserialize cÃ¡c Ä‘á»‘i tÆ°á»£ng J...</description>
      <category>java</category>
      <pubDate>Mon, 01 Jul 2024 16:00:06 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Serialize/Deserialize Stream trong Java (ObjectInputStream vÃ  ObjectOutputStream) lÃ  má»™t loáº¡i stream cÃ³ thá»ƒ serialize vÃ  deserialize cÃ¡c Ä‘á»‘i tÆ°á»£ng Java.</p>
<p>serialize lÃ  quÃ¡ trÃ¬nh chuyá»ƒn Ä‘á»•i má»™t Ä‘á»‘i tÆ°á»£ng thÃ nh má»™t chuá»—i byte (bao gá»“m <code>dá»¯ liá»‡u cá»§a Ä‘á»‘i tÆ°á»£ng</code>, <code>loáº¡i Ä‘á»‘i tÆ°á»£ng</code> vÃ  <code>cÃ¡c thuá»™c tÃ­nh lÆ°u trá»¯ trong Ä‘á»‘i tÆ°á»£ng</code>, v.v.) Ä‘á»ƒ truyá»n qua máº¡ng hoáº·c lÆ°u vÃ o tá»‡p, hoáº·c truyá»n giá»¯a cÃ¡c chÆ°Æ¡ng trÃ¬nh. Trong Java, serialize Ä‘Æ°á»£c thá»±c hiá»‡n báº±ng cÃ¡ch triá»ƒn khai interface java.io.Serializable, chá»‰ cÃ³ cÃ¡c Ä‘á»‘i tÆ°á»£ng triá»ƒn khai <a href="serializbale">interface Serializable</a> má»›i cÃ³ thá»ƒ Ä‘Æ°á»£c serialize.</p>
<p>Deserialize lÃ  quÃ¡ trÃ¬nh chuyá»ƒn Ä‘á»•i má»™t chuá»—i byte thÃ nh má»™t Ä‘á»‘i tÆ°á»£ng Ä‘á»ƒ sá»­ dá»¥ng trong chÆ°Æ¡ng trÃ¬nh.</p>
<h3>01. ObjectOutputStream</h3>
<p><code>java.io.ObjectOutputStream</code> káº¿ thá»«a tá»« lá»›p OutputStream, do Ä‘Ã³ cÃ³ thá»ƒ ghi chuá»—i byte Ä‘Ã£ serialize vÃ o cÃ¡c output stream nhÆ° tá»‡p, máº¡ng, v.v.</p>
<p>Xem phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o cá»§a ObjectOutputStream:<br>
<code>ObjectOutputStream(OutputStream out)</code></p>
<p>PhÆ°Æ¡ng thá»©c khá»Ÿi táº¡o nÃ y nháº­n má»™t Ä‘á»‘i tÆ°á»£ng OutputStream lÃ m tham sá»‘, dÃ¹ng Ä‘á»ƒ ghi chuá»—i byte Ä‘Ã£ serialize vÃ o output stream Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh. VÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"file.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> oos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(fos)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>Má»™t Ä‘á»‘i tÆ°á»£ng muá»‘n serialize pháº£i Ä‘Ã¡p á»©ng hai Ä‘iá»u kiá»‡n:</p>
<ul>
<li>Lá»›p Ä‘Ã³ pháº£i triá»ƒn khai <a href="https://javabetter.cn/io/Serializbale.html" target="_blank" rel="noopener noreferrer">interface <code>java.io.Serializable</code></a>, náº¿u khÃ´ng sáº½ nÃ©m ra ngoáº¡i lá»‡ <code>NotSerializableException</code>.</li>
<li>Táº¥t cáº£ cÃ¡c trÆ°á»ng cá»§a lá»›p Ä‘Ã³ pháº£i cÃ³ kháº£ nÄƒng serialize. Náº¿u má»™t trÆ°á»ng khÃ´ng cáº§n serialize, thÃ¬ cáº§n sá»­ dá»¥ng tá»« khÃ³a <a href="https://javabetter.cn/io/transient.html" target="_blank" rel="noopener noreferrer"><code>transient</code></a> Ä‘á»ƒ Ä‘Ã¡nh dáº¥u.</li>
</ul>
<p>VÃ­ dá»¥ sá»­ dá»¥ng nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Employee</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Serializable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> address</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> transient</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Tá»« khÃ³a transient Ä‘Ã¡nh dáº¥u thÃ nh viÃªn nÃ y khÃ´ng bá»‹ serialize</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Tiáº¿p theo, chÃºng ta sáº½ nÃ³i vá» phÆ°Æ¡ng thá»©c <code>writeObject (Object obj)</code>, phÆ°Æ¡ng thá»©c nÃ y trong lá»›p ObjectOutputStream Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ serialize má»™t Ä‘á»‘i tÆ°á»£ng thÃ nh chuá»—i byte vÃ  ghi vÃ o output stream. NÃ³ cÃ³ thá»ƒ xá»­ lÃ½ cÃ¡c má»‘i quan há»‡ tham chiáº¿u giá»¯a cÃ¡c Ä‘á»‘i tÆ°á»£ng, quan há»‡ káº¿ thá»«a, cÃ¡c trÆ°á»ng tÄ©nh vÃ  cÃ¡c trÆ°á»ng transient.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ObjectOutputStreamDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Person</span><span style="color:#E06C75;--shiki-dark:#E06C75"> person</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Person</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"logs/person.dat"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> oos</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectOutputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(fos);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            oos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(person);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            oos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Person</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Serializable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Person</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">age</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getAge</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong Ä‘oáº¡n mÃ£ trÃªn, Ä‘áº§u tiÃªn chÃºng ta táº¡o má»™t Ä‘á»‘i tÆ°á»£ng Person, sau Ä‘Ã³ sá»­ dá»¥ng FileOutputStream vÃ  ObjectOutputStream Ä‘á»ƒ serialize Ä‘á»‘i tÆ°á»£ng Person vÃ  ghi vÃ o tá»‡p person.dat. Trong lá»›p Person, chÃºng ta Ä‘Ã£ triá»ƒn khai interface Serializable, cho phÃ©p lá»›p nÃ y cÃ³ thá»ƒ serialize Ä‘á»‘i tÆ°á»£ng.</p>
<h3>02. ObjectInputStream</h3>
<p>ObjectInputStream cÃ³ thá»ƒ Ä‘á»c byte stream do ObjectOutputStream ghi láº¡i vÃ  deserialize nÃ³ thÃ nh cÃ¡c Ä‘á»‘i tÆ°á»£ng tÆ°Æ¡ng á»©ng (bao gá»“m <code>dá»¯ liá»‡u cá»§a Ä‘á»‘i tÆ°á»£ng</code>, <code>loáº¡i Ä‘á»‘i tÆ°á»£ng</code> vÃ  <code>cÃ¡c thuá»™c tÃ­nh lÆ°u trá»¯ trong Ä‘á»‘i tÆ°á»£ng</code>, v.v.).</p>
<p>NÃ³i Ä‘Æ¡n giáº£n, trÆ°á»›c khi serialize Ä‘á»‘i tÆ°á»£ng nhÆ° tháº¿ nÃ o thÃ¬ sau khi deserialize Ä‘á»‘i tÆ°á»£ng sáº½ nhÆ° tháº¿.</p>
<p>HÃ£y xem phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o: <code>ObjectInputStream(InputStream in)</code>: Táº¡o má»™t ObjectInputStream tá»« InputStream Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh.</p>
<p>PhÆ°Æ¡ng thá»©c readObject cá»§a ObjectInputStream dÃ¹ng Ä‘á»ƒ Ä‘á»c Ä‘á»‘i tÆ°á»£ng tá»« tá»‡p Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh, vÃ­ dá»¥ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> filename </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "logs/person.dat"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // TÃªn tá»‡p cáº§n deserialize</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fileIn </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(filename)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">     ObjectInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> in </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(fileIn)) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     // Äá»c Ä‘á»‘i tÆ°á»£ng tá»« input stream Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh vÃ  deserialize</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">     Object</span><span style="color:#E06C75;--shiki-dark:#E06C75"> obj </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     // Ã‰p kiá»ƒu Ä‘á»‘i tÆ°á»£ng sau khi deserialize vá» kiá»ƒu chá»‰ Ä‘á»‹nh</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">     Person</span><span style="color:#E06C75;--shiki-dark:#E06C75"> p </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (Person) obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     // In thÃ´ng tin Ä‘á»‘i tÆ°á»£ng sau khi deserialize</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">     System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Deserialized Object: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> p);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75"> | </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ClassNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">     e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>ChÃºng ta Ä‘áº§u tiÃªn chá»‰ Ä‘á»‹nh tÃªn tá»‡p cáº§n deserialize (Ä‘Ã£ Ä‘Æ°á»£c serialize báº±ng ObjectOutputStream trÆ°á»›c Ä‘Ã³), sau Ä‘Ã³ táº¡o má»™t Ä‘á»‘i tÆ°á»£ng FileInputStream vÃ  má»™t Ä‘á»‘i tÆ°á»£ng ObjectInputStream. Tiáº¿p theo, chÃºng ta gá»i phÆ°Æ¡ng thá»©c readObject cá»§a ObjectInputStream Ä‘á»ƒ Ä‘á»c Ä‘á»‘i tÆ°á»£ng tá»« tá»‡p Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh vÃ  Ã©p kiá»ƒu Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ vá» kiá»ƒu Person. Cuá»‘i cÃ¹ng, chÃºng ta in thÃ´ng tin Ä‘á»‘i tÆ°á»£ng sau khi deserialize.</p>
<h3>03. Kryo</h3>
<p>Trong thá»±c táº¿ phÃ¡t triá»ƒn, ráº¥t hiáº¿m khi sá»­ dá»¥ng cÆ¡ cháº¿ serialize vÃ  deserialize tÃ­ch há»£p sáºµn cá»§a JDK, bá»Ÿi vÃ¬:</p>
<ul>
<li>Kháº£ nÄƒng di chuyá»ƒn kÃ©m: Chá»‰ dÃ nh riÃªng cho Java, khÃ´ng thá»ƒ serialize vÃ  deserialize giá»¯a cÃ¡c ngÃ´n ngá»¯ khÃ¡c nhau.</li>
<li>Hiá»‡u suáº¥t kÃ©m: KÃ­ch thÆ°á»›c byte sau serialize lá»›n, tÄƒng chi phÃ­ truyá»n táº£i/lÆ°u trá»¯.</li>
<li>Váº¥n Ä‘á» an ninh: Káº» táº¥n cÃ´ng cÃ³ thá»ƒ táº¡o ra dá»¯ liá»‡u Ä‘á»™c háº¡i Ä‘á»ƒ thá»±c thi mÃ£ tá»« xa, gÃ¢y ra má»‘i Ä‘e dá»a nghiÃªm trá»ng cho há»‡ thá»‘ng. Äá»c thÃªm: <a href="https://cryin.github.io/blog/secure-development-java-deserialization-vulnerability/" target="_blank" rel="noopener noreferrer">Lá»— há»•ng Java deserialize</a>.</li>
</ul>
<p>Kryo lÃ  má»™t thÆ° viá»‡n serialize vÃ  deserialize Java tuyá»‡t vá»i, cÃ³ hiá»‡u suáº¥t cao, hiá»‡u quáº£ vÃ  dá»… sá»­ dá»¥ng cÅ©ng nhÆ° má»Ÿ rá»™ng, giáº£i quyáº¿t hiá»‡u quáº£ nhá»¯ng háº¡n cháº¿ cá»§a cÆ¡ cháº¿ serialize tÃ­ch há»£p sáºµn cá»§a JDK.</p>
<blockquote>
<p>Äá»‹a chá»‰ GitHub: <a href="https://github.com/EsotericSoftware/kryo" target="_blank" rel="noopener noreferrer">https://github.com/EsotericSoftware/kryo</a></p>
</blockquote>
<p>VÃ­ dá»¥ sá»­ dá»¥ng:</p>
<p>BÆ°á»›c Ä‘áº§u tiÃªn, thÃªm phá»¥ thuá»™c vÃ o tá»‡p pom.xml.</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">&lt;!-- ThÃªm cÃ´ng cá»¥ serialize Kryo --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">     &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;com.esotericsoftware&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">     &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;kryo&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">     &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;5.4.0&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><p>BÆ°á»›c thá»© hai, táº¡o má»™t Ä‘á»‘i tÆ°á»£ng Kryo, vÃ  sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>register()</code> Ä‘á»ƒ Ä‘Äƒng kÃ½ Ä‘á»‘i tÆ°á»£ng. Sau Ä‘Ã³, sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>writeObject()</code> Ä‘á»ƒ serialize Ä‘á»‘i tÆ°á»£ng Java thÃ nh binary stream, vÃ  sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>readObject()</code> Ä‘á»ƒ deserialize binary stream thÃ nh Ä‘á»‘i tÆ°á»£ng Java. Cuá»‘i cÃ¹ng, xuáº¥t Ä‘á»‘i tÆ°á»£ng Java sau khi deserialize.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> KryoDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> FileNotFoundException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Kryo</span><span style="color:#E06C75;--shiki-dark:#E06C75"> kryo</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Kryo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        kryo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">register</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">KryoParam</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        KryoParam</span><span style="color:#E06C75;--shiki-dark:#E06C75"> object</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> KryoParam</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">123</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Output</span><span style="color:#E06C75;--shiki-dark:#E06C75"> output</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Output</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"logs/kryo.bin"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        kryo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(output, object);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        output</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Input</span><span style="color:#E06C75;--shiki-dark:#E06C75"> input</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Input</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"logs/kryo.bin"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        KryoParam</span><span style="color:#E06C75;--shiki-dark:#E06C75"> object2</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> kryo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(input, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">KryoParam</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(object2);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        input</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> KryoParam</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> KryoParam</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> KryoParam</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">age</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> setName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getAge</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> setAge</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">age</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#98C379;--shiki-dark:#98C379"> "KryoParam{"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">                "name='"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> '</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\'</span><span style="color:#98C379;--shiki-dark:#98C379">'</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">                ", age="</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> age </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">                '}'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>04. Tá»•ng káº¿t</h3>
<p>Trong pháº§n nÃ y, chÃºng ta Ä‘Ã£ giá»›i thiá»‡u cÆ¡ cháº¿ serialize cá»§a Java vÃ  Ä‘á» xuáº¥t má»™t thÆ° viá»‡n Java hiá»‡u suáº¥t cao Kryo Ä‘á»ƒ thay tháº¿ cÆ¡ cháº¿ serialize tÃ­ch há»£p sáºµn cá»§a JDK, hiá»‡n Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng rá»™ng rÃ£i trong Twitter, Groupon, Yahoo vÃ  nhiá»u dá»± Ã¡n mÃ£ nguá»“n má»Ÿ ná»•i tiáº¿ng khÃ¡c (nhÆ° Hive, Storm).</p>
<p>Hy vá»ng ráº±ng nhá»¯ng thÃ´ng tin trÃªn sáº½ há»¯u Ã­ch cho cÃ¡c báº¡n.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Buffered Stream</title>
      <link>https://vanhung4499.github.io/programming/java/IO/buffer.html</link>
      <guid>https://vanhung4499.github.io/programming/java/IO/buffer.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Buffered Stream</source>
      <description>Buffered Stream CÃ¡c buffered stream cá»§a Java lÃ  má»™t loáº¡i bao bá»c cho cÃ¡c byte stream vÃ  character stream, báº±ng cÃ¡ch má»Ÿ má»™t bá»™ Ä‘á»‡m trong bá»™ nhá»› Ä‘á»ƒ tÄƒng hiá»‡u suáº¥t cá»§a cÃ¡c thao tÃ¡c...</description>
      <category>java</category>
      <pubDate>Sun, 30 Jun 2024 16:14:55 GMT</pubDate>
      <content:encoded><![CDATA[
<p>CÃ¡c buffered stream cá»§a Java lÃ  má»™t loáº¡i bao bá»c cho cÃ¡c byte stream vÃ  character stream, báº±ng cÃ¡ch má»Ÿ má»™t bá»™ Ä‘á»‡m trong bá»™ nhá»› Ä‘á»ƒ tÄƒng hiá»‡u suáº¥t cá»§a cÃ¡c thao tÃ¡c I/O. Java sá»­ dá»¥ng <code>BufferedInputStream</code> vÃ  <code>BufferedOutputStream</code> Ä‘á»ƒ thá»±c hiá»‡n Ä‘á»‡m byte stream, vÃ  <code>BufferedReader</code> vÃ  <code>BufferedWriter</code> Ä‘á»ƒ thá»±c hiá»‡n Ä‘á»‡m character stream.</p>
<p>NguyÃªn lÃ½ hoáº¡t Ä‘á»™ng cá»§a buffered stream lÃ  ghi dá»¯ liá»‡u vÃ o bá»™ Ä‘á»‡m trÆ°á»›c, khi bá»™ Ä‘á»‡m Ä‘áº§y thÃ¬ ghi dá»¯ liá»‡u vÃ o tá»‡p hoáº·c output stream má»™t láº§n, hoáº·c khi bá»™ Ä‘á»‡m trá»‘ng thÃ¬ Ä‘á»c má»™t lÆ°á»£ng dá»¯ liá»‡u nháº¥t Ä‘á»‹nh tá»« tá»‡p hoáº·c input stream má»™t láº§n. Äiá»u nÃ y giÃºp giáº£m sá»‘ láº§n thao tÃ¡c I/O cá»§a há»‡ thá»‘ng, tÄƒng hiá»‡u suáº¥t I/O cá»§a há»‡ thá»‘ng, tá»« Ä‘Ã³ tÄƒng hiá»‡u suáº¥t cháº¡y cá»§a chÆ°Æ¡ng trÃ¬nh.</p>
<h3>01. Buffered byte stream</h3>
<p><code>BufferedInputStream</code> vÃ  <code>BufferedOutputStream</code> thuá»™c loáº¡i buffered stream byte, cá»§ng cá»‘ cÃ¡c byte stream <code>InputStream</code> vÃ  <code>OutputStream</code>. Vá» cÃ¡c byte stream, chÃºng ta Ä‘Ã£ tháº£o luáº­n chi tiáº¿t trÆ°á»›c Ä‘Ã³, báº¡n cÃ³ thá»ƒ <a href="https://javabetter.cn/io/stream.html" target="_blank" rel="noopener noreferrer">nháº¥p vÃ o liÃªn káº¿t nÃ y</a> Ä‘á»ƒ Ã´n láº¡i.</p>
<h4>1. PhÆ°Æ¡ng thá»©c khá»Ÿi táº¡o</h4>
<ul>
<li><code>BufferedInputStream(InputStream in)</code> : Táº¡o má»™t buffered stream Ä‘áº§u vÃ o má»›i, chÃº Ã½ ráº±ng tham sá»‘ lÃ  loáº¡i <strong>InputStream</strong>.</li>
<li><code>BufferedOutputStream(OutputStream out)</code> : Táº¡o má»™t buffered stream Ä‘áº§u ra má»›i, chÃº Ã½ ráº±ng tham sá»‘ lÃ  loáº¡i <strong>OutputStream</strong>.</li>
</ul>
<p>VÃ­ dá»¥ mÃ£ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o buffered stream Ä‘áº§u vÃ o byte, Ä‘áº§u tiÃªn khai bÃ¡o byte stream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fis </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"b.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">BufferedInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bis </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(fis)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o buffered stream Ä‘áº§u vÃ o byte (má»™t bÆ°á»›c)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">BufferedInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bis </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"b.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o buffered stream Ä‘áº§u ra byte (má»™t bÆ°á»›c)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">BufferedOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"b.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><h4>2. Hiá»‡u quáº£ cá»§a buffered stream</h4>
<p>ChÃºng ta sáº½ kiá»ƒm tra hiá»‡u quáº£ cá»§a buffered stream báº±ng cÃ¡ch sao chÃ©p má»™t tá»‡p lá»›n hÆ¡n 370MB. Äá»ƒ so sÃ¡nh, trÆ°á»›c tiÃªn chÃºng ta sáº½ thá»±c hiá»‡n báº±ng cÃ¡ch sá»­ dá»¥ng stream cÆ¡ báº£n, mÃ£ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi láº¡i thá»i gian báº¯t Ä‘áº§u</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> start </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">currentTimeMillis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o Ä‘á»‘i tÆ°á»£ng stream</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fis </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"py.mp4"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Tá»‡p exe Ä‘á»§ lá»›n</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">     FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"copyPy.mp4"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Äá»c vÃ  ghi dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> b</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((b </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(b);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi láº¡i thá»i gian káº¿t thÃºc</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> end </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">currentTimeMillis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Thá»i gian sao chÃ©p báº±ng stream cÆ¡ báº£n: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (end </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> start) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> " mili giÃ¢y"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Xin lá»—i, mÃ¡y cá»§a tÃ´i khÃ¡ yáº¿u, sau 10 phÃºt váº«n Ä‘ang sao chÃ©p. HÃ£y chuyá»ƒn sang thá»­ buffered stream, mÃ£ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi láº¡i thá»i gian báº¯t Ä‘áº§u</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> start </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">currentTimeMillis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o Ä‘á»‘i tÆ°á»£ng stream</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">BufferedInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bis </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"py.mp4"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">     BufferedOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"copyPy.mp4"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Äá»c vÃ  ghi dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> b</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((b </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> bis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        bos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(b);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi láº¡i thá»i gian káº¿t thÃºc</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> end </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">currentTimeMillis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Thá»i gian sao chÃ©p báº±ng buffered stream: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (end </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> start) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> " mili giÃ¢y"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Chá»‰ cáº§n 8016 mili giÃ¢y. LÃ m tháº¿ nÃ o Ä‘á»ƒ nhanh hÆ¡n ná»¯a?</p>
<p>ChÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡ch Ä‘á»c vÃ  ghi báº±ng máº£ng, nhÆ° Ä‘Ã£ tháº£o luáº­n trÆ°á»›c Ä‘Ã³, mÃ£ nhÆ° sau:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi láº¡i thá»i gian báº¯t Ä‘áº§u</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> start </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">currentTimeMillis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o Ä‘á»‘i tÆ°á»£ng stream</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">BufferedInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bis </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"py.mp4"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">     BufferedOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"copyPy.mp4"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Äá»c vÃ  ghi dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] bytes </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">8</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> *</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1024</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((len </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> bis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(bytes)</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        bos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(bytes, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, len);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi láº¡i thá»i gian káº¿t thÃºc</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> end </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">currentTimeMillis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Thá»i gian sao chÃ©p báº±ng buffered stream sá»­ dá»¥ng máº£ng: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (end </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> start) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> " mili giÃ¢y"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>BÃ¢y giá» thÃ¬ nhanh hÆ¡n nhiá»u, chá»‰ cáº§n 521 mili giÃ¢y.</p>
<h4>3. Táº¡i sao buffered stream láº¡i nhanh nhÆ° váº­y?</h4>
<p>Java IO truyá»n thá»‘ng lÃ  cháº¿ Ä‘á»™ cháº·n, hoáº¡t Ä‘á»™ng cá»§a nÃ³ lÃ  "Ä‘á»c/ghi, chá», Ä‘á»c/ghi, chá»...". buffered stream giáº£i quyáº¿t váº¥n Ä‘á» nÃ y báº±ng cÃ¡ch <strong>Ä‘á»c vÃ  ghi nhiá»u hÆ¡n trong má»™t láº§n, giáº£m táº§n suáº¥t Ä‘á»c vÃ  ghi, sá»­ dá»¥ng khÃ´ng gian Ä‘á»ƒ Ä‘á»•i láº¥y thá»i gian</strong>.</p>
<ul>
<li><strong>Giáº£m sá»‘ láº§n gá»i há»‡ thá»‘ng</strong>: Khi sá»­ dá»¥ng buffered stream, dá»¯ liá»‡u khÃ´ng Ä‘Æ°á»£c ghi trá»±c tiáº¿p vÃ o Ä‘Ä©a hoáº·c output stream, mÃ  trÆ°á»›c tiÃªn Ä‘Æ°á»£c ghi vÃ o bá»™ Ä‘á»‡m. Khi bá»™ Ä‘á»‡m Ä‘áº§y, dá»¯ liá»‡u má»›i Ä‘Æ°á»£c ghi má»™t láº§n vÃ o Ä‘Ä©a hoáº·c output stream. Äiá»u nÃ y giÃºp giáº£m sá»‘ láº§n gá»i há»‡ thá»‘ng, do Ä‘Ã³ nÃ¢ng cao hiá»‡u quáº£ hoáº¡t Ä‘á»™ng I/O.</li>
<li><strong>Giáº£m sá»‘ láº§n Ä‘á»c vÃ  ghi Ä‘Ä©a</strong>: Khi cáº§n Ä‘á»c dá»¯ liá»‡u, buffered stream sáº½ Ä‘á»c tá»« bá»™ Ä‘á»‡m trÆ°á»›c. Náº¿u bá»™ Ä‘á»‡m khÃ´ng Ä‘á»§ dá»¯ liá»‡u, buffered stream sáº½ Ä‘á»c má»™t lÆ°á»£ng lá»›n dá»¯ liá»‡u tá»« Ä‘Ä©a hoáº·c input stream má»™t láº§n. TÆ°Æ¡ng tá»±, khi cáº§n ghi dá»¯ liá»‡u, buffered stream sáº½ ghi vÃ o bá»™ Ä‘á»‡m trÆ°á»›c. Náº¿u bá»™ Ä‘á»‡m Ä‘áº§y, dá»¯ liá»‡u trong bá»™ Ä‘á»‡m sáº½ Ä‘Æ°á»£c ghi vÃ o Ä‘Ä©a hoáº·c output stream má»™t láº§n. Äiá»u nÃ y giÃºp giáº£m sá»‘ láº§n Ä‘á»c vÃ  ghi Ä‘Ä©a, do Ä‘Ã³ nÃ¢ng cao hiá»‡u quáº£ hoáº¡t Ä‘á»™ng I/O.</li>
<li><strong>NÃ¢ng cao hiá»‡u quáº£ truyá»n dá»¯ liá»‡u</strong>: Khi sá»­ dá»¥ng buffered stream, dá»¯ liá»‡u Ä‘Æ°á»£c truyá»n theo khá»‘i, giáº£m sá»‘ láº§n truyá»n dá»¯ liá»‡u, do Ä‘Ã³ nÃ¢ng cao hiá»‡u quáº£ truyá»n dá»¯ liá»‡u.</li>
</ul>
<p>HÃ£y xem phÆ°Æ¡ng thá»©c <code>read</code> cá»§a <code>BufferedInputStream</code>:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> synchronized</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> read</span><span style="color:#E06C75;--shiki-dark:#E06C75">() throws IOException {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (pos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> count) {     </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Náº¿u vá»‹ trÃ­ hiá»‡n táº¡i Ä‘Ã£ Ä‘áº¿n cuá»‘i bá»™ Ä‘á»‡m</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        fill</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">             // Äiá»n Ä‘áº§y bá»™ Ä‘á»‡m</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (pos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> count)   </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Náº¿u sau khi Ä‘iá»n Ä‘áº§y váº«n Ä‘áº¿n cuá»‘i bá»™ Ä‘á»‡m, nghÄ©a lÃ  Ä‘Ã£ Ä‘á»c xong</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            return</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">      // Tráº£ vá» -1 Ä‘á»ƒ biá»ƒu thá»‹ Ä‘Ã£ Ä‘á»c xong</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getBufIfOpen</span><span style="color:#E06C75;--shiki-dark:#E06C75">()[pos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">++</span><span style="color:#E06C75;--shiki-dark:#E06C75">] </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&amp;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0xff</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Tráº£ vá» byte táº¡i vá»‹ trÃ­ hiá»‡n táº¡i vÃ  tÄƒng vá»‹ trÃ­ lÃªn 1</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Äoáº¡n mÃ£ nÃ y cÃ³ hai pháº§n chÃ­nh:</p>
<ul>
<li><code>fill()</code>: PhÆ°Æ¡ng thá»©c nÃ y sáº½ Ä‘iá»n Ä‘áº§y bá»™ Ä‘á»‡m <code>buf</code>.</li>
<li><code>getBufIfOpen()[pos++] &amp; 0xff</code>: Tráº£ vá» byte táº¡i vá»‹ trÃ­ Ä‘á»c hiá»‡n táº¡i <code>pos</code> (phÆ°Æ¡ng thá»©c <code>getBufIfOpen()</code> tráº£ vá» máº£ng <code>buffer</code>, lÃ  kiá»ƒu <code>byte</code>), vÃ  thá»±c hiá»‡n phÃ©p toÃ¡n <code>AND</code> vá»›i <code>0xff</code>. Má»¥c Ä‘Ã­ch lÃ  Ä‘á»ƒ xá»­ lÃ½ byte <code>b</code> nhÆ° má»™t byte khÃ´ng dáº¥u, vÃ¬ kiá»ƒu <code>byte</code> trong Java cÃ³ dáº¥u. PhÃ©p toÃ¡n <code>AND</code> vá»›i <code>0xff</code> sáº½ chuyá»ƒn Ä‘á»•i byte nÃ y thÃ nh byte khÃ´ng dáº¥u, vá»›i pháº¡m vi tá»« 0 Ä‘áº¿n 255.</li>
</ul>
<blockquote>
<p>Xá»­ lÃ½ <code>byte &amp; 0xFF</code> sáº½ Ä‘Æ°á»£c giáº£i thÃ­ch chi tiáº¿t sau.</p>
</blockquote>
<p>Tiáº¿p theo, hÃ£y xem phÆ°Æ¡ng thá»©c <code>read</code> cá»§a <code>FileInputStream</code>:</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240630225343.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Trong Ä‘oáº¡n mÃ£ nÃ y, phÆ°Æ¡ng thá»©c <code>read0()</code> lÃ  má»™t native-method, Ä‘Æ°á»£c thá»±c hiá»‡n bá»Ÿi há»‡ Ä‘iá»u hÃ nh vÃ  khÃ´ng pháº£i báº±ng Java. TrÃªn cÃ¡c há»‡ Ä‘iá»u hÃ nh khÃ¡c nhau, phÆ°Æ¡ng thá»©c <code>read0()</code> cÃ³ thá»ƒ Ä‘Æ°á»£c thá»±c hiá»‡n khÃ¡c nhau, nhÆ°ng chá»©c nÄƒng cá»§a chÃºng lÃ  giá»‘ng nhau, dÃ¹ng Ä‘á»ƒ <strong>Ä‘á»c má»™t byte</strong>.</p>
<p>Tiáº¿p theo, hÃ£y xem phÆ°Æ¡ng thá»©c <code>write(byte b[], int off, int len)</code> cá»§a <code>BufferedOutputStream</code>:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> synchronized</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> write</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#E06C75;--shiki-dark:#E06C75"> b[]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> off</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len) throws IOException {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (len </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> buf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">length</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {    </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Náº¿u sá»‘ byte ghi lá»›n hÆ¡n hoáº·c báº±ng Ä‘á»™ dÃ i bá»™ Ä‘á»‡m</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        /* Náº¿u Ä‘á»™ dÃ i yÃªu cáº§u vÆ°á»£t quÃ¡ kÃ­ch thÆ°á»›c cá»§a bá»™ Ä‘á»‡m Ä‘áº§u ra,</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">           trÆ°á»›c tiÃªn sáº½ lÃ m trá»‘ng bá»™ Ä‘á»‡m, sau Ä‘Ã³ trá»±c tiáº¿p ghi dá»¯ liá»‡u.</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">           Äiá»u nÃ y cÃ³ thá»ƒ trÃ¡nh váº¥n Ä‘á» xÃ¢u chuá»—i bá»™ Ä‘á»‡m. */</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        flushBuffer</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">          // TrÆ°á»›c tiÃªn lÃ m trá»‘ng bá»™ Ä‘á»‡m</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(b, off, len);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Trá»±c tiáº¿p ghi dá»¯ liá»‡u vÃ o output stream</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (len </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> buf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">length</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#E06C75;--shiki-dark:#E06C75"> count) { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Náº¿u sá»‘ byte ghi lá»›n hÆ¡n khÃ´ng gian trá»‘ng</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        flushBuffer</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">              // TrÆ°á»›c tiÃªn lÃ m trá»‘ng bá»™ Ä‘á»‡m</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">arraycopy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(b, off, buf, count, len);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Sao chÃ©p dá»¯ liá»‡u vÃ o bá»™ Ä‘á»‡m</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    count </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                             // Cáº­p nháº­t bá»™ Ä‘áº¿m</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>TrÆ°á»›c tiÃªn, phÆ°Æ¡ng thá»©c nÃ y sáº½ kiá»ƒm tra náº¿u sá»‘ byte ghi lá»›n hÆ¡n hoáº·c báº±ng Ä‘á»™ dÃ i bá»™ Ä‘á»‡m. Náº¿u Ä‘Ãºng, trÆ°á»›c tiÃªn nÃ³ sáº½ lÃ m trá»‘ng bá»™ Ä‘á»‡m, sau Ä‘Ã³ trá»±c tiáº¿p ghi dá»¯ liá»‡u vÃ o output stream. Äiá»u nÃ y nháº±m trÃ¡nh váº¥n Ä‘á» xÃ¢u chuá»—i bá»™ Ä‘á»‡m, nghÄ©a lÃ  khi kÃ­ch thÆ°á»›c bá»™ Ä‘á»‡m khÃ´ng Ä‘á»§ Ä‘á»ƒ chá»©a dá»¯ liá»‡u cáº§n ghi, cÃ³ thá»ƒ gÃ¢y ra lÃ m trá»‘ng bá»™ Ä‘á»‡m liÃªn tiáº¿p, dáº«n Ä‘áº¿n giáº£m hiá»‡u suáº¥t.</p>
<blockquote>
<p>Váº¥n Ä‘á» xÃ¢u chuá»—i (Cascade Problem) lÃ  hiá»‡n tÆ°á»£ng khi má»™t táº­p há»£p cÃ¡c buffered stream cÃ³ kÃ­ch thÆ°á»›c bá»™ Ä‘á»‡m khÃ´ng Ä‘á»§ Ä‘á»ƒ chá»©a dá»¯ liá»‡u cáº§n ghi, dáº«n Ä‘áº¿n dá»¯ liá»‡u bá»‹ phÃ¢n chia thÃ nh nhiá»u pháº§n vÃ  ghi vÃ o cÃ¡c bá»™ Ä‘á»‡m khÃ¡c nhau, cuá»‘i cÃ¹ng cáº§n pháº£i lÃ m trá»‘ng tá»«ng bá»™ Ä‘á»‡m má»™t, tá»« Ä‘Ã³ gÃ¢y giáº£m hiá»‡u suáº¥t.</p>
</blockquote>
<p>Tiáº¿p theo, náº¿u sá»‘ byte ghi nhá» hÆ¡n Ä‘á»™ dÃ i bá»™ Ä‘á»‡m, nÃ³ sáº½ kiá»ƒm tra khÃ´ng gian cÃ²n láº¡i cá»§a bá»™ Ä‘á»‡m cÃ³ Ä‘á»§ Ä‘á»ƒ chá»©a dá»¯ liá»‡u cáº§n ghi hay khÃ´ng. Náº¿u khÃ´ng Ä‘á»§, nÃ³ sáº½ lÃ m trá»‘ng bá»™ Ä‘á»‡m. Sau Ä‘Ã³, nÃ³ sáº½ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>System.arraycopy()</code> Ä‘á»ƒ sao chÃ©p dá»¯ liá»‡u vÃ o bá»™ Ä‘á»‡m vÃ  cáº­p nháº­t bá»™ Ä‘áº¿m <code>count</code>.</p>
<p>Cuá»‘i cÃ¹ng, náº¿u sá»‘ byte ghi nhá» hÆ¡n Ä‘á»™ dÃ i bá»™ Ä‘á»‡m vÃ  bá»™ Ä‘á»‡m váº«n cÃ²n khÃ´ng gian trá»‘ng, nÃ³ sáº½ trá»±c tiáº¿p sao chÃ©p dá»¯ liá»‡u vÃ o bá»™ Ä‘á»‡m vÃ  cáº­p nháº­t bá»™ Ä‘áº¿m <code>count</code>.</p>
<p>Äiá»u nÃ y cÃ³ nghÄ©a lÃ  chá»‰ khi <code>buf</code> Ä‘áº§y, nÃ³ má»›i lÃ m trá»‘ng bá»™ Ä‘á»‡m (flush) vÃ  ghi dá»¯ liá»‡u vÃ o Ä‘Ä©a, máº·c Ä‘á»‹nh má»—i láº§n ghi 8192 byte.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">OutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> out) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    this</span><span style="color:#E06C75;--shiki-dark:#E06C75">(out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 8192</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Náº¿u <code>buf</code> chÆ°a Ä‘áº§y, nÃ³ sáº½ tiáº¿p tá»¥c ghi vÃ o <code>buf</code>.</p>
<p>So sÃ¡nh vá»›i phÆ°Æ¡ng thá»©c <code>write</code> cá»§a <code>FileOutputStream</code>, cÅ©ng lÃ  phÆ°Æ¡ng thá»©c gá»‘c vÃ  má»—i láº§n chá»‰ cÃ³ thá»ƒ ghi má»™t byte.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240630225438.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Khi sá»­ dá»¥ng <code>BufferedOutputStream</code> vÃ  <code>BufferedInputStream</code> cÃ¹ng nhau, sá»‘ láº§n Ä‘á»c vÃ  ghi sáº½ giáº£m Ä‘Ã¡ng ká»ƒ, Ä‘áº·c biá»‡t khi sá»­ dá»¥ng <code>byte[] bytes = new byte[8*1024]</code>, tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i viá»‡c bá»™ Ä‘á»‡m cÃ³ dung lÆ°á»£ng 8 x 1024 byte, thÃ¬ hiá»‡u quáº£ Ä‘á»c vÃ  ghi sáº½ tÄƒng lÃªn ráº¥t nhiá»u.</p>
<h4>4. <code>byte &amp; 0xFF</code></h4>
<p>Kiá»ƒu byte thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u nhá»‹ phÃ¢n, vÃ­ dá»¥ nhÆ° Ä‘á»c vÃ  ghi vÃ o tá»‡p, truyá»n dá»¯ liá»‡u qua máº¡ng, v.v. Trong nhá»¯ng tÃ¬nh huá»‘ng nÃ y, biáº¿n kiá»ƒu byte cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ lÆ°u trá»¯ tá»«ng byte trong stream dá»¯ liá»‡u Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c thao tÃ¡c Ä‘á»c vÃ  ghi.</p>
<p>Kiá»ƒu byte lÃ  cÃ³ dáº¥u, cÃ³ nghÄ©a lÃ  giÃ¡ trá»‹ cá»§a nÃ³ náº±m trong pháº¡m vi tá»« -128 Ä‘áº¿n 127. Náº¿u chÃºng ta muá»‘n cÃ³ Ä‘Æ°á»£c má»™t giÃ¡ trá»‹ byte khÃ´ng dáº¥u, chÃºng ta cáº§n sá»­ dá»¥ng <code>byte &amp; 0xFF</code> Ä‘á»ƒ chuyá»ƒn Ä‘á»•i.</p>
<p>Äiá»u nÃ y lÃ  bá»Ÿi vÃ¬ 0xFF lÃ  má»™t sá»‘ nguyÃªn khÃ´ng dáº¥u, biá»ƒu diá»…n nhá»‹ phÃ¢n cá»§a nÃ³ lÃ  11111111. Khi má»™t giÃ¡ trá»‹ kiá»ƒu byte Ä‘Æ°á»£c thá»±c hiá»‡n phÃ©p AND vá»›i 0xFF, nÃ³ sáº½ chuyá»ƒn Ä‘á»•i giÃ¡ trá»‹ kiá»ƒu byte Ä‘Ã³ thÃ nh má»™t sá»‘ nguyÃªn khÃ´ng dáº¥u, náº±m trong pháº¡m vi tá»« 0 Ä‘áº¿n 255.</p>
<p>0xFF lÃ  má»™t sá»‘ tháº­p lá»¥c phÃ¢n, tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i nhá»‹ phÃ¢n 11111111. ToÃ¡n tá»­ &amp; cÃ³ Ã½ nghÄ©a lÃ : náº¿u hai bit tÆ°Æ¡ng á»©ng lÃ  1, thÃ¬ bit káº¿t quáº£ lÃ  1, ngÆ°á»£c láº¡i lÃ  0; vÃ¬ váº­y khi thá»±c hiá»‡n phÃ©p AND vá»›i 0xFF, byte sáº½ Ä‘Æ°á»£c giá»¯ nguyÃªn vÃ  chuyá»ƒn Ä‘á»•i thÃ nh má»™t sá»‘ nguyÃªn trong khoáº£ng tá»« 0 Ä‘áº¿n 255.</p>
<p>VÃ­ dá»¥, náº¿u chÃºng ta cÃ³ má»™t biáº¿n kiá»ƒu byte lÃ  b, vá»›i giÃ¡ trá»‹ lÃ  -1, thÃ¬ káº¿t quáº£ cá»§a b &amp; 0xFF lÃ  255. Äiá»u nÃ y cho phÃ©p chuyá»ƒn Ä‘á»•i má»™t giÃ¡ trá»‹ kiá»ƒu byte cÃ³ dáº¥u thÃ nh má»™t sá»‘ nguyÃªn khÃ´ng dáº¥u.</p>
<p>PhÃ©p toÃ¡n AND lÃ  má»™t phÆ°Æ¡ng phÃ¡p tÃ­nh toÃ¡n dá»¯ liá»‡u nhá»‹ phÃ¢n, trong Ä‘Ã³ náº¿u cáº£ hai bit tÆ°Æ¡ng á»©ng Ä‘á»u lÃ  1 thÃ¬ káº¿t quáº£ lÃ  1, ngÆ°á»£c láº¡i lÃ  0. Trong quÃ¡ trÃ¬nh tÃ­nh toÃ¡n <code>getBufIfOpen()[pos++] &amp; 0xff</code>, byte cÃ³ 8 bit, 0xFF lÃ  255 trong há»‡ tháº­p lá»¥c phÃ¢n, biá»ƒu diá»…n lÃ  sá»‘ nguyÃªn, cÃ³ 32 bit.</p>
<p>Náº¿u <code>getBufIfOpen()[pos++]</code> lÃ  -118, thÃ¬ biá»ƒu diá»…n gá»‘c cá»§a nÃ³ lÃ </p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>00000000 00000000 00000000 10001010</span></span></code></pre>
</div><p>Biá»ƒu diá»…n Ä‘áº£o cá»§a nÃ³ lÃ </p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>11111111 11111111 11111111 11110101</span></span></code></pre>
</div><p>Biá»ƒu diá»…n bÃ¹ cá»§a nÃ³ lÃ </p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>11111111 11111111 11111111 11110110</span></span></code></pre>
</div><p>0XFF lÃ  255 biá»ƒu diá»…n trong há»‡ tháº­p lá»¥c phÃ¢n lÃ  255, biá»ƒu diá»…n gá»‘c, Ä‘áº£o, bÃ¹ lÃ  nhÆ° nhau, dá»¯ liá»‡u hai, byte 255 chÃ­nh byte cÃ¹ng.</p>
<p>â‘  Dáº¡ng gá»‘c</p>
<p>Dáº¡ng gá»‘c lÃ  viá»‡c thÃªm dáº¥u chá»¯ sá»‘ vÃ o giÃ¡ trá»‹ tuyá»‡t Ä‘á»‘i, tá»©c lÃ  sá»­ dá»¥ng dáº¥u Ä‘áº§u tiÃªn Ä‘á»ƒ biá»ƒu thá»‹ dáº¥u, cÃ¡c bit cÃ²n láº¡i biá»ƒu thá»‹ giÃ¡ trá»‹. VÃ­ dá»¥ náº¿u lÃ  sá»‘ nhá»‹ phÃ¢n 8 bit:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>[+1] gá»‘c = 0000 0001</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[-1] gá»‘c = 1000 0001</span></span></code></pre>
</div><p>Dáº¥u Ä‘áº§u tiÃªn lÃ  dáº¥u chá»¯ sá»‘. VÃ¬ dáº¥u Ä‘áº§u tiÃªn lÃ  dáº¥u chá»¯ sá»‘, nÃªn pháº¡m vi giÃ¡ trá»‹ cá»§a sá»‘ nhá»‹ phÃ¢n 8 bit lÃ :</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>[1111 1111 , 0111 1111]</span></span></code></pre>
</div><p>tá»©c lÃ </p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>[-127 , 127]</span></span></code></pre>
</div><p>â‘¡ Dáº¡ng Ä‘áº£o</p>
<p>PhÆ°Æ¡ng phÃ¡p biá»ƒu thá»‹ cá»§a dáº¡ng Ä‘áº£o lÃ :</p>
<ul>
<li>Dáº¡ng Ä‘áº£o cá»§a sá»‘ dÆ°Æ¡ng lÃ  chÃ­nh nÃ³</li>
<li>Dáº¡ng Ä‘áº£o cá»§a sá»‘ Ã¢m lÃ  dá»±a trÃªn dáº¡ng gá»‘c cá»§a nÃ³, giá»¯ nguyÃªn dáº¥u chá»¯ sá»‘, cÃ¡c bit cÃ²n láº¡i Ä‘áº£o ngÆ°á»£c.</li>
</ul>
<p>VÃ­ dá»¥:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>[+1] = [00000001] gá»‘c = [00000001] Ä‘áº£o</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[-1] = [10000001] gá»‘c = [11111110] Ä‘áº£o</span></span></code></pre>
</div><p>CÃ³ thá»ƒ tháº¥y náº¿u má»™t dáº¡ng Ä‘áº£o biá»ƒu thá»‹ lÃ  sá»‘ Ã¢m, thÃ¬ nÃ£o khÃ´ng thá»ƒ trá»±c quan nháº­n ra giÃ¡ trá»‹ cá»§a nÃ³. ThÃ´ng thÆ°á»ng cáº§n chuyá»ƒn Ä‘á»•i sang dáº¡ng gá»‘c trÆ°á»›c khi tÃ­nh toÃ¡n.</p>
<p>â‘¢ Dáº¡ng bÃ¹</p>
<p>PhÆ°Æ¡ng phÃ¡p biá»ƒu thá»‹ cá»§a dáº¡ng bÃ¹ lÃ :</p>
<ul>
<li>Dáº¡ng bÃ¹ cá»§a sá»‘ dÆ°Æ¡ng lÃ  chÃ­nh nÃ³</li>
<li>Dáº¡ng bÃ¹ cá»§a sá»‘ Ã¢m lÃ  dá»±a trÃªn dáº¡ng gá»‘c cá»§a nÃ³, giá»¯ nguyÃªn dáº¥u chá»¯ sá»‘, cÃ¡c bit cÃ²n láº¡i Ä‘áº£o ngÆ°á»£c, sau Ä‘Ã³ +1. (tá»©c lÃ  cá»™ng thÃªm má»™t)</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>[+1] = [00000001] gá»‘c = [00000001] Ä‘áº£o = [00000001] bÃ¹</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[-1] = [10000001] gá»‘c = [11111110] Ä‘áº£o = [11111111] bÃ¹</span></span></code></pre>
</div><p>Äá»‘i vá»›i sá»‘ Ã¢m, phÆ°Æ¡ng phÃ¡p biá»ƒu thá»‹ bÃ¹ cÅ©ng lÃ  má»™t cÃ¡ch mÃ  nÃ£o khÃ´ng thá»ƒ trá»±c quan nháº­n ra giÃ¡ trá»‹ cá»§a nÃ³. ThÃ´ng thÆ°á»ng cÅ©ng cáº§n chuyá»ƒn Ä‘á»•i sang dáº¡ng gá»‘c trÆ°á»›c khi tÃ­nh toÃ¡n.</p>
<p>Tá»« nhá»¯ng Ä‘iá»u trÃªn cÃ³ thá»ƒ tháº¥y:</p>
<ul>
<li>Äá»‘i vá»›i sá»‘ dÆ°Æ¡ng: dáº¡ng gá»‘c, Ä‘áº£o, bÃ¹ Ä‘á»u giá»‘ng nhau</li>
<li>Äá»‘i vá»›i sá»‘ Ã¢m: dáº¡ng gá»‘c, Ä‘áº£o, bÃ¹ Ä‘á»u khÃ¡c nhau</li>
</ul>
<h3>02. Buffered character stream</h3>
<p>Lá»›p BufferedReader káº¿ thá»«a tá»« lá»›p Reader vÃ  cung cáº¥p má»™t sá»‘ phÆ°Æ¡ng thá»©c tiá»‡n Ã­ch, vÃ­ dá»¥ nhÆ° phÆ°Æ¡ng thá»©c <code>readLine()</code> cÃ³ thá»ƒ Ä‘á»c má»™t dÃ²ng dá»¯ liá»‡u má»™t láº§n, thay vÃ¬ Ä‘á»c tá»«ng kÃ½ tá»± má»™t.</p>
<p>Lá»›p BufferedWriter káº¿ thá»«a tá»« lá»›p Writer vÃ  cung cáº¥p má»™t sá»‘ phÆ°Æ¡ng thá»©c tiá»‡n Ã­ch, vÃ­ dá»¥ nhÆ° phÆ°Æ¡ng thá»©c <code>newLine()</code> cÃ³ thá»ƒ ghi má»™t dáº¥u phÃ¢n tÃ¡ch dÃ²ng cá»¥ thá»ƒ cho há»‡ thá»‘ng.</p>
<h4>1. PhÆ°Æ¡ng thá»©c khá»Ÿi táº¡o</h4>
<ul>
<li><code>BufferedReader(Reader in)</code> ï¼šTáº¡o má»™t buffered input stream má»›i, lÆ°u Ã½ loáº¡i tham sá»‘ lÃ  <strong>Reader</strong>.</li>
<li><code>BufferedWriter(Writer out)</code>ï¼š Táº¡o má»™t buffered output stream má»›i, lÆ°u Ã½ loáº¡i tham sá»‘ lÃ  <strong>Writer</strong>.</li>
</ul>
<p>MÃ£ vÃ­ dá»¥ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o input stream kÃ½ tá»± Ä‘á»‡m</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">BufferedReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> br </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"b.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o output stream kÃ½ tá»± Ä‘á»‡m</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">BufferedWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"b.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><h4>2. PhÆ°Æ¡ng thá»©c Ä‘áº·c thÃ¹ cá»§a buffered character stream</h4>
<p>CÃ¡c phÆ°Æ¡ng thá»©c cÆ¡ báº£n cá»§a buffered character stream vÃ  cÃ¡ch gá»i tÆ°Æ¡ng tá»± nhÆ° <a href="character">character stream</a>, á»Ÿ Ä‘Ã¢y khÃ´ng nháº¯c láº¡i. ChÃºng ta sáº½ xem xÃ©t cÃ¡c phÆ°Æ¡ng thá»©c <strong>Ä‘áº·c thÃ¹</strong> cá»§a buffered character stream.</p>
<ul>
<li>BufferedReaderï¼š<code>String readLine()</code>: <strong>Äá»c má»™t dÃ²ng dá»¯ liá»‡u</strong>, Ä‘á»c Ä‘áº¿n cuá»‘i cÃ¹ng sáº½ tráº£ vá» null.</li>
<li>BufferedWriterï¼š<code>newLine()</code>: <strong>Xuá»‘ng dÃ²ng</strong>, há»‡ thá»‘ng xÃ¡c Ä‘á»‹nh kÃ½ tá»± xuá»‘ng dÃ²ng.</li>
</ul>
<p>VÃ­ dá»¥ vá» phÆ°Æ¡ng thá»©c <code>readLine()</code>:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o Ä‘á»‘i tÆ°á»£ng stream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">BufferedReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> br </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"a.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»‹nh nghÄ©a chuá»—i Ä‘á»ƒ lÆ°u trá»¯ dÃ²ng vÄƒn báº£n Ä‘Ã£ Ä‘á»c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> line  </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c láº·p, Ä‘á»c Ä‘áº¿n cuá»‘i cÃ¹ng sáº½ tráº£ vá» null</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((line </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> br</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(line);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"</span></span></code></pre>
</div>]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240630225343.png" type="image/png"/>
    </item>
    <item>
      <title>Character Stream</title>
      <link>https://vanhung4499.github.io/programming/java/IO/character.html</link>
      <guid>https://vanhung4499.github.io/programming/java/IO/character.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Character Stream</source>
      <description>Character Stream 7.4 Character Stream CÃ¢u chuyá»‡n vá» Character Stream Reader vÃ  Writer báº¯t Ä‘áº§u tá»« biá»ƒu Ä‘á»“ quan há»‡ lá»›p cá»§a chÃºng, hÃ£y cÃ¹ng xem biá»ƒu Ä‘á»“. image.pngimage.png Characte...</description>
      <category>java</category>
      <pubDate>Sun, 30 Jun 2024 16:14:55 GMT</pubDate>
      <content:encoded><![CDATA[
<h1>7.4 Character Stream</h1>
<p>CÃ¢u chuyá»‡n vá» Character Stream Reader vÃ  Writer báº¯t Ä‘áº§u tá»« biá»ƒu Ä‘á»“ quan há»‡ lá»›p cá»§a chÃºng, hÃ£y cÃ¹ng xem biá»ƒu Ä‘á»“.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240630220036.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Character Stream lÃ  má»™t loáº¡i IO Stream dÃ¹ng Ä‘á»ƒ Ä‘á»c vÃ  ghi dá»¯ liá»‡u kÃ½ tá»±. KhÃ¡c vá»›i Byte Stream, Character Stream Ä‘á»c vÃ  ghi dá»¯ liá»‡u theo Ä‘Æ¡n vá»‹ kÃ½ tá»± chá»© khÃ´ng pháº£i theo Ä‘Æ¡n vá»‹ byte. ThÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xá»­ lÃ½ thÃ´ng tin vÄƒn báº£n.</p>
<p>Náº¿u sá»­ dá»¥ng Byte Stream Ä‘á»ƒ Ä‘á»c trá»±c tiáº¿p tiáº¿ng Viá»‡t, cÃ³ thá»ƒ gáº·p pháº£i váº¥n Ä‘á» hiá»ƒn thá»‹ kÃ½ tá»± bá»‹ lá»—i, xem vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// FileInputStream lÃ  character input stream hoáº¡t Ä‘á»™ng trÃªn file</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> inputStream </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"a.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// // Ná»™i dung lÃ  "Xin chÃ o cÃ¡c báº¡n"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((len </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> inputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">((</span><span style="color:#C678DD;--shiki-dark:#C678DD">char</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) len);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Xem káº¿t quáº£ cháº¡y:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Xin chÃƒ&nbsp;o cÃƒÂ¡c bÃ¡ÂºÂ¡n</span></span></code></pre>
</div><p>LÃ½ do xuáº¥t hiá»‡n lá»—i hiá»ƒn thá»‹ lÃ  vÃ¬ trong Byte Stream, má»™t kÃ½ tá»± thÆ°á»ng Ä‘Æ°á»£c táº¡o thÃ nh tá»« nhiá»u byte vÃ  cÃ¡c mÃ£ kÃ½ tá»± khÃ¡c nhau sá»­ dá»¥ng sá»‘ byte khÃ¡c nhau. Náº¿u chÃºng ta sá»­ dá»¥ng mÃ£ kÃ½ tá»± khÃ´ng Ä‘Ãºng hoáº·c khÃ´ng xá»­ lÃ½ chÃ­nh xÃ¡c viá»‡c chuyá»ƒn Ä‘á»•i mÃ£ kÃ½ tá»± khi Ä‘á»c vÃ  ghi dá»¯ liá»‡u, sáº½ dáº«n Ä‘áº¿n kÃ½ tá»± tiáº¿ng Viá»‡t bá»‹ lá»—i hiá»ƒn thá»‹.</p>
<p>VÃ­ dá»¥, khi sá»­ dá»¥ng mÃ£ kÃ½ tá»± máº·c Ä‘á»‹nh (xem vÃ­ dá»¥ trÃªn) Ä‘á»ƒ Ä‘á»c má»™t file vÄƒn báº£n chá»©a kÃ½ tá»± tiáº¿ng Viá»‡t, sáº½ xuáº¥t hiá»‡n lá»—i hiá»ƒn thá»‹. Bá»Ÿi vÃ¬ mÃ£ kÃ½ tá»± máº·c Ä‘á»‹nh thÆ°á»ng lÃ  mÃ£ ASCII, chá»‰ cÃ³ thá»ƒ biá»ƒu diá»…n kÃ½ tá»± tiáº¿ng Anh vÃ  khÃ´ng thá»ƒ giáº£i mÃ£ Ä‘Ãºng kÃ½ tá»± tiáº¿ng Viá»‡t.</p>
<p>Váº­y lÃ m tháº¿ nÃ o Ä‘á»ƒ sá»­ dá»¥ng Byte Stream Ä‘á»ƒ Ä‘á»c Ä‘Ãºng tiáº¿ng Viá»‡t? Xem vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> inputStream </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"a.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] bytes </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((len </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> inputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(bytes)</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(bytes, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, len));</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Táº¡i sao cÃ¡ch nÃ y láº¡i hiá»‡u quáº£?</p>
<p>Bá»Ÿi vÃ¬ chÃºng ta sá»­ dá»¥ng lá»›p String Ä‘á»ƒ giáº£i mÃ£. Khi kiá»ƒm tra mÃ£ nguá»“n cá»§a <code>new String(byte bytes[], int offset, int length)</code>, chÃºng ta cÃ³ thá»ƒ tháº¥y phÆ°Æ¡ng thá»©c nÃ y cÃ³ chá»©c nÄƒng giáº£i mÃ£:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bytes[]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> offset</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> length) {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    checkBounds</span><span style="color:#E06C75;--shiki-dark:#E06C75">(bytes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> offset</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> length)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StringCoding</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">decode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(bytes, offset, length);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Khi tiáº¿p tá»¥c theo dÃµi phÆ°Æ¡ng thá»©c <code>StringCoding.decode()</code>, sáº½ tháº¥y nÃ³ gá»i Ä‘áº¿n phÆ°Æ¡ng thá»©c <code>defaultCharset()</code>, vÃ  sáº½ tháº¥y mÃ£ máº·c Ä‘á»‹nh lÃ  <code>UTF-8</code>, nhÆ° sau:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Charset</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> defaultCharset</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (defaultCharset </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        synchronized</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Charset</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (cs </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                defaultCharset </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> cs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            else</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                defaultCharset </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> forName</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"UTF-8"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#E06C75;--shiki-dark:#E06C75"> defaultCharset</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> char</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">decode</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] ba</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> off</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> csn </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Charset</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">defaultCharset</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // use charset name decode() variant which provides caching.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> decode</span><span style="color:#E06C75;--shiki-dark:#E06C75">(csn</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ba</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> off</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UnsupportedEncodingException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> x</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        warnUnsupportedCharset</span><span style="color:#E06C75;--shiki-dark:#E06C75">(csn)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong Java, cÃ¡c mÃ£ kÃ½ tá»± thÃ´ng dá»¥ng bao gá»“m ASCII, ISO-8859-1, UTF-8, UTF-16, v.v. Trong Ä‘Ã³, ASCII vÃ  ISO-8859-1 chá»‰ cÃ³ thá»ƒ biá»ƒu diá»…n má»™t pháº§n kÃ½ tá»±, trong khi UTF-8 vÃ  UTF-16 cÃ³ thá»ƒ biá»ƒu diá»…n táº¥t cáº£ cÃ¡c kÃ½ tá»± Unicode, bao gá»“m kÃ½ tá»± tiáº¿ng Viá»‡t.</p>
<p>Khi chÃºng ta sá»­ dá»¥ng <code>new String(byte bytes[], int offset, int length)</code> Ä‘á»ƒ chuyá»ƒn Ä‘á»•i Byte Stream thÃ nh chuá»—i kÃ½ tá»±, Java sáº½ dá»±a vÃ o quy táº¯c UTF-8 Ä‘á»ƒ giáº£i mÃ£ má»—i 3 byte thÃ nh má»™t kÃ½ tá»± tiáº¿ng Viá»‡t, tá»« Ä‘Ã³ giáº£i mÃ£ chÃ­nh xÃ¡c kÃ½ tá»± tiáº¿ng Viá»‡t.</p>
<p>Máº·c dÃ¹ Byte Stream cÅ©ng cÃ³ thá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» lá»—i hiá»ƒn thá»‹ kÃ½ tá»±, nhÆ°ng khÃ´ng trá»±c tiáº¿p. Do Ä‘Ã³, chÃºng ta cÃ³ Character Stream, <code>chuyÃªn dÃ¹ng Ä‘á»ƒ xá»­ lÃ½ file vÄƒn báº£n</code> (Ã¢m thanh, hÃ¬nh áº£nh, video, v.v. lÃ  cÃ¡c file khÃ´ng pháº£i vÄƒn báº£n).</p>
<p>Tá»« gÃ³c Ä‘á»™ khÃ¡c: <strong>Character Stream = Byte Stream + Báº£ng mÃ£ hÃ³a</strong>.</p>
<h3>01. Character Input Stream (Reader)</h3>
<p><code>java.io.Reader</code> lÃ  <strong>lá»›p cha</strong> cá»§a <strong>character input stream</strong>, nÃ³ Ä‘á»‹nh nghÄ©a má»™t sá»‘ phÆ°Æ¡ng thá»©c chung cá»§a character input stream:</p>
<ul>
<li><code>close()</code>ï¼šÄÃ³ng stream nÃ y vÃ  giáº£i phÃ³ng cÃ¡c tÃ i nguyÃªn há»‡ thá»‘ng liÃªn quan.</li>
<li><code>read()</code>ï¼šÄá»c má»™t kÃ½ tá»± tá»« input stream.</li>
<li><code>read(char[] cbuf)</code>ï¼šÄá»c má»™t sá»‘ kÃ½ tá»± tá»« input stream vÃ  lÆ°u chÃºng vÃ o máº£ng kÃ½ tá»± <code>cbuf</code>.</li>
</ul>
<p>FileReader lÃ  lá»›p con cá»§a Reader, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u kÃ½ tá»± tá»« tá»‡p. CÃ¡c Ä‘áº·c Ä‘iá»ƒm chÃ­nh cá»§a nÃ³ nhÆ° sau:</p>
<ul>
<li>CÃ³ thá»ƒ chá»‰ Ä‘á»‹nh Ä‘Æ°á»ng dáº«n tá»‡p cáº§n Ä‘á»c thÃ´ng qua hÃ m táº¡o.</li>
<li>Má»—i láº§n cÃ³ thá»ƒ Ä‘á»c má»™t hoáº·c nhiá»u kÃ½ tá»±.</li>
<li>CÃ³ thá»ƒ Ä‘á»c cÃ¡c kÃ½ tá»± trong táº­p kÃ½ tá»± Unicode vÃ  thá»±c hiá»‡n chuyá»ƒn Ä‘á»•i táº­p kÃ½ tá»± thÃ´ng qua mÃ£ hÃ³a kÃ½ tá»± Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh.</li>
</ul>
<h4>1. HÃ m táº¡o cá»§a FileReader</h4>
<ul>
<li><code>FileReader(File file)</code>ï¼šTáº¡o má»™t FileReader má»›i, tham sá»‘ lÃ  <strong>Ä‘á»‘i tÆ°á»£ng File</strong>.</li>
<li><code>FileReader(String fileName)</code>ï¼šTáº¡o má»™t FileReader má»›i, tham sá»‘ lÃ  tÃªn tá»‡p.</li>
</ul>
<p>VÃ­ dá»¥ mÃ£ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o Ä‘á»‘i tÆ°á»£ng stream báº±ng cÃ¡ch sá»­ dá»¥ng Ä‘á»‘i tÆ°á»£ng File</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"a.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fr </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(file)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o Ä‘á»‘i tÆ°á»£ng stream báº±ng cÃ¡ch sá»­ dá»¥ng tÃªn tá»‡p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fr </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"b.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><h4>2. Äá»c dá»¯ liá»‡u kÃ½ tá»± vá»›i FileReader</h4>
<p>â‘  <strong>Äá»c kÃ½ tá»±</strong>ï¼šPhÆ°Æ¡ng thá»©c <code>read</code>, má»—i láº§n cÃ³ thá»ƒ Ä‘á»c má»™t kÃ½ tá»±, tráº£ vá» kÃ½ tá»± Ä‘Ã£ Ä‘á»c (Ä‘Æ°á»£c chuyá»ƒn thÃ nh kiá»ƒu int), khi Ä‘á»c Ä‘áº¿n cuá»‘i tá»‡p sáº½ tráº£ vá» <code>-1</code>. VÃ­ dá»¥ mÃ£ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o Ä‘á»‘i tÆ°á»£ng stream báº±ng cÃ¡ch sá»­ dá»¥ng tÃªn tá»‡p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fr </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"abc.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»‹nh nghÄ©a biáº¿n Ä‘á»ƒ lÆ°u dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> b</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c tuáº§n tá»±</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((b </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">((</span><span style="color:#C678DD;--shiki-dark:#C678DD">char</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) b);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>â‘¡ <strong>Äá»c kÃ½ tá»± vá»›i Ä‘á»™ dÃ i chá»‰ Ä‘á»‹nh</strong>ï¼šPhÆ°Æ¡ng thá»©c <code>read(char[] cbuf, int off, int len)</code> Ä‘á»c má»™t sá»‘ kÃ½ tá»± tá»« input stream vÃ  lÆ°u chÃºng vÃ o máº£ng kÃ½ tá»±. Trong Ä‘Ã³, cbuf biá»ƒu thá»‹ máº£ng kÃ½ tá»± Ä‘á»ƒ lÆ°u káº¿t quáº£ Ä‘á»c, off biá»ƒu thá»‹ vá»‹ trÃ­ báº¯t Ä‘áº§u lÆ°u káº¿t quáº£, len biá»ƒu thá»‹ sá»‘ kÃ½ tá»± cáº§n Ä‘á»c. VÃ­ dá»¥ mÃ£ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> textFile </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"docs/çº¦å®š.md"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Má»™t vÃ­ dá»¥ vá» FileReader</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// try-with-resources FileReader</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> reader </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(textFile)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // read(char[] cbuf)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    char</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] buffer </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> char</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((len </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> reader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">buffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, len));</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Trong vÃ­ dá»¥ nÃ y, FileReader Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u kÃ½ tá»± tá»« tá»‡p vÃ  lÆ°u chÃºng vÃ o má»™t máº£ng kÃ½ tá»± cÃ³ kÃ­ch thÆ°á»›c 1024. Má»—i láº§n Ä‘á»c len kÃ½ tá»±, sau Ä‘Ã³ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c táº¡o cá»§a String Ä‘á»ƒ chuyá»ƒn Ä‘á»•i chÃºng thÃ nh chuá»—i vÃ  xuáº¥t ra.</p>
<p>FileReader Ä‘Ã£ triá»ƒn khai interface AutoCloseable, do Ä‘Ã³ cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¢u lá»‡nh try-with-resources Ä‘á»ƒ tá»± Ä‘á»™ng Ä‘Ã³ng tÃ i nguyÃªn, trÃ¡nh cÃ¡c thao tÃ¡c Ä‘Ã³ng tÃ i nguyÃªn thá»§ cÃ´ng phá»©c táº¡p.</p>
<h3>02. Character Output Stream (Writer)</h3>
<p><code>java.io.Writer</code> lÃ  <strong>lá»›p cha</strong> cá»§a <strong>character output stream</strong>, nÃ³ cho phÃ©p ghi thÃ´ng tin kÃ½ tá»± Ä‘Ã£ chá»‰ Ä‘á»‹nh vÃ o Ä‘Ã­ch, hÃ£y xem má»™t sá»‘ phÆ°Æ¡ng thá»©c chung mÃ  nÃ³ Ä‘á»‹nh nghÄ©a:</p>
<ul>
<li><code>write(int c)</code>ï¼šGhi má»™t kÃ½ tá»±.</li>
<li><code>write(char[] cbuf)</code>ï¼šGhi má»™t máº£ng kÃ½ tá»±.</li>
<li><code>write(char[] cbuf, int off, int len)</code>ï¼šGhi má»™t pháº§n cá»§a máº£ng kÃ½ tá»±, off lÃ  chá»‰ sá»‘ báº¯t Ä‘áº§u, len lÃ  sá»‘ lÆ°á»£ng kÃ½ tá»±.</li>
<li><code>write(String str)</code>ï¼šGhi má»™t chuá»—i.</li>
<li><code>write(String str, int off, int len)</code>ï¼šGhi má»™t pháº§n cá»§a chuá»—i, off chá»‰ vá»‹ trÃ­ báº¯t Ä‘áº§u cá»§a chuá»—i con trong str, len chá»‰ Ä‘á»™ dÃ i cá»§a chuá»—i con cáº§n ghi.</li>
<li><code>flush()</code>ï¼šLÃ m má»›i bá»™ Ä‘á»‡m cá»§a stream.</li>
<li><code>close()</code>ï¼šÄÃ³ng stream nÃ y, nhÆ°ng pháº£i lÃ m má»›i nÃ³ trÆ°á»›c.</li>
</ul>
<p>Lá»›p <code>java.io.FileWriter</code> lÃ  lá»›p con cá»§a Writer, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ ghi cÃ¡c kÃ½ tá»± vÃ o tá»‡p.</p>
<h4>1. HÃ m táº¡o cá»§a FileWriter</h4>
<ul>
<li><code>FileWriter(File file)</code>ï¼šTáº¡o má»™t FileWriter má»›i, tham sá»‘ lÃ  Ä‘á»‘i tÆ°á»£ng File cáº§n ghi.</li>
<li><code>FileWriter(String fileName)</code>ï¼šTáº¡o má»™t FileWriter má»›i, tham sá»‘ lÃ  tÃªn cá»§a tá»‡p cáº§n ghi.</li>
</ul>
<p>VÃ­ dá»¥ mÃ£ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// CÃ¡ch thá»© nháº¥t: Táº¡o Ä‘á»‘i tÆ°á»£ng stream báº±ng cÃ¡ch sá»­ dá»¥ng Ä‘á»‘i tÆ°á»£ng File</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"a.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(file)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// CÃ¡ch thá»© hai: Táº¡o Ä‘á»‘i tÆ°á»£ng stream báº±ng cÃ¡ch sá»­ dá»¥ng tÃªn tá»‡p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"b.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><h4>2. Ghi dá»¯ liá»‡u báº±ng FileWriter</h4>
<p>â‘  <strong>Ghi kÃ½ tá»±</strong>: PhÆ°Æ¡ng thá»©c <code>write(int b)</code> cho phÃ©p ghi ra má»™t kÃ½ tá»± má»—i láº§n. VÃ­ dá»¥ mÃ£ nhÆ° sau:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    fw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"output.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">72</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Ghi mÃ£ ASCII cá»§a kÃ½ tá»± 'H'</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">101</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Ghi mÃ£ ASCII cá»§a kÃ½ tá»± 'e'</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">108</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Ghi mÃ£ ASCII cá»§a kÃ½ tá»± 'l'</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">108</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Ghi mÃ£ ASCII cá»§a kÃ½ tá»± 'l'</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">111</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Ghi mÃ£ ASCII cá»§a kÃ½ tá»± 'o'</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">finally</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (fw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong vÃ­ dá»¥ mÃ£ nÃ y, trÆ°á»›c tiÃªn táº¡o má»™t Ä‘á»‘i tÆ°á»£ng FileWriter <code>fw</code> vÃ  chá»‰ Ä‘á»‹nh Ä‘Æ°á»ng dáº«n tá»‡p "output.txt" Ä‘á»ƒ ghi vÃ o. Sau Ä‘Ã³, sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>fw.write()</code> Ä‘á»ƒ ghi cÃ¡c byte vÃ o tá»‡p, á»Ÿ Ä‘Ã¢y láº§n lÆ°á»£t ghi mÃ£ ASCII cá»§a cÃ¡c kÃ½ tá»± 'H', 'e', 'l', 'l', 'o'. Cuá»‘i cÃ¹ng, trong khá»‘i <code>finally</code>, Ä‘Ã³ng Ä‘á»‘i tÆ°á»£ng FileWriter Ä‘á»ƒ giáº£i phÃ³ng tÃ i nguyÃªn.</p>
<p>LÆ°u Ã½ ráº±ng khi sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>write(int b)</code>, chÃºng ta Ä‘ang ghi má»™t byte, khÃ´ng pháº£i má»™t kÃ½ tá»±. Náº¿u cáº§n ghi kÃ½ tá»±, cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c <code>write(char cbuf[])</code> hoáº·c <code>write(String str)</code>.</p>
<p>â‘¡ <strong>Ghi máº£ng kÃ½ tá»±</strong>: PhÆ°Æ¡ng thá»©c <code>write(char[] cbuf)</code> cho phÃ©p ghi máº£ng kÃ½ tá»± chá»‰ Ä‘á»‹nh vÃ o output stream. VÃ­ dá»¥ mÃ£ nhÆ° sau:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    fw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"output.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    char</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] chars </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span><span style="color:#98C379;--shiki-dark:#98C379">'H'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> 'e'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> 'l'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> 'l'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> 'o'</span><span style="color:#E06C75;--shiki-dark:#E06C75">}</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(chars);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Ghi máº£ng kÃ½ tá»± vÃ o tá»‡p</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">finally</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (fw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â‘¢ <strong>Ghi má»™t pháº§n máº£ng kÃ½ tá»±</strong>: PhÆ°Æ¡ng thá»©c <code>write(char[] cbuf, int off, int len)</code> cho phÃ©p ghi má»™t pháº§n máº£ng kÃ½ tá»± chá»‰ Ä‘á»‹nh vÃ o output stream. VÃ­ dá»¥ mÃ£ nhÆ° sau (pháº§n láº·p láº¡i khÃ´ng viáº¿t láº¡i, tham kháº£o pháº§n trÃªn):</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">fw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"output.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">char</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] chars </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span><span style="color:#98C379;--shiki-dark:#98C379">'H'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> 'e'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> 'l'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> 'l'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> 'o'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> ','</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> ' '</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> 'W'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> 'o'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> 'r'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> 'l'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> 'd'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> '!'</span><span style="color:#E06C75;--shiki-dark:#E06C75">}</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(chars, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Ghi 5 kÃ½ tá»± Ä‘áº§u tiÃªn cá»§a máº£ng kÃ½ tá»± vÃ o tá»‡p</span></span></code></pre>
</div><p>Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>fw.write()</code> Ä‘á»ƒ ghi 5 kÃ½ tá»± Ä‘áº§u tiÃªn cá»§a máº£ng kÃ½ tá»± vÃ o tá»‡p.</p>
<p>â‘£ <strong>Ghi chuá»—i</strong>: PhÆ°Æ¡ng thá»©c <code>write(String str)</code> cho phÃ©p ghi chuá»—i chá»‰ Ä‘á»‹nh vÃ o output stream. VÃ­ dá»¥ mÃ£ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">fw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"output.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "Hello, World!"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Ghi chuá»—i vÃ o tá»‡p</span></span></code></pre>
</div><p>â‘¤ <strong>Ghi má»™t pháº§n chuá»—i</strong>: PhÆ°Æ¡ng thá»©c <code>write(String str, int off, int len)</code> cho phÃ©p ghi má»™t pháº§n chuá»—i chá»‰ Ä‘á»‹nh vÃ o output stream. VÃ­ dá»¥ mÃ£ nhÆ° sau (dáº¡ng try-with-resources):</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "Hello, World!"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"output.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(str, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Ghi 5 kÃ½ tá»± Ä‘áº§u tiÃªn cá»§a chuá»—i vÃ o tá»‡p</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><blockquote>
<p>ã€LÆ°u Ã½ã€‘Náº¿u khÃ´ng Ä‘Ã³ng tÃ i nguyÃªn, dá»¯ liá»‡u chá»‰ Ä‘Æ°á»£c lÆ°u vÃ o bá»™ Ä‘á»‡m vÃ  chÆ°a Ä‘Æ°á»£c lÆ°u vÃ o tá»‡p.</p>
</blockquote>
<h4>3. ÄÃ³ng vÃ  lÃ m má»›i (close vÃ  flush)</h4>
<p>VÃ¬ FileWriter cÃ³ bá»™ Ä‘á»‡m bÃªn trong (ByteBuffer), náº¿u khÃ´ng Ä‘Ã³ng output stream, sáº½ khÃ´ng thá»ƒ ghi kÃ½ tá»± vÃ o tá»‡p.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240630221049.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Tuy nhiÃªn, náº¿u Ä‘Ã³ng stream, sáº½ khÃ´ng thá»ƒ tiáº¿p tá»¥c ghi dá»¯ liá»‡u. Náº¿u muá»‘n ghi dá»¯ liá»‡u mÃ  váº«n cÃ³ thá»ƒ tiáº¿p tá»¥c sá»­ dá»¥ng stream, ta cáº§n phÆ°Æ¡ng thá»©c <code>flush</code>.</p>
<ul>
<li><code>flush</code>: LÃ m má»›i bá»™ Ä‘á»‡m, cho phÃ©p tiáº¿p tá»¥c sá»­ dá»¥ng stream.</li>
<li><code>close</code>: LÃ m má»›i bá»™ Ä‘á»‡m trÆ°á»›c, sau Ä‘Ã³ thÃ´ng bÃ¡o há»‡ thá»‘ng giáº£i phÃ³ng tÃ i nguyÃªn. Sau khi gá»i, khÃ´ng thá»ƒ sá»­ dá»¥ng láº¡i stream.</li>
</ul>
<p>PhÆ°Æ¡ng thá»©c <code>flush</code> khÃ¡ thÃº vá»‹, hÃ£y xem Ä‘oáº¡n mÃ£ sau Ä‘á»ƒ hiá»ƒu thÃªm:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Nguá»“n, lÃ  stream nháº­p (stream Ä‘á»c) Ä‘á»c tá»« tá»‡p a.txt</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fr </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"abc.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  // Tá»‡p a.txt pháº£i tá»“n táº¡i, náº¿u khÃ´ng sáº½ nÃ©m ra ngoáº¡i lá»‡ FileNotFoundException</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ­ch, lÃ  output stream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"b.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  // Há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng táº¡o tá»‡p b.txt vÃ¬ Ä‘Ã¢y lÃ  output stream</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((len </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(len);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ChÃº Ã½ á»Ÿ Ä‘Ã¢y khÃ´ng Ä‘Ã³ng stream báº±ng phÆ°Æ¡ng thá»©c close, trong phÃ¡t triá»ƒn khÃ´ng nÃªn lÃ m nhÆ° váº­y, nhÆ°ng Ä‘á»ƒ hiá»ƒu rÃµ hÆ¡n vá» tÃ¡c dá»¥ng cá»§a flush</span></span></code></pre>
</div><p>Káº¿t quáº£ cháº¡y chÆ°Æ¡ng trÃ¬nh sáº½ nhÆ° tháº¿ nÃ o? ÄÃ¡p Ã¡n lÃ  tá»‡p b.txt váº«n trá»‘ng, khÃ´ng cÃ³ gÃ¬.</p>
<p>NguyÃªn nhÃ¢n Ä‘Ã£ Ä‘Æ°á»£c Ä‘á» cáº­p trÆ°á»›c Ä‘Ã³. <strong>Láº­p trÃ¬nh lÃ  nhÆ° váº­y, khÃ´ng thá»±c hÃ nh thÃ¬ sáº½ khÃ´ng bao giá» há»c Ä‘Æ°á»£c</strong>! VÃ¬ váº­y, hÃ£y thá»±c hÃ nh nhiá»u hÆ¡n.</p>
<p>ThÃªm ba dÃ²ng mÃ£ sau vÃ o Ä‘oáº¡n mÃ£ trÃªn, tá»‡p <code>b.txt</code> sáº½ Ä‘Æ°á»£c sao chÃ©p dá»¯ liá»‡u tá»« tá»‡p nguá»“n:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">flush</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>PhÆ°Æ¡ng thá»©c <code>flush()</code> cÃ³ nghÄ©a lÃ  lÃ m sáº¡ch bá»™ Ä‘á»‡m, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ lÃ m sáº¡ch stream dá»¯ liá»‡u trong bá»™ Ä‘á»‡m. Khi thá»±c hiá»‡n cÃ¡c thao tÃ¡c stream, dá»¯ liá»‡u Ä‘Æ°á»£c Ä‘á»c vÃ o bá»™ nhá»› trÆ°á»›c, sau Ä‘Ã³ má»›i ghi vÃ o tá»‡p.</p>
<p>Báº¡n cÃ³ thá»ƒ thá»­ vá»›i vÃ­ dá»¥ mÃ£ sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Sá»­ dá»¥ng tÃªn tá»‡p Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng stream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"fw.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi dá»¯ liá»‡u, sau Ä‘Ã³ flush</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'a'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Ghi kÃ½ tá»± Ä‘áº§u tiÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">flush</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'b'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Tiáº¿p tá»¥c ghi kÃ½ tá»± thá»© hai, ghi thÃ nh cÃ´ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">flush</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi dá»¯ liá»‡u, sau Ä‘Ã³ close</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'c'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Ghi kÃ½ tá»± Ä‘áº§u tiÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'d'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Tiáº¿p tá»¥c ghi kÃ½ tá»± thá»© hai, lá»—i java.io.IOException: Stream closed</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>LÆ°u Ã½, dÃ¹ phÆ°Æ¡ng thá»©c <code>flush</code> Ä‘Ã£ ghi dá»¯ liá»‡u ra, cuá»‘i cÃ¹ng váº«n cáº§n gá»i phÆ°Æ¡ng thá»©c <code>close</code> Ä‘á»ƒ giáº£i phÃ³ng tÃ i nguyÃªn há»‡ thá»‘ng. Táº¥t nhiÃªn, báº¡n cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡ch try-with-resources.</p>
<h4>4. FileWriter viáº¿t tiáº¿p vÃ  xuá»‘ng dÃ²ng</h4>
<p><strong>Viáº¿t tiáº¿p vÃ  xuá»‘ng dÃ²ng</strong>: Thao tÃ¡c tÆ°Æ¡ng tá»± nhÆ° <a href="/programming/java/IO/programming/java/io/stream.html" target="_blank">FileOutputStream</a>, hÃ£y xem Ä‘oáº¡n mÃ£ dÆ°á»›i Ä‘Ã¢y:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Sá»­ dá»¥ng tÃªn tá»‡p Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng stream, cÃ³ thá»ƒ viáº¿t tiáº¿p dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"fw.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75">     </span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi chuá»—i</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"xin chÃ o"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi xuá»‘ng dÃ²ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\r\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi chuá»—i</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"cÃ¡c báº¡n"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>Káº¿t quáº£ Ä‘áº§u ra nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>xin chÃ o</span></span>
<span class="line"><span>cÃ¡c báº¡n</span></span></code></pre>
</div><h4>5. Sao chÃ©p tá»‡p vÄƒn báº£n</h4>
<p>Äoáº¡n mÃ£ dÆ°á»›i Ä‘Ã¢y thá»±c hiá»‡n viá»‡c sao chÃ©p tá»‡p vÄƒn báº£n:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.io.FileReader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.io.FileWriter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.io.IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CopyFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Táº¡o Ä‘á»‘i tÆ°á»£ng stream Ä‘áº§u vÃ o</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fr</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileReader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"aa.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Náº¿u tá»‡p khÃ´ng tá»“n táº¡i sáº½ nÃ©m ra ngoáº¡i lá»‡ java.io.FileNotFoundException</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Táº¡o Ä‘á»‘i tÆ°á»£ng stream Ä‘áº§u ra</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fw</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileWriter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"copyaa.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        /* CÃ¡c cÃ´ng viá»‡c cá»§a stream Ä‘áº§u ra:</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">         * 1. Gá»i tÃ i nguyÃªn há»‡ thá»‘ng Ä‘á»ƒ táº¡o má»™t tá»‡p</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">         * 2. Táº¡o Ä‘á»‘i tÆ°á»£ng stream Ä‘áº§u ra</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">         * 3. Chá»‰ Ä‘á»‹nh Ä‘á»‘i tÆ°á»£ng stream Ä‘áº§u ra Ä‘áº¿n tá»‡p        </span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">         */</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Sao chÃ©p tá»‡p vÄƒn báº£n, má»—i láº§n Ä‘á»c má»™t kÃ½ tá»±</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        copyMethod1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(fr, fw);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Sao chÃ©p tá»‡p vÄƒn báº£n, má»—i láº§n Ä‘á»c má»™t máº£ng kÃ½ tá»±</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        copyMethod2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(fr, fw);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        </span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        fr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> copyMethod1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> fr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        while</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ((ch </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(ch); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">flush</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> copyMethod2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> fr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        char</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75">chs</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> char</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">];</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        while</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ((len </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(chs)) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) { </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(chs, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, len); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">flush</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240630220036.png" type="image/png"/>
    </item>
    <item>
      <title>Java IO Classification</title>
      <link>https://vanhung4499.github.io/programming/java/IO/classification.html</link>
      <guid>https://vanhung4499.github.io/programming/java/IO/classification.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Java IO Classification</source>
      <description>PhÃ¢n loáº¡i IO NhÃ¬n nÃ y, tÃ´i chá»‰ phÃ¢n loáº¡i IO theo cÃ¡ch truyá»n dáº«n Ä‘Æ¡n giáº£n mÃ  Ä‘Ã£ ra Ä‘á»§ thá»© Ä‘Ã¢y! image.pngimage.png Há»c IO trong Java lÃºc Ä‘áº§u cÅ©ng tháº¥y Ä‘áº§u Ä‘au, Ä‘áº§y lÃ  cÃ¡c lá»›p, cÃ³...</description>
      <category>java</category>
      <pubDate>Sun, 30 Jun 2024 16:14:55 GMT</pubDate>
      <content:encoded><![CDATA[
<p>NhÃ¬n nÃ y, tÃ´i chá»‰ phÃ¢n loáº¡i IO theo cÃ¡ch truyá»n dáº«n Ä‘Æ¡n giáº£n mÃ  Ä‘Ã£ ra Ä‘á»§ thá»© Ä‘Ã¢y!</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240630135523.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Há»c IO trong Java lÃºc Ä‘áº§u cÅ©ng tháº¥y Ä‘áº§u Ä‘au, Ä‘áº§y lÃ  cÃ¡c lá»›p, cÃ³ láº½ lÃ  nhiá»u lá»›p nháº¥t trong táº¥t cáº£ cÃ¡c gÃ³i Java, má»™t lÃºc lÃ  Input, má»™t lÃºc lÃ  Output, má»™t lÃºc lÃ  Reader, má»™t lÃºc lÃ  Writer, thá»±c sá»± khÃ´ng biáº¿t cÃ¡c nhÃ  thiáº¿t káº¿ Java nghÄ© gÃ¬.</p>
<p>Chá»§ yáº¿u lÃ  do cÃ¡c nhÃ  thiáº¿t káº¿ Java Ä‘Ã£ xem xÃ©t ráº¥t nhiá»u, vÃ¬ váº­y IO mang Ä‘áº¿n cho ngÆ°á»i ta cáº£m giÃ¡c lá»™n xá»™n, tÃ´i sáº½ sáº¯p xáº¿p láº¡i cho báº¡n.</p>
<h3>00. Giá»›i thiá»‡u sÆ¡ lÆ°á»£c vá» Java IO</h3>
<p>IO, tá»©c lÃ  Input (nháº­p) vÃ  Output (xuáº¥t), Ä‘á» cáº­p Ä‘áº¿n viá»‡c truyá»n dá»¯ liá»‡u giá»¯a á»©ng dá»¥ng vÃ  cÃ¡c thiáº¿t bá»‹ ngoáº¡i vi, cÃ¡c thiáº¿t bá»‹ ngoáº¡i vi phá»• biáº¿n bao gá»“m tá»‡p, Ä‘Æ°á»ng á»‘ng vÃ  káº¿t ná»‘i máº¡ng.</p>
<p>Trong Java, IO Ä‘Æ°á»£c xá»­ lÃ½ thÃ´ng qua stream. Váº­y stream lÃ  gÃ¬?</p>
<p>Stream lÃ  má»™t khÃ¡i niá»‡m trá»«u tÆ°á»£ng, lÃ  má»™t chuá»—i dá»¯ liá»‡u (kÃ­ tá»± hoáº·c byte) Ä‘Æ°á»£c truyá»n thÃ´ng tin theo cÃ¡ch vÃ o trÆ°á»›c ra trÆ°á»›c (FIFO - First In First Out).</p>
<p>Khi chÆ°Æ¡ng trÃ¬nh cáº§n Ä‘á»c dá»¯ liá»‡u, nÃ³ sáº½ má»Ÿ má»™t stream Ä‘áº¿n nguá»“n dá»¯ liá»‡u. Nguá»“n dá»¯ liá»‡u nÃ y cÃ³ thá»ƒ lÃ  tá»‡p, bá»™ nhá»› hoáº·c káº¿t ná»‘i máº¡ng. TÆ°Æ¡ng tá»±, khi chÆ°Æ¡ng trÃ¬nh cáº§n ghi dá»¯ liá»‡u, nÃ³ sáº½ má»Ÿ má»™t stream Ä‘áº¿n Ä‘Ã­ch. Báº¡n cÃ³ thá»ƒ tÆ°á»Ÿng tÆ°á»£ng dá»¯ liá»‡u giá»‘ng nhÆ° "dÃ²ng cháº£y" trong stream Ä‘Ã³.</p>
<p>ThÃ´ng thÆ°á»ng, cÃ¡c Ä‘áº·c Ä‘iá»ƒm cá»§a stream bao gá»“m:</p>
<ul>
<li><strong>VÃ o trÆ°á»›c ra trÆ°á»›c (FIFO)</strong>: Dá»¯ liá»‡u Ä‘Æ°á»£c ghi vÃ o stream Ä‘áº§u tiÃªn sáº½ Ä‘Æ°á»£c Ä‘á»c ra tá»« stream Ä‘áº§u tiÃªn.</li>
<li><strong>Truy cáº­p tuáº§n tá»±</strong>: CÃ³ thá»ƒ ghi má»™t chuá»—i byte vÃ o stream, khi Ä‘á»c ra cÅ©ng sáº½ Ä‘á»c theo thá»© tá»± Ä‘Ã£ ghi, khÃ´ng thá»ƒ truy cáº­p ngáº«u nhiÃªn vÃ o dá»¯ liá»‡u á»Ÿ giá»¯a. (Ngoáº¡i trá»« RandomAccessFile)</li>
<li><strong>Chá»‰ Ä‘á»c hoáº·c chá»‰ ghi</strong>: Má»—i stream chá»‰ cÃ³ thá»ƒ lÃ  stream Ä‘áº§u vÃ o hoáº·c Ä‘áº§u ra, khÃ´ng thá»ƒ cÃ³ cáº£ hai chá»©c nÄƒng cÃ¹ng má»™t lÃºc. stream Ä‘áº§u vÃ o chá»‰ cÃ³ thá»ƒ thá»±c hiá»‡n thao tÃ¡c Ä‘á»c, cÃ²n stream Ä‘áº§u ra chá»‰ cÃ³ thá»ƒ thá»±c hiá»‡n thao tÃ¡c ghi. Trong má»™t kÃªnh truyá»n dá»¯ liá»‡u, náº¿u cáº§n cáº£ ghi vÃ  Ä‘á»c dá»¯ liá»‡u, thÃ¬ cáº§n pháº£i cung cáº¥p hai stream riÃªng biá»‡t.</li>
</ul>
<h3>01. PhÃ¢n loáº¡i theo phÆ°Æ¡ng thá»©c truyá»n táº£i</h3>
<p>HÃ£y báº¯t Ä‘áº§u tá»« sÆ¡ Ä‘á»“ á»Ÿ Ä‘áº§u bÃ i.</p>
<p>CÃ³ hai phÆ°Æ¡ng thá»©c truyá»n táº£i: byte vÃ  kÃ½ tá»±. Äáº§u tiÃªn, cáº§n hiá»ƒu rÃµ sá»± khÃ¡c biá»‡t giá»¯a byte vÃ  kÃ½ tá»±, Ä‘Ãºng khÃ´ng?</p>
<p>Byte lÃ  Ä‘Æ¡n vá»‹ Ä‘o lÆ°á»ng dung lÆ°á»£ng lÆ°u trá»¯ trong mÃ¡y tÃ­nh, thÆ°á»ng thÃ¬ má»™t byte cÃ³ 8 bit.</p>
<p>KÃ½ tá»± cÃ³ thá»ƒ lÃ  chá»¯ cÃ¡i, sá»‘ hoáº·c kÃ½ hiá»‡u mÃ  mÃ¡y tÃ­nh sá»­ dá»¥ng, vÃ­ dá»¥ nhÆ° A, 1, $.</p>
<p>ThÃ´ng thÆ°á»ng, má»™t chá»¯ cÃ¡i hoáº·c má»™t kÃ½ tá»± chiáº¿m má»™t byte, má»™t kÃ½ tá»± Viá»‡t chiáº¿m hai byte.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240630165013.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Cá»¥ thá»ƒ, cÃ²n phá»¥ thuá»™c vÃ o mÃ£ hÃ³a kÃ½ tá»±, vÃ­ dá»¥ nhÆ° trong mÃ£ hÃ³a UTF-8, má»™t chá»¯ cÃ¡i tiáº¿ng Anh (khÃ´ng phÃ¢n biá»‡t chá»¯ hoa vÃ  chá»¯ thÆ°á»ng) chiáº¿m má»™t byte, má»™t kÃ½ tá»± Viá»‡t chiáº¿m hai byte. Trong mÃ£ hÃ³a Unicode, má»™t chá»¯ cÃ¡i tiáº¿ng Anh chiáº¿m má»™t byte, má»™t kÃ½ tá»± Trung Quá»‘c chiáº¿m hai byte.</p>
<p>Hiá»ƒu sá»± khÃ¡c biá»‡t giá»¯a byte vÃ  kÃ½ tá»±, sau Ä‘Ã³ xem xÃ©t Byte Stream vÃ  character stream sáº½ dá»… dÃ ng hÆ¡n nhiá»u.</p>
<p>Byte Stream dÃ¹ng Ä‘á»ƒ xá»­ lÃ½ cÃ¡c tá»‡p nhá»‹ phÃ¢n, cháº³ng háº¡n nhÆ° hÃ¬nh áº£nh, MP3, video.</p>
<p>character stream dÃ¹ng Ä‘á»ƒ xá»­ lÃ½ cÃ¡c tá»‡p vÄƒn báº£n. Tá»‡p vÄƒn báº£n cÃ³ thá»ƒ Ä‘Æ°á»£c coi lÃ  má»™t loáº¡i tá»‡p nhá»‹ phÃ¢n Ä‘áº·c biá»‡t, nhÆ°ng Ä‘Ã£ Ä‘Æ°á»£c mÃ£ hÃ³a Ä‘á»ƒ dá»… Ä‘á»c hÆ¡n.</p>
<p>NÃ³i cÃ¡ch khÃ¡c, Byte Stream cÃ³ thá»ƒ xá»­ lÃ½ má»i tá»‡p, trong khi character stream chá»‰ cÃ³ thá»ƒ xá»­ lÃ½ vÄƒn báº£n.</p>
<p>Máº·c dÃ¹ cÃ³ ráº¥t nhiá»u lá»›p IO, nhÆ°ng cá»‘t lÃµi lÃ  4 lá»›p trá»«u tÆ°á»£ng: <code>InputStream</code>, <code>OutputStream</code>, <code>Reader</code>, <code>Writer</code>.</p>
<p><strong>(Má»™t Ä‘iá»ƒm tuyá»‡t vá»i cá»§a trá»«u tÆ°á»£ng hÃ³a)</strong></p>
<p>Máº·c dÃ¹ cÃ³ ráº¥t nhiá»u phÆ°Æ¡ng thá»©c IO, nhÆ°ng cá»‘t lÃµi chá»‰ cÃ³ 2: <code>read</code> vÃ  <code>write</code>.</p>
<p><strong>Lá»›p <code>InputStream</code></strong></p>
<ul>
<li><code>int read()</code>: Äá»c dá»¯ liá»‡u</li>
<li><code>int read(byte b[], int off, int len)</code>: Äá»c tá»« vá»‹ trÃ­ <code>off</code>, Ä‘á»c <code>len</code> byte vÃ  Ä‘áº·t vÃ o máº£ng <code>b</code></li>
<li><code>long skip(long n)</code>: Bá» qua sá»‘ byte chá»‰ Ä‘á»‹nh</li>
<li><code>int available()</code>: Tráº£ vá» sá»‘ byte cÃ³ thá»ƒ Ä‘á»c</li>
<li><code>void close()</code>: ÄÃ³ng stream, giáº£i phÃ³ng tÃ i nguyÃªn</li>
</ul>
<p><strong>Lá»›p <code>OutputStream</code></strong></p>
<ul>
<li><code>void write(int b)</code>: Ghi má»™t byte, máº·c dÃ¹ tham sá»‘ lÃ  loáº¡i <code>int</code>, chá»‰ cÃ³ 8 bit tháº¥p sáº½ Ä‘Æ°á»£c ghi, 24 bit cao sáº½ bá»‹ bá» qua (Ä‘iá»u nÃ y sáº½ Ä‘Æ°á»£c giáº£i thÃ­ch sau)</li>
<li><code>void write(byte b[], int off, int len)</code>: Ghi cÃ¡c byte tá»« máº£ng <code>b</code> tá»« vá»‹ trÃ­ <code>off</code>, dÃ i <code>len</code></li>
<li><code>void flush()</code>: Báº¯t buá»™c lÃ m trá»‘ng, ghi dá»¯ liá»‡u tá»« bá»™ Ä‘á»‡m ra</li>
<li><code>void close()</code>: ÄÃ³ng stream</li>
</ul>
<p><strong>Lá»›p <code>Reader</code></strong></p>
<ul>
<li><code>int read()</code>: Äá»c má»™t kÃ½ tá»±</li>
<li><code>int read(char cbuf[], int off, int len)</code>: Äá»c tá»« vá»‹ trÃ­ <code>off</code>, Ä‘á»c <code>len</code> kÃ½ tá»± vÃ  Ä‘áº·t vÃ o máº£ng <code>b</code></li>
<li><code>long skip(long n)</code>: Bá» qua sá»‘ kÃ½ tá»± chá»‰ Ä‘á»‹nh</li>
<li><code>int ready()</code>: Kiá»ƒm tra xem cÃ³ thá»ƒ Ä‘á»c khÃ´ng</li>
<li><code>void close()</code>: ÄÃ³ng stream</li>
</ul>
<p><strong>Lá»›p <code>Writer</code></strong></p>
<ul>
<li><code>void write(int c)</code>: Ghi má»™t kÃ½ tá»±</li>
<li><code>void write(char cbuf[], int off, int len)</code>: Ghi cÃ¡c kÃ½ tá»± tá»« máº£ng <code>cbuf</code> tá»« vá»‹ trÃ­ <code>off</code>, dÃ i <code>len</code></li>
<li><code>void flush()</code>: Báº¯t buá»™c lÃ m trá»‘ng, ghi dá»¯ liá»‡u tá»« bá»™ Ä‘á»‡m ra</li>
<li><code>void close()</code>: ÄÃ³ng stream</li>
</ul>
<p>Hiá»ƒu cÃ¡c phÆ°Æ¡ng thá»©c trÃªn, báº¡n Ä‘Ã£ náº¯m Ä‘Æ°á»£c linh há»“n cá»§a IO.</p>
<p>Sá»± khÃ¡c biá»‡t giá»¯a Byte Stream vÃ  character stream:</p>
<ul>
<li>Byte Stream thÆ°á»ng dÃ¹ng Ä‘á»ƒ xá»­ lÃ½ cÃ¡c tá»‡p hÃ¬nh áº£nh, video, Ã¢m thanh, PPT, Word. character stream thÆ°á»ng dÃ¹ng Ä‘á»ƒ xá»­ lÃ½ cÃ¡c tá»‡p vÄƒn báº£n thuáº§n tÃºy, nhÆ° tá»‡p TXT, nhÆ°ng khÃ´ng thá»ƒ xá»­ lÃ½ cÃ¡c tá»‡p hÃ¬nh áº£nh, video. NÃ³i má»™t cÃ¢u Ä‘Æ¡n giáº£n: Byte Stream cÃ³ thá»ƒ xá»­ lÃ½ má»i tá»‡p, cÃ²n character stream chá»‰ cÃ³ thá»ƒ xá»­ lÃ½ vÄƒn báº£n thuáº§n tÃºy.</li>
<li>Byte Stream báº£n thÃ¢n khÃ´ng cÃ³ bá»™ Ä‘á»‡m, Buffered Byte Stream cÃ³ bá»™ Ä‘á»‡m cáº£i thiá»‡n hiá»‡u suáº¥t ráº¥t nhiá»u. Trong khi Ä‘Ã³, character stream báº£n thÃ¢n Ä‘Ã£ cÃ³ bá»™ Ä‘á»‡m, nÃªn Bufferd character stream cáº£i thiá»‡n hiá»‡u suáº¥t khÃ´ng Ä‘Ã¡ng ká»ƒ.</li>
</ul>
<p>VÃ­ dá»¥ viáº¿t tá»‡p, chÃºng ta sáº½ xem xÃ©t mÃ£ nguá»“n cá»§a character stream, phÃ¡t hiá»‡n tháº¥y cÃ³ sá»­ dá»¥ng bá»™ Ä‘á»‡m:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Khai bÃ¡o má»™t máº£ng kiá»ƒu char, Ä‘á»ƒ ghi vÃ o stream xuáº¥t</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> char</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] writeBuffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»‹nh nghÄ©a kÃ­ch thÆ°á»›c cá»§a máº£ng writeBuffer, pháº£i &gt;= 1</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> WRITE_BUFFER_SIZE </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1024</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi má»™t pháº§n cá»§a chuá»—i Ä‘Ã£ cho vÃ o stream xuáº¥t</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> write</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> str</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> off</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len) throws IOException {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Sá»­ dá»¥ng tá»« khÃ³a synchronized Ä‘á»ƒ Ä‘á»“ng bá»™ hÃ³a Ä‘oáº¡n mÃ£, Ä‘áº£m báº£o an toÃ n stream</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    synchronized</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (lock) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        char</span><span style="color:#E06C75;--shiki-dark:#E06C75"> cbuf[]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Náº¿u len &lt;= WRITE_BUFFER_SIZE, thÃ¬ sá»­ dá»¥ng máº£ng writeBuffer Ä‘á»ƒ ghi</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (len </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> WRITE_BUFFER_SIZE) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Náº¿u writeBuffer lÃ  null, thÃ¬ táº¡o má»™t máº£ng char má»›i cÃ³ kÃ­ch thÆ°á»›c WRITE_BUFFER_SIZE</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (writeBuffer </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                writeBuffer </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> char</span><span style="color:#E06C75;--shiki-dark:#E06C75">[WRITE_BUFFER_SIZE]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            cbuf </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> writeBuffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {    </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Náº¿u len &gt; WRITE_BUFFER_SIZE, thÃ¬ khÃ´ng phÃ¢n bá»• bá»™ Ä‘á»‡m lá»›n vÄ©nh viá»…n</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Táº¡o má»™t máº£ng char má»›i cÃ³ kÃ­ch thÆ°á»›c len</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            cbuf </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> char</span><span style="color:#E06C75;--shiki-dark:#E06C75">[len]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        }</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Sao chÃ©p má»™t pháº§n cá»§a str (tá»« off, dÃ i len) vÃ o máº£ng cbuf</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        str</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getChars</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(off, (off </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> len), cbuf, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">        // Ghi dá»¯ liá»‡u tá»« máº£ng cbuf vÃ o stream xuáº¥t</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        write</span><span style="color:#E06C75;--shiki-dark:#E06C75">(cbuf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Äoáº¡n mÃ£ nÃ y lÃ  phÆ°Æ¡ng thá»©c <code>write</code> cá»§a lá»›p <code>OutputStreamWriter</code> trong thÆ° viá»‡n IO cá»§a Java, cÃ³ thá»ƒ tháº¥y kÃ­ch thÆ°á»›c cá»§a bá»™ Ä‘á»‡m lÃ  1024 kÃ½ tá»±.</p>
<p>ChÃºng ta hÃ£y so sÃ¡nh mÃ£ cá»§a character stream vÃ  Byte Stream khi viáº¿t tá»‡p, sá»± khÃ¡c biá»‡t ráº¥t nhá».</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Byte Stream</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fis </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"input.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">     FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"output.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] buffer </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((len </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer)</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, len);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// character stream</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fr </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"input.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">     FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"output.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    char</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] buffer </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> char</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((len </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer)</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        fw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, len);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>02. PhÃ¢n loáº¡i theo Ä‘á»‘i tÆ°á»£ng thao tÃ¡c</h3>
<p>HÃ£y suy nghÄ© ká»¹, IO khÃ´ng pháº£i lÃ  viáº¿t táº¯t cá»§a Input (Nháº­p) vÃ  Output (Xuáº¥t) sao:</p>
<ul>
<li>Input: Äá»c dá»¯ liá»‡u tá»« bÃªn ngoÃ i vÃ o bá»™ nhá»›, vÃ­ dá»¥ nhÆ° Ä‘á»c tá»‡p tá»« á»• cá»©ng vÃ o bá»™ nhá»›, Ä‘á»c dá»¯ liá»‡u tá»« máº¡ng vÃ o bá»™ nhá»›, v.v.</li>
<li>Output: Ghi dá»¯ liá»‡u tá»« bá»™ nhá»› ra bÃªn ngoÃ i, vÃ­ dá»¥ nhÆ° ghi dá»¯ liá»‡u tá»« bá»™ nhá»› vÃ o tá»‡p, xuáº¥t dá»¯ liá»‡u tá»« bá»™ nhá»› ra máº¡ng, v.v.</li>
</ul>
<p>Táº¥t cáº£ cÃ¡c chÆ°Æ¡ng trÃ¬nh, khi thá»±c thi, Ä‘á»u hoáº¡t Ä‘á»™ng trÃªn bá»™ nhá»›. Má»™t khi táº¯t mÃ¡y, dá»¯ liá»‡u trong bá»™ nhá»› sáº½ máº¥t Ä‘i. Náº¿u muá»‘n lÆ°u trá»¯ lÃ¢u dÃ i, cáº§n pháº£i xuáº¥t dá»¯ liá»‡u tá»« bá»™ nhá»› ra bÃªn ngoÃ i, vÃ­ dá»¥ nhÆ° tá»‡p.</p>
<p>Thao tÃ¡c tá»‡p lÃ  thao tÃ¡c Ä‘iá»ƒn hÃ¬nh nháº¥t vÃ  cÅ©ng lÃ  thao tÃ¡c thÆ°á»ng xuyÃªn nháº¥t trong IO. Báº¡n cÃ³ thá»ƒ suy nghÄ© theo má»™t gÃ³c Ä‘á»™ khÃ¡c, vÃ­ dá»¥ nhÆ° phÃ¢n loáº¡i IO theo Ä‘á»‘i tÆ°á»£ng thao tÃ¡c, IO cÃ³ thá»ƒ Ä‘Æ°á»£c phÃ¢n loáº¡i thÃ nh: file, array, pipe, basic data types, buffered, print, bject serialization/deserialization, vÃ  conversion, v.v.</p>
<figure><img src="https://ucc.alicdn.com/pic/developer-ecology/7afb2f6df4234d30bfb92517047e1c31.png" alt="PhÃ¢n loáº¡i theo Ä‘á»‘i tÆ°á»£ng thao tÃ¡c" tabindex="0" loading="lazy"><figcaption>PhÃ¢n loáº¡i theo Ä‘á»‘i tÆ°á»£ng thao tÃ¡c</figcaption></figure>
<h4><strong>1) File</strong></h4>
<p>File Stream lÃ  stream thao tÃ¡c trá»±c tiáº¿p trÃªn tá»‡p, cÃ³ thá»ƒ chia thÃ nh Byte Stream (FileInputStream vÃ  FileOutputStream) vÃ  character stream (FileReader vÃ  FileWriter).</p>
<p>VÃ­ dá»¥ vá» FileInputStream:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Khai bÃ¡o má»™t biáº¿n kiá»ƒu int b, dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ byte Ä‘Æ°á»£c Ä‘á»c vÃ o</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> b</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng FileInputStream, dÃ¹ng Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u tá»« tá»‡p fis.txt</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fis1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"fis.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c tuáº§n tá»± dá»¯ liá»‡u tá»« tá»‡p</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((b </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fis1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Chuyá»ƒn byte Ä‘á»c Ä‘Æ°á»£c thÃ nh kÃ½ tá»± ASCII tÆ°Æ¡ng á»©ng vÃ  in ra mÃ n hÃ¬nh</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">((</span><span style="color:#C678DD;--shiki-dark:#C678DD">char</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)b);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng Ä‘á»‘i tÆ°á»£ng FileInputStream, giáº£i phÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fis1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>VÃ­ dá»¥ vá» FileOutputStream:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng FileOutputStream, dÃ¹ng Ä‘á»ƒ ghi dá»¯ liá»‡u vÃ o tá»‡p fos.txt</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"fos.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi dá»¯ liá»‡u vÃ o tá»‡p, á»Ÿ Ä‘Ã¢y ghi máº£ng byte tÆ°Æ¡ng á»©ng vá»›i chuá»—i "Tom"</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getBytes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng Ä‘á»‘i tÆ°á»£ng FileOutputStream, giáº£i phÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>VÃ­ dá»¥ vá» FileReader:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Khai bÃ¡o má»™t biáº¿n kiá»ƒu int b, dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ kÃ½ tá»± Ä‘Æ°á»£c Ä‘á»c vÃ o</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> b </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng FileReader, dÃ¹ng Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u tá»« tá»‡p read.txt</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fileReader </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"read.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c tuáº§n tá»± dá»¯ liá»‡u tá»« tá»‡p</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((b </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fileReader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Chuyá»ƒn kÃ½ tá»± Ä‘á»c Ä‘Æ°á»£c thÃ nh kiá»ƒu char vÃ  in ra mÃ n hÃ¬nh</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">((</span><span style="color:#C678DD;--shiki-dark:#C678DD">char</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)b);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng Ä‘á»‘i tÆ°á»£ng FileReader, giáº£i phÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fileReader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>VÃ­ dá»¥ vá» FileWriter:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng FileWriter, dÃ¹ng Ä‘á»ƒ ghi dá»¯ liá»‡u vÃ o tá»‡p fw.txt</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fileWriter </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"fw.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Chuyá»ƒn chuá»—i "Tom" thÃ nh máº£ng kÃ½ tá»±</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">char</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] chars </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toCharArray</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi dá»¯ liá»‡u vÃ o tá»‡p, á»Ÿ Ä‘Ã¢y ghi táº¥t cáº£ cÃ¡c kÃ½ tá»± trong máº£ng chars</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fileWriter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(chars, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">chars</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng Ä‘á»‘i tÆ°á»£ng FileWriter, giáº£i phÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fileWriter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>File Stream cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o, xÃ³a, Ä‘á»•i tÃªn tá»‡p, v.v. Tham sá»‘ thá»© hai cá»§a hÃ m táº¡o FileOutputStream vÃ  FileWriter cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh viá»‡c thÃªm dá»¯ liá»‡u vÃ o cuá»‘i tá»‡p.</p>
<p>VÃ­ dá»¥ mÃ£:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o tá»‡p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"test.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">createNewFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Táº¡o tá»‡p thÃ nh cÃ´ng"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tá»‡p Ä‘Ã£ tá»“n táº¡i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// XÃ³a tá»‡p</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">delete</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"XÃ³a tá»‡p thÃ nh cÃ´ng"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"XÃ³a tá»‡p tháº¥t báº¡i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»•i tÃªn tá»‡p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> oldFile </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"old.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> newFile </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"new.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">oldFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">renameTo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(newFile)</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Äá»•i tÃªn tá»‡p thÃ nh cÃ´ng"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Äá»•i tÃªn tá»‡p tháº¥t báº¡i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Khi báº¡n Ä‘Ã£ náº¯m vá»¯ng viá»‡c nháº­p vÃ  xuáº¥t tá»‡p, cÃ¡c thao tÃ¡c khÃ¡c cÅ©ng sáº½ trá»Ÿ nÃªn dá»… dÃ ng hÆ¡n, vÃ¬ chÃºng khÃ´ng cÃ³ sá»± khÃ¡c biá»‡t quÃ¡ lá»›n.</p>
<h4><strong>2) Array (Bá»™ nhá»›)</strong></h4>
<p>ThÃ´ng thÆ°á»ng, Ä‘á»‘i vá»›i cÃ¡c thao tÃ¡c Ä‘á»c vÃ  ghi tá»‡p, viá»‡c sá»­ dá»¥ng file stream káº¿t há»£p vá»›i buffered stream lÃ  Ä‘á»§. Tuy nhiÃªn, Ä‘á»ƒ nÃ¢ng cao hiá»‡u quáº£, viá»‡c Ä‘á»c vÃ  ghi tá»‡p thÆ°á»ng xuyÃªn khÃ´ng pháº£i lÃ  Ã½ tÆ°á»Ÿng tá»‘t. VÃ¬ váº­y, array stream (cÃ²n gá»i lÃ  stream bá»™ nhá»›) ra Ä‘á»i.</p>
<p>VÃ­ dá»¥ vá» ByteArrayInputStream:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng ByteArrayInputStream, dÃ¹ng Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u tá»« máº£ng byte</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">InputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> is </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ByteArrayInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">                "Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getBytes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StandardCharsets</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UTF_8</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»‹nh nghÄ©a má»™t máº£ng byte Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u Ä‘Æ°á»£c Ä‘á»c vÃ o</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] flush </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»‹nh nghÄ©a má»™t biáº¿n Ä‘á»ƒ lÆ°u trá»¯ sá»‘ byte Ä‘Æ°á»£c Ä‘á»c vÃ o má»—i láº§n</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c tuáº§n tá»± dá»¯ liá»‡u tá»« máº£ng byte vÃ  in ra mÃ n hÃ¬nh</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> !=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (len </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> is</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(flush)</span><span style="color:#E06C75;--shiki-dark:#E06C75">)) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Chuyá»ƒn Ä‘á»•i byte Ä‘á»c Ä‘Æ°á»£c thÃ nh chuá»—i tÆ°Æ¡ng á»©ng vÃ  in ra mÃ n hÃ¬nh</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(flush, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, len));</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng stream Ä‘áº§u vÃ o, giáº£i phÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">is</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>VÃ­ dá»¥ vá» ByteArrayOutputStream:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng ByteArrayOutputStream, dÃ¹ng Ä‘á»ƒ ghi dá»¯ liá»‡u vÃ o bá»™ nhá»› Ä‘á»‡m</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">ByteArrayOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ByteArrayOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»‹nh nghÄ©a má»™t máº£ng byte Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u cáº§n ghi vÃ o bá»™ nhá»› Ä‘á»‡m</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] info </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getBytes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi dá»¯ liá»‡u vÃ o bá»™ nhá»› Ä‘á»‡m, á»Ÿ Ä‘Ã¢y ghi táº¥t cáº£ byte trong máº£ng info</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">bos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(info, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">info</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u trong bá»™ nhá»› Ä‘á»‡m thÃ nh máº£ng byte</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] dest </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> bos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toByteArray</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng Ä‘á»‘i tÆ°á»£ng ByteArrayOutputStream, giáº£i phÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">bos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>Array stream cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘á»c vÃ  ghi dá»¯ liá»‡u trong bá»™ nhá»›, vÃ­ dá»¥ nhÆ° lÆ°u trá»¯ dá»¯ liá»‡u trong máº£ng byte Ä‘á»ƒ nÃ©n, mÃ£ hÃ³a, hoáº·c tuáº§n tá»± hÃ³a. Æ¯u Ä‘iá»ƒm cá»§a nÃ³ lÃ  khÃ´ng cáº§n táº¡o tá»‡p táº¡m thá»i, cÃ³ thá»ƒ nÃ¢ng cao hiá»‡u suáº¥t cá»§a chÆ°Æ¡ng trÃ¬nh. Tuy nhiÃªn, array stream cÅ©ng cÃ³ nhÆ°á»£c Ä‘iá»ƒm lÃ  chá»‰ cÃ³ thá»ƒ lÆ°u trá»¯ má»™t lÆ°á»£ng dá»¯ liá»‡u giá»›i háº¡n, náº¿u dá»¯ liá»‡u quÃ¡ lá»›n sáº½ dáº«n Ä‘áº¿n trÃ n bá»™ nhá»›.</p>
<h4><strong>3) Pipe</strong></h4>
<p>Piped trong Java khÃ¡c vá»›i pipe trong Unix/Linux. Trong Unix/Linux, cÃ¡c tiáº¿n trÃ¬nh khÃ¡c nhau cÃ³ thá»ƒ giao tiáº¿p vá»›i nhau qua pipe, nhÆ°ng trong Java, cÃ¡c bÃªn giao tiáº¿p pháº£i náº±m trong cÃ¹ng má»™t tiáº¿n trÃ¬nh, tá»©c lÃ  trong cÃ¹ng má»™t JVM. Pipe cung cáº¥p kháº£ nÄƒng giao tiáº¿p giá»¯a cÃ¡c luá»“ng trong cÃ¹ng má»™t tiáº¿n trÃ¬nh.</p>
<p>Má»™t luá»“ng cÃ³ thá»ƒ ghi dá»¯ liá»‡u vÃ o <code>PipedOutputStream</code> vÃ  luá»“ng khÃ¡c cÃ³ thá»ƒ Ä‘á»c dá»¯ liá»‡u tá»« <code>PipedInputStream</code> liÃªn káº¿t vá»›i nÃ³.</p>
<p>VÃ­ dá»¥ vá» <code>PipedOutputStream</code> vÃ  <code>PipedInputStream</code>:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng PipedOutputStream vÃ  má»™t Ä‘á»‘i tÆ°á»£ng PipedInputStream</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PipedOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> pipedOutputStream </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> PipedOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PipedInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> pipedInputStream </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> PipedInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(pipedOutputStream)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t luá»“ng, ghi dá»¯ liá»‡u vÃ o PipedOutputStream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Thread</span><span style="color:#E06C75;--shiki-dark:#E06C75"> thread1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Thread</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Runnable</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> run</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Chuyá»ƒn Ä‘á»•i chuá»—i "Tom" thÃ nh máº£ng byte vÃ  ghi vÃ o PipedOutputStream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            pipedOutputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getBytes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StandardCharsets</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UTF_8</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // ÄÃ³ng PipedOutputStream, giáº£i phÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            pipedOutputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">})</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t luá»“ng, Ä‘á»c dá»¯ liá»‡u tá»« PipedInputStream vÃ  in ra mÃ n hÃ¬nh</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Thread</span><span style="color:#E06C75;--shiki-dark:#E06C75"> thread2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Thread</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Runnable</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> run</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Äá»‹nh nghÄ©a má»™t máº£ng byte Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u Ä‘Æ°á»£c Ä‘á»c vÃ o</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            byte</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75">flush</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> byte</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">];</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Äá»‹nh nghÄ©a má»™t biáº¿n Ä‘á»ƒ lÆ°u trá»¯ sá»‘ byte Ä‘Æ°á»£c Ä‘á»c vÃ o má»—i láº§n</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Äá»c tuáº§n tá»± dá»¯ liá»‡u tá»« máº£ng byte vÃ  in ra mÃ n hÃ¬nh</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            while</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> !=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (len </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> pipedInputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(flush))) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">                // Chuyá»ƒn Ä‘á»•i byte Ä‘á»c Ä‘Æ°á»£c thÃ nh chuá»—i tÆ°Æ¡ng á»©ng vÃ  in ra mÃ n hÃ¬nh</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(flush, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, len));</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // ÄÃ³ng PipedInputStream, giáº£i phÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            pipedInputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">})</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Khá»Ÿi Ä‘á»™ng thread1 vÃ  thread2</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">thread1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">start</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">thread2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">start</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Sá»­ dá»¥ng pipe cÃ³ thá»ƒ thá»±c hiá»‡n viá»‡c truyá»n dá»¯ liá»‡u giá»¯a cÃ¡c luá»“ng khÃ¡c nhau, cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ giao tiáº¿p giá»¯a cÃ¡c luá»“ng, truyá»n dá»¯ liá»‡u, v.v. Tuy nhiÃªn, pipe cÅ©ng cÃ³ má»™t sá»‘ háº¡n cháº¿, cháº³ng háº¡n nhÆ° chá»‰ cÃ³ thá»ƒ sá»­ dá»¥ng giá»¯a cÃ¡c luá»“ng trong cÃ¹ng má»™t JVM vÃ  khÃ´ng thá»ƒ vÆ°á»£t qua cÃ¡c tiáº¿n trÃ¬nh JVM khÃ¡c nhau.</p>
<h4><strong>4) Kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n</strong></h4>
<p>Stream nháº­p xuáº¥t kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n lÃ  má»™t byte stream, stream nÃ y khÃ´ng chá»‰ cÃ³ thá»ƒ Ä‘á»c vÃ  ghi byte vÃ  kÃ½ tá»±, mÃ  cÃ²n cÃ³ thá»ƒ Ä‘á»c vÃ  ghi cÃ¡c kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n.</p>
<p><code>DataInputStream</code> cung cáº¥p má»™t loáº¡t cÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ Ä‘á»c cÃ¡c kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng DataInputStream, dÃ¹ng Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u tá»« tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">DataInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> dis </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> DataInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"das.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c má»™t byte vÃ  chuyá»ƒn Ä‘á»•i nÃ³ thÃ nh kiá»ƒu byte</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#E06C75;--shiki-dark:#E06C75"> b </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> dis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readByte</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c hai byte vÃ  chuyá»ƒn Ä‘á»•i chÃºng thÃ nh kiá»ƒu short</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">short</span><span style="color:#E06C75;--shiki-dark:#E06C75"> s </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> dis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readShort</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c bá»‘n byte vÃ  chuyá»ƒn Ä‘á»•i chÃºng thÃ nh kiá»ƒu int</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> dis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readInt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c tÃ¡m byte vÃ  chuyá»ƒn Ä‘á»•i chÃºng thÃ nh kiá»ƒu long</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> l </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> dis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readLong</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c bá»‘n byte vÃ  chuyá»ƒn Ä‘á»•i chÃºng thÃ nh kiá»ƒu float</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">float</span><span style="color:#E06C75;--shiki-dark:#E06C75"> f </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> dis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readFloat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c tÃ¡m byte vÃ  chuyá»ƒn Ä‘á»•i chÃºng thÃ nh kiá»ƒu double</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">double</span><span style="color:#E06C75;--shiki-dark:#E06C75"> d </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> dis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readDouble</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c má»™t byte vÃ  chuyá»ƒn Ä‘á»•i nÃ³ thÃ nh kiá»ƒu boolean</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">boolean</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bb </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> dis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readBoolean</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c hai byte vÃ  chuyá»ƒn Ä‘á»•i chÃºng thÃ nh kiá»ƒu char</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">char</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ch </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> dis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readChar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng DataInputStream, giáº£i phÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">dis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>DataOutputStream</code> cung cáº¥p má»™t loáº¡t cÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ ghi cÃ¡c kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng DataOutputStream, dÃ¹ng Ä‘á»ƒ ghi dá»¯ liá»‡u vÃ o tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">DataOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> das </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> DataOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"das.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi má»™t dá»¯ liá»‡u kiá»ƒu byte vÃ o tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">das</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeByte</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi má»™t dá»¯ liá»‡u kiá»ƒu short vÃ o tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">das</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeShort</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi má»™t dá»¯ liá»‡u kiá»ƒu int vÃ o tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">das</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeInt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi má»™t dá»¯ liá»‡u kiá»ƒu long vÃ o tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">das</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeLong</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">10000L</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi má»™t dá»¯ liá»‡u kiá»ƒu float vÃ o tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">das</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeFloat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">12.34F</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi má»™t dá»¯ liá»‡u kiá»ƒu double vÃ o tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">das</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeDouble</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">12.56</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi má»™t dá»¯ liá»‡u kiá»ƒu boolean vÃ o tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">das</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeBoolean</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi má»™t dá»¯ liá»‡u kiá»ƒu char vÃ o tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">das</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeChar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'A'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng DataOutputStream, giáº£i phÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">das</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>NgoÃ i <code>DataInputStream</code> vÃ  <code>DataOutputStream</code>, Java IO cÃ²n cung cáº¥p má»™t sá»‘ lá»›p luá»“ng khÃ¡c Ä‘á»ƒ Ä‘á»c vÃ  ghi cÃ¡c kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n vÃ  chuá»—i, bao gá»“m <code>ObjectInputStream</code> vÃ  <code>ObjectOutputStream</code> (dÃ¹ng Ä‘á»ƒ Ä‘á»c vÃ  ghi Ä‘á»‘i tÆ°á»£ng).</p>
<p>VÃ­ dá»¥ mÃ£:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] args) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> oos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"person.dat"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Person</span><span style="color:#E06C75;--shiki-dark:#E06C75"> p </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> Person</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 20</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        oos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(p);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ois </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"person.dat"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Person</span><span style="color:#E06C75;--shiki-dark:#E06C75"> p </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (Person) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ois</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(p);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75"> | </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ClassNotFoundException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>MÃ£ trÃªn táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng <code>Person</code>, ghi nÃ³ vÃ o tá»‡p tin, sau Ä‘Ã³ Ä‘á»c Ä‘á»‘i tÆ°á»£ng tá»« tá»‡p tin vÃ  in ra mÃ n hÃ¬nh console.</p>
<h4><strong>5) Buffer</strong></h4>
<p>CPU ráº¥t nhanh, nÃ³ nhanh hÆ¡n bá»™ nhá»› 100 láº§n, nhanh hÆ¡n Ä‘Ä©a cá»©ng hÃ ng triá»‡u láº§n. Äiá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ , tÆ°Æ¡ng tÃ¡c giá»¯a chÆ°Æ¡ng trÃ¬nh vÃ  bá»™ nhá»› sáº½ ráº¥t nhanh, trong khi tÆ°Æ¡ng tÃ¡c vá»›i Ä‘Ä©a cá»©ng sáº½ tÆ°Æ¡ng Ä‘á»‘i cháº­m, Ä‘iá»u nÃ y sáº½ dáº«n Ä‘áº¿n váº¥n Ä‘á» vá» hiá»‡u suáº¥t.</p>
<p>Äá»ƒ giáº£m tÆ°Æ¡ng tÃ¡c giá»¯a chÆ°Æ¡ng trÃ¬nh vÃ  Ä‘Ä©a cá»©ng, nÃ¢ng cao hiá»‡u suáº¥t chÆ°Æ¡ng trÃ¬nh, buffered stream Ä‘Ã£ Ä‘Æ°á»£c giá»›i thiá»‡u, bao gá»“m cÃ¡c lá»›p cÃ³ tiá»n tá»‘ "Buffer" nhÆ° BufferedInputStream, BufferedOutputStream, BufferedReader, BufferedWriter.</p>
<p>Buffered stream thiáº¿t láº­p má»™t vÃ¹ng Ä‘á»‡m trong bá»™ nhá»›, chá»‰ khi vÃ¹ng Ä‘á»‡m lÆ°u trá»¯ Ä‘á»§ dá»¯ liá»‡u cáº§n thao tÃ¡c thÃ¬ má»›i tÆ°Æ¡ng tÃ¡c vá»›i bá»™ nhá»› hoáº·c Ä‘Ä©a cá»©ng. NÃ³i Ä‘Æ¡n giáº£n, Ä‘á»c/ghi nhiá»u hÆ¡n má»™t chÃºt má»—i láº§n, giáº£m sá»‘ láº§n Ä‘á»c/ghi, nhá» Ä‘Ã³ nÃ¢ng cao hiá»‡u suáº¥t chÆ°Æ¡ng trÃ¬nh.<br>
DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ sá»­ dá»¥ng <code>BufferedInputStream</code> Ä‘á»ƒ Ä‘á»c tá»‡p tin:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng BufferedInputStream, dÃ¹ng Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u tá»« tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">BufferedInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bis </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"data.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t máº£ng byte lÃ m vÃ¹ng Ä‘á»‡m</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] buffer </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c dá»¯ liá»‡u tá»« tá»‡p tin vÃ  lÆ°u trá»¯ vÃ o vÃ¹ng Ä‘á»‡m</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bytesRead</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((bytesRead </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> bis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer)</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Xá»­ lÃ½ dá»¯ liá»‡u trong vÃ¹ng Ä‘á»‡m</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // á» Ä‘Ã¢y chá»‰ Ä‘Æ¡n giáº£n lÃ  chuyá»ƒn Ä‘á»•i máº£ng byte Ä‘Ã£ Ä‘á»c thÃ nh chuá»—i vÃ  in ra</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, bytesRead));</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng BufferedInputStream, giáº£i phÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">bis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong Ä‘oáº¡n mÃ£ trÃªn, trÆ°á»›c tiÃªn táº¡o má»™t Ä‘á»‘i tÆ°á»£ng <code>BufferedInputStream</code> Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u tá»« tá»‡p tin. Sau Ä‘Ã³ táº¡o má»™t máº£ng byte lÃ m vÃ¹ng Ä‘á»‡m, má»—i láº§n Ä‘á»c dá»¯ liá»‡u sáº½ lÆ°u trá»¯ dá»¯ liá»‡u vÃ o vÃ¹ng Ä‘á»‡m. QuÃ¡ trÃ¬nh Ä‘á»c dá»¯ liá»‡u Ä‘Æ°á»£c thá»±c hiá»‡n thÃ´ng qua vÃ²ng láº·p <code>while</code>, má»—i láº§n Ä‘á»c dá»¯ liá»‡u xong sáº½ xá»­ lÃ½ dá»¯ liá»‡u trong vÃ¹ng Ä‘á»‡m. Cuá»‘i cÃ¹ng Ä‘Ã³ng <code>BufferedInputStream</code>, giáº£i phÃ³ng tÃ i nguyÃªn.</p>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ sá»­ dá»¥ng <code>BufferedOutputStream</code> Ä‘á»ƒ ghi vÃ o tá»‡p tin:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng BufferedOutputStream, dÃ¹ng Ä‘á»ƒ ghi dá»¯ liá»‡u vÃ o tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">BufferedOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"data.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t máº£ng byte lÃ m vÃ¹ng Ä‘á»‡m</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] buffer </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi dá»¯ liá»‡u vÃ o tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> data </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "hello world!"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">buffer </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getBytes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">bos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// LÃ m má»›i vÃ¹ng Ä‘á»‡m, ghi dá»¯ liá»‡u tá»« vÃ¹ng Ä‘á»‡m vÃ o tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">bos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">flush</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng BufferedOutputStream, giáº£i phÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">bos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong Ä‘oáº¡n mÃ£ trÃªn, Ä‘áº§u tiÃªn táº¡o má»™t Ä‘á»‘i tÆ°á»£ng <code>BufferedOutputStream</code> Ä‘á»ƒ ghi dá»¯ liá»‡u vÃ o tá»‡p tin. Sau Ä‘Ã³ táº¡o má»™t máº£ng byte lÃ m vÃ¹ng Ä‘á»‡m vÃ  ghi dá»¯ liá»‡u vÃ o vÃ¹ng Ä‘á»‡m. QuÃ¡ trÃ¬nh ghi dá»¯ liá»‡u Ä‘Æ°á»£c thá»±c hiá»‡n thÃ´ng qua phÆ°Æ¡ng thá»©c <code>write()</code>, truyá»n máº£ng byte lÃ m tham sá»‘ cho phÆ°Æ¡ng thá»©c <code>write()</code>. Cuá»‘i cÃ¹ng, thÃ´ng qua phÆ°Æ¡ng thá»©c <code>flush()</code> ghi dá»¯ liá»‡u tá»« vÃ¹ng Ä‘á»‡m vÃ o tá»‡p tin, vÃ  thÃ´ng qua phÆ°Æ¡ng thá»©c <code>close()</code> Ä‘Ã³ng <code>BufferedOutputStream</code>, giáº£i phÃ³ng tÃ i nguyÃªn.</p>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ sá»­ dá»¥ng <code>BufferedReader</code> Ä‘á»ƒ Ä‘á»c tá»‡p tin:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng BufferedReader, dÃ¹ng Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u tá»« tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">BufferedReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> br </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"data.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c dá»¯ liá»‡u tá»« tá»‡p tin vÃ  lÆ°u trá»¯ vÃ o chuá»—i</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> line</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((line </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> br</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readLine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Xá»­ lÃ½ dá»¯ liá»‡u Ä‘Ã£ Ä‘á»c</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // á» Ä‘Ã¢y chá»‰ Ä‘Æ¡n giáº£n lÃ  in ra tá»«ng dÃ²ng chuá»—i Ä‘Ã£ Ä‘á»c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(line);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng BufferedReader, giáº£i phÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">br</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>Trong Ä‘oáº¡n mÃ£ trÃªn, trÆ°á»›c tiÃªn táº¡o má»™t Ä‘á»‘i tÆ°á»£ng <code>BufferedReader</code> Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u tá»« tá»‡p tin. Sau Ä‘Ã³ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>readLine()</code> Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u tá»« tá»‡p tin, má»—i láº§n Ä‘á»c má»™t dÃ²ng dá»¯ liá»‡u vÃ  lÆ°u trá»¯ vÃ o má»™t chuá»—i. QuÃ¡ trÃ¬nh Ä‘á»c dá»¯ liá»‡u Ä‘Æ°á»£c thá»±c hiá»‡n thÃ´ng qua vÃ²ng láº·p <code>while</code>.</p>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ sá»­ dá»¥ng <code>BufferedWriter</code> Ä‘á»ƒ ghi vÃ o tá»‡p tin:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng BufferedWriter, dÃ¹ng Ä‘á»ƒ ghi dá»¯ liá»‡u vÃ o tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">BufferedWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> bw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> BufferedWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"data.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi dá»¯ liá»‡u vÃ o tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> data </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "abcdef"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">bw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(data);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// LÃ m má»›i vÃ¹ng Ä‘á»‡m, ghi dá»¯ liá»‡u tá»« vÃ¹ng Ä‘á»‡m vÃ o tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">bw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">flush</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng BufferedWriter, giáº£i phÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">bw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>Trong Ä‘oáº¡n mÃ£ trÃªn, trÆ°á»›c tiÃªn táº¡o má»™t Ä‘á»‘i tÆ°á»£ng <code>BufferedWriter</code> Ä‘á»ƒ ghi dá»¯ liá»‡u vÃ o tá»‡p tin. Sau Ä‘Ã³ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>write()</code> Ä‘á»ƒ ghi dá»¯ liá»‡u vÃ o vÃ¹ng Ä‘á»‡m. QuÃ¡ trÃ¬nh ghi dá»¯ liá»‡u tÆ°Æ¡ng tá»± nhÆ° sá»­ dá»¥ng lá»›p <code>FileWriter</code>. LÆ°u Ã½ ráº±ng khi sá»­ dá»¥ng <code>BufferedWriter</code> Ä‘á»ƒ ghi dá»¯ liá»‡u, dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c ghi vÃ o vÃ¹ng Ä‘á»‡m trÆ°á»›c, chá»‰ khi vÃ¹ng Ä‘á»‡m Ä‘áº§y hoáº·c gá»i phÆ°Æ¡ng thá»©c <code>flush()</code> thÃ¬ dá»¯ liá»‡u trong vÃ¹ng Ä‘á»‡m má»›i Ä‘Æ°á»£c ghi vÃ o tá»‡p tin.</p>
<p>Cuá»‘i cÃ¹ng, thÃ´ng qua phÆ°Æ¡ng thá»©c <code>flush()</code> ghi dá»¯ liá»‡u tá»« vÃ¹ng Ä‘á»‡m vÃ o tá»‡p tin, vÃ  thÃ´ng qua phÆ°Æ¡ng thá»©c <code>close()</code> Ä‘Ã³ng <code>BufferedWriter</code>, giáº£i phÃ³ng tÃ i nguyÃªn.</p>
<p>Sá»­ dá»¥ng buffered stream cÃ³ thá»ƒ nÃ¢ng cao hiá»‡u suáº¥t Ä‘á»c ghi, giáº£m sá»‘ láº§n Ä‘á»c ghi Ä‘Ä©a hoáº·c máº¡ng má»™t cÃ¡ch thÆ°á»ng xuyÃªn, tá»« Ä‘Ã³ nÃ¢ng cao hiá»‡u suáº¥t chÆ°Æ¡ng trÃ¬nh. Tuy nhiÃªn, khi sá»­ dá»¥ng buffered stream cáº§n chÃº Ã½ kÃ­ch thÆ°á»›c cá»§a vÃ¹ng Ä‘á»‡m vÃ  thá»i Ä‘iá»ƒm lÃ m má»›i vÃ¹ng Ä‘á»‡m Ä‘á»ƒ trÃ¡nh máº¥t dá»¯ liá»‡u hoáº·c dá»¯ liá»‡u khÃ´ng Ä‘áº§y Ä‘á»§.</p>
<h4><strong>6) Print</strong></h4>
<p>Print stream cá»§a Java lÃ  má»™t táº­p há»£p cÃ¡c lá»›p dÃ¹ng Ä‘á»ƒ in dá»¯ liá»‡u ra ngoÃ i, bao gá»“m hai lá»›p <code>PrintStream</code> vÃ  <code>PrintWriter</code>.</p>
<p>CÃ³ láº½ print stream lÃ  thá»© mÃ  láº­p trÃ¬nh viÃªn Java sá»­ dá»¥ng nhiá»u nháº¥t trong suá»‘t sá»± nghiá»‡p cá»§a há»: <code>System.out</code> thá»±c ra tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng <code>PrintStream</code>, cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ in ra cÃ¡c loáº¡i Ä‘á»‘i tÆ°á»£ng khÃ¡c nhau.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"hello worldï¼"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p><code>PrintStream</code> cuá»‘i cÃ¹ng sáº½ xuáº¥t ra dá»¯ liá»‡u dáº¡ng byte, trong khi <code>PrintWriter</code> thÃ¬ má»Ÿ rá»™ng tá»« interface <code>Writer</code>, vÃ¬ váº­y cÃ¡c phÆ°Æ¡ng thá»©c <code>print()/println()</code> cá»§a nÃ³ cuá»‘i cÃ¹ng sáº½ xuáº¥t ra dá»¯ liá»‡u dáº¡ng kÃ½ tá»±. Viá»‡c sá»­ dá»¥ng <code>PrintWriter</code> gáº§n nhÆ° tÆ°Æ¡ng tá»± vá»›i <code>PrintStream</code>.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">StringWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> buffer </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> StringWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PrintWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75"> pw </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> PrintWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(buffer)) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    pw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"abcd"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">buffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span></code></pre>
</div><p>Trong vÃ­ dá»¥ trÃªn, Ä‘áº§u tiÃªn táº¡o má»™t <code>StringWriter</code> Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u dáº¡ng chuá»—i. Sau Ä‘Ã³, sá»­ dá»¥ng <code>PrintWriter</code> Ä‘á»ƒ viáº¿t dá»¯ liá»‡u vÃ o <code>StringWriter</code>. Cuá»‘i cÃ¹ng, dá»¯ liá»‡u Ä‘Æ°á»£c in ra mÃ n hÃ¬nh báº±ng cÃ¡ch chuyá»ƒn Ä‘á»•i <code>StringWriter</code> thÃ nh chuá»—i vÃ  in ra báº±ng <code>System.out.println()</code>.</p>
<h4><strong>7) Object Serialize/Deserialize</strong></h4>
<p>Tuáº§n tá»± hÃ³a báº£n cháº¥t lÃ  chuyá»ƒn má»™t Ä‘á»‘i tÆ°á»£ng Java thÃ nh máº£ng byte, sau Ä‘Ã³ cÃ³ thá»ƒ lÆ°u trá»¯ nÃ³ vÃ o file hoáº·c truyá»n qua máº¡ng Ä‘áº¿n mÃ¡y tá»« xa.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng ByteArrayOutputStream buffer, dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">ByteArrayOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> buffer </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ByteArrayOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Sá»­ dá»¥ng cÃ¢u lá»‡nh try-with-resources Ä‘á»ƒ táº¡o má»™t Ä‘á»‘i tÆ°á»£ng ObjectOutputStream output, vÃ  liÃªn káº¿t nÃ³ vá»›i buffer</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> output </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(buffer)) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c writeUTF() Ä‘á»ƒ ghi chuá»—i "abcdef" vÃ o bá»™ Ä‘á»‡m</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    output</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeUTF</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"abcdef"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c toByteArray() Ä‘á»ƒ chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u trong bá»™ Ä‘á»‡m thÃ nh máº£ng byte vÃ  xuáº¥t ra mÃ n hÃ¬nh Ä‘iá»u khiá»ƒn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Arrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">buffer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toByteArray</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()));</span></span></code></pre>
</div><p>Äá»‘i á»©ng vá»›i tuáº§n tá»± hÃ³a, cÃ³ pháº£n tuáº§n tá»± hÃ³a, tá»©c lÃ  quÃ¡ trÃ¬nh chuyá»ƒn Ä‘á»•i máº£ng byte thÃ nh Ä‘á»‘i tÆ°á»£ng Java.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ObjectInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> input </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ObjectInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Person.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)))) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> s </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> input</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readUTF</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>Äoáº¡n mÃ£ nÃ y chá»§ yáº¿u sá»­ dá»¥ng cÃ¡c lá»›p <code>ByteArrayOutputStream</code> vÃ  <code>ObjectOutputStream</code> cá»§a Java Ä‘á»ƒ ghi chuá»—i "abcdef" vÃ o má»™t bá»™ Ä‘á»‡m máº£ng byte vÃ  chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u trong bá»™ Ä‘á»‡m thÃ nh máº£ng byte vÃ  xuáº¥t ra mÃ n hÃ¬nh Ä‘iá»u khiá»ƒn.</p>
<p>QuÃ¡ trÃ¬nh thá»±c thi cá»¥ thá»ƒ nhÆ° sau:</p>
<ul>
<li>Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng <code>ByteArrayOutputStream</code> buffer Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u.</li>
<li>Sá»­ dá»¥ng cÃ¢u lá»‡nh try-with-resources Ä‘á»ƒ táº¡o má»™t Ä‘á»‘i tÆ°á»£ng <code>ObjectOutputStream</code> output vÃ  liÃªn káº¿t nÃ³ vá»›i buffer.</li>
<li>Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>writeUTF()</code> Ä‘á»ƒ ghi chuá»—i "abcdef" vÃ o bá»™ Ä‘á»‡m.</li>
<li>Khi cÃ¢u lá»‡nh try-with-resources hoÃ n thÃ nh, nÃ³ sáº½ tá»± Ä‘á»™ng gá»i phÆ°Æ¡ng thá»©c <code>close()</code> cá»§a output Ä‘á»ƒ Ä‘Ã³ng luá»“ng xuáº¥t vÃ  giáº£i phÃ³ng tÃ i nguyÃªn.</li>
<li>Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>toByteArray()</code> Ä‘á»ƒ chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u trong bá»™ Ä‘á»‡m thÃ nh máº£ng byte.</li>
<li>Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>Arrays.toString()</code> Ä‘á»ƒ chuyá»ƒn Ä‘á»•i máº£ng byte thÃ nh chuá»—i vÃ  xuáº¥t ra mÃ n hÃ¬nh Ä‘iá»u khiá»ƒn.</li>
</ul>
<h4><strong>8) Conversion</strong></h4>
<p>InputStreamReader lÃ  má»™t cáº§u ná»‘i tá»« byte stream sang character stream, nÃ³ sá»­ dá»¥ng bá»™ mÃ£ kÃ½ tá»± chá»‰ Ä‘á»‹nh Ä‘á»ƒ Ä‘á»c cÃ¡c byte vÃ  giáº£i mÃ£ chÃºng thÃ nh cÃ¡c kÃ½ tá»±.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng InputStreamReader isr, sá»­ dá»¥ng Ä‘á»‘i tÆ°á»£ng FileInputStream Ä‘á»ƒ Ä‘á»c ná»™i dung cá»§a tá»‡p demo.txt vÃ  chuyá»ƒn Ä‘á»•i nÃ³ thÃ nh character stream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">InputStreamReader</span><span style="color:#E06C75;--shiki-dark:#E06C75"> isr </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> InputStreamReader</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"demo.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t máº£ng kÃ½ tá»± cha Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u kÃ½ tá»± Ä‘Æ°á»£c Ä‘á»c, vá»›i Ä‘á»™ dÃ i cá»§a máº£ng lÃ  1024</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">char</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] cha </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> char</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c read() Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u tá»« isr vÃ  lÆ°u trá»¯ dá»¯ liá»‡u kÃ½ tá»± Ä‘Ã£ Ä‘á»c vÃ o máº£ng cha, tráº£ vá» giÃ¡ trá»‹ len lÃ  sá»‘ lÆ°á»£ng kÃ½ tá»± Ä‘Ã£ Ä‘á»c Ä‘Æ°á»£c</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> isr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(cha);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Chuyá»ƒn Ä‘á»•i máº£ng cha tá»« vá»‹ trÃ­ 0 Ä‘áº¿n len thÃ nh chuá»—i vÃ  xuáº¥t ra mÃ n hÃ¬nh console</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(cha, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, len));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng InputStreamReader isr Ä‘á»ƒ giáº£i phÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">isr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>Äoáº¡n mÃ£ nÃ y sá»­ dá»¥ng lá»›p InputStreamReader vÃ  FileInputStream cá»§a Java Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u tá»« tá»‡p demo.txt vÃ  chuyá»ƒn Ä‘á»•i chÃºng thÃ nh character stream. Sau Ä‘Ã³, nÃ³ lÆ°u trá»¯ dá»¯ liá»‡u kÃ½ tá»± Ä‘Ã£ Ä‘á»c vÃ o má»™t máº£ng vÃ  xuáº¥t chuá»—i káº¿t quáº£ ra mÃ n hÃ¬nh console.</p>
<p>OutputStreamWriter chuyá»ƒn Ä‘á»•i má»™t Ä‘á»‘i tÆ°á»£ng xuáº¥t character stream thÃ nh má»™t Ä‘á»‘i tÆ°á»£ng xuáº¥t byte stream, lÃ  cáº§u ná»‘i tá»« character stream Ä‘áº¿n byte stream.</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng File f, Ä‘áº¡i diá»‡n cho tá»‡p test.txt</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> f </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"test.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng OutputStreamWriter out, sá»­ dá»¥ng Ä‘á»‘i tÆ°á»£ng FileOutputStream Ä‘á»ƒ ghi dá»¯ liá»‡u vÃ o tá»‡p f vÃ  chuyá»ƒn Ä‘á»•i byte stream thÃ nh character stream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Writer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> out </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> OutputStreamWriter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(f))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c write() Ä‘á»ƒ ghi chuá»—i "hello world!!" vÃ o tá»‡p f</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"hello world!!"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng Ä‘á»‘i tÆ°á»£ng Writer out Ä‘á»ƒ giáº£i phÃ³ng tÃ i nguyÃªn</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>Viá»‡c sá»­ dá»¥ng conversion stream giÃºp dá»… dÃ ng chuyá»ƒn Ä‘á»•i giá»¯a byte stream vÃ  character stream. Trong viá»‡c Ä‘á»c vÃ  ghi tá»‡p vÄƒn báº£n, thÆ°á»ng sá»­ dá»¥ng character stream, trong khi khi truyá»n dá»¯ liá»‡u qua máº¡ng hoáº·c giao tiáº¿p vá»›i thiáº¿t bá»‹, thÆ°á»ng sá»­ dá»¥ng byte stream.</p>
<p>NgoÃ i ra, khi sá»­ dá»¥ng conversion stream, cáº§n chÃº Ã½ Ä‘áº¿n váº¥n Ä‘á» mÃ£ hÃ³a kÃ½ tá»±. Náº¿u khÃ´ng chá»‰ Ä‘á»‹nh mÃ£ hÃ³a kÃ½ tá»±, sáº½ sá»­ dá»¥ng mÃ£ hÃ³a máº·c Ä‘á»‹nh, cÃ³ thá»ƒ gÃ¢y ra váº¥n Ä‘á» vá» kÃ½ tá»± láº¡. Do Ä‘Ã³, khuyáº¿n khÃ­ch luÃ´n chá»‰ Ä‘á»‹nh mÃ£ hÃ³a kÃ½ tá»± chÃ­nh xÃ¡c khi sá»­ dá»¥ng conversion stream, Ä‘á»ƒ trÃ¡nh cÃ¡c váº¥n Ä‘á» liÃªn quan Ä‘áº¿n kÃ½ tá»± láº¡.</p>
<p>Báº¡n hÃ£y xem, sau khi tÃ´i tá»•ng há»£p, cáº£m giÃ¡c nhÆ° khÃ´ng cÃ²n nhiá»u váº¥n Ä‘á» vá» IO ná»¯a Ä‘Ãºng khÃ´ng! Äá»‘i vá»›i cÃ¡c tÃ¬nh huá»‘ng vÃ  nghiá»‡p vá»¥ khÃ¡c nhau, chá»n IO Stream tÆ°Æ¡ng á»©ng, cÃ¡ch sá»­ dá»¥ng chá»‰ lÃ  Ä‘á»c vÃ  ghi.</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240630135523.png" type="image/png"/>
    </item>
    <item>
      <title>File Stream</title>
      <link>https://vanhung4499.github.io/programming/java/IO/file.html</link>
      <guid>https://vanhung4499.github.io/programming/java/IO/file.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">File Stream</source>
      <description>File Stream Trong cÃ¡c hoáº¡t Ä‘á»™ng IO, viá»‡c lÃ m viá»‡c vá»›i tá»‡p lÃ  pháº§n phá»©c táº¡p nhÆ°ng cÅ©ng lÃ  pháº§n Ä‘Æ°á»£c sá»­ dá»¥ng nhiá»u nháº¥t, háº§u háº¿t cÃ¡c dá»± Ã¡n cá»§a chÃºng ta Ä‘á»u cÃ³ má»™t lá»›p tiá»‡n Ã­ch gá»i...</description>
      <category>java</category>
      <pubDate>Sun, 30 Jun 2024 16:14:55 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Trong cÃ¡c hoáº¡t Ä‘á»™ng IO, viá»‡c lÃ m viá»‡c vá»›i tá»‡p lÃ  pháº§n phá»©c táº¡p nhÆ°ng cÅ©ng lÃ  pháº§n Ä‘Æ°á»£c sá»­ dá»¥ng nhiá»u nháº¥t, háº§u háº¿t cÃ¡c dá»± Ã¡n cá»§a chÃºng ta Ä‘á»u cÃ³ má»™t lá»›p tiá»‡n Ã­ch gá»i lÃ  FileUtil hoáº·c FileUtils.</p>
<p>Lá»›p <code>java.io.File</code> lÃ  lá»›p Ä‘áº·c biá»‡t Ä‘á»ƒ thao tÃ¡c vá»›i tá»‡p, chÃº Ã½ ráº±ng chá»‰ cÃ³ thá»ƒ thao tÃ¡c vá»›i chÃ­nh tá»‡p, khÃ´ng thá»ƒ thao tÃ¡c vá»›i ná»™i dung cá»§a tá»‡p, Ä‘á»ƒ lÃ m viá»‡c vá»›i ná»™i dung, cáº§n sá»­ dá»¥ng luá»“ng vÃ o ra.</p>
<p>Lá»›p <code>File</code> lÃ  má»™t biá»ƒu diá»…n trá»«u tÆ°á»£ng cá»§a tá»‡p vÃ  thÆ° má»¥c, chá»§ yáº¿u Ä‘Æ°á»£c sá»­ dá»¥ng cho cÃ¡c hoáº¡t Ä‘á»™ng nhÆ° táº¡o, tÃ¬m kiáº¿m vÃ  xÃ³a tá»‡p vÃ  thÆ° má»¥c.</p>
<p>LÃ m sao Ä‘á»ƒ hiá»ƒu hai cÃ¢u trÃªn? Thá»±c ra ráº¥t Ä‘Æ¡n giáº£n!</p>
<p>CÃ¢u Ä‘áº§u tiÃªn nÃ³i ráº±ng <code>File</code> khÃ´ng liÃªn quan Ä‘áº¿n stream, lá»›p <code>File</code> khÃ´ng thá»ƒ Ä‘á»c vÃ  ghi tá»‡p, nghÄ©a lÃ  khÃ´ng thá»ƒ nháº­p vÃ  xuáº¥t dá»¯ liá»‡u!</p>
<p>CÃ¢u thá»© hai nÃ³i ráº±ng <code>File</code> cÃ³ thá»ƒ Ä‘áº¡i diá»‡n cho <code>D:\\folder1</code> vÃ  <code>D:\\folder1\\file.txt</code>, pháº§n trÆ°á»›c lÃ  thÆ° má»¥c (Directory) vÃ  pháº§n sau lÃ  tá»‡p (file), lá»›p <code>File</code> Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thao tÃ¡c vá»›i cáº£ hai.</p>
<h3>CÃ¡c phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o cá»§a lá»›p File</h3>
<p>Trong Java, má»i thá»© Ä‘á»u lÃ  Ä‘á»‘i tÆ°á»£ng vÃ  lá»›p File cÅ©ng khÃ´ng ngoáº¡i lá»‡. Báº¥t ká»ƒ lÃ  Ä‘á»‘i tÆ°á»£ng nÃ o cÅ©ng nÃªn báº¯t Ä‘áº§u tá»« phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Ã³, váº­y nÃªn chÃºng ta hÃ£y cÃ¹ng phÃ¢n tÃ­ch cÃ¡c phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o cá»§a lá»›p <code>File</code>.</p>
<p>CÃ³ ba phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng:</p>
<ol>
<li>
<p><code>File(String pathname)</code>: Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng File má»›i tá»« Ä‘Æ°á»ng dáº«n Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh.</p>
</li>
<li>
<p><code>File(String parent, String child)</code>: Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng File má»›i tá»« Ä‘Æ°á»ng dáº«n cá»§a thÆ° má»¥c cha (dÆ°á»›i dáº¡ng chuá»—i) vÃ  tÃªn tá»‡p con.</p>
</li>
<li>
<p><code>File(File parent, String child)</code>: Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng File má»›i tá»« thÆ° má»¥c cha (dÆ°á»›i dáº¡ng Ä‘á»‘i tÆ°á»£ng File) vÃ  tÃªn tá»‡p con.</p>
</li>
</ol>
<p>Äá»ƒ hiá»ƒu rÃµ hÆ¡n, hÃ£y xem vÃ­ dá»¥ sau Ä‘Ã¢y:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÆ°á»ng dáº«n tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> path </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "/Users/username/123.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file1 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(path)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÆ°á»ng dáº«n tá»‡p tin khÃ¡c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> path2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "/Users/username/1/2.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(path2)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o tá»« thÆ° má»¥c cha vÃ  tÃªn tá»‡p con</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> parent </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "/Users/username/aaa"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> child </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "bbb.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file3 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(parent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> child)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o tá»« Ä‘á»‘i tÆ°á»£ng thÆ° má»¥c cha vÃ  tÃªn tá»‡p con</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> parentDir </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/Users/username/aaa"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> child2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "bbb.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file4 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(parentDir</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> child2)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>LÆ°u Ã½ ráº±ng trÃªn macOS, dáº¥u gáº¡ch chÃ©o xuÃ´i (<code>/</code>) Ä‘Æ°á»£c sá»­ dá»¥ng lÃ m kÃ½ tá»± phÃ¢n cÃ¡ch trong Ä‘Æ°á»ng dáº«n, trong khi trÃªn Windows, dáº¥u gáº¡ch chÃ©o ngÆ°á»£c (<code>\</code>) Ä‘Æ°á»£c sá»­ dá»¥ng. VÃ¬ váº­y, khi xá»­ lÃ½ Ä‘Æ°á»ng dáº«n, khÃ´ng nÃªn sá»­ dá»¥ng trá»±c tiáº¿p <code>/</code> hoáº·c <code>\</code>.</p>
<p>Trong Java, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng <code>File.separator</code> Ä‘á»ƒ láº¥y kÃ½ tá»± phÃ¢n cÃ¡ch Ä‘Æ°á»ng dáº«n, Ä‘iá»u nÃ y sáº½ tá»± Ä‘á»™ng tráº£ vá» kÃ½ tá»± phÃ¢n cÃ¡ch Ä‘Ãºng dá»±a trÃªn há»‡ Ä‘iá»u hÃ nh Ä‘ang sá»­ dá»¥ng.</p>
<p>Nhá»¯ng Ä‘iá»ƒm cáº§n chÃº Ã½ vá» lá»›p File:</p>
<ol>
<li>Má»™t Ä‘á»‘i tÆ°á»£ng File Ä‘áº¡i diá»‡n cho má»™t tá»‡p hoáº·c thÆ° má»¥c thá»±c táº¿ trÃªn Ä‘Ä©a cá»©ng.</li>
<li>PhÆ°Æ¡ng thá»©c khá»Ÿi táº¡o cá»§a lá»›p File khÃ´ng kiá»ƒm tra xem tá»‡p hoáº·c thÆ° má»¥c cÃ³ tá»“n táº¡i thá»±c sá»± hay khÃ´ng, vÃ¬ váº­y viá»‡c cÃ³ hay khÃ´ng má»™t tá»‡p hoáº·c thÆ° má»¥c trong Ä‘Æ°á»ng dáº«n khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n viá»‡c táº¡o Ä‘á»‘i tÆ°á»£ng File.</li>
</ol>
<h3>CÃ¡c phÆ°Æ¡ng thá»©c thÃ´ng dá»¥ng cá»§a lá»›p File</h3>
<p>CÃ¡c phÆ°Æ¡ng thá»©c thÃ´ng dá»¥ng cá»§a lá»›p File chá»§ yáº¿u bao gá»“m cÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ láº¥y thÃ´ng tin, láº¥y Ä‘Æ°á»ng dáº«n tuyá»‡t Ä‘á»‘i vÃ  tÆ°Æ¡ng Ä‘á»‘i, kiá»ƒm tra vÃ  táº¡o/xÃ³a tá»‡p tin.</p>
<h4><strong>1) CÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ láº¥y thÃ´ng tin</strong></h4>
<ol>
<li>
<p><code>getAbsolutePath()</code>: Tráº£ vá» Ä‘Æ°á»ng dáº«n tuyá»‡t Ä‘á»‘i cá»§a Ä‘á»‘i tÆ°á»£ng File.</p>
</li>
<li>
<p><code>getPath()</code>: Tráº£ vá» Ä‘Æ°á»ng dáº«n cá»§a Ä‘á»‘i tÆ°á»£ng File. Káº¿t quáº£ giá»‘ng nhÆ° <code>getAbsolutePath()</code>.</p>
</li>
<li>
<p><code>getName()</code>: Tráº£ vá» tÃªn cá»§a tá»‡p tin hoáº·c thÆ° má»¥c.</p>
</li>
<li>
<p><code>length()</code>: Tráº£ vá» Ä‘á»™ dÃ i cá»§a tá»‡p tin, tÃ­nh báº±ng byte.</p>
</li>
</ol>
<p>Äoáº¡n mÃ£ kiá»ƒm tra sau Ä‘Ã¢y dÃ¹ng Ä‘á»ƒ thá»­ nghiá»‡m (chÃº Ã½ thay Ä‘á»•i cÃ¡c Ä‘Æ°á»ng dáº«n theo mÃ¡y tÃ­nh cá»§a báº¡n):</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> f </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/Users/username/aaa/bbb.java"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÆ°á»ng dáº«n tuyá»‡t Ä‘á»‘i cá»§a tá»‡p tin: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> f</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getAbsolutePath</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÆ°á»ng dáº«n Ä‘Æ°á»£c táº¡o: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> f</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getPath</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"TÃªn cá»§a tá»‡p tin: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> f</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Äá»™ dÃ i cá»§a tá»‡p tin: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> f</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> " byte"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> f2 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/Users/username/aaa"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÆ°á»ng dáº«n tuyá»‡t Ä‘á»‘i cá»§a thÆ° má»¥c: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> f2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getAbsolutePath</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÆ°á»ng dáº«n Ä‘Æ°á»£c táº¡o: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> f2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getPath</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"TÃªn cá»§a thÆ° má»¥c: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> f2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Khi Ä‘á»‘i tÆ°á»£ng File Ä‘áº¡i diá»‡n cho má»™t thÆ° má»¥c, phÆ°Æ¡ng thá»©c length() khÃ´ng cÃ³ Ã½ nghÄ©a</span></span></code></pre>
</div><h4><strong>2) ÄÆ°á»ng dáº«n tuyá»‡t Ä‘á»‘i vÃ  tÆ°Æ¡ng Ä‘á»‘i</strong></h4>
<p>ÄÆ°á»ng dáº«n tuyá»‡t Ä‘á»‘i lÃ  Ä‘Æ°á»ng dáº«n Ä‘áº§y Ä‘á»§ báº¯t Ä‘áº§u tá»« gá»‘c cá»§a há»‡ thá»‘ng tá»‡p tin, mÃ´ táº£ vá»‹ trÃ­ chÃ­nh xÃ¡c cá»§a má»™t tá»‡p tin hoáº·c thÆ° má»¥c trong há»‡ thá»‘ng tá»‡p tin. TrÃªn Windows, Ä‘Æ°á»ng dáº«n tuyá»‡t Ä‘á»‘i thÆ°á»ng báº¯t Ä‘áº§u vá»›i á»• Ä‘Ä©a (vÃ­ dá»¥: "<code>C:\Program Files\Java\jdk1.8.0_291\bin\java.exe</code>"). TrÃªn macOS vÃ  Linux, Ä‘Æ°á»ng dáº«n tuyá»‡t Ä‘á»‘i thÆ°á»ng báº¯t Ä‘áº§u vá»›i dáº¥u gáº¡ch chÃ©o (<code>/</code>), vÃ­ dá»¥: "<code>/usr/local/bin/python3</code>".</p>
<p>ÄÆ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i lÃ  Ä‘Æ°á»ng dáº«n dá»±a trÃªn thÆ° má»¥c lÃ m viá»‡c hiá»‡n táº¡i, mÃ´ táº£ má»‘i quan há»‡ giá»¯a má»™t tá»‡p tin hoáº·c thÆ° má»¥c vÃ  thÆ° má»¥c lÃ m viá»‡c hiá»‡n táº¡i. Trong Java, Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i thÆ°á»ng Ä‘Æ°á»£c tÃ­nh tá»« thÆ° má»¥c chá»©a chÆ°Æ¡ng trÃ¬nh Java hiá»‡n táº¡i. VÃ­ dá»¥: "<code>config/config.properties</code>" náº¿u thÆ° má»¥c lÃ m viá»‡c hiá»‡n táº¡i lÃ  "<code>/Users/username/project</code>", thÃ¬ Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i sáº½ lÃ  "<code>/Users/username/project/config/config.properties</code>".</p>
<p>LÆ°u Ã½:</p>
<ul>
<li>TrÃªn há»‡ Ä‘iá»u hÃ nh Windows, há»‡ thá»‘ng tá»‡p tin máº·c Ä‘á»‹nh khÃ´ng phÃ¢n biá»‡t chá»¯ hoa chá»¯ thÆ°á»ng, nghÄ©a lÃ  tÃªn tá»‡p vÃ  Ä‘Æ°á»ng dáº«n cÃ³ thá»ƒ sá»­ dá»¥ng cáº£ chá»¯ hoa vÃ  chá»¯ thÆ°á»ng. VÃ­ dá»¥: "<code>C:\Users\username\Documents\example.txt</code>" vÃ  "<code>C:\Users\Username\Documents\Example.txt</code>" Ä‘á»u chá»‰ cÃ¹ng má»™t tá»‡p. Tuy nhiÃªn, Windows cung cáº¥p má»™t tÃ¹y chá»n phÃ¢n biá»‡t chá»¯ hoa chá»¯ thÆ°á»ng cÃ³ thá»ƒ Ä‘Æ°á»£c kÃ­ch hoáº¡t khi Ä‘á»‹nh dáº¡ng á»• Ä‘Ä©a.</li>
<li>TrÃªn há»‡ Ä‘iá»u hÃ nh macOS vÃ  Linux (Unix), há»‡ thá»‘ng tá»‡p máº·c Ä‘á»‹nh lÃ  phÃ¢n biá»‡t chá»¯ hoa chá»¯ thÆ°á»ng. VÃ­ dá»¥: Trong macOS, "<code>/Users/username/Documents/example.txt</code>" vÃ  "<code>/Users/username/Documents/Example.txt</code>" lÃ  hai tá»‡p khÃ¡c nhau.</li>
</ul>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// VÃ­ dá»¥ vá» Ä‘Æ°á»ng dáº«n tuyá»‡t Ä‘á»‘i</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> absoluteFile </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/Users/username/example/test.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÆ°á»ng dáº«n tuyá»‡t Ä‘á»‘i: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> absoluteFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getAbsolutePath</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// VÃ­ dá»¥ vá» Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> relativeFile </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"example/test.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÆ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> relativeFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getPath</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span></code></pre>
</div><p>ThÃ´ng qua nhá»¯ng vÃ­ dá»¥ nÃ y, báº¡n cÃ³ thá»ƒ hiá»ƒu rÃµ hÆ¡n vá» cÃ¡ch sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c cá»§a lá»›p <code>File</code> trong Java Ä‘á»ƒ lÃ m viá»‡c vá»›i tá»‡p tin vÃ  thÆ° má»¥c.</p>
<h4><strong>3ï¼‰CÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ kiá»ƒm tra</strong></h4>
<ol>
<li>
<p><code>exists()</code> ï¼šKiá»ƒm tra xem tá»‡p tin hoáº·c thÆ° má»¥c cÃ³ tá»“n táº¡i khÃ´ng.</p>
</li>
<li>
<p><code>isDirectory()</code> ï¼šKiá»ƒm tra xem Ä‘á»‘i tÆ°á»£ng cÃ³ pháº£i lÃ  thÆ° má»¥c khÃ´ng.</p>
</li>
<li>
<p><code>isFile()</code> ï¼šKiá»ƒm tra xem Ä‘á»‘i tÆ°á»£ng cÃ³ pháº£i lÃ  tá»‡p tin khÃ´ng.</p>
</li>
</ol>
<p>Äoáº¡n mÃ£ minh há»a nhÆ° sau:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/Users/username/example"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Kiá»ƒm tra xem tá»‡p tin hoáº·c thÆ° má»¥c cÃ³ tá»“n táº¡i khÃ´ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">exists</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tá»‡p tin hoáº·c thÆ° má»¥c tá»“n táº¡i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tá»‡p tin hoáº·c thÆ° má»¥c khÃ´ng tá»“n táº¡i"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Kiá»ƒm tra xem Ä‘á»‘i tÆ°á»£ng cÃ³ pháº£i lÃ  thÆ° má»¥c khÃ´ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isDirectory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÃ¢y lÃ  má»™t thÆ° má»¥c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÃ¢y khÃ´ng pháº£i lÃ  má»™t thÆ° má»¥c"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Kiá»ƒm tra xem Ä‘á»‘i tÆ°á»£ng cÃ³ pháº£i lÃ  tá»‡p tin khÃ´ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÃ¢y lÃ  má»™t tá»‡p tin"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ÄÃ¢y khÃ´ng pháº£i lÃ  má»™t tá»‡p tin"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4><strong>4ï¼‰CÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ táº¡o vÃ  xÃ³a</strong></h4>
<ul>
<li><code>createNewFile()</code> ï¼šNáº¿u tá»‡p tin chÆ°a tá»“n táº¡i, táº¡o má»™t tá»‡p tin má»›i trá»‘ng vÃ  tráº£ vá» <code>true</code>; náº¿u tá»‡p tin Ä‘Ã£ tá»“n táº¡i, khÃ´ng táº¡o má»›i vÃ  tráº£ vá» <code>false</code>.</li>
<li><code>delete()</code> ï¼šXÃ³a tá»‡p tin hoáº·c thÆ° má»¥c. Náº¿u lÃ  thÆ° má»¥c, chá»‰ cÃ³ thá»ƒ xÃ³a náº¿u thÆ° má»¥c Ä‘Ã³ trá»‘ng.</li>
<li><code>mkdir()</code> ï¼šChá»‰ cÃ³ thá»ƒ táº¡o má»™t thÆ° má»¥c cáº¥p Ä‘á»™ má»™t. Náº¿u thÆ° má»¥c cha khÃ´ng tá»“n táº¡i, thao tÃ¡c táº¡o tháº¥t báº¡i. Tráº£ vá» <code>true</code> náº¿u táº¡o thÃ nh cÃ´ng, tráº£ vá» <code>false</code> náº¿u tháº¥t báº¡i.</li>
<li><code>mkdirs()</code> ï¼šCÃ³ thá»ƒ táº¡o nhiá»u cáº¥p thÆ° má»¥c. Náº¿u thÆ° má»¥c cha khÃ´ng tá»“n táº¡i, sáº½ Ä‘Æ°á»£c táº¡o kÃ¨m theo. Tráº£ vá» <code>true</code> náº¿u táº¡o thÃ nh cÃ´ng hoáº·c thÆ° má»¥c Ä‘Ã£ tá»“n táº¡i, tráº£ vá» <code>false</code> náº¿u tháº¥t báº¡i.</li>
</ul>
<p><strong>Trong phÃ¡t triá»ƒn thÆ°á»ng sá»­ dá»¥ng</strong> <code>mkdirs()</code>.</p>
<p>Äoáº¡n mÃ£ thá»­ nghiá»‡m nhÆ° sau:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o tá»‡p tin má»›i</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/Users/username/example/test.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">createNewFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Táº¡o tá»‡p tin thÃ nh cÃ´ng: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getAbsolutePath</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Táº¡o tá»‡p tin tháº¥t báº¡i: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getAbsolutePath</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// XÃ³a tá»‡p tin</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">delete</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"XÃ³a tá»‡p tin thÃ nh cÃ´ng: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getAbsolutePath</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"XÃ³a tá»‡p tin tháº¥t báº¡i: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getAbsolutePath</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o nhiá»u cáº¥p thÆ° má»¥c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> directory </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/Users/username/example/subdir1/subdir2"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">directory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">mkdirs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Táº¡o thÆ° má»¥c thÃ nh cÃ´ng: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> directory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getAbsolutePath</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Táº¡o thÆ° má»¥c tháº¥t báº¡i: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> directory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getAbsolutePath</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>5ï¼‰Duyá»‡t thÆ° má»¥c</h4>
<ul>
<li><code>String[] list()</code> ï¼šTráº£ vá» má»™t máº£ng String, biá»ƒu diá»…n táº¥t cáº£ cÃ¡c tá»‡p con hoáº·c thÆ° má»¥c trong thÆ° má»¥c File nÃ y.</li>
<li><code>File[] listFiles()</code> ï¼šTráº£ vá» má»™t máº£ng File, biá»ƒu diá»…n táº¥t cáº£ cÃ¡c tá»‡p con hoáº·c thÆ° má»¥c trong thÆ° má»¥c File nÃ y.</li>
</ul>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> directory </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/Users/itwanger/Documents/Github/paicoding"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Liá»‡t kÃª tÃªn cÃ¡c tá»‡p trong thÆ° má»¥c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] files </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> directory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"TÃªn cÃ¡c tá»‡p trong thÆ° má»¥c:"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">for</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file </span><span style="color:#C678DD;--shiki-dark:#C678DD">:</span><span style="color:#E06C75;--shiki-dark:#E06C75"> files) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(file);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Liá»‡t kÃª cÃ¡c tá»‡p vÃ  thÆ° má»¥c con trong thÆ° má»¥c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] filesAndDirs </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> directory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">listFiles</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"CÃ¡c tá»‡p vÃ  thÆ° má»¥c con trong thÆ° má»¥c:"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">for</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fileOrDir </span><span style="color:#C678DD;--shiki-dark:#C678DD">:</span><span style="color:#E06C75;--shiki-dark:#E06C75"> filesAndDirs) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">fileOrDir</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tá»‡p tin: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fileOrDir</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#C678DD;--shiki-dark:#C678DD"> if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">fileOrDir</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isDirectory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ThÆ° má»¥c: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fileOrDir</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>LÆ°u Ã½:</strong> Äá»ƒ sá»­ dá»¥ng <code>listFiles()</code> Ä‘á»ƒ láº¥y danh sÃ¡ch cÃ¡c tá»‡p hoáº·c thÆ° má»¥c con cá»§a má»™t thÆ° má»¥c cá»¥ thá»ƒ, hai Ä‘iá»u kiá»‡n sau pháº£i Ä‘Æ°á»£c Ä‘áº£m báº£o:</p>
<ol>
<li>ThÆ° má»¥c Ä‘Ã£ chá»‰ Ä‘á»‹nh pháº£i tá»“n táº¡i.</li>
<li>ThÆ° má»¥c Ä‘Ã£ chá»‰ Ä‘á»‹nh pháº£i lÃ  má»™t thÆ° má»¥c. Náº¿u khÃ´ng, cÃ³ thá»ƒ dáº«n Ä‘áº¿n ngoáº¡i lá»‡ NullPointerException.</li>
</ol>
<h4>6ï¼‰Duyá»‡t Ä‘á»‡ quy</h4>
<p>KhÃ´ng cáº§n nÃ³i nhiá»u, hÃ£y xem ngay Ä‘oáº¡n mÃ£ sau:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] args) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> directory </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/Users/hnv99/Documents/Github"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Duyá»‡t Ä‘á»‡ quy cÃ¡c tá»‡p vÃ  thÆ° má»¥c con trong thÆ° má»¥c</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    traverseDirectory</span><span style="color:#E06C75;--shiki-dark:#E06C75">(directory)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> traverseDirectory</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> directory) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Liá»‡t kÃª táº¥t cáº£ cÃ¡c tá»‡p vÃ  thÆ° má»¥c con trong thÆ° má»¥c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    File</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] filesAndDirs </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> directory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">listFiles</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Duyá»‡t qua tá»«ng tá»‡p vÃ  thÆ° má»¥c con</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    for</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fileOrDir </span><span style="color:#C678DD;--shiki-dark:#C678DD">:</span><span style="color:#E06C75;--shiki-dark:#E06C75"> filesAndDirs) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">fileOrDir</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Náº¿u lÃ  tá»‡p tin, xuáº¥t ra tÃªn tá»‡p tin</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tá»‡p tin: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fileOrDir</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#C678DD;--shiki-dark:#C678DD"> if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">fileOrDir</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isDirectory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Náº¿u lÃ  thÆ° má»¥c, duyá»‡t Ä‘á»‡ quy vÃ o thÆ° má»¥c con</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ThÆ° má»¥c: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fileOrDir</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            traverseDirectory</span><span style="color:#E06C75;--shiki-dark:#E06C75">(fileOrDir)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>RandomAccessFile</h3>
<p>RandomAccessFile lÃ  má»™t lá»›p ráº¥t Ä‘áº·c biá»‡t trong Java, nÃ³ khÃ´ng chá»‰ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘á»c file mÃ  cÃ²n Ä‘á»ƒ ghi file. KhÃ¡c vá»›i cÃ¡c lá»›p IO khÃ¡c nhÆ° FileInputStream vÃ  FileOutputStream, RandomAccessFile cho phÃ©p báº¡n nháº£y Ä‘áº¿n báº¥t ká»³ vá»‹ trÃ­ nÃ o trong file vÃ  báº¯t Ä‘áº§u Ä‘á»c hoáº·c ghi tá»« Ä‘Ã³. Äiá»u nÃ y lÃ m cho nÃ³ ráº¥t phÃ¹ há»£p cho cÃ¡c tÃ¬nh huá»‘ng cáº§n truy cáº­p dá»¯ liá»‡u ngáº«u nhiÃªn trong file, cháº³ng háº¡n nhÆ° há»‡ thá»‘ng cÆ¡ sá»Ÿ dá»¯ liá»‡u.</p>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ vá» viá»‡c sá»­ dá»¥ng RandomAccessFile Ä‘á»ƒ ghi vÃ  Ä‘á»c file:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.io.IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> java.io.RandomAccessFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> RandomAccessFileDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> filePath</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "logs/java/abc.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Sá»­ dá»¥ng RandomAccessFile Ä‘á»ƒ ghi file</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            writeToFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(filePath, </span><span style="color:#98C379;--shiki-dark:#98C379">"Hello, world!"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Sá»­ dá»¥ng RandomAccessFile Ä‘á»ƒ Ä‘á»c file</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> content</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> readFromFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(filePath);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Ná»™i dung file: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> content);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> writeToFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> filePath</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> content</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RandomAccessFile</span><span style="color:#E06C75;--shiki-dark:#E06C75"> randomAccessFile</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> RandomAccessFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(filePath, </span><span style="color:#98C379;--shiki-dark:#98C379">"rw"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Di chuyá»ƒn con trá» file tá»›i cuá»‘i file (Ä‘á»ƒ ná»‘i thÃªm ná»™i dung)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            randomAccessFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">seek</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">randomAccessFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Ghi ná»™i dung</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            randomAccessFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeUTF</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(content);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> readFromFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> filePath</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#C678DD;--shiki-dark:#C678DD"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> IOException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        StringBuilder</span><span style="color:#E06C75;--shiki-dark:#E06C75"> content</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> StringBuilder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RandomAccessFile</span><span style="color:#E06C75;--shiki-dark:#E06C75"> randomAccessFile</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> RandomAccessFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(filePath, </span><span style="color:#98C379;--shiki-dark:#98C379">"r"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">            // Di chuyá»ƒn con trá» file tá»›i Ä‘áº§u file (Ä‘á»ƒ Ä‘á»c tá»« Ä‘áº§u)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            randomAccessFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">seek</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            content</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">append</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">randomAccessFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readUTF</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> content</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Äá»ƒ trÃ¡nh váº¥n Ä‘á» lá»—i font chá»¯ tiáº¿ng Trung, chÃºng ta sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c writeUTF vÃ  readUTF cá»§a RandomAccessFile, cÃ¡c phÆ°Æ¡ng thá»©c nÃ y xá»­ lÃ½ chuá»—i sá»­ dá»¥ng mÃ£ hÃ³a UTF-8. Báº¡n cÃ³ thá»ƒ tá»± cháº¡y Ä‘oáº¡n mÃ£ nÃ y Ä‘á»ƒ tráº£i nghiá»‡m.</p>
<p>Tiáº¿p theo, chÃºng ta sáº½ Ä‘i vÃ o chi tiáº¿t vá» cÃ¡c phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o vÃ  cÃ¡c phÆ°Æ¡ng thá»©c phá»• biáº¿n cá»§a RandomAccessFile.</p>
<h4>CÃ¡c phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o</h4>
<p>RandomAccessFile chá»§ yáº¿u cÃ³ hai phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o:</p>
<ul>
<li><code>RandomAccessFile(File file, String mode)</code>ï¼šTáº¡o má»™t instance má»›i cá»§a RandomAccessFile sá»­ dá»¥ng file object vÃ  mode truy cáº­p cho trÆ°á»›c.</li>
<li><code>RandomAccessFile(String name, String mode)</code>ï¼šTáº¡o má»™t instance má»›i cá»§a RandomAccessFile sá»­ dá»¥ng tÃªn file vÃ  mode truy cáº­p cho trÆ°á»›c.</li>
</ul>
<p>GiÃ¡ trá»‹ cá»§a mode cÃ³ thá»ƒ lÃ :</p>
<ul>
<li>"r"ï¼šMá»Ÿ file chá»‰ Ä‘á»ƒ Ä‘á»c. Báº¥t ká»³ phÆ°Æ¡ng thá»©c ghi nÃ o cÅ©ng sáº½ dáº«n Ä‘áº¿n IOException.</li>
<li>"rw"ï¼šMá»Ÿ file Ä‘á»ƒ Ä‘á»c vÃ  ghi. Náº¿u file khÃ´ng tá»“n táº¡i, nÃ³ sáº½ Ä‘Æ°á»£c táº¡o ra.</li>
<li>"rws"ï¼šMá»Ÿ file Ä‘á»ƒ Ä‘á»c vÃ  ghi, yÃªu cáº§u má»i cáº­p nháº­t ná»™i dung hoáº·c siÃªu dá»¯ liá»‡u Ä‘Æ°á»£c ghi ngay láº­p tá»©c xuá»‘ng thiáº¿t bá»‹ lÆ°u trá»¯ dÆ°á»›i. Mode nÃ y Ä‘á»“ng bá»™ vÃ  Ä‘áº£m báº£o khÃ´ng máº¥t dá»¯ liá»‡u trong trÆ°á»ng há»£p há»‡ thá»‘ng sáº­p.</li>
<li>"rwd"ï¼šTÆ°Æ¡ng tá»± nhÆ° "rws", má»Ÿ file Ä‘á»ƒ Ä‘á»c vÃ  ghi, nhÆ°ng yÃªu cáº§u chá»‰ ghi ná»™i dung cá»§a file ngay láº­p tá»©c. SiÃªu dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘Æ°á»£c ghi trá»….</li>
</ul>
<h4>CÃ¡c phÆ°Æ¡ng thá»©c chÃ­nh</h4>
<ul>
<li><code>long getFilePointer()</code>ï¼šTráº£ vá» vá»‹ trÃ­ hiá»‡n táº¡i cá»§a con trá» file.</li>
<li><code>long length()</code>ï¼šTráº£ vá» Ä‘á»™ dÃ i cá»§a file.</li>
<li><code>int read()</code>ï¼šÄá»c má»™t byte tá»« file.</li>
<li><code>int read(byte[] b)</code>ï¼šÄá»c dá»¯ liá»‡u byte tá»« file vÃ  lÆ°u vÃ o máº£ng byte chá»‰ Ä‘á»‹nh.</li>
<li><code>int read(byte[] b, int off, int len)</code>ï¼šÄá»c dá»¯ liá»‡u byte tá»« file vÃ  lÆ°u vÃ o máº£ng byte chá»‰ Ä‘á»‹nh, báº¯t Ä‘áº§u tá»« vá»‹ trÃ­ off vÃ  tá»‘i Ä‘a len byte.</li>
<li><code>String readLine()</code>ï¼šÄá»c má»™t dÃ²ng vÄƒn báº£n tá»« file.</li>
<li><code>readUTF()</code>ï¼šÄá»c má»™t chuá»—i mÃ£ hÃ³a UTF-8 tá»« file. PhÆ°Æ¡ng thá»©c nÃ y trÆ°á»›c tiÃªn Ä‘á»c hai byte cho thÃ´ng tin Ä‘á»™ dÃ i, sau Ä‘Ã³ Ä‘á»c dá»¯ liá»‡u byte UTF-8 dá»±a trÃªn Ä‘á»™ dÃ i nÃ y vÃ  chuyá»ƒn Ä‘á»•i chÃºng thÃ nh chuá»—i Java. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  khi sá»­ dá»¥ng readUTF Ä‘á»ƒ Ä‘á»c chuá»—i, báº¡n cáº§n Ä‘áº£m báº£o ráº±ng chuá»—i trong file Ä‘Ã£ Ä‘Æ°á»£c ghi báº±ng writeUTF, Ä‘á»ƒ thÃ´ng tin vá» Ä‘á»™ dÃ i vÃ  mÃ£ hÃ³a Ä‘Æ°á»£c giá»¯ nguyÃªn.</li>
<li><code>void seek(long pos)</code>ï¼šDi chuyá»ƒn con trá» file Ä‘áº¿n vá»‹ trÃ­ pos trong file.</li>
<li><code>void write(byte[] b)</code>ï¼šGhi táº¥t cáº£ byte cá»§a máº£ng byte chá»‰ Ä‘á»‹nh vÃ o file.</li>
<li><code>void write(byte[] b, int off, int len)</code>ï¼šGhi len byte tá»« máº£ng byte chá»‰ Ä‘á»‹nh vÃ o file, báº¯t Ä‘áº§u tá»« vá»‹ trÃ­ off.</li>
<li><code>void write(int b)</code>ï¼šGhi byte chá»‰ Ä‘á»‹nh vÃ o file.</li>
<li><code>writeUTF(String str)</code>ï¼šGhi má»™t chuá»—i mÃ£ hÃ³a UTF-8 vÃ o file. PhÆ°Æ¡ng thá»©c nÃ y trÆ°á»›c tiÃªn ghi hai byte cho Ä‘á»™ dÃ i chuá»—i UTF-8, sau Ä‘Ã³ ghi dá»¯ liá»‡u byte UTF-8 cá»§a chuá»—i. Do Ä‘Ã³, khi sá»­ dá»¥ng writeUTF Ä‘á»ƒ ghi chuá»—i, sá»‘ byte thá»±c táº¿ Ä‘Æ°á»£c ghi sáº½ nhiá»u hÆ¡n Ä‘á»™ dÃ i byte UTF-8 cá»§a chuá»—i. Hai byte nÃ y Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh Ä‘á»™ dÃ i chuá»—i chÃ­nh xÃ¡c khi Ä‘á»c.</li>
</ul>
<p>HÃ£y xem thÃªm vÃ­ dá»¥ sau, káº¿t há»£p vá»›i nhá»¯ng gÃ¬ Ä‘Ã£ Ä‘Æ°á»£c trÃ¬nh bÃ y, báº¡n sáº½ hoÃ n toÃ n náº¯m vá»¯ng vá» RandomAccessFile.</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"logs/java/abc.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RandomAccessFile</span><span style="color:#E06C75;--shiki-dark:#E06C75"> raf </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> RandomAccessFile</span><span style="color:#E06C75;--shiki-dark:#E06C75">(file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "rw"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Ghi vÃ o file</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    raf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeUTF</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Hello, world!"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Di chuyá»ƒn con trá» file vá» Ä‘áº§u file</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    raf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">seek</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">    // Äá»c ná»™i dung tá»« file</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> content </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> raf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readUTF</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Ná»™i dung: "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> content);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong vÃ­ dá»¥ nÃ y, chÃºng ta Ä‘áº§u tiÃªn táº¡o má»™t Ä‘á»‘i tÆ°á»£ng file cÃ³ tÃªn lÃ  itwanger.txt. Sau Ä‘Ã³, chÃºng ta sá»­ dá»¥ng RandomAccessFile Ä‘á»ƒ má»Ÿ file nÃ y á»Ÿ cháº¿ Ä‘á»™ Ä‘á»c ghi.</p>
<p>Tiáº¿p theo, chÃºng ta sá»­ dá»¥ng phÆ°Æ¡ng thá»©c writeUTF Ä‘á»ƒ ghi chuá»—i "Hello, world!" vÃ o file. Sau Ä‘Ã³, chÃºng ta sá»­ dá»¥ng seek Ä‘á»ƒ di chuyá»ƒn con trá» file vá» Ä‘áº§u file vÃ  sá»­ dá»¥ng readUTF Ä‘á»ƒ Ä‘á»c ná»™i dung cá»§a file. Káº¿t quáº£ Ä‘áº§u ra sáº½ lÃ  "Hello, world!".</p>
<p>Cuá»‘i cÃ¹ng, chÃºng ta sá»­ dá»¥ng cÃ¢u lá»‡nh try-with-resources Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng RandomAccessFile sáº½ Ä‘Æ°á»£c Ä‘Ã³ng Ä‘Ãºng cÃ¡ch sau khi hoÃ n thÃ nh cÃ¡c thao tÃ¡c.</p>
<h3>Apache FileUtils Class</h3>
<p>Lá»›p FileUtils lÃ  má»™t lá»›p trong thÆ° viá»‡n Apache Commons IO, cung cáº¥p má»™t sá»‘ phÆ°Æ¡ng thá»©c tiá»‡n Ã­ch Ä‘á»ƒ thao tÃ¡c vá»›i cÃ¡c tá»‡p vÃ  thÆ° má»¥c.</p>
<h4><strong>1ï¼‰Sao chÃ©p tá»‡p hoáº·c thÆ° má»¥c:</strong></h4>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> srcFile </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Ä‘Æ°á»ng/dáº«n/Ä‘áº¿n/tá»‡p/nguá»“n"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> destFile </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Ä‘Æ°á»ng/dáº«n/Ä‘áº¿n/tá»‡p/Ä‘Ã­ch"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Sao chÃ©p tá»‡p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">copyFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(srcFile, destFile);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Sao chÃ©p thÆ° má»¥c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">copyDirectory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(srcFile, destFile);</span></span></code></pre>
</div><h4><strong>2ï¼‰XÃ³a tá»‡p hoáº·c thÆ° má»¥c:</strong></h4>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Ä‘Æ°á»ng/dáº«n/Ä‘áº¿n/tá»‡p/hoáº·c/thÆ°/má»¥c"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// XÃ³a tá»‡p hoáº·c thÆ° má»¥c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">delete</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(file);</span></span></code></pre>
</div><p>Cáº§n lÆ°u Ã½ ráº±ng, Ä‘á»ƒ xÃ³a má»™t thÆ° má»¥c khÃ´ng trá»‘ng, báº¡n cáº§n xÃ³a táº¥t cáº£ cÃ¡c tá»‡p vÃ  thÆ° má»¥c con trÆ°á»›c.</p>
<h4><strong>3ï¼‰Di chuyá»ƒn tá»‡p hoáº·c thÆ° má»¥c:</strong></h4>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> srcFile </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Ä‘Æ°á»ng/dáº«n/Ä‘áº¿n/tá»‡p/nguá»“n"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> destFile </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Ä‘Æ°á»ng/dáº«n/Ä‘áº¿n/tá»‡p/Ä‘Ã­ch"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Di chuyá»ƒn tá»‡p hoáº·c thÆ° má»¥c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">moveFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(srcFile, destFile);</span></span></code></pre>
</div><h4><strong>4ï¼‰Truy váº¥n thÃ´ng tin vá» tá»‡p hoáº·c thÆ° má»¥c:</strong></h4>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Ä‘Æ°á»ng/dáº«n/Ä‘áº¿n/tá»‡p/hoáº·c/thÆ°/má»¥c"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Láº¥y thá»i gian sá»­a Ä‘á»•i cá»§a tá»‡p hoáº·c thÆ° má»¥c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Date</span><span style="color:#E06C75;--shiki-dark:#E06C75"> modifyTime </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> FileUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">lastModified</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(file);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Láº¥y kÃ­ch thÆ°á»›c cá»§a tá»‡p hoáº·c thÆ° má»¥c</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> size </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> FileUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">sizeOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(file);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Láº¥y pháº§n má»Ÿ rá»™ng cá»§a tÃªn tá»‡p hoáº·c thÆ° má»¥c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> extension </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> FileUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getExtension</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span></code></pre>
</div><p>ÄÃ³ lÃ  má»™t sá»‘ phÆ°Æ¡ng thá»©c quan trá»ng trong lá»›p FileUtils mÃ  báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c thao tÃ¡c thÆ°á»ng gáº·p khi lÃ m viá»‡c vá»›i tá»‡p vÃ  thÆ° má»¥c trong Java.</p>
<h3>Lá»›p FileUtil trong Hutool</h3>
<p>Lá»›p FileUtil lÃ  má»™t cÃ´ng cá»¥ thao tÃ¡c tá»‡p trong gÃ³i cÃ´ng cá»¥ <a href="https://hutool.cn" target="_blank" rel="noopener noreferrer">Hutool</a>, cung cáº¥p má»™t loáº¡t cÃ¡c phÆ°Æ¡ng thá»©c Ä‘Æ¡n giáº£n vÃ  dá»… sá»­ dá»¥ng Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c nhiá»‡m vá»¥ liÃªn quan Ä‘áº¿n tá»‡p trong Java.</p>
<p>Lá»›p FileUtil bao gá»“m cÃ¡c loáº¡i cÃ´ng cá»¥ thao tÃ¡c sau:</p>
<ul>
<li>Thao tÃ¡c vá»›i tá»‡p: bao gá»“m táº¡o má»›i, xÃ³a, sao chÃ©p, di chuyá»ƒn, Ä‘á»•i tÃªn thÆ° má»¥c vÃ  tá»‡p.</li>
<li>Kiá»ƒm tra tá»‡p: kiá»ƒm tra xem tá»‡p hoáº·c thÆ° má»¥c cÃ³ trá»‘ng khÃ´ng, cÃ³ pháº£i lÃ  thÆ° má»¥c, lÃ  tá»‡p hay khÃ´ng.</li>
<li>ÄÆ°á»ng dáº«n tuyá»‡t Ä‘á»‘i: chuyá»ƒn Ä‘á»•i tá»‡p tá»« ClassPath thÃ nh tá»‡p Ä‘Æ°á»ng dáº«n tuyá»‡t Ä‘á»‘i.</li>
<li>TÃªn tá»‡p: láº¥y tÃªn chÃ­nh cá»§a tá»‡p, pháº§n má»Ÿ rá»™ng cá»§a tá»‡p.</li>
<li>Thao tÃ¡c Ä‘á»c: bao gá»“m Ä‘á»c Ä‘á»‘i tÆ°á»£ng Reader, Ä‘á»c cÃ¡c phÆ°Æ¡ng thá»©c Ä‘a dáº¡ng.</li>
<li>Thao tÃ¡c ghi: bao gá»“m láº¥y Writer, cÃ¡c phÆ°Æ¡ng thá»©c ghi Ä‘a dáº¡ng.</li>
</ul>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ phÆ°Æ¡ng thá»©c phá»• biáº¿n trong lá»›p FileUtil:</p>
<ol>
<li><strong>copyFile</strong>: Sao chÃ©p tá»‡p. PhÆ°Æ¡ng thá»©c nÃ y sao chÃ©p tá»‡p nguá»“n Ä‘Ã£ chá»‰ Ä‘á»‹nh vÃ o tá»‡p Ä‘Ã­ch Ä‘Ã£ chá»‰ Ä‘á»‹nh.</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> dest </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> FileUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"FileUtilDemo2.java"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">copyFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(file, dest);</span></span></code></pre>
</div><ol start="2">
<li><strong>move</strong>: Di chuyá»ƒn tá»‡p hoáº·c thÆ° má»¥c. PhÆ°Æ¡ng thá»©c nÃ y di chuyá»ƒn tá»‡p hoáº·c thÆ° má»¥c nguá»“n Ä‘Ã£ chá»‰ Ä‘á»‹nh Ä‘áº¿n tá»‡p hoáº·c thÆ° má»¥c Ä‘Ã­ch Ä‘Ã£ chá»‰ Ä‘á»‹nh.</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">move</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(file, dest, </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><ol start="3">
<li><strong>del</strong>: XÃ³a tá»‡p hoáº·c thÆ° má»¥c. PhÆ°Æ¡ng thá»©c nÃ y xÃ³a tá»‡p hoáº·c thÆ° má»¥c Ä‘Ã£ chá»‰ Ä‘á»‹nh, náº¿u khÃ´ng tá»“n táº¡i thÃ¬ nÃ©m ra ngoáº¡i lá»‡.</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">del</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(file);</span></span></code></pre>
</div><ol start="4">
<li><strong>rename</strong>: Äá»•i tÃªn tá»‡p hoáº·c thÆ° má»¥c. PhÆ°Æ¡ng thá»©c nÃ y Ä‘á»•i tÃªn tá»‡p hoáº·c thÆ° má»¥c Ä‘Ã£ chá»‰ Ä‘á»‹nh thÃ nh tÃªn má»›i Ä‘Ã£ chá»‰ Ä‘á»‹nh.</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">rename</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(file, </span><span style="color:#98C379;--shiki-dark:#98C379">"FileUtilDemo3.java"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><ol start="5">
<li><strong>readLines</strong>: Äá»c tá»«ng dÃ²ng dá»¯ liá»‡u tá»« tá»‡p.</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readLines</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(file, </span><span style="color:#98C379;--shiki-dark:#98C379">"UTF-8"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">forEach</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">println);</span></span></code></pre>
</div><p>HÃ£y khÃ¡m phÃ¡ thÃªm nhiá»u phÆ°Æ¡ng thá»©c há»¯u Ã­ch khÃ¡c trong mÃ£ nguá»“n cá»§a Hutool, Ä‘Ã¢y lÃ  nhá»¯ng cÃ´ng cá»¥ sáº½ giÃºp nÃ¢ng cao kháº£ nÄƒng láº­p trÃ¬nh cá»§a báº¡n.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Byte Stream</title>
      <link>https://vanhung4499.github.io/programming/java/IO/stream.html</link>
      <guid>https://vanhung4499.github.io/programming/java/IO/stream.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Byte Stream</source>
      <description>Byte Stream ChÃºng ta cáº§n pháº£i nháº¥n máº¡nh ráº±ng dá»¯ liá»‡u cá»§a má»i tá»‡p (vÄƒn báº£n, video, hÃ¬nh áº£nh) Ä‘á»u Ä‘Æ°á»£c lÆ°u trá»¯ dÆ°á»›i dáº¡ng nhá»‹ phÃ¢n vÃ  Ä‘Æ°á»£c truyá»n táº£i dÆ°á»›i dáº¡ng nhá»‹ phÃ¢n. Do Ä‘Ã³, byt...</description>
      <category>java</category>
      <pubDate>Sun, 30 Jun 2024 16:14:55 GMT</pubDate>
      <content:encoded><![CDATA[
<p>ChÃºng ta cáº§n pháº£i nháº¥n máº¡nh ráº±ng dá»¯ liá»‡u cá»§a má»i tá»‡p (vÄƒn báº£n, video, hÃ¬nh áº£nh) Ä‘á»u Ä‘Æ°á»£c lÆ°u trá»¯ dÆ°á»›i dáº¡ng nhá»‹ phÃ¢n vÃ  Ä‘Æ°á»£c truyá»n táº£i dÆ°á»›i dáº¡ng nhá»‹ phÃ¢n. Do Ä‘Ã³, byte stream cÃ³ thá»ƒ truyá»n táº£i dá»¯ liá»‡u cá»§a báº¥t ká»³ loáº¡i tá»‡p nÃ o.</p>
<h3>Byte Output Stream (OutputStream)</h3>
<p><code>java.io.OutputStream</code> lÃ  lá»›p cha cá»§a <strong>byte output stream</strong>, chÃºng ta hÃ£y xem má»™t sá»‘ phÆ°Æ¡ng thá»©c chung mÃ  nÃ³ Ä‘á»‹nh nghÄ©a:</p>
<ol>
<li>
<p><code>close()</code> : ÄÃ³ng output stream nÃ y vÃ  giáº£i phÃ³ng tÃ i nguyÃªn há»‡ thá»‘ng liÃªn quan Ä‘áº¿n stream nÃ y.</p>
</li>
<li>
<p><code>flush()</code> : Xáº£ output stream nÃ y vÃ  buá»™c cÃ¡c byte trong bá»™ Ä‘á»‡m Ä‘Æ°á»£c ghi vÃ o Ä‘Ã­ch.</p>
</li>
<li>
<p><code>write(byte[] b)</code> : Ghi b.length byte tá»« máº£ng byte Ä‘Ã£ cho vÃ o output stream nÃ y.</p>
</li>
<li>
<p><code>write(byte[] b, int off, int len)</code> : Ghi len byte tá»« máº£ng byte Ä‘Ã£ cho vÃ o output stream nÃ y, báº¯t Ä‘áº§u tá»« vá»‹ trÃ­ offset off.</p>
</li>
</ol>
<h3>Lá»›p FileOutputStream</h3>
<p><code>OutputStream</code> cÃ³ nhiá»u lá»›p con, vÃ  chÃºng ta sáº½ báº¯t Ä‘áº§u vá»›i má»™t trong nhá»¯ng lá»›p con Ä‘Æ¡n giáº£n nháº¥t lÃ  <code>FileOutputStream</code>. NhÆ° tÃªn gá»i, Ä‘Ã¢y lÃ  má»™t output stream tá»‡p Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ ghi dá»¯ liá»‡u vÃ o tá»‡p.</p>
<h4><strong>1) CÃ¡c phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o cá»§a FileOutputStream</strong></h4>
<ol>
<li>Sá»­ dá»¥ng tÃªn tá»‡p Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng FileOutputStream.</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fileName </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "example.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(fileName)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>Äoáº¡n mÃ£ trÃªn táº¡o má»™t Ä‘á»‘i tÆ°á»£ng FileOutputStream vá»›i tÃªn tá»‡p lÃ  "example.txt". <strong>Náº¿u tá»‡p khÃ´ng tá»“n táº¡i, nÃ³ sáº½ táº¡o má»™t tá»‡p má»›i; náº¿u tá»‡p Ä‘Ã£ tá»“n táº¡i, nÃ³ sáº½ ghi Ä‘Ã¨ lÃªn tá»‡p hiá»‡n cÃ³</strong>.</p>
<ol start="2">
<li>Sá»­ dá»¥ng Ä‘á»‘i tÆ°á»£ng File Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng FileOutputStream.</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"example.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(file)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>VÃ­ dá»¥ vá» viá»‡c sá»­ dá»¥ng FileOutputStream:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"example.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">  fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getBytes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">  e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">finally</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Äoáº¡n mÃ£ trÃªn táº¡o má»™t Ä‘á»‘i tÆ°á»£ng FileOutputStream, ghi chuá»—i "Tom" vÃ o tá»‡p "example.txt", vÃ  cuá»‘i cÃ¹ng Ä‘Ã³ng output stream.</p>
<h4><strong>2) Ghi dá»¯ liá»‡u byte vá»›i FileOutputStream</strong></h4>
<p>Äá»ƒ ghi dá»¯ liá»‡u byte vá»›i FileOutputStream, chÃºng ta sá»­ dá»¥ng chá»§ yáº¿u cÃ¡c phÆ°Æ¡ng thá»©c sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> b)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] b)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] b</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> off</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> len)  </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi tá»« vá»‹ trÃ­ `off`, `len` byte</span></span></code></pre>
</div><p>â‘  <strong>Ghi má»™t byte</strong>: PhÆ°Æ¡ng thá»©c <code>write(int b)</code> ghi tá»«ng byte má»™t, vÃ­ dá»¥ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o stream vá»›i tÃªn file</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"fos.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75">     </span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">97</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Byte thá»© nháº¥t</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">98</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Byte thá»© hai</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">99</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Byte thá»© ba</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng stream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>KÃ½ tá»± 'a' cÃ³ <a href="https://javabetter.cn/basic-extra-meal/java-unicode.html" target="_blank" rel="noopener noreferrer">giÃ¡ trá»‹ ASCII</a> lÃ  97, 'b' lÃ  98, 'c' lÃ  99. Do Ä‘Ã³, Ä‘oáº¡n mÃ£ trÃªn cÃ³ thá»ƒ Ä‘Æ°á»£c viáº¿t láº¡i nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o stream vá»›i tÃªn file</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"fos.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75">     </span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'a'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Byte thá»© nháº¥t</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'b'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Byte thá»© hai</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'c'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> // Byte thá»© ba</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng stream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>PhÆ°Æ¡ng thá»©c <code>write(int b)</code> ghi tá»«ng byte má»™t, vá»›i tham sá»‘ <code>b</code> lÃ  giÃ¡ trá»‹ nguyÃªn cá»§a byte cáº§n ghi. Má»—i byte chá»‰ cÃ³ 8 bit, do Ä‘Ã³ giÃ¡ trá»‹ cá»§a <code>b</code> pháº£i náº±m trong khoáº£ng tá»« 0 Ä‘áº¿n 255. GiÃ¡ trá»‹ ngoÃ i khoáº£ng nÃ y sáº½ bá»‹ cáº¯t bá». VÃ­ dá»¥, náº¿u <code>b</code> lÃ  -1, nÃ³ sáº½ bá»‹ cáº¯t thÃ nh 255; náº¿u <code>b</code> lÃ  256, nÃ³ sáº½ bá»‹ cáº¯t thÃ nh 0.</p>
<p>Khi ghi <code>b</code> vÃ o output stream, phÆ°Æ¡ng thá»©c <code>write(int b)</code> chá»‰ ghi 8 bit tháº¥p cá»§a <code>b</code>, bá» qua 24 bit cao. Äiá»u nÃ y lÃ  do trong Java, cÃ¡c kiá»ƒu sá»‘ nguyÃªn (bao gá»“m byte, short, int, long) Ä‘Æ°á»£c biá»ƒu diá»…n dÆ°á»›i dáº¡ng bÃ¹ hai nhá»‹ phÃ¢n trong bá»™ nhá»›. Khi chuyá»ƒn má»™t giÃ¡ trá»‹ sá»‘ nguyÃªn cho phÆ°Æ¡ng thá»©c <code>write(int b)</code>, phÆ°Æ¡ng thá»©c nÃ y chá»‰ giá»¯ láº¡i 8 bit tháº¥p cá»§a biá»ƒu diá»…n bÃ¹ hai nhá»‹ phÃ¢n, bá» qua 24 bit cao.</p>
<p>VÃ­ dá»¥, náº¿u giÃ¡ trá»‹ cáº§n ghi lÃ  0x12345678, biá»ƒu diá»…n bÃ¹ hai nhá»‹ phÃ¢n lÃ  0001 0010 0011 0100 0101 0110 0111 1000. Khi sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>write(int b)</code> Ä‘á»ƒ ghi giÃ¡ trá»‹ nÃ y, chá»‰ cÃ³ 8 bit tháº¥p 0111 1000 Ä‘Æ°á»£c ghi ra, bá» qua 24 bit cao 0001 0010 0011 0100 0101 0110. Äiá»u nÃ y lÃ  lÃ½ do táº¡i sao 24 bit cao cá»§a tham sá»‘ <code>b</code> bá»‹ bá» qua.</p>
<p>0111 1000 lÃ  sá»‘ nhá»‹ phÃ¢n 8 bit, tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i sá»‘ tháº­p phÃ¢n lÃ  120, tÆ°Æ¡ng á»©ng vá»›i kÃ½ tá»± ASCII lÃ  "x". Trong báº£ng mÃ£ ASCII, giÃ¡ trá»‹ ASCII tháº­p phÃ¢n cá»§a kÃ½ tá»± "x" lÃ  120. Do Ä‘Ã³, náº¿u sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>write(int b)</code> Ä‘á»ƒ ghi má»™t giÃ¡ trá»‹ byte lÃ  0x78 (tá»©c lÃ  120 tháº­p phÃ¢n), káº¿t quáº£ sáº½ lÃ  kÃ½ tá»± "x".</p>
<p>HÃ£y xem vÃ­ dá»¥ sau:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"example.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">120</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'x'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">0x12345678</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">finally</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        try</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IOException</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic"> e</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">printStackTrace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>HÃ£y xem káº¿t quáº£:</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240630181913.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Tháº­t lÃ  cÃ³ 3 kÃ½ tá»± 'x'.</p>
<p>â‘¡ <strong>Ghi má»™t máº£ng byte</strong>: PhÆ°Æ¡ng thá»©c <code>write(byte[] b)</code> cho phÃ©p ghi toÃ n bá»™ máº£ng byte, vÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o stream vá»›i tÃªn file</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"fos.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75">     </span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Chuyá»ƒn Ä‘á»•i chuá»—i thÃ nh máº£ng byte</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] b </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "Tom"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getBytes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi dá»¯ liá»‡u tá»« máº£ng byte</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(b);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng stream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>â‘¢ <strong>Ghi má»™t pháº§n máº£ng byte chá»‰ Ä‘á»‹nh</strong>: PhÆ°Æ¡ng thá»©c <code>write(byte[] b, int off, int len)</code> cho phÃ©p ghi má»™t pháº§n máº£ng byte tá»« vá»‹ trÃ­ chá»‰ Ä‘á»‹nh, vÃ­ dá»¥:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o stream vá»›i tÃªn file</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"fos.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75">     </span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Chuyá»ƒn Ä‘á»•i chuá»—i thÃ nh máº£ng byte</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] b </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "abcde"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getBytes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi 2 byte báº¯t Ä‘áº§u tá»« chá»‰ sá»‘ 2 (tá»©c lÃ  "cd")</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(b, </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng stream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><h4><strong>3) FileOutputStream thá»±c hiá»‡n thÃªm dá»¯ liá»‡u, xuá»‘ng dÃ²ng</strong></h4>
<p>Trong cÃ¡c vÃ­ dá»¥ mÃ£ trÃªn, má»—i láº§n cháº¡y chÆ°Æ¡ng trÃ¬nh sáº½ táº¡o má»™t Ä‘á»‘i tÆ°á»£ng stream má»›i, dáº«n Ä‘áº¿n dá»¯ liá»‡u trong tá»‡p cÅ©ng bá»‹ xÃ³a Ä‘i. Náº¿u muá»‘n giá»¯ láº¡i dá»¯ liá»‡u hiá»‡n cÃ³ trong tá»‡p vÃ  tiáº¿p tá»¥c <strong>thÃªm dá»¯ liá»‡u má»›i</strong>, chÃºng ta pháº£i lÃ m tháº¿ nÃ o? VÃ  lÃ m tháº¿ nÃ o Ä‘á»ƒ thá»±c hiá»‡n <strong>xuá»‘ng dÃ²ng</strong>?</p>
<p>Thá»±c táº¿, Ä‘iá»u nÃ y ráº¥t Ä‘Æ¡n giáº£n.</p>
<p>ChÃºng ta há»c hai phÆ°Æ¡ng thá»©c khÃ¡c cá»§a <code>FileOutputStream</code>, nhÆ° sau:</p>
<ol>
<li>Sá»­ dá»¥ng tÃªn tá»‡p vÃ  cá» thÃªm Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng FileOutputStream</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fileName </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "example.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">boolean</span><span style="color:#E06C75;--shiki-dark:#E06C75"> append </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(fileName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> append)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>Äoáº¡n mÃ£ trÃªn sá»­ dá»¥ng tÃªn tá»‡p "example.txt" vÃ  cá» thÃªm Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng FileOutputStream, thÃªm dá»¯ liá»‡u vÃ o cuá»‘i tá»‡p. Náº¿u tá»‡p khÃ´ng tá»“n táº¡i, nÃ³ sáº½ táº¡o má»™t tá»‡p má»›i; náº¿u tá»‡p Ä‘Ã£ tá»“n táº¡i, nÃ³ sáº½ thÃªm dá»¯ liá»‡u vÃ o cuá»‘i tá»‡p.</p>
<ol start="2">
<li>Sá»­ dá»¥ng Ä‘á»‘i tÆ°á»£ng tá»‡p vÃ  cá» thÃªm Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng FileOutputStream</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">File</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> File</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"example.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">boolean</span><span style="color:#E06C75;--shiki-dark:#E06C75"> append </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75"> append)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>Äoáº¡n mÃ£ trÃªn sá»­ dá»¥ng Ä‘á»‘i tÆ°á»£ng tá»‡p vÃ  cá» thÃªm Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng FileOutputStream, thÃªm dá»¯ liá»‡u vÃ o cuá»‘i tá»‡p.</p>
<p>Cáº£ hai phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o nÃ y Ä‘á»u yÃªu cáº§u má»™t giÃ¡ trá»‹ boolean trong tham sá»‘ thá»© hai, <code>true</code> cÃ³ nghÄ©a lÃ  thÃªm dá»¯ liá»‡u, <code>false</code> cÃ³ nghÄ©a lÃ  khÃ´ng thÃªm (tá»©c lÃ  xÃ³a dá»¯ liá»‡u hiá»‡n cÃ³).</p>
<p>Äá»ƒ thá»±c hiá»‡n thÃªm dá»¯ liá»‡u, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng mÃ£ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o stream vá»›i tÃªn tá»‡p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"fos.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#E06C75;--shiki-dark:#E06C75">     </span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Chuyá»ƒn Ä‘á»•i chuá»—i thÃ nh máº£ng byte</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] b </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "abcde"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getBytes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Ghi dá»¯ liá»‡u tá»« máº£ng byte, sáº½ thÃªm vÃ o cuá»‘i tá»‡p vÃ¬ Ä‘Ã£ sá»­ dá»¥ng cá» thÃªm</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(b);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng stream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>Cháº¡y mÃ£ nhiá»u láº§n, báº¡n sáº½ tháº¥y dá»¯ liá»‡u Ä‘Æ°á»£c thÃªm vÃ o liÃªn tá»¥c.</p>
<p>Trong há»‡ Ä‘iá»u hÃ nh Windows, kÃ½ tá»± xuá»‘ng dÃ²ng lÃ  <code>\r\n</code>, mÃ£ trong mÃ£ lÃ :</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> filename </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "example.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(filename</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  // Cháº¿ Ä‘á»™ thÃªm</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> content </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "Tom</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\r\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  // Sá»­ dá»¥ng káº¿t há»£p dáº¥u xuá»‘ng dÃ²ng vÃ  thÃªm dáº¥u xuá»‘ng dÃ²ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">content</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getBytes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>Trong macOS, kÃ½ tá»± xuá»‘ng dÃ²ng lÃ  <code>\n</code>, mÃ£ trong mÃ£ lÃ :</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> filename </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "example.txt"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(filename</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  // Cháº¿ Ä‘á»™ thÃªm</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> content </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "Tom</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\n</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  // Chá»‰ sá»­ dá»¥ng dáº¥u xuá»‘ng dÃ²ng</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">content</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getBytes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>NÃ³i thÃªm vá» kÃ½ tá»± xuá»‘ng dÃ²ng vÃ  dáº¥u xuá»‘ng dÃ²ng.</p>
<p>KÃ½ tá»± xuá»‘ng dÃ²ng (<code>\r</code>) vÃ  dáº¥u xuá»‘ng dÃ²ng (<code>\n</code>) lÃ  cÃ¡c kÃ½ tá»± Ä‘iá»u khiá»ƒn phá»• biáº¿n trÃªn mÃ¡y tÃ­nh, dÃ¹ng Ä‘á»ƒ chá»‰ Ä‘á»‹nh káº¿t thÃºc dÃ²ng hoáº·c thá»±c hiá»‡n viá»‡c xuá»‘ng dÃ²ng. CÃ¡ch sá»­ dá»¥ng chÃºng cÃ³ thá»ƒ khÃ¡c nhau trong cÃ¡c há»‡ Ä‘iá»u hÃ nh vÃ  ngÃ´n ngá»¯ láº­p trÃ¬nh khÃ¡c nhau.</p>
<p>TrÃªn há»‡ Ä‘iá»u hÃ nh Windows, thÆ°á»ng sá»­ dá»¥ng káº¿t há»£p dáº¥u xuá»‘ng dÃ²ng vÃ  dáº¥u xuá»‘ng dÃ²ng (<code>\r\n</code>) Ä‘á»ƒ káº¿t thÃºc má»—i dÃ²ng. Trong tá»‡p vÄƒn báº£n, má»—i dÃ²ng sáº½ káº¿t thÃºc báº±ng má»™t káº¿t há»£p nÃ y. Äiá»u nÃ y lÃ  do cÃ¡c mÃ¡y in vÃ  thiáº¿t bá»‹ Ä‘áº§u cuá»‘i tá»«ng sá»­ dá»¥ng káº¿t há»£p nÃ y Ä‘á»ƒ káº¿t thÃºc dÃ²ng vÃ  thá»±c hiá»‡n xuá»‘ng dÃ²ng. TrÃªn Windows, cÃ¡c cÃ´ng cá»¥ chá»‰nh sá»­a vÄƒn báº£n vÃ  terminal cÅ©ng há»— trá»£ sá»­ dá»¥ng káº¿t há»£p dáº¥u xuá»‘ng dÃ²ng vÃ  dáº¥u xuá»‘ng dÃ²ng Ä‘á»ƒ káº¿t thÃºc má»—i dÃ²ng.</p>
<p>Trong macOS vÃ  Linux, thÆ°á»ng chá»‰ sá»­ dá»¥ng dáº¥u xuá»‘ng dÃ²ng (<code>\n</code>) Ä‘á»ƒ káº¿t thÃºc má»—i dÃ²ng. Trong tá»‡p vÄƒn báº£n, má»—i dÃ²ng sáº½ chá»‰ káº¿t thÃºc báº±ng má»™t dáº¥u xuá»‘ng dÃ²ng. Äiá»u nÃ y lÃ  do cÃ¡c thiáº¿t bá»‹ Ä‘áº§u cuá»‘i Unix ban Ä‘áº§u chá»‰ cáº§n dÃ¹ng dáº¥u xuá»‘ng dÃ²ng Ä‘á»ƒ káº¿t thÃºc dÃ²ng vÃ  thá»±c hiá»‡n xuá»‘ng dÃ²ng. TrÃªn macOS vÃ  Linux, cÃ¡c cÃ´ng cá»¥ chá»‰nh sá»­a vÄƒn báº£n vÃ  terminal cÅ©ng há»— trá»£ viá»‡c sá»­ dá»¥ng dáº¥u xuá»‘ng dÃ²ng Ä‘á»ƒ káº¿t thÃºc má»—i dÃ²ng.</p>
<p>Trong cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh, thÆ°á»ng cÅ©ng sá»­ dá»¥ng dáº¥u xuá»‘ng dÃ²ng vÃ  dáº¥u xuá»‘ng dÃ²ng Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng trÃªn chuá»—i. VÃ­ dá»¥, trong Java, dáº¥u xuá»‘ng dÃ²ng cÃ³ thá»ƒ Ä‘Æ°á»£c biá»ƒu thá»‹ báº±ng "<code>\r</code>", vÃ  dáº¥u xuá»‘ng dÃ²ng cÃ³ thá»ƒ Ä‘Æ°á»£c biá»ƒu thá»‹ báº±ng "<code>\n</code>". Khi sá»­ dá»¥ng input stream vÃ  xuáº¥t Ä‘á»ƒ Ä‘á»c vÃ  ghi tá»‡p, cÅ©ng cáº§n chÃº Ã½ Ä‘áº¿n cÃ¡ch sá»­ dá»¥ng dáº¥u xuá»‘ng dÃ²ng vÃ  dáº¥u xuá»‘ng dÃ²ng vÃ  sá»± khÃ¡c biá»‡t giá»¯a cÃ¡c há»‡ Ä‘iá»u hÃ nh.</p>
<h3>Byte Input Stream (InputStream)</h3>
<p><code>java.io.InputStream</code> lÃ  lá»›p <strong>cha</strong> cá»§a <strong>byte input stream</strong>, chÃºng ta hÃ£y xem qua má»™t sá»‘ phÆ°Æ¡ng thá»©c chung cá»§a nÃ³:</p>
<ol>
<li>
<p><code>close()</code> : ÄÃ³ng input stream nÃ y vÃ  giáº£i phÃ³ng tÃ i nguyÃªn há»‡ thá»‘ng liÃªn quan Ä‘áº¿n stream nÃ y.</p>
</li>
<li>
<p><code>int read()</code> : Äá»c byte tiáº¿p theo tá»« input stream.</p>
</li>
<li>
<p><code>read(byte[] b)</code> : PhÆ°Æ¡ng thá»©c nÃ y tráº£ vá» giÃ¡ trá»‹ int biá»ƒu thá»‹ sá»‘ byte Ä‘Ã£ Ä‘á»c Ä‘Æ°á»£c, tráº£ vá» sá»‘ byte Ä‘Ã£ Ä‘á»c náº¿u cÃ³, náº¿u khÃ´ng Ä‘á»c Ä‘Æ°á»£c gÃ¬ thÃ¬ tráº£ vá» -1.</p>
</li>
</ol>
<h3>Lá»›p FileInputStream</h3>
<p>InputStream cÃ³ nhiá»u lá»›p con, chÃºng ta sáº½ báº¯t Ä‘áº§u vá»›i lá»›p con Ä‘Æ¡n giáº£n nháº¥t lÃ  FileInputStream. TÃªn gá»£i Ã½ ráº±ng Ä‘Ã¢y lÃ  input stream tá»« file, dÃ¹ng Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u tá»« file.</p>
<h4>1) CÃ¡c phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o cá»§a FileInputStream</h4>
<ol>
<li>
<p><code>FileInputStream(String name)</code>: Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng FileInputStream vÃ  má»Ÿ file cÃ³ tÃªn Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh Ä‘á»ƒ Ä‘á»c. TÃªn file Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh bá»Ÿi tham sá»‘ <code>name</code>. Náº¿u file khÃ´ng tá»“n táº¡i, sáº½ nÃ©m ra ngoáº¡i lá»‡ FileNotFoundException.</p>
</li>
<li>
<p><code>FileInputStream(File file)</code>: Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng FileInputStream vÃ  má»Ÿ file Ä‘Æ°á»£c biá»ƒu diá»…n bá»Ÿi Ä‘á»‘i tÆ°á»£ng File chá»‰ Ä‘á»‹nh Ä‘á»ƒ Ä‘á»c.</p>
</li>
</ol>
<p>VÃ­ dá»¥ mÃ£ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng FileInputStream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fis </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"test.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c ná»™i dung cá»§a file</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((data </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">((</span><span style="color:#C678DD;--shiki-dark:#C678DD">char</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) data);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng input stream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><h4>2) Äá»c dá»¯ liá»‡u byte báº±ng FileInputStream</h4>
<p>â‘  Äá»c byte: PhÆ°Æ¡ng thá»©c <code>read()</code> sáº½ Ä‘á»c má»™t byte vÃ  tráº£ vá» giÃ¡ trá»‹ nguyÃªn cá»§a byte Ä‘Ã³. Náº¿u Ä‘Ã£ Ä‘á»c Ä‘áº¿n cuá»‘i file, sáº½ tráº£ vá» -1. Náº¿u xáº£y ra lá»—i trong quÃ¡ trÃ¬nh Ä‘á»c, sáº½ nÃ©m ra ngoáº¡i lá»‡ IOException.</p>
<p>VÃ­ dá»¥ mÃ£ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng FileInputStream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fis </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"test.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c ná»™i dung cá»§a file</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((data </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">((</span><span style="color:#C678DD;--shiki-dark:#C678DD">char</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) data);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng input stream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><p>â‘¡ Äá»c báº±ng máº£ng byte: PhÆ°Æ¡ng thá»©c <code>read(byte[] b)</code> sáº½ Ä‘á»c tá»‘i Ä‘a <code>b.length</code> byte tá»« stream vÃ  lÆ°u chÃºng vÃ o máº£ng Ä‘á»‡m <code>b</code>.</p>
<p>VÃ­ dá»¥ mÃ£ nhÆ° sau:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng FileInputStream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fis </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"test.txt"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c ná»™i dung cá»§a file vÃ o máº£ng Ä‘á»‡m</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] buffer </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((count </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer)</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, count));</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng input stream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
</div><h4>3) Sao chÃ©p áº£nh báº±ng byte stream FileInputStream</h4>
<p>NguyÃªn lÃ½ ráº¥t Ä‘Æ¡n giáº£n, lÃ  Ä‘á»c thÃ´ng tin áº£nh vÃ o byte stream nháº­p, sau Ä‘Ã³ dÃ¹ng byte stream xuáº¥t Ä‘á»ƒ ghi vÃ o file má»›i.</p>
<p>VÃ­ dá»¥ mÃ£ nhÆ° sau:</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng FileInputStream Ä‘á»ƒ Ä‘á»c file áº£nh gá»‘c</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fis </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileInputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"original.jpg"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng FileOutputStream Ä‘á»ƒ ghi file áº£nh sao chÃ©p</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75"> fos </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FileOutputStream</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"copy.jpg"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Táº¡o má»™t máº£ng Ä‘á»‡m Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u Ä‘Æ°á»£c Ä‘á»c</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] buffer </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#C678DD;--shiki-dark:#C678DD"> byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1024</span><span style="color:#E06C75;--shiki-dark:#E06C75">]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#E06C75;--shiki-dark:#E06C75"> count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// Äá»c file áº£nh gá»‘c vÃ  ghi dá»¯ liá»‡u vÃ o file áº£nh sao chÃ©p</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">while</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ((count </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer)</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(buffer, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, count);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// ÄÃ³ng input stream vÃ  output stream</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">fos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">close</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>MÃ£ trÃªn táº¡o má»™t FileInputStream Ä‘á»ƒ Ä‘á»c file áº£nh gá»‘c vÃ  FileOutputStream Ä‘á»ƒ ghi dá»¯ liá»‡u vÃ o file áº£nh sao chÃ©p. Sau Ä‘Ã³, sá»­ dá»¥ng vÃ²ng láº·p while Ä‘á»ƒ tá»«ng bÆ°á»›c Ä‘á»c byte tá»« file gá»‘c vÃ  ghi vÃ o file sao chÃ©p. Cuá»‘i cÃ¹ng, Ä‘Ã³ng cáº£ FileInputStream vÃ  FileOutputStream Ä‘á»ƒ giáº£i phÃ³ng tÃ i nguyÃªn.</p>
<h3>TÃ³m táº¯t</h3>
<p>InputStream lÃ  lá»›p trá»«u tÆ°á»£ng cá»§a byte input stream, Ä‘á»‹nh nghÄ©a cÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u byte nhÆ° <code>read()</code>, <code>read(byte[] b)</code>, <code>read(byte[] b, int off, int len)</code> vÃ  nhiá»u phÆ°Æ¡ng thá»©c khÃ¡c. OutputStream lÃ  lá»›p trá»«u tÆ°á»£ng cá»§a byte output stream, Ä‘á»‹nh nghÄ©a cÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ ghi dá»¯ liá»‡u byte nhÆ° <code>write(int b)</code>, <code>write(byte[] b)</code>, <code>write(byte[] b, int off, int len)</code> vÃ  cÃ¡c phÆ°Æ¡ng thá»©c khÃ¡c. Cáº£ hai lá»›p trá»«u tÆ°á»£ng nÃ y lÃ  cÆ¡ sá»Ÿ cá»§a byte stream.</p>
<p>FileInputStream lÃ  lá»›p Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u byte tá»« file, káº¿ thá»«a tá»« InputStream. FileOutputStream lÃ  lá»›p Ä‘á»ƒ ghi dá»¯ liá»‡u byte vÃ o file, káº¿ thá»«a tá»« OutputStream. Cáº£ hai lá»›p nÃ y lÃ  hai trong nhá»¯ng lá»›p thá»±c hiá»‡n phá»• biáº¿n nháº¥t cá»§a byte stream.</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240630181913.png" type="image/png"/>
    </item>
    <item>
      <title>About Me</title>
      <link>https://vanhung4499.github.io/about-me.html</link>
      <guid>https://vanhung4499.github.io/about-me.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">About Me</source>
      <description>About Me Typing SVG Introduction Hung Nguyen, 1999, now living in HCMC, Vietnam. I&amp;apos;m a software engineer, a macOS lover, and a Hackintosher. I love to learn new things, especial...</description>
      <category>about</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<p><a href="https://git.io/typing-svg"><img src="https://readme-typing-svg.herokuapp.com?font=Fira+Code&amp;pause=1000&amp;random=false&amp;width=435&amp;lines=Learn%2C+Learn+More%2C+Learn+Forever!" alt="Typing SVG"></a></p>
<h2>Introduction</h2>
<p>Hung Nguyen, 1999, now living in HCMC, Vietnam.</p>
<p>I'm a software engineer, a macOS lover, and a Hackintosher. I love to learn new things, especially in the field of technology. I love self-taught, and I'm still learning new things everyday. I love to write, and I'm trying to write more to share my knowledge and experience with others.</p>
<p>As a software engineer, I love to see how things work in the high level. By seeing how each component works and interacts with each other, I can find out what can be optimized/improved. Yet, when I start the implementation, I<br>
prefer to do one thing at a time. Adding more components as needed. Beside, I love automation, and I can spend a lot of time to automate things.</p>
<h2>Profile</h2>
<ul>
<li>Software Engineer, <a href="vnohackintosh.com">Hackintosher</a>, macOS lover.</li>
<li>Currently focusing on backend development with main directions in Java, Golang, TypeScript.</li>
<li>Interested in DevOps, System, Automation, Productivity and Writing.</li>
</ul>
<h2>Skills</h2>
<p>I can be working as Fullstack Developer, but I prefer Backend Development. All the skills I have are self-taught, and I'm still learning new things everyday.</p>
<h3>Languages</h3>
<img src="https://skillicons.dev/icons?i=java,golang,javascript,ts,python,html,css,regex,md,bash&amp;theme=dark&amp;&amp;perline=10" alt="Skills">
<h3>Frameworks</h3>
<img src="https://skillicons.dev/icons?i=spring,nodejs,nestjs,react,nextjs,vue,redux&amp;theme=dark&amp;&amp;perline=10" alt="Skills">
<h3>Databases</h3>
<img src="https://skillicons.dev/icons?i=mysql,redis,mongodb,elasticsearch&amp;theme=dark&amp;&amp;perline=10" alt="Skills">
<h3>Others</h3>
<img src="https://skillicons.dev/icons?i=vim,idea,vscode,aws,figma,gradle,maven,npm,gcp,docker,kubernetes,git,github,gitlab,rabbitmq,kafka,jenkins,linux,postman,linkedin,stackoverflow,svg&amp;theme=dark&amp;&amp;perline=10" alt="Skills">
<h2>Github Summary</h2>
<img src="https://github-trophies.vercel.app/?username=vanhung4499&amp;theme=radical&amp;margin-w=25" alt="Github Summary">
<img src="https://github-readme-stats.vercel.app/api/top-langs/?username=vanhung4499&amp;theme=radical&amp;layout=compact&amp;bg_color=30,ef475d,904e95&amp;title_color=fff&amp;text_color=fff">
<img src="https://github-readme-stats.vercel.app/api?username=vanhung4499&amp;count_private=true&amp;show_icons=true&amp;theme=radical&amp;bg_color=30,ef475d,904e95&amp;title_color=fff&amp;text_color=fff">
<h2>Preview</h2>
<figure><img src="https://count.getloli.com/get/@:vanhung4499?theme=gelbooru-h" alt=":Augenestern-creator" tabindex="0" loading="lazy"><figcaption>:Augenestern-creator</figcaption></figure>
<h2>Activity Graph</h2>
<figure><a href="https://github.com/vanhung44499/github-readme-activity-graph" target="_blank" rel="noopener noreferrer"><img src="https://github-readme-activity-graph-sandy.vercel.app/graph?username=vanhung4499&amp;theme=dracula" alt="Ashutosh's github activity graph" tabindex="0" loading="lazy"></a><figcaption>Ashutosh's github activity graph</figcaption></figure>
<h2>About This Site</h2>
<p><a href="/about">About</a></p>
]]></content:encoded>
      <enclosure url="https://count.getloli.com/get/@:vanhung4499?theme=gelbooru-h" type="image/"/>
    </item>
    <item>
      <title>About this site</title>
      <link>https://vanhung4499.github.io/about.html</link>
      <guid>https://vanhung4499.github.io/about.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">About this site</source>
      <description>About this site âœ¨ğŸ“’ Record the process of building this site, and share some thoughts and experiences. Introduction This is my personal blog and my personal wiki. I record some ...</description>
      <category>blog</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<div class="hint-container info">
<p class="hint-container-title">âœ¨ğŸ“’</p>
<p>Record the process of building this site, and share some thoughts and experiences.</p>
</div>
<h2>Introduction</h2>
<p>This is my personal blog and my personal wiki. I record some of my thoughts, experiences, and knowledge in the process of learning and working. I hope to share my knowledge with more people and learn from each other.</p>
<h2>Features</h2>
<p>Please refer to the <a href="wiki">Wiki</a> for details on the features of this site.</p>
<p>I write a lot of articles about technical: programming, algorithms, databases, frameworks, DevOps, side projects, system design, design-pattern, and interviews.</p>
<h2>How to build</h2>
<p>I build this site using <a href="https://v2.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer">VuePress</a>. The theme is <a href="https://theme-hope.vuejs.press" target="_blank" rel="noopener noreferrer">Hope</a>.</p>
<p>I love markdown! I use <a href="https://obsidian.md" target="_blank" rel="noopener noreferrer">Obsidian</a> to write and manage my articles by markdown.</p>
<p>Please refer to the <a href="https://github.com/vanhung4499/my-wiki" target="_blank" rel="noopener noreferrer">README.md</a> for more details on how to build this site.</p>
<h2>Deploy</h2>
<p>This site is deployed on <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a> by [GitHub Actions].</p>
]]></content:encoded>
    </item>
    <item>
      <title>Database</title>
      <link>https://vanhung4499.github.io/database/</link>
      <guid>https://vanhung4499.github.io/database/</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Database</source>
      <category>database</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
    </item>
    <item>
      <title>DevOps</title>
      <link>https://vanhung4499.github.io/devops/</link>
      <guid>https://vanhung4499.github.io/devops/</guid>
      <source url="https://vanhung4499.github.io/rss.xml">DevOps</source>
      <category>devops</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
    </item>
    <item>
      <title>DSA</title>
      <link>https://vanhung4499.github.io/dsa/</link>
      <guid>https://vanhung4499.github.io/dsa/</guid>
      <source url="https://vanhung4499.github.io/rss.xml">DSA</source>
      <description>Data Structures and Algorithms Info Pháº§n nÃ y hÆ°á»›ng dáº«n lÃ m quen vÃ  thá»±c hÃ nh vá»›i cáº¥u trÃºc dá»¯ liá»‡u vÃ  giáº£i thuáº­t phá»¥c vá»¥ cho vÃ²ng coding interview. Giáº£i quyáº¿t cÃ¡c váº¥n Ä‘á» trÃªn Lee...</description>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<div class="hint-container info">
<p class="hint-container-title">Info</p>
<ul>
<li>Pháº§n nÃ y hÆ°á»›ng dáº«n lÃ m quen vÃ  thá»±c hÃ nh vá»›i cáº¥u trÃºc dá»¯ liá»‡u vÃ  giáº£i thuáº­t phá»¥c vá»¥ cho vÃ²ng coding interview.</li>
<li>Giáº£i quyáº¿t cÃ¡c váº¥n Ä‘á» trÃªn Leetcode!</li>
<li>Tháº­t sá»± ráº¥t khÃ³ Ä‘á»ƒ tÃ¡ch biá»‡t Data Structure vÃ  Algorithm, nÃªn tÃ´i sáº½ viáº¿t lá»“ng ghÃ©p giá»¯a chÃºng vÃ o cÃ¡c chá»§ Ä‘á» lá»›n. VÃ¬ chÃºng tháº­t sá»± lÃ  cÃ³ má»‘i liÃªn há»‡ cháº·t cháº½ vá»›i nhau!</li>
</ul>
</div>
<div class="hint-container info">
<p class="hint-container-title">Info</p>
<p>Python lÃ  ngÃ´n ngá»¯ chÃ­nh mÃ  tÃ´i sá»­ dá»¥ng trong pháº§n nÃ y vÃ¬ nÃ³ dá»… Ä‘á»c, dá»… viáº¿t vÃ  dá»… hiá»ƒu.</p>
</div>
<h2>Introduction</h2>
<blockquote>
<p>Giá»›i thiá»‡u vá» cáº¥u trÃºc dá»¯ liá»‡u vÃ  giáº£i thuáº­t.</p>
</blockquote>
<ul>
<li><a href="./intro/introduction">Introduction to Data Structures and Algorithms</a></li>
<li><a href="/intro/complexity">Algorithm Complexity</a></li>
</ul>
<h2>Data Structures</h2>
<blockquote>
<p>Cáº¥u trÃºc dá»¯ liá»‡u lÃ  cÃ¡ch tá»• chá»©c, lÆ°u trá»¯ vÃ  quáº£n lÃ½ dá»¯ liá»‡u má»™t cÃ¡ch hiá»‡u quáº£.</p>
</blockquote>
<ul>
<li><a href="/ds/" target="_blank">Data Structures</a></li>
</ul>
<h2>Algorithms</h2>
<blockquote>
<p>Giáº£i thuáº­t lÃ  má»™t táº­p há»£p cÃ¡c hÆ°á»›ng dáº«n Ä‘á»ƒ giáº£i quyáº¿t má»™t váº¥n Ä‘á».</p>
</blockquote>
<ul>
<li><a href="/algo/" target="_blank">Alogrithms</a></li>
</ul>
<h2>LeetCode</h2>
<blockquote>
<p>Luyá»‡n táº­p giáº£i cÃ¡c bÃ i toÃ¡n trÃªn LeetCode.</p>
</blockquote>
<ul>
<li><a href="/leetcode/" target="_blank">LeetCode</a></li>
<li><a href="">LeetCode By Categories</a> Todo!</li>
<li><a href="">LeetCode Top 100</a> Todo!</li>
<li><a href="">LeetCode Top 200</a> Todo!</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Framework</title>
      <link>https://vanhung4499.github.io/framework/</link>
      <guid>https://vanhung4499.github.io/framework/</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Framework</source>
      <category>framework</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
    </item>
    <item>
      <title>Interview</title>
      <link>https://vanhung4499.github.io/interview/</link>
      <guid>https://vanhung4499.github.io/interview/</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Interview</source>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
    </item>
    <item>
      <title>Programming</title>
      <link>https://vanhung4499.github.io/programming/</link>
      <guid>https://vanhung4499.github.io/programming/</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Programming</source>
      <category>programming</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
    </item>
    <item>
      <title>Projects</title>
      <link>https://vanhung4499.github.io/project/</link>
      <guid>https://vanhung4499.github.io/project/</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Projects</source>
      <description>Projects My projects documentation.</description>
      <category>project</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<p>My projects documentation.</p>
]]></content:encoded>
    </item>
    <item>
      <title>dir template</title>
      <link>https://vanhung4499.github.io/templates/dir.html</link>
      <guid>https://vanhung4499.github.io/templates/dir.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">dir template</source>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
    </item>
    <item>
      <title>Post</title>
      <link>https://vanhung4499.github.io/templates/post.html</link>
      <guid>https://vanhung4499.github.io/templates/post.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Post</source>
      <category>any</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
    </item>
    <item>
      <title>Elastic Stack</title>
      <link>https://vanhung4499.github.io/database/elastic/</link>
      <guid>https://vanhung4499.github.io/database/elastic/</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elastic Stack</source>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
    </item>
    <item>
      <title>Filebeat Operation</title>
      <link>https://vanhung4499.github.io/database/elastic/filebeat-operation.html</link>
      <guid>https://vanhung4499.github.io/database/elastic/filebeat-operation.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Filebeat Operation</source>
      <description>Váº­n hÃ nh Filebeat Ná»n táº£ng Beats káº¿t há»£p nhiá»u trÃ¬nh thu tháº­p dá»¯ liá»‡u Ä‘Æ¡n nhiá»‡m. ChÃºng gá»­i dá»¯ liá»‡u tá»« hÃ ng trÄƒm, hÃ ng nghÃ¬n hoáº·c hÃ ng triá»‡u mÃ¡y vÃ  há»‡ thá»‘ng Ä‘áº¿n Logstash hoáº·c Ela...</description>
      <category>elastic</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>Ná»n táº£ng Beats káº¿t há»£p nhiá»u trÃ¬nh thu tháº­p dá»¯ liá»‡u Ä‘Æ¡n nhiá»‡m. ChÃºng gá»­i dá»¯ liá»‡u tá»« hÃ ng trÄƒm, hÃ ng nghÃ¬n hoáº·c hÃ ng triá»‡u mÃ¡y vÃ  há»‡ thá»‘ng Ä‘áº¿n Logstash hoáº·c Elasticsearch.</p>
<p>VÃ¬ tÃ´i chá»‰ tiáº¿p xÃºc vá»›i Filebeat, nÃªn bÃ i viáº¿t nÃ y chá»‰ giá»›i thiá»‡u vá» váº­n hÃ nh cá»§a Filebeat.</p>
</blockquote>
<h2>1. CÃ i Ä‘áº·t Filebeat</h2>
<h3>1.1. YÃªu cáº§u mÃ´i trÆ°á»ng</h3>
<blockquote>
<p>PhiÃªn báº£n: Elastic Stack 7.4</p>
</blockquote>
<h3>1.2. CÃ¡c bÆ°á»›c cÃ i Ä‘áº·t</h3>
<p>Äá»‘i vá»›i há»‡ thá»‘ng Unix / Linux, khuyáº¿n nghá»‹ sá»­ dá»¥ng cÃ¡ch cÃ i Ä‘áº·t sau Ä‘Ã¢y vÃ¬ nÃ³ khÃ¡ phá»• biáº¿n.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>wget https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-6.1.1-linux-x86_64.tar.gz</span></span>
<span class="line"><span>tar -zxf filebeat-6.1.1-linux-x86_64.tar.gz</span></span></code></pre>
</div><blockquote>
<p>Äá»ƒ biáº¿t thÃªm thÃ´ng tin, báº¡n cÃ³ thá»ƒ tham kháº£o: <a href="https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-installation.html" target="_blank" rel="noopener noreferrer">filebeat-installation</a></p>
</blockquote>
<h2>2. Cáº¥u hÃ¬nh Filebeat</h2>
<blockquote>
<p>Äáº§u tiÃªn, Ä‘iá»u cáº§n biáº¿t lÃ : <code>filebeat.yml</code> lÃ  tá»‡p cáº¥u hÃ¬nh cá»§a Filebeat. ÄÆ°á»ng dáº«n cá»§a nÃ³ cÃ³ thá»ƒ thay Ä‘á»•i tÃ¹y theo cÃ¡ch báº¡n cÃ i Ä‘áº·t.</p>
<p>Táº¥t cáº£ cÃ¡c tá»‡p cáº¥u hÃ¬nh cá»§a sáº£n pháº©m Beat Ä‘á»u dá»±a trÃªn Ä‘á»‹nh dáº¡ng <a href="http://www.yaml.org/" target="_blank" rel="noopener noreferrer">YAML</a>, vÃ  FileBeat cÅ©ng khÃ´ng ngoáº¡i lá»‡.</p>
<p>Äá»ƒ biáº¿t thÃªm vá» cáº¥u hÃ¬nh Filebeat, báº¡n cÃ³ thá»ƒ tham kháº£o: <a href="https://www.elastic.co/guide/en/beats/filebeat/current/configuring-howto-filebeat.html" target="_blank" rel="noopener noreferrer">Cáº¥u hÃ¬nh Filebeat</a></p>
<p>Äá»ƒ biáº¿t thÃªm vá» Ä‘á»‹nh dáº¡ng tá»‡p filebeat.yml, báº¡n cÃ³ thá»ƒ tham kháº£o: <a href="https://www.elastic.co/guide/en/beats/libbeat/6.1/config-file-format.html" target="_blank" rel="noopener noreferrer">Äá»‹nh dáº¡ng tá»‡p filebeat.yml</a></p>
</blockquote>
<p>VÃ­ dá»¥ vá» má»™t pháº§n cáº¥u hÃ¬nh filebeat.yml:</p>
<div class="language-yml" data-ext="yml" data-title="yml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">filebeat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  prospectors</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    - </span><span style="color:#E06C75;--shiki-dark:#E06C75">type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">log</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      paths</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        - </span><span style="color:#98C379;--shiki-dark:#98C379">/var/log/*.log</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      multiline</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        pattern</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'^['</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        match</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">after</span></span></code></pre>
</div><h3>2.1. CÃ¡c má»¥c cáº¥u hÃ¬nh quan trá»ng</h3>
<blockquote>
<p>DÆ°á»›i Ä‘Ã¢y, tÃ´i sáº½ liá»‡t kÃª cÃ¡c má»¥c cáº¥u hÃ¬nh quan trá»ng cá»§a Filebeat.</p>
<p>Náº¿u báº¡n muá»‘n tÃ¬m hiá»ƒu thÃªm vá» thÃ´ng tin cáº¥u hÃ¬nh, báº¡n cÃ³ thá»ƒ tham kháº£o:</p>
<p>Äá»ƒ biáº¿t thÃªm vá» cáº¥u hÃ¬nh Filebeat, báº¡n cÃ³ thá»ƒ tham kháº£o: <a href="https://www.elastic.co/guide/en/beats/filebeat/current/configuring-howto-filebeat.html" target="_blank" rel="noopener noreferrer">Cáº¥u hÃ¬nh Filebeat</a></p>
<p>Äá»ƒ biáº¿t thÃªm vá» Ä‘á»‹nh dáº¡ng tá»‡p filebeat.yml, báº¡n cÃ³ thá»ƒ tham kháº£o: <a href="https://www.elastic.co/guide/en/beats/libbeat/6.1/config-file-format.html" target="_blank" rel="noopener noreferrer">Äá»‹nh dáº¡ng tá»‡p filebeat.yml</a></p>
</blockquote>
<h4>2.1.1. filebeat.prospectors</h4>
<p>(TrÃ¬nh theo dÃµi tá»‡p) Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ chá»‰ Ä‘á»‹nh cÃ¡c tá»‡p cáº§n quan tÃ¢m.</p>
<p><strong>VÃ­ dá»¥</strong></p>
<div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">filebeat.prospectors</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  - </span><span style="color:#E06C75;--shiki-dark:#E06C75">type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">log</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    enabled</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    paths</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      - </span><span style="color:#98C379;--shiki-dark:#98C379">/var/log/*.log</span></span></code></pre>
</div><h4>2.1.2. output.elasticsearch</h4>
<p>Náº¿u báº¡n muá»‘n Filebeat trá»±c tiáº¿p xuáº¥t dá»¯ liá»‡u Ä‘áº¿n Elasticsearch, báº¡n cáº§n cáº¥u hÃ¬nh output.elasticsearch.</p>
<p><strong>VÃ­ dá»¥</strong></p>
<div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">output.elasticsearch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  hosts</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">'192.168.1.42:9200'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]</span></span></code></pre>
</div><h4>2.1.3. output.logstash</h4>
<p>Náº¿u báº¡n muá»‘n Filebeat xuáº¥t dá»¯ liá»‡u Ä‘áº¿n Logstash, sau Ä‘Ã³ Logstash sáº½ xuáº¥t dá»¯ liá»‡u Ä‘áº¿n Elasticsearch, báº¡n cáº§n cáº¥u hÃ¬nh output.logstash.</p>
<blockquote>
<p><strong>LÆ°u Ã½</strong></p>
<p>So vá»›i viá»‡c xuáº¥t dá»¯ liá»‡u Ä‘áº¿n Elasticsearch, tÃ´i khuyÃªn báº¡n nÃªn xuáº¥t dá»¯ liá»‡u Ä‘áº¿n Logstash.</p>
<p>Bá»Ÿi vÃ¬ khi Logstash vÃ  Filebeat lÃ m viá»‡c cÃ¹ng nhau, náº¿u Logstash báº­n xá»­ lÃ½ dá»¯ liá»‡u, nÃ³ sáº½ thÃ´ng bÃ¡o cho FileBeat lÃ m cháº­m tá»‘c Ä‘á»™ Ä‘á»c. Má»™t khi tÃ¬nh tráº¡ng táº¯c ngháº½n Ä‘Æ°á»£c giáº£i quyáº¿t, FileBeat sáº½ trá»Ÿ láº¡i tá»‘c Ä‘á»™ ban Ä‘áº§u vÃ  tiáº¿p tá»¥c truyá»n dá»¯ liá»‡u. NhÆ° váº­y, cÃ³ thá»ƒ giáº£m thiá»ƒu tÃ¬nh tráº¡ng quÃ¡ táº£i cá»§a Ä‘Æ°á»ng truyá»n.</p>
</blockquote>
<p><strong>VÃ­ dá»¥</strong></p>
<div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">output.logstash</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  hosts</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">'127.0.0.1:5044'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]</span></span></code></pre>
</div><p>NgoÃ i ra, báº¡n cÅ©ng cáº§n chá»‰ Ä‘á»‹nh plugin beats input trong tá»‡p cáº¥u hÃ¬nh cá»§a Logstash (nhÆ° logstash.conf):</p>
<div class="language-yaml line-numbers-mode" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#98C379;--shiki-dark:#98C379">input {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  beats {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    port =&gt; 5044</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> # Cá»•ng nÃ y cáº§n pháº£i giá»‘ng vá»›i cá»•ng trong filebeat.yml</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Pháº§n filter cá»§a tá»‡p nÃ y Ä‘Æ°á»£c bÃ¬nh luáº­n Ä‘á»ƒ chá»‰ ra ráº±ng nÃ³</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># lÃ  tÃ¹y chá»n.</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># filter {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">output {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  elasticsearch {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    hosts =&gt; "localhost:9200"</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    manage_template =&gt; false</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    index =&gt; "%{[@metadata][beat]}-%{[@metadata][version]}-%{+YYYY.MM.dd}"</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    document_type =&gt; "%{[@metadata][type]}"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>2.1.4. setup.kibana</h4>
<p>Náº¿u báº¡n Ä‘á»‹nh sá»­ dá»¥ng báº£ng Ä‘iá»u khiá»ƒn Kibana do Filebeat cung cáº¥p, báº¡n cáº§n cáº¥u hÃ¬nh setup.kibana.</p>
<p><strong>VÃ­ dá»¥</strong></p>
<div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">setup.kibana</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  host</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'localhost:5601'</span></span></code></pre>
</div><h4>2.1.5. setup.template.settings</h4>
<p>Trong Elasticsearch, <a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.1/indices-templates.html" target="_blank" rel="noopener noreferrer">máº«u chá»‰ má»¥c</a> Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh cÃ i Ä‘áº·t vÃ  Ã¡nh xáº¡, Ä‘á»ƒ xÃ¡c Ä‘á»‹nh cÃ¡ch phÃ¢n tÃ­ch cÃ¡c trÆ°á»ng.</p>
<p>Trong Filebeat, setup.template.settings Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ cáº¥u hÃ¬nh máº«u chá»‰ má»¥c.</p>
<p>Máº«u chá»‰ má»¥c Ä‘Æ°á»£c Filebeat khuyÃªn dÃ¹ng Ä‘Æ°á»£c cÃ i Ä‘áº·t bá»Ÿi gÃ³i pháº§n má»m Filebeat. Náº¿u báº¡n cháº¥p nháº­n cáº¥u hÃ¬nh máº·c Ä‘á»‹nh trong tá»‡p filebeat.yml, Filebeat sáº½ tá»± Ä‘á»™ng táº£i máº«u sau khi káº¿t ná»‘i thÃ nh cÃ´ng vá»›i Elasticsearch.</p>
<p>Báº¡n cÃ³ thá»ƒ táº¯t táº£i máº«u tá»± Ä‘á»™ng hoáº·c táº£i máº«u cá»§a riÃªng báº¡n báº±ng cÃ¡ch cáº¥u hÃ¬nh cÃ¡c tÃ¹y chá»n táº£i máº«u trong tá»‡p cáº¥u hÃ¬nh Filebeat. Báº¡n cÅ©ng cÃ³ thá»ƒ Ä‘áº·t cÃ¡c tÃ¹y chá»n Ä‘á»ƒ thay Ä‘á»•i tÃªn chá»‰ má»¥c vÃ  máº«u chá»‰ má»¥c.</p>
<blockquote>
<p><strong>Tham kháº£o</strong></p>
<p>Äá»ƒ biáº¿t thÃªm thÃ´ng tin, báº¡n cÃ³ thá»ƒ tham kháº£o: <a href="https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-template.html" target="_blank" rel="noopener noreferrer">filebeat-template</a></p>
<p><strong>Ghi chÃº</strong></p>
<p>Náº¿u khÃ´ng cáº§n thiáº¿t, hÃ£y sá»­ dá»¥ng máº«u chá»‰ má»¥c máº·c Ä‘á»‹nh trong tá»‡p cáº¥u hÃ¬nh Filebeat.</p>
</blockquote>
<h4>2.1.6. setup.dashboards</h4>
<p>Filebeat Ä‘i kÃ¨m vá»›i cÃ¡c báº£ng Ä‘iá»u khiá»ƒn Kibana máº«u. TrÆ°á»›c khi sá»­ dá»¥ng cÃ¡c báº£ng Ä‘iá»u khiá»ƒn, báº¡n cáº§n táº¡o máº«u chá»‰ má»¥c <code>filebeat-*</code> vÃ  táº£i cÃ¡c báº£ng Ä‘iá»u khiá»ƒn vÃ o Kibana. Äá»ƒ lÃ m Ä‘iá»u nÃ y, báº¡n cÃ³ thá»ƒ cháº¡y lá»‡nh <code>setup</code> hoáº·c cáº¥u hÃ¬nh táº£i báº£ng Ä‘iá»u khiá»ƒn trong tá»‡p <code>filebeat.yml</code>.</p>
<p>Äá»ƒ táº£i cÃ¡c báº£ng Ä‘iá»u khiá»ƒn Filebeat vÃ o Kibana, báº¡n cáº§n kÃ­ch hoáº¡t cÃ´ng táº¯c trong cáº¥u hÃ¬nh <code>filebeat.yml</code>:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>setup.dashboards.enabled: true</span></span></code></pre>
</div><blockquote>
<p><strong>Tham kháº£o</strong></p>
<p>Äá»ƒ biáº¿t thÃªm thÃ´ng tin, báº¡n cÃ³ thá»ƒ tham kháº£o: <a href="https://www.elastic.co/guide/en/beats/filebeat/current/configuration-dashboards.html" target="_blank" rel="noopener noreferrer">configuration-dashboards</a></p>
</blockquote>
<h2>3. Lá»‡nh Filebeat</h2>
<p>Filebeat cung cáº¥p má»™t loáº¡t cÃ¡c lá»‡nh Ä‘á»ƒ hoÃ n thÃ nh nhiá»u chá»©c nÄƒng khÃ¡c nhau.</p>
<p>CÃ¡ch thá»±c hiá»‡n lá»‡nh:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">./filebeat</span><span style="color:#98C379;--shiki-dark:#98C379"> COMMAND</span></span></code></pre>
</div><blockquote>
<p><strong>Tham kháº£o</strong></p>
<p>Äá»ƒ biáº¿t thÃªm thÃ´ng tin, báº¡n cÃ³ thá»ƒ tham kháº£o: <a href="https://www.elastic.co/guide/en/beats/filebeat/current/command-line-options.html" target="_blank" rel="noopener noreferrer">command-line-options</a></p>
<p><strong>Ghi chÃº</strong></p>
<p>Theo quan Ä‘iá»ƒm cÃ¡ nhÃ¢n, khÃ´ng cáº§n pháº£i náº¯m vá»¯ng táº¥t cáº£ cÃ¡c lá»‡nh dÃ²ng lá»‡nh, vÃ¬ háº§u háº¿t cÃ¡c chá»©c nÄƒng Ä‘á»u cÃ³ thá»ƒ hoÃ n thÃ nh thÃ´ng qua cáº¥u hÃ¬nh. VÃ  viá»‡c chá»‰ Ä‘á»‹nh chá»©c nÄƒng thÃ´ng qua dÃ²ng lá»‡nh yÃªu cáº§u nháº­p cÃ¹ng má»™t tham sá»‘ má»—i láº§n, khÃ´ng thuáº­n lá»£i cho viá»‡c khá»Ÿi Ä‘á»™ng cá»‘ Ä‘á»‹nh.</p>
<p>ÄÆ°Æ¡ng nhiÃªn, lá»‡nh khá»Ÿi Ä‘á»™ng quan trá»ng nháº¥t lÃ  run.</p>
<p><strong>VÃ­ dá»¥</strong> Khá»Ÿi Ä‘á»™ng báº±ng cÃ¡ch chá»‰ Ä‘á»‹nh tá»‡p cáº¥u hÃ¬nh</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">./filebeat</span><span style="color:#98C379;--shiki-dark:#98C379"> run</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -e</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -c</span><span style="color:#98C379;--shiki-dark:#98C379"> filebeat.yml</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -d</span><span style="color:#98C379;--shiki-dark:#98C379"> "publish"</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">./filebeat</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -e</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -c</span><span style="color:#98C379;--shiki-dark:#98C379"> filebeat.yml</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -d</span><span style="color:#98C379;--shiki-dark:#98C379"> "publish"</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> # run cÃ³ thá»ƒ bá» qua</span></span></code></pre>
</div></blockquote>
<h2>4. Module Filebeat</h2>
<blockquote>
<p><a href="https://www.elastic.co/cn/products/beats/filebeat" target="_blank" rel="noopener noreferrer">Filebeat</a> vÃ  <a href="https://www.elastic.co/cn/products/beats/metricbeat" target="_blank" rel="noopener noreferrer">Metricbeat</a> tÃ­ch há»£p má»™t loáº¡t cÃ¡c module Ä‘á»ƒ Ä‘Æ¡n giáº£n hÃ³a quÃ¡ trÃ¬nh thu tháº­p, phÃ¢n tÃ­ch vÃ  hiá»ƒn thá»‹ cÃ¡c Ä‘á»‹nh dáº¡ng nháº­t kÃ½ thÃ´ng thÆ°á»ng (nhÆ° NGINX, Apache hoáº·c cÃ¡c chá»‰ sá»‘ há»‡ thá»‘ng nhÆ° Redis hoáº·c Docker).</p>
</blockquote>
<ul>
<li>Cáº¥u hÃ¬nh elasticsearch vÃ  kibana</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>output.elasticsearch:</span></span>
<span class="line"><span>  hosts: ["myEShost:9200"]</span></span>
<span class="line"><span>  username: "elastic"</span></span>
<span class="line"><span>  password: "elastic"</span></span>
<span class="line"><span>setup.kibana:</span></span>
<span class="line"><span>  host: "mykibanahost:5601"</span></span>
<span class="line"><span>  username: "elastic"</span></span>
<span class="line"><span>  password: "elastic</span></span></code></pre>
</div><blockquote>
<p>username vÃ  password lÃ  tÃ¹y chá»n, náº¿u khÃ´ng cáº§n xÃ¡c thá»±c thÃ¬ khÃ´ng cáº§n Ä‘iá»n.</p>
</blockquote>
<ul>
<li>Khá»Ÿi táº¡o mÃ´i trÆ°á»ng</li>
</ul>
<p>Cháº¡y lá»‡nh dÆ°á»›i Ä‘Ã¢y, filebeat sáº½ táº£i máº«u chá»‰ má»¥c Ä‘Æ°á»£c khuyáº¿n nghá»‹.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>./filebeat setup -e</span></span></code></pre>
</div><ul>
<li>Chá»‰ Ä‘á»‹nh module</li>
</ul>
<p>Cháº¡y lá»‡nh dÆ°á»›i Ä‘Ã¢y Ä‘á»ƒ chá»‰ Ä‘á»‹nh cÃ¡c module báº¡n muá»‘n táº£i.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>./filebeat -e --modules system,nginx,mysql</span></span></code></pre>
</div><blockquote>
<p>Äá»ƒ biáº¿t thÃªm thÃ´ng tin, báº¡n cÃ³ thá»ƒ tham kháº£o:</p>
<ul>
<li><a href="https://www.elastic.co/guide/en/beats/filebeat/current/configuration-filebeat-modules.html" target="_blank" rel="noopener noreferrer">Cáº¥u hÃ¬nh module filebeat</a></li>
<li><a href="https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-modules.html" target="_blank" rel="noopener noreferrer">Module há»— trá»£ filebeat</a></li>
</ul>
</blockquote>
<h2>5. TÃ i liá»‡u tham kháº£o</h2>
<ul>
<li><a href="https://www.elastic.co/cn/products/beats" target="_blank" rel="noopener noreferrer">Trang chá»§ Beats</a></li>
<li><a href="https://github.com/elastic/beats" target="_blank" rel="noopener noreferrer">Beats Github</a></li>
<li><a href="https://www.elastic.co/guide/en/beats/libbeat/current/index.html" target="_blank" rel="noopener noreferrer">TÃ i liá»‡u chÃ­nh thá»©c Beats</a></li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Filebeat</title>
      <link>https://vanhung4499.github.io/database/elastic/filebeat.html</link>
      <guid>https://vanhung4499.github.io/database/elastic/filebeat.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Filebeat</source>
      <description>Elastic Stack vÃ  Filebeat Giá»›i thiá»‡u Beats lÃ  cÃ¡c Ä‘áº¡i lÃ½ truyá»n dá»¯ liá»‡u Ä‘Æ°á»£c cÃ i Ä‘áº·t trÃªn mÃ¡y chá»§. Beats cÃ³ thá»ƒ truyá»n dá»¯ liá»‡u trá»±c tiáº¿p Ä‘áº¿n Elasticsearch hoáº·c Ä‘áº¿n Logstash. img...</description>
      <category>elastic</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Giá»›i thiá»‡u</h2>
<p>Beats lÃ  cÃ¡c Ä‘áº¡i lÃ½ truyá»n dá»¯ liá»‡u Ä‘Æ°á»£c cÃ i Ä‘áº·t trÃªn mÃ¡y chá»§.</p>
<p>Beats cÃ³ thá»ƒ truyá»n dá»¯ liá»‡u trá»±c tiáº¿p Ä‘áº¿n Elasticsearch hoáº·c Ä‘áº¿n Logstash.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/beats-platform.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>Beats cÃ³ nhiá»u loáº¡i, báº¡n cÃ³ thá»ƒ chá»n loáº¡i phÃ¹ há»£p vá»›i nhu cáº§u thá»±c táº¿ cá»§a báº¡n.</p>
<p>CÃ¡c loáº¡i phá»• biáº¿n bao gá»“m:</p>
<ul>
<li><strong>Packetbeat:</strong>&nbsp;TrÃ¬nh phÃ¢n tÃ­ch gÃ³i dá»¯ liá»‡u máº¡ng, cung cáº¥p thÃ´ng tin vá» cÃ¡c giao dá»‹ch Ä‘Æ°á»£c trao Ä‘á»•i giá»¯a cÃ¡c mÃ¡y chá»§ á»©ng dá»¥ng cá»§a báº¡n.</li>
<li><strong>Filebeat:</strong>&nbsp;Gá»­i cÃ¡c tá»‡p nháº­t kÃ½ tá»« mÃ¡y chá»§ cá»§a báº¡n.</li>
<li><strong>Metricbeat:</strong>&nbsp;LÃ  má»™t Ä‘áº¡i lÃ½ giÃ¡m sÃ¡t mÃ¡y chá»§, thu tháº­p Ä‘á»‹nh ká»³ cÃ¡c chá»‰ sá»‘ tá»« há»‡ Ä‘iá»u hÃ nh vÃ  dá»‹ch vá»¥ Ä‘ang cháº¡y trÃªn mÃ¡y chá»§.</li>
<li><strong>Winlogbeat:</strong>&nbsp;Cung cáº¥p nháº­t kÃ½ sá»± kiá»‡n Windows.</li>
</ul>
<blockquote>
<p><strong>Tham kháº£o</strong></p>
<p>CÃ¡c loáº¡i Beats khÃ¡c cÃ³ thá»ƒ tham kháº£o táº¡i:&nbsp;<a href="https://www.elastic.co/guide/en/beats/libbeat/current/community-beats.html" target="_blank" rel="noopener noreferrer">community-beats</a></p>
<p><strong>ChÃº Ã½</strong></p>
<p>VÃ¬ tÃ´i chá»‰ sá»­ dá»¥ng FileBeat trong cÃ´ng viá»‡c, nÃªn ná»™i dung sau chá»‰ giá»›i thiá»‡u vá» FileBeat.</p>
</blockquote>
<h3>FileBeat cÃ³ tÃ¡c dá»¥ng gÃ¬?</h3>
<p>So vá»›i Logstash, FileBeat nháº¹ nhÃ ng hÆ¡n.</p>
<p>Trong báº¥t ká»³ mÃ´i trÆ°á»ng nÃ o, á»©ng dá»¥ng Ä‘á»u cÃ³ kháº£ nÄƒng bá»‹ táº¯t. Filebeat Ä‘á»c vÃ  chuyá»ƒn tiáº¿p cÃ¡c dÃ²ng nháº­t kÃ½, náº¿u bá»‹ giÃ¡n Ä‘oáº¡n, nÃ³ sáº½ nhá»› táº¥t cáº£ cÃ¡c sá»± kiá»‡n á»Ÿ vá»‹ trÃ­ khi tráº¡ng thÃ¡i trá»±c tuyáº¿n Ä‘Æ°á»£c khÃ´i phá»¥c.</p>
<p>Filebeat cÃ³ cÃ¡c mÃ´-Ä‘un ná»™i bá»™ (auditd, Apache, Nginx, System vÃ  MySQL) Ä‘á»ƒ Ä‘Æ¡n giáº£n hÃ³a viá»‡c thu tháº­p, phÃ¢n tÃ­ch vÃ  trá»±c quan hÃ³a Ä‘á»‹nh dáº¡ng nháº­t kÃ½ phá»• biáº¿n.</p>
<p>FileBeat khÃ´ng lÃ m quÃ¡ táº£i á»‘ng dáº«n cá»§a báº¡n. Náº¿u FileBeat truyá»n dá»¯ liá»‡u Ä‘áº¿n Logstash, khi Logstash báº­n xá»­ lÃ½ dá»¯ liá»‡u, nÃ³ sáº½ thÃ´ng bÃ¡o cho FileBeat lÃ m cháº­m tá»‘c Ä‘á»™ Ä‘á»c. Khi tÃ¬nh tráº¡ng táº¯c ngháº½n Ä‘Æ°á»£c giáº£i quyáº¿t, FileBeat sáº½ trá»Ÿ láº¡i tá»‘c Ä‘á»™ ban Ä‘áº§u vÃ  tiáº¿p tá»¥c truyá»n dá»¯ liá»‡u.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/filebeat.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h2>CÃ i Ä‘áº·t</h2>
<p>Äá»‘i vá»›i há»‡ thá»‘ng Unix / Linux, báº¡n nÃªn cÃ i Ä‘áº·t theo cÃ¡ch sau vÃ¬ nÃ³ khÃ¡ phá»• biáº¿n.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">wget</span><span style="color:#98C379;--shiki-dark:#98C379"> https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-6.1.1-linux-x86_64.tar.gz</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">tar</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -zxf</span><span style="color:#98C379;--shiki-dark:#98C379"> filebeat-6.1.1-linux-x86_64.tar.gz</span></span></code></pre>
</div><blockquote>
<p><strong>Tham kháº£o</strong></p>
<p>Äá»ƒ biáº¿t thÃªm thÃ´ng tin, báº¡n cÃ³ thá»ƒ tham kháº£o:&nbsp;<a href="https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-installation.html" target="_blank" rel="noopener noreferrer">filebeat-installation</a></p>
</blockquote>
<h2>Cáº¥u hÃ¬nh</h2>
<h3>Tá»‡p cáº¥u hÃ¬nh</h3>
<p>Äáº§u tiÃªn, Ä‘iá»u cáº§n biáº¿t lÃ : <code>filebeat.yml</code> lÃ  tá»‡p cáº¥u hÃ¬nh cá»§a Filebeat. ÄÆ°á»ng dáº«n cá»§a tá»‡p cáº¥u hÃ¬nh cÃ³ thá»ƒ thay Ä‘á»•i tÃ¹y thuá»™c vÃ o cÃ¡ch báº¡n cÃ i Ä‘áº·t.</p>
<p>Táº¥t cáº£ cÃ¡c sáº£n pháº©m trong loáº¡t Beat Ä‘á»u dá»±a trÃªn Ä‘á»‹nh dáº¡ng cáº¥u hÃ¬nh <a href="http://www.yaml.org/" target="_blank" rel="noopener noreferrer">YAML</a>, vÃ  FileBeat cÅ©ng khÃ´ng pháº£i lÃ  ngoáº¡i lá»‡.</p>
<p>VÃ­ dá»¥ vá» má»™t pháº§n cáº¥u hÃ¬nh filebeat.yml:</p>
<div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">filebeat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  prospectors</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    - </span><span style="color:#E06C75;--shiki-dark:#E06C75">type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">log</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      paths</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        - </span><span style="color:#98C379;--shiki-dark:#98C379">/var/log/*.log</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      multiline</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        pattern</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'^['</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        match</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">after</span></span></code></pre>
</div><blockquote>
<p><strong>Tham kháº£o</strong></p>
<p>Äá»ƒ biáº¿t thÃªm vá» cáº¥u hÃ¬nh Filebeat, báº¡n cÃ³ thá»ƒ tham kháº£o: <a href="https://www.elastic.co/guide/en/beats/filebeat/current/configuring-howto-filebeat.html" target="_blank" rel="noopener noreferrer">Cáº¥u hÃ¬nh Filebeat</a></p>
<p>Äá»ƒ biáº¿t thÃªm vá» Ä‘á»‹nh dáº¡ng tá»‡p filebeat.yml, báº¡n cÃ³ thá»ƒ tham kháº£o: <a href="https://www.elastic.co/guide/en/beats/libbeat/6.1/config-file-format.html" target="_blank" rel="noopener noreferrer">Äá»‹nh dáº¡ng tá»‡p filebeat.yml</a></p>
</blockquote>
<h3>CÃ¡c má»¥c cáº¥u hÃ¬nh quan trá»ng</h3>
<h4>filebeat.prospectors</h4>
<p>(TrÃ¬nh theo dÃµi tá»‡p) Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ chá»‰ Ä‘á»‹nh cÃ¡c tá»‡p cáº§n quan tÃ¢m.</p>
<p><strong>VÃ­ dá»¥</strong></p>
<div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">filebeat.prospectors</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  - </span><span style="color:#E06C75;--shiki-dark:#E06C75">type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">log</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    enabled</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    paths</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      - </span><span style="color:#98C379;--shiki-dark:#98C379">/var/log/*.log</span></span></code></pre>
</div><h4>output.elasticsearch</h4>
<p>Náº¿u báº¡n muá»‘n Filebeat trá»±c tiáº¿p xuáº¥t dá»¯ liá»‡u Ä‘áº¿n Elasticsearch, báº¡n cáº§n cáº¥u hÃ¬nh output.elasticsearch.</p>
<p><strong>VÃ­ dá»¥</strong></p>
<div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">output.elasticsearch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  hosts</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">'192.168.1.42:9200'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]</span></span></code></pre>
</div><h4>output.logstash</h4>
<p>Náº¿u báº¡n muá»‘n Filebeat xuáº¥t dá»¯ liá»‡u Ä‘áº¿n Logstash, sau Ä‘Ã³ Logstash sáº½ xuáº¥t dá»¯ liá»‡u Ä‘áº¿n Elasticsearch, báº¡n cáº§n cáº¥u hÃ¬nh output.logstash.</p>
<blockquote>
<p><strong>LÆ°u Ã½</strong></p>
<p>So vá»›i xuáº¥t dá»¯ liá»‡u Ä‘áº¿n Elasticsearch, tÃ´i khuyÃªn báº¡n nÃªn xuáº¥t dá»¯ liá»‡u Ä‘áº¿n Logstash.</p>
<p>Bá»Ÿi vÃ¬ khi Logstash vÃ  Filebeat lÃ m viá»‡c cÃ¹ng nhau, náº¿u Logstash báº­n xá»­ lÃ½ dá»¯ liá»‡u, nÃ³ sáº½ thÃ´ng bÃ¡o cho FileBeat lÃ m cháº­m tá»‘c Ä‘á»™ Ä‘á»c. Má»™t khi tÃ¬nh tráº¡ng táº¯c ngháº½n Ä‘Æ°á»£c giáº£i quyáº¿t, FileBeat sáº½ trá»Ÿ láº¡i tá»‘c Ä‘á»™ ban Ä‘áº§u vÃ  tiáº¿p tá»¥c truyá»n dá»¯ liá»‡u. NhÆ° váº­y, cÃ³ thá»ƒ giáº£m bá»›t tÃ¬nh tráº¡ng quÃ¡ táº£i á»‘ng dáº«n.</p>
</blockquote>
<p><strong>VÃ­ dá»¥</strong></p>
<div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">output.logstash</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  hosts</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">'127.0.0.1:5044'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]</span></span></code></pre>
</div><p>NgoÃ i ra, báº¡n cÅ©ng cáº§n chá»‰ Ä‘á»‹nh plugin Ä‘áº§u vÃ o beats trong tá»‡p cáº¥u hÃ¬nh Logstash (nhÆ° logstash.conf):</p>
<div class="language-yaml line-numbers-mode" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#98C379;--shiki-dark:#98C379">input {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  beats {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    port =&gt; 5044</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> # Cá»•ng nÃ y cáº§n pháº£i giá»‘ng vá»›i cá»•ng trong filebeat.yml</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Pháº§n filter cá»§a tá»‡p nÃ y Ä‘Æ°á»£c bÃ¬nh luáº­n Ä‘á»ƒ chá»‰ ra ráº±ng nÃ³ lÃ </span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># tÃ¹y chá»n.</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># filter {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">output {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  elasticsearch {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    hosts =&gt; "localhost:9200"</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    manage_template =&gt; false</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    index =&gt; "%{[@metadata][beat]}-%{[@metadata][version]}-%{+YYYY.MM.dd}"</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    document_type =&gt; "%{[@metadata][type]}"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>setup.kibana</h4>
<p>Náº¿u báº¡n dá»± Ä‘á»‹nh sá»­ dá»¥ng báº£ng Ä‘iá»u khiá»ƒn Kibana do Filebeat cung cáº¥p, báº¡n cáº§n cáº¥u hÃ¬nh setup.kibana.</p>
<p><strong>VÃ­ dá»¥</strong></p>
<div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">setup.kibana</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  host</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'localhost:5601'</span></span></code></pre>
</div><h4>setup.template.settings</h4>
<p>Trong Elasticsearch, <a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.1/indices-templates.html" target="_blank" rel="noopener noreferrer">máº«u chá»‰ má»¥c</a> Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘á»‹nh nghÄ©a cÃ i Ä‘áº·t vÃ  Ã¡nh xáº¡, Ä‘á»ƒ xÃ¡c Ä‘á»‹nh cÃ¡ch phÃ¢n tÃ­ch cÃ¡c trÆ°á»ng.</p>
<p>Trong Filebeat, setup.template.settings Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ cáº¥u hÃ¬nh máº«u chá»‰ má»¥c.</p>
<p>Filebeat gá»£i Ã½ máº«u chá»‰ má»¥c Ä‘Æ°á»£c cÃ i Ä‘áº·t bá»Ÿi gÃ³i pháº§n má»m Filebeat. Náº¿u báº¡n cháº¥p nháº­n cáº¥u hÃ¬nh máº·c Ä‘á»‹nh trong tá»‡p cáº¥u hÃ¬nh filebeat.yml, Filebeat tá»± Ä‘á»™ng táº£i máº«u sau khi káº¿t ná»‘i thÃ nh cÃ´ng vá»›i Elasticsearch.</p>
<p>Báº¡n cÃ³ thá»ƒ vÃ´ hiá»‡u hÃ³a táº£i máº«u tá»± Ä‘á»™ng hoáº·c táº£i máº«u cá»§a riÃªng báº¡n báº±ng cÃ¡ch cáº¥u hÃ¬nh cÃ¡c tÃ¹y chá»n táº£i máº«u trong tá»‡p cáº¥u hÃ¬nh Filebeat. Báº¡n cÅ©ng cÃ³ thá»ƒ Ä‘áº·t tÃ¹y chá»n Ä‘á»ƒ thay Ä‘á»•i tÃªn chá»‰ má»¥c vÃ  máº«u chá»‰ má»¥c.</p>
<blockquote>
<p><strong>Tham kháº£o</strong></p>
<p>Äá»ƒ biáº¿t thÃªm thÃ´ng tin, báº¡n cÃ³ thá»ƒ tham kháº£o: <a href="https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-template.html" target="_blank" rel="noopener noreferrer">filebeat-template</a></p>
<p><strong>ChÃº Ã½</strong></p>
<p>Náº¿u khÃ´ng cáº§n thiáº¿t, hÃ£y sá»­ dá»¥ng máº«u chá»‰ má»¥c máº·c Ä‘á»‹nh trong tá»‡p cáº¥u hÃ¬nh Filebeat.</p>
</blockquote>
<h4>setup.dashboards</h4>
<p>Filebeat Ä‘i kÃ¨m vá»›i cÃ¡c báº£ng Ä‘iá»u khiá»ƒn Kibana máº«u. TrÆ°á»›c khi sá»­ dá»¥ng báº£ng Ä‘iá»u khiá»ƒn, báº¡n cáº§n táº¡o máº«u chá»‰ má»¥c <code>filebeat-*</code> vÃ  táº£i báº£ng Ä‘iá»u khiá»ƒn vÃ o Kibana. Äá»ƒ lÃ m Ä‘iá»u nÃ y, báº¡n cÃ³ thá»ƒ cháº¡y lá»‡nh <code>setup</code> hoáº·c cáº¥u hÃ¬nh táº£i báº£ng Ä‘iá»u khiá»ƒn trong tá»‡p <code>filebeat.yml</code>.</p>
<p>Äá»ƒ táº£i báº£ng Ä‘iá»u khiá»ƒn Filebeat vÃ o Kibana, báº¡n cáº§n báº­t chá»©c nÄƒng trong cáº¥u hÃ¬nh <code>filebeat.yml</code>:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>setup.dashboards.enabled: true</span></span></code></pre>
</div><blockquote>
<p><strong>Tham kháº£o</strong></p>
<p>Äá»ƒ biáº¿t thÃªm thÃ´ng tin, báº¡n cÃ³ thá»ƒ tham kháº£o: <a href="https://www.elastic.co/guide/en/beats/filebeat/current/configuration-dashboards.html" target="_blank" rel="noopener noreferrer">configuration-dashboards</a></p>
</blockquote>
<h2>Lá»‡nh</h2>
<p>Filebeat cung cáº¥p má»™t loáº¡t cÃ¡c lá»‡nh Ä‘á»ƒ hoÃ n thÃ nh nhiá»u chá»©c nÄƒng.</p>
<p>CÃ¡ch thá»±c hiá»‡n lá»‡nh:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">./filebeat</span><span style="color:#98C379;--shiki-dark:#98C379"> COMMAND</span></span></code></pre>
</div><blockquote>
<p><strong>Tham kháº£o</strong></p>
<p>Äá»ƒ biáº¿t thÃªm thÃ´ng tin, báº¡n cÃ³ thá»ƒ tham kháº£o: <a href="https://www.elastic.co/guide/en/beats/filebeat/current/command-line-options.html" target="_blank" rel="noopener noreferrer">command-line-options</a></p>
<p><strong>ChÃº Ã½</strong></p>
<p>Theo quan Ä‘iá»ƒm cÃ¡ nhÃ¢n, khÃ´ng cáº§n pháº£i náº¯m báº¯t táº¥t cáº£ cÃ¡c lá»‡nh, bá»Ÿi vÃ¬ háº§u háº¿t cÃ¡c chá»©c nÄƒng Ä‘á»u cÃ³ thá»ƒ Ä‘Æ°á»£c hoÃ n thÃ nh thÃ´ng qua cáº¥u hÃ¬nh. HÆ¡n ná»¯a, viá»‡c chá»‰ Ä‘á»‹nh chá»©c nÄƒng thÃ´ng qua dÃ²ng lá»‡nh Ä‘Ã²i há»i pháº£i nháº­p cÃ¹ng má»™t tham sá»‘ má»—i láº§n, Ä‘iá»u nÃ y khÃ´ng thuáº­n lá»£i cho viá»‡c khá»Ÿi Ä‘á»™ng cá»‘ Ä‘á»‹nh.</p>
<p>Quan trá»ng nháº¥t, táº¥t nhiÃªn, lÃ  lá»‡nh khá»Ÿi Ä‘á»™ng run.</p>
<p><strong>VÃ­ dá»¥</strong> Khá»Ÿi Ä‘á»™ng báº±ng cÃ¡ch chá»‰ Ä‘á»‹nh tá»‡p cáº¥u hÃ¬nh</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">./filebeat</span><span style="color:#98C379;--shiki-dark:#98C379"> run</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -e</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -c</span><span style="color:#98C379;--shiki-dark:#98C379"> filebeat.yml</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -d</span><span style="color:#98C379;--shiki-dark:#98C379"> "publish"</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">./filebeat</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -e</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -c</span><span style="color:#98C379;--shiki-dark:#98C379"> filebeat.yml</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -d</span><span style="color:#98C379;--shiki-dark:#98C379"> "publish"</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> # run cÃ³ thá»ƒ bá» qua</span></span></code></pre>
</div></blockquote>
<h2>Module</h2>
<p>Filebeat cung cáº¥p má»™t bá»™ module Ä‘Æ°á»£c xÃ¢y dá»±ng sáºµn, cho phÃ©p báº¡n triá»ƒn khai giáº£i phÃ¡p giÃ¡m sÃ¡t log nhanh chÃ³ng vÃ  Ä‘i kÃ¨m vá»›i cÃ¡c báº£ng Ä‘iá»u khiá»ƒn máº«u vÃ  trá»±c quan hÃ³a dá»¯ liá»‡u. Nhá»¯ng module nÃ y há»— trá»£ cÃ¡c Ä‘á»‹nh dáº¡ng log phá»• biáº¿n nhÆ° Nginx, Apache2 vÃ  MySQL, v.v.</p>
<h3>CÃ¡c bÆ°á»›c Ä‘á»ƒ cháº¡y module</h3>
<ul>
<li>Cáº¥u hÃ¬nh elasticsearch vÃ  kibana</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>output.elasticsearch:</span></span>
<span class="line"><span>  hosts: ["myEShost:9200"]</span></span>
<span class="line"><span>  username: "elastic"</span></span>
<span class="line"><span>  password: "elastic"</span></span>
<span class="line"><span>setup.kibana:</span></span>
<span class="line"><span>  host: "mykibanahost:5601"</span></span>
<span class="line"><span>  username: "elastic"</span></span>
<span class="line"><span>  password: "elastic</span></span></code></pre>
</div><blockquote>
<p>username vÃ  password lÃ  tÃ¹y chá»n, náº¿u khÃ´ng cáº§n xÃ¡c thá»±c thÃ¬ khÃ´ng cáº§n Ä‘iá»n.</p>
</blockquote>
<ul>
<li>Khá»Ÿi táº¡o mÃ´i trÆ°á»ng</li>
</ul>
<p>Cháº¡y lá»‡nh dÆ°á»›i Ä‘Ã¢y, Filebeat sáº½ táº£i máº«u chá»‰ má»¥c Ä‘Æ°á»£c gá»£i Ã½.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>./filebeat setup -e</span></span></code></pre>
</div><ul>
<li>Chá»‰ Ä‘á»‹nh module</li>
</ul>
<p>Cháº¡y lá»‡nh dÆ°á»›i Ä‘Ã¢y, chá»‰ Ä‘á»‹nh module báº¡n muá»‘n táº£i.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>./filebeat -e --modules system,nginx,mysql</span></span></code></pre>
</div><blockquote>
<p><strong>Tham kháº£o</strong></p>
<p>Äá»ƒ biáº¿t thÃªm thÃ´ng tin, báº¡n cÃ³ thá»ƒ tham kháº£o: <a href="https://www.elastic.co/guide/en/beats/filebeat/current/configuration-filebeat-modules.html" target="_blank" rel="noopener noreferrer">Cáº¥u hÃ¬nh module Filebeat</a> | <a href="https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-modules.html" target="_blank" rel="noopener noreferrer">Module Ä‘Æ°á»£c há»— trá»£ bá»Ÿi Filebeat</a></p>
</blockquote>
<h2>NguyÃªn lÃ½</h2>
<p>Filebeat cÃ³ hai thÃ nh pháº§n chÃ­nh:</p>
<p>harvester: chá»‹u trÃ¡ch nhiá»‡m Ä‘á»c ná»™i dung cá»§a má»™t tá»‡p. NÃ³ sáº½ Ä‘á»c tá»«ng dÃ²ng ná»™i dung cá»§a tá»‡p vÃ  gá»­i ná»™i dung Ä‘áº¿n Ä‘Ã­ch xuáº¥t.</p>
<p>prospector: chá»‹u trÃ¡ch nhiá»‡m quáº£n lÃ½ harvester vÃ  tÃ¬m táº¥t cáº£ cÃ¡c nguá»“n tá»‡p cáº§n Ä‘á»c. VÃ­ dá»¥, náº¿u kiá»ƒu lÃ  log, prospector sáº½ duyá»‡t qua táº¥t cáº£ cÃ¡c tá»‡p phÃ¹ há»£p vá»›i yÃªu cáº§u trong Ä‘Æ°á»ng dáº«n Ä‘Ã£ chá»‰ Ä‘á»‹nh.</p>
<div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">filebeat.prospectors</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  - </span><span style="color:#E06C75;--shiki-dark:#E06C75">type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">log</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    paths</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      - </span><span style="color:#98C379;--shiki-dark:#98C379">/var/log/*.log</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      - </span><span style="color:#98C379;--shiki-dark:#98C379">/var/path2/*.log</span></span></code></pre>
</div><p>Filebeat giá»¯ tráº¡ng thÃ¡i cá»§a má»—i tá»‡p vÃ  thÆ°á»ng xuyÃªn lÃ m má»›i tráº¡ng thÃ¡i Ä‘Ä©a trong tá»‡p Ä‘Äƒng kÃ½. Tráº¡ng thÃ¡i Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ nhá»› vá»‹ trÃ­ cuá»‘i cÃ¹ng mÃ  harvester Ä‘ang Ä‘á»c vÃ  Ä‘áº£m báº£o táº¥t cáº£ cÃ¡c dÃ²ng log Ä‘Æ°á»£c gá»­i Ä‘i.</p>
<p>Filebeat lÆ°u tráº¡ng thÃ¡i gá»­i cá»§a má»—i sá»± kiá»‡n trong tá»‡p Ä‘Äƒng kÃ½. VÃ¬ váº­y, nÃ³ cÃ³ thá»ƒ Ä‘áº£m báº£o ráº±ng sá»± kiá»‡n Ä‘Æ°á»£c gá»­i Ã­t nháº¥t má»™t láº§n Ä‘áº¿n Ä‘áº§u ra Ä‘Æ°á»£c cáº¥u hÃ¬nh, khÃ´ng cÃ³ dá»¯ liá»‡u bá»‹ máº¥t.</p>
<h2>TÃ i liá»‡u</h2>
<p><a href="https://www.elastic.co/guide/en/beats/libbeat/current/index.html" target="_blank" rel="noopener noreferrer">TÃ i liá»‡u chÃ­nh thá»©c cá»§a Beats</a></p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/beats-platform.png" type="image/png"/>
    </item>
    <item>
      <title>Elastic Stack Kabina</title>
      <link>https://vanhung4499.github.io/database/elastic/kabina.html</link>
      <guid>https://vanhung4499.github.io/database/elastic/kabina.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elastic Stack Kabina</source>
      <description>Elastic Stack: Kibana Discover Báº±ng cÃ¡ch nháº¥p vÃ o Discover trong thanh Ä‘iá»u hÆ°á»›ng bÃªn, báº¡n cÃ³ thá»ƒ xem chá»©c nÄƒng truy váº¥n dá»¯ liá»‡u cá»§a Kibana. imgimg Trong thanh tÃ¬m kiáº¿m, báº¡n cÃ³ ...</description>
      <category>elastic</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Discover</h2>
<p>Báº±ng cÃ¡ch nháº¥p vÃ o&nbsp;<code>Discover</code>&nbsp;trong thanh Ä‘iá»u hÆ°á»›ng bÃªn, báº¡n cÃ³ thá»ƒ xem chá»©c nÄƒng truy váº¥n dá»¯ liá»‡u cá»§a&nbsp;<code>Kibana</code>.</p>
<figure><img src="https://www.elastic.co/guide/en/kibana/current/images/tutorial-discover.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>Trong thanh tÃ¬m kiáº¿m, báº¡n cÃ³ thá»ƒ nháº­p Ä‘iá»u kiá»‡n truy váº¥n Elasticsearch Ä‘á»ƒ tÃ¬m kiáº¿m dá»¯ liá»‡u cá»§a mÃ¬nh. Báº¡n cÃ³ thá»ƒ duyá»‡t káº¿t quáº£ trÃªn trang&nbsp;<code>Discover</code>&nbsp;vÃ  táº¡o cÃ¡c biá»ƒu Ä‘á»“ trá»±c quan tá»« cÃ¡c tÃ¬m kiáº¿m Ä‘Ã£ lÆ°u trÃªn trang&nbsp;<code>Visualize</code>.</p>
<p>MÃ´ hÃ¬nh chá»‰ má»¥c hiá»‡n táº¡i Ä‘Æ°á»£c hiá»ƒn thá»‹ dÆ°á»›i thanh truy váº¥n. MÃ´ hÃ¬nh chá»‰ má»¥c xÃ¡c Ä‘á»‹nh chá»‰ má»¥c nÃ o Ä‘Æ°á»£c tÃ¬m kiáº¿m khi gá»­i truy váº¥n. Äá»ƒ tÃ¬m kiáº¿m má»™t táº­p há»£p chá»‰ má»¥c khÃ¡c nhau, chá»n má»™t mÃ´ hÃ¬nh khÃ¡c tá»« menu tháº£ xuá»‘ng. Äá»ƒ thÃªm mÃ´ hÃ¬nh chá»‰ má»¥c (index pattern), hÃ£y chuyá»ƒn Ä‘áº¿n&nbsp;<code>Management/Kibana/Index Patterns</code>&nbsp;vÃ  nháº¥p vÃ o&nbsp;<code>Add New</code>.</p>
<p>Báº¡n cÃ³ thá»ƒ xÃ¢y dá»±ng tÃ¬m kiáº¿m báº±ng cÃ¡ch sá»­ dá»¥ng tÃªn trÆ°á»ng vÃ  giÃ¡ trá»‹ báº¡n quan tÃ¢m. Äá»‘i vá»›i cÃ¡c trÆ°á»ng sá»‘, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c toÃ¡n tá»­ so sÃ¡nh nhÆ° lá»›n hÆ¡n (&gt;), nhá» hÆ¡n (&lt;) hoáº·c báº±ng (=). Báº¡n cÃ³ thá»ƒ liÃªn káº¿t cÃ¡c pháº§n tá»­ vá»›i cÃ¡c toÃ¡n tá»­ logic&nbsp;<code>AND</code>,&nbsp;<code>OR</code>&nbsp;vÃ &nbsp;<code>NOT</code>, táº¥t cáº£ Ä‘á»u viáº¿t hoa.</p>
<p>Máº·c Ä‘á»‹nh, má»—i tÃ i liá»‡u khá»›p sáº½ hiá»ƒn thá»‹ táº¥t cáº£ cÃ¡c trÆ°á»ng. Äá»ƒ chá»n cÃ¡c trÆ°á»ng tÃ i liá»‡u Ä‘á»ƒ hiá»ƒn thá»‹, di chuyá»ƒn chuá»™t qua danh sÃ¡ch "Available fields", sau Ä‘Ã³ nháº¥p vÃ o nÃºt thÃªm bÃªn cáº¡nh má»—i trÆ°á»ng báº¡n muá»‘n bao gá»“m. VÃ­ dá»¥, náº¿u chá»‰ thÃªm account_number, hiá»ƒn thá»‹ sáº½ thay Ä‘á»•i thÃ nh danh sÃ¡ch Ä‘Æ¡n giáº£n bao gá»“m nÄƒm sá»‘ tÃ i khoáº£n:</p>
<figure><img src="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-discover-3.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h3>Ngá»¯ phÃ¡p truy váº¥n</h3>
<p>Thanh tÃ¬m kiáº¿m cá»§a Kibana tuÃ¢n thá»§ ngá»¯ phÃ¡p truy váº¥n Ä‘Æ°á»£c mÃ´ táº£ trong tÃ i liá»‡u&nbsp;<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#query-string-syntax" target="_blank" rel="noopener noreferrer">query-string-syntax</a>.</p>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ ngá»¯ phÃ¡p truy váº¥n cÆ¡ báº£n.</p>
<p>Chuá»—i truy váº¥n sáº½ Ä‘Æ°á»£c phÃ¢n tÃ­ch thÃ nh má»™t loáº¡t cÃ¡c thuáº­t ngá»¯ vÃ  toÃ¡n tá»­. Má»™t thuáº­t ngá»¯ cÃ³ thá»ƒ lÃ  má»™t tá»« (nhÆ°: quick, brown) hoáº·c má»™t cá»¥m tá»« Ä‘Æ°á»£c bao quanh bá»Ÿi dáº¥u ngoáº·c kÃ©p (nhÆ° "quick brown").</p>
<p>CÃ¡c hoáº¡t Ä‘á»™ng truy váº¥n cho phÃ©p báº¡n tÃ¹y chá»‰nh tÃ¬m kiáº¿m - dÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c tÃ¹y chá»n cÃ³ sáºµn.</p>
<h4>TÃªn trÆ°á»ng</h4>
<p>NhÆ° Ä‘Ã£ nÃ³i trong truy váº¥n chuá»—i, sáº½ tÃ¬m kiáº¿m <code>default_field</code> trong Ä‘iá»u kiá»‡n tÃ¬m kiáº¿m, nhÆ°ng báº¡n cÅ©ng cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh cÃ¡c trÆ°á»ng khÃ¡c trong cÃº phÃ¡p truy váº¥n:</p>
<p>VÃ­ dá»¥:</p>
<ul>
<li>TÃ¬m kiáº¿m tá»« khÃ³a <code>active</code> trong trÆ°á»ng <code>status</code></li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>status:active</span></span></code></pre>
</div><ul>
<li>TrÆ°á»ng <code>title</code> chá»©a tá»« khÃ³a <code>quick</code> hoáº·c <code>brown</code>. Náº¿u báº¡n bá» qua toÃ¡n tá»­ <code>OR</code>, toÃ¡n tá»­ máº·c Ä‘á»‹nh sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>title:(quick OR brown)</span></span>
<span class="line"><span>title:(quick brown)</span></span></code></pre>
</div><ul>
<li>TrÆ°á»ng tÃ¡c giáº£ tÃ¬m cá»¥m tá»« chÃ­nh xÃ¡c "John Smith", tá»©c lÃ  tÃ¬m kiáº¿m chÃ­nh xÃ¡c.</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>author:"John Smith"</span></span></code></pre>
</div><ul>
<li>Báº¥t ká»³ trÆ°á»ng nÃ o <code>book.title</code>, <code>book.content</code> hoáº·c <code>book.date</code> Ä‘á»u chá»©a <code>quick</code> hoáº·c <code>brown</code> (lÆ°u Ã½ lÃ m tháº¿ nÃ o chÃºng tÃ´i sá»­ dá»¥ng <code>\*</code> Ä‘á»ƒ biá»ƒu thá»‹ kÃ½ tá»± Ä‘áº¡i diá»‡n)</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>book.\*:(quick brown)</span></span></code></pre>
</div><ul>
<li>TrÆ°á»ng tiÃªu Ä‘á» chá»©a báº¥t ká»³ giÃ¡ trá»‹ khÃ´ng null nÃ o</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>_exists_:title</span></span></code></pre>
</div><h4>KÃ½ tá»± Ä‘áº¡i diá»‡n</h4>
<p>ELK cung cáº¥p hai kÃ½ tá»± Ä‘áº¡i diá»‡n lÃ  ? vÃ  *.</p>
<ul>
<li><code>?</code> biá»ƒu thá»‹ báº¥t ká»³ kÃ½ tá»± Ä‘Æ¡n nÃ o;</li>
<li><code>*</code> biá»ƒu thá»‹ báº¥t ká»³ khÃ´ng hoáº·c nhiá»u kÃ½ tá»±.</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>qu?ck bro*</span></span></code></pre>
</div><blockquote>
<p><strong>ChÃº Ã½: Truy váº¥n kÃ½ tá»± Ä‘áº¡i diá»‡n sáº½ sá»­ dá»¥ng ráº¥t nhiá»u bá»™ nhá»› vÃ  hiá»‡u suáº¥t thá»±c thi khÃ´ng tá»‘t, vÃ¬ váº­y hÃ£y sá»­ dá»¥ng cáº©n tháº­n.</strong> &gt; <strong>Gá»£i Ã½</strong>: KÃ½ tá»± Ä‘áº¡i diá»‡n tinh khiáº¿t <code>*</code> Ä‘Æ°á»£c viáº¿t vÃ o truy váº¥n <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-exists-query.html" target="_blank" rel="noopener noreferrer">exists</a>, Ä‘iá»u nÃ y Ä‘Ã£ cáº£i thiá»‡n hiá»‡u suáº¥t truy váº¥n. Do Ä‘Ã³, kÃ½ tá»± Ä‘áº¡i diá»‡n <code>fieldï¼š*</code> sáº½ khá»›p vá»›i tÃ i liá»‡u chá»©a giÃ¡ trá»‹ trá»‘ng, nhÆ°: <code>{â€œfieldâ€ï¼šâ€œâ€}</code>, nhÆ°ng náº¿u trÆ°á»ng bá»‹ máº¥t hoáº·c giÃ¡ trá»‹ Ä‘Æ°á»£c Ä‘áº·t thÃ nh null thÃ¬ sáº½ khÃ´ng khá»›p, nhÆ°: <code>â€œfieldâ€ï¼šnull}</code> &gt; <strong>Gá»£i Ã½</strong>: Sá»­ dá»¥ng kÃ½ tá»± Ä‘áº¡i diá»‡n á»Ÿ Ä‘áº§u má»™t tá»« (vÃ­ dá»¥: <code>*ing</code>) táº¡o ra má»™t lÆ°á»£ng truy váº¥n ráº¥t lá»›n, vÃ¬ táº¥t cáº£ cÃ¡c thuáº­t ngá»¯ trong chá»‰ má»¥c Ä‘á»u cáº§n Ä‘Æ°á»£c kiá»ƒm tra, chá»‰ trong trÆ°á»ng há»£p nÃ³ khá»›p. Báº¡n cÃ³ thá»ƒ vÃ´ hiá»‡u hÃ³a Ä‘iá»u nÃ y báº±ng cÃ¡ch Ä‘áº·t <code>allow_leading_wildcard</code> thÃ nh <code>false</code>.</p>
</blockquote>
<h4>Biá»ƒu thá»©c chÃ­nh quy</h4>
<p>Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng biá»ƒu thá»©c chÃ­nh quy trong chuá»—i truy váº¥n báº±ng cÃ¡ch Ä‘áº·t chÃºng vÃ o <code>/</code>.</p>
<p>VÃ­ dá»¥:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>name:/joh?n(ath[oa]n)/</span></span></code></pre>
</div><p>CÃº phÃ¡p biá»ƒu thá»©c chÃ­nh quy Ä‘Æ°á»£c há»— trá»£ cÃ³ thá»ƒ Ä‘Æ°á»£c tham kháº£o táº¡i: <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-regexp-query.html#regexp-syntax" target="_blank" rel="noopener noreferrer">Regular expression syntax</a></p>
<h4>Truy váº¥n má»</h4>
<p>ChÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng toÃ¡n tá»­ <code>~</code> Ä‘á»ƒ thá»±c hiá»‡n truy váº¥n má».</p>
<p>VÃ­ dá»¥:</p>
<p>Giáº£ sá»­ chÃºng ta thá»±c sá»± muá»‘n truy váº¥n</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>quick brown forks</span></span></code></pre>
</div><p>NhÆ°ng, do lá»—i Ä‘Ã¡nh mÃ¡y, tá»« khÃ³a truy váº¥n cá»§a chÃºng ta trá»Ÿ thÃ nh nhÆ° sau, chÃºng ta váº«n cÃ³ thá»ƒ tÃ¬m tháº¥y káº¿t quáº£ mong muá»‘n.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>quikc\~ brwn\~ foks\~</span></span></code></pre>
</div><p>Truy váº¥n má» nÃ y sá»­ dá»¥ng khoáº£ng cÃ¡ch Damerau-Levenshtein Ä‘á»ƒ tÃ¬m táº¥t cáº£ cÃ¡c má»¥c khá»›p vá»›i tá»‘i Ä‘a hai thay Ä‘á»•i. CÃ¡c thay Ä‘á»•i Ä‘Æ°á»£c Ä‘á» cáº­p á»Ÿ Ä‘Ã¢y lÃ  viá»‡c chÃ¨n, xÃ³a hoáº·c thay tháº¿ má»™t kÃ½ tá»± duy nháº¥t, hoáº·c hoÃ¡n Ä‘á»•i hai kÃ½ tá»± liá»n ká».</p>
<p>Khoáº£ng cÃ¡ch chá»‰nh sá»­a máº·c Ä‘á»‹nh lÃ  <code>2</code>, nhÆ°ng khoáº£ng cÃ¡ch chá»‰nh sá»­a <code>1</code> nÃªn Ä‘á»§ Ä‘á»ƒ báº¯t Ä‘Æ°á»£c 80% lá»—i Ä‘Ã¡nh mÃ¡y cá»§a con ngÆ°á»i. NÃ³ cÃ³ thá»ƒ Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh nhÆ°:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>quikc\~1</span></span></code></pre>
</div><h4>TÃ¬m kiáº¿m xáº¥p xá»‰</h4>
<p>Máº·c dÃ¹ truy váº¥n cá»¥m tá»« (vÃ­ dá»¥, <code>john smith</code>) mong Ä‘á»£i táº¥t cáº£ cÃ¡c tá»« Ä‘á»u theo Ä‘Ãºng thá»© tá»±, nhÆ°ng tÃ¬m kiáº¿m xáº¥p xá»‰ cho phÃ©p cÃ¡c tá»« Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh á»Ÿ xa hÆ¡n hoáº·c Ä‘Æ°á»£c sáº¯p xáº¿p theo thá»© tá»± khÃ¡c nhau. Giá»‘ng nhÆ° truy váº¥n má» cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh khoáº£ng cÃ¡ch chá»‰nh sá»­a tá»‘i Ä‘a cho cÃ¡c kÃ½ tá»± trong má»™t tá»«, tÃ¬m kiáº¿m xáº¥p xá»‰ cÅ©ng cho phÃ©p chÃºng ta chá»‰ Ä‘á»‹nh khoáº£ng cÃ¡ch chá»‰nh sá»­a tá»‘i Ä‘a cho cÃ¡c tá»« trong má»™t cá»¥m tá»«:</p>
<p>VÃ­ dá»¥</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>"fox quick"\~5</span></span></code></pre>
</div><p>VÄƒn báº£n trong trÆ°á»ng cÃ ng gáº§n vá»›i thá»© tá»± gá»‘c Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh trong chuá»—i truy váº¥n, tÃ i liá»‡u Ä‘Ã³ cÃ ng Ä‘Æ°á»£c coi lÃ  liÃªn quan. Khi so sÃ¡nh vá»›i truy váº¥n máº«u á»Ÿ trÃªn, cá»¥m tá»« <code>"quick fox"</code> sáº½ Ä‘Æ°á»£c coi lÃ  gáº§n vá»›i Ä‘iá»u kiá»‡n truy váº¥n hÆ¡n so vá»›i <code>"quick brown fox"</code>.</p>
<h4>Pháº¡m vi</h4>
<p>Báº¡n cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh pháº¡m vi cho cÃ¡c trÆ°á»ng ngÃ y, sá»‘ hoáº·c chuá»—i. Pháº¡m vi khoáº£ng Ä‘Ã³ng Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh báº±ng dáº¥u ngoáº·c vuÃ´ng <code>[min TO max]</code> vÃ  pháº¡m vi khoáº£ng má»Ÿ Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh báº±ng dáº¥u ngoáº·c nhá»n <code>{min TO max}</code>.</p>
<p>HÃ£y xem má»™t sá»‘ vÃ­ dá»¥.</p>
<ul>
<li>Táº¥t cáº£ cÃ¡c ngÃ y trong nÄƒm 2012</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>date:[2012-01-01 TO 2012-12-31]</span></span></code></pre>
</div><ul>
<li>Sá»‘ tá»« 1 Ä‘áº¿n 5</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>count:[1 TO 5]</span></span></code></pre>
</div><ul>
<li>NhÃ£n giá»¯a <code>alpha</code> vÃ  <code>omega</code>, khÃ´ng bao gá»“m <code>alpha</code> vÃ  <code>omega</code></li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>tag:{alpha TO omega}</span></span></code></pre>
</div><ul>
<li>Sá»‘ lá»›n hÆ¡n 10</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>count:[10 TO *]</span></span></code></pre>
</div><ul>
<li>Táº¥t cáº£ cÃ¡c ngÃ y trÆ°á»›c nÄƒm 2012</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>date:{* TO 2012-01-01}</span></span></code></pre>
</div><p>NgoÃ i ra, báº¡n cÅ©ng cÃ³ thá»ƒ káº¿t há»£p khoáº£ng má»Ÿ vÃ  khoáº£ng Ä‘Ã³ng</p>
<ul>
<li>Sá»‘ tá»« 1 Ä‘áº¿n 5, nhÆ°ng khÃ´ng bao gá»“m 5</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>count:[1 TO 5}</span></span></code></pre>
</div><p>Pháº¡m vi khÃ´ng giá»›i háº¡n á»Ÿ má»™t bÃªn cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng cÃº phÃ¡p sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>age:&gt;10</span></span>
<span class="line"><span>age:&gt;=10</span></span>
<span class="line"><span>age:&lt;10</span></span>
<span class="line"><span>age:&lt;=10</span></span></code></pre>
</div><p>Táº¥t nhiÃªn, báº¡n cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng toÃ¡n tá»­ AND Ä‘á»ƒ nháº­n Ä‘Æ°á»£c giao cá»§a hai káº¿t quáº£ truy váº¥n</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>age:(&gt;=10 AND &lt;20)</span></span>
<span class="line"><span>age:(+&gt;=10 +&lt;20)</span></span></code></pre>
</div><h4>Boosting</h4>
<p>Sá»­ dá»¥ng toÃ¡n tá»­ <code>^</code> Ä‘á»ƒ lÃ m cho má»™t thuáº­t ngá»¯ trá»Ÿ nÃªn quan trá»ng hÆ¡n má»™t thuáº­t ngá»¯ khÃ¡c. VÃ­ dá»¥, náº¿u chÃºng ta muá»‘n tÃ¬m táº¥t cáº£ cÃ¡c tÃ i liá»‡u liÃªn quan Ä‘áº¿n cÃ¡o, nhÆ°ng chÃºng ta Ä‘áº·c biá»‡t quan tÃ¢m Ä‘áº¿n tá»« "nhanh":</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>quick^2 fox</span></span></code></pre>
</div><p>GiÃ¡ trá»‹ tÄƒng cÆ°á»ng máº·c Ä‘á»‹nh lÃ  1, nhÆ°ng cÃ³ thá»ƒ lÃ  báº¥t ká»³ sá»‘ dÆ°Æ¡ng nÃ o. TÄƒng cÆ°á»ng giá»¯a 0 vÃ  1 giáº£m Ä‘á»™ liÃªn quan.</p>
<p>TÄƒng cÆ°á»ng cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c Ã¡p dá»¥ng cho cá»¥m tá»« hoáº·c nhÃ³m:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>"john smith"^2   (foo bar)^4</span></span></code></pre>
</div><h4>Thao tÃ¡c Boolean</h4>
<p>Theo máº·c Ä‘á»‹nh, táº¥t cáº£ cÃ¡c tá»« Ä‘á»u tÃ¹y chá»n miá»…n lÃ  cÃ³ má»™t tá»« phÃ¹ há»£p. TÃ¬m kiáº¿m <code>foo bar baz</code> sáº½ tÃ¬m kiáº¿m báº¥t ká»³ tÃ i liá»‡u nÃ o chá»©a má»™t hoáº·c nhiá»u tá»« <code>foo</code> hoáº·c <code>bar</code> hoáº·c <code>baz</code>. ChÃºng tÃ´i Ä‘Ã£ tháº£o luáº­n vá» <code>default_operator</code> á»Ÿ trÃªn, cho phÃ©p báº¡n yÃªu cáº§u táº¥t cáº£ cÃ¡c má»¥c, nhÆ°ng cÅ©ng cÃ³ cÃ¡c toÃ¡n tá»­ Boolean cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng trong chuá»—i truy váº¥n Ä‘á»ƒ cung cáº¥p nhiá»u kiá»ƒm soÃ¡t hÆ¡n.</p>
<p>ToÃ¡n tá»­ Æ°a thÃ­ch lÃ  <code>+</code> (thuáº­t ngá»¯ nÃ y pháº£i tá»“n táº¡i) vÃ  <code>-</code> (thuáº­t ngá»¯ nÃ y khÃ´ng Ä‘Æ°á»£c tá»“n táº¡i). Táº¥t cáº£ cÃ¡c thuáº­t ngá»¯ khÃ¡c lÃ  tÃ¹y chá»n. VÃ­ dá»¥, truy váº¥n nÃ y:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>quick brown +fox -news</span></span></code></pre>
</div><p>Truy váº¥n nÃ y cÃ³ nghÄ©a lÃ :</p>
<ul>
<li>fox pháº£i tá»“n táº¡i</li>
<li>news khÃ´ng Ä‘Æ°á»£c tá»“n táº¡i</li>
<li>quick vÃ  brown lÃ  tÃ¹y chá»n</li>
</ul>
<p>CÃ¡c toÃ¡n tá»­ quen thuá»™c <code>AND</code>, <code>OR</code> vÃ  <code>NOT</code> (cÅ©ng Ä‘Æ°á»£c viáº¿t lÃ  <code>&amp;&amp;</code>, <code>||</code> vÃ  <code>!</code>) cÅ©ng Ä‘Æ°á»£c há»— trá»£. Tuy nhiÃªn, cÃ¡c toÃ¡n tá»­ nÃ y cÃ³ má»©c Ä‘á»™ Æ°u tiÃªn: <code>NOT</code> Æ°u tiÃªn hÆ¡n <code>AND</code>, <code>AND</code> Æ°u tiÃªn hÆ¡n <code>OR</code>. Máº·c dÃ¹ <code>+</code> vÃ  <code>-</code> chá»‰ áº£nh hÆ°á»Ÿng Ä‘áº¿n thuáº­t ngá»¯ á»Ÿ bÃªn pháº£i cá»§a toÃ¡n tá»­, nhÆ°ng <code>AND</code> vÃ  <code>OR</code> sáº½ áº£nh hÆ°á»Ÿng Ä‘áº¿n thuáº­t ngá»¯ á»Ÿ cáº£ hai bÃªn.</p>
<h4>NhÃ³m</h4>
<p>Nhiá»u thuáº­t ngá»¯ hoáº·c má»‡nh Ä‘á» cÃ³ thá»ƒ Ä‘Æ°á»£c káº¿t há»£p báº±ng cáº·p dáº¥u ngoáº·c Ä‘á»ƒ táº¡o ra má»™t truy váº¥n con</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>(quick OR brown) AND fox</span></span></code></pre>
</div><p>Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng nhÃ³m Ä‘á»ƒ Ä‘á»‹nh vá»‹ cÃ¡c trÆ°á»ng cá»¥ thá»ƒ, hoáº·c Ä‘á»ƒ tÄƒng cÆ°á»ng káº¿t quáº£ cá»§a truy váº¥n con:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>status:(active OR pending) title:(full text search)^2</span></span></code></pre>
</div><h4>Tá»« dá»± trá»¯</h4>
<p>Náº¿u báº¡n cáº§n sá»­ dá»¥ng báº¥t ká»³ kÃ½ tá»± nÃ o trong truy váº¥n cá»§a mÃ¬nh nhÆ° má»™t toÃ¡n tá»­ (thay vÃ¬ lÃ  má»™t toÃ¡n tá»­), thÃ¬ báº¡n nÃªn sá»­ dá»¥ng má»™t dáº¥u gáº¡ch chÃ©o ngÆ°á»£c Ä‘á»ƒ thoÃ¡t khá»i chÃºng. VÃ­ dá»¥, Ä‘á»ƒ tÃ¬m kiáº¿m (1 + 1) = 2, báº¡n cáº§n viáº¿t truy váº¥n lÃ  <code>\(1\+1\)\=2</code></p>
<p>CÃ¡c kÃ½ tá»± dá»± trá»¯ lÃ : <code>+ - = &amp;&amp; || &gt; &lt; ! ( ) { } [ ] ^ " ~ * ? : \ /</code></p>
<p>KhÃ´ng thá»ƒ thoÃ¡t Ä‘Ãºng cÃ¡c kÃ½ tá»± Ä‘áº·c biá»‡t nÃ y cÃ³ thá»ƒ dáº«n Ä‘áº¿n lá»—i cÃº phÃ¡p, ngÄƒn cháº·n truy váº¥n cá»§a báº¡n.</p>
<h4>Truy váº¥n rá»—ng</h4>
<p>Náº¿u chuá»—i truy váº¥n trá»‘ng hoáº·c chá»‰ chá»©a khoáº£ng tráº¯ng, truy váº¥n sáº½ táº¡o ra má»™t táº­p káº¿t quáº£ trá»‘ng.</p>
<h2>Visualize</h2>
<p>Äá»ƒ hiá»ƒn thá»‹ dá»¯ liá»‡u cá»§a báº¡n dÆ°á»›i dáº¡ng trá»±c quan, hÃ£y nháº¥p vÃ o <code>Visualize</code> trong thanh Ä‘iá»u hÆ°á»›ng bÃªn.</p>
<p>CÃ´ng cá»¥ Visualize cho phÃ©p báº¡n xem dá»¯ liá»‡u theo nhiá»u cÃ¡ch khÃ¡c nhau nhÆ° biá»ƒu Ä‘á»“ trÃ²n, biá»ƒu Ä‘á»“ cá»™t, Ä‘á»“ thá»‹ Ä‘Æ°á»ng, biá»ƒu Ä‘á»“ phÃ¢n phá»‘i, v.v. Äá»ƒ báº¯t Ä‘áº§u, hÃ£y nháº¥p vÃ o <code>Create a visualization</code> mÃ u xanh hoáº·c nÃºt <code>+</code>.</p>
<figure><img src="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-landing.png" alt="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-landing.png" tabindex="0" loading="lazy"><figcaption><a href="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-landing.png" target="_blank" rel="noopener noreferrer">https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-landing.png</a></figcaption></figure>
<p>CÃ³ nhiá»u loáº¡i trá»±c quan hÃ³a Ä‘á»ƒ lá»±a chá»n.</p>
<figure><img src="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-wizard-step-1.png" alt="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-wizard-step-1.png" tabindex="0" loading="lazy"><figcaption><a href="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-wizard-step-1.png" target="_blank" rel="noopener noreferrer">https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-wizard-step-1.png</a></figcaption></figure>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ vÃ­ dá»¥ vá» viá»‡c táº¡o biá»ƒu Ä‘á»“:</p>
<h3>Pie</h3>
<p>Báº¡n cÃ³ thá»ƒ xÃ¢y dá»±ng biá»ƒu Ä‘á»“ trá»±c quan tá»« tÃ¬m kiáº¿m Ä‘Ã£ lÆ°u hoáº·c nháº­p Ä‘iá»u kiá»‡n tÃ¬m kiáº¿m má»›i. Äá»ƒ nháº­p Ä‘iá»u kiá»‡n tÃ¬m kiáº¿m má»›i, trÆ°á»›c tiÃªn cáº§n chá»n má»™t mÃ´ hÃ¬nh chá»‰ má»¥c Ä‘á»ƒ xÃ¡c Ä‘á»‹nh chá»‰ má»¥c cáº§n tÃ¬m kiáº¿m.</p>
<p>Máº·c Ä‘á»‹nh, tÃ¬m kiáº¿m khá»›p vá»›i táº¥t cáº£ cÃ¡c tÃ i liá»‡u. Ban Ä‘áº§u, má»™t "pháº§n" chá»©a toÃ n bá»™ biá»ƒu Ä‘á»“ trÃ²n:</p>
<figure><img src="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-pie-1.png" alt="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-pie-1.png" tabindex="0" loading="lazy"><figcaption><a href="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-pie-1.png" target="_blank" rel="noopener noreferrer">https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-pie-1.png</a></figcaption></figure>
<p>Äá»ƒ chá»‰ Ä‘á»‹nh dá»¯ liá»‡u nÃ o Ä‘Æ°á»£c hiá»ƒn thá»‹ trong biá»ƒu Ä‘á»“, hÃ£y sá»­ dá»¥ng viá»‡c tá»• chá»©c chá»©a cá»§a Elasticsearch. Tá»• chá»©c chá»©a chá»‰ Ä‘Æ¡n giáº£n lÃ  phÃ¢n loáº¡i cÃ¡c tÃ i liá»‡u khá»›p vá»›i Ä‘iá»u kiá»‡n tÃ¬m kiáº¿m cá»§a báº¡n vÃ  Ä‘Æ°á»£c gá»i lÃ  nhÃ³m.</p>
<p>XÃ¡c Ä‘á»‹nh má»™t tá»• chá»©c chá»©a cho má»—i pháº¡m vi:</p>
<ol>
<li>Nháº¥p vÃ o <code>Split Slices</code>.</li>
<li>Chá»n <code>Terms</code> trong danh sÃ¡ch <code>Aggregation</code>. LÆ°u Ã½: á» Ä‘Ã¢y, "Terms" lÃ  trÆ°á»ng hoáº·c nhÃ£n Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a khi thu tháº­p dá»¯ liá»‡u Elk.</li>
<li>Chá»n <code>level.keyword</code> trong danh sÃ¡ch <code>Field</code>.</li>
<li>Nháº¥p vÃ o nÃºt <img src="https://www.elastic.co/guide/en/kibana/6.1/images/apply-changes-button.png" alt="images/apply-changes-button.png" loading="lazy"> Ä‘á»ƒ cáº­p nháº­t biá»ƒu Ä‘á»“.</li>
</ol>
<figure><img src="https://upload-images.jianshu.io/upload_images/3101171-7fb2042dc6d59520.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Sau khi hoÃ n thÃ nh, náº¿u báº¡n muá»‘n lÆ°u biá»ƒu Ä‘á»“ nÃ y, báº¡n cÃ³ thá»ƒ nháº¥p vÃ o nÃºt <code>Save</code> á»Ÿ phÃ­a trÃªn trang.</p>
<h3>Vertical Bar</h3>
<p>ChÃºng ta hÃ£y xem cÃ¡ch táº¡o biá»ƒu Ä‘á»“ cá»™t dá»c.</p>
<ol>
<li>Nháº¥p vÃ o <code>Create a visualization</code> mÃ u xanh hoáº·c nÃºt <code>+</code>. Chá»n <code>Vertical Bar</code>.</li>
<li>Chá»n mÃ´ hÃ¬nh chá»‰ má»¥c. VÃ¬ báº¡n chÆ°a xÃ¡c Ä‘á»‹nh báº¥t ká»³ bucket nÃ o, báº¡n sáº½ tháº¥y má»™t thanh lá»›n hiá»ƒn thá»‹ tá»•ng sá»‘ tÃ i liá»‡u khá»›p vá»›i truy váº¥n kÃ½ tá»± Ä‘áº¡i diá»‡n máº·c Ä‘á»‹nh.</li>
<li>XÃ¡c Ä‘á»‹nh trÆ°á»ng Ä‘áº¡i diá»‡n cho trá»¥c Y.</li>
<li>XÃ¡c Ä‘á»‹nh trÆ°á»ng Ä‘áº¡i diá»‡n cho trá»¥c X.</li>
<li>Nháº¥p vÃ o nÃºt <img src="https://www.elastic.co/guide/en/kibana/6.1/images/apply-changes-button.png" alt="images/apply-changes-button.png" loading="lazy"> Ä‘á»ƒ cáº­p nháº­t biá»ƒu Ä‘á»“.</li>
</ol>
<figure><img src="https://upload-images.jianshu.io/upload_images/3101171-5aa7627284c19a56.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Sau khi hoÃ n thÃ nh, náº¿u báº¡n muá»‘n lÆ°u biá»ƒu Ä‘á»“ nÃ y, báº¡n cÃ³ thá»ƒ nháº¥p vÃ o nÃºt <code>Save</code> á»Ÿ phÃ­a trÃªn trang.</p>
<h2>Dashboard</h2>
<p><code>Dashboard</code> cho phÃ©p tá»•ng há»£p vÃ  chia sáº» táº­p há»£p <code>Visualize</code>.</p>
<ol>
<li>Nháº¥p vÃ o <code>Dashboard</code> trong thanh Ä‘iá»u hÆ°á»›ng bÃªn.</li>
<li>Nháº¥p vÃ o <code>Add</code> Ä‘á»ƒ hiá»ƒn thá»‹ danh sÃ¡ch trá»±c quan hÃ³a Ä‘Ã£ lÆ°u.</li>
<li>Nháº¥p vÃ o <code>Visualize</code> Ä‘Ã£ lÆ°u trÆ°á»›c Ä‘Ã³ vÃ  sau Ä‘Ã³ nháº¥p vÃ o mÅ©i tÃªn nhá» á»Ÿ cuá»‘i danh sÃ¡ch Ä‘á»ƒ Ä‘Ã³ng danh sÃ¡ch trá»±c quan hÃ³a.</li>
<li>Di chuá»™t qua Ä‘á»‘i tÆ°á»£ng trá»±c quan sáº½ hiá»ƒn thá»‹ cÃ¡c Ä‘iá»u khiá»ƒn khung cho phÃ©p báº¡n chá»‰nh sá»­a, di chuyá»ƒn, xÃ³a vÃ  Ä‘iá»u chá»‰nh kÃ­ch thÆ°á»›c Ä‘á»‘i tÆ°á»£ng trá»±c quan.</li>
</ol>
]]></content:encoded>
      <enclosure url="https://www.elastic.co/guide/en/kibana/current/images/tutorial-discover.png" type="image/png"/>
    </item>
    <item>
      <title>Kibana Operation</title>
      <link>https://vanhung4499.github.io/database/elastic/kibana-operation.html</link>
      <guid>https://vanhung4499.github.io/database/elastic/kibana-operation.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Kibana Operation</source>
      <description>Váº­n hÃ nh Kibana ThÃ´ng qua Kibana, báº¡n cÃ³ thá»ƒ trá»±c quan hÃ³a Elasticsearch cá»§a mÃ¬nh vÃ  Ä‘iá»u hÆ°á»›ng trong Elastic Stack, cho phÃ©p báº¡n thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng khÃ¡c nhau, tá»« theo dÃµi ...</description>
      <category>elastic</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<p>ThÃ´ng qua Kibana, báº¡n cÃ³ thá»ƒ trá»±c quan hÃ³a Elasticsearch cá»§a mÃ¬nh vÃ  Ä‘iá»u hÆ°á»›ng trong Elastic Stack, cho phÃ©p báº¡n thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng khÃ¡c nhau, tá»« theo dÃµi táº£i truy váº¥n Ä‘áº¿n hiá»ƒu cÃ¡ch cÃ¡c yÃªu cáº§u cháº£y qua toÃ n bá»™ á»©ng dá»¥ng cá»§a báº¡n.</p>
<h2>1. CÃ i Ä‘áº·t</h2>
<h3>1.1. YÃªu cáº§u há»‡ thá»‘ng</h3>
<p>PhiÃªn báº£n: Elastic Stack 7.4</p>
<h3>1.2. CÃ¡c bÆ°á»›c cÃ i Ä‘áº·t</h3>
<p>CÃ¡c bÆ°á»›c cÃ i Ä‘áº·t nhÆ° sau:</p>
<ol>
<li>Táº£i gÃ³i phiÃªn báº£n yÃªu cáº§u tá»« <a href="https://www.elastic.co/downloads/kibana" target="_blank" rel="noopener noreferrer">trang táº£i xuá»‘ng chÃ­nh thá»©c cá»§a Kibana</a> vÃ  giáº£i nÃ©n nÃ³ trÃªn mÃ¡y cá»¥c bá»™ cá»§a báº¡n.</li>
<li>Sá»­a tá»‡p cáº¥u hÃ¬nh <code>config/kibana.yml</code> vÃ  Ä‘áº·t <code>elasticsearch.url</code> Ä‘á»ƒ trá» Ä‘áº¿n Elasticsearch cá»§a báº¡n.</li>
<li>Cháº¡y <code>bin/kibana</code> (hoáº·c <code>bin\kibana.bat</code> trÃªn Windows).</li>
<li>Truy cáº­p Kibana trong trÃ¬nh duyá»‡t cá»§a báº¡n táº¡i Ä‘á»‹a chá»‰ <a href="http://localhost:5601" target="_blank" rel="noopener noreferrer">http://localhost:5601</a>.</li>
</ol>
<h2>2. Sá»­ dá»¥ng</h2>
<h3>2.1. KhÃ¡m phÃ¡ (Discover)</h3>
<p>Nháº¥p vÃ o <code>Discover</code> trong thanh Ä‘iá»u hÆ°á»›ng bÃªn Ä‘á»ƒ truy cáº­p chá»©c nÄƒng truy váº¥n dá»¯ liá»‡u cá»§a Kibana.</p>
<figure><img src="https://www.elastic.co/guide/en/kibana/current/images/tutorial-discover.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>Trong thanh tÃ¬m kiáº¿m, báº¡n cÃ³ thá»ƒ nháº­p cÃ¡c Ä‘iá»u kiá»‡n truy váº¥n Elasticsearch Ä‘á»ƒ tÃ¬m kiáº¿m dá»¯ liá»‡u cá»§a báº¡n. Báº¡n cÃ³ thá»ƒ duyá»‡t qua káº¿t quáº£ trÃªn trang <code>Discover</code> vÃ  táº¡o cÃ¡c trá»±c quan hÃ³a vá»›i cÃ¡c Ä‘iá»u kiá»‡n tÃ¬m kiáº¿m Ä‘Ã£ lÆ°u trÃªn trang <code>Visualize</code>.</p>
<p>Máº«u chá»‰ má»¥c hiá»‡n táº¡i Ä‘Æ°á»£c hiá»ƒn thá»‹ dÆ°á»›i thanh tÃ¬m kiáº¿m. Máº«u chá»‰ má»¥c xÃ¡c Ä‘á»‹nh cÃ¡c chá»‰ má»¥c nÃ o Ä‘Æ°á»£c tÃ¬m kiáº¿m khi truy váº¥n Ä‘Æ°á»£c gá»­i. Äá»ƒ tÃ¬m kiáº¿m má»™t táº­p há»£p chá»‰ má»¥c khÃ¡c, hÃ£y chá»n má»™t máº«u khÃ¡c tá»« menu tháº£ xuá»‘ng. Äá»ƒ thÃªm má»™t máº«u chá»‰ má»¥c, Ä‘iá»u hÆ°á»›ng Ä‘áº¿n <code>Management/Kibana/Index Patterns</code> vÃ  nháº¥p vÃ o <code>Add New</code>.</p>
<p>Báº¡n cÃ³ thá»ƒ xÃ¢y dá»±ng cÃ¡c truy váº¥n báº±ng cÃ¡ch sá»­ dá»¥ng tÃªn trÆ°á»ng vÃ  cÃ¡c giÃ¡ trá»‹ quan tÃ¢m. Äá»‘i vá»›i cÃ¡c trÆ°á»ng sá»‘, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c toÃ¡n tá»­ so sÃ¡nh nhÆ° lá»›n hÆ¡n (&gt;), nhá» hÆ¡n (&lt;) hoáº·c báº±ng (=). Báº¡n cÃ³ thá»ƒ káº¿t há»£p cÃ¡c yáº¿u tá»‘ vá»›i cÃ¡c toÃ¡n tá»­ logic <code>AND</code>, <code>OR</code> vÃ  <code>NOT</code>, táº¥t cáº£ viáº¿t hoa.</p>
<p>Máº·c Ä‘á»‹nh, má»—i tÃ i liá»‡u khá»›p hiá»ƒn thá»‹ táº¥t cáº£ cÃ¡c trÆ°á»ng. Äá»ƒ chá»n cÃ¡c trÆ°á»ng tÃ i liá»‡u muá»‘n hiá»ƒn thá»‹, di chuá»™t qua danh sÃ¡ch "CÃ¡c trÆ°á»ng cÃ³ sáºµn" vÃ  nháº¥p vÃ o nÃºt thÃªm bÃªn cáº¡nh má»—i trÆ°á»ng báº¡n muá»‘n bao gá»“m. VÃ­ dá»¥, náº¿u chá»‰ thÃªm account_number, hiá»ƒn thá»‹ sáº½ thay Ä‘á»•i thÃ nh má»™t danh sÃ¡ch Ä‘Æ¡n giáº£n chá»©a nÄƒm tÃ i khoáº£n:</p>
<figure><img src="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-discover-3.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>Thanh tÃ¬m kiáº¿m trong Kibana tuÃ¢n theo cÃº phÃ¡p chuá»—i truy váº¥n Ä‘Æ°á»£c mÃ´ táº£ trong tÃ i liá»‡u <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#query-string-syntax" target="_blank" rel="noopener noreferrer">query-string-syntax</a>.</p>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ cÃº phÃ¡p truy váº¥n cÆ¡ báº£n nháº¥t.</p>
<h4>2.1.1. TÃªn trÆ°á»ng</h4>
<p>NhÆ° Ä‘Ã£ mÃ´ táº£ trong truy váº¥n chuá»—i truy váº¥n, máº·c Ä‘á»‹nh sáº½ tÃ¬m kiáº¿m trÆ°á»ng default_field trong Ä‘iá»u kiá»‡n tÃ¬m kiáº¿m, nhÆ°ng báº¡n cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh cÃ¡c trÆ°á»ng khÃ¡c trong cÃº phÃ¡p truy váº¥n:</p>
<p>VÃ­ dá»¥:</p>
<ul>
<li>TÃ¬m kiáº¿m tá»« khÃ³a "active" trong trÆ°á»ng <code>status</code></li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>status:active</span></span></code></pre>
</div><ul>
<li>TÃ¬m kiáº¿m tá»« khÃ³a "quick" hoáº·c "brown" trong trÆ°á»ng <code>title</code>. Náº¿u báº¡n bá» qua toÃ¡n tá»­ <code>OR</code>, toÃ¡n tá»­ máº·c Ä‘á»‹nh sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng.</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>title:(quick OR brown)</span></span>
<span class="line"><span>title:(quick brown)</span></span></code></pre>
</div><ul>
<li>TÃ¬m kiáº¿m cá»¥m tá»« chÃ­nh xÃ¡c "John Smith" trong trÆ°á»ng <code>author</code>.</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>author:"John Smith"</span></span></code></pre>
</div><ul>
<li>TÃ¬m kiáº¿m tá»« khÃ³a "quick" hoáº·c "brown" trong báº¥t ká»³ trÆ°á»ng nÃ o (<code>book.title</code>, <code>book.content</code>, hoáº·c <code>book.date</code>). LÆ°u Ã½ cÃ¡ch sá»­ dá»¥ng <code>\*</code> Ä‘á»ƒ Ä‘áº¡i diá»‡n cho kÃ½ tá»± Ä‘áº¡i diá»‡n.</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>book.\*:(quick brown)</span></span></code></pre>
</div><ul>
<li>TÃ¬m kiáº¿m cÃ¡c tÃ i liá»‡u cÃ³ trÆ°á»ng <code>title</code> chá»©a báº¥t ká»³ giÃ¡ trá»‹ khÃ¡c null nÃ o.</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>_exists_:title</span></span></code></pre>
</div><h4>2.1.2. KÃ½ tá»± Ä‘áº¡i diá»‡n</h4>
<p>ELK cung cáº¥p hai kÃ½ tá»± Ä‘áº¡i diá»‡n lÃ  <code>?</code> vÃ  <code>*</code>.</p>
<ul>
<li><code>?</code> Ä‘áº¡i diá»‡n cho báº¥t ká»³ kÃ½ tá»± duy nháº¥t nÃ o;</li>
<li><code>*</code> Ä‘áº¡i diá»‡n cho báº¥t ká»³ sá»‘ kÃ½ tá»± nÃ o, bao gá»“m cáº£ khÃ´ng cÃ³ kÃ½ tá»±.</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>qu?ck bro*</span></span></code></pre>
</div><blockquote>
<p><strong>LÆ°u Ã½: Truy váº¥n kÃ½ tá»± Ä‘áº¡i diá»‡n sáº½ sá»­ dá»¥ng nhiá»u bá»™ nhá»› vÃ  cÃ³ hiá»‡u suáº¥t thá»±c hiá»‡n kÃ©m, vÃ¬ váº­y hÃ£y sá»­ dá»¥ng cáº©n tháº­n.</strong> &gt; <strong>Gá»£i Ã½</strong>: Truy váº¥n kÃ½ tá»± Ä‘áº¡i diá»‡n thuáº§n tÃºy <code>*</code> Ä‘Æ°á»£c viáº¿t dÆ°á»›i dáº¡ng truy váº¥n <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-exists-query.html" target="_blank" rel="noopener noreferrer">exists</a> Ä‘á»ƒ cáº£i thiá»‡n hiá»‡u suáº¥t truy váº¥n. Do Ä‘Ã³, truy váº¥n <code>field:*</code> sáº½ khá»›p vá»›i cÃ¡c tÃ i liá»‡u chá»©a giÃ¡ trá»‹ rá»—ng nhÆ° <code>{ "field": "" }</code>, nhÆ°ng khÃ´ng khá»›p náº¿u trÆ°á»ng bá»‹ máº¥t hoáº·c giÃ¡ trá»‹ Ä‘Æ°á»£c Ä‘áº·t thÃ nh null nhÆ° <code>{ "field": null }</code>. &gt; <strong>Gá»£i Ã½</strong>: Truy váº¥n báº±ng kÃ½ tá»± Ä‘áº¡i diá»‡n á»Ÿ Ä‘áº§u tá»« (vÃ­ dá»¥: <code>*ing</code>) cÃ³ lÆ°á»£ng truy váº¥n Ä‘áº·c biá»‡t lá»›n, vÃ¬ táº¥t cáº£ cÃ¡c thuáº­t ngá»¯ trong chá»‰ má»¥c pháº£i Ä‘Æ°á»£c kiá»ƒm tra trong trÆ°á»ng há»£p cÃ³ khá»›p. Báº±ng cÃ¡ch Ä‘áº·t <code>allow_leading_wildcard</code> thÃ nh <code>false</code>, báº¡n cÃ³ thá»ƒ táº¯t tÃ­nh nÄƒng nÃ y.</p>
</blockquote>
<h4>2.1.3. Biá»ƒu thá»©c chÃ­nh quy</h4>
<p>Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng biá»ƒu thá»©c chÃ­nh quy báº±ng cÃ¡ch bao bá»c nÃ³ trong dáº¥u <code>/</code> trong chuá»—i truy váº¥n.</p>
<p>VÃ­ dá»¥:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>name:/joh?n(ath[oa]n)/</span></span></code></pre>
</div><p>CÃº phÃ¡p biá»ƒu thá»©c chÃ­nh quy Ä‘Æ°á»£c há»— trá»£ cÃ³ thá»ƒ Ä‘Æ°á»£c tham kháº£o táº¡i: <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-regexp-query.html#regexp-syntax" target="_blank" rel="noopener noreferrer">Regular expression syntax</a></p>
<h4>2.1.4. Truy váº¥n má»</h4>
<p>ChÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng toÃ¡n tá»­ <code>~</code> Ä‘á»ƒ thá»±c hiá»‡n truy váº¥n má».</p>
<p>VÃ­ dá»¥:</p>
<p>Giáº£ sá»­ chÃºng ta thá»±c sá»± muá»‘n tÃ¬m kiáº¿m</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>quick brown forks</span></span></code></pre>
</div><p>NhÆ°ng do lá»—i chÃ­nh táº£, tá»« khÃ³a truy váº¥n cá»§a chÃºng ta trá»Ÿ thÃ nh nhÆ° sau, nhÆ°ng váº«n cÃ³ thá»ƒ tÃ¬m tháº¥y káº¿t quáº£ mong muá»‘n.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>quikc~ brwn~ foks~</span></span></code></pre>
</div><p>Truy váº¥n má» nÃ y sá»­ dá»¥ng khoáº£ng cÃ¡ch Damerau-Levenshtein Ä‘á»ƒ tÃ¬m táº¥t cáº£ cÃ¡c má»¥c khá»›p cÃ³ tá»‘i Ä‘a hai thay Ä‘á»•i. Thay Ä‘á»•i cÃ³ thá»ƒ lÃ  viá»‡c chÃ¨n, xÃ³a hoáº·c thay tháº¿ má»™t kÃ½ tá»± Ä‘Æ¡n, hoáº·c hoÃ¡n Ä‘á»•i vá»‹ trÃ­ cá»§a hai kÃ½ tá»± liá»n ká».</p>
<p>Khoáº£ng cÃ¡ch chá»‰nh sá»­a máº·c Ä‘á»‹nh lÃ  <code>2</code>, nhÆ°ng khoáº£ng cÃ¡ch chá»‰nh sá»­a lÃ  <code>1</code> thÆ°á»ng Ä‘á»§ Ä‘á»ƒ báº¯t Ä‘Æ°á»£c 80% lá»—i chÃ­nh táº£ cá»§a con ngÆ°á»i. NÃ³ cÃ³ thá»ƒ Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>quikc~1</span></span></code></pre>
</div><h4>2.1.5. TÃ¬m kiáº¿m gáº§n Ä‘Ãºng</h4>
<p>Máº·c dÃ¹ truy váº¥n cá»¥m tá»« (vÃ­ dá»¥: <code>john smith</code>) mong Ä‘á»£i táº¥t cáº£ cÃ¡c thuáº­t ngá»¯ trong cá»¥m tá»« Ä‘Ã³ cÃ³ cÃ¹ng thá»© tá»± hoÃ n toÃ n, nhÆ°ng tÃ¬m kiáº¿m gáº§n Ä‘Ãºng cho phÃ©p chá»‰ Ä‘á»‹nh cÃ¡c tá»« cá»¥ thá»ƒ Ä‘Æ°á»£c tÃ¡ch ra hoáº·c sáº¯p xáº¿p theo thá»© tá»± khÃ¡c nhau. Giá»‘ng nhÆ° truy váº¥n má» cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh khoáº£ng cÃ¡ch chá»‰nh sá»­a tá»‘i Ä‘a cho cÃ¡c kÃ½ tá»± trong tá»«, tÃ¬m kiáº¿m gáº§n Ä‘Ãºng cÅ©ng cho phÃ©p chÃºng ta chá»‰ Ä‘á»‹nh khoáº£ng cÃ¡ch chá»‰nh sá»­a tá»‘i Ä‘a cho cÃ¡c tá»« trong cá»¥m tá»«:</p>
<p>VÃ­ dá»¥:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>"fox quick"~5</span></span></code></pre>
</div><p>CÃ ng gáº§n vÄƒn báº£n trong trÆ°á»ng vá»›i thá»© tá»± ban Ä‘áº§u Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh trong chuá»—i truy váº¥n, tÃ i liá»‡u Ä‘Ã³ cÃ ng Ä‘Æ°á»£c coi lÃ  liÃªn quan. So vá»›i truy váº¥n vÃ­ dá»¥ trÃªn, cá»¥m tá»« <code>"quick fox"</code> sáº½ Ä‘Æ°á»£c coi lÃ  gáº§n giá»‘ng Ä‘iá»u kiá»‡n truy váº¥n hÆ¡n <code>"quick brown fox"</code>.</p>
<h4>2.1.6. Pháº¡m vi</h4>
<p>ChÃºng ta cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh pháº¡m vi cho cÃ¡c trÆ°á»ng ngÃ y thÃ¡ng, sá»‘ hoáº·c chuá»—i. Pháº¡m vi Ä‘Ã³ng cá»­a Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh báº±ng cáº·p dáº¥u ngoáº·c vuÃ´ng <code>[min TO max]</code> vÃ  pháº¡m vi má»Ÿ Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh báº±ng cáº·p dáº¥u ngoáº·c nhá»n <code>{min TO max}</code>.</p>
<p>HÃ£y xem má»™t sá»‘ vÃ­ dá»¥.</p>
<ul>
<li>Táº¥t cáº£ cÃ¡c ngÃ y trong nÄƒm 2012</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>date:[2012-01-01 TO 2012-12-31]</span></span></code></pre>
</div><ul>
<li>Sá»‘ tá»« 1 Ä‘áº¿n 5</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>count:[1 TO 5]</span></span></code></pre>
</div><ul>
<li>CÃ¡c nhÃ£n náº±m giá»¯a <code>alpha</code> vÃ  <code>omega</code>, khÃ´ng bao gá»“m <code>alpha</code> vÃ  <code>omega</code></li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>tag:{alpha TO omega}</span></span></code></pre>
</div><ul>
<li>Sá»‘ lá»›n hÆ¡n hoáº·c báº±ng 10</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>count:[10 TO *]</span></span></code></pre>
</div><ul>
<li>Táº¥t cáº£ cÃ¡c ngÃ y trÆ°á»›c nÄƒm 2012</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>date:{* TO 2012-01-01}</span></span></code></pre>
</div><p>NgoÃ i ra, pháº¡m vi má»Ÿ vÃ  Ä‘Ã³ng cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c káº¿t há»£p sá»­ dá»¥ng</p>
<ul>
<li>Máº£ng tá»« 1 Ä‘áº¿n 5, nhÆ°ng khÃ´ng bao gá»“m sá»‘ 5</li>
</ul>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>count:[1 TO 5}</span></span></code></pre>
</div><p>Pháº¡m vi khÃ´ng bá»‹ rÃ ng buá»™c á»Ÿ má»™t bÃªn cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng vá»›i cÃº phÃ¡p sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>age:&gt;10</span></span>
<span class="line"><span>age:&gt;=10</span></span>
<span class="line"><span>age:&lt;10</span></span>
<span class="line"><span>age:&lt;=10</span></span></code></pre>
</div><p>Táº¥t nhiÃªn, báº¡n cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng toÃ¡n tá»­ AND Ä‘á»ƒ láº¥y giao cá»§a hai káº¿t quáº£ truy váº¥n:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>age:(&gt;=10 AND &lt;20)</span></span>
<span class="line"><span>age:(+&gt;=10 +&lt;20)</span></span></code></pre>
</div><h4>2.1.7. Boosting</h4>
<p>Sá»­ dá»¥ng toÃ¡n tá»­ <code>^</code> Ä‘á»ƒ lÃ m cho má»™t thuáº­t ngá»¯ quan trá»ng hÆ¡n má»™t thuáº­t ngá»¯ khÃ¡c. VÃ­ dá»¥, náº¿u chÃºng ta muá»‘n tÃ¬m kiáº¿m táº¥t cáº£ cÃ¡c tÃ i liá»‡u liÃªn quan Ä‘áº¿n con cÃ¡o, nhÆ°ng chÃºng ta Ä‘áº·c biá»‡t quan tÃ¢m Ä‘áº¿n con cÃ¡o:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>quick^2 fox</span></span></code></pre>
</div><p>GiÃ¡ trá»‹ tÄƒng cÆ°á»ng máº·c Ä‘á»‹nh lÃ  1, nhÆ°ng nÃ³ cÃ³ thá»ƒ lÃ  báº¥t ká»³ sá»‘ thá»±c dÆ°Æ¡ng nÃ o. GiÃ¡ trá»‹ tÄƒng cÆ°á»ng tá»« 0 Ä‘áº¿n 1 giáº£m tÃ­nh liÃªn quan.</p>
<p>TÄƒng cÆ°á»ng cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c Ã¡p dá»¥ng cho cá»¥m tá»« hoáº·c nhÃ³m:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>"john smith"^2   (foo bar)^4</span></span></code></pre>
</div><h4>2.1.8. PhÃ©p toÃ¡n Boolean</h4>
<p>Máº·c Ä‘á»‹nh, chá»‰ cáº§n má»™t tá»« khá»›p, táº¥t cáº£ cÃ¡c tá»« Ä‘á»u lÃ  tÃ¹y chá»n. TÃ¬m kiáº¿m <code>foo bar baz</code> sáº½ tÃ¬m kiáº¿m báº¥t ká»³ tÃ i liá»‡u nÃ o chá»©a má»™t hoáº·c nhiá»u tá»« trong <code>foo</code>, <code>bar</code> hoáº·c <code>baz</code>. ChÃºng ta Ä‘Ã£ tháº£o luáº­n vá» <code>default_operator</code> á»Ÿ trÃªn, cho phÃ©p báº¡n yÃªu cáº§u táº¥t cáº£ cÃ¡c má»¥c, nhÆ°ng cÅ©ng cÃ³ cÃ¡c toÃ¡n tá»­ Boolean cÃ³ thá»ƒ sá»­ dá»¥ng trong chuá»—i truy váº¥n Ä‘á»ƒ cung cáº¥p sá»± kiá»ƒm soÃ¡t nhiá»u hÆ¡n.</p>
<p>CÃ¡c toÃ¡n tá»­ Ä‘Æ°á»£c Æ°u tiÃªn sá»­ dá»¥ng lÃ  <code>+</code> (thuáº­t ngá»¯ nÃ y pháº£i tá»“n táº¡i) vÃ  <code>-</code> (thuáº­t ngá»¯ nÃ y khÃ´ng Ä‘Æ°á»£c tá»“n táº¡i). Táº¥t cáº£ cÃ¡c thuáº­t ngá»¯ khÃ¡c lÃ  tÃ¹y chá»n. VÃ­ dá»¥, truy váº¥n nÃ y:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>quick brown +fox -news</span></span></code></pre>
</div><p>Truy váº¥n nÃ y cÃ³ nghÄ©a lÃ :</p>
<ul>
<li><code>fox</code> pháº£i tá»“n táº¡i</li>
<li><code>news</code> khÃ´ng Ä‘Æ°á»£c tá»“n táº¡i</li>
<li><code>quick</code> vÃ  <code>brown</code> lÃ  tÃ¹y chá»n</li>
</ul>
<p>CÃ¡c toÃ¡n tá»­ quen thuá»™c <code>AND</code>, <code>OR</code> vÃ  <code>NOT</code> (cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c viáº¿t lÃ  <code>&amp;&amp;</code>, <code>||</code> vÃ  <code>!</code>) cÅ©ng Ä‘Æ°á»£c há»— trá»£. Tuy nhiÃªn, cÃ¡c toÃ¡n tá»­ nÃ y cÃ³ má»©c Ä‘á»™ Æ°u tiÃªn nháº¥t Ä‘á»‹nh: <code>NOT</code> Æ°u tiÃªn hÆ¡n <code>AND</code>, <code>AND</code> Æ°u tiÃªn hÆ¡n <code>OR</code>. Máº·c dÃ¹ <code>+</code> vÃ  <code>-</code> chá»‰ áº£nh hÆ°á»Ÿng Ä‘áº¿n thuáº­t ngá»¯ bÃªn pháº£i cá»§a toÃ¡n tá»­, nhÆ°ng <code>AND</code> vÃ  <code>OR</code> áº£nh hÆ°á»Ÿng Ä‘áº¿n cáº£ thuáº­t ngá»¯ bÃªn trÃ¡i vÃ  bÃªn pháº£i.</p>
<h4>2.1.9. NhÃ³m</h4>
<p>Nhiá»u thuáº­t ngá»¯ hoáº·c má»‡nh Ä‘á» cÃ³ thá»ƒ Ä‘Æ°á»£c káº¿t há»£p trong cáº·p dáº¥u ngoáº·c trÃ²n Ä‘á»ƒ táº¡o thÃ nh má»™t truy váº¥n con:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>(quick OR brown) AND fox</span></span></code></pre>
</div><p>CÃ³ thá»ƒ sá»­ dá»¥ng nhÃ³m Ä‘á»ƒ xÃ¡c Ä‘á»‹nh trÆ°á»ng cá»¥ thá»ƒ hoáº·c cáº£i thiá»‡n káº¿t quáº£ cá»§a truy váº¥n con:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>status:(active OR pending) title:(full text search)^2</span></span></code></pre>
</div><h4>2.1.10. Tá»« khÃ³a Ä‘áº·c biá»‡t</h4>
<p>Náº¿u báº¡n cáº§n sá»­ dá»¥ng báº¥t ká»³ kÃ½ tá»± nÃ o trong truy váº¥n cá»§a mÃ¬nh lÃ  má»™t toÃ¡n tá»­ (thay vÃ¬ má»™t toÃ¡n tá»­), báº¡n nÃªn sá»­ dá»¥ng dáº¥u gáº¡ch chÃ©o ngÆ°á»£c Ä‘á»ƒ trÃ¡nh chÃºng. VÃ­ dá»¥, Ä‘á»ƒ tÃ¬m kiáº¿m (1 + 1) = 2, báº¡n cáº§n viáº¿t truy váº¥n lÃ  <code>\(1\+1\)\=2</code></p>
<p>CÃ¡c kÃ½ tá»± Ä‘áº·c biá»‡t lÃ : <code>+ - = &amp;&amp; || &gt; &lt; ! ( ) { } [ ] ^ " ~ * ? : \ /</code></p>
<p>KhÃ´ng thá»ƒ thoÃ¡t cÃ¡c kÃ½ tá»± Ä‘áº·c biá»‡t nÃ y má»™t cÃ¡ch chÃ­nh xÃ¡c cÃ³ thá»ƒ dáº«n Ä‘áº¿n lá»—i cÃº phÃ¡p vÃ  ngÄƒn truy váº¥n cá»§a báº¡n hoáº¡t Ä‘á»™ng.</p>
<h4>2.1.11. Truy váº¥n trá»‘ng</h4>
<p>Náº¿u chuá»—i truy váº¥n lÃ  trá»‘ng hoáº·c chá»‰ chá»©a khoáº£ng tráº¯ng, truy váº¥n sáº½ táº¡o ra má»™t táº­p káº¿t quáº£ trá»‘ng.</p>
<h3>2.2. Trá»±c quan hÃ³a</h3>
<p>Äá»ƒ hiá»ƒn thá»‹ dá»¯ liá»‡u cá»§a báº¡n dÆ°á»›i dáº¡ng trá»±c quan, hÃ£y nháº¥p vÃ o <code>Visualize</code> trong thanh Ä‘iá»u hÆ°á»›ng bÃªn.</p>
<p>CÃ´ng cá»¥ Visualize cho phÃ©p báº¡n xem dá»¯ liá»‡u theo nhiá»u cÃ¡ch khÃ¡c nhau, cháº³ng háº¡n nhÆ° biá»ƒu Ä‘á»“ trÃ²n, biá»ƒu Ä‘á»“ cá»™t, biá»ƒu Ä‘á»“ Ä‘Æ°á»ng, biá»ƒu Ä‘á»“ phÃ¢n phá»‘i, v.v. Äá»ƒ báº¯t Ä‘áº§u, hÃ£y nháº¥p vÃ o <code>Create a visualization</code> hoáº·c nÃºt <code>+</code> mÃ u xanh lÃ¡ cÃ¢y.</p>
<figure><img src="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-landing.png" alt="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-landing.png" tabindex="0" loading="lazy"><figcaption><a href="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-landing.png" target="_blank" rel="noopener noreferrer">https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-landing.png</a></figcaption></figure>
<p>CÃ³ nhiá»u loáº¡i trá»±c quan hÃ³a Ä‘á»ƒ lá»±a chá»n.</p>
<figure><img src="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-wizard-step-1.png" alt="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-wizard-step-1.png" tabindex="0" loading="lazy"><figcaption><a href="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-wizard-step-1.png" target="_blank" rel="noopener noreferrer">https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-wizard-step-1.png</a></figcaption></figure>
<p>DÆ°á»›i Ä‘Ã¢y, chÃºng ta sáº½ táº¡o má»™t sá»‘ vÃ­ dá»¥ biá»ƒu Ä‘á»“:</p>
<h4>2.2.1. Pie</h4>
<p>Báº¡n cÃ³ thá»ƒ xÃ¢y dá»±ng má»™t trá»±c quan hÃ³a tá»« tÃ¬m kiáº¿m Ä‘Ã£ lÆ°u hoáº·c nháº­p Ä‘iá»u kiá»‡n tÃ¬m kiáº¿m má»›i. Äá»ƒ nháº­p Ä‘iá»u kiá»‡n tÃ¬m kiáº¿m má»›i, trÆ°á»›c tiÃªn báº¡n cáº§n chá»n má»™t máº«u chá»‰ má»¥c Ä‘á»ƒ xÃ¡c Ä‘á»‹nh chá»‰ má»¥c báº¡n muá»‘n tÃ¬m kiáº¿m.</p>
<p>Máº·c Ä‘á»‹nh, tÃ¬m kiáº¿m khá»›p vá»›i táº¥t cáº£ cÃ¡c tÃ i liá»‡u. Ban Ä‘áº§u, má»™t "miáº¿ng" chá»©a toÃ n bá»™ biá»ƒu Ä‘á»“ trÃ²n:</p>
<figure><img src="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-pie-1.png" alt="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-pie-1.png" tabindex="0" loading="lazy"><figcaption><a href="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-pie-1.png" target="_blank" rel="noopener noreferrer">https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-pie-1.png</a></figcaption></figure>
<p>Äá»ƒ chá»‰ Ä‘á»‹nh dá»¯ liá»‡u nÃ o hiá»ƒn thá»‹ trong biá»ƒu Ä‘á»“, hÃ£y sá»­ dá»¥ng bucket aggregation cá»§a Elasticsearch. Grouping aggregation chá»‰ lÃ  viá»‡c phÃ¢n loáº¡i tÃ i liá»‡u khá»›p vá»›i Ä‘iá»u kiá»‡n tÃ¬m kiáº¿m cá»§a báº¡n thÃ nh cÃ¡c danh má»¥c khÃ¡c nhau, cÃ²n Ä‘Æ°á»£c gá»i lÃ  bucket.</p>
<p>Äá»‹nh nghÄ©a má»™t bucket cho má»—i pháº¡m vi:</p>
<ol>
<li>Nháº¥p vÃ o <code>Split Slices</code>.</li>
<li>Chá»n <code>Terms</code> trong danh sÃ¡ch <code>Aggregation</code>. <em>LÆ°u Ã½: CÃ¡c thuáº­t ngá»¯ á»Ÿ Ä‘Ã¢y lÃ  cÃ¡c trÆ°á»ng hoáº·c nhÃ£n Ä‘Ã£ Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh khi thu tháº­p dá»¯ liá»‡u Elk</em>.</li>
<li>Chá»n <code>level.keyword</code> trong danh sÃ¡ch <code>Field</code>.</li>
<li>Nháº¥p vÃ o <img src="https://www.elastic.co/guide/en/kibana/6.1/images/apply-changes-button.png" alt="images/apply-changes-button.png" loading="lazy"> Ä‘á»ƒ cáº­p nháº­t biá»ƒu Ä‘á»“.</li>
</ol>
<figure><img src="https://upload-images.jianshu.io/upload_images/3101171-7fb2042dc6d59520.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Sau khi hoÃ n thÃ nh, náº¿u báº¡n muá»‘n lÆ°u biá»ƒu Ä‘á»“ nÃ y, báº¡n cÃ³ thá»ƒ nháº¥p vÃ o nÃºt <code>Save</code> á»Ÿ phÃ­a trÃªn trang.</p>
<h4>2.2.2. Vertical Bar</h4>
<p>ChÃºng ta sáº½ xem cÃ¡ch táº¡o biá»ƒu Ä‘á»“ cá»™t dá»c.</p>
<ol>
<li>Nháº¥p vÃ o <code>Create a visualization</code> hoáº·c nÃºt <code>+</code> mÃ u xanh lÃ¡ cÃ¢y. Chá»n <code>Vertical Bar</code>.</li>
<li>Chá»n máº«u chá»‰ má»¥c. VÃ¬ báº¡n chÆ°a xÃ¡c Ä‘á»‹nh báº¥t ká»³ bucket nÃ o, báº¡n sáº½ tháº¥y má»™t thanh lá»›n hiá»ƒn thá»‹ tá»•ng sá»‘ tÃ i liá»‡u khá»›p vá»›i truy váº¥n máº·c Ä‘á»‹nh.</li>
<li>Chá»‰ Ä‘á»‹nh trÆ°á»ng Ä‘áº¡i diá»‡n cho trá»¥c Y.</li>
<li>Chá»‰ Ä‘á»‹nh trÆ°á»ng Ä‘áº¡i diá»‡n cho trá»¥c X.</li>
<li>Nháº¥p vÃ o <img src="https://www.elastic.co/guide/en/kibana/6.1/images/apply-changes-button.png" alt="images/apply-changes-button.png" loading="lazy"> Ä‘á»ƒ cáº­p nháº­t biá»ƒu Ä‘á»“.</li>
</ol>
<figure><img src="https://upload-images.jianshu.io/upload_images/3101171-5aa7627284c19a56.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Sau khi hoÃ n thÃ nh, náº¿u báº¡n muá»‘n lÆ°u biá»ƒu Ä‘á»“ nÃ y, báº¡n cÃ³ thá»ƒ nháº¥p vÃ o nÃºt <code>Save</code> á»Ÿ phÃ­a trÃªn trang.</p>
<h3>2.3. BÃ¡o cÃ¡o</h3>
<p><code>BÃ¡o cÃ¡o (Dashboard)</code> cho phÃ©p tá»•ng há»£p vÃ  chia sáº» táº­p há»£p <code>Visualize</code>.</p>
<ol>
<li>Nháº¥p vÃ o <code>Dashboard</code> trong thanh Ä‘iá»u hÆ°á»›ng bÃªn.</li>
<li>Nháº¥p vÃ o <code>ThÃªm hiá»ƒn thá»‹ tá»« danh sÃ¡ch Visualize Ä‘Ã£ lÆ°u</code>.</li>
<li>Nháº¥p vÃ o <code>Visualize</code> Ä‘Ã£ lÆ°u trÆ°á»›c Ä‘Ã³, sau Ä‘Ã³ nháº¥p vÃ o mÅ©i tÃªn nhá» á»Ÿ cuá»‘i danh sÃ¡ch Ä‘á»ƒ Ä‘Ã³ng danh sÃ¡ch Visualize.</li>
<li>Khi di chuá»™t qua Ä‘á»‘i tÆ°á»£ng Visualize, cÃ¡c Ä‘iá»u khiá»ƒn container sáº½ hiá»ƒn thá»‹ cho phÃ©p báº¡n chá»‰nh sá»­a, di chuyá»ƒn, xÃ³a vÃ  Ä‘iá»u chá»‰nh kÃ­ch thÆ°á»›c Ä‘á»‘i tÆ°á»£ng Visualize.</li>
</ol>
<h2>3. FAQ</h2>
<h3>3.1. Cáº£nh bÃ¡o Kibana No Default Index Pattern</h3>
<p><strong>CÃ¢u há»i:</strong> Sau khi cÃ i Ä‘áº·t ELK, khi truy cáº­p trang Kibana, tÃ´i nháº­n Ä‘Æ°á»£c cáº£nh bÃ¡o lá»—i sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Warning No default index pattern. You must select or create one to continue.</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>Unable to fetch mapping. Do you have indices matching the pattern?</span></span></code></pre>
</div><p>Äiá»u nÃ y cho tháº¥y logstash khÃ´ng ghi nháº­t kÃ½ vÃ o elasticsearch.</p>
<p><strong>Giáº£i phÃ¡p:</strong></p>
<p>Kiá»ƒm tra xem cÃ³ váº¥n Ä‘á» gÃ¬ vá» giao tiáº¿p giá»¯a logstash vÃ  elasticsearch, thÆ°á»ng lÃ  váº¥n Ä‘á» náº±m á»Ÿ Ä‘Ã¢y.</p>
<h2>4. TÃ i liá»‡u tham kháº£o</h2>
<ul>
<li><a href="https://www.elastic.co/cn/products/kibana" target="_blank" rel="noopener noreferrer">Trang web chÃ­nh thá»©c cá»§a Kibana</a></li>
<li><a href="https://github.com/elastic/kibana" target="_blank" rel="noopener noreferrer">Kibana Github</a></li>
<li><a href="https://www.elastic.co/guide/en/kibana/current/index.html" target="_blank" rel="noopener noreferrer">TÃ i liá»‡u chÃ­nh thá»©c cá»§a Kibana</a></li>
</ul>
]]></content:encoded>
      <enclosure url="https://www.elastic.co/guide/en/kibana/current/images/tutorial-discover.png" type="image/png"/>
    </item>
    <item>
      <title>Logstash Operation</title>
      <link>https://vanhung4499.github.io/database/elastic/logstash-operation.html</link>
      <guid>https://vanhung4499.github.io/database/elastic/logstash-operation.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Logstash Operation</source>
      <description>DÆ°á»›i Ä‘Ã¢y lÃ  báº£n dá»‹ch sang tiáº¿ng Viá»‡t cá»§a Ä‘oáº¡n vÄƒn báº¡n yÃªu cáº§u: Váº­n hÃ nh Logstash Logstash lÃ  má»™t pipeline xá»­ lÃ½ dá»¯ liá»‡u phÃ­a mÃ¡y chá»§ mÃ£ nguá»“n má»Ÿ, cÃ³ kháº£ nÄƒng thu tháº­p dá»¯ liá»‡u tá»«...</description>
      <category>elastic</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[<p>DÆ°á»›i Ä‘Ã¢y lÃ  báº£n dá»‹ch sang tiáº¿ng Viá»‡t cá»§a Ä‘oáº¡n vÄƒn báº¡n yÃªu cáº§u:</p>
<h1>Váº­n hÃ nh Logstash</h1>
<blockquote>
<p><a href="https://github.com/elastic/logstash" target="_blank" rel="noopener noreferrer">Logstash</a> lÃ  má»™t pipeline xá»­ lÃ½ dá»¯ liá»‡u phÃ­a mÃ¡y chá»§ mÃ£ nguá»“n má»Ÿ, cÃ³ kháº£ nÄƒng thu tháº­p dá»¯ liá»‡u tá»« nhiá»u nguá»“n, chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u vÃ  sau Ä‘Ã³ gá»­i dá»¯ liá»‡u Ä‘áº¿n "kho lÆ°u trá»¯" yÃªu thÃ­ch cá»§a báº¡n.</p>
</blockquote>
<h2>1. CÃ i Ä‘áº·t</h2>
<h3>1.1. CÃ¡c bÆ°á»›c cÃ i Ä‘áº·t</h3>
<p>CÃ¡c bÆ°á»›c cÃ i Ä‘áº·t nhÆ° sau:</p>
<p>(1) Táº£i xuá»‘ng gÃ³i phiÃªn báº£n mong muá»‘n tá»« <a href="https://www.elastic.co/downloads/logstash" target="_blank" rel="noopener noreferrer">Ä‘á»‹a chá»‰ táº£i xuá»‘ng chÃ­nh thá»©c cá»§a logstash</a> vÃ  giáº£i nÃ©n nÃ³ vÃ o mÃ¡y cá»¥c bá»™.</p>
<p>(2) ThÃªm tá»‡p <code>logstash.conf</code>, chá»‰ Ä‘á»‹nh cÃ¡c plugin báº¡n muá»‘n sá»­ dá»¥ng vÃ  cáº¥u hÃ¬nh cho má»—i plugin. DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ Ä‘Æ¡n giáº£n:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>input { stdin { } }</span></span>
<span class="line"><span>output {</span></span>
<span class="line"><span>  elasticsearch { hosts =&gt; ["localhost:9200"] }</span></span>
<span class="line"><span>  stdout { codec =&gt; rubydebug }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p>(3) Cháº¡y lá»‡nh <code>bin/logstash -f logstash.conf</code> (trÃªn Windows, cháº¡y <code>bin/logstash.bat -f logstash.conf</code>)</p>
<h2>2. Cáº¥u hÃ¬nh</h2>
<h3>2.1. Tá»‡p cáº¥u hÃ¬nh</h3>
<ul>
<li><strong><code>logstash.yml</code></strong>: Tá»‡p cáº¥u hÃ¬nh khá»Ÿi Ä‘á»™ng máº·c Ä‘á»‹nh cá»§a logstash.</li>
<li><strong><code>jvm.options</code></strong>: Tá»‡p cáº¥u hÃ¬nh JVM cá»§a logstash.</li>
<li><strong><code>startup.options</code></strong> (Linux): Chá»©a cÃ¡c tÃ¹y chá»n Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi táº­p lá»‡nh cÃ i Ä‘áº·t há»‡ thá»‘ng trong <code>/usr/share/logstash/bin</code> Ä‘á»ƒ xÃ¢y dá»±ng cÃ¡c táº­p lá»‡nh khá»Ÿi Ä‘á»™ng phÃ¹ há»£p cho há»‡ thá»‘ng cá»§a báº¡n. Khi cÃ i Ä‘áº·t gÃ³i logstash, táº­p lá»‡nh cÃ i Ä‘áº·t há»‡ thá»‘ng sáº½ Ä‘Æ°á»£c thá»±c thi khi quÃ¡ trÃ¬nh cÃ i Ä‘áº·t káº¿t thÃºc vÃ  sá»­ dá»¥ng cÃ¡c cÃ i Ä‘áº·t Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh trong <code>startup.options</code> Ä‘á»ƒ Ä‘áº·t ngÆ°á»i dÃ¹ng, nhÃ³m, tÃªn dá»‹ch vá»¥ vÃ  mÃ´ táº£ dá»‹ch vá»¥.</li>
</ul>
<h3>2.2. CÃ¡c má»¥c cáº¥u hÃ¬nh trong logstash.yml</h3>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ má»¥c cáº¥u hÃ¬nh Ä‘Æ°á»£c trÃ­ch dáº«n, vui lÃ²ng xem thÃªm táº¡i: <a href="https://www.elastic.co/guide/en/logstash/current/logstash-settings-file.html" target="_blank" rel="noopener noreferrer">https://www.elastic.co/guide/en/logstash/current/logstash-settings-file.html</a></p>
<p>| Tham sá»‘                    | MÃ´ táº£                                                                                                                                                                                                                                                                                                                                                            | GiÃ¡ trá»‹ máº·c Ä‘á»‹nh                                                                                                                         |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/3101171-cd876d79a14955b0.png" type="image/png"/>
    </item>
    <item>
      <title>Logstash</title>
      <link>https://vanhung4499.github.io/database/elastic/logstash.html</link>
      <guid>https://vanhung4499.github.io/database/elastic/logstash.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Logstash</source>
      <description>Elastic Stack: Logstash BÃ i viáº¿t nÃ y táº­p trung vÃ o Logstash, má»™t thÃ nh pháº§n cá»§a Elastic Technology Stack (ELK). Náº¿u báº¡n khÃ´ng quen vá»›i cÃ¡ch cÃ i Ä‘áº·t, cáº¥u hÃ¬nh vÃ  triá»ƒn khai Elast...</description>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>BÃ i viáº¿t nÃ y táº­p trung vÃ o Logstash, má»™t thÃ nh pháº§n cá»§a Elastic Technology Stack (ELK).</p>
<p>Náº¿u báº¡n khÃ´ng quen vá»›i cÃ¡ch cÃ i Ä‘áº·t, cáº¥u hÃ¬nh vÃ  triá»ƒn khai Elastic, báº¡n cÃ³ thá»ƒ tham kháº£o hÆ°á»›ng dáº«n: [[Elastic Quick Start|Báº¯t Ä‘áº§u nhanh vá»›i Elastic Technology Stack]])</p>
</blockquote>
<h2>Giá»›i thiá»‡u</h2>
<p>Logstash Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ váº­n chuyá»ƒn vÃ  xá»­ lÃ½ cÃ¡c logs, giao dá»‹ch hoáº·c dá»¯ liá»‡u khÃ¡c cá»§a báº¡n.</p>
<h3>TÃ­nh nÄƒng</h3>
<p>Logstash lÃ  á»‘ng dáº«n dá»¯ liá»‡u tá»‘t nháº¥t cho Elasticsearch.</p>
<p>Logstash tuÃ¢n theo kiáº¿n trÃºc dá»±a trÃªn plugin, cho phÃ©p tÃ¹y chá»‰nh thÃ´ng qua cÃ¡c plugin á»Ÿ cÃ¡c giai Ä‘oáº¡n input, filter, output vÃ  codec. Cá»™ng Ä‘á»“ng Logstash cung cáº¥p hÆ¡n 200 plugin cÃ³ sáºµn.</p>
<h3>CÃ¡ch hoáº¡t Ä‘á»™ng</h3>
<p>Logstash bao gá»“m ba yáº¿u tá»‘ cÆ¡ báº£n: <code>input</code>, <code>filter</code> vÃ  <code>output</code>. CÃ³ má»™t yáº¿u tá»‘ tÃ¹y chá»n lÃ  <code>codec</code>.</p>
<p>Ba yáº¿u tá»‘ nÃ y Ä‘áº¡i diá»‡n cho ba giai Ä‘oáº¡n xá»­ lÃ½ sá»± kiá»‡n cá»§a Logstash: input &gt; filter &gt; output.</p>
<figure><img src="https://www.elastic.co/guide/en/logstash/current/static/images/basic_logstash_pipeline.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<ul>
<li><code>input</code> cÃ³ trÃ¡ch nhiá»‡m thu tháº­p dá»¯ liá»‡u tá»« nguá»“n dá»¯ liá»‡u.</li>
<li><code>filter</code> sá»­a Ä‘á»•i dá»¯ liá»‡u thÃ nh Ä‘á»‹nh dáº¡ng hoáº·c ná»™i dung Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh.</li>
<li><code>output</code> chuyá»ƒn dá»¯ liá»‡u Ä‘áº¿n Ä‘Ã­ch cá»§a nÃ³.</li>
</ul>
<p>Trong cÃ¡c ká»‹ch báº£n thá»±c táº¿, thÆ°á»ng cÃ³ nhiá»u input, output vÃ  filter. Logstash cho phÃ©p ngÆ°á»i dÃ¹ng chá»n vÃ  káº¿t há»£p cÃ¡c plugin cho má»—i giai Ä‘oáº¡n dá»±a trÃªn nhu cáº§u á»©ng dá»¥ng cá»§a há».</p>
<p>Chi tiáº¿t vá» cÃ¡c plugin sáº½ Ä‘Æ°á»£c tháº£o luáº­n sau.</p>
<h2>Cáº¥u hÃ¬nh</h2>
<h3>Tá»‡p cáº¥u hÃ¬nh</h3>
<ul>
<li><strong><code>logstash.yml</code></strong>: Tá»‡p cáº¥u hÃ¬nh khá»Ÿi Ä‘á»™ng máº·c Ä‘á»‹nh cho Logstash.</li>
<li><strong><code>jvm.options</code></strong>: Tá»‡p cáº¥u hÃ¬nh JVM cho Logstash.</li>
<li><strong><code>startup.options</code></strong> (Linux): Chá»©a cÃ¡c tÃ¹y chá»n Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi táº­p lá»‡nh cÃ i Ä‘áº·t há»‡ thá»‘ng trong <code>/usr/share/logstash/bin</code> Ä‘á»ƒ xÃ¢y dá»±ng cÃ¡c táº­p lá»‡nh khá»Ÿi Ä‘á»™ng phÃ¹ há»£p cho há»‡ thá»‘ng cá»§a báº¡n. Táº­p lá»‡nh cÃ i Ä‘áº·t há»‡ thá»‘ng Ä‘Æ°á»£c thá»±c thi trong quÃ¡ trÃ¬nh cÃ i Ä‘áº·t vÃ  Ä‘áº·t cÃ¡c tÃ¹y chá»n nhÆ° ngÆ°á»i dÃ¹ng, nhÃ³m, tÃªn dá»‹ch vá»¥ vÃ  mÃ´ táº£ dá»‹ch vá»¥ dá»±a trÃªn cÃ¡c thiáº¿t láº­p Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh trong <code>startup.options</code>.</li>
</ul>
<h3>CÃ i Ä‘áº·t logstash.yml</h3>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ cÃ i Ä‘áº·t Ä‘Æ°á»£c chá»n lá»c. Äá»ƒ biáº¿t thÃªm tÃ¹y chá»n, vui lÃ²ng tham kháº£o: <a href="https://www.elastic.co/guide/en/logstash/current/logstash-settings-file.html" target="_blank" rel="noopener noreferrer">https://www.elastic.co/guide/en/logstash/current/logstash-settings-file.html</a></p>
<p>| Tham sá»‘                    | MÃ´ táº£                                                                                                                                                                                                                                                                                                                                                         | GiÃ¡ trá»‹ máº·c Ä‘á»‹nh                                                                                                                            |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://www.elastic.co/guide/en/logstash/current/static/images/basic_logstash_pipeline.png" type="image/png"/>
    </item>
    <item>
      <title>Elastic Overview</title>
      <link>https://vanhung4499.github.io/database/elastic/overview.html</link>
      <guid>https://vanhung4499.github.io/database/elastic/overview.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elastic Overview</source>
      <description>Elastic Stack Overview Elastic Stack thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng lÃ m giáº£i phÃ¡p cho viá»‡c thu tháº­p, truy xuáº¥t vÃ  trá»±c quan hÃ³a nháº­t kÃ½ (log). ELK lÃ  viáº¿t táº¯t cá»§a ba sáº£n pháº©m thuá»™c cÃ´ng ty...</description>
      <category>elastic</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p><strong>Elastic Stack thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng lÃ m giáº£i phÃ¡p cho viá»‡c thu tháº­p, truy xuáº¥t vÃ  trá»±c quan hÃ³a nháº­t kÃ½ (log).</strong></p>
<p>ELK lÃ  viáº¿t táº¯t cá»§a ba sáº£n pháº©m thuá»™c cÃ´ng ty Elastic:&nbsp;<a href="https://www.elastic.co/products/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch</a>,&nbsp;<a href="https://www.elastic.co/products/logstash" target="_blank" rel="noopener noreferrer">Logstash</a>&nbsp;vÃ &nbsp;<a href="https://www.elastic.co/products/kibana" target="_blank" rel="noopener noreferrer">Kibana</a>.</p>
<p><a href="https://www.elastic.co/products/logstash" target="_blank" rel="noopener noreferrer">Logstash</a>&nbsp;Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ truyá»n vÃ  xá»­ lÃ½ nháº­t kÃ½, giao dá»‹ch hoáº·c dá»¯ liá»‡u khÃ¡c.</p>
<p><a href="https://www.elastic.co/products/kibana" target="_blank" rel="noopener noreferrer">Kibana</a>&nbsp;Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ phÃ¢n tÃ­ch dá»¯ liá»‡u tá»« Elasticsearch vÃ  hiá»ƒn thá»‹ chÃºng dÆ°á»›i dáº¡ng bÃ¡o cÃ¡o trá»±c quan.</p>
<p>Elastic Stack Ä‘Ã£ má»Ÿ rá»™ng thÃªm má»™t sá»‘ sáº£n pháº©m má»›i trÃªn cÆ¡ sá»Ÿ cá»§a ELK, cháº³ng háº¡n nhÆ°:&nbsp;<a href="https://www.elastic.co/products/beats" target="_blank" rel="noopener noreferrer">Beats</a>&nbsp;vÃ &nbsp;<a href="https://www.elastic.co/products/x-pack" target="_blank" rel="noopener noreferrer">X-Pack</a>.</p>
</blockquote>
<h2>ğŸ“– Contents</h2>
]]></content:encoded>
    </item>
    <item>
      <title>Elastic Quick Start</title>
      <link>https://vanhung4499.github.io/database/elastic/quick-start.html</link>
      <guid>https://vanhung4499.github.io/database/elastic/quick-start.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elastic Quick Start</source>
      <description>1. HÆ°á»›ng dáº«n nhanh vá» Elastic Giáº¥y phÃ©p mÃ£ nguá»“n má»Ÿ: Apache 2.0 1. Giá»›i thiá»‡u 1.1. Elastic Stack lÃ  gÃ¬ Elastic Stack cÃ²n Ä‘Æ°á»£c gá»i lÃ  ELK Stack. ELK lÃ  viáº¿t táº¯t cá»§a ba sáº£n pháº©m c...</description>
      <category>elastic</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[<h2>1. HÆ°á»›ng dáº«n nhanh vá» Elastic</h2>
<blockquote>
<p>Giáº¥y phÃ©p mÃ£ nguá»“n má»Ÿ: <a href="https://github.com/elastic/elasticsearch/tree/7.4/licenses/APACHE-LICENSE-2.0.txt" target="_blank" rel="noopener noreferrer">Apache 2.0</a></p>
</blockquote>
<h2>1. Giá»›i thiá»‡u</h2>
<h3>1.1. Elastic Stack lÃ  gÃ¬</h3>
<p><strong>Elastic Stack</strong> cÃ²n Ä‘Æ°á»£c gá»i lÃ  <strong>ELK Stack</strong>.</p>
<p>ELK lÃ  viáº¿t táº¯t cá»§a ba sáº£n pháº©m cá»§a cÃ´ng ty Elastic: <a href="https://www.elastic.co/cn/products/elasticsearch" target="_blank" rel="noopener noreferrer">ElasticSearch</a>, <a href="https://www.elastic.co/cn/products/logstash" target="_blank" rel="noopener noreferrer">Logstash</a>, vÃ  <a href="https://www.elastic.co/cn/products/kibana" target="_blank" rel="noopener noreferrer">Kibana</a>.</p>
<ul>
<li>Elasticsearch lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch.</li>
<li>Logstash lÃ  má»™t pipeline xá»­ lÃ½ dá»¯ liá»‡u phÃ­a mÃ¡y chá»§, cÃ³ kháº£ nÄƒng thu tháº­p dá»¯ liá»‡u tá»« nhiá»u nguá»“n cÃ¹ng má»™t lÃºc, chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u, sau Ä‘Ã³ gá»­i dá»¯ liá»‡u Ä‘áº¿n cÃ¡c "kho lÆ°u trá»¯" nhÆ° Elasticsearch.</li>
<li>Kibana cho phÃ©p ngÆ°á»i dÃ¹ng trá»±c quan hÃ³a dá»¯ liá»‡u trong Elasticsearch báº±ng cÃ¡c biá»ƒu Ä‘á»“ vÃ  biá»ƒu Ä‘á»“.</li>
</ul>
<p>Elastic Stack lÃ  phiÃªn báº£n cáº­p nháº­t cá»§a ELK Stack, sáº£n pháº©m má»›i nháº¥t Ä‘Ã£ giá»›i thiá»‡u cÃ¡c bá»™ thu tháº­p dá»¯ liá»‡u chá»©c nÄƒng Ä‘Æ¡n láº» nháº¹ vÃ  Ä‘áº·t tÃªn cho chÃºng lÃ  <a href="https://www.elastic.co/beats" target="_blank" rel="noopener noreferrer">Beats</a>.</p>
<h3>1.2. Táº¡i sao sá»­ dá»¥ng Elastic Stack</h3>
<p>Äá»‘i vá»›i cÃ¡c cÃ´ng ty cÃ³ quy mÃ´ nháº¥t Ä‘á»‹nh, thÆ°á»ng sáº½ cÃ³ nhiá»u á»©ng dá»¥ng vÃ  Ä‘Æ°á»£c triá»ƒn khai trÃªn má»™t sá»‘ lÆ°á»£ng lá»›n mÃ¡y chá»§. NhÃ¢n viÃªn váº­n hÃ nh vÃ  phÃ¡t triá»ƒn thÆ°á»ng cáº§n xem nháº­t kÃ½ Ä‘á»ƒ xÃ¡c Ä‘á»‹nh váº¥n Ä‘á». Náº¿u á»©ng dá»¥ng Ä‘Æ°á»£c triá»ƒn khai theo cá»¥m, hÃ£y tÆ°á»Ÿng tÆ°á»£ng náº¿u báº¡n Ä‘Äƒng nháº­p vÃ o tá»«ng mÃ¡y chá»§ Ä‘á»ƒ xem nháº­t kÃ½, Ä‘iá»u nÃ y sáº½ tá»‘n nhiá»u thá»i gian vÃ  cÃ´ng sá»©c.</p>
<p>Vá»›i giáº£i phÃ¡p ELK, báº¡n cÃ³ thá»ƒ thu tháº­p, tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch nháº­t kÃ½ cÃ¹ng má»™t lÃºc.</p>
<h3>1.3. Kiáº¿n trÃºc Elastic Stack</h3>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/deploy3.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<blockquote>
<p><strong>Giáº£i thÃ­ch</strong></p>
<p>ÄÃ¢y lÃ  má»™t sÆ¡ Ä‘á»“ kiáº¿n trÃºc cá»§a Elastic Stack. Tá»« hÃ¬nh trÃªn, báº¡n cÃ³ thá»ƒ rÃµ rÃ ng tháº¥y hÆ°á»›ng dÃ²ng dá»¯ liá»‡u.</p>
<ul>
<li><a href="https://www.elastic.co/products/beats" target="_blank" rel="noopener noreferrer">Beats</a> lÃ  má»™t ná»n táº£ng truyá»n dá»¯ liá»‡u Ä‘Æ¡n chá»©c nÄƒng, nÃ³ cÃ³ thá»ƒ gá»­i dá»¯ liá»‡u tá»« nhiá»u mÃ¡y chá»§ Ä‘áº¿n Logstash hoáº·c ElasticSearch. Tuy nhiÃªn, Beats khÃ´ng pháº£i lÃ  má»™t pháº§n khÃ´ng thá»ƒ thiáº¿u, vÃ¬ váº­y bÃ i viáº¿t nÃ y sáº½ khÃ´ng giá»›i thiá»‡u.</li>
<li><a href="https://www.elastic.co/products/logstash" target="_blank" rel="noopener noreferrer">Logstash</a> lÃ  má»™t pipeline thu tháº­p dá»¯ liá»‡u Ä‘á»™ng. Há»— trá»£ thu tháº­p dá»¯ liá»‡u theo nhiá»u cÃ¡ch nhÆ° TCP/UDP/HTTP (cÅ©ng cÃ³ thá»ƒ nháº­n dá»¯ liá»‡u Ä‘Æ°á»£c Beats truyá»n Ä‘áº¿n), vÃ  xá»­ lÃ½ dá»¯ liá»‡u Ä‘á»ƒ lÃ m giÃ u hoáº·c trÃ­ch xuáº¥t trÆ°á»ng.</li>
<li><a href="https://www.elastic.co/products/elasticsearch" target="_blank" rel="noopener noreferrer">ElasticSearch</a> lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch phÃ¢n tÃ¡n dá»±a trÃªn JSON. LÃ  trung tÃ¢m cá»§a ELK, nÃ³ lÆ°u trá»¯ dá»¯ liá»‡u táº­p trung.</li>
<li><a href="https://www.elastic.co/products/kibana" target="_blank" rel="noopener noreferrer">Kibana</a> lÃ  giao diá»‡n ngÆ°á»i dÃ¹ng cá»§a ELK. NÃ³ trá»±c quan hÃ³a dá»¯ liá»‡u Ä‘Ã£ thu tháº­p (cÃ¡c bÃ¡o cÃ¡o, dá»¯ liá»‡u hÃ¬nh há»c) vÃ  cung cáº¥p giao diá»‡n Ä‘á»ƒ cáº¥u hÃ¬nh, quáº£n lÃ½ ELK.</li>
</ul>
</blockquote>
<h2>2. ElasticSearch</h2>
<blockquote>
<p><a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch</a>&nbsp;lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch dá»¯ liá»‡u phong cÃ¡ch RESTful, phÃ¢n tÃ¡n, cÃ³ thá»ƒ giáº£i quyáº¿t nhiá»u trÆ°á»ng há»£p sá»­ dá»¥ng xuáº¥t hiá»‡n liÃªn tá»¥c. LÃ  trung tÃ¢m cá»§a Elastic Stack, nÃ³ lÆ°u trá»¯ dá»¯ liá»‡u cá»§a báº¡n, giÃºp báº¡n khÃ¡m phÃ¡ cÃ¡c tÃ¬nh huá»‘ng dá»± kiáº¿n vÃ  khÃ´ng dá»± kiáº¿n.</p>
</blockquote>
<h3>2.1. Giá»›i thiá»‡u vá» ElasticSearch</h3>
<p><a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch</a>&nbsp;Ä‘Æ°á»£c phÃ¡t triá»ƒn dá»±a trÃªn thÆ° viá»‡n tÃ¬m kiáº¿m&nbsp;<a href="https://github.com/apache/lucene-solr" target="_blank" rel="noopener noreferrer">Lucene</a>. Elasticsearch giáº¥u Ä‘i sá»± phá»©c táº¡p cá»§a Lucene, cung cáº¥p giao diá»‡n API REST / Java dá»… sá»­ dá»¥ng (cÅ©ng nhÆ° cÃ¡c giao diá»‡n API báº±ng ngÃ´n ngá»¯ khÃ¡c).</p>
<p>Elasticsearch cÃ³ thá»ƒ Ä‘Æ°á»£c xem nhÆ° má»™t kho lÆ°u trá»¯ tÃ i liá»‡u, nÆ¡i nÃ³&nbsp;<strong>chuyá»ƒn Ä‘á»•i cÃ¡c cáº¥u trÃºc dá»¯ liá»‡u phá»©c táº¡p thÃ nh JSON Ä‘á»ƒ lÆ°u trá»¯</strong>.</p>
<p><strong>ElasticSearch lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m toÃ n vÄƒn gáº§n nhÆ° thá»i gian thá»±c</strong>, Ä‘iá»u nÃ y cÃ³ nghÄ©a lÃ :</p>
<ul>
<li>Tá»« khi ghi dá»¯ liá»‡u Ä‘áº¿n khi dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¬m kiáº¿m, cÃ³ má»™t Ä‘á»™ trá»… nhá» (khoáº£ng 1s)</li>
<li>CÃ¡c hoáº¡t Ä‘á»™ng tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch dá»±a trÃªn ES cÃ³ thá»ƒ Ä‘áº¡t Ä‘Æ°á»£c má»©c Ä‘á»™ giÃ¢y</li>
</ul>
<h4>2.1.1. KhÃ¡i niá»‡m cá»‘t lÃµi</h4>
<ul>
<li><strong><code>Index</code></strong>&nbsp;cÃ³ thá»ƒ Ä‘Æ°á»£c coi lÃ  má»™t táº­p há»£p tá»‘i Æ°u cá»§a cÃ¡c tÃ i liá»‡u (document).</li>
<li>Má»—i&nbsp;<strong><code>document</code></strong>&nbsp;lÃ  má»™t táº­p há»£p cÃ¡c trÆ°á»ng (field).</li>
<li><strong><code>Field</code></strong>&nbsp;lÃ  má»™t cáº·p giÃ¡ trá»‹ key-value chá»©a dá»¯ liá»‡u.</li>
<li>Theo máº·c Ä‘á»‹nh, Elasticsearch xÃ¢y dá»±ng chá»‰ má»¥c cho táº¥t cáº£ dá»¯ liá»‡u trong má»—i trÆ°á»ng vÃ  má»—i trÆ°á»ng chá»‰ má»¥c Ä‘á»u cÃ³ cáº¥u trÃºc dá»¯ liá»‡u tá»‘i Æ°u hÃ³a riÃªng.</li>
<li>Má»—i chá»‰ má»¥c cÃ³ thá»ƒ cÃ³ má»™t hoáº·c nhiá»u loáº¡i (type).&nbsp;<code>Type</code>&nbsp;lÃ  má»™t phÃ¢n loáº¡i logic cá»§a chá»‰ má»¥c,</li>
<li>Khi má»™t mÃ¡y khÃ´ng Ä‘á»§ Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u lá»›n, Elasticsearch cÃ³ thá»ƒ chia dá»¯ liá»‡u trong má»™t chá»‰ má»¥c thÃ nh nhiá»u&nbsp;<strong><code>shard</code></strong>.&nbsp;<strong><code>Shard</code></strong>&nbsp;Ä‘Æ°á»£c lÆ°u trá»¯ trÃªn nhiá»u mÃ¡y chá»§. Vá»›i shard, báº¡n cÃ³ thá»ƒ má»Ÿ rá»™ng theo chiá»u ngang, lÆ°u trá»¯ nhiá»u dá»¯ liá»‡u hÆ¡n, cho phÃ©p cÃ¡c hoáº¡t Ä‘á»™ng tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch Ä‘Æ°á»£c phÃ¢n phá»‘i trÃªn nhiá»u mÃ¡y chá»§, tÄƒng cÆ°á»ng throughput vÃ  hiá»‡u suáº¥t. Má»—i shard Ä‘á»u lÃ  má»™t chá»‰ má»¥c lucene.</li>
<li>Báº¥t ká»³ mÃ¡y chá»§ nÃ o cÅ©ng cÃ³ thá»ƒ gáº·p sá»± cá»‘ hoáº·c bá»‹ táº¯t báº¥t cá»© lÃºc nÃ o, lÃºc nÃ y shard cÃ³ thá»ƒ bá»‹ máº¥t, do Ä‘Ã³, báº¡n cÃ³ thá»ƒ táº¡o nhiá»u&nbsp;<strong><code>replica</code></strong>&nbsp;cho má»—i shard. Replica cÃ³ thá»ƒ cung cáº¥p dá»‹ch vá»¥ dá»± phÃ²ng khi shard gáº·p sá»± cá»‘, Ä‘áº£m báº£o dá»¯ liá»‡u khÃ´ng bá»‹ máº¥t, nhiá»u replica cÅ©ng cÃ³ thá»ƒ tÄƒng cÆ°á»ng throughput vÃ  hiá»‡u suáº¥t cá»§a hoáº¡t Ä‘á»™ng tÃ¬m kiáº¿m. Primary shard (Ä‘Æ°á»£c thiáº¿t láº­p khi táº¡o chá»‰ má»¥c, khÃ´ng thá»ƒ sá»­a Ä‘á»•i, máº·c Ä‘á»‹nh lÃ  5), replica shard (cÃ³ thá»ƒ thay Ä‘á»•i sá»‘ lÆ°á»£ng báº¥t cá»© lÃºc nÃ o, máº·c Ä‘á»‹nh lÃ  1), máº·c Ä‘á»‹nh má»—i chá»‰ má»¥c cÃ³ 10 shard, 5 primary shard, 5 replica shard, cáº¥u hÃ¬nh cÃ³ sáºµn tá»‘i thiá»ƒu, lÃ  2 mÃ¡y chá»§.</li>
</ul>
<h3>2.2. NguyÃªn lÃ½ ElasticSearch</h3>
<h4>2.2.1. QuÃ¡ trÃ¬nh ghi dá»¯ liá»‡u ES</h4>
<ul>
<li>MÃ¡y khÃ¡ch chá»n má»™t node vÃ  gá»­i yÃªu cáº§u Ä‘áº¿n, node nÃ y Ä‘Æ°á»£c gá»i lÃ &nbsp;<code>coordinating node</code>&nbsp;(nÃºt Ä‘iá»u phá»‘i).</li>
<li><code>Coordinating node</code>&nbsp;thá»±c hiá»‡n&nbsp;<strong>Ä‘á»‹nh tuyáº¿n</strong>&nbsp;cho document vÃ  chuyá»ƒn tiáº¿p yÃªu cáº§u Ä‘áº¿n node tÆ°Æ¡ng á»©ng (cÃ³ primary shard).</li>
<li><code>Primary shard</code>&nbsp;trÃªn node thá»±c táº¿ xá»­ lÃ½ yÃªu cáº§u, sau Ä‘Ã³ Ä‘á»“ng bá»™ hÃ³a dá»¯ liá»‡u vá»›i&nbsp;<code>replica node</code>.</li>
<li>Náº¿u&nbsp;<code>coordinating node</code>&nbsp;phÃ¡t hiá»‡n&nbsp;<code>primary node</code>&nbsp;vÃ  táº¥t cáº£&nbsp;<code>replica node</code>&nbsp;Ä‘á»u Ä‘Ã£ hoÃ n thÃ nh, nÃ³ sáº½ tráº£ láº¡i káº¿t quáº£ pháº£n há»“i cho mÃ¡y khÃ¡ch.</li>
</ul>
<h4>2.2.2. QuÃ¡ trÃ¬nh Ä‘á»c dá»¯ liá»‡u es</h4>
<p>Báº¡n cÃ³ thá»ƒ tÃ¬m kiáº¿m theo&nbsp;<code>doc id</code>, sáº½ dá»±a trÃªn&nbsp;<code>doc id</code>&nbsp;Ä‘á»ƒ thá»±c hiá»‡n hash, xÃ¡c Ä‘á»‹nh xem lÃºc Ä‘Ã³&nbsp;<code>doc id</code>&nbsp;Ä‘Ã£ Ä‘Æ°á»£c phÃ¢n bá»• vÃ o shard nÃ o, tá»« shard Ä‘Ã³ Ä‘á»ƒ tÃ¬m kiáº¿m.</p>
<ul>
<li>MÃ¡y khÃ¡ch gá»­i yÃªu cáº§u Ä‘áº¿n&nbsp;<strong>báº¥t ká»³</strong>&nbsp;má»™t node, trá»Ÿ thÃ nh&nbsp;<code>coordinate node</code>.</li>
<li><code>Coordinate node</code>&nbsp;Ä‘á»‹nh tuyáº¿n&nbsp;<code>doc id</code>&nbsp;theo hash, chuyá»ƒn yÃªu cáº§u Ä‘áº¿n node tÆ°Æ¡ng á»©ng, lÃºc nÃ y sáº½ sá»­ dá»¥ng thuáº­t toÃ¡n&nbsp;<strong>round-robin ngáº«u nhiÃªn</strong>, chá»n ngáº«u nhiÃªn má»™t trong sá»‘&nbsp;<code>primary shard</code>&nbsp;vÃ  táº¥t cáº£ cÃ¡c replica cá»§a nÃ³, Ä‘á»ƒ cÃ¢n báº±ng táº£i yÃªu cáº§u Ä‘á»c.</li>
<li>Node nháº­n yÃªu cáº§u tráº£ vá» document cho&nbsp;<code>coordinate node</code>.</li>
<li><code>Coordinate node</code>&nbsp;tráº£ vá» document cho mÃ¡y khÃ¡ch.</li>
</ul>
<h4>2.2.3. NguyÃªn lÃ½ cÆ¡ báº£n cá»§a viá»‡c ghi dá»¯ liá»‡u</h4>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240223111949.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Äáº§u tiÃªn, dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c ghi vÃ o bá»™ Ä‘á»‡m trong bá»™ nhá»› (buffer), trong quÃ¡ trÃ¬nh nÃ y dá»¯ liá»‡u khÃ´ng thá»ƒ Ä‘Æ°á»£c tÃ¬m kiáº¿m; Ä‘á»“ng thá»i dá»¯ liá»‡u cÅ©ng Ä‘Æ°á»£c ghi vÃ o tá»‡p nháº­t kÃ½ translog.</p>
<p>Náº¿u bá»™ Ä‘á»‡m gáº§n nhÆ° Ä‘áº§y, hoáº·c sau má»™t khoáº£ng thá»i gian nháº¥t Ä‘á»‹nh, dá»¯ liá»‡u trong bá»™ Ä‘á»‡m sáº½ Ä‘Æ°á»£c&nbsp;<code>refresh</code>&nbsp;vÃ o má»™t&nbsp;<code>segment file</code>&nbsp;má»›i, nhÆ°ng lÃºc nÃ y dá»¯ liá»‡u khÃ´ng Ä‘Æ°á»£c ghi trá»±c tiáº¿p vÃ o tá»‡p&nbsp;<code>segment file</code> trÃªn Ä‘Ä©a, mÃ  pháº£i Ä‘i vÃ o&nbsp;<code>os cache</code>&nbsp;trÆ°á»›c. QuÃ¡ trÃ¬nh nÃ y Ä‘Æ°á»£c gá»i lÃ &nbsp;<code>refresh</code>.</p>
<p>Má»—i giÃ¢y, ES sáº½ ghi dá»¯ liá»‡u trong bá»™ Ä‘á»‡m vÃ o má»™t&nbsp;<code>segment file</code>&nbsp;<strong>má»›i</strong>, má»—i giÃ¢y sáº½ táº¡o ra má»™t tá»‡p Ä‘Ä©a <code>segment file</code>&nbsp;<strong>má»›i</strong>, tá»‡p&nbsp;<code>segment file</code> nÃ y sáº½ lÆ°u trá»¯ dá»¯ liá»‡u Ä‘Æ°á»£c ghi vÃ o bá»™ Ä‘á»‡m trong 1 giÃ¢y gáº§n Ä‘Ã¢y.</p>
<p>Tuy nhiÃªn, náº¿u khÃ´ng cÃ³ dá»¯ liá»‡u trong bá»™ Ä‘á»‡m, thÃ¬ táº¥t nhiÃªn khÃ´ng cÃ³ quÃ¡ trÃ¬nh refresh nÃ o Ä‘Æ°á»£c thá»±c hiá»‡n, náº¿u cÃ³ dá»¯ liá»‡u trong bá»™ Ä‘á»‡m, máº·c Ä‘á»‹nh sáº½ thá»±c hiá»‡n má»™t láº§n refresh má»—i giÃ¢y, Ä‘áº©y dá»¯ liá»‡u vÃ o má»™t&nbsp;<code>segment file</code>&nbsp;má»›i.</p>
<p>TrÃªn há»‡ Ä‘iá»u hÃ nh, tá»‡p Ä‘Ä©a thá»±c táº¿ Ä‘á»u cÃ³ má»™t thá»© gá»i lÃ &nbsp;<code>os cache</code>, tá»©c lÃ  trÆ°á»›c khi dá»¯ liá»‡u Ä‘Æ°á»£c ghi vÃ o tá»‡p Ä‘Ä©a, nÃ³ sáº½ Ä‘Æ°á»£c Ä‘Æ°a vÃ o&nbsp;<code>os cache</code> trÆ°á»›c, Ä‘áº§u tiÃªn vÃ o bá»™ nhá»› cache cáº¥p há»‡ Ä‘iá»u hÃ nh. Chá»‰ cáº§n dá»¯ liá»‡u trong bá»™ Ä‘á»‡m Ä‘Æ°á»£c chuyá»ƒn vÃ o&nbsp;<code>os cache</code>&nbsp;thÃ´ng qua hoáº¡t Ä‘á»™ng refresh, dá»¯ liá»‡u nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¬m kiáº¿m.</p>
<p>Táº¡i sao nÃ³i ráº±ng ES lÃ &nbsp;<strong>gáº§n nhÆ° thá»i gian thá»±c</strong>?&nbsp;<code>NRT</code>, tÃªn Ä‘áº§y Ä‘á»§ lÃ &nbsp;<code>near real-time</code>. Máº·c Ä‘á»‹nh lÃ  refresh má»—i giÃ¢y má»™t láº§n, vÃ¬ váº­y ES lÃ  gáº§n nhÆ° thá»i gian thá»±c, vÃ¬ dá»¯ liá»‡u Ä‘Æ°á»£c ghi vÃ o sau 1 giÃ¢y má»›i cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¬m tháº¥y. Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng&nbsp;<code>restful api</code>&nbsp;cá»§a es hoáº·c&nbsp;<code>java api</code>&nbsp;Ä‘á»ƒ thá»±c hiá»‡n má»™t hoáº¡t Ä‘á»™ng refresh&nbsp;<strong>thá»§ cÃ´ng</strong>, tá»©c lÃ  thá»§ cÃ´ng Ä‘Æ°a dá»¯ liá»‡u trong bá»™ Ä‘á»‡m vÃ o&nbsp;<code>os cache</code>, Ä‘á»ƒ dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¬m kiáº¿m ngay láº­p tá»©c. Miá»…n lÃ  dá»¯ liá»‡u Ä‘Æ°á»£c Ä‘Æ°a vÃ o&nbsp;<code>os cache</code>, bá»™ Ä‘á»‡m sáº½ Ä‘Æ°á»£c lÃ m sáº¡ch, vÃ¬ khÃ´ng cáº§n giá»¯ bá»™ Ä‘á»‡m ná»¯a, dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c lÆ°u trá»¯ trong tá»‡p nháº­t kÃ½ translog má»™t láº§n.</p>
<p>Láº·p láº¡i cÃ¡c bÆ°á»›c trÃªn, dá»¯ liá»‡u má»›i liÃªn tá»¥c vÃ o bá»™ Ä‘á»‡m vÃ  translog, liÃªn tá»¥c ghi dá»¯ liá»‡u&nbsp;<code>buffer</code>&nbsp;vÃ o má»™t&nbsp;<code>segment file</code>&nbsp;má»›i sau má»—i láº§n&nbsp;<code>refresh</code>, sau má»—i láº§n&nbsp;<code>refresh</code>&nbsp;bá»™ Ä‘á»‡m sáº½ Ä‘Æ°á»£c lÃ m sáº¡ch, translog sáº½ Ä‘Æ°á»£c giá»¯ láº¡i. Khi quÃ¡ trÃ¬nh nÃ y tiáº¿p diá»…n, translog sáº½ ngÃ y cÃ ng lá»›n. Khi translog Ä‘áº¡t Ä‘áº¿n má»™t Ä‘á»™ dÃ i nháº¥t Ä‘á»‹nh, nÃ³ sáº½ kÃ­ch hoáº¡t hoáº¡t Ä‘á»™ng&nbsp;<code>commit</code>.</p>
<p>BÆ°á»›c Ä‘áº§u tiÃªn cá»§a hoáº¡t Ä‘á»™ng commit lÃ  ghi dá»¯ liá»‡u hiá»‡n cÃ³ trong bá»™ Ä‘á»‡m vÃ o&nbsp;<code>os cache</code>, sau Ä‘Ã³ lÃ m sáº¡ch bá»™ Ä‘á»‡m. Sau Ä‘Ã³, ghi má»™t&nbsp;<code>commit point</code>&nbsp;vÃ o tá»‡p Ä‘Ä©a, trong Ä‘Ã³ Ä‘Ã¡nh dáº¥u táº¥t cáº£ cÃ¡c&nbsp;<code>segment file</code>&nbsp;tÆ°Æ¡ng á»©ng vá»›i&nbsp;<code>commit point</code>&nbsp;nÃ y, Ä‘á»“ng thá»i buá»™c&nbsp;<code>os cache</code>&nbsp;chá»©a táº¥t cáº£ dá»¯ liá»‡u hiá»‡n táº¡i Ä‘á»ƒ Ä‘Æ°á»£c&nbsp;<code>fsync</code>&nbsp;vÃ o tá»‡p Ä‘Ä©a. Cuá»‘i cÃ¹ng,&nbsp;<strong>xÃ³a</strong>&nbsp;tá»‡p nháº­t kÃ½ translog hiá»‡n táº¡i, khá»Ÿi Ä‘á»™ng láº¡i má»™t translog, lÃºc nÃ y hoáº¡t Ä‘á»™ng commit Ä‘Ã£ hoÃ n thÃ nh.</p>
<p>Hoáº¡t Ä‘á»™ng commit nÃ y Ä‘Æ°á»£c gá»i lÃ &nbsp;<code>flush</code>. Máº·c Ä‘á»‹nh lÃ  má»—i 30 phÃºt tá»± Ä‘á»™ng thá»±c hiá»‡n má»™t láº§n&nbsp;<code>flush</code>, nhÆ°ng náº¿u translog quÃ¡ lá»›n, cÅ©ng sáº½ kÃ­ch hoáº¡t&nbsp;<code>flush</code>. Hoáº¡t Ä‘á»™ng flush tÆ°Æ¡ng á»©ng vá»›i toÃ n bá»™ quÃ¡ trÃ¬nh commit, chÃºng ta cÃ³ thá»ƒ thÃ´ng qua api cá»§a es, thá»±c hiá»‡n thá»§ cÃ´ng hoáº¡t Ä‘á»™ng flush, thá»§ cÃ´ng&nbsp;<code>fsync</code>&nbsp;dá»¯ liá»‡u trong&nbsp;<code>os cache</code>&nbsp;vÃ o Ä‘Ä©a.</p>
<p>Tá»‡p nháº­t kÃ½ translog cÃ³ vai trÃ² gÃ¬? TrÆ°á»›c khi báº¡n thá»±c hiá»‡n hoáº¡t Ä‘á»™ng commit, dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘ang náº±m trong bá»™ Ä‘á»‡m hoáº·c náº±m trong&nbsp;<code>os cache</code>. DÃ¹ lÃ  bá»™ Ä‘á»‡m hay&nbsp;<code>os cache</code>&nbsp;Ä‘á»u lÃ  bá»™ nhá»›, náº¿u mÃ¡y nÃ y bá»‹ há»ng, dá»¯ liá»‡u trong bá»™ nhá»› sáº½ máº¥t háº¿t. VÃ¬ váº­y, cáº§n ghi cÃ¡c hoáº¡t Ä‘á»™ng tÆ°Æ¡ng á»©ng cá»§a dá»¯ liá»‡u vÃ o má»™t tá»‡p nháº­t kÃ½ Ä‘áº·c biá»‡t lÃ &nbsp;<code>translog</code>, náº¿u mÃ¡y bá»‹ há»ng lÃºc nÃ y, khi khá»Ÿi Ä‘á»™ng láº¡i, es sáº½ tá»± Ä‘á»™ng Ä‘á»c dá»¯ liá»‡u tá»« tá»‡p nháº­t kÃ½ translog vÃ  phá»¥c há»“i vÃ o bá»™ nhá»›&nbsp;<code>buffer</code>&nbsp;vÃ &nbsp;<code>os cache</code>.</p>
<p>Thá»±c táº¿, translog cÅ©ng Ä‘Æ°á»£c ghi vÃ o&nbsp;<code>os cache</code>&nbsp;trÆ°á»›c, máº·c Ä‘á»‹nh lÃ  má»—i 5 giÃ¢y sáº½ Ä‘áº©y vÃ o Ä‘Ä©a má»™t láº§n, vÃ¬ váº­y máº·c Ä‘á»‹nh, cÃ³ thá»ƒ cÃ³ 5 giÃ¢y dá»¯ liá»‡u chá»‰ náº±m trong bá»™ Ä‘á»‡m hoáº·c <code>os cache</code> hoáº·c tá»‡p translog, khÃ´ng náº±m trÃªn Ä‘Ä©a, náº¿u mÃ¡y nÃ y bá»‹ há»ng lÃºc nÃ y, sáº½&nbsp;<strong>máº¥t</strong>&nbsp;5 giÃ¢y dá»¯ liá»‡u. NhÆ°ng hiá»‡u suáº¥t nhÆ° váº­y tá»‘t hÆ¡n, máº¥t tá»‘i Ä‘a 5 giÃ¢y dá»¯ liá»‡u. Báº¡n cÅ©ng cÃ³ thá»ƒ Ä‘áº·t translog Ä‘á»ƒ má»—i láº§n ghi pháº£i&nbsp;<code>fsync</code>&nbsp;trá»±c tiáº¿p vÃ o Ä‘Ä©a, nhÆ°ng hiá»‡u suáº¥t sáº½ kÃ©m hÆ¡n nhiá»u.</p>
<p>Thá»±c táº¿, náº¿u báº¡n á»Ÿ Ä‘Ã¢y, náº¿u ngÆ°á»i phá»ng váº¥n khÃ´ng há»i báº¡n vá» váº¥n Ä‘á» máº¥t dá»¯ liá»‡u cá»§a es, báº¡n cÃ³ thá»ƒ tá»± hÃ o vá»›i ngÆ°á»i phá»ng váº¥n á»Ÿ Ä‘Ã¢y, báº¡n nÃ³i, thá»±c táº¿ es trÆ°á»›c tiÃªn lÃ  gáº§n nhÆ° thá»i gian thá»±c, dá»¯ liá»‡u Ä‘Æ°á»£c ghi vÃ o sau 1 giÃ¢y má»›i cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¬m tháº¥y; cÃ³ thá»ƒ máº¥t dá»¯ liá»‡u. CÃ³ 5 giÃ¢y dá»¯ liá»‡u, náº±m trong bá»™ Ä‘á»‡m,&nbsp;<code>os cache</code>&nbsp;cá»§a translog,&nbsp;<code>os cache</code>&nbsp;cá»§a&nbsp;<code>segment file</code>, khÃ´ng náº±m trÃªn Ä‘Ä©a, náº¿u mÃ¡y nÃ y bá»‹ há»ng lÃºc nÃ y, sáº½ dáº«n Ä‘áº¿n&nbsp;<strong>máº¥t</strong>&nbsp;5 giÃ¢y dá»¯ liá»‡u.</p>
<p><strong>TÃ³m láº¡i</strong>, dá»¯ liá»‡u Ä‘Æ°á»£c ghi vÃ o bá»™ Ä‘á»‡m trÆ°á»›c, sau Ä‘Ã³ má»—i giÃ¢y, dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c refresh vÃ o&nbsp;<code>os cache</code>, khi dá»¯ liá»‡u Ä‘áº¿n&nbsp;<code>os cache</code>, dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¬m kiáº¿m (Ä‘Ã³ lÃ  lÃ½ do táº¡i sao chÃºng ta nÃ³i ráº±ng tá»« khi dá»¯ liá»‡u Ä‘Æ°á»£c ghi vÃ o cho Ä‘áº¿n khi cÃ³ thá»ƒ tÃ¬m kiáº¿m, cÃ³ Ä‘á»™ trá»… 1s). Má»—i 5 giÃ¢y, dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c ghi vÃ o tá»‡p translog (do Ä‘Ã³, náº¿u mÃ¡y bá»‹ há»ng, táº¥t cáº£ dá»¯ liá»‡u trong bá»™ nhá»› sáº½ máº¥t, tá»‘i Ä‘a sáº½ máº¥t 5s dá»¯ liá»‡u), khi translog lá»›n Ä‘áº¿n má»™t má»©c Ä‘á»™ nháº¥t Ä‘á»‹nh, hoáº·c máº·c Ä‘á»‹nh má»—i 30 phÃºt, má»™t hoáº¡t Ä‘á»™ng commit sáº½ Ä‘Æ°á»£c kÃ­ch hoáº¡t, Ä‘áº©y táº¥t cáº£ dá»¯ liá»‡u trong bá»™ Ä‘á»‡m vÃ o tá»‡p&nbsp;<code>segment file</code>trÃªn Ä‘Ä©a.</p>
<blockquote>
<p>Sau khi dá»¯ liá»‡u Ä‘Æ°á»£c ghi vÃ o&nbsp;<code>segment file</code>, chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c cÅ©ng sáº½ Ä‘Æ°á»£c táº¡o ngay láº­p tá»©c.</p>
</blockquote>
<h4>2.2.4. NguyÃªn lÃ½ cÆ¡ báº£n khi xÃ³a/cáº­p nháº­t dá»¯ liá»‡u</h4>
<p>Náº¿u lÃ  hoáº¡t Ä‘á»™ng xÃ³a, khi commit sáº½ táº¡o ra má»™t tá»‡p&nbsp;<code>.del</code>, trong Ä‘Ã³ Ä‘Ã¡nh dáº¥u má»™t doc nháº¥t Ä‘á»‹nh lÃ  tráº¡ng thÃ¡i&nbsp;<code>deleted</code>, vÃ¬ váº­y khi tÃ¬m kiáº¿m, dá»±a vÃ o tá»‡p&nbsp;<code>.del</code>, báº¡n sáº½ biáº¿t liá»‡u doc cÃ³ bá»‹ xÃ³a hay khÃ´ng.</p>
<p>Náº¿u lÃ  hoáº¡t Ä‘á»™ng cáº­p nháº­t, nÃ³ sáº½ Ä‘Ã¡nh dáº¥u doc gá»‘c lÃ  tráº¡ng thÃ¡i&nbsp;<code>deleted</code>&nbsp;vÃ  sau Ä‘Ã³ ghi má»™t dá»¯ liá»‡u má»›i.</p>
<p>Má»—i khi bá»™ Ä‘á»‡m Ä‘Æ°á»£c refresh, má»™t&nbsp;<code>segment file</code>&nbsp;sáº½ Ä‘Æ°á»£c táº¡o ra, vÃ¬ váº­y máº·c Ä‘á»‹nh lÃ  má»™t&nbsp;<code>segment file</code>&nbsp;má»—i giÃ¢y, vÃ¬ váº­y&nbsp;<code>segment file</code>&nbsp;sáº½ ngÃ y cÃ ng nhiá»u, lÃºc nÃ y sáº½ thÆ°á»ng xuyÃªn thá»±c hiá»‡n merge. Má»—i láº§n merge, nhiá»u&nbsp;<code>segment file</code>&nbsp;sáº½ Ä‘Æ°á»£c há»£p nháº¥t thÃ nh má»™t, Ä‘á»“ng thá»i á»Ÿ Ä‘Ã¢y, doc Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ &nbsp;<code>deleted</code>&nbsp;sáº½ Ä‘Æ°á»£c&nbsp;<strong>xÃ³a váº­t lÃ½</strong>, sau Ä‘Ã³ ghi&nbsp;<code>segment file</code>&nbsp;má»›i vÃ o Ä‘Ä©a, á»Ÿ Ä‘Ã¢y sáº½ ghi má»™t&nbsp;<code>commit point</code>, Ä‘Ã¡nh dáº¥u táº¥t cáº£&nbsp;<code>segment file</code>&nbsp;má»›i, sau Ä‘Ã³ má»Ÿ&nbsp;<code>segment file</code>&nbsp;Ä‘á»ƒ tÃ¬m kiáº¿m, vÃ  sau Ä‘Ã³ xÃ³a&nbsp;<code>segment file</code>&nbsp;cÅ©.</p>
<h4>2.2.5. Lá»›p cÆ¡ báº£n Lucene</h4>
<p>ÄÆ¡n giáº£n, Lucene chá»‰ lÃ  má»™t thÆ° viá»‡n jar, bÃªn trong nÃ³ chá»©a cÃ¡c mÃ£ thuáº­t toÃ¡n Ä‘Ã£ Ä‘Æ°á»£c Ä‘Ã³ng gÃ³i Ä‘á»ƒ táº¡o chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c. Khi chÃºng ta phÃ¡t triá»ƒn báº±ng Java, chÃºng ta chá»‰ cáº§n import thÆ° viá»‡n jar Lucene, sau Ä‘Ã³ phÃ¡t triá»ƒn dá»±a trÃªn API cá»§a Lucene.</p>
<p>ThÃ´ng qua Lucene, chÃºng ta cÃ³ thá»ƒ táº¡o chá»‰ má»¥c cho dá»¯ liá»‡u hiá»‡n cÃ³, Lucene sáº½ tá»• chá»©c cáº¥u trÃºc dá»¯ liá»‡u chá»‰ má»¥c trÃªn á»• Ä‘Ä©a cá»¥c bá»™ cho chÃºng ta.</p>
<h4>2.2.5. Chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c</h4>
<p>Trong cÃ´ng cá»¥ tÃ¬m kiáº¿m, má»—i tÃ i liá»‡u Ä‘á»u cÃ³ má»™t ID tÃ i liá»‡u tÆ°Æ¡ng á»©ng, ná»™i dung tÃ i liá»‡u Ä‘Æ°á»£c biá»ƒu diá»…n dÆ°á»›i dáº¡ng má»™t táº­p há»£p cÃ¡c tá»« khÃ³a. VÃ­ dá»¥, sau khi phÃ¢n loáº¡i, tÃ i liá»‡u 1 Ä‘Ã£ trÃ­ch xuáº¥t 20 tá»« khÃ³a, má»—i tá»« khÃ³a Ä‘á»u ghi láº¡i sá»‘ láº§n xuáº¥t hiá»‡n vÃ  vá»‹ trÃ­ xuáº¥t hiá»‡n cá»§a nÃ³ trong tÃ i liá»‡u.</p>
<p>Váº­y, chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c lÃ  Ã¡nh xáº¡ tá»«&nbsp;<strong>tá»« khÃ³a Ä‘áº¿n ID tÃ i liá»‡u</strong>, má»—i tá»« khÃ³a Ä‘á»u tÆ°Æ¡ng á»©ng vá»›i má»™t loáº¡t tÃ i liá»‡u, trong Ä‘Ã³ táº¥t cáº£ cÃ¡c tÃ i liá»‡u Ä‘á»u xuáº¥t hiá»‡n tá»« khÃ³a.</p>
<p>VÃ­ dá»¥.</p>
<p>CÃ³ cÃ¡c tÃ i liá»‡u sau:</p>
<p>| DocId | Doc                                                                           |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/deploy3.png" type="image/png"/>
    </item>
    <item>
      <title>Elasticsearch</title>
      <link>https://vanhung4499.github.io/database/elasticsearch/</link>
      <guid>https://vanhung4499.github.io/database/elasticsearch/</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elasticsearch</source>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
    </item>
    <item>
      <title>Elasticsearch Aggregation</title>
      <link>https://vanhung4499.github.io/database/elasticsearch/aggregation.html</link>
      <guid>https://vanhung4499.github.io/database/elasticsearch/aggregation.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elasticsearch Aggregation</source>
      <description>Elasticsearch Aggregations Elasticsearch lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m toÃ n vÄƒn báº£n phÃ¢n tÃ¡n, láº­p chá»‰ má»¥c vÃ  tÃ¬m kiáº¿m lÃ  cÃ¡c chá»©c nÄƒng cÆ¡ báº£n cá»§a Elasticsearch. Thá»±c táº¿, chá»©c nÄƒng Agg...</description>
      <category>elasticssearch</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Elasticsearch lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m toÃ n vÄƒn báº£n phÃ¢n tÃ¡n, láº­p chá»‰ má»¥c vÃ  tÃ¬m kiáº¿m lÃ  cÃ¡c chá»©c nÄƒng cÆ¡ báº£n cá»§a Elasticsearch. Thá»±c táº¿, chá»©c nÄƒng Aggregations cá»§a Elasticsearch cÅ©ng ráº¥t máº¡nh máº½, cho phÃ©p thá»±c hiá»‡n phÃ¢n tÃ­ch thá»‘ng kÃª phá»©c táº¡p trÃªn dá»¯ liá»‡u. Elasticsearch cung cáº¥p bá»‘n loáº¡i chá»©c nÄƒng phÃ¢n tÃ­ch tá»•ng há»£p chÃ­nh, bao gá»“m <strong>aggregations chá»‰ sá»‘ (metrics aggregations)</strong>, <strong>aggregations thÃ¹ng (bucket aggregations)</strong>, <strong>aggregations á»‘ng (pipeline aggregations)</strong> vÃ  <strong>aggregations ma tráº­n (matrix aggregations)</strong>. Aggregations á»‘ng vÃ  aggregations ma tráº­n Ä‘ang trong giai Ä‘oáº¡n thá»­ nghiá»‡m theo thÃ´ng bÃ¡o chÃ­nh thá»©c, vÃ  sáº½ Ä‘Æ°á»£c thay Ä‘á»•i hoÃ n toÃ n hoáº·c loáº¡i bá» sau nÃ y, vÃ¬ váº­y chÃºng tÃ´i sáº½ khÃ´ng giáº£i thÃ­ch vá» aggregations á»‘ng vÃ  aggregations ma tráº­n á»Ÿ Ä‘Ã¢y.</p>
<h2>Cáº¥u trÃºc cá»¥ thá»ƒ cá»§a Aggregations</h2>
<p>Táº¥t cáº£ cÃ¡c aggregations, báº¥t ká»ƒ loáº¡i nÃ o, Ä‘á»u tuÃ¢n theo cÃ¡c quy táº¯c sau.</p>
<ul>
<li>ChÃºng Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong cÃ¹ng má»™t yÃªu cáº§u JSON nhÆ° truy váº¥n, vÃ  báº¡n Ä‘Ã¡nh dáº¥u chÃºng báº±ng cÃ¡ch sá»­ dá»¥ng khÃ³a aggregations hoáº·c aggs. Báº¡n cáº§n Ä‘áº·t tÃªn cho má»—i aggregation, chá»‰ Ä‘á»‹nh loáº¡i cá»§a nÃ³ vÃ  cÃ¡c tÃ¹y chá»n liÃªn quan Ä‘áº¿n loáº¡i Ä‘Ã³.</li>
<li>ChÃºng cháº¡y trÃªn káº¿t quáº£ cá»§a truy váº¥n. CÃ¡c tÃ i liá»‡u khÃ´ng khá»›p vá»›i truy váº¥n sáº½ khÃ´ng Ä‘Æ°á»£c tÃ­nh, trá»« khi báº¡n sá»­ dá»¥ng aggregation global Ä‘á»ƒ bao gá»“m cÃ¡c tÃ i liá»‡u khÃ´ng khá»›p.</li>
<li>ChÃºng cÃ³ thá»ƒ lá»c thÃªm káº¿t quáº£ cá»§a truy váº¥n mÃ  khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n aggregation.</li>
</ul>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  cáº¥u trÃºc cÆ¡ báº£n cá»§a aggregation:</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#98C379;--shiki-dark:#98C379">"aggregations"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : { </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">&lt;!--</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> KhÃ³a</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> aggregation</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> á»Ÿ</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> cáº¥p</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> Ä‘á»™</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> cao</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> nháº¥t,</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> cÅ©ng</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> cÃ³</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> thá»ƒ</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> viáº¿t</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> táº¯t</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> lÃ </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> aggs</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> --&gt;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "&lt;aggregation_name&gt;"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : { </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">&lt;!--</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> TÃªn</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> tÃ¹y</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> chá»‰nh</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> cá»§a</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> aggregation</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> --&gt;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        "&lt;aggregation_type&gt;"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : { </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">&lt;!--</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> Loáº¡i</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> aggregation,</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> liÃªn</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> quan</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> Ä‘áº¿n</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> chá»‰</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> sá»‘</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> nhÆ°</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> max,</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> min,</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> avg,</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> sum,</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> liÃªn</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> quan</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> Ä‘áº¿n</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> thÃ¹ng</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> nhÆ°</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> terms,</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> filter,</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> v.v.</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> --&gt;</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">            &lt;aggregation_body&gt;</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> &lt;!--</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> ThÃ¢n</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> aggregation</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">trÆ°á»ng</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> nÃ o</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> sáº½</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> Ä‘Æ°á»£c</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> tá»•ng</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> há»£p</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">cÃ³</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> thá»ƒ</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> láº¥y</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> giÃ¡</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> trá»‹</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> cá»§a</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> trÆ°á»ng</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> hoáº·c</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> káº¿t</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> quáº£</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> cá»§a</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> script</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        [,</span><span style="color:#98C379;--shiki-dark:#98C379">"meta"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {  </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">[&lt;meta_data_body&gt;]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } ]</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">?</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> &lt;!--</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> Meta</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        [,</span><span style="color:#98C379;--shiki-dark:#98C379">"aggregations"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">[&lt;sub_aggregation&gt;]+</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } ]</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">?</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> &lt;!--</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> Äá»‹nh</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> nghÄ©a</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> sub-aggregation</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> trong</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> aggregation</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    [,</span><span style="color:#98C379;--shiki-dark:#98C379">"&lt;aggregation_name_2&gt;"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">...</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } ]</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">*</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> &lt;!--</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> TÃªn</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> tÃ¹y</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> chá»‰nh</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> cá»§a</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> aggregation</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><ul>
<li><strong>á» cáº¥p Ä‘á»™ cao nháº¥t cÃ³ má»™t khÃ³a aggregations, cÃ³ thá»ƒ viáº¿t táº¯t lÃ  aggs</strong>.</li>
<li>á» cáº¥p Ä‘á»™ tiáº¿p theo, báº¡n cáº§n chá»‰ Ä‘á»‹nh tÃªn cho aggregation. Báº¡n sáº½ tháº¥y tÃªn nÃ y trong káº¿t quáº£ tráº£ vá» cá»§a yÃªu cáº§u. Äiá»u nÃ y ráº¥t há»¯u Ã­ch khi sá»­ dá»¥ng nhiá»u aggregation trong cÃ¹ng má»™t yÃªu cáº§u, nÃ³ giÃºp báº¡n dá»… dÃ ng hiá»ƒu Ã½ nghÄ©a cá»§a má»—i nhÃ³m káº¿t quáº£.</li>
<li>Cuá»‘i cÃ¹ng, báº¡n pháº£i chá»‰ Ä‘á»‹nh loáº¡i aggregation.</li>
</ul>
<blockquote>
<p>GiÃ¡ trá»‹ phÃ¢n tÃ­ch tá»•ng há»£p cÃ³ thá»ƒ <strong>láº¥y tá»« giÃ¡ trá»‹ cá»§a trÆ°á»ng</strong> hoáº·c lÃ  <strong>káº¿t quáº£ cá»§a script</strong>.</p>
<p>Tuy nhiÃªn, khi sá»­ dá»¥ng káº¿t quáº£ cá»§a script, báº¡n cáº§n chÃº Ã½ Ä‘áº¿n hiá»‡u suáº¥t vÃ  an toÃ n cá»§a script; máº·c dÃ¹ háº§u háº¿t cÃ¡c loáº¡i aggregation Ä‘á»u cho phÃ©p sá»­ dá»¥ng script, nhÆ°ng script lÃ m cháº­m aggregation vÃ¬ script pháº£i cháº¡y trÃªn má»—i tÃ i liá»‡u. Äá»ƒ trÃ¡nh cháº¡y script, báº¡n cÃ³ thá»ƒ tÃ­nh toÃ¡n trong giai Ä‘oáº¡n láº­p chá»‰ má»¥c.</p>
<p>NgoÃ i ra, script cÅ©ng cÃ³ thá»ƒ bá»‹ sá»­ dá»¥ng Ä‘á»ƒ táº¥n cÃ´ng mÃ£ Ä‘á»™c, hÃ£y cá»‘ gáº¯ng sá»­ dá»¥ng ngÃ´n ngá»¯ script trong sandbox.</p>
</blockquote>
<p>VÃ­ dá»¥: Truy váº¥n tuá»•i trung bÃ¬nh cá»§a táº¥t cáº£ cÃ¡c cáº§u thá»§ lÃ  bao nhiÃªu, vÃ  cá»™ng 188 vÃ o má»©c lÆ°Æ¡ng trung bÃ¬nh cá»§a cáº§u thá»§ (cÅ©ng cÃ³ thá»ƒ hiá»ƒu lÃ  má»©c lÆ°Æ¡ng trung bÃ¬nh sau khi cá»™ng thÃªm 188 cho má»—i cáº§u thá»§).</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> /player/_search?size=</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "aggs"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "avg_age"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "avg"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "field"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "age"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "avg_salary_188"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "avg"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "script"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "source"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "doc.salary.value + 188"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>Aggregations chá»‰ sá»‘</h2>
<p>Aggregations chá»‰ sá»‘ (cÃ²n Ä‘Æ°á»£c gá»i lÃ  aggregations Ä‘o lÆ°á»ng) chá»§ yáº¿u rÃºt ra dá»¯ liá»‡u thá»‘ng kÃª tá»« cÃ¡c nhÃ³m tÃ i liá»‡u khÃ¡c nhau, hoáº·c tá»« cÃ¡c thÃ¹ng tÃ i liá»‡u tá»« cÃ¡c aggregations khÃ¡c.</p>
<p>Nhá»¯ng dá»¯ liá»‡u thá»‘ng kÃª nÃ y thÆ°á»ng Ä‘áº¿n tá»« cÃ¡c trÆ°á»ng sá»‘, nhÆ° giÃ¡ trá»‹ nhá» nháº¥t hoáº·c trung bÃ¬nh. NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ láº¥y tá»«ng dá»¯ liá»‡u thá»‘ng kÃª riÃªng láº», hoáº·c cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng aggregations stats Ä‘á»ƒ láº¥y chÃºng cÃ¹ng má»™t lÃºc. Dá»¯ liá»‡u thá»‘ng kÃª nÃ¢ng cao hÆ¡n, nhÆ° tá»•ng bÃ¬nh phÆ°Æ¡ng hoáº·c Ä‘á»™ lá»‡ch chuáº©n, cÃ³ thá»ƒ Ä‘Æ°á»£c láº¥y thÃ´ng qua aggregations extended stats.</p>
<h3>Max Aggregation</h3>
<p>Max Aggregation Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thá»‘ng kÃª giÃ¡ trá»‹ lá»›n nháº¥t. VÃ­ dá»¥, Ä‘á»ƒ thá»‘ng kÃª cuá»‘n sÃ¡ch cÃ³ giÃ¡ cao nháº¥t trong chá»‰ má»¥c sales, vÃ  tÃ­nh giÃ¡ trá»‹ gáº¥p Ä‘Ã´i cá»§a giÃ¡ Ä‘Ã³, cÃ¢u truy váº¥n nhÆ° sau:</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET /sales/_search?size=0</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "aggs" : {</span></span>
<span class="line"><span>    "max_price" : {</span></span>
<span class="line"><span>      "max" : {</span></span>
<span class="line"><span>        "field" : "price"</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    "max_price_2" : {</span></span>
<span class="line"><span>      "max" : {</span></span>
<span class="line"><span>        "field" : "price",</span></span>
<span class="line"><span>        "script": {</span></span>
<span class="line"><span>          "source": "_value * 2.0"</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>TrÆ°á»ng Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh, trong script cÃ³ thá»ƒ láº¥y giÃ¡ trá»‹ cá»§a trÆ°á»ng báº±ng _value</strong>.</p>
<p>Káº¿t quáº£ aggregation nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>{</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>  "aggregations": {</span></span>
<span class="line"><span>    "max_price": {</span></span>
<span class="line"><span>      "value": 188.0</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    "max_price_2": {</span></span>
<span class="line"><span>      "value": 376.0</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><h3>Min Aggregation</h3>
<p>Min Aggregation Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thá»‘ng kÃª giÃ¡ trá»‹ nhá» nháº¥t. VÃ­ dá»¥, Ä‘á»ƒ thá»‘ng kÃª cuá»‘n sÃ¡ch cÃ³ giÃ¡ tháº¥p nháº¥t trong chá»‰ má»¥c sales, cÃ¢u truy váº¥n nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET /sales/_search?size=0</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "aggs" : {</span></span>
<span class="line"><span>    "min_price" : {</span></span>
<span class="line"><span>      "min" : {</span></span>
<span class="line"><span>        "field" : "price"</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p>Káº¿t quáº£ aggregation nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>{</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>  "aggregations": {</span></span>
<span class="line"><span>    "min_price": {</span></span>
<span class="line"><span>      "value": 18.0</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><h3>Avg Aggregation</h3>
<p>Avg Aggregation Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ­nh giÃ¡ trá»‹ trung bÃ¬nh. VÃ­ dá»¥, Ä‘á»ƒ thá»‘ng kÃª Ä‘iá»ƒm trung bÃ¬nh cá»§a ká»³ thi trong chá»‰ má»¥c exams, náº¿u khÃ´ng cÃ³ Ä‘iá»ƒm sá»‘, máº·c Ä‘á»‹nh lÃ  60 Ä‘iá»ƒm, cÃ¢u truy váº¥n nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET /exams/_search?size=0</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "aggs" : {</span></span>
<span class="line"><span>    "avg_grade" : {</span></span>
<span class="line"><span>      "avg" : {</span></span>
<span class="line"><span>        "field" : "grade",</span></span>
<span class="line"><span>        "missing": 60</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p><strong>Náº¿u trÆ°á»ng chá»‰ Ä‘á»‹nh khÃ´ng cÃ³ giÃ¡ trá»‹, báº¡n cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh giÃ¡ trá»‹ máº·c Ä‘á»‹nh báº±ng missing; náº¿u khÃ´ng chá»‰ Ä‘á»‹nh giÃ¡ trá»‹ máº·c Ä‘á»‹nh, tÃ i liá»‡u thiáº¿u giÃ¡ trá»‹ trÆ°á»ng nÃ y sáº½ bá»‹ bá» qua (tÃ­nh toÃ¡n)</strong>.</p>
<p>Káº¿t quáº£ aggregation nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>{</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>  "aggregations": {</span></span>
<span class="line"><span>    "avg_grade": {</span></span>
<span class="line"><span>      "value": 78.0</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p>NgoÃ i tÃ­nh toÃ¡n aggregation trung bÃ¬nh thÃ´ng thÆ°á»ng, elasticsearch cÅ©ng cung cáº¥p tÃ­nh toÃ¡n aggregation trung bÃ¬nh cÃ³ trá»ng sá»‘, chi tiáº¿t xem táº¡i <a href="https://www.knowledgedict.com/tutorial/elasticsearch-aggregations-metrics-weighted-avg-aggregation.html" target="_blank" rel="noopener noreferrer">Elasticsearch Aggregations chá»‰ sá»‘ - Weighted Avg Aggregation</a>.</p>
<h3>Sum Aggregation</h3>
<p>Sum Aggregation Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ­nh tá»•ng. VÃ­ dá»¥, Ä‘á»ƒ thá»‘ng kÃª tá»•ng giÃ¡ cá»§a cÃ¡c máº·t hÃ ng cÃ³ loáº¡i lÃ  "hat" trong chá»‰ má»¥c sales, cÃ¢u truy váº¥n nhÆ° sau:</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET /sales/_search?size=0</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "query" : {</span></span>
<span class="line"><span>    "constant_score" : {</span></span>
<span class="line"><span>      "filter" : {</span></span>
<span class="line"><span>        "match" : { "type" : "hat" }</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  "aggs" : {</span></span>
<span class="line"><span>    "hat_prices" : {</span></span>
<span class="line"><span>      "sum" : { "field" : "price" }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Káº¿t quáº£ aggregation nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>{</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>  "aggregations": {</span></span>
<span class="line"><span>    "hat_prices": {</span></span>
<span class="line"><span>      "value": 567.0</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><h3>Value Count Aggregation</h3>
<p>Value Count Aggregation cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘áº¿m sá»‘ lÆ°á»£ng tÃ i liá»‡u theo trÆ°á»ng. VÃ­ dá»¥, Ä‘á»ƒ Ä‘áº¿m sá»‘ lÆ°á»£ng tÃ i liá»‡u cÃ³ trÆ°á»ng author trong chá»‰ má»¥c books, cÃ¢u truy váº¥n nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET /books/_search?size=0</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "aggs" : {</span></span>
<span class="line"><span>    "doc_count" : {</span></span>
<span class="line"><span>      "value_count" : { "field" : "author" }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p>Káº¿t quáº£ aggregation nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>{</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>  "aggregations": {</span></span>
<span class="line"><span>    "doc_count": {</span></span>
<span class="line"><span>      "value": 5</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><h3>Cardinality Aggregation</h3>
<p>Cardinality Aggregation Ä‘Æ°á»£c sá»­ dá»¥ng cho thá»‘ng kÃª cÆ¡ sá»Ÿ, nhiá»‡m vá»¥ cá»§a nÃ³ lÃ  thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng tÆ°Æ¡ng tá»± nhÆ° distinct trong SQL, loáº¡i bá» cÃ¡c má»¥c trÃ¹ng láº·p trong táº­p há»£p, sau Ä‘Ã³ Ä‘áº¿m Ä‘á»™ dÃ i cá»§a táº­p há»£p sau khi loáº¡i bá» trÃ¹ng láº·p. VÃ­ dá»¥, thá»±c hiá»‡n hoáº¡t Ä‘á»™ng cardinality trÃªn trÆ°á»ng language trong chá»‰ má»¥c books cÃ³ thá»ƒ Ä‘áº¿m sá»‘ lÆ°á»£ng ngÃ´n ngá»¯ láº­p trÃ¬nh, cÃ¢u truy váº¥n nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET /books/_search?size=0</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "aggs" : {</span></span>
<span class="line"><span>    "all_lan" : {</span></span>
<span class="line"><span>      "cardinality" : { "field" : "language" }</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    "title_cnt" : {</span></span>
<span class="line"><span>      "cardinality" : { "field" : "title.keyword" }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p><strong>Giáº£ sá»­ trÆ°á»ng title lÃ  kiá»ƒu vÄƒn báº£n (text), khi loáº¡i bá» trÃ¹ng láº·p, báº¡n cáº§n chá»‰ Ä‘á»‹nh keyword, cÃ³ nghÄ©a lÃ  xem title nhÆ° má»™t thá»ƒ thá»‘ng nháº¥t, tá»©c lÃ  khÃ´ng phÃ¢n tÃ¡ch tá»« Ä‘á»ƒ Ä‘áº¿m</strong>.</p>
<p>Káº¿t quáº£ aggregation nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>{</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>  "aggregations": {</span></span>
<span class="line"><span>    "all_lan": {</span></span>
<span class="line"><span>      "value": 8</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    "title_cnt": {</span></span>
<span class="line"><span>      "value": 18</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><h3>Stats Aggregation</h3>
<p>Stats Aggregation Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thá»‘ng kÃª cÆ¡ báº£n, sáº½ tráº£ vá» 5 chá»‰ sá»‘ count, max, min, avg vÃ  sum cÃ¹ng má»™t lÃºc. VÃ­ dá»¥, Ä‘á»ƒ thá»‘ng kÃª cÆ¡ báº£n liÃªn quan Ä‘áº¿n Ä‘iá»ƒm sá»‘ trÃªn trÆ°á»ng grade trong chá»‰ má»¥c exams, cÃ¢u truy váº¥n nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET /exams/_search?size=0</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "aggs" : {</span></span>
<span class="line"><span>    "grades_stats" : {</span></span>
<span class="line"><span>      "stats" : { "field" : "grade" }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p>Káº¿t quáº£ aggregation nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>{</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>  "aggregations": {</span></span>
<span class="line"><span>    "grades_stats": {</span></span>
<span class="line"><span>      "count": 2,</span></span>
<span class="line"><span>      "min": 50.0,</span></span>
<span class="line"><span>      "max": 100.0,</span></span>
<span class="line"><span>      "avg": 75.0,</span></span>
<span class="line"><span>      "sum": 150.0</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><h3>Extended Stats Aggregation</h3>
<p>Extended Stats Aggregation Ä‘Æ°á»£c sá»­ dá»¥ng cho thá»‘ng kÃª nÃ¢ng cao, tÆ°Æ¡ng tá»± nhÆ° thá»‘ng kÃª cÆ¡ báº£n, nhÆ°ng sáº½ cÃ³ thÃªm má»™t sá»‘ káº¿t quáº£ thá»‘ng kÃª sau, sum_of_squares (tá»•ng bÃ¬nh phÆ°Æ¡ng), variance (phÆ°Æ¡ng sai), std_deviation (Ä‘á»™ lá»‡ch chuáº©n), std_deviation_bounds (khoáº£ng giá»¯a giÃ¡ trá»‹ trung bÃ¬nh cá»™ng/trá»« hai Ä‘á»™ lá»‡ch chuáº©n). Äá»ƒ thá»‘ng kÃª nÃ¢ng cao liÃªn quan Ä‘áº¿n Ä‘iá»ƒm sá»‘ trÃªn trÆ°á»ng grade trong chá»‰ má»¥c exams, cÃ¢u truy váº¥n nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET /exams/_search?size=0</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "aggs" : {</span></span>
<span class="line"><span>    "grades_stats" : {</span></span>
<span class="line"><span>      "extended_stats" : { "field" : "grade" }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p>Káº¿t quáº£ aggregation nhÆ° sau:</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>{</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>  "aggregations": {</span></span>
<span class="line"><span>    "grades_stats": {</span></span>
<span class="line"><span>      "count": 2,</span></span>
<span class="line"><span>      "min": 50.0,</span></span>
<span class="line"><span>      "max": 100.0,</span></span>
<span class="line"><span>      "avg": 75.0,</span></span>
<span class="line"><span>      "sum": 150.0,</span></span>
<span class="line"><span>      "sum_of_squares": 12500.0,</span></span>
<span class="line"><span>      "variance": 625.0,</span></span>
<span class="line"><span>      "std_deviation": 25.0,</span></span>
<span class="line"><span>      "std_deviation_bounds": {</span></span>
<span class="line"><span>        "upper": 125.0,</span></span>
<span class="line"><span>        "lower": 25.0</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>Percentiles Aggregation</h3>
<p>Percentiles Aggregation Ä‘Æ°á»£c sá»­ dá»¥ng cho thá»‘ng kÃª phÃ¢n vá»‹. PhÃ¢n vá»‹ lÃ  má»™t thuáº­t ngá»¯ thá»‘ng kÃª, náº¿u ta sáº¯p xáº¿p má»™t táº­p dá»¯ liá»‡u tá»« lá»›n Ä‘áº¿n nhá» vÃ  tÃ­nh toÃ¡n pháº§n trÄƒm lÅ©y káº¿ tÆ°Æ¡ng á»©ng, giÃ¡ trá»‹ cá»§a dá»¯ liá»‡u tÆ°Æ¡ng á»©ng vá»›i phÃ¢n vá»‹ Ä‘Ã³ Ä‘Æ°á»£c gá»i lÃ  phÃ¢n vá»‹ cá»§a phÃ¢n vá»‹ Ä‘Ã³. Theo máº·c Ä‘á»‹nh, cÃ¡c phÃ¢n vá»‹ lÅ©y káº¿ lÃ  [ 1, 5, 25, 50, 75, 95, 99 ]. VÃ­ dá»¥ sau Ä‘Ã¢y cho tháº¥y cÃ¡ch thá»‘ng kÃª phÃ¢n vá»‹ thá»i gian táº£i trÃªn trÆ°á»ng load_time trong chá»‰ má»¥c latency, cÃ¢u truy váº¥n nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET latency/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "size": 0,</span></span>
<span class="line"><span>  "aggs" : {</span></span>
<span class="line"><span>    "load_time_outlier" : {</span></span>
<span class="line"><span>      "percentiles" : {</span></span>
<span class="line"><span>        "field" : "load_time"</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p><strong>Cáº§n lÆ°u Ã½ ráº±ng, trÆ°á»ng <code>load_time</code> nhÆ° trÃªn pháº£i lÃ  loáº¡i sá»‘</strong>.</p>
<p>Káº¿t quáº£ tá»•ng há»£p nhÆ° sau:</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>{</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>  "aggregations": {</span></span>
<span class="line"><span>    "load_time_outlier": {</span></span>
<span class="line"><span>      "values" : {</span></span>
<span class="line"><span>        "1.0": 5.0,</span></span>
<span class="line"><span>        "5.0": 25.0,</span></span>
<span class="line"><span>        "25.0": 165.0,</span></span>
<span class="line"><span>        "50.0": 445.0,</span></span>
<span class="line"><span>        "75.0": 725.0,</span></span>
<span class="line"><span>        "95.0": 945.0,</span></span>
<span class="line"><span>        "99.0": 985.0</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Thá»‘ng kÃª phÃ¢n vá»‹ cÅ©ng cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh tham sá»‘ percents Ä‘á»ƒ chá»‰ Ä‘á»‹nh phÃ¢n vá»‹, nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET latency/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "size": 0,</span></span>
<span class="line"><span>  "aggs" : {</span></span>
<span class="line"><span>    "load_time_outlier" : {</span></span>
<span class="line"><span>      "percentiles" : {</span></span>
<span class="line"><span>        "field" : "load_time",</span></span>
<span class="line"><span>        "percents": [60, 80, 95]</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><h3>Percentiles Ranks Aggregation</h3>
<p>Percentiles Ranks Aggregation cÃ³ Ã½ nghÄ©a ngÆ°á»£c láº¡i vá»›i Percentiles Aggregation, Ä‘Ã³ lÃ  muá»‘n xem giÃ¡ trá»‹ hiá»‡n táº¡i náº±m trong pháº¡m vi nÃ o (phÃ¢n vá»‹). Giáº£ sá»­ báº¡n kiá»ƒm tra xem giÃ¡ trá»‹ hiá»‡n táº¡i 500 vÃ  600 náº±m á»Ÿ phÃ¢n vá»‹ nÃ o, phÃ¡t hiá»‡n ra lÃ  90.01 vÃ  100, Ä‘iá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ  90.01% cá»§a cÃ¡c giÃ¡ trá»‹ Ä‘á»u náº±m trong pháº¡m vi 500, vÃ  100% cá»§a cÃ¡c giÃ¡ trá»‹ náº±m trong pháº¡m vi 600.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET latency/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "size": 0,</span></span>
<span class="line"><span>    "aggs" : {</span></span>
<span class="line"><span>      "load_time_ranks" : {</span></span>
<span class="line"><span>        "percentile_ranks" : {</span></span>
<span class="line"><span>          "field" : "load_time",</span></span>
<span class="line"><span>          "values" : [500, 600]</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p><strong>TrÆ°á»ng <code>load_time</code> cÅ©ng pháº£i lÃ  loáº¡i sá»‘</strong>.</p>
<p>Káº¿t quáº£ tráº£ vá» sáº½ tÆ°Æ¡ng tá»± nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>{</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>  "aggregations": {</span></span>
<span class="line"><span>    "load_time_ranks": {</span></span>
<span class="line"><span>      "values" : {</span></span>
<span class="line"><span>        "500.0": 90.01,</span></span>
<span class="line"><span>        "600.0": 100.0</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p>Báº¡n cÃ³ thá»ƒ Ä‘áº·t tham sá»‘ <code>keyed</code> lÃ  <code>true</code> Ä‘á»ƒ tráº£ vá» cÃ¡c giÃ¡ trá»‹ tÆ°Æ¡ng á»©ng nhÆ° lÃ  key cá»§a cÃ¡c bucket, máº·c Ä‘á»‹nh lÃ  <code>false</code>.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET latency/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "size": 0,</span></span>
<span class="line"><span>  "aggs": {</span></span>
<span class="line"><span>    "load_time_ranks": {</span></span>
<span class="line"><span>      "percentile_ranks": {</span></span>
<span class="line"><span>        "field": "load_time",</span></span>
<span class="line"><span>        "values": [500, 600],</span></span>
<span class="line"><span>        "keyed": true</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p>Káº¿t quáº£ tráº£ vá» nhÆ° sau:</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>{</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>  "aggregations": {</span></span>
<span class="line"><span>    "load_time_ranks": {</span></span>
<span class="line"><span>      "values": [</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          "key": 500.0,</span></span>
<span class="line"><span>          "value": 90.01</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          "key": 600.0,</span></span>
<span class="line"><span>          "value": 100.0</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      ]</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>Bucket Aggregation</h2>
<p>Bucket cÃ³ thá»ƒ Ä‘Æ°á»£c hiá»ƒu nhÆ° má»™t cÃ¡i thÃ¹ng, nÃ³ sáº½ duyá»‡t qua ná»™i dung cá»§a tÃ i liá»‡u, nhá»¯ng gÃ¬ phÃ¹ há»£p vá»›i má»™t yÃªu cáº§u nháº¥t Ä‘á»‹nh sáº½ Ä‘Æ°á»£c Ä‘áº·t vÃ o má»™t thÃ¹ng, phÃ¢n thÃ¹ng tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i group by trong SQL. Tá»« má»™t gÃ³c Ä‘á»™ khÃ¡c, báº¡n cÃ³ thá»ƒ xem metric aggregation nhÆ° lÃ  bucket aggregation Ä‘Æ¡n, tá»©c lÃ  Ä‘áº·t táº¥t cáº£ tÃ i liá»‡u vÃ o má»™t thÃ¹ng, trong khi bucket aggregation lÃ  multi-bucket aggregation, nÃ³ phÃ¢n nhÃ³m theo cÃ¡c Ä‘iá»u kiá»‡n tÆ°Æ¡ng á»©ng.</p>
<p>| Loáº¡i                          | MÃ´ táº£/TrÆ°á»ng há»£p sá»­ dá»¥ng                                                                                                                                                                                |<br>
| :</p>
]]></content:encoded>
    </item>
    <item>
      <title>Elasticsearch Analyzer</title>
      <link>https://vanhung4499.github.io/database/elasticsearch/analyzer.html</link>
      <guid>https://vanhung4499.github.io/database/elasticsearch/analyzer.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elasticsearch Analyzer</source>
      <description>Elasticsearch Analyzer PhÃ¢n tÃ­ch vÄƒn báº£n lÃ  quÃ¡ trÃ¬nh chuyá»ƒn Ä‘á»•i toÃ n bá»™ vÄƒn báº£n thÃ nh má»™t chuá»—i cÃ¡c tá»« (term/token), cÃ²n Ä‘Æ°á»£c gá»i lÃ  phÃ¢n tá»«. Trong Elasticsearch, phÃ¢n tá»« Ä‘Æ°á»£c ...</description>
      <category>elasticssearch</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<p>PhÃ¢n tÃ­ch vÄƒn báº£n lÃ  quÃ¡ trÃ¬nh chuyá»ƒn Ä‘á»•i toÃ n bá»™ vÄƒn báº£n thÃ nh má»™t chuá»—i cÃ¡c tá»« (term/token), cÃ²n Ä‘Æ°á»£c gá»i lÃ  phÃ¢n tá»«. Trong Elasticsearch, phÃ¢n tá»« Ä‘Æ°á»£c thá»±c hiá»‡n thÃ´ng qua analyzer (bá»™ phÃ¢n tÃ­ch), dÃ¹ lÃ  chá»‰ má»¥c hay tÃ¬m kiáº¿m, Ä‘á»u cáº§n sá»­ dá»¥ng analyzer (bá»™ phÃ¢n tÃ­ch). Bá»™ phÃ¢n tÃ­ch, chia thÃ nh&nbsp;<strong>bá»™ phÃ¢n tÃ­ch Ä‘Æ°á»£c xÃ¢y dá»±ng sáºµn</strong>&nbsp;vÃ &nbsp;<strong>bá»™ phÃ¢n tÃ­ch tÃ¹y chá»‰nh</strong>.</p>
<p>Bá»™ phÃ¢n tÃ­ch cÃ³ thá»ƒ Ä‘Æ°á»£c phÃ¢n loáº¡i thÃ nh ba pháº§n lÃ &nbsp;<strong>bá»™ lá»c kÃ½ tá»±</strong>(<strong>Character Filters</strong>),&nbsp;<strong>bá»™ phÃ¢n tá»«</strong>&nbsp;(<strong>Tokenizer</strong>) vÃ &nbsp;<strong>bá»™ lá»c tá»«</strong>&nbsp;(<strong>Token Filters</strong>). Thá»© tá»± thá»±c thi cá»§a nÃ³ nhÆ° sau:</p>
<p><strong><em>character filters</em></strong>&nbsp;-&gt;&nbsp;<strong><em>tokenizer</em></strong>&nbsp;-&gt;&nbsp;<strong><em>token filters</em></strong></p>
<h2>Bá»™ lá»c kÃ½ tá»± (Character Filters)</h2>
<p>Bá»™ lá»c kÃ½ tá»± nháº­n Ä‘áº§u vÃ o lÃ  vÄƒn báº£n gá»‘c, náº¿u cáº¥u hÃ¬nh nhiá»u hÆ¡n, nÃ³ sáº½ thá»±c hiá»‡n theo thá»© tá»± cáº¥u hÃ¬nh. Hiá»‡n táº¡i ES cÃ³ 3 loáº¡i bá»™ lá»c kÃ½ tá»± chÃ­nh:</p>
<ol>
<li><strong>html strip character filter</strong>: Loáº¡i bá» cÃ¡c pháº§n tá»­ HTML khá»i vÄƒn báº£n vÃ  thay tháº¿ cÃ¡c thá»±c thá»ƒ HTML báº±ng giÃ¡ trá»‹ giáº£i mÃ£ cá»§a chÃºng (vÃ­ dá»¥, thay tháº¿ <strong><em><code>ï¼†amp;</code></em></strong> báº±ng <strong><em><code>ï¼†</code></em></strong>).</li>
<li><strong>mapping character filter</strong>: Tá»± Ä‘á»‹nh nghÄ©a má»™t báº£n Ä‘á»“ Ã¡nh xáº¡, cÃ³ thá»ƒ thá»±c hiá»‡n má»™t sá»‘ thay tháº¿ tÃ¹y chá»‰nh, nhÆ° thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thay Ä‘á»•i chá»¯ hoa thÃ nh chá»¯ thÆ°á»ng cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c thiáº¿t láº­p táº¡i Ä‘Ã¢y.</li>
<li><strong>pattern replace character filter</strong>: Sá»­ dá»¥ng biá»ƒu thá»©c chÃ­nh quy java Ä‘á»ƒ khá»›p cÃ¡c kÃ½ tá»± cáº§n thay tháº¿ báº±ng chuá»—i thay tháº¿ Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh, ngoÃ i ra, chuá»—i thay tháº¿ cÃ³ thá»ƒ tham chiáº¿u Ä‘áº¿n nhÃ³m báº¯t trong biá»ƒu thá»©c chÃ­nh quy.</li>
</ol>
<h3>HTML strip character filter</h3>
<p>VÃ­ dá»¥ vá» HTML strip:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_analyze</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "tokenizer"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "keyword",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "char_filter"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "html_strip"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  ],</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "text"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "&lt;p&gt;I&amp;apos;m so &lt;b&gt;happy&lt;/b&gt;!&lt;/p&gt;"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Sau khi xá»­ lÃ½ báº±ng bá»™ lá»c kÃ½ tá»± <strong><em><code>html_strip</code></em></strong>, Ä‘áº§u ra nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>[ \nI'm so happy!\n ]</span></span></code></pre>
</div><h3>Mapping character filter</h3>
<p>Mapping character filter nháº­n má»™t báº£n Ä‘á»“ Ã¡nh xáº¡ giá»¯a khÃ³a vÃ  giÃ¡ trá»‹ (key =&gt; value) nhÆ° tham sá»‘ cáº¥u hÃ¬nh, má»—i khi gáº·p má»™t chuá»—i trong vÄƒn báº£n gá»‘c giá»‘ng vá»›i khÃ³a trong báº£n Ä‘á»“ Ã¡nh xáº¡, nÃ³ sáº½ thay tháº¿ chuá»—i Ä‘Ã³ báº±ng giÃ¡ trá»‹ tÆ°Æ¡ng á»©ng cá»§a khÃ³a.</p>
<p>Viá»‡c khá»›p chuá»—i trong vÄƒn báº£n gá»‘c vá»›i khÃ³a trong báº£n Ä‘á»“ Ã¡nh xáº¡ lÃ  tham lam, náº¿u cÃ³ sá»± chá»“ng chÃ©o giá»¯a cÃ¡c khÃ³a trong báº£n Ä‘á»“ Ã¡nh xáº¡, nÃ³ sáº½ Æ°u tiÃªn <strong>khá»›p khÃ³a dÃ i nháº¥t</strong>. CÅ©ng cÃ³ thá»ƒ thay tháº¿ báº±ng chuá»—i rá»—ng.</p>
<p>mapping char_filter khÃ´ng giá»‘ng nhÆ° html_strip cÃ³ thá»ƒ sá»­ dá»¥ng ngay láº­p tá»©c, nÃ³ cáº§n Ä‘Æ°á»£c cáº¥u hÃ¬nh trÆ°á»›c khi sá»­ dá»¥ng, nÃ³ cÃ³ hai thuá»™c tÃ­nh cÃ³ thá»ƒ cáº¥u hÃ¬nh:</p>
<p>| TÃªn tham sá»‘              | MÃ´ táº£ tham sá»‘                                                                                       |<br>
| :</p>
]]></content:encoded>
    </item>
    <item>
      <title>Elasticsearch Cluster and Shard</title>
      <link>https://vanhung4499.github.io/database/elasticsearch/cluster-shard.html</link>
      <guid>https://vanhung4499.github.io/database/elasticsearch/cluster-shard.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elasticsearch Cluster and Shard</source>
      <description>Elasticsearch Clusters vÃ  Shards Clusters Cluster trá»‘ng Náº¿u chÃºng ta khá»Ÿi Ä‘á»™ng má»™t nÃºt Ä‘Æ¡n láº» khÃ´ng chá»©a báº¥t ká»³ dá»¯ liá»‡u hay chá»‰ má»¥c nÃ o, cluster cá»§a chÃºng ta sáº½ trÃ´ng nhÆ° má»™t cl...</description>
      <category>elasticssearch</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Clusters</h2>
<h3>Cluster trá»‘ng</h3>
<p>Náº¿u chÃºng ta khá»Ÿi Ä‘á»™ng má»™t nÃºt Ä‘Æ¡n láº» khÃ´ng chá»©a báº¥t ká»³ dá»¯ liá»‡u hay chá»‰ má»¥c nÃ o, cluster cá»§a chÃºng ta sáº½ trÃ´ng nhÆ° má»™t cluster vá»›i má»™t nÃºt ná»™i dung trá»‘ng.</p>
<p><strong>HÃ¬nh 1. Cluster vá»›i nÃºt ná»™i dung trá»‘ng</strong></p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/elas_0201.png" alt="Cluster vá»›i nÃºt ná»™i dung trá»‘ng" tabindex="0" loading="lazy"><figcaption>Cluster vá»›i nÃºt ná»™i dung trá»‘ng</figcaption></figure>
<p>HÃ¬nh 1: Cluster chá»‰ cÃ³ má»™t nÃºt trá»‘ng</p>
<p>Má»™t thá»±c thá»ƒ Elasticsearch Ä‘ang cháº¡y Ä‘Æ°á»£c gá»i lÃ  má»™t <strong>nÃºt</strong>, vÃ  má»™t <strong>cluster</strong> bao gá»“m má»™t hoáº·c nhiá»u nÃºt vá»›i cáº¥u hÃ¬nh <code>cluster.name</code> giá»‘ng nhau. ChÃºng cÃ¹ng nhau chá»‹u Ã¡p lá»±c cá»§a dá»¯ liá»‡u vÃ  táº£i. Khi cÃ¡c nÃºt Ä‘Æ°á»£c thÃªm vÃ o hoáº·c loáº¡i bá» khá»i cluster, cluster sáº½ phÃ¢n phá»‘i láº¡i táº¥t cáº£ dá»¯ liá»‡u má»™t cÃ¡ch Ä‘á»u.</p>
<p>Khi má»™t nÃºt Ä‘Æ°á»£c báº§u lÃ m <strong>nÃºt chÃ­nh</strong>, nÃ³ chá»‹u trÃ¡ch nhiá»‡m quáº£n lÃ½ <strong>táº¥t cáº£ cÃ¡c thay Ä‘á»•i</strong> trong pháº¡m vi cluster, cháº³ng háº¡n nhÆ° thÃªm hoáº·c xÃ³a chá»‰ má»¥c, hoáº·c thÃªm hoáº·c xÃ³a cÃ¡c nÃºt, v.v. NÃºt chÃ­nh khÃ´ng cáº§n tham gia vÃ o cÃ¡c thay Ä‘á»•i cáº¥p Ä‘á»™ tÃ i liá»‡u vÃ  tÃ¬m kiáº¿m, vÃ¬ váº­y ngay cáº£ khi lÆ°u lÆ°á»£ng tÄƒng lÃªn, nÃ³ sáº½ khÃ´ng trá»Ÿ thÃ nh má»™t nÃºt cá»• chai khi cluster chá»‰ cÃ³ má»™t nÃºt chÃ­nh. Báº¥t ká»³ nÃºt nÃ o cÅ©ng cÃ³ thá»ƒ trá»Ÿ thÃ nh nÃºt chÃ­nh. Cluster máº«u cá»§a chÃºng ta chá»‰ cÃ³ má»™t nÃºt, vÃ¬ váº­y nÃ³ cÅ©ng trá»Ÿ thÃ nh nÃºt chÃ­nh.</p>
<p>LÃ  ngÆ°á»i dÃ¹ng, chÃºng ta cÃ³ thá»ƒ gá»­i yÃªu cáº§u Ä‘áº¿n báº¥t ká»³ nÃºt nÃ o trong cluster, bao gá»“m cáº£ nÃºt chÃ­nh. Má»—i nÃºt Ä‘á»u biáº¿t vá»‹ trÃ­ cá»§a báº¥t ká»³ tÃ i liá»‡u nÃ o vÃ  cÃ³ thá»ƒ chuyá»ƒn tiáº¿p yÃªu cáº§u cá»§a chÃºng ta trá»±c tiáº¿p Ä‘áº¿n nÃºt lÆ°u trá»¯ tÃ i liá»‡u mÃ  chÃºng ta cáº§n. KhÃ´ng quan trá»ng chÃºng ta gá»­i yÃªu cáº§u Ä‘áº¿n nÃºt nÃ o, nÃºt Ä‘Ã³ cÃ³ thá»ƒ chá»‹u trÃ¡ch nhiá»‡m thu tháº­p dá»¯ liá»‡u tá»« táº¥t cáº£ cÃ¡c nÃºt chá»©a tÃ i liá»‡u mÃ  chÃºng ta cáº§n vÃ  tráº£ káº¿t quáº£ cuá»‘i cÃ¹ng cho mÃ¡y khÃ¡ch. Elasticsearch quáº£n lÃ½ táº¥t cáº£ má»i thá»© nÃ y má»™t cÃ¡ch trong suá»‘t.</p>
<h3>Cluster Health</h3>
<p>ThÃ´ng tin giÃ¡m sÃ¡t cluster cá»§a Elasticsearch chá»©a nhiá»u dá»¯ liá»‡u thá»‘ng kÃª, trong Ä‘Ã³ quan trá»ng nháº¥t lÃ  <em>sá»©c khá»e cá»§a cluster</em>, Ä‘Æ°á»£c hiá»ƒn thá»‹ lÃ  <code>green</code>, <code>yellow</code>, hoáº·c <code>red</code> trong trÆ°á»ng <code>status</code>.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_cluster/health</span></span></code></pre>
</div><p>Trong má»™t cluster trá»‘ng khÃ´ng chá»©a báº¥t ká»³ chá»‰ má»¥c nÃ o, nÃ³ sáº½ cÃ³ ná»™i dung tráº£ vá» tÆ°Æ¡ng tá»± nhÆ° sau:</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "cluster_name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"elasticsearch"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "status"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"green"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "timed_out"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "number_of_nodes"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "number_of_data_nodes"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "active_primary_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "active_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "relocating_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "initializing_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "unassigned_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>TrÆ°á»ng <code>status</code> chá»‰ ra liá»‡u cluster hiá»‡n táº¡i cÃ³ hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng tá»•ng thá»ƒ hay khÃ´ng. Ba mÃ u cá»§a nÃ³ cÃ³ Ã½ nghÄ©a nhÆ° sau:</p>
<ul>
<li><strong><code>green</code></strong>: Táº¥t cáº£ cÃ¡c shard chÃ­nh vÃ  shard phá»¥ Ä‘á»u hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng.</li>
<li><strong><code>yellow</code></strong>: Táº¥t cáº£ cÃ¡c shard chÃ­nh Ä‘á»u hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng, nhÆ°ng khÃ´ng pháº£i táº¥t cáº£ cÃ¡c shard phá»¥ Ä‘á»u hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng.</li>
<li><strong><code>red</code></strong>: CÃ³ shard chÃ­nh khÃ´ng hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng.</li>
</ul>
<h3>ThÃªm chá»‰ má»¥c</h3>
<p>Khi chÃºng ta thÃªm dá»¯ liá»‡u vÃ o Elasticsearch, chÃºng ta cáº§n sá»­ dá»¥ng <em>chá»‰ má»¥c</em> - nÆ¡i lÆ°u trá»¯ dá»¯ liá»‡u liÃªn quan. Chá»‰ má»¥c thá»±c ra lÃ  khÃ´ng gian tÃªn logic trá» Ä‘áº¿n má»™t hoáº·c nhiá»u shard váº­t lÃ½.</p>
<p>Má»™t <em>shard</em> lÃ  má»™t <em>Ä‘Æ¡n vá»‹ cÃ´ng viá»‡c</em> cÆ¡ báº£n, nÃ³ chá»‰ lÆ°u trá»¯ má»™t pháº§n cá»§a táº¥t cáº£ dá»¯ liá»‡u. BÃ¢y giá» chÃºng ta chá»‰ cáº§n biáº¿t má»™t shard lÃ  má»™t thá»ƒ hiá»‡n cá»§a Lucene, vÃ  nÃ³ chÃ­nh lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m hoÃ n chá»‰nh. TÃ i liá»‡u cá»§a chÃºng ta Ä‘Æ°á»£c lÆ°u trá»¯ vÃ  chá»‰ má»¥c trong shard, nhÆ°ng á»©ng dá»¥ng thá»±c hiá»‡n tÆ°Æ¡ng tÃ¡c trá»±c tiáº¿p vá»›i chá»‰ má»¥c chá»© khÃ´ng pháº£i vá»›i shard.</p>
<p>Elasticsearch sá»­ dá»¥ng shard Ä‘á»ƒ phÃ¢n phá»‘i dá»¯ liá»‡u Ä‘áº¿n cÃ¡c nÆ¡i khÃ¡c nhau trong cluster. shard lÃ  bá»™ chá»©a dá»¯ liá»‡u, tÃ i liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ trong shard, vÃ  shard Ä‘Æ°á»£c phÃ¢n bá»• Ä‘áº¿n cÃ¡c nÃºt khÃ¡c nhau trong cluster. Khi kÃ­ch thÆ°á»›c cá»§a cluster cá»§a báº¡n má»Ÿ rá»™ng hoáº·c thu háº¹p, Elasticsearch sáº½ tá»± Ä‘á»™ng di chuyá»ƒn shard giá»¯a cÃ¡c nÃºt, Ä‘á»ƒ dá»¯ liá»‡u váº«n Ä‘Æ°á»£c phÃ¢n phá»‘i Ä‘á»u trong cluster.</p>
<p>Má»™t shard cÃ³ thá»ƒ lÃ  shard <em>chÃ­nh</em> hoáº·c shard <em>sao lÆ°u</em>. Báº¥t ká»³ tÃ i liá»‡u nÃ o trong chá»‰ má»¥c Ä‘á»u thuá»™c vá» má»™t shard chÃ­nh, vÃ¬ váº­y sá»‘ lÆ°á»£ng shard chÃ­nh quyáº¿t Ä‘á»‹nh lÆ°á»£ng dá»¯ liá»‡u tá»‘i Ä‘a mÃ  chá»‰ má»¥c cÃ³ thá»ƒ lÆ°u trá»¯.</p>
<blockquote>
<p>Ká»¹ thuáº­t, má»™t shard chÃ­nh cÃ³ thá»ƒ lÆ°u trá»¯ tá»‘i Ä‘a <code>Integer.MAX_VALUE - 128</code> tÃ i liá»‡u, nhÆ°ng giÃ¡ trá»‹ tá»‘i Ä‘a thá»±c táº¿ cÃ²n phá»¥ thuá»™c vÃ o tÃ¬nh huá»‘ng sá»­ dá»¥ng cá»§a báº¡n: bao gá»“m pháº§n cá»©ng báº¡n sá»­ dá»¥ng, kÃ­ch thÆ°á»›c vÃ  Ä‘á»™ phá»©c táº¡p cá»§a tÃ i liá»‡u, cÃ¡ch chá»‰ má»¥c vÃ  truy váº¥n tÃ i liá»‡u cÅ©ng nhÆ° thá»i gian pháº£n há»“i mong Ä‘á»£i cá»§a báº¡n.</p>
</blockquote>
<p>Má»™t shard sao lÆ°u chá»‰ lÃ  má»™t báº£n sao cá»§a shard chÃ­nh. shard sao lÆ°u Ä‘Ã³ng vai trÃ² lÃ  báº£n sao dá»± phÃ²ng dÆ° thá»«a Ä‘á»ƒ báº£o vá»‡ dá»¯ liá»‡u khÃ´ng bá»‹ máº¥t khi xáº£y ra lá»—i pháº§n cá»©ng, vÃ  cung cáº¥p dá»‹ch vá»¥ cho cÃ¡c hoáº¡t Ä‘á»™ng Ä‘á»c nhÆ° tÃ¬m kiáº¿m vÃ  tráº£ vá» tÃ i liá»‡u.</p>
<p>Sá»‘ shard chÃ­nh Ä‘Ã£ Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh khi táº¡o chá»‰ má»¥c, nhÆ°ng sá»‘ shard sao lÆ°u cÃ³ thá»ƒ Ä‘Æ°á»£c thay Ä‘á»•i báº¥t cá»© lÃºc nÃ o.</p>
<p>HÃ£y táº¡o má»™t chá»‰ má»¥c cÃ³ tÃªn <code>blogs</code> trong má»™t cluster vá»›i má»™t nÃºt trá»‘ng. Theo máº·c Ä‘á»‹nh, chá»‰ má»¥c sáº½ Ä‘Æ°á»£c phÃ¢n bá»• 5 shard chÃ­nh, nhÆ°ng vÃ¬ má»¥c Ä‘Ã­ch minh há»a, chÃºng tÃ´i sáº½ phÃ¢n bá»• 3 shard chÃ­nh vÃ  má»™t báº£n sao (má»—i shard chÃ­nh cÃ³ má»™t shard sao lÆ°u):</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">PUT /blogs</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">   "settings"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "number_of_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "number_of_replicas"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">   }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Cluster cá»§a chÃºng ta hiá»‡n táº¡i lÃ  <em>má»™t cluster Ä‘Æ¡n nÃºt cÃ³ má»™t chá»‰ má»¥c</em>. Táº¥t cáº£ 3 shard chÃ­nh Ä‘á»u Ä‘Æ°á»£c phÃ¢n bá»• táº¡i <code>Node 1</code>.</p>
<p><strong>HÃ¬nh 2. Cluster Ä‘Æ¡n nÃºt cÃ³ má»™t chá»‰ má»¥c</strong></p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/elas_0202.png" alt="Cluster Ä‘Æ¡n nÃºt cÃ³ má»™t chá»‰ má»¥c" tabindex="0" loading="lazy"><figcaption>Cluster Ä‘Æ¡n nÃºt cÃ³ má»™t chá»‰ má»¥c</figcaption></figure>
<p>Náº¿u chÃºng ta kiá»ƒm tra sá»©c khá»e cá»§a cluster ngay bÃ¢y giá», chÃºng ta sáº½ tháº¥y ná»™i dung sau:</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "cluster_name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"elasticsearch"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "status"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"yellow"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "timed_out"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "number_of_nodes"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "number_of_data_nodes"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "active_primary_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "active_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "relocating_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "initializing_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "unassigned_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "delayed_unassigned_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "number_of_pending_tasks"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "number_of_in_flight_fetch"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "task_max_waiting_in_queue_millis"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "active_shards_percent_as_number"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">50</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>GiÃ¡ trá»‹ status cá»§a cluster lÃ  yellow</li>
<li>Sá»‘ lÆ°á»£ng shard sao lÆ°u khÃ´ng Ä‘Æ°á»£c phÃ¢n bá»• cho báº¥t ká»³ nÃºt nÃ o</li>
</ul>
<p>Sá»©c khá»e cá»§a cluster á»Ÿ tráº¡ng thÃ¡i <code>yellow</code> cÃ³ nghÄ©a lÃ  táº¥t cáº£ cÃ¡c shard <em>chÃ­nh</em> Ä‘á»u hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng (cluster cÃ³ thá»ƒ phá»¥c vá»¥ táº¥t cáº£ cÃ¡c yÃªu cáº§u), nhÆ°ng khÃ´ng pháº£i táº¥t cáº£ cÃ¡c shard <em>sao lÆ°u</em> Ä‘á»u á»Ÿ tráº¡ng thÃ¡i bÃ¬nh thÆ°á»ng. Thá»±c táº¿, táº¥t cáº£ 3 shard sao lÆ°u Ä‘á»u lÃ  <code>unassigned</code> - chÃºng khÃ´ng Ä‘Æ°á»£c phÃ¢n bá»• cho báº¥t ká»³ nÃºt nÃ o. Viá»‡c lÆ°u trá»¯ dá»¯ liá»‡u gá»‘c vÃ  báº£n sao trÃªn cÃ¹ng má»™t nÃºt khÃ´ng cÃ³ Ã½ nghÄ©a, bá»Ÿi vÃ¬ má»™t khi chÃºng ta máº¥t nÃºt Ä‘Ã³, chÃºng ta cÅ©ng sáº½ máº¥t táº¥t cáº£ dá»¯ liá»‡u báº£n sao trÃªn nÃºt Ä‘Ã³.</p>
<p>Hiá»‡n táº¡i, cluster cá»§a chÃºng ta Ä‘ang hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng, nhÆ°ng cÃ³ nguy cÆ¡ máº¥t dá»¯ liá»‡u khi xáº£y ra lá»—i pháº§n cá»©ng.</p>
<h3>ThÃªm kháº£ nÄƒng chuyá»ƒn Ä‘á»•i khi gáº·p sá»± cá»‘</h3>
<p>Khi chá»‰ cÃ³ má»™t nÃºt Ä‘ang hoáº¡t Ä‘á»™ng trong cluster, Ä‘iá»u nÃ y cÃ³ nghÄ©a lÃ  sáº½ cÃ³ má»™t váº¥n Ä‘á» vá» Ä‘iá»ƒm lá»—i Ä‘Æ¡n - khÃ´ng cÃ³ sá»± dá»± phÃ²ng. May máº¯n thay, chÃºng ta chá»‰ cáº§n khá»Ÿi Ä‘á»™ng thÃªm má»™t nÃºt ná»¯a Ä‘á»ƒ ngÄƒn cháº·n máº¥t dá»¯ liá»‡u.</p>
<blockquote>
<p>Äá»ƒ kiá»ƒm tra tÃ¬nh hÃ¬nh sau khi khá»Ÿi Ä‘á»™ng nÃºt thá»© hai, báº¡n cÃ³ thá»ƒ khá»Ÿi Ä‘á»™ng má»™t nÃºt má»›i trong cÃ¹ng má»™t thÆ° má»¥c, hoÃ n toÃ n tuÃ¢n theo cÃ¡ch khá»Ÿi Ä‘á»™ng nÃºt Ä‘áº§u tiÃªn (xem CÃ i Ä‘áº·t vÃ  cháº¡y Elasticsearch). Nhiá»u nÃºt cÃ³ thá»ƒ chia sáº» cÃ¹ng má»™t thÆ° má»¥c.</p>
<p>Khi báº¡n khá»Ÿi Ä‘á»™ng nÃºt thá»© hai trÃªn cÃ¹ng má»™t mÃ¡y, miá»…n lÃ  nÃ³ cÃ³ cáº¥u hÃ¬nh <code>cluster.name</code> giá»‘ng vá»›i nÃºt Ä‘áº§u tiÃªn, nÃ³ sáº½ tá»± Ä‘á»™ng phÃ¡t hiá»‡n cluster vÃ  tham gia vÃ o Ä‘Ã³. Tuy nhiÃªn, khi khá»Ÿi Ä‘á»™ng nÃºt trÃªn cÃ¡c mÃ¡y khÃ¡c nhau, Ä‘á»ƒ tham gia vÃ o cÃ¹ng má»™t cluster, báº¡n cáº§n cáº¥u hÃ¬nh danh sÃ¡ch host unicast cÃ³ thá»ƒ káº¿t ná»‘i.</p>
</blockquote>
<p>Náº¿u chÃºng ta khá»Ÿi Ä‘á»™ng má»™t nÃºt thá»© hai, cluster cá»§a chÃºng ta sáº½ trá»Ÿ thÃ nh má»™t cluster vá»›i hai nÃºt - táº¥t cáº£ cÃ¡c shard chÃ­nh vÃ  shard sao lÆ°u Ä‘á»u Ä‘Ã£ Ä‘Æ°á»£c phÃ¢n bá»•.</p>
<p><strong>HÃ¬nh 3. Cluster vá»›i hai nÃºt - táº¥t cáº£ cÃ¡c shard chÃ­nh vÃ  shard sao lÆ°u Ä‘á»u Ä‘Ã£ Ä‘Æ°á»£c phÃ¢n bá»•</strong></p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/elas_0203.png" alt="Cluster vá»›i hai nÃºt" tabindex="0" loading="lazy"><figcaption>Cluster vá»›i hai nÃºt</figcaption></figure>
<p>Khi nÃºt thá»© hai tham gia vÃ o cluster, 3 shard <em>sao lÆ°u</em> sáº½ Ä‘Æ°á»£c phÃ¢n bá»• cho nÃºt nÃ y - má»—i shard chÃ­nh cÃ³ má»™t shard sao lÆ°u tÆ°Æ¡ng á»©ng. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  khi báº¥t ká»³ nÃºt nÃ o trong cluster gáº·p sá»± cá»‘, dá»¯ liá»‡u cá»§a chÃºng ta váº«n cÃ²n nguyÃªn váº¹n.</p>
<p>Táº¥t cáº£ cÃ¡c tÃ i liá»‡u má»›i Ä‘Æ°á»£c chá»‰ má»¥c sáº½ Ä‘Æ°á»£c lÆ°u trá»¯ trong shard chÃ­nh, sau Ä‘Ã³ Ä‘Æ°á»£c sao chÃ©p song song Ä‘áº¿n shard sao lÆ°u tÆ°Æ¡ng á»©ng. Äiá»u nÃ y Ä‘áº£m báº£o ráº±ng chÃºng ta cÃ³ thá»ƒ láº¥y tÃ i liá»‡u tá»« shard chÃ­nh cÅ©ng nhÆ° tá»« shard sao lÆ°u.</p>
<p><code>cluster-health</code> hiá»‡n táº¡i hiá»ƒn thá»‹ tráº¡ng thÃ¡i lÃ  <code>green</code>, Ä‘iá»u nÃ y cho tháº¥y táº¥t cáº£ 6 shard (bao gá»“m 3 shard chÃ­nh vÃ  3 shard sao lÆ°u) Ä‘á»u Ä‘ang hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng.</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "cluster_name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"elasticsearch"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "status"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"green"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "timed_out"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "number_of_nodes"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "number_of_data_nodes"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "active_primary_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "active_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">6</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "relocating_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "initializing_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "unassigned_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "delayed_unassigned_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "number_of_pending_tasks"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "number_of_in_flight_fetch"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "task_max_waiting_in_queue_millis"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "active_shards_percent_as_number"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">100</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>Tráº¡ng thÃ¡i <code>status</code> cá»§a cluster lÃ  <code>green</code></li>
</ul>
<p>Cluster cá»§a chÃºng ta hiá»‡n táº¡i khÃ´ng chá»‰ Ä‘ang hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng, mÃ  cÃ²n á»Ÿ tráº¡ng thÃ¡i <em>luÃ´n sáºµn sÃ ng</em>.</p>
<h3>Má»Ÿ rá»™ng ngang</h3>
<p>LÃ m tháº¿ nÃ o Ä‘á»ƒ chÃºng ta má»Ÿ rá»™ng theo nhu cáº§u cho á»©ng dá»¥ng Ä‘ang phÃ¡t triá»ƒn cá»§a chÃºng ta? Khi khá»Ÿi Ä‘á»™ng má»™t nÃºt thá»© ba, cluster cá»§a chÃºng ta sáº½ trá»Ÿ thÃ nh má»™t cluster vá»›i ba nÃºt - phÃ¢n phá»‘i láº¡i cÃ¡c shard Ä‘á»ƒ phÃ¢n tÃ¡n táº£i.</p>
<p><strong>HÃ¬nh 4. Cluster vá»›i ba nÃºt - phÃ¢n phá»‘i láº¡i cÃ¡c shard Ä‘á»ƒ phÃ¢n tÃ¡n táº£i</strong></p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/elas_0204.png" alt="Cluster vá»›i ba nÃºt" tabindex="0" loading="lazy"><figcaption>Cluster vá»›i ba nÃºt</figcaption></figure>
<p>Má»™t shard tá»« <code>Node 1</code> vÃ  <code>Node 2</code> Ä‘Ã£ Ä‘Æ°á»£c di chuyá»ƒn Ä‘áº¿n nÃºt má»›i <code>Node 3</code>, bÃ¢y giá» má»—i nÃºt Ä‘á»u cÃ³ 2 shard, thay vÃ¬ 3 nhÆ° trÆ°á»›c. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  tÃ i nguyÃªn pháº§n cá»©ng (CPU, RAM, I/O) cá»§a má»—i nÃºt sáº½ Ä‘Æ°á»£c chia sáº» cho Ã­t shard hÆ¡n, hiá»‡u suáº¥t cá»§a má»—i shard sáº½ Ä‘Æ°á»£c cáº£i thiá»‡n.</p>
<p>Má»™t shard lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m hoÃ n chá»‰nh, nÃ³ cÃ³ kháº£ nÄƒng sá»­ dá»¥ng táº¥t cáº£ cÃ¡c tÃ i nguyÃªn trÃªn má»™t nÃºt. Chá»‰ má»¥c cá»§a chÃºng ta cÃ³ 6 shard (3 shard chÃ­nh vÃ  3 shard sao lÆ°u) cÃ³ thá»ƒ má»Ÿ rá»™ng tá»‘i Ä‘a lÃªn Ä‘áº¿n 6 nÃºt, má»—i nÃºt cÃ³ má»™t shard, vÃ  má»—i shard cÃ³ toÃ n bá»™ tÃ i nguyÃªn cá»§a nÃºt nÆ¡i nÃ³ Ä‘áº·t.</p>
<h2>Shard</h2>
<blockquote>
<ul>
<li>Táº¡i sao tÃ¬m kiáº¿m lÃ  <em>gáº§n</em> thá»i gian thá»±c?</li>
<li>Táº¡i sao cÃ¡c hoáº¡t Ä‘á»™ng CRUD (Táº¡o - Äá»c - Cáº­p nháº­t - XÃ³a) trÃªn tÃ i liá»‡u lÃ  <em>thá»i gian thá»±c</em>?</li>
<li>Elasticsearch lÃ m tháº¿ nÃ o Ä‘á»ƒ Ä‘áº£m báº£o cÃ¡c cáº­p nháº­t Ä‘Æ°á»£c lÆ°u trá»¯ má»™t cÃ¡ch bá»n vá»¯ng mÃ  khÃ´ng máº¥t dá»¯ liá»‡u khi máº¥t Ä‘iá»‡n?</li>
<li>Táº¡i sao viá»‡c xÃ³a tÃ i liá»‡u khÃ´ng giáº£i phÃ³ng khÃ´ng gian ngay láº­p tá»©c?</li>
<li>API <code>refresh</code>, <code>flush</code>, vÃ  <code>optimize</code> lÃ m gÃ¬ vÃ  khi nÃ o báº¡n nÃªn sá»­ dá»¥ng chÃºng?</li>
</ul>
</blockquote>
<h3>LÃ m cho vÄƒn báº£n cÃ³ thá»ƒ tÃ¬m kiáº¿m</h3>
<p>ThÃ¡ch thá»©c Ä‘áº§u tiÃªn cáº§n giáº£i quyáº¿t lÃ  lÃ m tháº¿ nÃ o Ä‘á»ƒ lÃ m cho vÄƒn báº£n cÃ³ thá»ƒ tÃ¬m kiáº¿m. CÃ¡c cÆ¡ sá»Ÿ dá»¯ liá»‡u truyá»n thá»‘ng lÆ°u trá»¯ má»™t giÃ¡ trá»‹ duy nháº¥t cho má»—i trÆ°á»ng, nhÆ°ng Ä‘iá»u nÃ y khÃ´ng Ä‘á»§ cho tÃ¬m kiáº¿m toÃ n vÄƒn. Má»—i tá»« trong trÆ°á»ng vÄƒn báº£n cáº§n Ä‘Æ°á»£c tÃ¬m kiáº¿m, Ä‘iá»u nÃ y Ä‘á»‘i vá»›i cÆ¡ sá»Ÿ dá»¯ liá»‡u cÃ³ nghÄ©a lÃ  cáº§n cÃ³ kháº£ nÄƒng láº­p chá»‰ má»¥c nhiá»u giÃ¡ trá»‹ (á»Ÿ Ä‘Ã¢y lÃ  tá»«) cho má»™t trÆ°á»ng duy nháº¥t.</p>
<p>Cáº¥u trÃºc dá»¯ liá»‡u phÃ¹ há»£p nháº¥t Ä‘á»ƒ há»— trá»£ yÃªu cáº§u <em>nhiá»u giÃ¡ trá»‹ cho má»™t trÆ°á»ng</em> lÃ  <em>chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c</em> mÃ  chÃºng ta Ä‘Ã£ giá»›i thiá»‡u trong chÆ°Æ¡ng <a href="https://www.elastic.co/guide/cn/elasticsearch/guide/current/inverted-index.html" target="_blank" rel="noopener noreferrer">Chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c</a>. Chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c bao gá»“m má»™t danh sÃ¡ch Ä‘Ã£ sáº¯p xáº¿p, chá»©a táº¥t cáº£ cÃ¡c cÃ¡ thá»ƒ khÃ´ng trÃ¹ng láº·p xuáº¥t hiá»‡n trong tÃ i liá»‡u, hoáº·c Ä‘Æ°á»£c gá»i lÃ  <em>cá»¥m tá»«</em>, vÃ  cho má»—i cá»¥m tá»«, chá»©a danh sÃ¡ch táº¥t cáº£ cÃ¡c tÃ i liá»‡u mÃ  nÃ³ Ä‘Ã£ xuáº¥t hiá»‡n.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Term  | Doc 1 | Doc 2 | Doc 3 | ...</span></span></code></pre>
</div>]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/elas_0201.png" type="image/png"/>
    </item>
    <item>
      <title>Elasticsearch Index</title>
      <link>https://vanhung4499.github.io/database/elasticsearch/es-index.html</link>
      <guid>https://vanhung4499.github.io/database/elasticsearch/es-index.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elasticsearch Index</source>
      <description>Elasticsearch Index Thao tÃ¡c quáº£n lÃ½ chá»‰ má»¥c Quáº£n lÃ½ chá»‰ má»¥c Elasticsearch chá»§ yáº¿u bao gá»“m cÃ¡ch táº¡o chá»‰ má»¥c, xÃ³a chá»‰ má»¥c, cáº­p nháº­t báº£n sao, quyá»n Ä‘á»c ghi chá»‰ má»¥c, cáº¥u hÃ¬nh bÃ­ da...</description>
      <category>elasticssearch</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Thao tÃ¡c quáº£n lÃ½ chá»‰ má»¥c</h2>
<p>Quáº£n lÃ½ chá»‰ má»¥c Elasticsearch chá»§ yáº¿u bao gá»“m cÃ¡ch táº¡o chá»‰ má»¥c, xÃ³a chá»‰ má»¥c, cáº­p nháº­t báº£n sao, quyá»n Ä‘á»c ghi chá»‰ má»¥c, cáº¥u hÃ¬nh bÃ­ danh chá»‰ má»¥c, vÃ  nhiá»u ná»™i dung khÃ¡c.</p>
<h3>XÃ³a chá»‰ má»¥c</h3>
<p>Äá»ƒ xÃ³a chá»‰ má»¥c ES, báº¡n chá»‰ cáº§n gá»­i má»™t yÃªu cáº§u http delete Ä‘áº¿n giao diá»‡n http cá»§a cá»¥m ES vá»›i chá»‰ má»¥c Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh, báº¡n cÃ³ thá»ƒ thá»±c hiá»‡n Ä‘iá»u nÃ y báº±ng lá»‡nh curl, cá»¥ thá»ƒ nhÆ° sau:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">curl</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -X</span><span style="color:#98C379;--shiki-dark:#98C379"> DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> http://{es_host}:{es_http_port}/{index}</span></span></code></pre>
</div><p>Náº¿u xÃ³a thÃ nh cÃ´ng, nÃ³ sáº½ tráº£ vá» thÃ´ng tin nhÆ° sau, vÃ­ dá»¥ cá»¥ thá»ƒ nhÆ° sau:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">curl</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -X</span><span style="color:#98C379;--shiki-dark:#98C379"> DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> http://10.10.10.66:9200/my_index?pretty</span></span></code></pre>
</div><p>Äá»ƒ lÃ m cho thÃ´ng tin tráº£ vá» dá»… Ä‘á»c hÆ¡n, chÃºng tÃ´i Ä‘Ã£ thÃªm tham sá»‘ pretty:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "acknowledged"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3>BÃ­ danh chá»‰ má»¥c</h3>
<p>BÃ­ danh chá»‰ má»¥c ES lÃ  tÃªn khÃ¡c mÃ  báº¡n Ä‘áº·t cho má»™t hoáº·c nhiá»u chá»‰ má»¥c, má»™t á»©ng dá»¥ng Ä‘iá»ƒn hÃ¬nh lÃ  Ä‘á»ƒ thá»±c hiá»‡n chuyá»ƒn Ä‘á»•i mÆ°á»£t mÃ  cho viá»‡c sá»­ dá»¥ng chá»‰ má»¥c.</p>
<p>Äáº§u tiÃªn, táº¡o chá»‰ má»¥c my_index, sau Ä‘Ã³ Ä‘áº·t bÃ­ danh my_alias Ä‘á»ƒ chá»‰ Ä‘áº¿n nÃ³, vÃ­ dá»¥ nhÆ° sau:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> /my_index</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> /my_index/_alias/my_alias</span></span></code></pre>
</div><p>Báº¡n cÅ©ng cÃ³ thá»ƒ thá»±c hiá»‡n nhÆ° sau:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> /_aliases</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "actions"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"add"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "index":</span><span style="color:#98C379;--shiki-dark:#98C379"> "my_index",</span><span style="color:#98C379;--shiki-dark:#98C379"> "alias":</span><span style="color:#98C379;--shiki-dark:#98C379"> "my_alias"</span><span style="color:#98C379;--shiki-dark:#98C379"> }}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Báº¡n cÅ©ng cÃ³ thá»ƒ thÃªm vÃ  xÃ³a bÃ­ danh trong má»™t yÃªu cáº§u:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> /_aliases</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "actions"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"remove"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "index":</span><span style="color:#98C379;--shiki-dark:#98C379"> "my_index",</span><span style="color:#98C379;--shiki-dark:#98C379"> "alias":</span><span style="color:#98C379;--shiki-dark:#98C379"> "my_alias"</span><span style="color:#98C379;--shiki-dark:#98C379"> }},</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"add"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "index":</span><span style="color:#98C379;--shiki-dark:#98C379"> "my_index_v2",</span><span style="color:#98C379;--shiki-dark:#98C379"> "alias":</span><span style="color:#98C379;--shiki-dark:#98C379"> "my_alias"</span><span style="color:#98C379;--shiki-dark:#98C379"> }}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><blockquote>
<p>Cáº§n lÆ°u Ã½ ráº±ng, náº¿u bÃ­ danh vÃ  chá»‰ má»¥c lÃ  má»™t-má»™t, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng bÃ­ danh Ä‘á»ƒ láº­p chá»‰ má»¥c hoáº·c truy váº¥n tÃ i liá»‡u. Tuy nhiÃªn, náº¿u bÃ­ danh vÃ  chá»‰ má»¥c lÃ  má»™t-nhiá»u, viá»‡c sá»­ dá»¥ng bÃ­ danh sáº½ gÃ¢y ra lá»—i, vÃ¬ ES khÃ´ng biáº¿t pháº£i ghi tÃ i liá»‡u vÃ o chá»‰ má»¥c nÃ o hoáº·c Ä‘á»c tÃ i liá»‡u tá»« chá»‰ má»¥c nÃ o.</p>
</blockquote>
<p>Má»™t á»©ng dá»¥ng Ä‘iá»ƒn hÃ¬nh cá»§a bÃ­ danh chá»‰ má»¥c ES lÃ  chuyá»ƒn Ä‘á»•i mÆ°á»£t mÃ , báº¡n cÃ³ thá»ƒ xem thÃªm chi tiáº¿t táº¡i <a href="https://www.knowledgedict.com/tutorial/elasticsearch-index-smooth-shift.html" target="_blank" rel="noopener noreferrer">PhÆ°Æ¡ng phÃ¡p chuyá»ƒn Ä‘á»•i mÆ°á»£t mÃ  chá»‰ má»¥c Elasticsearch (ES) khÃ´ng cáº§n táº¯t mÃ¡y (khÃ´ng cáº§n khá»Ÿi Ä‘á»™ng láº¡i)</a>.</p>
<h2>Giáº£i thÃ­ch Settings</h2>
<p>Cáº¥u hÃ¬nh chá»‰ má»¥c Elasticsearch chá»§ yáº¿u Ä‘Æ°á»£c chia thÃ nh <strong>thuá»™c tÃ­nh cáº¥u hÃ¬nh tÄ©nh</strong> vÃ  <strong>thuá»™c tÃ­nh cáº¥u hÃ¬nh Ä‘á»™ng</strong>. Thuá»™c tÃ­nh cáº¥u hÃ¬nh tÄ©nh khÃ´ng thá»ƒ thay Ä‘á»•i sau khi táº¡o chá»‰ má»¥c, trong khi thuá»™c tÃ­nh cáº¥u hÃ¬nh Ä‘á»™ng cÃ³ thá»ƒ thay Ä‘á»•i báº¥t cá»© lÃºc nÃ o.</p>
<p>API Ä‘á»ƒ thiáº¿t láº­p chá»‰ má»¥c ES lÃ  <strong><em><code>_settings</code></em></strong>, vÃ­ dá»¥ Ä‘áº§y Ä‘á»§ nhÆ° sau:</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> /my_index</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "settings"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "index"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "number_of_shards"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "1",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "number_of_replicas"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "1",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "refresh_interval"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "60s",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "analysis"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "filter"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "tsconvert"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "type"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "stconvert",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "convert_type"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "t2s",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "delimiter"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> ","</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">          },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "synonym"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "type"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "synonym",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "synonyms_path"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "analysis/synonyms.txt"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">          }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "analyzer"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "ik_max_word_synonym"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "filter"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">              "synonym"</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">              "tsconvert"</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">              "standard"</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">              "lowercase"</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">              "stop"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            ],</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "tokenizer"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "ik_max_word"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">          },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "ik_smart_synonym"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "filter"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">              "synonym"</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">              "standard"</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">              "lowercase"</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">              "stop"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            ],</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "tokenizer"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "ik_smart"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">          }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">		"mapping"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">			"coerce"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "false",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">			"ignore_malformed"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "false"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">		},</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">		"indexing"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">			"slowlog"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">				"threshold"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">					"index"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">						"warn"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "2s",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">						"info"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "1s"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">					}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">				}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">		},</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">		"provided_name"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "hospital_202101070533",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">		"query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">			"default_field"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "timestamp",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">			"parse"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">				"allow_unmapped_fields"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "false"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">		},</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">		"requests"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">			"cache"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">				"enable"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "true"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">		},</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">		"search"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">			"slowlog"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">				"threshold"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">					"fetch"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">						"warn"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "1s",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">						"info"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "200ms"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">					},</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">					"query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">						"warn"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "1s",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">						"info"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "500ms"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">					}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">				}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">		}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">	}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>Thuá»™c tÃ­nh cá»‘ Ä‘á»‹nh</h3>
<ul>
<li><strong><em><code>index.creation_date</code></em></strong>: ÄÃºng nhÆ° tÃªn gá»i, Ä‘Ã¢y lÃ  dáº¥u thá»i gian táº¡o chá»‰ má»¥c.</li>
<li><strong><em><code>index.uuid</code></em></strong>: ThÃ´ng tin uuid cá»§a chá»‰ má»¥c.</li>
<li><strong><em><code>index.version.created</code></em></strong>: PhiÃªn báº£n cá»§a chá»‰ má»¥c.</li>
</ul>
<h3>Cáº¥u hÃ¬nh tÄ©nh chá»‰ má»¥c</h3>
<ul>
<li><strong><em><code>index.number_of_shards</code></em></strong>: Sá»‘ lÆ°á»£ng máº£nh chÃ­nh cá»§a chá»‰ má»¥c, giÃ¡ trá»‹ máº·c Ä‘á»‹nh lÃ  <strong><em><code>5</code></em></strong>. Cáº¥u hÃ¬nh nÃ y khÃ´ng thá»ƒ thay Ä‘á»•i sau khi táº¡o chá»‰ má»¥c; á»Ÿ cáº¥p Ä‘á»™ es, báº¡n cÃ³ thá»ƒ thiáº¿t láº­p sá»‘ lÆ°á»£ng máº£nh tá»‘i Ä‘a cho chá»‰ má»¥c thÃ´ng qua thuá»™c tÃ­nh <strong><em><code>es.index.max_number_of_shards</code></em></strong>, máº·c Ä‘á»‹nh lÃ  <strong><em><code>1024</code></em></strong>.</li>
<li><strong><em><code>index.codec</code></em></strong>: Thuáº­t toÃ¡n nÃ©n Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u, giÃ¡ trá»‹ máº·c Ä‘á»‹nh lÃ  <strong><em><code>LZ4</code></em></strong>. CÃ¡c giÃ¡ trá»‹ tÃ¹y chá»n khÃ¡c bao gá»“m <strong><em><code>best_compression</code></em></strong>, nÃ³ cÃ³ tá»· lá»‡ nÃ©n tá»‘t hÆ¡n so vá»›i LZ4 (tá»©c lÃ  chiáº¿m Ã­t khÃ´ng gian Ä‘Ä©a hÆ¡n, nhÆ°ng hiá»‡u suáº¥t lÆ°u trá»¯ tháº¥p hÆ¡n LZ4).</li>
<li><strong><em><code>index.routing_partition_size</code></em></strong>: Sá»‘ lÆ°á»£ng phÃ¢n vÃ¹ng Ä‘á»‹nh tuyáº¿n, náº¿u thiáº¿t láº­p tham sá»‘ nÃ y, thuáº­t toÃ¡n Ä‘á»‹nh tuyáº¿n sáº½ lÃ : <code>( hash(_routing) + hash(_id) % index.routing_parttion_size ) % number_of_shards</code>. Náº¿u giÃ¡ trá»‹ nÃ y khÃ´ng Ä‘Æ°á»£c thiáº¿t láº­p, thuáº­t toÃ¡n Ä‘á»‹nh tuyáº¿n sáº½ lÃ  <code>hash(_routing) % number_of_shardings</code>, <code>_routing</code> máº·c Ä‘á»‹nh lÃ  <code>_id</code>.</li>
</ul>
<p>Trong cáº¥u hÃ¬nh tÄ©nh, má»™t pháº§n quan trá»ng lÃ  cáº¥u hÃ¬nh phÃ¢n tÃ­ch (config analyzers).</p>
<ul>
<li>
<p><strong><code>index.analysis</code></strong></p>
<p>: Cáº¥u hÃ¬nh ngoÃ i cÃ¹ng cá»§a phÃ¢n tÃ­ch, bÃªn trong chá»§ yáº¿u Ä‘Æ°á»£c chia thÃ nh char_filter, tokenizer, filter vÃ  analyzer.</p>
<ul>
<li><strong><em><code>char_filter</code></em></strong>: Äá»‹nh nghÄ©a bá»™ lá»c kÃ½ tá»± má»›i.</li>
<li><strong><em><code>tokenizer</code></em></strong>: Äá»‹nh nghÄ©a tokenizer má»›i.</li>
<li><strong><em><code>filter</code></em></strong>: Äá»‹nh nghÄ©a bá»™ lá»c token má»›i, nhÆ° bá»™ lá»c Ä‘á»“ng nghÄ©a.</li>
<li><strong><em><code>analyzer</code></em></strong>: Cáº¥u hÃ¬nh phÃ¢n tÃ­ch má»›i, thÆ°á»ng lÃ  sá»± káº¿t há»£p cá»§a char_filter, tokenizer vÃ  má»™t sá»‘ bá»™ lá»c token.</li>
</ul>
</li>
</ul>
<h3>Cáº¥u hÃ¬nh Ä‘á»™ng chá»‰ má»¥c</h3>
<ul>
<li><strong><em><code>index.number_of_replicas</code></em></strong>: Sá»‘ lÆ°á»£ng báº£n sao cá»§a máº£nh chÃ­nh cá»§a chá»‰ má»¥c, giÃ¡ trá»‹ máº·c Ä‘á»‹nh lÃ  <strong><em><code>1</code></em></strong>, giÃ¡ trá»‹ nÃ y pháº£i lá»›n hÆ¡n hoáº·c báº±ng 0, cáº¥u hÃ¬nh nÃ y cÃ³ thá»ƒ thay Ä‘á»•i báº¥t cá»© lÃºc nÃ o.</li>
<li><strong><em><code>index.refresh_interval</code></em></strong>: Táº§n suáº¥t thá»±c hiá»‡n thao tÃ¡c lÃ m má»›i dá»¯ liá»‡u chá»‰ má»¥c má»›i, thao tÃ¡c nÃ y lÃ m cho nhá»¯ng thay Ä‘á»•i gáº§n nháº¥t Ä‘á»‘i vá»›i chá»‰ má»¥c cÃ³ thá»ƒ nhÃ¬n tháº¥y khi tÃ¬m kiáº¿m, máº·c Ä‘á»‹nh lÃ  <strong><em><code>1s</code></em></strong>. Báº¡n cÅ©ng cÃ³ thá»ƒ Ä‘áº·t lÃ  <strong><em><code>-1</code></em></strong> Ä‘á»ƒ vÃ´ hiá»‡u hÃ³a viá»‡c lÃ m má»›i. ThÃ´ng tin chi tiáº¿t hÆ¡n xem táº¡i <a href="https://www.knowledgedict.com/tutorial/elasticsearch-refresh_interval-settings.html" target="_blank" rel="noopener noreferrer">Elasticsearch chá»‰nh sá»­a Ä‘á»™ng refresh_interval cÃ i Ä‘áº·t khoáº£ng thá»i gian lÃ m má»›i</a>.</li>
</ul>
<h2>Giáº£i thÃ­ch Mapping</h2>
<p>Trong Elasticsearch, <strong><code>Mapping</code></strong> (Ã¡nh xáº¡) Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘á»‹nh rÃµ cÃ¡ch má»™t tÃ i liá»‡u vÃ  cÃ¡c trÆ°á»ng mÃ  nÃ³ chá»©a Ä‘Æ°á»£c lÆ°u trá»¯ vÃ  láº­p chá»‰ má»¥c. Báº¡n cÃ³ thá»ƒ Ä‘á»‹nh trÆ°á»›c loáº¡i dá»¯ liá»‡u cá»§a cÃ¡c trÆ°á»ng, trá»ng sá»‘ cá»§a cÃ¡c trÆ°á»ng, bá»™ phÃ¢n tÃ­ch, vÃ  cÃ¡c thuá»™c tÃ­nh khÃ¡c trong Ã¡nh xáº¡, giá»‘ng nhÆ° viá»‡c thiáº¿t láº­p loáº¡i dá»¯ liá»‡u cho cÃ¡c trÆ°á»ng khi táº¡o báº£ng trong cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡.</p>
<p>Mapping sáº½ Ã¡nh xáº¡ tÃ i liá»‡u json thÃ nh Ä‘á»‹nh dáº¡ng pháº³ng mÃ  Lucene cáº§n.</p>
<p>Má»™t Mapping thuá»™c vá» má»™t Type cá»§a chá»‰ má»¥c</p>
<ul>
<li>Má»—i tÃ i liá»‡u Ä‘á»u thuá»™c vá» má»™t Type</li>
<li>Má»™t Type cÃ³ má»™t Ä‘á»‹nh nghÄ©a Mapping</li>
<li>Tá»« phiÃªn báº£n 7.0 trá»Ÿ Ä‘i, khÃ´ng cáº§n pháº£i chá»‰ Ä‘á»‹nh thÃ´ng tin type trong Ä‘á»‹nh nghÄ©a Mapping</li>
</ul>
<h3>PhÃ¢n loáº¡i Ã¡nh xáº¡</h3>
<p>Trong Elasticsearch, Ã¡nh xáº¡ cÃ³ thá»ƒ Ä‘Æ°á»£c chia thÃ nh Ã¡nh xáº¡ tÄ©nh vÃ  Ã¡nh xáº¡ Ä‘á»™ng. Trong cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡, trÆ°á»›c khi ghi dá»¯ liá»‡u, báº¡n cáº§n táº¡o báº£ng trÆ°á»›c, trong cÃ¢u lá»‡nh táº¡o báº£ng, báº¡n sáº½ khai bÃ¡o thuá»™c tÃ­nh cá»§a cÃ¡c trÆ°á»ng. Tuy nhiÃªn, trong Elasticsearch, báº¡n khÃ´ng cáº§n pháº£i lÃ m nhÆ° váº­y. Má»™t trong nhá»¯ng tÃ­nh nÄƒng quan trá»ng nháº¥t cá»§a Elasticsearch lÃ  cho phÃ©p báº¡n khÃ¡m phÃ¡ dá»¯ liá»‡u cÃ ng nhanh cÃ ng tá»‘t. Khi tÃ i liá»‡u Ä‘Æ°á»£c ghi vÃ o Elasticsearch, nÃ³ sáº½ tá»± Ä‘á»™ng nháº­n biáº¿t loáº¡i cá»§a cÃ¡c trÆ°á»ng. CÆ¡ cháº¿ nÃ y Ä‘Æ°á»£c gá»i lÃ  <strong>Ã¡nh xáº¡ Ä‘á»™ng</strong>, trong khi <strong>Ã¡nh xáº¡ tÄ©nh</strong> lÃ  viá»‡c thiáº¿t láº­p thuá»™c tÃ­nh cá»§a cÃ¡c trÆ°á»ng trÆ°á»›c khi ghi dá»¯ liá»‡u.</p>
<h4>Ãnh xáº¡ tÄ©nh</h4>
<p><strong>Ãnh xáº¡ tÄ©nh</strong> lÃ  viá»‡c chá»‰ Ä‘á»‹nh Ã¡nh xáº¡ chá»‰ má»¥c theo cÃ¡ch thá»§ cÃ´ng khi táº¡o chá»‰ má»¥c. Ãnh xáº¡ tÄ©nh tÆ°Æ¡ng tá»± nhÆ° viá»‡c chá»‰ Ä‘á»‹nh thuá»™c tÃ­nh trÆ°á»ng trong cÃ¢u lá»‡nh táº¡o báº£ng trong SQL. So vá»›i Ã¡nh xáº¡ Ä‘á»™ng, thÃ´ng qua Ã¡nh xáº¡ tÄ©nh, báº¡n cÃ³ thá»ƒ thÃªm cÃ¡c thÃ´ng tin cáº¥u hÃ¬nh chi tiáº¿t vÃ  chÃ­nh xÃ¡c hÆ¡n.</p>
<p>CÃ¡ch Ä‘á»‹nh nghÄ©a má»™t Mapping</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> /books</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "mappings"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "type_one"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> ...</span><span style="color:#98C379;--shiki-dark:#98C379"> any</span><span style="color:#98C379;--shiki-dark:#98C379"> mappings</span><span style="color:#98C379;--shiki-dark:#98C379"> ...</span><span style="color:#98C379;--shiki-dark:#98C379"> },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "type_two"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> ...</span><span style="color:#98C379;--shiki-dark:#98C379"> any</span><span style="color:#98C379;--shiki-dark:#98C379"> mappings</span><span style="color:#98C379;--shiki-dark:#98C379"> ...</span><span style="color:#98C379;--shiki-dark:#98C379"> },</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">        ...</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>Ãnh xáº¡ Ä‘á»™ng</h4>
<p><strong>Ãnh xáº¡ Ä‘á»™ng</strong> lÃ  má»™t cÃ¡ch thoáº£i mÃ¡i, cho phÃ©p báº¡n táº¡o chá»‰ má»¥c vÃ  ghi tÃ i liá»‡u mÃ  khÃ´ng cáº§n thiáº¿t láº­p loáº¡i trÆ°á»ng khi táº¡o chá»‰ má»¥c. Loáº¡i cá»§a cÃ¡c trÆ°á»ng trong tÃ i liá»‡u sáº½ Ä‘Æ°á»£c Elasticsearch <strong>tá»± Ä‘á»™ng nháº­n biáº¿t</strong>. Trong dá»± Ã¡n thá»±c táº¿, náº¿u báº¡n khÃ´ng cháº¯c cháº¯n vá» cÃ¡c trÆ°á»ng sáº½ cÃ³ trong dá»¯ liá»‡u trÆ°á»›c khi nháº­p, hoáº·c báº¡n khÃ´ng rÃµ vá» loáº¡i dá»¯ liá»‡u cá»§a cÃ¡c trÆ°á»ng, viá»‡c sá»­ dá»¥ng Ã¡nh xáº¡ Ä‘á»™ng sáº½ ráº¥t phÃ¹ há»£p. Khi Elasticsearch gáº·p má»™t trÆ°á»ng mÃ  nÃ³ chÆ°a tá»«ng tháº¥y trÆ°á»›c Ä‘Ã³ trong tÃ i liá»‡u, nÃ³ sáº½ sá»­ dá»¥ng Ã¡nh xáº¡ Ä‘á»™ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh loáº¡i cá»§a trÆ°á»ng Ä‘Ã³ vÃ  tá»± Ä‘á»™ng thÃªm trÆ°á»ng Ä‘Ã³ vÃ o Ã¡nh xáº¡, dá»±a vÃ o giÃ¡ trá»‹ cá»§a trÆ°á»ng Ä‘á»ƒ tá»± Ä‘á»™ng dá»± Ä‘oÃ¡n loáº¡i trÆ°á»ng theo báº£ng sau:</p>
<p>| Dá»¯ liá»‡u Ä‘á»‹nh dáº¡ng JSON | Loáº¡i trÆ°á»ng Ä‘Æ°á»£c dá»± Ä‘oÃ¡n tá»± Ä‘á»™ng                                                       |<br>
| :</p>
]]></content:encoded>
    </item>
    <item>
      <title>Elasticsearch Highlight Search and Display</title>
      <link>https://vanhung4499.github.io/database/elasticsearch/highlight-search-display.html</link>
      <guid>https://vanhung4499.github.io/database/elasticsearch/highlight-search-display.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elasticsearch Highlight Search and Display</source>
      <description>TÃ¬m kiáº¿m vÃ  hiá»ƒn thá»‹ ná»•i báº­t trong Elasticsearch Chá»©c nÄƒng tÃ¬m kiáº¿m ná»•i báº­t (highlight) cá»§a Elasticsearch cho phÃ©p báº¡n láº¥y Ä‘oáº¡n tÃ³m táº¯t ná»•i báº­t tá»« má»™t hoáº·c nhiá»u trÆ°á»ng trong káº¿...</description>
      <category>elasticssearch</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Chá»©c nÄƒng tÃ¬m kiáº¿m ná»•i báº­t (highlight) cá»§a Elasticsearch cho phÃ©p báº¡n láº¥y Ä‘oáº¡n tÃ³m táº¯t ná»•i báº­t tá»« má»™t hoáº·c nhiá»u trÆ°á»ng trong káº¿t quáº£ tÃ¬m kiáº¿m, Ä‘á»ƒ hiá»ƒn thá»‹ vá»‹ trÃ­ phÃ¹ há»£p vá»›i truy váº¥n cá»§a ngÆ°á»i dÃ¹ng. Khi báº¡n yÃªu cáº§u tÃ¬m kiáº¿m ná»•i báº­t, trÆ°á»ng highlight trong káº¿t quáº£ tráº£ vá» sáº½ bao gá»“m cÃ¡c trÆ°á»ng ná»•i báº­t vÃ  cÃ¡c Ä‘oáº¡n ná»•i báº­t. Elasticsearch máº·c Ä‘á»‹nh sáº½ Ä‘Ã¡nh dáº¥u tá»« khÃ³a báº±ng tháº» <code>&lt;em&gt;&lt;/em&gt;</code>.</p>
<h2>Tham sá»‘ tÃ¬m kiáº¿m ná»•i báº­t</h2>
<p>ES cung cáº¥p cÃ¡c tham sá»‘ tÃ¬m kiáº¿m ná»•i báº­t sau Ä‘Ã¢y:</p>
<p>| Tham sá»‘                   | MÃ´ táº£                                                                                                                                                                                                                                                                                                                                                                                                             |<br>
| :</p>
]]></content:encoded>
    </item>
    <item>
      <title>Elasticsearch Interview</title>
      <link>https://vanhung4499.github.io/database/elasticsearch/interview.html</link>
      <guid>https://vanhung4499.github.io/database/elasticsearch/interview.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elasticsearch Interview</source>
      <description>TÃ³m táº¯t phá»ng váº¥n Elasticsearch Triá»ƒn khai cá»¥m Cáº¥u hÃ¬nh triá»ƒn khai ES: 5 nÃºt (cáº¥u hÃ¬nh: 8 nhÃ¢n 64 G 1T), tá»•ng cá»™ng 320 G, 5 T. Khoáº£ng 10+ chá»‰ má»¥c, 5 phÃ¢n Ä‘oáº¡n, lÆ°á»£ng dá»¯ liá»‡u má»›i...</description>
      <category>elasticssearch</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Triá»ƒn khai cá»¥m</h2>
<p>Cáº¥u hÃ¬nh triá»ƒn khai ES:</p>
<p>5 nÃºt (cáº¥u hÃ¬nh: 8 nhÃ¢n 64 G 1T), tá»•ng cá»™ng 320 G, 5 T.</p>
<p>Khoáº£ng 10+ chá»‰ má»¥c, 5 phÃ¢n Ä‘oáº¡n, lÆ°á»£ng dá»¯ liá»‡u má»›i hÃ ng ngÃ y lÃ  khoáº£ng 2G, 40 triá»‡u báº£n ghi. Báº£n ghi Ä‘Æ°á»£c lÆ°u trá»¯ trong 30 ngÃ y.</p>
<h2>Tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t</h2>
<h3>filesystem cache</h3>
<p>Dá»¯ liá»‡u báº¡n ghi vÃ o es, thá»±c táº¿ Ä‘Ã£ Ä‘Æ°á»£c ghi vÃ o tá»‡p trÃªn Ä‘Ä©a,&nbsp;<strong>khi truy váº¥n</strong>, há»‡ Ä‘iá»u hÃ nh sáº½ tá»± Ä‘á»™ng lÆ°u trá»¯ dá»¯ liá»‡u tá»« tá»‡p trÃªn Ä‘Ä©a vÃ o&nbsp;<code>filesystem cache</code>.</p>
<p><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240223081955.png" alt="image.png" loading="lazy"><br>
CÆ¡ cháº¿ tÃ¬m kiáº¿m cá»§a es phá»¥ thuá»™c náº·ng ná» vÃ o&nbsp;<code>filesystem cache</code>&nbsp;cÆ¡ sá»Ÿ. Náº¿u báº¡n cung cáº¥p thÃªm bá»™ nhá»› cho&nbsp;<code>filesystem cache</code>, cá»‘ gáº¯ng Ä‘á»ƒ bá»™ nhá»› cÃ³ thá»ƒ chá»©a táº¥t cáº£ cÃ¡c tá»‡p dá»¯ liá»‡u chá»‰ má»¥c&nbsp;<code>idx segment file</code>, thÃ¬ khi báº¡n tÃ¬m kiáº¿m, háº§u nhÆ° táº¥t cáº£ cÃ¡c hoáº¡t Ä‘á»™ng Ä‘á»u Ä‘i qua bá»™ nhá»›, hiá»‡u suáº¥t sáº½ ráº¥t cao.</p>
<p>Hiá»‡u suáº¥t cÃ³ thá»ƒ chÃªnh lá»‡ch Ä‘áº¿n má»©c Ä‘á»™ nÃ o? Trong nhiá»u thá»­ nghiá»‡m vÃ  kiá»ƒm tra Ã¡p lá»±c cá»§a chÃºng tÃ´i trÆ°á»›c Ä‘Ã¢y, náº¿u Ä‘i qua Ä‘Ä©a, thÃ¬ thá»i gian tÃ¬m kiáº¿m cháº¯c cháº¯n lÃ  á»Ÿ má»©c giÃ¢y, tá»« 1 giÃ¢y, 5 giÃ¢y Ä‘áº¿n 10 giÃ¢y. NhÆ°ng náº¿u Ä‘i qua&nbsp;<code>filesystem cache</code>, nghÄ©a lÃ  Ä‘i qua bá»™ nhá»› thuáº§n tÃºy, thÃ¬ hiá»‡u suáº¥t thÆ°á»ng cao hÆ¡n má»™t báº­c so vá»›i viá»‡c Ä‘i qua Ä‘Ä©a, cÆ¡ báº£n lÃ  á»Ÿ má»©c mili giÃ¢y, tá»« vÃ i mili giÃ¢y Ä‘áº¿n vÃ i trÄƒm mili giÃ¢y.</p>
<p>á» Ä‘Ã¢y cÃ³ má»™t vÃ­ dá»¥ thá»±c táº¿. Má»™t cÃ´ng ty cÃ³ 3 mÃ¡y chá»§ es, má»—i mÃ¡y chá»§ cÃ³ váº» nhÆ° cÃ³ nhiá»u bá»™ nhá»›, 64G, tá»•ng bá»™ nhá»› lÃ &nbsp;<code>64 * 3 = 192G</code>. Má»—i mÃ¡y chá»§ cung cáº¥p cho es jvm heap lÃ &nbsp;<code>32G</code>, vÃ¬ váº­y pháº§n cÃ²n láº¡i cho&nbsp;<code>filesystem cache</code>&nbsp;chá»‰ lÃ &nbsp;<code>32G</code>&nbsp;má»—i mÃ¡y, tá»•ng cá»™ng trong cá»¥m, cho&nbsp;<code>filesystem cache</code>&nbsp;chá»‰ lÃ &nbsp;<code>32 * 3 = 96G</code>&nbsp;bá»™ nhá»›. Tuy nhiÃªn, vÃ o thá»i Ä‘iá»ƒm Ä‘Ã³, táº¥t cáº£ cÃ¡c tá»‡p dá»¯ liá»‡u chá»‰ má»¥c trÃªn Ä‘Ä©a, trÃªn 3 mÃ¡y, tá»•ng cá»™ng chiáº¿m&nbsp;<code>1T</code>&nbsp;dung lÆ°á»£ng Ä‘Ä©a, lÆ°á»£ng dá»¯ liá»‡u es lÃ &nbsp;<code>1T</code>, vÃ¬ váº­y lÆ°á»£ng dá»¯ liá»‡u má»—i mÃ¡y lÃ &nbsp;<code>300G</code>. Hiá»‡u suáº¥t tá»‘t khÃ´ng? Bá»™ nhá»›&nbsp;<code>filesystem cache</code>&nbsp;chá»‰ cÃ³ 100G, chá»‰ má»™t pháº§n mÆ°á»i dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘áº·t trong bá»™ nhá»›, pháº§n cÃ²n láº¡i Ä‘á»u á»Ÿ trÃªn Ä‘Ä©a, sau Ä‘Ã³ báº¡n thá»±c hiá»‡n hoáº¡t Ä‘á»™ng tÃ¬m kiáº¿m, háº§u háº¿t cÃ¡c hoáº¡t Ä‘á»™ng Ä‘á»u Ä‘i qua Ä‘Ä©a, hiá»‡u suáº¥t cháº¯c cháº¯n sáº½ kÃ©m.</p>
<p>Vá» cÆ¡ báº£n, náº¿u báº¡n muá»‘n es hoáº¡t Ä‘á»™ng tá»‘t, trÆ°á»ng há»£p tá»‘t nháº¥t lÃ  bá»™ nhá»› mÃ¡y cá»§a báº¡n cÃ³ thá»ƒ chá»©a Ã­t nháº¥t má»™t ná»­a tá»•ng lÆ°á»£ng dá»¯ liá»‡u cá»§a báº¡n.</p>
<p>Dá»±a trÃªn kinh nghiá»‡m thá»±c táº¿ trong mÃ´i trÆ°á»ng product cá»§a chÃºng tÃ´i, trÆ°á»ng há»£p tá»‘t nháº¥t lÃ  chá»‰ lÆ°u trá»¯ má»™t lÆ°á»£ng dá»¯ liá»‡u nhá» trong es, chá»‰ lÃ  nhá»¯ng chá»‰ má»¥c mÃ  báº¡n cáº§n&nbsp;<strong>tÃ¬m kiáº¿m</strong>, náº¿u bá»™ nhá»› dÃ nh cho&nbsp;<code>filesystem cache</code>&nbsp;lÃ  100G, thÃ¬ báº¡n nÃªn kiá»ƒm soÃ¡t lÆ°á»£ng dá»¯ liá»‡u chá»‰ má»¥c dÆ°á»›i&nbsp;<code>100G</code>. Trong trÆ°á»ng há»£p nÃ y, háº§u háº¿t dá»¯ liá»‡u cá»§a báº¡n Ä‘á»u Ä‘i qua bá»™ nhá»› Ä‘á»ƒ tÃ¬m kiáº¿m, hiá»‡u suáº¥t ráº¥t cao, thÆ°á»ng cÃ³ thá»ƒ trong vÃ²ng 1 giÃ¢y.</p>
<p>VÃ­ dá»¥, báº¡n hiá»‡n cÃ³ má»™t hÃ ng dá»¯ liá»‡u.&nbsp;<code>id, name, age â€¦.</code>&nbsp;30 trÆ°á»ng. NhÆ°ng bÃ¢y giá», báº¡n chá»‰ cáº§n tÃ¬m kiáº¿m dá»±a trÃªn ba trÆ°á»ng&nbsp;<code>id, name, age</code>. Náº¿u báº¡n ngÃ¢y thÆ¡ ghi táº¥t cáº£ cÃ¡c trÆ°á»ng cá»§a má»™t hÃ ng dá»¯ liá»‡u vÃ o es, Ä‘iá»u nÃ y sáº½ dáº«n Ä‘áº¿n viá»‡c&nbsp;<code>90%</code>&nbsp;dá»¯ liá»‡u khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ¬m kiáº¿m, nhÆ°ng váº«n chiáº¿m khÃ´ng gian&nbsp;<code>filesystem cache</code>&nbsp;trÃªn mÃ¡y chá»§ es, dá»¯ liá»‡u má»—i hÃ ng cÃ ng lá»›n,&nbsp;<code>filesystem cache</code>&nbsp;cÃ³ thá»ƒ lÆ°u trá»¯ cÃ ng Ã­t dá»¯ liá»‡u. Thá»±c táº¿, chá»‰ cáº§n ghi vÃ o es&nbsp;<strong>má»™t sá»‘ trÆ°á»ng Ã­t</strong>&nbsp;cáº§n tÃ¬m kiáº¿m, vÃ­ dá»¥, chá»‰ cáº§n ghi vÃ o es&nbsp;<code>id, name, age</code>&nbsp;ba trÆ°á»ng, sau Ä‘Ã³ báº¡n cÃ³ thá»ƒ lÆ°u trá»¯ dá»¯ liá»‡u trÆ°á»ng khÃ¡c trong mysql/hbase, chÃºng tÃ´i thÆ°á»ng khuyáº¿n nghá»‹ sá»­ dá»¥ng cáº¥u trÃºc&nbsp;<code>es + hbase</code>.</p>
<p>Äáº·c Ä‘iá»ƒm cá»§a hbase lÃ &nbsp;<strong>phÃ¹ há»£p cho viá»‡c lÆ°u trá»¯ dá»¯ liá»‡u trá»±c tuyáº¿n lá»›n</strong>, tá»©c lÃ  hbase cÃ³ thá»ƒ ghi vÃ o dá»¯ liá»‡u lá»›n, nhÆ°ng khÃ´ng nÃªn thá»±c hiá»‡n tÃ¬m kiáº¿m phá»©c táº¡p, chá»‰ cáº§n thá»±c hiá»‡n má»™t sá»‘ hoáº¡t Ä‘á»™ng Ä‘Æ¡n giáº£n dá»±a trÃªn id hoáº·c pháº¡m vi. TÃ¬m kiáº¿m tá»« es dá»±a trÃªn tÃªn vÃ  tuá»•i, káº¿t quáº£ cÃ³ thá»ƒ chá»‰ lÃ  20&nbsp;<code>doc id</code>, sau Ä‘Ã³ tÃ¬m kiáº¿m&nbsp;<strong>dá»¯ liá»‡u Ä‘áº§y Ä‘á»§</strong>&nbsp;tÆ°Æ¡ng á»©ng vá»›i má»—i&nbsp;<code>doc id</code>&nbsp;tá»« hbase, Ä‘Æ°a ra, sau Ä‘Ã³ tráº£ vá» cho phÃ­a trÆ°á»›c.</p>
<p>Dá»¯ liá»‡u ghi vÃ o es nÃªn nhá» hÆ¡n hoáº·c báº±ng, hoáº·c hÆ¡i lá»›n hÆ¡n dung lÆ°á»£ng bá»™ nhá»› cá»§a filesystem cache cá»§a es. Sau Ä‘Ã³, báº¡n cÃ³ thá»ƒ máº¥t 20ms Ä‘á»ƒ tÃ¬m kiáº¿m tá»« es, sau Ä‘Ã³ tÃ¬m kiáº¿m tá»« hbase dá»±a trÃªn id Ä‘Æ°á»£c tráº£ vá» tá»« es, tÃ¬m kiáº¿m 20 báº£n ghi, cÃ³ thá»ƒ máº¥t thÃªm 30ms, cÃ³ thá»ƒ báº¡n Ä‘Ã£ chÆ¡i nhÆ° váº­y trÆ°á»›c Ä‘Ã¢y, 1T dá»¯ liá»‡u Ä‘á»u Ä‘áº·t trong es, má»—i truy váº¥n Ä‘á»u máº¥t 5~10s, bÃ¢y giá» cÃ³ thá»ƒ hiá»‡u suáº¥t sáº½ cao hÆ¡n, má»—i truy váº¥n chá»‰ máº¥t 50ms.</p>
<h3>Dá»¯ liá»‡u khá»Ÿi Ä‘á»™ng</h3>
<p>Giáº£ sá»­, ngay cáº£ khi báº¡n lÃ m theo phÆ°Æ¡ng Ã¡n Ä‘Ã£ nÃªu á»Ÿ trÃªn, lÆ°á»£ng dá»¯ liá»‡u Ä‘Æ°á»£c ghi vÃ o má»—i mÃ¡y trong cá»¥m es váº«n vÆ°á»£t quÃ¡ gáº¥p Ä‘Ã´i&nbsp;<code>filesystem cache</code>, vÃ­ dá»¥, báº¡n ghi 60G dá»¯ liá»‡u vÃ o má»™t mÃ¡y, nhÆ°ng&nbsp;<code>filesystem cache</code>&nbsp;chá»‰ cÃ³ 30G, váº«n cÃ²n 30G dá»¯ liá»‡u á»Ÿ trÃªn Ä‘Ä©a.</p>
<p>Thá»±c táº¿, báº¡n cÃ³ thá»ƒ thá»±c hiá»‡n&nbsp;<strong>khá»Ÿi Ä‘á»™ng dá»¯ liá»‡u</strong>.</p>
<p>VÃ­ dá»¥, náº¿u báº¡n nÃ³i vá» Weibo, báº¡n cÃ³ thá»ƒ láº¥y má»™t sá»‘ dá»¯ liá»‡u tá»« cÃ¡c ngÆ°á»i dÃ¹ng VIP, nhá»¯ng ngÆ°á»i thÆ°á»ng xuyÃªn Ä‘Æ°á»£c xem nhiá»u, báº¡n tá»± táº¡o má»™t há»‡ thá»‘ng phÃ­a sau, sau má»—i má»™t thá»i gian, há»‡ thá»‘ng phÃ­a sau cá»§a báº¡n sáº½ tÃ¬m kiáº¿m dá»¯ liá»‡u nÃ³ng, vÃ  Ä‘áº©y vÃ o&nbsp;<code>filesystem cache</code>, sau Ä‘Ã³, khi ngÆ°á»i dÃ¹ng thá»±c sá»± Ä‘áº¿n xem dá»¯ liá»‡u nÃ³ng nÃ y, há» sáº½ trá»±c tiáº¿p tÃ¬m kiáº¿m tá»« bá»™ nhá»›, ráº¥t nhanh.</p>
<p>Hoáº·c lÃ  thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­, báº¡n cÃ³ thá»ƒ láº¥y má»™t sá»‘ sáº£n pháº©m Ä‘Æ°á»£c xem nhiá»u nháº¥t thÆ°á»ng xuyÃªn, cháº³ng háº¡n nhÆ° iPhone 15, dá»¯ liá»‡u nÃ³ng Ä‘Æ°á»£c táº¡o trÆ°á»›c báº±ng má»™t chÆ°Æ¡ng trÃ¬nh phÃ­a sau, sau má»—i phÃºt, báº¡n tá»± Ä‘á»™ng truy cáº­p má»™t láº§n, vÃ  Ä‘áº©y vÃ o&nbsp;<code>filesystem cache</code>.</p>
<p>Äá»‘i vá»›i nhá»¯ng dá»¯ liá»‡u mÃ  báº¡n cho lÃ  nÃ³ng, vÃ  thÆ°á»ng xuyÃªn cÃ³ ngÆ°á»i truy cáº­p, nÃªn&nbsp;<strong>táº¡o má»™t há»‡ thá»‘ng khá»Ÿi Ä‘á»™ng bá»™ Ä‘á»‡m chuyÃªn dá»¥ng</strong>, tá»©c lÃ , sau má»—i má»™t khoáº£ng thá»i gian, truy cáº­p trÆ°á»›c vÃ o dá»¯ liá»‡u nÃ³ng, Ä‘á»ƒ dá»¯ liá»‡u vÃ o&nbsp;<code>filesystem cache</code>. NhÆ° váº­y, khi ngÆ°á»i khÃ¡c truy cáº­p láº§n sau, hiá»‡u suáº¥t cháº¯c cháº¯n sáº½ tá»‘t hÆ¡n nhiá»u.</p>
<h3>PhÃ¢n tÃ¡ch nÃ³ng vÃ  láº¡nh</h3>
<p>es cÃ³ thá»ƒ thá»±c hiá»‡n viá»‡c phÃ¢n tÃ¡ch ngang tÆ°Æ¡ng tá»± nhÆ° mysql, tá»©c lÃ , Ä‘áº·t má»™t lÆ°á»£ng lá»›n dá»¯ liá»‡u Ã­t Ä‘Æ°á»£c truy cáº­p, táº§n suáº¥t tháº¥p vÃ o má»™t chá»‰ má»¥c riÃªng biá»‡t, sau Ä‘Ã³ Ä‘áº·t dá»¯ liá»‡u nÃ³ng Ä‘Æ°á»£c truy cáº­p thÆ°á»ng xuyÃªn vÃ o má»™t chá»‰ má»¥c riÃªng biá»‡t. Tá»‘t nháº¥t lÃ  Ä‘áº·t&nbsp;<strong>dá»¯ liá»‡u láº¡nh vÃ o má»™t chá»‰ má»¥c, sau Ä‘Ã³ Ä‘áº·t dá»¯ liá»‡u nÃ³ng vÃ o má»™t chá»‰ má»¥c khÃ¡c</strong>, Ä‘iá»u nÃ y cÃ³ thá»ƒ Ä‘áº£m báº£o ráº±ng sau khi dá»¯ liá»‡u nÃ³ng Ä‘Æ°á»£c khá»Ÿi Ä‘á»™ng, hÃ£y Ä‘á»ƒ chÃºng á»Ÿ trong&nbsp;<code>filesystem os cache</code>&nbsp;cÃ ng nhiá»u cÃ ng tá»‘t,&nbsp;<strong>Ä‘á»«ng Ä‘á»ƒ dá»¯ liá»‡u láº¡nh xÃ³a bá» chÃºng</strong>.</p>
<p>Báº¡n xem, giáº£ sá»­ báº¡n cÃ³ 6 mÃ¡y, 2 chá»‰ má»¥c, má»™t cho dá»¯ liá»‡u láº¡nh, má»™t cho dá»¯ liá»‡u nÃ³ng, má»—i chá»‰ má»¥c cÃ³ 3 shard. 3 mÃ¡y Ä‘áº·t chá»‰ má»¥c dá»¯ liá»‡u nÃ³ng, 3 mÃ¡y khÃ¡c Ä‘áº·t chá»‰ má»¥c dá»¯ liá»‡u láº¡nh. Sau Ä‘Ã³, báº¡n sáº½ dÃ nh nhiá»u thá»i gian truy cáº­p vÃ o chá»‰ má»¥c dá»¯ liá»‡u nÃ³ng, dá»¯ liá»‡u nÃ³ng cÃ³ thá»ƒ chiáº¿m 10% tá»•ng lÆ°á»£ng dá»¯ liá»‡u, lÃºc nÃ y lÆ°á»£ng dá»¯ liá»‡u ráº¥t nhá», gáº§n nhÆ° táº¥t cáº£ Ä‘á»u Ä‘Æ°á»£c giá»¯ trong&nbsp;<code>filesystem cache</code>, Ä‘iá»u nÃ y cÃ³ thá»ƒ Ä‘áº£m báº£o ráº±ng hiá»‡u suáº¥t truy cáº­p dá»¯ liá»‡u nÃ³ng ráº¥t cao. NhÆ°ng Ä‘á»‘i vá»›i dá»¯ liá»‡u láº¡nh, nÃ³ náº±m trong má»™t chá»‰ má»¥c khÃ¡c, khÃ´ng á»Ÿ cÃ¹ng mÃ¡y vá»›i chá»‰ má»¥c dá»¯ liá»‡u nÃ³ng, khÃ´ng cÃ³ liÃªn há»‡ gÃ¬ vá»›i nhau. Náº¿u cÃ³ ngÆ°á»i truy cáº­p dá»¯ liá»‡u láº¡nh, cÃ³ thá»ƒ nhiá»u dá»¯ liá»‡u Ä‘ang á»Ÿ trÃªn Ä‘Ä©a, lÃºc nÃ y hiá»‡u suáº¥t sáº½ kÃ©m má»™t chÃºt, chá»‰ cÃ³ 10% ngÆ°á»i truy cáº­p dá»¯ liá»‡u láº¡nh, 90% ngÆ°á»i Ä‘ang truy cáº­p dá»¯ liá»‡u nÃ³ng, khÃ´ng sao cáº£.</p>
<h3>Thiáº¿t káº¿ mÃ´ hÃ¬nh document</h3>
<p>Äá»‘i vá»›i MySQL, chÃºng ta thÆ°á»ng xuyÃªn cÃ³ má»™t sá»‘ truy váº¥n liÃªn káº¿t phá»©c táº¡p. Trong es, chÃºng ta nÃªn xá»­ lÃ½ nhÆ° tháº¿ nÃ o, truy váº¥n liÃªn káº¿t phá»©c táº¡p trong es nÃªn trÃ¡nh sá»­ dá»¥ng cÃ ng nhiá»u cÃ ng tá»‘t, má»™t khi sá»­ dá»¥ng, hiá»‡u suáº¥t thÆ°á»ng khÃ´ng tá»‘t.</p>
<p>Tá»‘t nháº¥t lÃ  hoÃ n thÃ nh liÃªn káº¿t trÆ°á»›c trong há»‡ thá»‘ng Java, vÃ  ghi dá»¯ liá»‡u Ä‘Ã£ liÃªn káº¿t trá»±c tiáº¿p vÃ o es. Khi tÃ¬m kiáº¿m, khÃ´ng cáº§n sá»­ dá»¥ng cÃº phÃ¡p tÃ¬m kiáº¿m cá»§a es Ä‘á»ƒ hoÃ n thÃ nh truy váº¥n liÃªn káº¿t nhÆ° join.</p>
<p>Thiáº¿t káº¿ mÃ´ hÃ¬nh document ráº¥t quan trá»ng, nhiá»u hoáº¡t Ä‘á»™ng, khÃ´ng nÃªn chá» Ä‘áº¿n khi tÃ¬m kiáº¿m má»›i thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng phá»©c táº¡p khÃ¡c nhau. es há»— trá»£ ráº¥t nhiá»u hoáº¡t Ä‘á»™ng, khÃ´ng nÃªn cá»‘ gáº¯ng sá»­ dá»¥ng es Ä‘á»ƒ thá»±c hiá»‡n má»™t sá»‘ thao tÃ¡c mÃ  nÃ³ khÃ´ng lÃ m tá»‘t. Náº¿u thá»±c sá»± cÃ³ thao tÃ¡c nhÆ° váº­y, hÃ£y cá»‘ gáº¯ng hoÃ n thÃ nh nÃ³ khi thiáº¿t káº¿ mÃ´ hÃ¬nh document, khi ghi dá»¯ liá»‡u. NgoÃ i ra, Ä‘á»‘i vá»›i má»™t sá»‘ hoáº¡t Ä‘á»™ng quÃ¡ phá»©c táº¡p, nhÆ° join/nested/parent-child tÃ¬m kiáº¿m nÃªn trÃ¡nh cÃ ng nhiá»u cÃ ng tá»‘t, hiá»‡u suáº¥t Ä‘á»u ráº¥t kÃ©m.</p>
<h3>Tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t phÃ¢n trang</h3>
<p>PhÃ¢n trang cá»§a es khÃ¡ khÃ³ khÄƒn, táº¡i sao? VÃ­ dá»¥, giáº£ sá»­ báº¡n cÃ³ 10 báº£n ghi trÃªn má»—i trang, vÃ  báº¡n muá»‘n truy váº¥n trang thá»© 100, thá»±c táº¿, nÃ³ sáº½ láº¥y 1000 báº£n ghi Ä‘áº§u tiÃªn Ä‘Æ°á»£c lÆ°u trá»¯ trÃªn má»—i shard vÃ  Ä‘Æ°a chÃºng vÃ o má»™t nÃºt Ä‘iá»u phá»‘i, náº¿u báº¡n cÃ³ 5 shard, thÃ¬ sáº½ cÃ³ 5000 báº£n ghi, sau Ä‘Ã³ nÃºt Ä‘iá»u phá»‘i sáº½ xá»­ lÃ½ vÃ  há»£p nháº¥t 5000 báº£n ghi nÃ y, sau Ä‘Ã³ láº¥y 10 báº£n ghi cuá»‘i cÃ¹ng trÃªn trang thá»© 100.</p>
<p>PhÃ¢n tÃ¡n, báº¡n muá»‘n xem 10 báº£n ghi trÃªn trang thá»© 100, khÃ´ng thá»ƒ nÃ³i ráº±ng tá»« 5 shard, má»—i shard chá»‰ xem 2 báº£n ghi, cuá»‘i cÃ¹ng há»£p nháº¥t thÃ nh 10 báº£n ghi táº¡i nÃºt Ä‘iá»u phá»‘i, pháº£i khÃ´ng? Báº¡n&nbsp;<strong>pháº£i</strong>&nbsp;láº¥y 1000 báº£n ghi tá»« má»—i shard, sau Ä‘Ã³ sáº¯p xáº¿p, lá»c, v.v., dá»±a trÃªn yÃªu cáº§u cá»§a báº¡n, sau Ä‘Ã³ phÃ¢n trang má»™t láº§n ná»¯a, láº¥y dá»¯ liá»‡u trÃªn trang thá»© 100. Khi báº¡n láº­t trang, cÃ ng sÃ¢u, má»—i shard tráº£ vá» cÃ ng nhiá»u dá»¯ liá»‡u, vÃ  thá»i gian xá»­ lÃ½ cá»§a nÃºt Ä‘iá»u phá»‘i cÃ ng lÃ¢u, ráº¥t khÃ³ chá»‹u. VÃ¬ váº­y, khi sá»­ dá»¥ng es Ä‘á»ƒ phÃ¢n trang, báº¡n sáº½ tháº¥y ráº±ng cÃ ng láº­t Ä‘áº¿n sau, cÃ ng cháº­m.</p>
<p>ChÃºng tÃ´i cÅ©ng Ä‘Ã£ gáº·p váº¥n Ä‘á» nÃ y trÆ°á»›c Ä‘Ã¢y, sá»­ dá»¥ng es Ä‘á»ƒ phÃ¢n trang, má»™t sá»‘ trang Ä‘áº§u tiÃªn chá»‰ máº¥t vÃ i chá»¥c mili giÃ¢y, khi láº­t Ä‘áº¿n trang thá»© 10 hoáº·c vÃ i chá»¥c trang, cÆ¡ báº£n máº¥t 5~10 giÃ¢y má»›i cÃ³ thá»ƒ láº¥y má»™t trang dá»¯ liá»‡u.</p>
<p>CÃ³ giáº£i phÃ¡p nÃ o khÃ´ng?</p>
<h4>KhÃ´ng cho phÃ©p phÃ¢n trang sÃ¢u (máº·c Ä‘á»‹nh hiá»‡u suáº¥t phÃ¢n trang sÃ¢u ráº¥t kÃ©m)</h4>
<p>NÃ³i vá»›i quáº£n lÃ½ sáº£n pháº©m ráº±ng, há»‡ thá»‘ng cá»§a báº¡n khÃ´ng cho phÃ©p láº­t trang quÃ¡ sÃ¢u, máº·c Ä‘á»‹nh lÃ  cÃ ng láº­t sÃ¢u, hiá»‡u suáº¥t cÃ ng kÃ©m.</p>
<h4>TÆ°Æ¡ng tá»± nhÆ° viá»‡c kÃ©o xuá»‘ng Ä‘á»ƒ hiá»ƒn thá»‹ thÃªm sáº£n pháº©m Ä‘Æ°á»£c Ä‘á» xuáº¥t trong á»©ng dá»¥ng</h4>
<p>TÆ°Æ¡ng tá»± nhÆ° trong Weibo, kÃ©o xuá»‘ng Ä‘á»ƒ lÃ m má»›i Weibo, hiá»ƒn thá»‹ tá»«ng trang, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng <code>scroll api</code>. Äá»‘i vá»›i cÃ¡ch sá»­ dá»¥ng, hÃ£y tá»± tÃ¬m kiáº¿m trÃªn internet.</p>
<p>Scroll sáº½ táº¡o ra má»™t <strong>báº£n chá»¥p toÃ n bá»™ dá»¯ liá»‡u</strong> cho báº¡n má»™t láº§n, sau Ä‘Ã³ má»—i láº§n kÃ©o xuá»‘ng Ä‘á»ƒ láº­t trang tiáº¿p theo sáº½ thÃ´ng qua viá»‡c di chuyá»ƒn <strong>con trá»</strong> <code>scroll_id</code>, nháº­n trang tiáº¿p theo nhÆ° váº­y, hiá»‡u suáº¥t sáº½ cao hÆ¡n ráº¥t nhiá»u so vá»›i hiá»‡u suáº¥t phÃ¢n trang Ä‘Ã£ nÃ³i á»Ÿ trÃªn, cÆ¡ báº£n lÃ  á»Ÿ má»©c mili giÃ¢y.</p>
<p>Tuy nhiÃªn, Ä‘iá»ƒm duy nháº¥t lÃ , Ä‘iá»u nÃ y phÃ¹ há»£p vá»›i viá»‡c láº­t trang khi kÃ©o xuá»‘ng giá»‘ng nhÆ° Weibo, <strong>khÃ´ng thá»ƒ tÃ¹y Ã½ nháº£y Ä‘áº¿n báº¥t ká»³ trang nÃ o</strong>. NghÄ©a lÃ , báº¡n khÃ´ng thá»ƒ truy cáº­p trang thá»© 10 trÆ°á»›c, sau Ä‘Ã³ Ä‘i Ä‘áº¿n trang thá»© 120, sau Ä‘Ã³ láº¡i quay láº¡i trang thá»© 58, khÃ´ng thá»ƒ nháº£y trang tÃ¹y Ã½. VÃ¬ váº­y, nhiá»u sáº£n pháº©m hiá»‡n nay khÃ´ng cho phÃ©p báº¡n tÃ¹y Ã½ láº­t trang, á»©ng dá»¥ng, cÅ©ng nhÆ° má»™t sá»‘ trang web, chá»‰ cho phÃ©p báº¡n kÃ©o xuá»‘ng, láº­t tá»«ng trang má»™t.</p>
<p>Khi khá»Ÿi táº¡o, báº¡n pháº£i chá»‰ Ä‘á»‹nh tham sá»‘ <code>scroll</code>, thÃ´ng bÃ¡o cho es cáº§n lÆ°u trá»¯ ngá»¯ cáº£nh tÃ¬m kiáº¿m nÃ y trong bao lÃ¢u. Báº¡n cáº§n Ä‘áº£m báº£o ráº±ng ngÆ°á»i dÃ¹ng sáº½ khÃ´ng tiáº¿p tá»¥c láº­t trang trong vÃ i giá», náº¿u khÃ´ng cÃ³ thá»ƒ sáº½ tháº¥t báº¡i do quÃ¡ thá»i gian.</p>
<p>NgoÃ i viá»‡c sá»­ dá»¥ng <code>scroll api</code>, báº¡n cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng <code>search_after</code>. Ã tÆ°á»Ÿng cá»§a <code>search_after</code> lÃ  sá»­ dá»¥ng káº¿t quáº£ cá»§a trang trÆ°á»›c Ä‘á»ƒ giÃºp tÃ¬m kiáº¿m dá»¯ liá»‡u trÃªn trang tiáº¿p theo, rÃµ rÃ ng, cÃ¡ch nÃ y cÅ©ng khÃ´ng cho phÃ©p báº¡n tÃ¹y Ã½ láº­t trang, báº¡n chá»‰ cÃ³ thá»ƒ láº­t tá»«ng trang má»™t. Khi khá»Ÿi táº¡o, báº¡n cáº§n sá»­ dá»¥ng má»™t trÆ°á»ng giÃ¡ trá»‹ duy nháº¥t lÃ m trÆ°á»ng sáº¯p xáº¿p.</p>
<p><strong>1.1. Tá»‘i Æ°u hÃ³a giai Ä‘oáº¡n thiáº¿t káº¿</strong></p>
<p>(1) Dá»±a trÃªn yÃªu cáº§u tÄƒng trÆ°á»Ÿng kinh doanh, táº¡o chá»‰ má»¥c dá»±a trÃªn máº«u ngÃ y, cuá»™n chá»‰ má»¥c qua API roll over;</p>
<p>(2) Sá»­ dá»¥ng bÃ­ danh Ä‘á»ƒ quáº£n lÃ½ chá»‰ má»¥c;</p>
<p>(3) Má»—i ngÃ y vÃ o lÃºc ná»­a Ä‘Ãªm, thá»±c hiá»‡n thao tÃ¡c force_merge trÃªn chá»‰ má»¥c Ä‘á»ƒ giáº£i phÃ³ng khÃ´ng gian;</p>
<p>(4) Sá»­ dá»¥ng cÆ¡ cháº¿ phÃ¢n tÃ¡ch nÃ³ng vÃ  láº¡nh, lÆ°u trá»¯ dá»¯ liá»‡u nÃ³ng vÃ o SSD Ä‘á»ƒ cáº£i thiá»‡n hiá»‡u suáº¥t tÃ¬m kiáº¿m; dá»¯ liá»‡u láº¡nh Ä‘Æ°á»£c thu nhá» Ä‘á»‹nh ká»³ Ä‘á»ƒ giáº£m bá»›t lÆ°u trá»¯;</p>
<p>(5) Sá»­ dá»¥ng curator Ä‘á»ƒ quáº£n lÃ½ vÃ²ng Ä‘á»i chá»‰ má»¥c;</p>
<p>(6) Chá»‰ Ä‘áº·t tokenizer má»™t cÃ¡ch há»£p lÃ½ cho cÃ¡c trÆ°á»ng cáº§n phÃ¢n máº£nh;</p>
<p>(7) Giai Ä‘oáº¡n Mapping káº¿t há»£p Ä‘áº§y Ä‘á»§ cÃ¡c thuá»™c tÃ­nh cá»§a tá»«ng trÆ°á»ng, liá»‡u cÃ³ cáº§n tÃ¬m kiáº¿m, liá»‡u cÃ³ cáº§n lÆ°u trá»¯, v.vâ€¦â€¦.</p>
<p><strong>1.2. Tá»‘i Æ°u hÃ³a viáº¿t</strong></p>
<p>(1) Thiáº¿t láº­p sá»‘ lÆ°á»£ng báº£n sao lÃ  0 trÆ°á»›c khi ghi;</p>
<p>(2) Táº¯t refresh_interval trÆ°á»›c khi ghi, Ä‘áº·t lÃ  -1, vÃ´ hiá»‡u hÃ³a cÆ¡ cháº¿ lÃ m má»›i;</p>
<p>(3) Trong quÃ¡ trÃ¬nh ghi: sá»­ dá»¥ng bulk Ä‘á»ƒ ghi hÃ ng loáº¡t;</p>
<p>(4) Phá»¥c há»“i sá»‘ lÆ°á»£ng báº£n sao vÃ  khoáº£ng thá»i gian lÃ m má»›i sau khi ghi;</p>
<p>(5) Cá»‘ gáº¯ng sá»­ dá»¥ng id tá»± Ä‘á»™ng sinh.</p>
<p>1.3. Tá»‘i Æ°u hÃ³a truy váº¥n</p>
<p>(1) VÃ´ hiá»‡u hÃ³a wildcard;</p>
<p>(2) VÃ´ hiá»‡u hÃ³a terms hÃ ng loáº¡t (trÆ°á»ng há»£p hÃ ng trÄƒm hÃ ng nghÃ¬n);</p>
<p>(3) Táº­n dá»¥ng tá»‘i Ä‘a cÆ¡ cháº¿ chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c, náº¿u cÃ³ thá»ƒ dÃ¹ng loáº¡i keyword thÃ¬ hÃ£y dÃ¹ng keyword;</p>
<p>(4) Khi lÆ°á»£ng dá»¯ liá»‡u lá»›n, báº¡n cÃ³ thá»ƒ Ä‘á»‹nh chá»‰ má»¥c dá»±a trÃªn thá»i gian trÆ°á»›c khi tÃ¬m kiáº¿m;</p>
<p>(5) Thiáº¿t láº­p cÆ¡ cháº¿ Ä‘á»‹nh tuyáº¿n há»£p lÃ½.</p>
<p>1.4. Tá»‘i Æ°u hÃ³a khÃ¡c</p>
<p>Tá»‘i Æ°u hÃ³a triá»ƒn khai, tá»‘i Æ°u hÃ³a kinh doanh, v.v.</p>
<p>Pháº§n nÃªu trÃªn chá»‰ Ä‘á» cáº­p Ä‘áº¿n má»™t pháº§n, ngÆ°á»i phá»ng váº¥n sáº½ cÆ¡ báº£n Ä‘Ã¡nh giÃ¡ kinh nghiá»‡m thá»±c hÃ nh hoáº·c váº­n hÃ nh trÆ°á»›c Ä‘Ã¢y cá»§a báº¡n.</p>
<h2>NguyÃªn lÃ½ hoáº¡t Ä‘á»™ng</h2>
<h3>QuÃ¡ trÃ¬nh ghi dá»¯ liá»‡u es</h3>
<ul>
<li>MÃ¡y khÃ¡ch chá»n má»™t node Ä‘á»ƒ gá»­i yÃªu cáº§u Ä‘i, node nÃ y lÃ  <code>coordinating node</code> (nÃºt Ä‘iá»u phá»‘i).</li>
<li><code>Coordinating node</code> thá»±c hiá»‡n <strong>Ä‘á»‹nh tuyáº¿n</strong> cho document, chuyá»ƒn yÃªu cáº§u Ä‘áº¿n node tÆ°Æ¡ng á»©ng (cÃ³ primary shard).</li>
<li><code>Primary shard</code> trÃªn node thá»±c táº¿ xá»­ lÃ½ yÃªu cáº§u, sau Ä‘Ã³ Ä‘á»“ng bá»™ hÃ³a dá»¯ liá»‡u vá»›i <code>replica node</code>.</li>
<li><code>Coordinating node</code> náº¿u phÃ¡t hiá»‡n <code>primary node</code> vÃ  táº¥t cáº£ <code>replica node</code> Ä‘á»u Ä‘Ã£ hoÃ n thÃ nh, thÃ¬ tráº£ káº¿t quáº£ pháº£n há»“i cho mÃ¡y khÃ¡ch.</li>
</ul>
<h3>QuÃ¡ trÃ¬nh Ä‘á»c dá»¯ liá»‡u es</h3>
<p>CÃ³ thá»ƒ truy váº¥n thÃ´ng qua <code>doc id</code>, sáº½ dá»±a vÃ o <code>doc id</code> Ä‘á»ƒ thá»±c hiá»‡n hash, xÃ¡c Ä‘á»‹nh lÃºc Ä‘Ã³ Ä‘Ã£ phÃ¢n <code>doc id</code> vÃ o shard nÃ o, tá»« shard Ä‘Ã³ truy váº¥n.</p>
<ul>
<li>MÃ¡y khÃ¡ch gá»­i yÃªu cáº§u Ä‘áº¿n <strong>báº¥t ká»³</strong> má»™t node, trá»Ÿ thÃ nh <code>coordinate node</code>.</li>
<li><code>Coordinate node</code> thá»±c hiá»‡n Ä‘á»‹nh tuyáº¿n hash cho <code>doc id</code>, chuyá»ƒn yÃªu cáº§u Ä‘áº¿n node tÆ°Æ¡ng á»©ng, lÃºc nÃ y sáº½ sá»­ dá»¥ng thuáº­t toÃ¡n <strong>round-robin ngáº«u nhiÃªn</strong>, chá»n ngáº«u nhiÃªn má»™t trong sá»‘ <code>primary shard</code> vÃ  táº¥t cáº£ cÃ¡c báº£n sao cá»§a nÃ³, Ä‘á»ƒ cÃ¢n báº±ng táº£i yÃªu cáº§u Ä‘á»c.</li>
<li>Node nháº­n yÃªu cáº§u tráº£ document cho <code>coordinate node</code>.</li>
<li><code>Coordinate node</code> tráº£ document cho mÃ¡y khÃ¡ch.</li>
</ul>
<h3>QuÃ¡ trÃ¬nh tÃ¬m kiáº¿m dá»¯ liá»‡u trong ES</h3>
<p>Äiá»ƒm máº¡nh nháº¥t cá»§a ES lÃ  thá»±c hiá»‡n tÃ¬m kiáº¿m toÃ n vÄƒn, vÃ­ dá»¥, báº¡n cÃ³ ba dá»¯ liá»‡u:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Java is interesting</span></span>
<span class="line"><span>Java is so difficult to learn</span></span>
<span class="line"><span>J2EE is great</span></span></code></pre>
</div><p>Báº¡n tÃ¬m kiáº¿m theo tá»« khÃ³a&nbsp;<code>java</code>, nÃ³ sáº½ tÃ¬m kiáº¿m cÃ¡c&nbsp;<code>document</code>&nbsp;chá»©a&nbsp;<code>java</code>. ES sáº½ tráº£ vá» cho báº¡n: Java is interesting, Java is so difficult to learn</p>
<ul>
<li>MÃ¡y khÃ¡ch gá»­i yÃªu cáº§u Ä‘áº¿n má»™t&nbsp;<code>coordinating node</code>.</li>
<li>NÃºt Ä‘iá»u phá»‘i chuyá»ƒn yÃªu cáº§u tÃ¬m kiáº¿m Ä‘áº¿n&nbsp;<strong>táº¥t cáº£</strong>&nbsp;<code>primary shard</code> hoáº·c&nbsp;<code>replica shard</code>&nbsp;tÆ°Æ¡ng á»©ng.</li>
<li>Giai Ä‘oáº¡n truy váº¥n (query phase): má»—i shard sáº½ tráº£ láº¡i káº¿t quáº£ tÃ¬m kiáº¿m cá»§a mÃ¬nh (thá»±c táº¿ chá»‰ lÃ  má»™t sá»‘&nbsp;<code>doc id</code>) cho nÃºt Ä‘iá»u phá»‘i, nÃºt Ä‘iá»u phá»‘i thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng nhÆ° há»£p nháº¥t dá»¯ liá»‡u, sáº¯p xáº¿p, phÃ¢n trang, etc., Ä‘á»ƒ táº¡o ra káº¿t quáº£ cuá»‘i cÃ¹ng.</li>
<li>Giai Ä‘oáº¡n láº¥y (fetch phase): sau Ä‘Ã³, nÃºt Ä‘iá»u phá»‘i sáº½&nbsp;<strong>láº¥y</strong>&nbsp;dá»¯ liá»‡u&nbsp;<code>document</code>&nbsp;thá»±c táº¿ tá»« cÃ¡c node dá»±a trÃªn&nbsp;<code>doc id</code>, vÃ  cuá»‘i cÃ¹ng tráº£ láº¡i cho mÃ¡y khÃ¡ch.</li>
</ul>
<blockquote>
<p>YÃªu cáº§u ghi Ä‘Æ°á»£c ghi vÃ o primary shard, sau Ä‘Ã³ Ä‘á»“ng bá»™ hÃ³a vá»›i táº¥t cáº£ cÃ¡c replica shard; yÃªu cáº§u Ä‘á»c cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘á»c tá»« primary shard hoáº·c replica shard, sá»­ dá»¥ng thuáº­t toÃ¡n round-robin.</p>
</blockquote>
<h3>NguyÃªn lÃ½ cÆ¡ báº£n khi ghi dá»¯ liá»‡u</h3>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240223111949.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Äáº§u tiÃªn, dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c ghi vÃ o bá»™ Ä‘á»‡m trong bá»™ nhá»› (buffer), trong quÃ¡ trÃ¬nh nÃ y dá»¯ liá»‡u khÃ´ng thá»ƒ Ä‘Æ°á»£c tÃ¬m kiáº¿m; Ä‘á»“ng thá»i dá»¯ liá»‡u cÅ©ng Ä‘Æ°á»£c ghi vÃ o tá»‡p nháº­t kÃ½ translog.</p>
<p>Náº¿u bá»™ Ä‘á»‡m gáº§n nhÆ° Ä‘áº§y, hoáº·c sau má»™t khoáº£ng thá»i gian nháº¥t Ä‘á»‹nh, dá»¯ liá»‡u trong bá»™ Ä‘á»‡m sáº½ Ä‘Æ°á»£c&nbsp;<code>refresh</code>&nbsp;vÃ o má»™t&nbsp;<code>segment file</code>&nbsp;má»›i, nhÆ°ng lÃºc nÃ y dá»¯ liá»‡u khÃ´ng Ä‘Æ°á»£c ghi trá»±c tiáº¿p vÃ o tá»‡p&nbsp;<code>segment file</code> trÃªn Ä‘Ä©a, mÃ  pháº£i Ä‘i vÃ o&nbsp;<code>os cache</code>&nbsp;trÆ°á»›c. QuÃ¡ trÃ¬nh nÃ y Ä‘Æ°á»£c gá»i lÃ &nbsp;<code>refresh</code>.</p>
<p>Má»—i giÃ¢y, ES sáº½ ghi dá»¯ liá»‡u trong bá»™ Ä‘á»‡m vÃ o má»™t&nbsp;<code>segment file</code>&nbsp;<strong>má»›i</strong>, má»—i giÃ¢y sáº½ táº¡o ra má»™t tá»‡p Ä‘Ä©a <code>segment file</code>&nbsp;<strong>má»›i</strong>, tá»‡p&nbsp;<code>segment file</code> nÃ y sáº½ lÆ°u trá»¯ dá»¯ liá»‡u Ä‘Æ°á»£c ghi vÃ o bá»™ Ä‘á»‡m trong 1 giÃ¢y gáº§n Ä‘Ã¢y.</p>
<p>Tuy nhiÃªn, náº¿u khÃ´ng cÃ³ dá»¯ liá»‡u trong bá»™ Ä‘á»‡m, thÃ¬ táº¥t nhiÃªn khÃ´ng cÃ³ quÃ¡ trÃ¬nh refresh nÃ o Ä‘Æ°á»£c thá»±c hiá»‡n, náº¿u cÃ³ dá»¯ liá»‡u trong bá»™ Ä‘á»‡m, máº·c Ä‘á»‹nh sáº½ thá»±c hiá»‡n má»™t láº§n refresh má»—i giÃ¢y, Ä‘áº©y dá»¯ liá»‡u vÃ o má»™t&nbsp;<code>segment file</code>&nbsp;má»›i.</p>
<p>TrÃªn há»‡ Ä‘iá»u hÃ nh, tá»‡p Ä‘Ä©a thá»±c táº¿ Ä‘á»u cÃ³ má»™t thá»© gá»i lÃ &nbsp;<code>os cache</code>, tá»©c lÃ  trÆ°á»›c khi dá»¯ liá»‡u Ä‘Æ°á»£c ghi vÃ o tá»‡p Ä‘Ä©a, nÃ³ sáº½ Ä‘Æ°á»£c Ä‘Æ°a vÃ o&nbsp;<code>os cache</code> trÆ°á»›c, Ä‘áº§u tiÃªn vÃ o bá»™ nhá»› cache cáº¥p há»‡ Ä‘iá»u hÃ nh. Chá»‰ cáº§n dá»¯ liá»‡u trong bá»™ Ä‘á»‡m Ä‘Æ°á»£c chuyá»ƒn vÃ o&nbsp;<code>os cache</code>&nbsp;thÃ´ng qua hoáº¡t Ä‘á»™ng refresh, dá»¯ liá»‡u nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¬m kiáº¿m.</p>
<p>Táº¡i sao nÃ³i ráº±ng ES lÃ &nbsp;<strong>gáº§n nhÆ° thá»i gian thá»±c</strong>?&nbsp;<code>NRT</code>, tÃªn Ä‘áº§y Ä‘á»§ lÃ &nbsp;<code>near real-time</code>. Máº·c Ä‘á»‹nh lÃ  refresh má»—i giÃ¢y má»™t láº§n, vÃ¬ váº­y ES lÃ  gáº§n nhÆ° thá»i gian thá»±c, vÃ¬ dá»¯ liá»‡u Ä‘Æ°á»£c ghi vÃ o sau 1 giÃ¢y má»›i cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¬m tháº¥y. Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng&nbsp;<code>restful api</code>&nbsp;cá»§a es hoáº·c&nbsp;<code>java api</code>&nbsp;Ä‘á»ƒ thá»±c hiá»‡n má»™t hoáº¡t Ä‘á»™ng refresh&nbsp;<strong>thá»§ cÃ´ng</strong>, tá»©c lÃ  thá»§ cÃ´ng Ä‘Æ°a dá»¯ liá»‡u trong bá»™ Ä‘á»‡m vÃ o&nbsp;<code>os cache</code>, Ä‘á»ƒ dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¬m kiáº¿m ngay láº­p tá»©c. Miá»…n lÃ  dá»¯ liá»‡u Ä‘Æ°á»£c Ä‘Æ°a vÃ o&nbsp;<code>os cache</code>, bá»™ Ä‘á»‡m sáº½ Ä‘Æ°á»£c lÃ m sáº¡ch, vÃ¬ khÃ´ng cáº§n giá»¯ bá»™ Ä‘á»‡m ná»¯a, dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c lÆ°u trá»¯ trong tá»‡p nháº­t kÃ½ translog má»™t láº§n.</p>
<p>Láº·p láº¡i cÃ¡c bÆ°á»›c trÃªn, dá»¯ liá»‡u má»›i liÃªn tá»¥c vÃ o bá»™ Ä‘á»‡m vÃ  translog, liÃªn tá»¥c ghi dá»¯ liá»‡u&nbsp;<code>buffer</code>&nbsp;vÃ o má»™t&nbsp;<code>segment file</code>&nbsp;má»›i sau má»—i láº§n&nbsp;<code>refresh</code>, sau má»—i láº§n&nbsp;<code>refresh</code>&nbsp;bá»™ Ä‘á»‡m sáº½ Ä‘Æ°á»£c lÃ m sáº¡ch, translog sáº½ Ä‘Æ°á»£c giá»¯ láº¡i. Khi quÃ¡ trÃ¬nh nÃ y tiáº¿p diá»…n, translog sáº½ ngÃ y cÃ ng lá»›n. Khi translog Ä‘áº¡t Ä‘áº¿n má»™t Ä‘á»™ dÃ i nháº¥t Ä‘á»‹nh, nÃ³ sáº½ kÃ­ch hoáº¡t hoáº¡t Ä‘á»™ng&nbsp;<code>commit</code>.</p>
<p>BÆ°á»›c Ä‘áº§u tiÃªn cá»§a hoáº¡t Ä‘á»™ng commit lÃ  ghi dá»¯ liá»‡u hiá»‡n cÃ³ trong bá»™ Ä‘á»‡m vÃ o&nbsp;<code>os cache</code>, sau Ä‘Ã³ lÃ m sáº¡ch bá»™ Ä‘á»‡m. Sau Ä‘Ã³, ghi má»™t&nbsp;<code>commit point</code>&nbsp;vÃ o tá»‡p Ä‘Ä©a, trong Ä‘Ã³ Ä‘Ã¡nh dáº¥u táº¥t cáº£ cÃ¡c&nbsp;<code>segment file</code>&nbsp;tÆ°Æ¡ng á»©ng vá»›i&nbsp;<code>commit point</code>&nbsp;nÃ y, Ä‘á»“ng thá»i buá»™c&nbsp;<code>os cache</code>&nbsp;chá»©a táº¥t cáº£ dá»¯ liá»‡u hiá»‡n táº¡i Ä‘á»ƒ Ä‘Æ°á»£c&nbsp;<code>fsync</code>&nbsp;vÃ o tá»‡p Ä‘Ä©a. Cuá»‘i cÃ¹ng,&nbsp;<strong>xÃ³a</strong>&nbsp;tá»‡p nháº­t kÃ½ translog hiá»‡n táº¡i, khá»Ÿi Ä‘á»™ng láº¡i má»™t translog, lÃºc nÃ y hoáº¡t Ä‘á»™ng commit Ä‘Ã£ hoÃ n thÃ nh.</p>
<p>Hoáº¡t Ä‘á»™ng commit nÃ y Ä‘Æ°á»£c gá»i lÃ &nbsp;<code>flush</code>. Máº·c Ä‘á»‹nh lÃ  má»—i 30 phÃºt tá»± Ä‘á»™ng thá»±c hiá»‡n má»™t láº§n&nbsp;<code>flush</code>, nhÆ°ng náº¿u translog quÃ¡ lá»›n, cÅ©ng sáº½ kÃ­ch hoáº¡t&nbsp;<code>flush</code>. Hoáº¡t Ä‘á»™ng flush tÆ°Æ¡ng á»©ng vá»›i toÃ n bá»™ quÃ¡ trÃ¬nh commit, chÃºng ta cÃ³ thá»ƒ thÃ´ng qua api cá»§a es, thá»±c hiá»‡n thá»§ cÃ´ng hoáº¡t Ä‘á»™ng flush, thá»§ cÃ´ng&nbsp;<code>fsync</code>&nbsp;dá»¯ liá»‡u trong&nbsp;<code>os cache</code>&nbsp;vÃ o Ä‘Ä©a.</p>
<p>Tá»‡p nháº­t kÃ½ translog cÃ³ vai trÃ² gÃ¬? TrÆ°á»›c khi báº¡n thá»±c hiá»‡n hoáº¡t Ä‘á»™ng commit, dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘ang náº±m trong bá»™ Ä‘á»‡m hoáº·c náº±m trong&nbsp;<code>os cache</code>. DÃ¹ lÃ  bá»™ Ä‘á»‡m hay&nbsp;<code>os cache</code>&nbsp;Ä‘á»u lÃ  bá»™ nhá»›, náº¿u mÃ¡y nÃ y bá»‹ há»ng, dá»¯ liá»‡u trong bá»™ nhá»› sáº½ máº¥t háº¿t. VÃ¬ váº­y, cáº§n ghi cÃ¡c hoáº¡t Ä‘á»™ng tÆ°Æ¡ng á»©ng cá»§a dá»¯ liá»‡u vÃ o má»™t tá»‡p nháº­t kÃ½ Ä‘áº·c biá»‡t lÃ &nbsp;<code>translog</code>, náº¿u mÃ¡y bá»‹ há»ng lÃºc nÃ y, khi khá»Ÿi Ä‘á»™ng láº¡i, es sáº½ tá»± Ä‘á»™ng Ä‘á»c dá»¯ liá»‡u tá»« tá»‡p nháº­t kÃ½ translog vÃ  phá»¥c há»“i vÃ o bá»™ nhá»›&nbsp;<code>buffer</code>&nbsp;vÃ &nbsp;<code>os cache</code>.</p>
<p>Thá»±c táº¿, translog cÅ©ng Ä‘Æ°á»£c ghi vÃ o&nbsp;<code>os cache</code>&nbsp;trÆ°á»›c, máº·c Ä‘á»‹nh lÃ  má»—i 5 giÃ¢y sáº½ Ä‘áº©y vÃ o Ä‘Ä©a má»™t láº§n, vÃ¬ váº­y máº·c Ä‘á»‹nh, cÃ³ thá»ƒ cÃ³ 5 giÃ¢y dá»¯ liá»‡u chá»‰ náº±m trong bá»™ Ä‘á»‡m hoáº·c <code>os cache</code> hoáº·c tá»‡p translog, khÃ´ng náº±m trÃªn Ä‘Ä©a, náº¿u mÃ¡y nÃ y bá»‹ há»ng lÃºc nÃ y, sáº½&nbsp;<strong>máº¥t</strong>&nbsp;5 giÃ¢y dá»¯ liá»‡u. NhÆ°ng hiá»‡u suáº¥t nhÆ° váº­y tá»‘t hÆ¡n, máº¥t tá»‘i Ä‘a 5 giÃ¢y dá»¯ liá»‡u. Báº¡n cÅ©ng cÃ³ thá»ƒ Ä‘áº·t translog Ä‘á»ƒ má»—i láº§n ghi pháº£i&nbsp;<code>fsync</code>&nbsp;trá»±c tiáº¿p vÃ o Ä‘Ä©a, nhÆ°ng hiá»‡u suáº¥t sáº½ kÃ©m hÆ¡n nhiá»u.</p>
<p>Thá»±c táº¿, náº¿u báº¡n á»Ÿ Ä‘Ã¢y, náº¿u ngÆ°á»i phá»ng váº¥n khÃ´ng há»i báº¡n vá» váº¥n Ä‘á» máº¥t dá»¯ liá»‡u cá»§a es, báº¡n cÃ³ thá»ƒ tá»± hÃ o vá»›i ngÆ°á»i phá»ng váº¥n á»Ÿ Ä‘Ã¢y, báº¡n nÃ³i, thá»±c táº¿ es trÆ°á»›c tiÃªn lÃ  gáº§n nhÆ° thá»i gian thá»±c, dá»¯ liá»‡u Ä‘Æ°á»£c ghi vÃ o sau 1 giÃ¢y má»›i cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¬m tháº¥y; cÃ³ thá»ƒ máº¥t dá»¯ liá»‡u. CÃ³ 5 giÃ¢y dá»¯ liá»‡u, náº±m trong bá»™ Ä‘á»‡m,&nbsp;<code>os cache</code>&nbsp;cá»§a translog,&nbsp;<code>os cache</code>&nbsp;cá»§a&nbsp;<code>segment file</code>, khÃ´ng náº±m trÃªn Ä‘Ä©a, náº¿u mÃ¡y nÃ y bá»‹ há»ng lÃºc nÃ y, sáº½ dáº«n Ä‘áº¿n&nbsp;<strong>máº¥t</strong>&nbsp;5 giÃ¢y dá»¯ liá»‡u.</p>
<p><strong>TÃ³m láº¡i</strong>, dá»¯ liá»‡u Ä‘Æ°á»£c ghi vÃ o bá»™ Ä‘á»‡m trÆ°á»›c, sau Ä‘Ã³ má»—i giÃ¢y, dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c refresh vÃ o&nbsp;<code>os cache</code>, khi dá»¯ liá»‡u Ä‘áº¿n&nbsp;<code>os cache</code>, dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¬m kiáº¿m (Ä‘Ã³ lÃ  lÃ½ do táº¡i sao chÃºng ta nÃ³i ráº±ng tá»« khi dá»¯ liá»‡u Ä‘Æ°á»£c ghi vÃ o cho Ä‘áº¿n khi cÃ³ thá»ƒ tÃ¬m kiáº¿m, cÃ³ Ä‘á»™ trá»… 1s). Má»—i 5 giÃ¢y, dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c ghi vÃ o tá»‡p translog (do Ä‘Ã³, náº¿u mÃ¡y bá»‹ há»ng, táº¥t cáº£ dá»¯ liá»‡u trong bá»™ nhá»› sáº½ máº¥t, tá»‘i Ä‘a sáº½ máº¥t 5s dá»¯ liá»‡u), khi translog lá»›n Ä‘áº¿n má»™t má»©c Ä‘á»™ nháº¥t Ä‘á»‹nh, hoáº·c máº·c Ä‘á»‹nh má»—i 30 phÃºt, má»™t hoáº¡t Ä‘á»™ng commit sáº½ Ä‘Æ°á»£c kÃ­ch hoáº¡t, Ä‘áº©y táº¥t cáº£ dá»¯ liá»‡u trong bá»™ Ä‘á»‡m vÃ o tá»‡p&nbsp;<code>segment file</code>trÃªn Ä‘Ä©a.</p>
<blockquote>
<p>Sau khi dá»¯ liá»‡u Ä‘Æ°á»£c ghi vÃ o&nbsp;<code>segment file</code>, chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c cÅ©ng sáº½ Ä‘Æ°á»£c táº¡o ngay láº­p tá»©c.</p>
</blockquote>
<h3>NguyÃªn lÃ½ cÆ¡ báº£n khi xÃ³a/cáº­p nháº­t dá»¯ liá»‡u</h3>
<p>Náº¿u lÃ  hoáº¡t Ä‘á»™ng xÃ³a, khi commit sáº½ táº¡o ra má»™t tá»‡p&nbsp;<code>.del</code>, trong Ä‘Ã³ Ä‘Ã¡nh dáº¥u má»™t doc nháº¥t Ä‘á»‹nh lÃ  tráº¡ng thÃ¡i&nbsp;<code>deleted</code>, vÃ¬ váº­y khi tÃ¬m kiáº¿m, dá»±a vÃ o tá»‡p&nbsp;<code>.del</code>, báº¡n sáº½ biáº¿t liá»‡u doc cÃ³ bá»‹ xÃ³a hay khÃ´ng.</p>
<p>Náº¿u lÃ  hoáº¡t Ä‘á»™ng cáº­p nháº­t, nÃ³ sáº½ Ä‘Ã¡nh dáº¥u doc gá»‘c lÃ  tráº¡ng thÃ¡i&nbsp;<code>deleted</code>&nbsp;vÃ  sau Ä‘Ã³ ghi má»™t dá»¯ liá»‡u má»›i.</p>
<p>Má»—i khi bá»™ Ä‘á»‡m Ä‘Æ°á»£c refresh, má»™t&nbsp;<code>segment file</code>&nbsp;sáº½ Ä‘Æ°á»£c táº¡o ra, vÃ¬ váº­y máº·c Ä‘á»‹nh lÃ  má»™t&nbsp;<code>segment file</code>&nbsp;má»—i giÃ¢y, vÃ¬ váº­y&nbsp;<code>segment file</code>&nbsp;sáº½ ngÃ y cÃ ng nhiá»u, lÃºc nÃ y sáº½ thÆ°á»ng xuyÃªn thá»±c hiá»‡n merge. Má»—i láº§n merge, nhiá»u&nbsp;<code>segment file</code>&nbsp;sáº½ Ä‘Æ°á»£c há»£p nháº¥t thÃ nh má»™t, Ä‘á»“ng thá»i á»Ÿ Ä‘Ã¢y, doc Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ &nbsp;<code>deleted</code>&nbsp;sáº½ Ä‘Æ°á»£c&nbsp;<strong>xÃ³a váº­t lÃ½</strong>, sau Ä‘Ã³ ghi&nbsp;<code>segment file</code>&nbsp;má»›i vÃ o Ä‘Ä©a, á»Ÿ Ä‘Ã¢y sáº½ ghi má»™t&nbsp;<code>commit point</code>, Ä‘Ã¡nh dáº¥u táº¥t cáº£&nbsp;<code>segment file</code>&nbsp;má»›i, sau Ä‘Ã³ má»Ÿ&nbsp;<code>segment file</code>&nbsp;Ä‘á»ƒ tÃ¬m kiáº¿m, vÃ  sau Ä‘Ã³ xÃ³a&nbsp;<code>segment file</code>&nbsp;cÅ©.</p>
<h3>Lá»›p cÆ¡ báº£n Lucene</h3>
<p>ÄÆ¡n giáº£n, Lucene chá»‰ lÃ  má»™t thÆ° viá»‡n jar, bÃªn trong nÃ³ chá»©a cÃ¡c mÃ£ thuáº­t toÃ¡n Ä‘Ã£ Ä‘Æ°á»£c Ä‘Ã³ng gÃ³i Ä‘á»ƒ táº¡o chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c. Khi chÃºng ta phÃ¡t triá»ƒn báº±ng Java, chÃºng ta chá»‰ cáº§n import thÆ° viá»‡n jar Lucene, sau Ä‘Ã³ phÃ¡t triá»ƒn dá»±a trÃªn API cá»§a Lucene.</p>
<p>ThÃ´ng qua Lucene, chÃºng ta cÃ³ thá»ƒ táº¡o chá»‰ má»¥c cho dá»¯ liá»‡u hiá»‡n cÃ³, Lucene sáº½ tá»• chá»©c cáº¥u trÃºc dá»¯ liá»‡u chá»‰ má»¥c trÃªn á»• Ä‘Ä©a cá»¥c bá»™ cho chÃºng ta.</p>
<h3>Chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c</h3>
<p>Trong cÃ´ng cá»¥ tÃ¬m kiáº¿m, má»—i tÃ i liá»‡u Ä‘á»u cÃ³ má»™t ID tÃ i liá»‡u tÆ°Æ¡ng á»©ng, ná»™i dung tÃ i liá»‡u Ä‘Æ°á»£c biá»ƒu diá»…n dÆ°á»›i dáº¡ng má»™t táº­p há»£p cÃ¡c tá»« khÃ³a. VÃ­ dá»¥, sau khi phÃ¢n loáº¡i, tÃ i liá»‡u 1 Ä‘Ã£ trÃ­ch xuáº¥t 20 tá»« khÃ³a, má»—i tá»« khÃ³a Ä‘á»u ghi láº¡i sá»‘ láº§n xuáº¥t hiá»‡n vÃ  vá»‹ trÃ­ xuáº¥t hiá»‡n cá»§a nÃ³ trong tÃ i liá»‡u.</p>
<p>Váº­y, chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c lÃ  Ã¡nh xáº¡ tá»«&nbsp;<strong>tá»« khÃ³a Ä‘áº¿n ID tÃ i liá»‡u</strong>, má»—i tá»« khÃ³a Ä‘á»u tÆ°Æ¡ng á»©ng vá»›i má»™t loáº¡t tÃ i liá»‡u, trong Ä‘Ã³ táº¥t cáº£ cÃ¡c tÃ i liá»‡u Ä‘á»u xuáº¥t hiá»‡n tá»« khÃ³a.</p>
<p>VÃ­ dá»¥.</p>
<p>CÃ³ cÃ¡c tÃ i liá»‡u sau:</p>
<p>| DocId | Doc                                                                           |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240223081955.png" type="image/png"/>
    </item>
    <item>
      <title>Elasticsearch Intro</title>
      <link>https://vanhung4499.github.io/database/elasticsearch/intro.html</link>
      <guid>https://vanhung4499.github.io/database/elasticsearch/intro.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elasticsearch Intro</source>
      <description>Giá»›i thiá»‡u vá» Elasticsearch Elasticsearch lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch dá»¯ liá»‡u dá»±a trÃªn Lucene, cung cáº¥p má»™t dá»‹ch vá»¥ phÃ¢n tÃ¡n. Elasticsearch lÃ  má»™t sáº£n pháº©m mÃ£ nguá»“n má»Ÿ ...</description>
      <category>elasticssearch</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Elasticsearch lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch dá»¯ liá»‡u dá»±a trÃªn Lucene, cung cáº¥p má»™t dá»‹ch vá»¥ phÃ¢n tÃ¡n. Elasticsearch lÃ  má»™t sáº£n pháº©m mÃ£ nguá»“n má»Ÿ tuÃ¢n thá»§ cÃ¡c Ä‘iá»u khoáº£n mÃ£ nguá»“n má»Ÿ cá»§a Apache vÃ  hiá»‡n lÃ  cÃ´ng cá»¥ tÃ¬m kiáº¿m cáº¥p doanh nghiá»‡p phá»• biáº¿n hiá»‡n nay.</p>
<p>NÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng cho tÃ¬m kiáº¿m toÃ n vÄƒn báº£n, tÃ¬m kiáº¿m cÃ³ cáº¥u trÃºc, phÃ¢n tÃ­ch, vÃ  káº¿t há»£p ba yáº¿u tá»‘ nÃ y:</p>
<ul>
<li>Wikipedia sá»­ dá»¥ng Elasticsearch Ä‘á»ƒ cung cáº¥p tÃ¬m kiáº¿m toÃ n vÄƒn báº£n vá»›i Ä‘Ã¡nh dáº¥u tá»« khÃ³a, cÅ©ng nhÆ° cÃ¡c tÃ­nh nÄƒng Ä‘á» xuáº¥t tÃ¬m kiáº¿m nhÆ°&nbsp;<strong>tÃ¬m kiáº¿m thá»i gian thá»±c (search-as-you-type)</strong>&nbsp;vÃ &nbsp;<strong>sá»­a lá»—i tÃ¬m kiáº¿m (did-you-mean)</strong>.</li>
<li>The Guardian sá»­ dá»¥ng Elasticsearch Ä‘á»ƒ cung cáº¥p pháº£n há»“i thá»i gian thá»±c cho biÃªn táº­p viÃªn cá»§a há» báº±ng cÃ¡ch káº¿t há»£p dá»¯ liá»‡u nháº­t kÃ½ ngÆ°á»i dÃ¹ng vÃ  dá»¯ liá»‡u máº¡ng xÃ£ há»™i, giÃºp há» hiá»ƒu rÃµ pháº£n á»©ng cá»§a cÃ´ng chÃºng Ä‘á»‘i vá»›i cÃ¡c bÃ i viáº¿t má»›i xuáº¥t báº£n.</li>
<li>StackOverflow káº¿t há»£p tÃ¬m kiáº¿m toÃ n vÄƒn báº£n vá»›i truy váº¥n vá»‹ trÃ­ Ä‘á»‹a lÃ½ vÃ  tÃ­nh nÄƒng&nbsp;<strong>more-like-this</strong>&nbsp;Ä‘á»ƒ tÃ¬m cÃ¡c cÃ¢u há»i vÃ  cÃ¢u tráº£ lá»i liÃªn quan.</li>
<li>Github sá»­ dá»¥ng Elasticsearch Ä‘á»ƒ tÃ¬m kiáº¿m 130 tá»· dÃ²ng code. (sá»‘ liá»‡u cÃ³ thá»ƒ thay Ä‘á»•i hÃ ng giá» nÃªn cÃ³ thá»ƒ sai lá»‡ch táº¡i thá»i Ä‘iá»ƒm viáº¿t)</li>
</ul>
<h2>Äáº·c Ä‘iá»ƒm cá»§a Elasticsearch</h2>
<ul>
<li>LÆ°u trá»¯ tá»‡p thá»i gian thá»±c phÃ¢n tÃ¡n, vá»›i má»—i trÆ°á»ng Ä‘Æ°á»£c láº­p chá»‰ má»¥c vÃ  cÃ³ thá»ƒ tÃ¬m kiáº¿m.</li>
<li>CÃ´ng cá»¥ tÃ¬m kiáº¿m phÃ¢n tÃ­ch thá»i gian thá»±c phÃ¢n tÃ¡n.</li>
<li>CÃ³ thá»ƒ má»Ÿ rá»™ng linh hoáº¡t lÃªn Ä‘áº¿n hÃ ng trÄƒm mÃ¡y chá»§, xá»­ lÃ½ dá»¯ liá»‡u cÃ³ cáº¥u trÃºc hoáº·c khÃ´ng cÃ³ cáº¥u trÃºc á»Ÿ cáº¥p petabyte.</li>
<li>Sáºµn sÃ ng sá»­ dá»¥ng ngay sau khi cÃ i Ä‘áº·t, nÃ³ cung cáº¥p nhiá»u giÃ¡ trá»‹ máº·c Ä‘á»‹nh há»£p lÃ½ vÃ  áº©n Ä‘i lÃ½ thuyáº¿t cÃ´ng cá»¥ tÃ¬m kiáº¿m phá»©c táº¡p Ä‘á»‘i vá»›i ngÆ°á»i má»›i há»c. NÃ³ cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng trong mÃ´i trÆ°á»ng product vá»›i yÃªu cáº§u há»c táº­p tá»‘i thiá»ƒu.</li>
</ul>
<h2>Lá»‹ch sá»­ phÃ¡t triá»ƒn cá»§a Elasticsearch</h2>
<ul>
<li>NgÃ y 8 thÃ¡ng 2 nÄƒm 2010, phiÃªn báº£n cÃ´ng khai Ä‘áº§u tiÃªn cá»§a Elasticsearch Ä‘Ã£ Ä‘Æ°á»£c phÃ¡t hÃ nh.</li>
<li>NgÃ y 14 thÃ¡ng 5 nÄƒm 2010, phiÃªn báº£n ban Ä‘áº§u mang tÃ­nh bÆ°á»›c ngoáº·t <strong>0.7.0</strong> Ä‘Æ°á»£c phÃ¡t hÃ nh, vá»›i cÃ¡c tÃ­nh nÄƒng:
<ul>
<li>MÃ´-Ä‘un Zen Discovery tá»± Ä‘á»™ng phÃ¡t hiá»‡n;
<ul>
<li>Há»— trá»£ cho Groovy Client;</li>
</ul>
</li>
<li>CÆ¡ cháº¿ quáº£n lÃ½ plugin Ä‘Æ¡n giáº£n;
<ul>
<li>Há»— trá»£ tá»‘t hÆ¡n cho bá»™ tÃ¡ch tá»« icu;</li>
</ul>
</li>
<li>Nhiá»u API quáº£n lÃ½ hÆ¡n.</li>
</ul>
</li>
<li>Äáº§u nÄƒm 2013, GitHub tá»« bá» Solr vÃ  chá»n Elasticsearch Ä‘á»ƒ thá»±c hiá»‡n tÃ¬m kiáº¿m cáº¥p PB cá»§a mÃ¬nh.</li>
<li>NgÃ y 14 thÃ¡ng 2 nÄƒm 2014, phiÃªn báº£n <strong>1.0.0</strong> Ä‘Æ°á»£c phÃ¡t hÃ nh, thÃªm cÃ¡c tÃ­nh nÄƒng quan trá»ng sau:
<ul>
<li>Há»— trá»£ cho Snapshot/Restore API backup recovery API;
<ul>
<li>Há»— trá»£ cho Aggregations;</li>
</ul>
</li>
<li>Há»— trá»£ cho cat API;
<ul>
<li>Há»— trá»£ cho circuit breakers;</li>
</ul>
</li>
<li>Giá»›i thiá»‡u Doc values.</li>
</ul>
</li>
<li>NgÃ y 28 thÃ¡ng 10 nÄƒm 2015, phiÃªn báº£n <strong>2.0.0</strong> Ä‘Æ°á»£c phÃ¡t hÃ nh, vá»›i cÃ¡c tÃ­nh nÄƒng quan trá»ng sau:
<ul>
<li>ThÃªm Pipleline Aggregations;
<ul>
<li>Query/filter query merging, táº¥t cáº£ Ä‘Æ°á»£c há»£p nháº¥t vÃ o query, thá»±c hiá»‡n cÃ¡c truy váº¥n khÃ¡c nhau theo cÃ¡c ngá»¯ cáº£nh khÃ¡c nhau;</li>
</ul>
</li>
<li>Cáº¥u hÃ¬nh lÆ°u trá»¯ nÃ©n;
<ul>
<li>MÃ´-Ä‘un Rivers Ä‘Ã£ bá»‹ loáº¡i bá»;</li>
</ul>
</li>
<li>TÃ­nh nÄƒng Multicast Ä‘Ã£ bá»‹ loáº¡i bá», trá»Ÿ thÃ nh má»™t plugin, vÃ  má»™t Ä‘á»‹a chá»‰ unicast pháº£i Ä‘Æ°á»£c cáº¥u hÃ¬nh trong mÃ´i trÆ°á»ng sáº£n xuáº¥t.</li>
</ul>
</li>
<li>NgÃ y 26 thÃ¡ng 10 nÄƒm 2016, phiÃªn báº£n <strong>5.0.0</strong> Ä‘Æ°á»£c phÃ¡t hÃ nh, vá»›i cÃ¡c thay Ä‘á»•i tÃ­nh nÄƒng lá»›n sau:
<ul>
<li>Há»— trá»£ cho Lucene 6.x, giáº£m má»™t ná»­a khÃ´ng gian Ä‘Ä©a; giáº£m má»™t ná»­a thá»i gian láº­p chá»‰ má»¥c; tÄƒng 25% hiá»‡u suáº¥t truy váº¥n; há»— trá»£ cho IPV6;</li>
<li>KhÃ³a Ä‘ua Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ trÃ¡nh cáº­p nháº­t Ä‘á»“ng thá»i cá»§a cÃ¹ng má»™t tÃ i liá»‡u Ä‘Ã£ Ä‘Æ°á»£c loáº¡i bá» á»Ÿ cáº¥p Internal Engine, dáº«n Ä‘áº¿n cáº£i thiá»‡n hiá»‡u suáº¥t 15%-20%;</li>
<li>Shrink API, cÃ³ thá»ƒ thu nhá» sá»‘ lÆ°á»£ng shard thÃ nh cÃ¡c yáº¿u tá»‘ cá»§a nÃ³, vÃ­ dá»¥ nhÆ° náº¿u trÆ°á»›c Ä‘Ã¢y báº¡n cÃ³ 15 shard, báº¡n cÃ³ thá»ƒ thu nhá» thÃ nh 5 hoáº·c 3 hoáº·c 1, vÃ¬ váº­y chÃºng ta cÃ³ thá»ƒ tÆ°á»Ÿng tÆ°á»£ng má»™t tÃ¬nh huá»‘ng nhÆ° tháº¿ nÃ y, trong giai Ä‘oáº¡n thu tháº­p mÃ  Ã¡p lá»±c ghi lÃ  ráº¥t lá»›n, Ä‘áº·t Ä‘á»§ chá»‰ má»¥c, táº­n dá»¥ng tá»‘i Ä‘a kháº£ nÄƒng ghi song song cá»§a shard, sau khi chá»‰ má»¥c Ä‘Æ°á»£c viáº¿t, thu nhá» thÃ nh Ã­t shard hÆ¡n, cáº£i thiá»‡n hiá»‡u suáº¥t truy váº¥n;
<ul>
<li>Cung cáº¥p SDK client REST gá»‘c Java Ä‘áº§u tiÃªn;</li>
</ul>
</li>
<li>IngestNode, trÆ°á»›c Ä‘Ã¢y náº¿u báº¡n cáº§n xá»­ lÃ½ dá»¯ liá»‡u, nÃ³ Ä‘Æ°á»£c xá»­ lÃ½ trÆ°á»›c khi láº­p chá»‰ má»¥c, vÃ­ dá»¥ nhÆ° logstash cÃ³ thá»ƒ cáº¥u trÃºc vÃ  chuyá»ƒn Ä‘á»•i nháº­t kÃ½, bÃ¢y giá» nÃ³ cÃ³ thá»ƒ Ä‘Æ°á»£c xá»­ lÃ½ trá»±c tiáº¿p trong es;
<ul>
<li>Cung cáº¥p script Painless, thay tháº¿ cho script Groovy;</li>
<li>Loáº¡i bá» site plugins, cÃ³ nghÄ©a lÃ  head, bigdesk khÃ´ng thá»ƒ Ä‘Æ°á»£c cÃ i Ä‘áº·t trá»±c tiáº¿p trong es ná»¯a, nhÆ°ng cÃ³ thá»ƒ triá»ƒn khai cÃ¡c trang Ä‘á»™c láº­p (dÃ¹ sao Ä‘Ã³ cÅ©ng lÃ  cÃ¡c tá»‡p tÄ©nh) hoáº·c phÃ¡t triá»ƒn plugin kibana;</li>
<li>ThÃªm loáº¡i Sliced Scroll, bÃ¢y giá» giao diá»‡n Scroll cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ duyá»‡t dá»¯ liá»‡u Ä‘á»“ng thá»i. Má»—i yÃªu cáº§u Scroll cÃ³ thá»ƒ Ä‘Æ°á»£c chia thÃ nh nhiá»u yÃªu cáº§u Slice, cÃ³ thá»ƒ Ä‘Æ°á»£c hiá»ƒu lÃ  cÃ¡c lÃ¡t, má»—i Slice lÃ  Ä‘á»™c láº­p vÃ  song song, sá»­ dá»¥ng Scroll Ä‘á»ƒ xÃ¢y dá»±ng láº¡i hoáº·c duyá»‡t sáº½ nhanh hÆ¡n nhiá»u láº§n;</li>
<li>ThÃªm Profile API;</li>
<li>ThÃªm Rollover API;</li>
<li>ThÃªm Reindex;</li>
<li>Giá»›i thiá»‡u cÃ¡c loáº¡i trÆ°á»ng má»›i Text/Keyword Ä‘á»ƒ thay tháº¿ String;</li>
<li>Giá»›i háº¡n kÃ­ch thÆ°á»›c yÃªu cáº§u chá»‰ má»¥c Ä‘á»ƒ trÃ¡nh má»™t sá»‘ lÆ°á»£ng lá»›n yÃªu cáº§u Ä‘á»“ng thá»i lÃ m quÃ¡ táº£i ES;</li>
<li>Giá»›i háº¡n sá»‘ lÆ°á»£ng shard trong má»™t yÃªu cáº§u duy nháº¥t, máº·c Ä‘á»‹nh 1000.</li>
</ul>
</li>
</ul>
</li>
<li>NgÃ y 31 thÃ¡ng 8 nÄƒm 2017, phiÃªn báº£n <strong>6.0.0</strong> Ä‘Æ°á»£c phÃ¡t hÃ nh, vá»›i cÃ¡c tÃ­nh nÄƒng quan trá»ng sau:
<ul>
<li>Há»— trá»£ cho Doc Values thÆ°a thá»›t;
<ul>
<li>Index Sorting, tá»©c lÃ  sáº¯p xáº¿p á»Ÿ giai Ä‘oáº¡n láº­p chá»‰ má»¥c;</li>
</ul>
</li>
<li>Há»— trá»£ cho sá»‘ thá»© tá»±, má»—i hoáº¡t Ä‘á»™ng es cÃ³ má»™t sá»‘ thá»© tá»± (tÆ°Æ¡ng tá»± nhÆ° thiáº¿t káº¿ tÄƒng dáº§n);
<ul>
<li>NÃ¢ng cáº¥p cuá»™n mÆ°á»£t mÃ ;</li>
</ul>
</li>
<li>Báº¯t Ä‘áº§u tá»« 6.0, khÃ´ng há»— trá»£ nhiá»u loáº¡i trong má»™t index;
<ul>
<li>Index-template inheritance, káº¿ thá»«a phiÃªn báº£n index, hiá»‡n táº¡i cÃ¡c máº«u index Ä‘á»u Ä‘Æ°á»£c khá»›p vÃ  há»£p nháº¥t, Ä‘iá»u nÃ y cÃ³ thá»ƒ gÃ¢y ra má»™t sá»‘ váº¥n Ä‘á» xung Ä‘á»™t máº«u index, 6.0 sáº½ chá»‰ khá»›p má»™t, vÃ  index sáº½ Ä‘Æ°á»£c xÃ¡c minh khi táº¡o;</li>
<li>Load aware shard routing, Ä‘á»‹nh tuyáº¿n yÃªu cáº§u dá»±a trÃªn táº£i, cÃ¡c yÃªu cáº§u tÃ¬m kiáº¿m hiá»‡n táº¡i lÃ  toÃ n nÃºt polling, vÃ¬ váº­y nÃºt hoáº¡t Ä‘á»™ng cháº­m nháº¥t thÆ°á»ng gÃ¢y ra tÄƒng Ä‘á»™ trá»… tá»•ng thá»ƒ, cÃ¡ch thá»±c hiá»‡n má»›i sáº½ tá»± Ä‘á»™ng Ä‘iá»u chá»‰nh Ä‘á»™ dÃ i hÃ ng Ä‘á»£i dá»±a trÃªn thá»i gian tiÃªu thá»¥ cá»§a hÃ ng Ä‘á»£i, Ä‘á»™ dÃ i hÃ ng Ä‘á»£i cá»§a nÃºt táº£i cao sáº½ giáº£m, cho phÃ©p cÃ¡c nÃºt khÃ¡c chia sáº» Ã¡p lá»±c nhiá»u hÆ¡n, tÃ¬m kiáº¿m vÃ  chá»‰ má»¥c sáº½ dá»±a trÃªn cÆ¡ cháº¿ nÃ y;</li>
<li>CÃ¡c chá»‰ má»¥c Ä‘Ã£ Ä‘Ã³ng cÅ©ng sáº½ há»— trá»£ xá»­ lÃ½ tá»± Ä‘á»™ng cá»§a báº£n sao Ä‘á»ƒ Ä‘áº£m báº£o Ä‘á»™ tin cáº­y cá»§a dá»¯ liá»‡u.</li>
</ul>
</li>
</ul>
</li>
<li>NgÃ y 10 thÃ¡ng 4 nÄƒm 2019, phiÃªn báº£n <strong>7.0.0</strong> Ä‘Æ°á»£c phÃ¡t hÃ nh, vá»›i cÃ¡c tÃ­nh nÄƒng quan trá»ng sau:
<ul>
<li>Thay Ä‘á»•i káº¿t ná»‘i cá»¥m: TransportClient Ä‘Ã£ bá»‹ loáº¡i bá», mÃ£ java cá»§a es7 chá»‰ cÃ³ thá»ƒ sá»­ dá»¥ng restclient; Ä‘á»‘i vá»›i láº­p trÃ¬nh java, nÃªn sá»­ dá»¥ng High-level-rest-client Ä‘á»ƒ váº­n hÃ nh cá»¥m ES;
<ul>
<li>GÃ³i chÆ°Æ¡ng trÃ¬nh ES máº·c Ä‘á»‹nh Ä‘Ã³ng gÃ³i jdk: phiÃªn báº£n gÃ³i chÆ°Æ¡ng trÃ¬nh 7.x trá»Ÿ thÃ nh 300MB+, so vá»›i 6.x, gÃ³i lá»›n hÆ¡n 200MB+, Ä‘Ã¢y chÃ­nh lÃ  kÃ­ch thÆ°á»›c cá»§a JDK;</li>
<li>Sá»­ dá»¥ng Lucene 9.0;
<ul>
<li>ChÃ­nh thá»©c loáº¡i bá» há»— trá»£ cho nhiá»u Type dÆ°á»›i má»™t chá»‰ má»¥c duy nháº¥t, thá»i gian es6, chÃ­nh thá»©c Ä‘Ã£ nÃ³i ráº±ng es7 sáº½ xÃ³a type, vÃ  thá»i gian es6, Ä‘Ã£ quy Ä‘á»‹nh ráº±ng má»—i chá»‰ má»¥c chá»‰ cÃ³ thá»ƒ cÃ³ má»™t loáº¡i. Trong es7, sá»­ dá»¥ng _doc máº·c Ä‘á»‹nh nhÆ° lÃ  loáº¡i, chÃ­nh thá»©c nÃ³i trong phiÃªn báº£n 8.x sáº½ hoÃ n toÃ n loáº¡i bá» loáº¡i. PhÆ°Æ¡ng thá»©c yÃªu cáº§u API cÅ©ng gá»­i thay Ä‘á»•i, cháº³ng háº¡n nhÆ° láº¥y má»™t tÃ i liá»‡u cá»§a má»™t ID cá»¥ thá»ƒ cá»§a má»™t chá»‰ má»¥c: GET index/_doc/id nÆ¡i chá»‰ má»¥c vÃ  id lÃ  cÃ¡c giÃ¡ trá»‹ cá»¥ thá»ƒ;</li>
</ul>
</li>
</ul>
</li>
<li>Giá»›i thiá»‡u má»™t bá»™ cáº¯t máº¡ch bá»™ nhá»› thá»±c sá»±, cÃ³ thá»ƒ phÃ¡t hiá»‡n chÃ­nh xÃ¡c hÆ¡n cÃ¡c yÃªu cáº§u khÃ´ng thá»ƒ xá»­ lÃ½ vÃ  ngÄƒn chÃºng lÃ m cho má»™t nÃºt duy nháº¥t khÃ´ng á»•n Ä‘á»‹nh;
<ul>
<li>Zen2 lÃ  lá»›p Ä‘iá»u phá»‘i cá»¥m hoÃ n toÃ n má»›i cá»§a Elasticsearch, cáº£i thiá»‡n Ä‘á»™ tin cáº­y, hiá»‡u suáº¥t, vÃ  tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng, trá»Ÿ nÃªn nhanh hÆ¡n, an toÃ n hÆ¡n, vÃ  dá»… sá»­ dá»¥ng hÆ¡n.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2>CÃ¡c khÃ¡i niá»‡m vá» Elasticsearch</h2>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ khÃ¡i niá»‡m cá»‘t lÃµi cá»§a Elasticsearch. Hiá»ƒu rÃµ nhá»¯ng khÃ¡i niá»‡m nÃ y tá»« Ä‘áº§u sáº½ giÃºp báº¡n Ä‘Æ¡n giáº£n hÃ³a quÃ¡ trÃ¬nh há»c Elasticsearch.</p>
<h3>Gáº§n thá»i gian thá»±c (NRT)</h3>
<p>Elasticsearch lÃ  má»™t ná»n táº£ng tÃ¬m kiáº¿m gáº§n thá»i gian thá»±c. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  <strong>cÃ³ má»™t khoáº£ng trá»… nhá» (thÆ°á»ng lÃ  má»™t giÃ¢y) tá»« lÃºc láº­p chá»‰ má»¥c cho má»™t tÃ i liá»‡u cho Ä‘áº¿n khi tÃ i liá»‡u Ä‘Ã³ cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¬m kiáº¿m</strong>.</p>
<h3>Chá»‰ má»¥c (Index)</h3>
<p>Trong cÃ¡c ngá»¯ cáº£nh khÃ¡c nhau, "chá»‰ má»¥c" cÃ³ nhá»¯ng Ã½ nghÄ©a khÃ¡c nhau:</p>
<ul>
<li>Chá»‰ má»¥c (danh tá»«): Má»™t&nbsp;<strong>chá»‰ má»¥c</strong>&nbsp;tÆ°Æ¡ng tá»± nhÆ° má»™t&nbsp;<strong>cÆ¡ sá»Ÿ dá»¯ liá»‡u</strong>trong cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡ truyá»n thá»‘ng, lÃ  má»™t nÆ¡i chá»©a cÃ¡c tÃ i liá»‡u dáº¡ng quan há»‡. Chá»‰ má»¥c thá»±c cháº¥t lÃ  má»™t&nbsp;<strong>khÃ´ng gian tÃªn logic</strong>&nbsp;trá» Ä‘áº¿n má»™t hoáº·c nhiá»u&nbsp;<strong>phÃ¢n Ä‘oáº¡n váº­t lÃ½</strong>.</li>
<li>Chá»‰ má»¥c (Ä‘á»™ng tá»«): Chá»‰ má»¥c má»™t tÃ i liá»‡u cÃ³ nghÄ©a lÃ  lÆ°u trá»¯ má»™t tÃ i liá»‡u vÃ o má»™t&nbsp;<em>chá»‰ má»¥c</em>&nbsp;(danh tá»«) Ä‘á»ƒ cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¬m kiáº¿m vÃ  truy váº¥n. Äiá»u nÃ y ráº¥t giá»‘ng vá»›i tá»« khÃ³a&nbsp;<code>INSERT</code>&nbsp;trong SQL, ngoáº¡i trá»« khi tÃ i liá»‡u Ä‘Ã£ tá»“n táº¡i, tÃ i liá»‡u má»›i sáº½ thay tháº¿ tÃ i liá»‡u cÅ©.</li>
<li>Chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c : CÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡ tÄƒng tá»‘c Ä‘á»™ truy váº¥n dá»¯ liá»‡u báº±ng cÃ¡ch thÃªm má»™t chá»‰ má»¥c, cháº³ng háº¡n nhÆ° má»™t chá»‰ má»¥c cÃ¢y B, vÃ o cÃ¡c cá»™t Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh. Elasticsearch vÃ  Lucene sá»­ dá»¥ng má»™t cáº¥u trÃºc gá»i lÃ &nbsp;<strong>chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c</strong>&nbsp;Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c má»¥c Ä‘Ã­ch tÆ°Æ¡ng tá»±.</li>
</ul>
<p>Chá»‰ má»¥c cá»§a Mapping vÃ  Setting</p>
<ul>
<li><strong><code>Mapping</code></strong>&nbsp;xÃ¡c Ä‘á»‹nh kiá»ƒu cá»§a cÃ¡c trÆ°á»ng tÃ i liá»‡u</li>
<li><strong><code>Setting</code></strong>&nbsp;xÃ¡c Ä‘á»‹nh phÃ¢n phá»‘i dá»¯ liá»‡u khÃ¡c nhau</li>
</ul>
<p>VÃ­ dá»¥:</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "settings"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">...</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> any</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> settings</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> ...</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "mappings"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        "type_one"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">...</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> any</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> mappings</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> ...</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        "type_two"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">...</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> any</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> mappings</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> ...</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">        ...</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>Chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c</h4>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240223160504.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<h4>index template</h4>
<p><strong><code>index template</code></strong> (máº«u chá»‰ má»¥c) giÃºp ngÆ°á»i dÃ¹ng Ä‘áº·t Mapping vÃ  Setting, vÃ  tá»± Ä‘á»™ng khá»›p chÃºng vá»›i chá»‰ má»¥c má»›i Ä‘Æ°á»£c táº¡o theo má»™t quy táº¯c nháº¥t Ä‘á»‹nh.</p>
<ul>
<li>Máº«u chá»‰ cÃ³ hiá»‡u lá»±c khi má»™t chá»‰ má»¥c Ä‘Æ°á»£c táº¡o. Viá»‡c sá»­a Ä‘á»•i máº«u sáº½ khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n cÃ¡c chá»‰ má»¥c Ä‘Ã£ táº¡o.</li>
<li>Báº¡n cÃ³ thá»ƒ Ä‘áº·t nhiá»u máº«u chá»‰ má»¥c, cÃ¡c thiáº¿t láº­p nÃ y sáº½ Ä‘Æ°á»£c káº¿t há»£p láº¡i vá»›i nhau.</li>
<li>Báº¡n cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh giÃ¡ trá»‹ order Ä‘á»ƒ kiá»ƒm soÃ¡t quÃ¡ trÃ¬nh káº¿t há»£p.</li>
</ul>
<p>Khi táº¡o má»›i má»™t chá»‰ má»¥c:</p>
<ul>
<li>Ãp dá»¥ng Mapping vÃ  Setting máº·c Ä‘á»‹nh cá»§a ES</li>
<li>Ãp dá»¥ng cÃ¡c thiáº¿t láº­p trong máº«u chá»‰ má»¥c cÃ³ giÃ¡ trá»‹ order tháº¥p</li>
<li>Ãp dá»¥ng cÃ¡c thiáº¿t láº­p trong máº«u chá»‰ má»¥c cÃ³ giÃ¡ trá»‹ order cao, cÃ¡c thiáº¿t láº­p trÆ°á»›c Ä‘Ã³ sáº½ bá»‹ ghi Ä‘Ã¨</li>
<li>Ãp dá»¥ng Mapping vÃ  Setting Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh bá»Ÿi ngÆ°á»i dÃ¹ng khi táº¡o chá»‰ má»¥c, vÃ  ghi Ä‘Ã¨ cÃ¡c thiáº¿t láº­p trong máº«u trÆ°á»›c Ä‘Ã³.</li>
</ul>
<p>VÃ­ dá»¥: Táº¡o máº«u chá»‰ má»¥c máº·c Ä‘á»‹nh</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> _template/template_default</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "index_patterns"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span><span style="color:#98C379;--shiki-dark:#98C379">"*"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "order"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 0,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "version"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 1,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "settings"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "number_of_shards"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 1,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "number_of_replicas"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> /_template/template_test</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "index_patterns"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span><span style="color:#98C379;--shiki-dark:#98C379">"test*"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "order"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 1,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "settings"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "number_of_shards"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 1,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "number_of_replicas"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "mappings"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "date_detection"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span><span style="color:#98C379;--shiki-dark:#98C379">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "numeric_detection"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Kiá»ƒm tra máº«u chá»‰ má»¥c</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_template/template_default</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_template/temp</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">*</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Ghi dá»¯ liá»‡u má»›i, chá»‰ má»¥c báº¯t Ä‘áº§u báº±ng test</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> testtemplate/_doc/1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "someNumber"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "1",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "someDate"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "2019/01/01"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> testtemplate/_mapping</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> testtemplate/_settings</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> testmy</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"settings"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">		"number_of_replicas"</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">:5</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">	}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> testmy/_doc/1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "key"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "value"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> testmy/_settings</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> testmy</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> /_template/template_default</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> /_template/template_test</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>dynamic template</h4>
<ul>
<li>Dá»±a vÃ o kiá»ƒu dá»¯ liá»‡u Ä‘Æ°á»£c ES nháº­n biáº¿t, káº¿t há»£p vá»›i tÃªn trÆ°á»ng, Ä‘á»ƒ Ä‘áº·t Ä‘á»™ng kiá»ƒu trÆ°á»ng:
<ul>
<li>Táº¥t cáº£ cÃ¡c kiá»ƒu chuá»—i Ä‘á»u Ä‘Æ°á»£c Ä‘áº·t thÃ nh Keyword, hoáº·c táº¯t trÆ°á»ng keyword.</li>
<li>CÃ¡c trÆ°á»ng báº¯t Ä‘áº§u báº±ng "is" Ä‘á»u Ä‘Æ°á»£c Ä‘áº·t thÃ nh boolean.</li>
<li>CÃ¡c trÆ°á»ng báº¯t Ä‘áº§u báº±ng "long_" Ä‘á»u Ä‘Æ°á»£c Ä‘áº·t thÃ nh kiá»ƒu long.</li>
</ul>
</li>
<li>Máº«u Ä‘á»™ng Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong Mapping cá»§a má»™t chá»‰ má»¥c.</li>
<li>Máº«u cÃ³ má»™t tÃªn.</li>
<li>Quy táº¯c khá»›p lÃ  má»™t máº£ng.</li>
<li>Äáº·t Mapping cho cÃ¡c trÆ°á»ng khá»›p.</li>
</ul>
<p>VÃ­ dá»¥:</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#Dynaminc Mapping dá»±a trÃªn kiá»ƒu vÃ  tÃªn trÆ°á»ng</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> my_index</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> my_index/_doc/1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "firstName"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "Ruan",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "isVIP"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "true"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> my_index/_mapping</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> my_index</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> my_index</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "mappings"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "dynamic_templates"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "strings_as_boolean"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "match_mapping_type"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "string",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "match"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "is*",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "mapping"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "type"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "boolean"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">          }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "strings_as_keywords"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "match_mapping_type"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "string",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "mapping"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "type"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "keyword"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">          }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> my_index/_mapping</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> my_index</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#Káº¿t há»£p vá»›i Ä‘Æ°á»ng dáº«n</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> my_index</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "mappings"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "dynamic_templates"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "full_name"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "path_match"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "name.*",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "path_unmatch"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "*.middle",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "mapping"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "type"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "text",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "copy_to"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "full_name"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">          }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> my_index/_mapping</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> my_index/_doc/1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "name"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "first"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "John",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "middle"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "Winston",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "last"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "Lennon"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> my_index/_search?q=full_name:John</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> my_index</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3><s>Kiá»ƒu (Type)</s></h3>
<p><s>Kiá»ƒu lÃ  má»™t phÃ¢n loáº¡i hay phÃ¢n vÃ¹ng theo Ã½ nghÄ©a logic, cho phÃ©p táº¡o nhiá»u loáº¡i trong cÃ¹ng má»™t chá»‰ má»¥c. Báº£n cháº¥t, nÃ³ tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i má»™t Ä‘iá»u kiá»‡n lá»c, cÃ¡c phiÃªn báº£n cao hÆ¡n sáº½ loáº¡i bá» khÃ¡i niá»‡m loáº¡i.</s></p>
<blockquote>
<p><s><strong>Tá»« phiÃªn báº£n 6.0.0 trá»Ÿ Ä‘i, loáº¡i Ä‘Ã£ bá»‹ loáº¡i bá»</strong></s></p>
</blockquote>
<h3>TÃ i liá»‡u (Document)</h3>
<p>Elasticsearch lÃ  hÆ°á»›ng tá»›i tÃ i liá»‡u, <strong>tÃ i liá»‡u lÃ  Ä‘Æ¡n vá»‹ nhá» nháº¥t cá»§a táº¥t cáº£ dá»¯ liá»‡u cÃ³ thá»ƒ tÃ¬m kiáº¿m</strong>.</p>
<p>Elasticsearch sá»­ dá»¥ng <a href="http://en.wikipedia.org/wiki/Json" target="_blank" rel="noopener noreferrer"><em>JSON</em></a> lÃ m Ä‘á»‹nh dáº¡ng tuáº§n tá»± hÃ³a cho tÃ i liá»‡u.</p>
<p>Trong chá»‰ má»¥c/loáº¡i, báº¡n cÃ³ thá»ƒ lÆ°u trá»¯ báº¥t ká»³ sá»‘ lÆ°á»£ng tÃ i liá»‡u nÃ o theo nhu cáº§u.</p>
<p>Má»—i tÃ i liá»‡u Ä‘á»u cÃ³ má»™t <strong>ID duy nháº¥t</strong></p>
<ul>
<li>NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ tá»± chá»‰ Ä‘á»‹nh</li>
<li>Hoáº·c Ä‘Æ°á»£c Elasticsearch tá»± Ä‘á»™ng táº¡o</li>
</ul>
<h4>Metadata cá»§a tÃ i liá»‡u</h4>
<p>Má»™t tÃ i liá»‡u khÃ´ng chá»‰ chá»©a dá»¯ liá»‡u cá»§a nÃ³, mÃ  cÃ²n chá»©a <strong>metadata</strong> - thÃ´ng tin vá» tÃ i liá»‡u.</p>
<ul>
<li><code>_index</code>: TÃ i liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ á»Ÿ Ä‘Ã¢u</li>
<li><code>_type</code>: Loáº¡i Ä‘á»‘i tÆ°á»£ng mÃ  tÃ i liá»‡u Ä‘áº¡i diá»‡n</li>
<li><code>_id</code>: Äá»‹nh danh duy nháº¥t cá»§a tÃ i liá»‡u</li>
<li><code>_source</code>: Dá»¯ liá»‡u Json gá»‘c cá»§a tÃ i liá»‡u</li>
<li><code>_all</code>: TÃ­ch há»£p táº¥t cáº£ ná»™i dung cá»§a cÃ¡c trÆ°á»ng vÃ o trÆ°á»ng nÃ y, Ä‘Ã£ bá»‹ loáº¡i bá»</li>
<li><code>_version</code>: ThÃ´ng tin phiÃªn báº£n cá»§a tÃ i liá»‡u</li>
<li><code>_score</code>: Äiá»ƒm liÃªn quan</li>
</ul>
<p>VÃ­ dá»¥:</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_index"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"megacorp"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_type"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"employee"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_version"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "found"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_source"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "first_name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"John"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "last_name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Smith"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "age"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">25</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "about"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"I love to go rock climbing"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "interests"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">"sports"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"music"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3>NÃºt (Node)</h3>
<h4>Giá»›i thiá»‡u vá» nÃºt</h4>
<p>Má»™t thá»±c thá»ƒ Elasticsearch Ä‘ang cháº¡y Ä‘Æ°á»£c gá»i lÃ  má»™t <strong>nÃºt</strong>.</p>
<p>Thá»±c thá»ƒ Elasticsearch vá» cÆ¡ báº£n lÃ  má»™t tiáº¿n trÃ¬nh Java. Má»™t mÃ¡y cÃ³ thá»ƒ cháº¡y nhiá»u tiáº¿n trÃ¬nh Elasticsearch, nhÆ°ng mÃ´i trÆ°á»ng product nÃªn cháº¡y má»™t tiáº¿n trÃ¬nh Elasticsearch trÃªn má»™t mÃ¡y.</p>
<p>Má»—i nÃºt Ä‘á»u cÃ³ tÃªn, Ä‘Æ°á»£c cáº¥u hÃ¬nh thÃ´ng qua tá»‡p cáº¥u hÃ¬nh, hoáº·c chá»‰ Ä‘á»‹nh khi khá»Ÿi Ä‘á»™ng thÃ´ng qua <code>-E node.name=node1</code>.</p>
<p>Sau khi má»—i nÃºt khá»Ÿi Ä‘á»™ng, nÃ³ sáº½ Ä‘Æ°á»£c gÃ¡n má»™t UID, Ä‘Æ°á»£c lÆ°u trong thÆ° má»¥c <code>data</code>.</p>
<h4>Loáº¡i nÃºt</h4>
<ul>
<li><strong>NÃºt chÃ­nh (master node)</strong>: Má»—i nÃºt Ä‘á»u lÆ°u trá»¯ tráº¡ng thÃ¡i cá»§a cá»¥m, chá»‰ cÃ³ nÃºt chÃ­nh má»›i cÃ³ thá»ƒ sá»­a Ä‘á»•i thÃ´ng tin tráº¡ng thÃ¡i cá»§a cá»¥m (Ä‘áº£m báº£o tÃ­nh nháº¥t quÃ¡n cá»§a dá»¯ liá»‡u). <strong>Tráº¡ng thÃ¡i cá»¥m</strong> duy trÃ¬ thÃ´ng tin sau:
<ul>
<li>ThÃ´ng tin vá» táº¥t cáº£ cÃ¡c nÃºt</li>
<li>Táº¥t cáº£ cÃ¡c chá»‰ má»¥c vÃ  thÃ´ng tin liÃªn quan Ä‘áº¿n mapping vÃ  setting</li>
<li>ThÃ´ng tin Ä‘á»‹nh tuyáº¿n phÃ¢n Ä‘oáº¡n</li>
</ul>
</li>
<li><strong>NÃºt á»©ng cá»­ (master eligible node)</strong>: NÃºt á»©ng cá»­ cÃ³ thá»ƒ tham gia vÃ o quÃ¡ trÃ¬nh báº§u chá»n chÃ­nh. NÃºt khá»Ÿi Ä‘á»™ng Ä‘áº§u tiÃªn sáº½ tá»± báº§u lÃ m nÃºt chÃ­nh.
<ul>
<li>Sau khi má»—i nÃºt khá»Ÿi Ä‘á»™ng, máº·c Ä‘á»‹nh lÃ  nÃºt á»©ng cá»­, cÃ³ thá»ƒ bá»‹ cáº¥m thÃ´ng qua cáº¥u hÃ¬nh <code>node.master: false</code></li>
</ul>
</li>
<li><strong>NÃºt dá»¯ liá»‡u (data node)</strong>: Chá»‹u trÃ¡ch nhiá»‡m lÆ°u trá»¯ dá»¯ liá»‡u phÃ¢n Ä‘oáº¡n.</li>
<li><strong>NÃºt Ä‘iá»u phá»‘i (coordinating node)</strong>: Chá»‹u trÃ¡ch nhiá»‡m nháº­n yÃªu cáº§u tá»« khÃ¡ch hÃ ng, phÃ¢n phá»‘i yÃªu cáº§u Ä‘áº¿n nÃºt thÃ­ch há»£p, cuá»‘i cÃ¹ng tá»•ng há»£p káº¿t quáº£ láº¡i vá»›i nhau. Má»—i nÃºt Elasticsearch máº·c Ä‘á»‹nh Ä‘á»u lÃ  nÃºt Ä‘iá»u phá»‘i (coordinating node).</li>
<li><strong>NÃºt láº¡nh/nÃ³ng (warm/hot node)</strong>: DÃ nh cho cÃ¡c nÃºt dá»¯ liá»‡u (data node) vá»›i cáº¥u hÃ¬nh pháº§n cá»©ng khÃ¡c nhau, Ä‘á»ƒ thá»±c hiá»‡n kiáº¿n trÃºc Hot &amp; Warm, giáº£m chi phÃ­ triá»ƒn khai cá»¥m.</li>
<li><strong>NÃºt há»c mÃ¡y (machine learning node)</strong>: Chá»‹u trÃ¡ch nhiá»‡m thá»±c hiá»‡n cÃ´ng viá»‡c há»c mÃ¡y, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ phÃ¡t hiá»‡n báº¥t thÆ°á»ng.</li>
</ul>
<h4>Cáº¥u hÃ¬nh nÃºt</h4>
<p>| Tham sá»‘ cáº¥u hÃ¬nh | GiÃ¡ trá»‹ máº·c Ä‘á»‹nh | Giáº£i thÃ­ch                               |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240223160504.png" type="image/png"/>
    </item>
    <item>
      <title>Elasticsearch Mapping</title>
      <link>https://vanhung4499.github.io/database/elasticsearch/mapping.html</link>
      <guid>https://vanhung4499.github.io/database/elasticsearch/mapping.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elasticsearch Mapping</source>
      <description>Elasticsearch Mapping Trong Elasticsearch, Mapping (Ã¡nh xáº¡) Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh cÃ¡ch má»™t tÃ i liá»‡u cÃ¹ng vá»›i cÃ¡c trÆ°á»ng bÃªn trong nÃ³ Ä‘Æ°á»£c lÆ°u trá»¯ vÃ  láº­p chá»‰ má»¥c. Mapping cho ...</description>
      <category>elasticssearch</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Trong Elasticsearch, <strong><code>Mapping</code></strong> (Ã¡nh xáº¡) Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh cÃ¡ch má»™t tÃ i liá»‡u cÃ¹ng vá»›i cÃ¡c trÆ°á»ng bÃªn trong nÃ³ Ä‘Æ°á»£c lÆ°u trá»¯ vÃ  láº­p chá»‰ má»¥c. Mapping cho phÃ©p báº¡n xÃ¡c Ä‘á»‹nh trÆ°á»›c cÃ¡c thuá»™c tÃ­nh nhÆ° kiá»ƒu dá»¯ liá»‡u cá»§a cÃ¡c trÆ°á»ng, trá»ng sá»‘ cá»§a cÃ¡c trÆ°á»ng, bá»™ phÃ¢n tÃ­ch tá»« vÃ  cÃ¡c thuá»™c tÃ­nh khÃ¡c, giá»‘ng nhÆ° viá»‡c thiáº¿t láº­p cÃ¡c trÆ°á»ng khi táº¡o báº£ng trong cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡.</p>
<p>Mapping sáº½ Ã¡nh xáº¡ tÃ i liá»‡u JSON thÃ nh Ä‘á»‹nh dáº¡ng pháº³ng mÃ  Lucene cáº§n.</p>
<p>Má»—i Mapping thuá»™c vá» má»™t Type cá»§a chá»‰ má»¥c.</p>
<ul>
<li>Má»—i tÃ i liá»‡u Ä‘á»u thuá»™c vá» má»™t Type.</li>
<li>Má»™t Type cÃ³ má»™t Ä‘á»‹nh nghÄ©a Mapping.</li>
<li>Tá»« phiÃªn báº£n 7.0 trá»Ÿ Ä‘i, khÃ´ng cáº§n pháº£i chá»‰ Ä‘á»‹nh thÃ´ng tin type trong Ä‘á»‹nh nghÄ©a Mapping.</li>
</ul>
<p>Má»—i <code>document</code> lÃ  má»™t táº­p há»£p cá»§a <code>field</code>, má»—i <code>field</code> Ä‘á»u cÃ³ kiá»ƒu dá»¯ liá»‡u cá»§a riÃªng nÃ³. Khi Ã¡nh xáº¡ dá»¯ liá»‡u, báº¡n cÃ³ thá»ƒ táº¡o má»™t <code>mapping</code> chá»©a danh sÃ¡ch <code>field</code> liÃªn quan Ä‘áº¿n <code>document</code>. Äá»‹nh nghÄ©a Ã¡nh xáº¡ cÅ©ng bao gá»“m cÃ¡c <code>field</code> metadata, nhÆ° <code>_source</code>, nÃ³ tÃ¹y chá»‰nh cÃ¡ch xá»­ lÃ½ metadata liÃªn quan Ä‘áº¿n <code>document</code>.</p>
<h2>CÃ¡ch Ã¡nh xáº¡</h2>
<p>Trong Elasticsearch, Ã¡nh xáº¡ cÃ³ thá»ƒ Ä‘Æ°á»£c chia thÃ nh Ã¡nh xáº¡ tÄ©nh vÃ  Ã¡nh xáº¡ Ä‘á»™ng. Trong cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡, trÆ°á»›c khi ghi dá»¯ liá»‡u, báº¡n cáº§n táº¡o báº£ng vÃ  khai bÃ¡o thuá»™c tÃ­nh cá»§a cÃ¡c trÆ°á»ng trong cÃ¢u lá»‡nh táº¡o báº£ng. Tuy nhiÃªn, trong Elasticsearch, Ä‘iá»u nÃ y khÃ´ng cáº§n thiáº¿t. Má»™t trong nhá»¯ng tÃ­nh nÄƒng quan trá»ng nháº¥t cá»§a Elasticsearch lÃ  cho phÃ©p báº¡n báº¯t Ä‘áº§u khÃ¡m phÃ¡ dá»¯ liá»‡u cÃ ng nhanh cÃ ng tá»‘t. Khi tÃ i liá»‡u Ä‘Æ°á»£c ghi vÃ o Elasticsearch, nÃ³ sáº½ tá»± Ä‘á»™ng nháº­n biáº¿t kiá»ƒu dá»¯ liá»‡u cá»§a cÃ¡c trÆ°á»ng. CÆ¡ cháº¿ nÃ y Ä‘Æ°á»£c gá»i lÃ  <strong>Ã¡nh xáº¡ Ä‘á»™ng</strong>. Trong khi Ä‘Ã³, <strong>Ã¡nh xáº¡ tÄ©nh</strong> lÃ  viá»‡c thiáº¿t láº­p thuá»™c tÃ­nh cá»§a cÃ¡c trÆ°á»ng trÆ°á»›c khi ghi dá»¯ liá»‡u.</p>
<h3>Ãnh xáº¡ tÄ©nh</h3>
<p>ES gá»i Ã¡nh xáº¡ tÄ©nh lÃ  <strong>Ã¡nh xáº¡ rÃµ rÃ ng (<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/explicit-mapping.html" target="_blank" rel="noopener noreferrer">Explicit mapping</a>)</strong>. <strong>Ãnh xáº¡ tÄ©nh</strong> lÃ  viá»‡c chá»‰ Ä‘á»‹nh rÃµ rÃ ng Ã¡nh xáº¡ chá»‰ má»¥c khi táº¡o chá»‰ má»¥c. Ãnh xáº¡ tÄ©nh tÆ°Æ¡ng tá»± nhÆ° viá»‡c chá»‰ Ä‘á»‹nh thuá»™c tÃ­nh trÆ°á»ng trong cÃ¢u lá»‡nh táº¡o báº£ng trong SQL. So vá»›i Ã¡nh xáº¡ Ä‘á»™ng, thÃ´ng qua Ã¡nh xáº¡ tÄ©nh, báº¡n cÃ³ thá»ƒ thÃªm cÃ¡c thÃ´ng tin cáº¥u hÃ¬nh chi tiáº¿t vÃ  chÃ­nh xÃ¡c hÆ¡n. VÃ­ dá»¥:</p>
<ul>
<li>Nhá»¯ng trÆ°á»ng chuá»—i nÃ o nÃªn Ä‘Æ°á»£c coi lÃ  trÆ°á»ng toÃ n vÄƒn báº£n.</li>
<li>Nhá»¯ng trÆ°á»ng nÃ o chá»©a sá»‘, ngÃ y hoáº·c vá»‹ trÃ­ Ä‘á»‹a lÃ½.</li>
<li>Äá»‹nh dáº¡ng cá»§a giÃ¡ trá»‹ ngÃ y.</li>
<li>CÃ¡c quy táº¯c tÃ¹y chá»‰nh Ä‘á»ƒ kiá»ƒm soÃ¡t viá»‡c thÃªm trÆ°á»ng Ä‘á»™ng.</li>
</ul>
<p>ã€VÃ­ dá»¥ã€‘Khi táº¡o chá»‰ má»¥c, chá»‰ Ä‘á»‹nh rÃµ rÃ ng mapping</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">PUT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> /</span><span style="color:#E06C75;--shiki-dark:#E06C75">my</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#D19A66;--shiki-dark:#D19A66">000001</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  "mappings"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    "properties"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">      "age"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:    { </span><span style="color:#98C379;--shiki-dark:#98C379">"type"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"integer"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">      "email"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:  { </span><span style="color:#98C379;--shiki-dark:#98C379">"type"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"keyword"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">      "name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:   { </span><span style="color:#98C379;--shiki-dark:#98C379">"type"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"text"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>ã€VÃ­ dá»¥ã€‘Trong chá»‰ má»¥c Ä‘Ã£ tá»“n táº¡i, chá»‰ Ä‘á»‹nh thuá»™c tÃ­nh cá»§a má»™t trÆ°á»ng</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">PUT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> /</span><span style="color:#E06C75;--shiki-dark:#E06C75">my</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#D19A66;--shiki-dark:#D19A66">000001</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">/</span><span style="color:#E06C75;--shiki-dark:#E06C75">_mapping</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  "properties"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    "employee-id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">      "type"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"keyword"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">      "index"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>ã€VÃ­ dá»¥ã€‘Xem mapping</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET /my-index-000001/_mapping</span></span></code></pre>
</div><p>ã€VÃ­ dá»¥ã€‘Xem mapping cá»§a má»™t trÆ°á»ng cá»¥ thá»ƒ</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET /my-index-000001/_mapping/field/employee-id</span></span></code></pre>
</div><h3>Ãnh xáº¡ Ä‘á»™ng</h3>
<p>CÆ¡ cháº¿ Ã¡nh xáº¡ Ä‘á»™ng cho phÃ©p ngÆ°á»i dÃ¹ng khÃ´ng cáº§n Ä‘á»‹nh nghÄ©a thá»§ cÃ´ng Ã¡nh xáº¡, Elasticsearch sáº½ tá»± Ä‘á»™ng nháº­n biáº¿t kiá»ƒu dá»¯ liá»‡u cá»§a cÃ¡c trÆ°á»ng. Trong cÃ¡c dá»± Ã¡n thá»±c táº¿, náº¿u Ä‘á»‘i tÃ¡c khÃ´ng biáº¿t trÆ°á»›c cÃ¡c trÆ°á»ng nÃ o sáº½ xuáº¥t hiá»‡n trong dá»¯ liá»‡u Ä‘Æ°á»£c nháº­p vÃ o, hoáº·c khÃ´ng rÃµ kiá»ƒu dá»¯ liá»‡u cá»§a cÃ¡c trÆ°á»ng, viá»‡c sá»­ dá»¥ng Ã¡nh xáº¡ Ä‘á»™ng sáº½ ráº¥t phÃ¹ há»£p. Khi Elasticsearch gáº·p má»™t trÆ°á»ng chÆ°a tá»«ng tháº¥y trÆ°á»›c Ä‘Ã³ trong má»™t tÃ i liá»‡u, nÃ³ sáº½ sá»­ dá»¥ng Ã¡nh xáº¡ Ä‘á»™ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh kiá»ƒu cá»§a trÆ°á»ng vÃ  tá»± Ä‘á»™ng thÃªm trÆ°á»ng Ä‘Ã³ vÃ o Ã¡nh xáº¡.</p>
<p>VÃ­ dá»¥: Táº¡o má»™t chá»‰ má»¥c tÃªn lÃ  <code>data</code>, vá»›i kiá»ƒu <code>mapping</code> lÃ  <code>_doc</code>, vÃ  cÃ³ má»™t trÆ°á»ng kiá»ƒu <code>long</code> tÃªn <code>count</code>.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> data/_doc/1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"count"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 5</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span></code></pre>
</div><h4>Ãnh xáº¡ Ä‘á»™ng trÆ°á»ng</h4>
<p>Ãnh xáº¡ Ä‘á»™ng trÆ°á»ng (<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/dynamic-field-mapping.html" target="_blank" rel="noopener noreferrer">Dynamic field mappings</a>) lÃ  quy táº¯c Ä‘á»ƒ quáº£n lÃ½ viá»‡c phÃ¡t hiá»‡n trÆ°á»ng Ä‘á»™ng. Khi Elasticsearch phÃ¡t hiá»‡n má»™t trÆ°á»ng má»›i trong má»™t tÃ i liá»‡u, theo máº·c Ä‘á»‹nh, nÃ³ sáº½ tá»± Ä‘á»™ng thÃªm trÆ°á»ng Ä‘Ã³ vÃ o Ã¡nh xáº¡ kiá»ƒu.</p>
<p>Trong Ã¡nh xáº¡, báº¡n cÃ³ thá»ƒ má»Ÿ Ã¡nh xáº¡ Ä‘á»™ng báº±ng cÃ¡ch Ä‘áº·t tham sá»‘ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/dynamic.html" target="_blank" rel="noopener noreferrer"><code>dynamic</code></a> thÃ nh <code>true</code> hoáº·c <code>runtime</code>.</p>
<p>CÃ¡c tÃ¹y chá»n khÃ¡c nhau cá»§a tham sá»‘ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/dynamic.html" target="_blank" rel="noopener noreferrer"><code>dynamic</code></a> cÃ³ cÃ¡c chá»©c nÄƒng nhÆ° sau:</p>
<p>| GiÃ¡ trá»‹ lá»±a chá»n | MÃ´ táº£ |<br>
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>Elasticsearch Operation</title>
      <link>https://vanhung4499.github.io/database/elasticsearch/operation.html</link>
      <guid>https://vanhung4499.github.io/database/elasticsearch/operation.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elasticsearch Operation</source>
      <description>Elasticsearch Operation Elasticsearch lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch dá»¯ liá»‡u phÃ¢n tÃ¡n, há»— trá»£ RESTful, cÃ³ kháº£ nÄƒng giáº£i quyáº¿t má»™t sá»‘ lÆ°á»£ng ngÃ y cÃ ng tÄƒng cÃ¡c trÆ°á»ng há»£p sá»­...</description>
      <category>elasticssearch</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p><a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch</a> lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch dá»¯ liá»‡u phÃ¢n tÃ¡n, há»— trá»£ RESTful, cÃ³ kháº£ nÄƒng giáº£i quyáº¿t má»™t sá»‘ lÆ°á»£ng ngÃ y cÃ ng tÄƒng cÃ¡c trÆ°á»ng há»£p sá»­ dá»¥ng. LÃ  trung tÃ¢m cá»§a Elastic Stack, nÃ³ lÆ°u trá»¯ dá»¯ liá»‡u cá»§a báº¡n táº­p trung Ä‘á»ƒ tÃ¬m kiáº¿m nhanh chÃ³ng, tinh chá»‰nh Ä‘á»™ liÃªn quan, vÃ  phÃ¢n tÃ­ch máº¡nh máº½ cÃ³ thá»ƒ má»Ÿ rá»™ng dá»… dÃ ng.</p>
</blockquote>
<h2>CÃ i Ä‘áº·t Elasticsearch</h2>
<blockquote>
<p><a href="https://www.elastic.co/cn/downloads/elasticsearch" target="_blank" rel="noopener noreferrer">HÆ°á»›ng dáº«n táº£i vÃ  cÃ i Ä‘áº·t chÃ­nh thá»©c cá»§a Elasticsearch</a></p>
</blockquote>
<p>(1) Táº£i vÃ  giáº£i nÃ©n</p>
<p>Truy cáº­p <a href="https://www.elastic.co/cn/downloads/elasticsearch" target="_blank" rel="noopener noreferrer">Ä‘á»‹a chá»‰ táº£i chÃ­nh thá»©c</a>, chá»n phiÃªn báº£n cáº§n thiáº¿t, táº£i vÃ  giáº£i nÃ©n vá» mÃ¡y cá»§a báº¡n.</p>
<p>(2) Cháº¡y</p>
<p>Cháº¡y <code>bin/elasticsearch</code> (TrÃªn há»‡ thá»‘ng Windows, cháº¡y <code>bin\elasticsearch.bat</code>)</p>
<p>(3) Truy cáº­p</p>
<p>Thá»±c hiá»‡n <code>curl http://localhost:9200/</code> Ä‘á»ƒ kiá»ƒm tra xem dá»‹ch vá»¥ Ä‘Ã£ khá»Ÿi Ä‘á»™ng chÆ°a</p>
<h2>Láº­p káº¿ hoáº¡ch cho Cluster Elasticsearch</h2>
<p>Cluster Elasticsearch cáº§n Ä‘Æ°á»£c láº­p káº¿ hoáº¡ch má»™t cÃ¡ch há»£p lÃ½ dá»±a trÃªn tÃ¬nh hÃ¬nh thá»±c táº¿ cá»§a doanh nghiá»‡p.</p>
<p>CÃ¡c Ä‘iá»ƒm cáº§n xem xÃ©t:</p>
<ul>
<li>Cáº§n triá»ƒn khai bao nhiÃªu node trong cluster?</li>
<li>CÃ³ bao nhiÃªu index?</li>
<li>Má»—i index cÃ³ bao nhiÃªu dá»¯ liá»‡u?</li>
<li>Má»—i index cÃ³ bao nhiÃªu shard?</li>
</ul>
<p>Má»™t káº¿ hoáº¡ch tham kháº£o:</p>
<ul>
<li>3 mÃ¡y, má»—i mÃ¡y lÃ  6-core 64G.</li>
<li>TÄƒng hÃ ng ngÃ y cá»§a cluster ES cá»§a chÃºng tÃ´i lÃ  khoáº£ng 20 triá»‡u báº£n ghi, dá»¯ liá»‡u tÄƒng hÃ ng ngÃ y lÃ  khoáº£ng 500MB, dá»¯ liá»‡u tÄƒng hÃ ng thÃ¡ng lÃ  khoáº£ng 600 triá»‡u, 15G. Há»‡ thá»‘ng Ä‘Ã£ hoáº¡t Ä‘á»™ng trong vÃ i thÃ¡ng, vÃ  bÃ¢y giá» tá»•ng lÆ°á»£ng dá»¯ liá»‡u trong cluster ES lÃ  khoáº£ng 100G.</li>
<li>Hiá»‡n táº¡i cÃ³ 5 index trá»±c tuyáº¿n (Ä‘iá»u nÃ y Ä‘Æ°á»£c káº¿t há»£p vá»›i doanh nghiá»‡p cá»§a báº¡n, xem dá»¯ liá»‡u nÃ o cá»§a báº¡n cÃ³ thá»ƒ Ä‘áº·t trong ES), má»—i index cÃ³ khá»‘i lÆ°á»£ng dá»¯ liá»‡u lÃ  khoáº£ng 20G, vÃ¬ váº­y trong khá»‘i lÆ°á»£ng dá»¯ liá»‡u nÃ y, chÃºng tÃ´i phÃ¢n bá»• 8 shard cho má»—i index, Ä‘Ã³ lÃ  3 shard nhiá»u hÆ¡n máº·c Ä‘á»‹nh lÃ  5 shard.</li>
</ul>
<h2>Cáº¥u hÃ¬nh Elasticsearch</h2>
<p>Tá»‡p cáº¥u hÃ¬nh máº·c Ä‘á»‹nh cá»§a ES lÃ  <code>config/elasticsearch.yml</code></p>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ thÃ´ng tin cÆ¡ báº£n vá» cáº¥u hÃ¬nh:</p>
<div class="language-yml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">cluster.name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">elasticsearch</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Cáº¥u hÃ¬nh tÃªn cá»¥m cá»§a es, máº·c Ä‘á»‹nh lÃ  elasticsearch, es sáº½ tá»± Ä‘á»™ng phÃ¡t hiá»‡n es trong cÃ¹ng má»™t shard máº¡ng, náº¿u cÃ³ nhiá»u cá»¥m trong cÃ¹ng má»™t shard máº¡ng, thuá»™c tÃ­nh nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ phÃ¢n biá»‡t cÃ¡c cá»¥m khÃ¡c nhau.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">node.name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Franz Kafka'</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># TÃªn node, máº·c Ä‘á»‹nh Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh má»™t cÃ¡ch ngáº«u nhiÃªn tá»« danh sÃ¡ch tÃªn, danh sÃ¡ch nÃ y náº±m trong tá»‡p name.txt trong thÆ° má»¥c cáº¥u hÃ¬nh trong gÃ³i jar es, trong Ä‘Ã³ cÃ³ nhiá»u tÃªn thÃº vá»‹ Ä‘Æ°á»£c thÃªm bá»Ÿi cÃ¡c tÃ¡c giáº£.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">node.master</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># XÃ¡c Ä‘á»‹nh node nÃ y cÃ³ Ä‘á»§ Ä‘iá»u kiá»‡n Ä‘á»ƒ Ä‘Æ°á»£c báº§u lÃ m node hay khÃ´ng, máº·c Ä‘á»‹nh lÃ  true, es máº·c Ä‘á»‹nh lÃ  mÃ¡y Ä‘áº§u tiÃªn trong cá»¥m lÃ  master, náº¿u mÃ¡y nÃ y bá»‹ treo thÃ¬ sáº½ báº§u láº¡i master.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">node.data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># XÃ¡c Ä‘á»‹nh node nÃ y cÃ³ lÆ°u trá»¯ dá»¯ liá»‡u index hay khÃ´ng, máº·c Ä‘á»‹nh lÃ  true.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">index.number_of_shards</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t sá»‘ lÆ°á»£ng máº£nh shard máº·c Ä‘á»‹nh cho index, máº·c Ä‘á»‹nh lÃ  5 máº£nh.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">index.number_of_replicas</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t sá»‘ lÆ°á»£ng báº£n sao máº·c Ä‘á»‹nh cho index, máº·c Ä‘á»‹nh lÃ  1 báº£n sao.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">path.conf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">/path/to/conf</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t Ä‘Æ°á»ng dáº«n lÆ°u trá»¯ tá»‡p cáº¥u hÃ¬nh, máº·c Ä‘á»‹nh lÃ  thÆ° má»¥c config trong thÆ° má»¥c gá»‘c es.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">path.data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">/path/to/data</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t Ä‘Æ°á»ng dáº«n lÆ°u trá»¯ dá»¯ liá»‡u index, máº·c Ä‘á»‹nh lÃ  thÆ° má»¥c data trong thÆ° má»¥c gá»‘c es, cÃ³ thá»ƒ Ä‘áº·t nhiá»u Ä‘Æ°á»ng dáº«n lÆ°u trá»¯, phÃ¢n cÃ¡ch báº±ng dáº¥u pháº©y, vÃ­ dá»¥:</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#path.data: /path/to/data1,/path/to/data2</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">path.work</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">/path/to/work</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t Ä‘Æ°á»ng dáº«n lÆ°u trá»¯ tá»‡p táº¡m thá»i, máº·c Ä‘á»‹nh lÃ  thÆ° má»¥c work trong thÆ° má»¥c gá»‘c es.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">path.logs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">/path/to/logs</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t Ä‘Æ°á»ng dáº«n lÆ°u trá»¯ tá»‡p nháº­t kÃ½, máº·c Ä‘á»‹nh lÃ  thÆ° má»¥c logs trong thÆ° má»¥c gá»‘c es</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">path.plugins</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">/path/to/plugins</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t Ä‘Æ°á»ng dáº«n lÆ°u trá»¯ plugin, máº·c Ä‘á»‹nh lÃ  thÆ° má»¥c plugins trong thÆ° má»¥c gá»‘c es</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">bootstrap.mlockall</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t true Ä‘á»ƒ khÃ³a bá»™ nhá»›. Bá»Ÿi vÃ¬ khi jvm báº¯t Ä‘áº§u swapping thÃ¬ hiá»‡u suáº¥t cá»§a es sáº½ giáº£m, vÃ¬ váº­y Ä‘á»ƒ Ä‘áº£m báº£o nÃ³ khÃ´ng swap, báº¡n cÃ³ thá»ƒ Ä‘áº·t hai biáº¿n mÃ´i trÆ°á»ng ES_MIN_MEM vÃ  ES_MAX_MEM thÃ nh cÃ¹ng má»™t giÃ¡ trá»‹, vÃ  Ä‘áº£m báº£o mÃ¡y cÃ³ Ä‘á»§ bá»™ nhá»› Ä‘á»ƒ phÃ¢n bá»• cho es. Äá»“ng thá»i, báº¡n cÅ©ng pháº£i cho phÃ©p tiáº¿n trÃ¬nh elasticsearch cÃ³ thá»ƒ khÃ³a bá»™ nhá»›, trÃªn linux báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng lá»‡nh `ulimit -l unlimited`.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">network.bind_host</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">192.168.0.1</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t Ä‘á»‹a chá»‰ ip Ä‘Æ°á»£c liÃªn káº¿t, cÃ³ thá»ƒ lÃ  ipv4 hoáº·c ipv6, máº·c Ä‘á»‹nh lÃ  0.0.0.0.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">network.publish_host</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">192.168.0.1</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t Ä‘á»‹a chá»‰ ip mÃ  cÃ¡c node khÃ¡c vÃ  node nÃ y tÆ°Æ¡ng tÃ¡c, náº¿u khÃ´ng Ä‘áº·t nÃ³ sáº½ tá»± Ä‘á»™ng xÃ¡c Ä‘á»‹nh, giÃ¡ trá»‹ pháº£i lÃ  má»™t Ä‘á»‹a chá»‰ ip thá»±c sá»±.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">network.host</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">192.168.0.1</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Tham sá»‘ nÃ y Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘á»“ng thá»i Ä‘áº·t bind_host vÃ  publish_host á»Ÿ trÃªn.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">transport.tcp.port</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">9300</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t cá»•ng tcp Ä‘á»ƒ tÆ°Æ¡ng tÃ¡c giá»¯a cÃ¡c node, máº·c Ä‘á»‹nh lÃ  9300.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">transport.tcp.compress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t liá»‡u cÃ³ nÃ©n dá»¯ liá»‡u khi truyá»n táº£i tcp hay khÃ´ng, máº·c Ä‘á»‹nh lÃ  false, khÃ´ng nÃ©n.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">http.port</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">9200</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t cá»•ng http phá»¥c vá»¥ bÃªn ngoÃ i, máº·c Ä‘á»‹nh lÃ  9200.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">http.max_content_length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">100mb</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t dung lÆ°á»£ng tá»‘i Ä‘a cá»§a ná»™i dung, máº·c Ä‘á»‹nh lÃ  100mb</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">http.enabled</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># CÃ³ sá»­ dá»¥ng giao thá»©c http Ä‘á»ƒ cung cáº¥p dá»‹ch vá»¥ bÃªn ngoÃ i hay khÃ´ng, máº·c Ä‘á»‹nh lÃ  true, Ä‘Æ°á»£c má»Ÿ.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">gateway.type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">local</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Loáº¡i gateway, máº·c Ä‘á»‹nh lÃ  local tá»©c lÃ  há»‡ thá»‘ng tá»‡p cá»¥c bá»™, cÃ³ thá»ƒ Ä‘áº·t lÃ  há»‡ thá»‘ng tá»‡p cá»¥c bá»™, há»‡ thá»‘ng tá»‡p phÃ¢n tÃ¡n, HDFS cá»§a hadoop, vÃ  mÃ¡y chá»§ s3 cá»§a amazon, cÃ¡ch Ä‘áº·t há»‡ thá»‘ng tá»‡p khÃ¡c sáº½ Ä‘Æ°á»£c nÃ³i chi tiáº¿t vÃ o láº§n sau.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">gateway.recover_after_nodes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t sá»‘ lÆ°á»£ng node trong cá»¥m khi khá»Ÿi Ä‘á»™ng Ä‘á»ƒ khÃ´i phá»¥c dá»¯ liá»‡u, máº·c Ä‘á»‹nh lÃ  1.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">gateway.recover_after_time</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">5m</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t thá»i gian chá» tá»‘i Ä‘a Ä‘á»ƒ khá»Ÿi táº¡o quÃ¡ trÃ¬nh khÃ´i phá»¥c dá»¯ liá»‡u, máº·c Ä‘á»‹nh lÃ  5 phÃºt.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">gateway.expected_nodes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t sá»‘ lÆ°á»£ng node trong cá»¥m nÃ y, máº·c Ä‘á»‹nh lÃ  2, má»™t khi N node nÃ y Ä‘Æ°á»£c khá»Ÿi Ä‘á»™ng, quÃ¡ trÃ¬nh khÃ´i phá»¥c dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c báº¯t Ä‘áº§u ngay láº­p tá»©c.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">cluster.routing.allocation.node_initial_primaries_recoveries</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Khi khÃ´i phá»¥c dá»¯ liá»‡u ban Ä‘áº§u, sá»‘ lÆ°á»£ng luá»“ng khÃ´i phá»¥c Ä‘á»“ng thá»i, máº·c Ä‘á»‹nh lÃ  4.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">cluster.routing.allocation.node_concurrent_recoveries</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Khi thÃªm hoáº·c xÃ³a node hoáº·c cÃ¢n báº±ng táº£i, sá»‘ lÆ°á»£ng luá»“ng khÃ´i phá»¥c Ä‘á»“ng thá»i, máº·c Ä‘á»‹nh lÃ  2.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">indices.recovery.max_size_per_sec</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t bÄƒng thÃ´ng giá»›i háº¡n khi khÃ´i phá»¥c dá»¯ liá»‡u, vÃ­ dá»¥ 100mb, máº·c Ä‘á»‹nh lÃ  0, tá»©c khÃ´ng giá»›i háº¡n.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">indices.recovery.concurrent_streams</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t tham sá»‘ nÃ y Ä‘á»ƒ giá»›i háº¡n sá»‘ lÆ°á»£ng luá»“ng Ä‘á»“ng thá»i má»Ÿ tá»‘i Ä‘a khi khÃ´i phá»¥c dá»¯ liá»‡u tá»« cÃ¡c máº£nh khÃ¡c, máº·c Ä‘á»‹nh lÃ  5.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">discovery.zen.minimum_master_nodes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t tham sá»‘ nÃ y Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng cÃ¡c node trong cá»¥m cÃ³ thá»ƒ biáº¿t Ä‘Æ°á»£c sá»‘ lÆ°á»£ng tá»‘i thiá»ƒu N node khÃ¡c cÃ³ Ä‘á»§ Ä‘iá»u kiá»‡n lÃ m master. Máº·c Ä‘á»‹nh lÃ  1, Ä‘á»‘i vá»›i cá»¥m lá»›n, cÃ³ thá»ƒ Ä‘áº·t giÃ¡ trá»‹ lá»›n hÆ¡n má»™t chÃºt (2-4)</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">discovery.zen.ping.timeout</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">3s</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t thá»i gian chá» káº¿t ná»‘i ping khi tá»± Ä‘á»™ng phÃ¡t hiá»‡n cÃ¡c node khÃ¡c trong cá»¥m, máº·c Ä‘á»‹nh lÃ  3 giÃ¢y, Ä‘á»‘i vá»›i mÃ´i trÆ°á»ng máº¡ng kÃ©m, cÃ³ thá»ƒ Ä‘áº·t giÃ¡ trá»‹ cao hÆ¡n Ä‘á»ƒ ngÄƒn cháº·n lá»—i khi phÃ¡t hiá»‡n tá»± Ä‘á»™ng.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">discovery.zen.ping.multicast.enabled</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t liá»‡u cÃ³ má»Ÿ phÃ¡t hiá»‡n node Ä‘a phÃ¡t hay khÃ´ng, máº·c Ä‘á»‹nh lÃ  true.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">discovery.zen.ping.unicast.hosts</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">'host1'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'host2:port'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'host3[portX-portY]'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äáº·t danh sÃ¡ch ban Ä‘áº§u cá»§a cÃ¡c node master trong cá»¥m, cÃ¡c node má»›i tham gia cá»¥m cÃ³ thá»ƒ Ä‘Æ°á»£c phÃ¡t hiá»‡n tá»± Ä‘á»™ng thÃ´ng qua cÃ¡c node nÃ y.</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>Elasticsearch FAQ</h2>
<h3>Elasticsearch khÃ´ng cho phÃ©p cháº¡y vá»›i quyá»n root</h3>
<p><strong>Váº¥n Ä‘á»:</strong> Trong mÃ´i trÆ°á»ng Linux, Elasticsearch khÃ´ng cho phÃ©p cháº¡y vá»›i quyá»n root.</p>
<p>Náº¿u báº¡n cháº¡y Elasticsearch dÆ°á»›i quyá»n root, báº¡n sáº½ nháº­n Ä‘Æ°á»£c lá»—i sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>can not run elasticsearch as root</span></span></code></pre>
</div><p><strong>CÃ¡ch giáº£i quyáº¿t:</strong> Cháº¡y Elasticsearch dÆ°á»›i tÃ i khoáº£n khÃ´ng cÃ³ quyá»n root</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Táº¡o nhÃ³m ngÆ°á»i dÃ¹ng</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">groupadd</span><span style="color:#98C379;--shiki-dark:#98C379"> elk</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Táº¡o ngÆ°á»i dÃ¹ng má»›i, -g elk Ä‘áº·t nhÃ³m ngÆ°á»i dÃ¹ng cá»§a nÃ³ thÃ nh elk, -p elk Ä‘áº·t máº­t kháº©u cá»§a nÃ³ thÃ nh elk</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">useradd</span><span style="color:#98C379;--shiki-dark:#98C379"> elk</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -g</span><span style="color:#98C379;--shiki-dark:#98C379"> elk</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -p</span><span style="color:#98C379;--shiki-dark:#98C379"> elk</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Thay Ä‘á»•i chá»§ sá»Ÿ há»¯u cá»§a thÆ° má»¥c /opt vÃ  cÃ¡c tá»‡p bÃªn trong thÃ nh elk:elk</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">chown</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -R</span><span style="color:#98C379;--shiki-dark:#98C379"> elk:elk</span><span style="color:#98C379;--shiki-dark:#98C379"> /opt</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"> # Giáº£ sá»­ báº¡n Ä‘Ã£ cÃ i Ä‘áº·t elasticsearch trong thÆ° má»¥c opt</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Chuyá»ƒn Ä‘á»•i tÃ i khoáº£n</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">su</span><span style="color:#98C379;--shiki-dark:#98C379"> elk</span></span></code></pre>
</div><h3>vm.max_map_count khÃ´ng tháº¥p hÆ¡n 262144</h3>
<p><strong>Váº¥n Ä‘á»:</strong> <code>vm.max_map_count</code> biá»ƒu thá»‹ kÃ­ch thÆ°á»›c bá»™ nhá»› áº£o, Ä‘Ã¢y lÃ  má»™t tham sá»‘ kernel. Elasticsearch yÃªu cáº§u <code>vm.max_map_count</code> khÃ´ng tháº¥p hÆ¡n 262144.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</span></span></code></pre>
</div><p><strong>CÃ¡ch giáº£i quyáº¿t:</strong></p>
<p>Báº¡n cÃ³ thá»ƒ thá»±c hiá»‡n lá»‡nh sau Ä‘á»ƒ Ä‘áº·t <code>vm.max_map_count</code>, nhÆ°ng sau khi khá»Ÿi Ä‘á»™ng láº¡i, nÃ³ sáº½ trá»Ÿ láº¡i giÃ¡ trá»‹ ban Ä‘áº§u.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>sysctl -w vm.max_map_count=262144</span></span></code></pre>
</div><p>CÃ¡ch lÃ m lÃ¢u dÃ i lÃ  sá»­a Ä‘á»•i tham sá»‘ <code>vm.max_map_count</code> trong tá»‡p <code>/etc/sysctl.conf</code>:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>echo "vm.max_map_count=262144" &gt; /etc/sysctl.conf</span></span>
<span class="line"><span>sysctl -p</span></span></code></pre>
</div><blockquote>
<p><strong>LÆ°u Ã½</strong></p>
<p>Náº¿u mÃ´i trÆ°á»ng cháº¡y lÃ  docker container, cÃ³ thá»ƒ sáº½ háº¡n cháº¿ viá»‡c thá»±c hiá»‡n sysctl Ä‘á»ƒ sá»­a Ä‘á»•i tham sá»‘ kernel.</p>
<p>Trong trÆ°á»ng há»£p nÃ y, báº¡n chá»‰ cÃ³ thá»ƒ chá»n sá»­a Ä‘á»•i tham sá»‘ trÃªn mÃ¡y chá»§ chá»§.</p>
</blockquote>
<h3>nofile khÃ´ng tháº¥p hÆ¡n 65536</h3>
<p><strong>Váº¥n Ä‘á»:</strong> <code>nofile</code> biá»ƒu thá»‹ sá»‘ lÆ°á»£ng tá»‡p tá»‘i Ä‘a mÃ  má»™t quÃ¡ trÃ¬nh cÃ³ thá»ƒ má»Ÿ. QuÃ¡ trÃ¬nh Elasticsearch yÃªu cáº§u sá»‘ lÆ°á»£ng tá»‡p tá»‘i Ä‘a cÃ³ thá»ƒ má»Ÿ khÃ´ng tháº¥p hÆ¡n 65536.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>max file descriptors [4096] for elasticsearch process is too low, increase to at least [65536]</span></span></code></pre>
</div><p><strong>CÃ¡ch giáº£i quyáº¿t:</strong></p>
<p>Sá»­a Ä‘á»•i tham sá»‘ <code>nofile</code> trong tá»‡p <code>/etc/security/limits.conf</code>:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>echo "* soft nofile 65536" &gt; /etc/security/limits.conf</span></span>
<span class="line"><span>echo "* hard nofile 131072" &gt; /etc/security/limits.conf</span></span></code></pre>
</div><h3>nproc khÃ´ng tháº¥p hÆ¡n 2048</h3>
<p><strong>Váº¥n Ä‘á»:</strong> <code>nproc</code> biá»ƒu thá»‹ sá»‘ lÆ°á»£ng tá»‘i Ä‘a cá»§a cÃ¡c thread. Elasticsearch yÃªu cáº§u sá»‘ lÆ°á»£ng tá»‘i Ä‘a thread khÃ´ng tháº¥p hÆ¡n 2048.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>max number of threads [1024] for user [user] is too low, increase to at least [2048]</span></span></code></pre>
</div><p><strong>CÃ¡ch giáº£i quyáº¿t:</strong></p>
<p>Sá»­a Ä‘á»•i tham sá»‘ <code>nproc</code> trong tá»‡p <code>/etc/security/limits.conf</code>:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>echo "* soft nproc 2048" &gt; /etc/security/limits.conf</span></span>
<span class="line"><span>echo "* hard nproc 4096" &gt; /etc/security/limits.conf</span></span></code></pre>
</div><h2>TÃ i liá»‡u tham kháº£o</h2>
<ul>
<li><a href="https://www.elastic.co/cn/downloads/elasticsearch" target="_blank" rel="noopener noreferrer">HÆ°á»›ng dáº«n táº£i vÃ  cÃ i Ä‘áº·t Elasticsearch chÃ­nh thá»©c</a></li>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/rpm.html#rpm" target="_blank" rel="noopener noreferrer">CÃ i Ä‘áº·t Elasticsearch vá»›i RPM</a></li>
<li><a href="http://siye1982.github.io/2015/09/17/es-optimize/" target="_blank" rel="noopener noreferrer">TÃ­ch lÅ©y sá»­ dá»¥ng Elasticsearch</a></li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Elasticsearch performance optimization</title>
      <link>https://vanhung4499.github.io/database/elasticsearch/optimization.html</link>
      <guid>https://vanhung4499.github.io/database/elasticsearch/optimization.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elasticsearch performance optimization</source>
      <description>Tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t Elasticsearch Elasticsearch lÃ  cÃ´ng cá»¥ tÃ¬m kiáº¿m cáº¥p doanh nghiá»‡p phá»• biáº¿n hiá»‡n nay, Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ hoáº¡t Ä‘á»™ng trong mÃ´i trÆ°á»ng Ä‘Ã¡m mÃ¢y, cÃ³ kháº£ nÄƒng tÃ¬m kiáº¿...</description>
      <category>elasticssearch</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Elasticsearch lÃ  cÃ´ng cá»¥ tÃ¬m kiáº¿m cáº¥p doanh nghiá»‡p phá»• biáº¿n hiá»‡n nay, Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ hoáº¡t Ä‘á»™ng trong mÃ´i trÆ°á»ng Ä‘Ã¡m mÃ¢y, cÃ³ kháº£ nÄƒng tÃ¬m kiáº¿m thá»i gian thá»±c, á»•n Ä‘á»‹nh, Ä‘Ã¡ng tin cáº­y, nhanh chÃ³ng vÃ  dá»… dÃ ng cÃ i Ä‘áº·t. DÃ¹ lÃ  má»™t sáº£n pháº©m sáºµn sÃ ng sá»­ dá»¥ng ngay sau khi má»Ÿ há»™p, sau khi Ä‘Æ°a vÃ o mÃ´i trÆ°á»ng sáº£n xuáº¥t, chÃºng ta khÃ´ng thá»ƒ Ä‘áº£m báº£o Ä‘Æ°á»£c hiá»‡u suáº¥t vÃ  á»•n Ä‘á»‹nh cá»§a nÃ³. Viá»‡c tÄƒng cÆ°á»ng hiá»‡u suáº¥t dá»‹ch vá»¥ dá»±a trÃªn tÃ¬nh hÃ¬nh thá»±c táº¿ cÃ³ ráº¥t nhiá»u ká»¹ thuáº­t. Trong chÆ°Æ¡ng nÃ y, chÃºng tÃ´i sáº½ chia sáº» nhá»¯ng kinh nghiá»‡m tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t Elasticsearch tá»« thá»±c tiá»…n, chá»§ yáº¿u tá»« cÃ¡c khÃ­a cáº¡nh nhÆ° tá»‘i Æ°u hÃ³a cáº¥u hÃ¬nh pháº§n cá»©ng, cÃ i Ä‘áº·t tá»‘i Æ°u hÃ³a chá»‰ má»¥c, tá»‘i Æ°u hÃ³a truy váº¥n, tá»‘i Æ°u hÃ³a cáº¥u trÃºc dá»¯ liá»‡u, tá»‘i Æ°u hÃ³a kiáº¿n trÃºc cá»¥m.</p>
<h2>Tá»‘i Æ°u hÃ³a cáº¥u hÃ¬nh pháº§n cá»©ng</h2>
<p>NÃ¢ng cáº¥p cáº¥u hÃ¬nh pháº§n cá»©ng luÃ´n lÃ  phÆ°Æ¡ng phÃ¡p tÄƒng cÆ°á»ng kháº£ nÄƒng phá»¥c vá»¥ nhanh chÃ³ng vÃ  hiá»‡u quáº£ nháº¥t, ba yáº¿u tá»‘ cÃ³ thá»ƒ áº£nh hÆ°á»Ÿng Ä‘áº¿n hiá»‡u suáº¥t á»©ng dá»¥ng á»Ÿ cáº¥p Ä‘á»™ há»‡ thá»‘ng bao gá»“m: CPU, bá»™ nhá»› vÃ  IO, cÃ³ thá»ƒ tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t ES tá»« ba khÃ­a cáº¡nh nÃ y.</p>
<h3>Cáº¥u hÃ¬nh CPU</h3>
<p>NÃ³i chung, cÃ³ má»™t sá»‘ lÃ½ do khiáº¿n CPU báº­n rá»™n:</p>
<ol>
<li>CÃ³ vÃ²ng láº·p vÃ´ háº¡n, khÃ´ng cháº·n, khá»›p máº«u thÃ´ng thÆ°á»ng hoáº·c chá»‰ tÃ­nh toÃ¡n trong luá»“ng;</li>
<li>Xáº£y ra GC thÆ°á»ng xuyÃªn;</li>
<li>Chuyá»ƒn Ä‘á»•i ngá»¯ cáº£nh cá»§a nhiá»u luá»“ng;</li>
</ol>
<p>Háº§u háº¿t cÃ¡c triá»ƒn khai Elasticsearch thÆ°á»ng khÃ´ng Ä‘áº·t yÃªu cáº§u cao Ä‘á»‘i vá»›i CPU. Do Ä‘Ã³, so vá»›i cÃ¡c tÃ i nguyÃªn khÃ¡c, viá»‡c cáº¥u hÃ¬nh bao nhiÃªu (CPU) khÃ´ng quan trá»ng láº¯m. Báº¡n nÃªn chá»n bá»™ xá»­ lÃ½ hiá»‡n Ä‘áº¡i cÃ³ nhiá»u nhÃ¢n, mÃ¡y chá»§ trong cá»¥m thÆ°á»ng sá»­ dá»¥ng tá»« 2 Ä‘áº¿n 8 nhÃ¢n. <strong>Náº¿u báº¡n pháº£i chá»n giá»¯a CPUs nhanh hÆ¡n vÃ  sá»‘ lÆ°á»£ng nhÃ¢n nhiá»u hÆ¡n, viá»‡c chá»n sá»‘ lÆ°á»£ng nhÃ¢n nhiá»u hÆ¡n sáº½ tá»‘t hÆ¡n</strong>. Sá»‘ lÆ°á»£ng nhÃ¢n bá»• sung cung cáº¥p Ä‘á»“ng thá»i nhiá»u hÆ¡n ráº¥t nhiá»u so vá»›i tá»‘c Ä‘á»™ xung nhá»‹p nhanh hÆ¡n má»™t chÃºt.</p>
<h3>Cáº¥u hÃ¬nh bá»™ nhá»›</h3>
<p>Náº¿u cÃ³ má»™t loáº¡i tÃ i nguyÃªn nÃ o Ä‘Ã³ sáº½ Ä‘Æ°á»£c tiÃªu thá»¥ trÆ°á»›c tiÃªn, Ä‘Ã³ cÃ³ thá»ƒ lÃ  bá»™ nhá»›. Sáº¯p xáº¿p vÃ  tá»•ng há»£p Ä‘á»u tiÃªu thá»¥ nhiá»u bá»™ nhá»›, vÃ¬ váº­y viá»‡c cÃ³ Ä‘á»§ khÃ´ng gian heap Ä‘á»ƒ xá»­ lÃ½ chÃºng lÃ  ráº¥t quan trá»ng. Ngay cáº£ khi khÃ´ng gian heap khÃ¡ nhá», nÃ³ cÅ©ng cÃ³ thá»ƒ cung cáº¥p thÃªm bá»™ nhá»› cho bá»™ Ä‘á»‡m tá»‡p há»‡ Ä‘iá»u hÃ nh. Bá»Ÿi vÃ¬ nhiá»u cáº¥u trÃºc dá»¯ liá»‡u mÃ  Lucene sá»­ dá»¥ng dá»±a trÃªn Ä‘á»‹nh dáº¡ng dá»±a trÃªn Ä‘Ä©a, Elasticsearch táº­n dá»¥ng bá»™ Ä‘á»‡m há»‡ Ä‘iá»u hÃ nh cÃ³ thá»ƒ táº¡o ra hiá»‡u quáº£ lá»›n.</p>
<p><strong>MÃ¡y cÃ³ bá»™ nhá»› 64 GB lÃ  ráº¥t lÃ½ tÆ°á»Ÿng</strong>, nhÆ°ng mÃ¡y 32 GB vÃ  16 GB cÅ©ng ráº¥t phá»• biáº¿n. DÆ°á»›i 8 GB sáº½ pháº£n tÃ¡c dá»¥ng (báº¡n cuá»‘i cÃ¹ng sáº½ cáº§n ráº¥t nhiá»u mÃ¡y nhá»), mÃ¡y cÃ³ bá»™ nhá»› lá»›n hÆ¡n 64 GB cÅ©ng sáº½ gáº·p váº¥n Ä‘á».</p>
<p>Do ES Ä‘Æ°á»£c xÃ¢y dá»±ng dá»±a trÃªn lucene, vÃ  sá»©c máº¡nh cá»§a thiáº¿t káº¿ lucene náº±m á»Ÿ chá»— lucene cÃ³ thá»ƒ táº­n dá»¥ng tá»‘t bá»™ nhá»› há»‡ Ä‘iá»u hÃ nh Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u chá»‰ má»¥c, Ä‘á»ƒ cung cáº¥p hiá»‡u suáº¥t truy váº¥n nhanh. CÃ¡c tá»‡p phÃ¢n Ä‘oáº¡n chá»‰ má»¥c cá»§a lucene Ä‘Æ°á»£c lÆ°u trá»¯ trong má»™t tá»‡p duy nháº¥t vÃ  khÃ´ng thay Ä‘á»•i, Ä‘á»‘i vá»›i há»‡ Ä‘iá»u hÃ nh, cÃ³ thá»ƒ giá»¯ tá»‡p chá»‰ má»¥c trong bá»™ Ä‘á»‡m má»™t cÃ¡ch thÃ¢n thiá»‡n, Ä‘á»ƒ truy cáº­p nhanh; do Ä‘Ã³, chÃºng ta cáº§n Ä‘á»ƒ má»™t ná»­a bá»™ nhá»› váº­t lÃ½ cho lucene; ná»­a cÃ²n láº¡i cá»§a bá»™ nhá»› váº­t lÃ½ Ä‘á»ƒ cho ES (JVM heap).</p>
<h4>PhÃ¢n bá»• bá»™ nhá»›</h4>
<p>Khi bá»™ nhá»› mÃ¡y nhá» hÆ¡n 64G, tuÃ¢n theo nguyÃªn táº¯c chung, 50% cho ES, 50% cho lucene.</p>
<p>Khi bá»™ nhá»› mÃ¡y lá»›n hÆ¡n 64G, tuÃ¢n theo nguyÃªn táº¯c sau:</p>
<ul>
<li>Náº¿u cáº£nh sá»­ dá»¥ng chÃ­nh lÃ  tÃ¬m kiáº¿m toÃ n vÄƒn báº£n, thÃ¬ nÃªn cáº¥p 4~32G bá»™ nhá»› cho ES Heap; bá»™ nhá»› khÃ¡c Ä‘á»ƒ cho há»‡ Ä‘iá»u hÃ nh, cho lucene sá»­ dá»¥ng (segments cache), Ä‘á»ƒ cung cáº¥p hiá»‡u suáº¥t truy váº¥n nhanh hÆ¡n.</li>
<li>Náº¿u cáº£nh sá»­ dá»¥ng chÃ­nh lÃ  tá»•ng há»£p hoáº·c sáº¯p xáº¿p, vÃ  háº§u háº¿t lÃ  numerics, dates, geo_points vÃ  cÃ¡c loáº¡i kÃ½ tá»± not_analyzed, nÃªn cáº¥p 4~32G bá»™ nhá»› cho ES Heap; bá»™ nhá»› khÃ¡c Ä‘á»ƒ cho há»‡ Ä‘iá»u hÃ nh, cho lucene sá»­ dá»¥ng, cung cáº¥p hiá»‡u suáº¥t tá»•ng há»£p, sáº¯p xáº¿p nhanh hÆ¡n dá»±a trÃªn tÃ i liá»‡u.</li>
<li>Náº¿u cáº£nh sá»­ dá»¥ng lÃ  tá»•ng há»£p hoáº·c sáº¯p xáº¿p, vÃ  táº¥t cáº£ Ä‘á»u dá»±a trÃªn dá»¯ liá»‡u kÃ½ tá»± analyzed, thÃ¬ cáº§n nhiá»u heap size hÆ¡n, nÃªn cháº¡y nhiá»u thá»±c thá»ƒ ES trÃªn mÃ¡y, má»—i thá»±c thá»ƒ giá»¯ khÃ´ng vÆ°á»£t quÃ¡ 50% cÃ i Ä‘áº·t heap ES (nhÆ°ng khÃ´ng vÆ°á»£t quÃ¡ 32 G, khi heap memory Ä‘Æ°á»£c cÃ i Ä‘áº·t dÆ°á»›i 32 G, JVM sá»­ dá»¥ng ká»¹ thuáº­t nÃ©n chá»‰ sá»‘ Ä‘á»‘i tÆ°á»£ng Ä‘á»ƒ tiáº¿t kiá»‡m khÃ´ng gian), hÆ¡n 50% Ä‘á»ƒ cho lucene.</li>
</ul>
<h4>VÃ´ hiá»‡u hÃ³a swap</h4>
<p>VÃ´ hiá»‡u hÃ³a swap, má»™t khi cho phÃ©p trao Ä‘á»•i bá»™ nhá»› vá»›i Ä‘Ä©a, sáº½ gÃ¢y ra váº¥n Ä‘á» vá» hiá»‡u suáº¥t nghiÃªm trá»ng. CÃ³ thá»ƒ thÃ´ng qua <code>bootstrap.memory_lock: true</code> trong elasticsearch.yml, Ä‘á»ƒ giá»¯ JVM khÃ³a bá»™ nhá»›, Ä‘áº£m báº£o hiá»‡u suáº¥t cá»§a ES.</p>
<h4>CÃ i Ä‘áº·t GC</h4>
<p>Giá»¯ cÃ i Ä‘áº·t GC hiá»‡n táº¡i, cÃ i Ä‘áº·t máº·c Ä‘á»‹nh lÃ : Concurrent-Mark and Sweep (CMS), khÃ´ng chuyá»ƒn sang G1 GC, vÃ¬ hiá»‡n táº¡i G1 váº«n cÃ³ ráº¥t nhiá»u BUG.</p>
<p>Giá»¯ cÃ i Ä‘áº·t hiá»‡n táº¡i cá»§a thread pool, hiá»‡n táº¡i cÃ i Ä‘áº·t thread pool cá»§a ES Ä‘Ã£ cÃ³ nhiá»u cÃ i Ä‘áº·t tá»‘i Æ°u hÃ³a so vá»›i 1.X, giá»¯ nguyÃªn lÃ  Ä‘Æ°á»£c; kÃ­ch thÆ°á»›c thread pool máº·c Ä‘á»‹nh báº±ng sá»‘ lÆ°á»£ng lÃµi CPU. Náº¿u cáº§n thay Ä‘á»•i, cÃ i Ä‘áº·t theo cÃ´ng thá»©c ((sá»‘ lÆ°á»£ng lÃµi CPU * 3) / 2) + 1; khÃ´ng Ä‘Æ°á»£c vÆ°á»£t quÃ¡ gáº¥p Ä‘Ã´i sá»‘ lÆ°á»£ng lÃµi CPU; nhÆ°ng khÃ´ng nÃªn thay Ä‘á»•i cáº¥u hÃ¬nh máº·c Ä‘á»‹nh, náº¿u khÃ´ng sáº½ gÃ¢y tá»•n thÆ°Æ¡ng cho CPU.</p>
<h3>ÄÄ©a</h3>
<p>ÄÄ©a quan trá»ng Ä‘á»‘i vá»›i táº¥t cáº£ cÃ¡c cá»¥m, Ä‘áº·c biá»‡t quan trá»ng Ä‘á»‘i vá»›i cÃ¡c cá»¥m cÃ³ lÆ°á»£ng ghi lá»›n (vÃ­ dá»¥ nhÆ° nhá»¯ng cá»¥m lÆ°u trá»¯ dá»¯ liá»‡u nháº­t kÃ½). ÄÄ©a lÃ  há»‡ thá»‘ng con cháº­m nháº¥t trÃªn mÃ¡y chá»§, Ä‘iá»u nÃ y cÃ³ nghÄ©a lÃ  nhá»¯ng cá»¥m cÃ³ lÆ°á»£ng ghi lá»›n dá»… dÃ ng lÃ m cho Ä‘Ä©a bÃ£o hÃ²a, khiáº¿n nÃ³ trá»Ÿ thÃ nh nÃºt tháº¯t cá»• chai cá»§a cá»¥m.</p>
<p><strong>Trong pháº¡m vi chá»‹u Ä‘á»±ng Ä‘Æ°á»£c Ã¡p lá»±c kinh táº¿, hÃ£y sá»­ dá»¥ng á»• Ä‘Ä©a thá»ƒ ráº¯n (SSD) cÃ ng nhiá»u cÃ ng tá»‘t</strong>. So vá»›i báº¥t ká»³ phÆ°Æ¡ng tiá»‡n quay nÃ o (á»• Ä‘Ä©a cá»©ng cÆ¡ há»c, bÄƒng tá»«, v.v.), á»• Ä‘Ä©a thá»ƒ ráº¯n sáº½ tÄƒng cÆ°á»ng IO Ä‘Ã¡ng ká»ƒ, dÃ¹ lÃ  ghi ngáº«u nhiÃªn hay ghi tuáº§n tá»±.</p>
<blockquote>
<p>Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng SSD, hÃ£y Ä‘áº£m báº£o ráº±ng trÃ¬nh láº­p lá»‹ch I/O cá»§a há»‡ thá»‘ng báº¡n Ä‘Æ°á»£c cáº¥u hÃ¬nh Ä‘Ãºng. Khi báº¡n ghi dá»¯ liá»‡u vÃ o Ä‘Ä©a, trÃ¬nh láº­p lá»‹ch I/O quyáº¿t Ä‘á»‹nh khi nÃ o thá»±c sá»± gá»­i dá»¯ liá»‡u Ä‘áº¿n Ä‘Ä©a. Háº§u háº¿t cÃ¡c phiÃªn báº£n *nix máº·c Ä‘á»‹nh cÃ³ trÃ¬nh láº­p lá»‹ch lÃ  cfq (Completely Fair Queuing).</p>
<p>TrÃ¬nh láº­p lá»‹ch phÃ¢n bá»• thá»i gian cho má»—i quy trÃ¬nh. VÃ  tá»‘i Æ°u hÃ³a viá»‡c chuyá»ƒn cÃ¡c hÃ ng Ä‘á»£i lá»›n Ä‘áº¿n Ä‘Ä©a. NhÆ°ng nÃ³ Ä‘Æ°á»£c tá»‘i Æ°u hÃ³a cho phÆ°Æ¡ng tiá»‡n quay: Ä‘áº·c tÃ­nh cá»‘ há»¯u cá»§a á»• Ä‘Ä©a cÆ¡ há»c cÃ³ nghÄ©a lÃ  viá»‡c ghi dá»¯ liá»‡u vÃ o Ä‘Ä©a dá»±a trÃªn bá»‘ cá»¥c váº­t lÃ½ sáº½ hiá»‡u quáº£ hÆ¡n.</p>
<p>Äiá»u nÃ y khÃ´ng hiá»‡u quáº£ Ä‘á»‘i vá»›i SSD, máº·c dÃ¹ khÃ´ng liÃªn quan Ä‘áº¿n á»• Ä‘Ä©a cÆ¡ há»c. Tuy nhiÃªn, deadline hoáº·c noop nÃªn Ä‘Æ°á»£c sá»­ dá»¥ng. TrÃ¬nh láº­p lá»‹ch deadline tá»‘i Æ°u hÃ³a dá»±a trÃªn thá»i gian chá» ghi, trong khi noop chá»‰ lÃ  má»™t hÃ ng Ä‘á»£i FIFO Ä‘Æ¡n giáº£n.</p>
<p>Thay Ä‘á»•i Ä‘Æ¡n giáº£n nÃ y cÃ³ thá»ƒ táº¡o ra sá»± khÃ¡c biá»‡t Ä‘Ã¡ng ká»ƒ. Chá»‰ cáº§n sá»­ dá»¥ng trÃ¬nh láº­p lá»‹ch Ä‘Ãºng, chÃºng tÃ´i Ä‘Ã£ tháº¥y kháº£ nÄƒng ghi tÄƒng lÃªn 500 láº§n.</p>
</blockquote>
<p><strong>Náº¿u báº¡n sá»­ dá»¥ng phÆ°Æ¡ng tiá»‡n quay (nhÆ° á»• Ä‘Ä©a cÆ¡ há»c), hÃ£y cá»‘ gáº¯ng cÃ³ Ä‘Æ°á»£c á»• Ä‘Ä©a nhanh nháº¥t cÃ³ thá»ƒ (á»• Ä‘Ä©a mÃ¡y chá»§ hiá»‡u suáº¥t cao, á»• Ä‘Ä©a 15k RPM)</strong>.</p>
<p><strong>Sá»­ dá»¥ng RAID0 lÃ  cÃ¡ch hiá»‡u quáº£ Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ Ä‘Ä©a, Ä‘á»‘i vá»›i cáº£ á»• Ä‘Ä©a cÆ¡ há»c vÃ  SSD</strong>. KhÃ´ng cáº§n pháº£i sá»­ dá»¥ng gÆ°Æ¡ng hoáº·c cÃ¡c biáº¿n thá»ƒ RAID khÃ¡c, bá»Ÿi vÃ¬ Elasticsearch Ä‘Ã£ cung cáº¥p chá»©c nÄƒng sao lÆ°u á»Ÿ cáº¥p Ä‘á»™ tá»± thÃ¢n thÃ´ng qua cÃ¡c báº£n sao, vÃ¬ váº­y khÃ´ng cáº§n sá»­ dá»¥ng chá»©c nÄƒng sao lÆ°u cá»§a Ä‘Ä©a, Ä‘á»“ng thá»i náº¿u sá»­ dá»¥ng chá»©c nÄƒng sao lÆ°u cá»§a Ä‘Ä©a, sáº½ áº£nh hÆ°á»Ÿng lá»›n Ä‘áº¿n tá»‘c Ä‘á»™ ghi.</p>
<p><strong>Cuá»‘i cÃ¹ng, hÃ£y trÃ¡nh sá»­ dá»¥ng lÆ°u trá»¯ káº¿t ná»‘i máº¡ng (NAS)</strong>. Má»i ngÆ°á»i thÆ°á»ng tuyÃªn bá»‘ ráº±ng giáº£i phÃ¡p NAS cá»§a há» nhanh hÆ¡n vÃ  Ä‘Ã¡ng tin cáº­y hÆ¡n so vá»›i á»• Ä‘Ä©a cá»¥c bá»™. Bá» qua nhá»¯ng tuyÃªn bá»‘ nÃ y, chÃºng tÃ´i chÆ°a bao giá» tháº¥y NAS Ä‘Ã¡ng giÃ¡ cho sá»± quáº£ng cÃ¡o lá»›n cá»§a nÃ³. NAS thÆ°á»ng ráº¥t cháº­m, hiá»ƒn thá»‹ Ä‘á»™ trá»… lá»›n hÆ¡n vÃ  phÆ°Æ¡ng sai Ä‘á»™ trá»… trung bÃ¬nh rá»™ng hÆ¡n, vÃ  nÃ³ lÃ  Ä‘iá»ƒm lá»—i Ä‘Æ¡n.</p>
<h2>CÃ i Ä‘áº·t tá»‘i Æ°u hÃ³a chá»‰ má»¥c</h2>
<p>Tá»‘i Æ°u hÃ³a chá»‰ má»¥c chá»§ yáº¿u táº­p trung vÃ o viá»‡c tá»‘i Æ°u hÃ³a á»Ÿ má»©c Ä‘á»™ chÃ¨n cá»§a Elasticsearch, tá»‘c Ä‘á»™ chá»‰ má»¥c cá»§a Elasticsearch thá»±c sá»± khÃ¡ nhanh, dá»¯ liá»‡u cá»¥ thá»ƒ, chÃºng ta cÃ³ thá»ƒ tham kháº£o dá»¯ liá»‡u benchmark chÃ­nh thá»©c. ChÃºng ta cÃ³ thá»ƒ tá»‘i Æ°u hÃ³a chá»‰ má»¥c dá»±a trÃªn cÃ¡c yÃªu cáº§u khÃ¡c nhau.</p>
<h3>Gá»­i hÃ ng loáº¡t</h3>
<p>Khi cÃ³ ráº¥t nhiá»u dá»¯ liá»‡u cáº§n gá»­i, nÃªn sá»­ dá»¥ng gá»­i hÃ ng loáº¡t (hoáº¡t Ä‘á»™ng Bulk); ngoÃ i ra, khi sá»­ dá»¥ng yÃªu cáº§u bulk, má»—i yÃªu cáº§u khÃ´ng nÃªn vÆ°á»£t quÃ¡ vÃ i chá»¥c MB, vÃ¬ náº¿u quÃ¡ lá»›n sáº½ dáº«n Ä‘áº¿n viá»‡c sá»­ dá»¥ng quÃ¡ nhiá»u bá»™ nhá»›.</p>
<p>VÃ­ dá»¥, trong quÃ¡ trÃ¬nh thá»±c thi ELK, Logstash indexer gá»­i dá»¯ liá»‡u vÃ o Elasticsearch, kÃ­ch thÆ°á»›c batch cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng nhÆ° má»™t Ä‘iá»ƒm tá»‘i Æ°u hÃ³a. Tuy nhiÃªn, kÃ­ch thÆ°á»›c tá»‘i Æ°u cáº§n pháº£i xÃ¡c Ä‘á»‹nh dá»±a trÃªn kÃ­ch thÆ°á»›c tÃ i liá»‡u vÃ  hiá»‡u suáº¥t mÃ¡y chá»§.</p>
<p>VÃ­ dá»¥, trong Logstash, náº¿u kÃ­ch thÆ°á»›c tÃ i liá»‡u gá»­i vÆ°á»£t quÃ¡ 20MB, Logstash sáº½ chia má»™t yÃªu cáº§u hÃ ng loáº¡t thÃ nh nhiá»u yÃªu cáº§u hÃ ng loáº¡t.</p>
<p>Náº¿u trong quÃ¡ trÃ¬nh gá»­i, báº¡n gáº·p pháº£i ngoáº¡i lá»‡ EsRejectedExecutionException, thÃ¬ Ä‘iá»u nÃ y cho tháº¥y hiá»‡u suáº¥t chá»‰ má»¥c cá»§a cá»¥m Ä‘Ã£ Ä‘áº¡t Ä‘áº¿n giá»›i háº¡n. Trong trÆ°á»ng há»£p nÃ y, báº¡n cáº§n tÄƒng nguá»“n lá»±c cá»§a cá»¥m mÃ¡y chá»§ hoáº·c giáº£m tá»‘c Ä‘á»™ thu tháº­p dá»¯ liá»‡u dá»±a trÃªn quy táº¯c kinh doanh, vÃ­ dá»¥ chá»‰ thu tháº­p nháº­t kÃ½ cáº¥p Warn, Error trá»Ÿ lÃªn.</p>
<h3>TÄƒng khoáº£ng thá»i gian Refresh</h3>
<p>Äá»ƒ tÄƒng hiá»‡u suáº¥t chá»‰ má»¥c, Elasticsearch sá»­ dá»¥ng chiáº¿n lÆ°á»£c ghi trá»… khi ghi dá»¯ liá»‡u, tá»©c lÃ  dá»¯ liá»‡u Ä‘Æ°á»£c ghi vÃ o bá»™ nhá»› trÆ°á»›c, khi vÆ°á»£t quÃ¡ 1 giÃ¢y máº·c Ä‘á»‹nh (index.refresh_interval) sáº½ thá»±c hiá»‡n má»™t hoáº¡t Ä‘á»™ng ghi, tá»©c lÃ  lÃ m má»›i dá»¯ liá»‡u segment trong bá»™ nhá»› vÃ o Ä‘Ä©a, lÃºc nÃ y chÃºng ta má»›i cÃ³ thá»ƒ tÃ¬m kiáº¿m dá»¯ liá»‡u. ÄÃ¢y lÃ  lÃ½ do táº¡i sao Elasticsearch cung cáº¥p chá»©c nÄƒng tÃ¬m kiáº¿m gáº§n thá»i gian thá»±c, chá»© khÃ´ng pháº£i lÃ  tÃ¬m kiáº¿m thá»i gian thá»±c.</p>
<p>Náº¿u há»‡ thá»‘ng cá»§a chÃºng ta khÃ´ng Ä‘áº·t yÃªu cáº§u cao vá» Ä‘á»™ trá»… dá»¯ liá»‡u, chÃºng ta <strong>cÃ³ thá»ƒ tÄƒng khoáº£ng thá»i gian lÃ m má»›i Ä‘á»ƒ giáº£m Ã¡p lá»±c há»£p nháº¥t segment vÃ  tÄƒng tá»‘c Ä‘á»™ chá»‰ má»¥c</strong>. VÃ­ dá»¥, trong quÃ¡ trÃ¬nh theo dÃµi toÃ n bá»™ chuá»—i, chÃºng tÃ´i Ä‘Ã£ Ä‘áº·t <code>index.refresh_interval</code> thÃ nh 30 giÃ¢y, giáº£m sá»‘ láº§n lÃ m má»›i. Má»™t vÃ­ dá»¥ khÃ¡c, khi tiáº¿n hÃ nh chá»‰ má»¥c toÃ n bá»™, báº¡n cÃ³ thá»ƒ táº¡m thá»i táº¯t sá»‘ láº§n lÃ m má»›i, tá»©c lÃ  Ä‘áº·t <code>index.refresh_interval</code> thÃ nh -1, sau khi dá»¯ liá»‡u Ä‘Æ°á»£c nháº­p thÃ nh cÃ´ng, hÃ£y má»Ÿ láº¡i cháº¿ Ä‘á»™ bÃ¬nh thÆ°á»ng, vÃ­ dá»¥ 30 giÃ¢y.</p>
<blockquote>
<p>Khi táº£i dá»¯ liá»‡u lá»›n, báº¡n cÃ³ thá»ƒ táº¡m thá»i khÃ´ng sá»­ dá»¥ng refresh vÃ  repliccas, Ä‘áº·t index.refresh_interval thÃ nh -1, Ä‘áº·t index.number_of_replicas thÃ nh 0.</p>
</blockquote>
<h3>Chá»‰nh sá»­a cÃ i Ä‘áº·t index_buffer_size</h3>
<p>CÃ i Ä‘áº·t bá»™ Ä‘á»‡m chá»‰ má»¥c cÃ³ thá»ƒ kiá»ƒm soÃ¡t bao nhiÃªu bá»™ nhá»› Ä‘Æ°á»£c phÃ¢n bá»• cho quÃ¡ trÃ¬nh chá»‰ má»¥c. ÄÃ¢y lÃ  má»™t cáº¥u hÃ¬nh toÃ n cáº§u, sáº½ Ä‘Æ°á»£c Ã¡p dá»¥ng cho táº¥t cáº£ cÃ¡c phÃ¢n Ä‘oáº¡n khÃ¡c nhau trÃªn má»™t nÃºt.</p>
<div class="language-yml" data-ext="yml" data-title="yml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">indices.memory.index_buffer_size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">10%</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">indices.memory.min_index_buffer_size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">48mb</span></span></code></pre>
</div><p><code>indices.memory.index_buffer_size</code> cháº¥p nháº­n má»™t pháº§n trÄƒm hoáº·c má»™t giÃ¡ trá»‹ biá»ƒu thá»‹ kÃ­ch thÆ°á»›c byte. Máº·c Ä‘á»‹nh lÃ  10%, cÃ³ nghÄ©a lÃ  10% tá»•ng bá»™ nhá»› Ä‘Æ°á»£c phÃ¢n bá»• cho nÃºt Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ lÃ m kÃ­ch thÆ°á»›c bá»™ Ä‘á»‡m chá»‰ má»¥c. GiÃ¡ trá»‹ nÃ y Ä‘Æ°á»£c chia cho cÃ¡c phÃ¢n Ä‘oáº¡n (shards) khÃ¡c nhau. Náº¿u báº¡n Ä‘áº·t pháº§n trÄƒm, báº¡n cÅ©ng cÃ³ thá»ƒ Ä‘áº·t <code>min_index_buffer_size</code> (máº·c Ä‘á»‹nh lÃ  48mb) vÃ  <code>max_index_buffer_size</code> (máº·c Ä‘á»‹nh khÃ´ng cÃ³ giá»›i háº¡n trÃªn).</p>
<h3>Chá»‰nh sá»­a cÃ i Ä‘áº·t liÃªn quan Ä‘áº¿n translog</h3>
<p>Má»™t lÃ  kiá»ƒm soÃ¡t táº§n suáº¥t hoáº¡t Ä‘á»™ng tá»« bá»™ nhá»› Ä‘áº¿n á»• cá»©ng, Ä‘á»ƒ giáº£m IO á»• cá»©ng. Báº¡n cÃ³ thá»ƒ Ä‘áº·t thá»i gian sync_interval lá»›n hÆ¡n. Máº·c Ä‘á»‹nh lÃ  5 giÃ¢y.</p>
<div class="language-yml" data-ext="yml" data-title="yml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">index.translog.sync_interval</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">5s</span></span></code></pre>
</div><p>Báº¡n cÅ©ng cÃ³ thá»ƒ kiá»ƒm soÃ¡t kÃ­ch thÆ°á»›c khá»‘i dá»¯ liá»‡u tranlog, khi Ä‘áº¡t Ä‘áº¿n kÃ­ch thÆ°á»›c threshold, dá»¯ liá»‡u má»›i sáº½ Ä‘Æ°á»£c flush vÃ o tá»‡p chá»‰ má»¥c lucene. Máº·c Ä‘á»‹nh lÃ  512mb.</p>
<div class="language-yml" data-ext="yml" data-title="yml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">index.translog.flush_threshold_size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">512mb</span></span></code></pre>
</div><h3>ChÃº Ã½ sá»­ dá»¥ng trÆ°á»ng _id</h3>
<p>Trong viá»‡c sá»­ dá»¥ng trÆ°á»ng _id, báº¡n nÃªn trÃ¡nh tÃ¹y chá»‰nh _id Ä‘á»ƒ trÃ¡nh quáº£n lÃ½ phiÃªn báº£n dá»±a trÃªn ID; nÃªn sá»­ dá»¥ng chiáº¿n lÆ°á»£c táº¡o ID máº·c Ä‘á»‹nh cá»§a ES hoáº·c sá»­ dá»¥ng ID kiá»ƒu sá»‘ lÃ m khÃ³a chÃ­nh.</p>
<h3>ChÃº Ã½ sá»­ dá»¥ng trÆ°á»ng _all vÃ  trÆ°á»ng _source</h3>
<p>Báº¡n nÃªn chÃº Ã½ Ä‘áº¿n viá»‡c sá»­ dá»¥ng trÆ°á»ng _all vÃ  trÆ°á»ng _source, tÃ¹y thuá»™c vÃ o tÃ¬nh huá»‘ng vÃ  nhu cáº§u, trÆ°á»ng _all bao gá»“m táº¥t cáº£ cÃ¡c trÆ°á»ng chá»‰ má»¥c, thuáº­n tiá»‡n cho viá»‡c tÃ¬m kiáº¿m toÃ n vÄƒn, náº¿u khÃ´ng cÃ³ nhu cáº§u nÃ y, cÃ³ thá»ƒ táº¯t; _source lÆ°u trá»¯ ná»™i dung tÃ i liá»‡u gá»‘c, náº¿u khÃ´ng cÃ³ nhu cáº§u láº¥y dá»¯ liá»‡u tÃ i liá»‡u gá»‘c, cÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a cÃ¡c trÆ°á»ng Ä‘Æ°á»£c Ä‘Æ°a vÃ o _source báº±ng cÃ¡ch Ä‘áº·t thuá»™c tÃ­nh includes, excludes.</p>
<h3>Sá»­ dá»¥ng thuá»™c tÃ­nh index má»™t cÃ¡ch há»£p lÃ½</h3>
<p>HÃ£y sá»­ dá»¥ng thuá»™c tÃ­nh index má»™t cÃ¡ch há»£p lÃ½, analyzed vÃ  not_analyzed, kiá»ƒm soÃ¡t trÆ°á»ng cÃ³ pháº£i lÃ  tá»« vá»±ng hay khÃ´ng dá»±a trÃªn yÃªu cáº§u kinh doanh. Chá»‰ cáº§n cÃ¡c trÆ°á»ng yÃªu cáº§u groupby, khi cáº¥u hÃ¬nh, Ä‘áº·t thÃ nh not_analyzed Ä‘á»ƒ tÄƒng hiá»‡u suáº¥t truy váº¥n hoáº·c phÃ¢n loáº¡i.</p>
<h3>Giáº£m sá»‘ lÆ°á»£ng báº£n sao</h3>
<p>Elasticsearch máº·c Ä‘á»‹nh sá»‘ lÆ°á»£ng báº£n sao lÃ  3, máº·c dÃ¹ Ä‘iá»u nÃ y sáº½ cáº£i thiá»‡n kháº£ nÄƒng sáºµn cÃ³ cá»§a cá»¥m, tÄƒng sá»‘ lÆ°á»£ng truy váº¥n Ä‘á»“ng thá»i, nhÆ°ng cÅ©ng sáº½ áº£nh hÆ°á»Ÿng Ä‘áº¿n hiá»‡u suáº¥t ghi chá»‰ má»¥c.</p>
<p>Trong quÃ¡ trÃ¬nh chá»‰ má»¥c, cáº§n gá»­i tÃ i liá»‡u Ä‘Æ°á»£c cáº­p nháº­t Ä‘áº¿n cÃ¡c nÃºt báº£n sao, chá» nÃºt báº£n sao hoáº¡t Ä‘á»™ng sau Ä‘Ã³ tráº£ vá» káº¿t thÃºc. Khi sá»­ dá»¥ng Elasticsearch Ä‘á»ƒ tÃ¬m kiáº¿m kinh doanh, nÃªn Ä‘áº·t sá»‘ lÆ°á»£ng báº£n sao lÃ  3, nhÆ°ng trong há»‡ thá»‘ng nháº­t kÃ½ ELK ná»™i bá»™, há»‡ thá»‘ng theo dÃµi phÃ¢n tÃ¡n, hoÃ n toÃ n cÃ³ thá»ƒ Ä‘áº·t sá»‘ lÆ°á»£ng báº£n sao lÃ  1.</p>
<h2>Tá»‘i Æ°u hÃ³a vá» truy váº¥n</h2>
<p>Khi Elasticsearch Ä‘Æ°á»£c sá»­ dá»¥ng nhÆ° má»™t truy váº¥n gáº§n thá»i gian thá»±c cho tÃ¬m kiáº¿m kinh doanh, viá»‡c tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t truy váº¥n trá»Ÿ nÃªn ráº¥t quan trá»ng.</p>
<h3>Tá»‘i Æ°u hÃ³a Ä‘á»‹nh tuyáº¿n</h3>
<p>Khi chÃºng tÃ´i truy váº¥n má»™t tÃ i liá»‡u, Elasticsearch lÃ m tháº¿ nÃ o Ä‘á»ƒ biáº¿t má»™t tÃ i liá»‡u nÃªn Ä‘Æ°á»£c lÆ°u trá»¯ trong phÃ¢n Ä‘oáº¡n nÃ o? Thá»±c táº¿, nÃ³ Ä‘Æ°á»£c tÃ­nh toÃ¡n thÃ´ng qua cÃ´ng thá»©c sau Ä‘Ã¢y.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>shard = hash(routing) % number_of_primary_shards</span></span></code></pre>
</div><p>GiÃ¡ trá»‹ máº·c Ä‘á»‹nh cá»§a routing lÃ  id cá»§a tÃ i liá»‡u, nhÆ°ng cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng giÃ¡ trá»‹ tÃ¹y chá»‰nh, cháº³ng háº¡n nhÆ° ID ngÆ°á»i dÃ¹ng.</p>
<h4>Truy váº¥n khÃ´ng cÃ³ routing</h4>
<p>Khi truy váº¥n, vÃ¬ khÃ´ng biáº¿t dá»¯ liá»‡u cáº§n truy váº¥n cá»¥ thá»ƒ náº±m trÃªn phÃ¢n Ä‘oáº¡n nÃ o, nÃªn toÃ n bá»™ quÃ¡ trÃ¬nh Ä‘Æ°á»£c chia thÃ nh 2 bÆ°á»›c:</p>
<ol>
<li>PhÃ¢n phá»‘i: Khi yÃªu cáº§u Ä‘áº¿n nÃºt Ä‘iá»u phá»‘i, nÃºt Ä‘iá»u phá»‘i sáº½ phÃ¢n phá»‘i yÃªu cáº§u truy váº¥n Ä‘áº¿n má»—i phÃ¢n Ä‘oáº¡n.</li>
<li>Tá»•ng há»£p: NÃºt Ä‘iá»u phá»‘i thu tháº­p káº¿t quáº£ truy váº¥n tá»« má»—i phÃ¢n Ä‘oáº¡n, sau Ä‘Ã³ sáº¯p xáº¿p káº¿t quáº£ truy váº¥n, sau Ä‘Ã³ tráº£ vá» káº¿t quáº£ cho ngÆ°á»i dÃ¹ng.</li>
</ol>
<h4>Truy váº¥n cÃ³ routing</h4>
<p>Khi truy váº¥n, cÃ³ thá»ƒ trá»±c tiáº¿p xÃ¡c Ä‘á»‹nh má»™t phÃ¢n Ä‘oáº¡n truy váº¥n dá»±a trÃªn thÃ´ng tin routing, khÃ´ng cáº§n truy váº¥n táº¥t cáº£ cÃ¡c phÃ¢n Ä‘oáº¡n, sau Ä‘Ã³ sáº¯p xáº¿p thÃ´ng qua nÃºt Ä‘iá»u phá»‘i.</p>
<p>NhÆ° truy váº¥n ngÆ°á»i dÃ¹ng tÃ¹y chá»‰nh á»Ÿ trÃªn, náº¿u routing Ä‘Æ°á»£c Ä‘áº·t lÃ  userid, thÃ¬ cÃ³ thá»ƒ trá»±c tiáº¿p truy váº¥n ra dá»¯ liá»‡u, hiá»‡u quáº£ tÄƒng ráº¥t nhiá»u.</p>
<h3>Filter VS Query</h3>
<p>Náº¿u cÃ³ thá»ƒ, hÃ£y sá»­ dá»¥ng ngá»¯ cáº£nh bá»™ lá»c (Filter) thay vÃ¬ ngá»¯ cáº£nh truy váº¥n (Query)</p>
<ul>
<li>Query: TÃ i liá»‡u nÃ y khá»›p vá»›i cÃ¢u truy váº¥n con nÃ y á»Ÿ má»©c Ä‘á»™ nÃ o?</li>
<li>Filter: TÃ i liá»‡u nÃ y cÃ³ khá»›p vá»›i cÃ¢u truy váº¥n con khÃ´ng?</li>
</ul>
<p>Elasticsearch chá»‰ cáº§n tráº£ lá»i "cÃ³" hoáº·c "khÃ´ng" cho cÃ¡c truy váº¥n Filter, khÃ´ng cáº§n tÃ­nh Ä‘iá»ƒm liÃªn quan nhÆ° truy váº¥n Query, Ä‘á»“ng thá»i káº¿t quáº£ Filter cÃ³ thá»ƒ Ä‘Æ°á»£c lÆ°u vÃ o bá»™ nhá»› cache.</p>
<h3>PhÃ¢n trang sÃ¢u</h3>
<p>Trong quÃ¡ trÃ¬nh sá»­ dá»¥ng Elasticsearch, nÃªn trÃ¡nh viá»‡c phÃ¢n trang lá»›n xáº£y ra.</p>
<p>Truy váº¥n phÃ¢n trang thÃ´ng thÆ°á»ng Ä‘á»u báº¯t Ä‘áº§u tá»« from vÃ  láº¥y size báº£n ghi, Ä‘iá»u nÃ y yÃªu cáº§u truy váº¥n vÃ  xáº¿p háº¡ng from+size báº£n ghi Ä‘áº§u tiÃªn trong má»—i phÃ¢n Ä‘oáº¡n. NÃºt Ä‘iá»u phá»‘i thu tháº­p from+size báº£n ghi Ä‘áº§u tiÃªn tá»« má»—i phÃ¢n Ä‘oáº¡n. NÃºt Ä‘iá»u phá»‘i sáº½ nháº­n Ä‘Æ°á»£c N*(from+size) báº£n ghi, sau Ä‘Ã³ sáº¯p xáº¿p chÃºng, sau Ä‘Ã³ tráº£ vá» from Ä‘áº¿n from+size báº£n ghi. Náº¿u from hoáº·c size ráº¥t lá»›n, sá»‘ lÆ°á»£ng báº£n ghi tham gia sáº¯p xáº¿p sáº½ tÄƒng lÃªn nhiá»u, cuá»‘i cÃ¹ng sáº½ lÃ m tÄƒng tiÃªu hao tÃ i nguyÃªn CPU.</p>
<p>CÃ³ thá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y báº±ng cÃ¡ch sá»­ dá»¥ng scroll vÃ  scroll-scan hiá»‡u quáº£ cá»§a Elasticsearch.</p>
<p>CÅ©ng cÃ³ thá»ƒ káº¿t há»£p vá»›i Ä‘áº·c Ä‘iá»ƒm kinh doanh thá»±c táº¿, náº¿u kÃ­ch thÆ°á»›c id tÃ i liá»‡u vÃ  thá»i gian táº¡o tÃ i liá»‡u lÃ  Ä‘á»“ng nháº¥t vÃ  cÃ³ thá»© tá»±, cÃ³ thá»ƒ sá»­ dá»¥ng id tÃ i liá»‡u lÃ m offset phÃ¢n trang, vÃ  Ä‘áº·t nÃ³ lÃ m má»™t Ä‘iá»u kiá»‡n truy váº¥n phÃ¢n trang.</p>
<h3>Sá»­ dá»¥ng script má»™t cÃ¡ch há»£p lÃ½</h3>
<p>ChÃºng ta biáº¿t ráº±ng viá»‡c sá»­ dá»¥ng script chá»§ yáº¿u cÃ³ 3 hÃ¬nh thá»©c, cÃ¡ch biÃªn dá»‹ch Ä‘á»™ng ná»™i tuyáº¿n, lÆ°u trá»¯ trong thÆ° viá»‡n chá»‰ má»¥c _script vÃ  lÆ°u trá»¯ dÆ°á»›i dáº¡ng script tá»‡p; cáº£nh bÃ¡o thÃ´ng thÆ°á»ng lÃ  sáº¯p xáº¿p thÃ´, nÃªn sá»­ dá»¥ng cÃ¡ch thá»© hai Ä‘á»ƒ lÆ°u trá»¯ script trong thÆ° viá»‡n chá»‰ má»¥c _script trÆ°á»›c, Ä‘á»ƒ biÃªn dá»‹ch trÆ°á»›c, sau Ä‘Ã³ sá»­ dá»¥ng thÃ´ng qua id script vÃ  káº¿t há»£p vá»›i params, cÃ³ thá»ƒ Ä‘áº¡t Ä‘Æ°á»£c mÃ´ hÃ¬nh (logic) vÃ  dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c phÃ¢n tÃ¡ch, Ä‘á»“ng thá»i dá»… dÃ ng má»Ÿ rá»™ng vÃ  báº£o dÆ°á»¡ng mÃ´-Ä‘un script. Vui lÃ²ng tham kháº£o chi tiáº¿t vá» ná»™i dung script ES táº¡i <a href="https://www.knowledgedict.com/tutorial/elasticsearch-script.html" target="_blank" rel="noopener noreferrer">Giáº£i thÃ­ch chi tiáº¿t vá» mÃ´-Ä‘un script Elasticsearch</a>.</p>
<h2>Tá»‘i Æ°u hÃ³a cáº¥u trÃºc dá»¯ liá»‡u</h2>
<p>Dá»±a trÃªn cÃ¡c tÃ¬nh huá»‘ng sá»­ dá»¥ng cá»§a Elasticsearch, cáº¥u trÃºc dá»¯ liá»‡u tÃ i liá»‡u nÃªn Ä‘Æ°á»£c káº¿t há»£p vá»›i tÃ¬nh huá»‘ng sá»­ dá»¥ng, loáº¡i bá» dá»¯ liá»‡u khÃ´ng cáº§n thiáº¿t vÃ  khÃ´ng há»£p lÃ½.</p>
<h3>Giáº£m thiá»ƒu cÃ¡c trÆ°á»ng khÃ´ng cáº§n thiáº¿t</h3>
<p>Náº¿u Elasticsearch Ä‘Æ°á»£c sá»­ dá»¥ng cho dá»‹ch vá»¥ tÃ¬m kiáº¿m kinh doanh, má»™t sá»‘ trÆ°á»ng khÃ´ng cáº§n thiáº¿t Ä‘á»ƒ tÃ¬m kiáº¿m nÃªn khÃ´ng Ä‘Æ°á»£c lÆ°u trong ES. Äiá»u nÃ y khÃ´ng chá»‰ tiáº¿t kiá»‡m khÃ´ng gian, mÃ  cÃ²n cáº£i thiá»‡n hiá»‡u suáº¥t tÃ¬m kiáº¿m vá»›i cÃ¹ng má»™t lÆ°á»£ng dá»¯ liá»‡u.</p>
<p>TrÃ¡nh sá»­ dá»¥ng giÃ¡ trá»‹ Ä‘á»™ng lÃ m trÆ°á»ng, viá»‡c tÄƒng mapping Ä‘á»™ng cÃ³ thá»ƒ dáº«n Ä‘áº¿n sá»± cá»‘ á»Ÿ cá»¥m; tÆ°Æ¡ng tá»±, cáº§n kiá»ƒm soÃ¡t sá»‘ lÆ°á»£ng trÆ°á»ng, khÃ´ng láº­p chá»‰ má»¥c cho cÃ¡c trÆ°á»ng khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng trong kinh doanh. Kiá»ƒm soÃ¡t sá»‘ lÆ°á»£ng trÆ°á»ng chá»‰ má»¥c, Ä‘á»™ sÃ¢u cá»§a mapping, loáº¡i trÆ°á»ng chá»‰ má»¥c, lÃ  quan trá»ng nháº¥t trong viá»‡c tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t ES.</p>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ cÃ i Ä‘áº·t máº·c Ä‘á»‹nh cá»§a ES vá» sá»‘ lÆ°á»£ng trÆ°á»ng, Ä‘á»™ sÃ¢u mapping:</p>
<div class="language-yml" data-ext="yml" data-title="yml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">index.mapping.nested_objects.limit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">10000</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">index.mapping.total_fields.limit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1000</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">index.mapping.depth.limit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">20</span></span></code></pre>
</div><h3>Nested Object vs Parent/Child</h3>
<p>Háº¡n cháº¿ sá»­ dá»¥ng cÃ¡c trÆ°á»ng nested hoáº·c parent/child, khÃ´ng sá»­ dá»¥ng náº¿u khÃ´ng cáº§n thiáº¿t; nested query cháº­m, parent/child query cÃ²n cháº­m hÆ¡n, cháº­m hÆ¡n nested query hÃ ng trÄƒm láº§n; vÃ¬ váº­y, náº¿u cÃ³ thá»ƒ giáº£i quyáº¿t á»Ÿ giai Ä‘oáº¡n thiáº¿t káº¿ mapping (thiáº¿t káº¿ báº£ng rá»™ng lá»›n hoáº·c sá»­ dá»¥ng cáº¥u trÃºc dá»¯ liá»‡u thÃ´ng minh), thÃ¬ khÃ´ng nÃªn sá»­ dá»¥ng mapping quan há»‡ cha-con.</p>
<p>Náº¿u báº¡n cáº§n sá»­ dá»¥ng nested fields, hÃ£y Ä‘áº£m báº£o khÃ´ng cÃ³ quÃ¡ nhiá»u trÆ°á»ng nested, hiá»‡n táº¡i giá»›i háº¡n máº·c Ä‘á»‹nh cá»§a ES lÃ  50. Bá»Ÿi vÃ¬ Ä‘á»‘i vá»›i 1 tÃ i liá»‡u, má»—i trÆ°á»ng nested sáº½ táº¡o ra má»™t tÃ i liá»‡u Ä‘á»™c láº­p, Ä‘iá»u nÃ y sáº½ lÃ m tÄƒng sá»‘ lÆ°á»£ng tÃ i liá»‡u má»™t cÃ¡ch Ä‘Ã¡ng ká»ƒ, áº£nh hÆ°á»Ÿng Ä‘áº¿n hiá»‡u suáº¥t truy váº¥n, Ä‘áº·c biá»‡t lÃ  hiá»‡u suáº¥t JOIN.</p>
<div class="language-yml" data-ext="yml" data-title="yml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">index.mapping.nested_fields.limit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">50</span></span></code></pre>
</div><p>| So sÃ¡nh | Nested Object                        | Parent/Child                                       |<br>
| :</p>
]]></content:encoded>
    </item>
    <item>
      <title>Elasticsearch Overview</title>
      <link>https://vanhung4499.github.io/database/elasticsearch/overview.html</link>
      <guid>https://vanhung4499.github.io/database/elasticsearch/overview.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elasticsearch Overview</source>
      <description>Elasticsearch MOC Elasticsearch lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch dá»¯ liá»‡u dá»±a trÃªn Lucene, cung cáº¥p má»™t dá»‹ch vá»¥ phÃ¢n tÃ¡n. Elasticsearch lÃ  má»™t sáº£n pháº©m mÃ£ nguá»“n má»Ÿ tuÃ¢n theo ...</description>
      <category>elasticssearch</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>Elasticsearch lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch dá»¯ liá»‡u dá»±a trÃªn Lucene, cung cáº¥p má»™t dá»‹ch vá»¥ phÃ¢n tÃ¡n. Elasticsearch lÃ  má»™t sáº£n pháº©m mÃ£ nguá»“n má»Ÿ tuÃ¢n theo cÃ¡c Ä‘iá»u khoáº£n mÃ£ nguá»“n má»Ÿ cá»§a Apache vÃ  hiá»‡n Ä‘ang lÃ  cÃ´ng cá»¥ tÃ¬m kiáº¿m doanh nghiá»‡p phá»• biáº¿n.</p>
</blockquote>
<h2>ğŸ“– Contents</h2>
]]></content:encoded>
    </item>
    <item>
      <title>Elasticsearch Query</title>
      <link>https://vanhung4499.github.io/database/elasticsearch/query.html</link>
      <guid>https://vanhung4499.github.io/database/elasticsearch/query.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elasticsearch Query</source>
      <description>Elasticsearch Query CÃ¢u truy váº¥n Elasticsearch sá»­ dá»¥ng interface dá»±a trÃªn phong cÃ¡ch RESTful Ä‘Æ°á»£c Ä‘Ã³ng gÃ³i thÃ nh Ä‘á»‘i tÆ°á»£ng JSON, Ä‘Æ°á»£c gá»i lÃ  Query DSL. Elasticsearch chia cÃ¡c tr...</description>
      <category>elasticssearch</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<p>CÃ¢u truy váº¥n Elasticsearch sá»­ dá»¥ng interface dá»±a trÃªn phong cÃ¡ch RESTful Ä‘Æ°á»£c Ä‘Ã³ng gÃ³i thÃ nh Ä‘á»‘i tÆ°á»£ng JSON, Ä‘Æ°á»£c gá»i lÃ  Query DSL. Elasticsearch chia cÃ¡c truy váº¥n thÃ nh cÃ¡c loáº¡i chÃ­nh sau: <strong>truy váº¥n toÃ n vÄƒn</strong>, <strong>truy váº¥n tá»« khoÃ¡</strong>, <strong>truy váº¥n káº¿t há»£p</strong>, <strong>truy váº¥n lá»“ng nhau</strong>, <strong>truy váº¥n vá»‹ trÃ­</strong>, <strong>truy váº¥n Ä‘áº·c biá»‡t</strong>. Má»™t cÃ¡ch phÃ¢n loáº¡i khÃ¡c cá»§a Elasticsearch truy váº¥n dá»±a vÃ o cÆ¡ cháº¿, má»™t lÃ  dá»±a vÃ o tá»« khoÃ¡ truy váº¥n Ä‘Æ°á»£c ngÆ°á»i dÃ¹ng nháº­p vÃ o, thÃ´ng qua mÃ´ hÃ¬nh xáº¿p háº¡ng Ä‘á»ƒ tÃ­nh toÃ¡n <strong>má»©c Ä‘á»™ liÃªn quan</strong> giá»¯a tÃ i liá»‡u vÃ  tá»« khoÃ¡ truy váº¥n, vÃ  tráº£ vá» dá»±a trÃªn thá»© tá»± Ä‘iá»ƒm sá»‘; cÃ¡ch khÃ¡c lÃ  <strong>cÆ¡ cháº¿ lá»c</strong>, chá»‰ lá»c tÃ i liá»‡u dá»±a trÃªn Ä‘iá»u kiá»‡n lá»c, khÃ´ng tÃ­nh toÃ¡n Ä‘iá»ƒm sá»‘, tá»‘c Ä‘á»™ tÆ°Æ¡ng Ä‘á»‘i nhanh hÆ¡n.</p>
<h2>Truy váº¥n toÃ n vÄƒn</h2>
<p>Truy váº¥n toÃ n vÄƒn ES chá»§ yáº¿u Ä‘Æ°á»£c sá»­ dá»¥ng trÃªn cÃ¡c trÆ°á»ng toÃ n vÄƒn, chá»§ yáº¿u xem xÃ©t má»©c Ä‘á»™ liÃªn quan (Relevance) giá»¯a tá»« khoÃ¡ truy váº¥n vÃ  tÃ i liá»‡u.</p>
<h3>intervals query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-intervals-query.html" target="_blank" rel="noopener noreferrer"><strong><code>intervals query</code></strong></a> tráº£ vá» tÃ i liá»‡u dá»±a trÃªn thá»© tá»± vÃ  Ä‘á»™ tÆ°Æ¡ng quan cá»§a tá»« khoÃ¡ khá»›p.</p>
<p>intervals query sá»­ dá»¥ng <strong>quy táº¯c khá»›p</strong>, cÃ¡c quy táº¯c nÃ y Ä‘Æ°á»£c Ã¡p dá»¥ng cho cÃ¡c term trong trÆ°á»ng Ä‘Ã£ chá»‰ Ä‘á»‹nh.</p>
<p>VÃ­ dá»¥: VÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y tÃ¬m kiáº¿m trÆ°á»ng <code>query</code>, giÃ¡ trá»‹ tÃ¬m kiáº¿m lÃ  <code>my favorite food</code>, khÃ´ng cÃ³ báº¥t ká»³ khoáº£ng tráº¯ng nÃ o; sau Ä‘Ã³ lÃ  trÆ°á»ng <code>my_text</code> tÃ¬m kiáº¿m term khá»›p <code>hot water</code>, <code>cold porridge</code>.</p>
<p>Khi giÃ¡ trá»‹ cá»§a my_text lÃ  <code>my favorite food is cold porridge</code>, nÃ³ sáº½ khá»›p thÃ nh cÃ´ng, nhÆ°ng <code>when it's cold my favorite food is porridge</code> thÃ¬ khÃ´ng khá»›p.</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> _search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "intervals"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "my_text"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "all_of"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "ordered"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#98C379;--shiki-dark:#98C379">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "intervals"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">              "match"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">                "query"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "my favorite food",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">                "max_gaps"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> 0,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">                "ordered"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">              }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">              "any_of"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">                "intervals"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                  { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"match"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "query"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "hot water"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span><span style="color:#98C379;--shiki-dark:#98C379"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                  { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"match"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "query"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "cold porridge"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">              }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">          ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>match query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query.html" target="_blank" rel="noopener noreferrer"><strong><code>match query</code></strong></a> <strong>Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ¬m kiáº¿m má»™t trÆ°á»ng Ä‘Æ¡n</strong>, Ä‘áº§u tiÃªn sáº½ phÃ¢n tÃ­ch cÃ¢u truy váº¥n (qua analyzer), chá»§ yáº¿u lÃ  Ä‘á»ƒ tÃ¡ch cÃ¢u truy váº¥n thÃ nh cÃ¡c tá»«, sau khi tÃ¡ch tá»«, báº¥t ká»³ tá»« nÃ o trong cÃ¢u truy váº¥n khá»›p, tÃ i liá»‡u sáº½ Ä‘Æ°á»£c tÃ¬m tháº¥y, theo máº·c Ä‘á»‹nh, nÃ³ tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i viá»‡c thá»±c hiá»‡n hoáº¡t Ä‘á»™ng khá»›p or sau khi tÃ¡ch tá»«.</p>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query.html" target="_blank" rel="noopener noreferrer"><strong><code>match query</code></strong></a> lÃ  truy váº¥n tiÃªu chuáº©n Ä‘á»ƒ thá»±c hiá»‡n tÃ¬m kiáº¿m toÃ n vÄƒn, bao gá»“m cÃ¡c tÃ¹y chá»n khá»›p má».</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> kibana_sample_data_ecommerce/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "customer_full_name"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "George Hubbard"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>TÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i hoáº¡t Ä‘á»™ng khá»›p <code>or</code>, nhÆ° sau:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> kibana_sample_data_ecommerce/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "customer_full_name"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "George Hubbard",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "operator"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "or"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>match query viáº¿t táº¯t</h4>
<p>Báº¡n cÃ³ thá»ƒ Ä‘Æ¡n giáº£n hÃ³a cÃº phÃ¡p truy váº¥n khá»›p báº±ng cÃ¡ch káº¿t há»£p tham sá»‘ <code>&lt;field&gt;</code> vÃ  <code>query</code>.</p>
<p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "message"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "this is a test"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>match query hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o</h4>
<p>Truy váº¥n khá»›p lÃ  kiá»ƒu boolean. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  nÃ³ sáº½ phÃ¢n tÃ­ch vÄƒn báº£n Ä‘Æ°á»£c cung cáº¥p, quÃ¡ trÃ¬nh phÃ¢n tÃ­ch sáº½ xÃ¢y dá»±ng má»™t truy váº¥n boolean tá»« vÄƒn báº£n Ä‘Æ°á»£c cung cáº¥p. Tham sá»‘ <code>operator</code> cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘áº·t thÃ nh <code>or</code> hoáº·c <code>and</code> Ä‘á»ƒ kiá»ƒm soÃ¡t cÃ¡c má»‡nh Ä‘á» con boolean (máº·c Ä‘á»‹nh lÃ  <code>or</code>). Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng tham sá»‘ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-minimum-should-match.html" target="_blank" rel="noopener noreferrer"><code>minimum_should_match</code></a> Ä‘á»ƒ Ä‘áº·t sá»‘ lÆ°á»£ng tá»‘i thiá»ƒu cÃ¡c má»‡nh Ä‘á» <code>should</code> tÃ¹y chá»n cáº§n pháº£i khá»›p.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> kibana_sample_data_ecommerce/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "customer_full_name"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "George Hubbard",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "operator"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "and"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Báº¡n cÃ³ thá»ƒ Ä‘áº·t <code>analyzer</code> Ä‘á»ƒ kiá»ƒm soÃ¡t analyzer nÃ o sáº½ thá»±c hiá»‡n quÃ¡ trÃ¬nh phÃ¢n tÃ­ch vÄƒn báº£n. NÃ³ máº·c Ä‘á»‹nh lÃ  analyzer Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh rÃµ trong Ä‘á»‹nh nghÄ©a mapping trÆ°á»ng hoáº·c analyzer tÃ¬m kiáº¿m máº·c Ä‘á»‹nh.</p>
<p>Tham sá»‘ <code>lenient</code> cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘áº·t thÃ nh <code>true</code> Ä‘á»ƒ bá» qua cÃ¡c ngoáº¡i lá»‡ do khÃ´ng khá»›p kiá»ƒu dá»¯ liá»‡u, cháº³ng háº¡n nhÆ° cá»‘ gáº¯ng truy váº¥n chuá»—i sá»‘ trÃªn trÆ°á»ng sá»‘. Máº·c Ä‘á»‹nh lÃ  <code>false</code>.</p>
<h4>match query khá»›p má»</h4>
<p><code>fuzziness</code> cho phÃ©p khá»›p má» dá»±a trÃªn loáº¡i trÆ°á»ng Ä‘ang Ä‘Æ°á»£c truy váº¥n. Xem cáº¥u hÃ¬nh <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/common-options.html#fuzziness" target="_blank" rel="noopener noreferrer">Fuzziness</a>.</p>
<p>Trong trÆ°á»ng há»£p nÃ y, báº¡n cÃ³ thá»ƒ Ä‘áº·t <code>prefix_length</code> vÃ  <code>max_expansions</code> Ä‘á»ƒ kiá»ƒm soÃ¡t khá»›p má». Náº¿u Ä‘Ã£ Ä‘áº·t cÃ¡c tÃ¹y chá»n má», truy váº¥n sáº½ sá»­ dá»¥ng <code>top_terms_blended_freqs_${max_expansions}</code> lÃ m phÆ°Æ¡ng phÃ¡p viáº¿t láº¡i cá»§a nÃ³, tham sá»‘ <code>fuzzy_rewrite</code> cho phÃ©p kiá»ƒm soÃ¡t cÃ¡ch truy váº¥n sáº½ Ä‘Æ°á»£c viáº¿t láº¡i.</p>
<p>Theo máº·c Ä‘á»‹nh, cho phÃ©p Ä‘áº£o ngÆ°á»£c má» (<code>ab</code> â†’ <code>ba</code>), nhÆ°ng cÃ³ thá»ƒ bá»‹ vÃ´ hiá»‡u hÃ³a báº±ng cÃ¡ch Ä‘áº·t <code>fuzzy_transpositions</code> thÃ nh <code>false</code>.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "message"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "this is a testt",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "fuzziness"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "AUTO"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>zero terms query</h4>
<p>Náº¿u analyzer Ä‘Æ°á»£c sá»­ dá»¥ng loáº¡i bá» táº¥t cáº£ cÃ¡c token trong truy váº¥n, thÃ¬ hÃ nh vi máº·c Ä‘á»‹nh lÃ  khÃ´ng khá»›p vá»›i báº¥t ká»³ tÃ i liá»‡u nÃ o. Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng tÃ¹y chá»n <code>zero_terms_query</code> Ä‘á»ƒ thay Ä‘á»•i hÃ nh vi máº·c Ä‘á»‹nh, nÃ³ cháº¥p nháº­n <code>none</code> (máº·c Ä‘á»‹nh) vÃ  <code>all</code> (tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i truy váº¥n <code>match_all</code>).</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "message"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "to be or not to be",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "operator"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "and",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "zero_terms_query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "all"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3>match_bool_prefix query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-bool-prefix-query.html" target="_blank" rel="noopener noreferrer"><strong><code>match_bool_prefix query</code></strong></a> phÃ¢n tÃ­ch Ä‘áº§u vÃ o cá»§a nÃ³ vÃ  xÃ¢y dá»±ng má»™t truy váº¥n boolean dá»±a trÃªn cÃ¡c tá»« nÃ y. Má»—i tá»«, ngoáº¡i trá»« tá»« cuá»‘i cÃ¹ng, Ä‘Æ°á»£c sá»­ dá»¥ng trong má»™t truy váº¥n tá»«. Tá»« cuá»‘i cÃ¹ng Ä‘Æ°á»£c sá»­ dá»¥ng trong má»™t <code>prefix query</code>.</p>
<p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match_bool_prefix"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "message"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "quick brown f"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>TÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "bool"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "should"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"term"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "message":</span><span style="color:#98C379;--shiki-dark:#98C379"> "quick"</span><span style="color:#98C379;--shiki-dark:#98C379"> }},</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"term"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "message":</span><span style="color:#98C379;--shiki-dark:#98C379"> "brown"</span><span style="color:#98C379;--shiki-dark:#98C379"> }},</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"prefix"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "message":</span><span style="color:#98C379;--shiki-dark:#98C379"> "f"}}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Má»™t sá»± khÃ¡c biá»‡t quan trá»ng giá»¯a <code>match_bool_prefix query</code> vÃ  <code>match_phrase_prefix query</code> lÃ : <code>match_phrase_prefix query</code> sáº½ khá»›p cÃ¡c term cá»§a nÃ³ nhÆ° má»™t cá»¥m tá»«, nhÆ°ng <code>match_bool_prefix query</code> cÃ³ thá»ƒ khá»›p cÃ¡c term cá»§a nÃ³ á»Ÿ báº¥t ká»³ vá»‹ trÃ­ nÃ o.</p>
<p>VÃ­ dá»¥ truy váº¥n <code>match_bool_prefix query</code> á»Ÿ trÃªn cÃ³ thá»ƒ khá»›p vá»›i cÃ¡c trÆ°á»ng chá»©a <code>quick brown fox</code>, nhÆ°ng nÃ³ cÅ©ng cÃ³ thá»ƒ khá»›p nhanh vá»›i <code>brown fox</code>. NÃ³ cÅ©ng cÃ³ thá»ƒ khá»›p vá»›i cÃ¡c trÆ°á»ng chá»©a <code>quick</code>, <code>brown</code> vÃ  báº¯t Ä‘áº§u báº±ng <code>f</code>, xuáº¥t hiá»‡n á»Ÿ báº¥t ká»³ vá»‹ trÃ­ nÃ o.</p>
<h3>match_phrase query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query-phrase.html" target="_blank" rel="noopener noreferrer"><strong><code>match_phrase query</code></strong></a> tá»©c lÃ  khá»›p cá»¥m tá»«, Ä‘áº§u tiÃªn nÃ³ sáº½ tÃ¡ch ná»™i dung query thÃ nh cÃ¡c tá»«, bá»™ tÃ¡ch tá»« cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¹y chá»‰nh, Ä‘á»“ng thá»i tÃ i liá»‡u cÅ©ng pháº£i Ä‘Ã¡p á»©ng hai Ä‘iá»u kiá»‡n sau Ä‘Ã¢y má»›i Ä‘Æ°á»£c tÃ¬m kiáº¿m:</p>
<ol>
<li><strong>Táº¥t cáº£ cÃ¡c tá»« sau khi tÃ¡ch pháº£i xuáº¥t hiá»‡n trong trÆ°á»ng nÃ y (tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i hoáº¡t Ä‘á»™ng and)</strong>.</li>
<li><strong>Thá»© tá»± cá»§a cÃ¡c tá»« trong trÆ°á»ng pháº£i phÃ¹ há»£p</strong>.</li>
</ol>
<p>VÃ­ dá»¥, cÃ³ 3 tÃ i liá»‡u sau, sá»­ dá»¥ng <strong><code>match_phrase</code></strong> Ä‘á»ƒ truy váº¥n "How are you", chá»‰ cÃ³ hai tÃ i liá»‡u Ä‘áº§u tiÃªn Ä‘Æ°á»£c khá»›p:</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> demo/_create/1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"desc"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "How are you"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> demo/_create/2</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"desc"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "How are you, Jack?"}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> demo/_create/3</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"desc"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "are you"}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> demo/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match_phrase"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "desc"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "How are you"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>Ghi chÃº:</p>
<p>Má»™t tÃ i liá»‡u Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh lÃ  khá»›p vá»›i cá»¥m tá»« "How are you" pháº£i Ä‘Ã¡p á»©ng cÃ¡c yÃªu cáº§u sau Ä‘Ã¢y:</p>
<ul>
<li>How, are vÃ  you cáº§n pháº£i xuáº¥t hiá»‡n trong trÆ°á»ng.</li>
<li>Vá»‹ trÃ­ cá»§a are pháº£i lá»›n hÆ¡n vá»‹ trÃ­ cá»§a How lÃ  1.</li>
<li>Vá»‹ trÃ­ cá»§a you pháº£i lá»›n hÆ¡n vá»‹ trÃ­ cá»§a How lÃ  2.</li>
</ul>
</blockquote>
<h3>match_phrase_prefix query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query-phrase-prefix.html" target="_blank" rel="noopener noreferrer"><strong><code>match_phrase_prefix query</code></strong></a> tÆ°Æ¡ng tá»± nhÆ° <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query-phrase.html" target="_blank" rel="noopener noreferrer"><strong><code>match_phrase query</code></strong></a>, chá»‰ khÃ¡c lÃ  <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query-phrase-prefix.html" target="_blank" rel="noopener noreferrer"><strong><code>match_phrase_prefix query</code></strong></a> sáº½ xem term cuá»‘i cÃ¹ng nhÆ° má»™t prefix match.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> demo/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match_phrase_prefix"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "desc"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "are yo"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Trong vÃ­ dá»¥ nÃ y, Elasticsearch sáº½ tÃ¬m kiáº¿m cÃ¡c tÃ i liá»‡u cÃ³ trÆ°á»ng "desc" chá»©a cá»¥m tá»« báº¯t Ä‘áº§u báº±ng "are yo". Cá»¥m tá»« nÃ y cÃ³ thá»ƒ hoÃ n thÃ nh vá»›i báº¥t ká»³ tá»« nÃ o báº¯t Ä‘áº§u báº±ng "yo", cháº³ng háº¡n nhÆ° "you" hoáº·c "yoga". Äiá»u nÃ y cÃ³ thá»ƒ há»¯u Ã­ch khi báº¡n muá»‘n tÃ¬m kiáº¿m má»™t cá»¥m tá»« nhÆ°ng chá»‰ biáº¿t má»™t pháº§n cá»§a nÃ³.</p>
<h3>multi_match query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html" target="_blank" rel="noopener noreferrer"><strong><code>multi_match query</code></strong></a> lÃ  má»™t phiÃªn báº£n nÃ¢ng cáº¥p cá»§a <strong><code>match query</code></strong>, <strong>Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ¬m kiáº¿m trÃªn nhiá»u trÆ°á»ng</strong>.</p>
<p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> kibana_sample_data_ecommerce/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "multi_match"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 34.98,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "fields"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "taxful_total_price"</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "taxless_total_price"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>TrÆ°á»ng tÃ¬m kiáº¿m cá»§a <strong><code>multi_match query</code></strong> cÃ³ thá»ƒ Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh báº±ng cÃ¡ch sá»­ dá»¥ng kÃ½ tá»± Ä‘áº¡i diá»‡n, vÃ­ dá»¥ nhÆ° sau:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> kibana_sample_data_ecommerce/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "multi_match"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 34.98,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "fields"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "taxful_*"</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "taxless_total_price"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Äá»“ng thá»i, báº¡n cÅ©ng cÃ³ thá»ƒ <strong>chá»‰ Ä‘á»‹nh trá»ng sá»‘ cá»§a trÆ°á»ng tÃ¬m kiáº¿m báº±ng cÃ¡ch sá»­ dá»¥ng kÃ½ hiá»‡u mÅ©</strong>.</p>
<p>VÃ­ dá»¥: chá»‰ Ä‘á»‹nh trá»ng sá»‘ cá»§a trÆ°á»ng taxful_total_price lÃ  gáº¥p ba láº§n trÆ°á»ng taxless_total_price, lá»‡nh nhÆ° sau:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> kibana_sample_data_ecommerce/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "multi_match"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 34.98,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "fields"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "taxful_total_price^3"</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "taxless_total_price"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Äiá»u nÃ y cÃ³ nghÄ©a lÃ  káº¿t quáº£ tÃ¬m kiáº¿m tá»« trÆ°á»ng "taxful_total_price" sáº½ cÃ³ trá»ng sá»‘ cao hÆ¡n ba láº§n so vá»›i káº¿t quáº£ tá»« trÆ°á»ng "taxless_total_price".</p>
<h3>combined_fields query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-combined-fields-query.html" target="_blank" rel="noopener noreferrer"><strong><code>combined_fields query</code></strong></a> há»— trá»£ tÃ¬m kiáº¿m nhiá»u trÆ°á»ng vÄƒn báº£n, giá»‘ng nhÆ° ná»™i dung cá»§a chÃºng Ä‘Ã£ Ä‘Æ°á»£c láº­p chá»‰ má»¥c vÃ o má»™t trÆ°á»ng káº¿t há»£p. Truy váº¥n nÃ y táº¡o ra má»™t gÃ³c nhÃ¬n dá»±a trÃªn term cá»§a chuá»—i Ä‘áº§u vÃ o: Ä‘áº§u tiÃªn nÃ³ phÃ¢n tÃ­ch chuá»—i truy váº¥n thÃ nh cÃ¡c term Ä‘á»™c láº­p, sau Ä‘Ã³ tÃ¬m kiáº¿m má»—i term trong táº¥t cáº£ cÃ¡c trÆ°á»ng. Khi káº¿t quáº£ phÃ¹ há»£p cÃ³ thá»ƒ tráº£i qua nhiá»u trÆ°á»ng vÄƒn báº£n, truy váº¥n nÃ y Ä‘áº·c biá»‡t há»¯u Ã­ch, vÃ­ dá»¥ nhÆ° tiÃªu Ä‘á», tÃ³m táº¯t vÃ  ná»™i dung cá»§a má»™t bÃ i viáº¿t:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "combined_fields"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379">      "database systems",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "fields"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">     [ </span><span style="color:#98C379;--shiki-dark:#98C379">"title",</span><span style="color:#98C379;--shiki-dark:#98C379"> "abstract",</span><span style="color:#98C379;--shiki-dark:#98C379"> "body"],</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "operator"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379">   "and"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>Trá»ng sá»‘ tiá»n tá»‘ trÆ°á»ng</h4>
<p>Trá»ng sá»‘ tiá»n tá»‘ trÆ°á»ng Ä‘Æ°á»£c tÃ­nh toÃ¡n dá»±a trÃªn mÃ´ hÃ¬nh trÆ°á»ng káº¿t há»£p. VÃ­ dá»¥, náº¿u trá»ng sá»‘ cá»§a trÆ°á»ng tiÃªu Ä‘á» lÃ  2, thÃ¬ khi tÃ­nh Ä‘iá»ƒm Ä‘á»™ phÃ¹ há»£p, má»—i term táº¡o ra tá»« trÆ°á»ng tiÃªu Ä‘á» sáº½ Ä‘Æ°á»£c tÃ­nh Ä‘iá»ƒm nhÆ° thá»ƒ nÃ³ xuáº¥t hiá»‡n hai láº§n.</p>
<h3>common_terms query</h3>
<blockquote>
<p>ÄÃ£ bá»‹ loáº¡i bá» tá»« phiÃªn báº£n 7.3.0</p>
</blockquote>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-common-terms-query.html" target="_blank" rel="noopener noreferrer"><strong><code>common_terms query</code></strong></a> lÃ  má»™t giáº£i phÃ¡p Ä‘á»ƒ cáº£i thiá»‡n Ä‘á»™ chÃ­nh xÃ¡c vÃ  Ä‘á»™ bao phá»§ cá»§a tÃ¬m kiáº¿m mÃ  khÃ´ng lÃ m giáº£m hiá»‡u suáº¥t, thay tháº¿ cho viá»‡c sá»­ dá»¥ng tá»« dá»«ng (stop words).</p>
<p>Má»—i tá»« trong truy váº¥n Ä‘á»u cÃ³ má»™t chi phÃ­ nháº¥t Ä‘á»‹nh. VÃ­ dá»¥, khi tÃ¬m kiáº¿m "The brown fox", truy váº¥n sáº½ Ä‘Æ°á»£c phÃ¢n tÃ­ch thÃ nh ba tá»«: "the", "brown", vÃ  "fox", má»—i tá»« sáº½ thá»±c hiá»‡n má»™t truy váº¥n trong chá»‰ má»¥c. RÃµ rÃ ng, sá»‘ lÆ°á»£ng tÃ i liá»‡u chá»©a "the" ráº¥t nhiá»u, so vá»›i cÃ¡c tá»« khÃ¡c, táº§m quan trá»ng cá»§a "the" tháº¥p hÆ¡n nhiá»u. CÃ¡ch giáº£i quyáº¿t truyá»n thá»‘ng lÃ  coi "the" lÃ  má»™t tá»« dá»«ng, loáº¡i bá» tá»« dá»«ng cÃ³ thá»ƒ giáº£m kÃ­ch thÆ°á»›c chá»‰ má»¥c vÃ  giáº£m viá»‡c thu háº¹p tá»« dá»«ng khi tÃ¬m kiáº¿m.</p>
<p>Tuy nhiÃªn, máº·c dÃ¹ tá»« dá»«ng khÃ´ng áº£nh hÆ°á»Ÿng nhiá»u Ä‘áº¿n viá»‡c Ä‘Ã¡nh giÃ¡ tÃ i liá»‡u, nhÆ°ng khi tá»« dá»«ng váº«n cÃ³ Ã½ nghÄ©a quan trá»ng, viá»‡c loáº¡i bá» tá»« dá»«ng khÃ´ng pháº£i lÃ  giáº£i phÃ¡p hoÃ n háº£o. Náº¿u loáº¡i bá» tá»« dá»«ng, báº¡n khÃ´ng thá»ƒ phÃ¢n biá»‡t "happy" vÃ  "not happy", "The" trong "To be or not to be" sáº½ khÃ´ng tá»“n táº¡i trong chá»‰ má»¥c, lÃ m giáº£m Ä‘á»™ chÃ­nh xÃ¡c vÃ  Ä‘á»™ bao phá»§ cá»§a tÃ¬m kiáº¿m.</p>
<p><code>common_terms query</code> cung cáº¥p má»™t giáº£i phÃ¡p, nÃ³ chia nhá»¯ng tá»« sau khi phÃ¢n tÃ¡ch truy váº¥n thÃ nh tá»« quan trá»ng (tá»« cÃ³ táº§n suáº¥t tháº¥p) vÃ  tá»« khÃ´ng quan trá»ng (tá»« cÃ³ táº§n suáº¥t cao, cÅ©ng chÃ­nh lÃ  tá»« dá»«ng trÆ°á»›c Ä‘Ã¢y). Khi tÃ¬m kiáº¿m, Ä‘áº§u tiÃªn tÃ¬m kiáº¿m tÃ i liá»‡u phÃ¹ há»£p vá»›i tá»« quan trá»ng, nhá»¯ng tÃ i liá»‡u nÃ y lÃ  nhá»¯ng tÃ i liá»‡u mÃ  tá»« xuáº¥t hiá»‡n Ã­t vÃ  áº£nh hÆ°á»Ÿng lá»›n Ä‘áº¿n viá»‡c Ä‘Ã¡nh giÃ¡. Sau Ä‘Ã³, thá»±c hiá»‡n truy váº¥n thá»© hai, tÃ¬m kiáº¿m tá»« cÃ³ táº§n suáº¥t cao áº£nh hÆ°á»Ÿng Ã­t Ä‘áº¿n viá»‡c Ä‘Ã¡nh giÃ¡, nhÆ°ng khÃ´ng tÃ­nh Ä‘iá»ƒm cho táº¥t cáº£ tÃ i liá»‡u, chá»‰ tÃ­nh Ä‘iá»ƒm cho tÃ i liá»‡u Ä‘Ã£ phÃ¹ há»£p trong truy váº¥n Ä‘áº§u tiÃªn. Náº¿u má»™t truy váº¥n chá»‰ chá»©a tá»« cÃ³ táº§n suáº¥t cao, thÃ¬ sáº½ thá»±c hiá»‡n má»™t truy váº¥n Ä‘á»™c láº­p thÃ´ng qua toÃ¡n tá»­ "and", nÃ³i cÃ¡ch khÃ¡c, sáº½ tÃ¬m kiáº¿m táº¥t cáº£ cÃ¡c tá»«.</p>
<p>Tá»« lÃ  tá»« cÃ³ táº§n suáº¥t cao hay táº§n suáº¥t tháº¥p Ä‘Æ°á»£c thiáº¿t láº­p thÃ´ng qua giÃ¡ trá»‹ ngÆ°á»¡ng cutoff frequency, cÃ³ thá»ƒ lÃ  táº§n suáº¥t tuyá»‡t Ä‘á»‘i (táº§n suáº¥t lá»›n hÆ¡n 1) hoáº·c táº§n suáº¥t tÆ°Æ¡ng Ä‘á»‘i (0 ~ 1). Äiá»ƒm thÃº vá»‹ nháº¥t cá»§a <code>common_terms query</code> lÃ  nÃ³ cÃ³ thá»ƒ tá»± Ä‘iá»u chá»‰nh tá»« dá»«ng cho lÄ©nh vá»±c cá»¥ thá»ƒ, vÃ­ dá»¥, trÃªn trang web lÆ°u trá»¯ video, cÃ¡c tá»« cÃ³ táº§n suáº¥t cao nhÆ° "clip" hoáº·c "video" sáº½ tá»± Ä‘á»™ng Ä‘Æ°á»£c coi lÃ  tá»« dá»«ng, khÃ´ng cáº§n duy trÃ¬ danh sÃ¡ch thá»§ cÃ´ng.</p>
<p>VÃ­ dá»¥, tá»« cÃ³ táº§n suáº¥t xuáº¥t hiá»‡n trong tÃ i liá»‡u lá»›n hÆ¡n 0.1% sáº½ Ä‘Æ°á»£c coi lÃ  tá»« cÃ³ táº§n suáº¥t cao, tá»« cÃ³ táº§n suáº¥t cÃ³ thá»ƒ Ä‘Æ°á»£c káº¿t ná»‘i báº±ng cÃ¡c tham sá»‘ low_freq_operator vÃ  high_freq_operator. Thiáº¿t láº­p toÃ¡n tá»­ tá»« cÃ³ táº§n suáº¥t tháº¥p lÃ  "and" Ä‘á»ƒ táº¥t cáº£ cÃ¡c tá»« cÃ³ táº§n suáº¥t tháº¥p Ä‘á»u pháº£i tÃ¬m kiáº¿m, vÃ­ dá»¥ mÃ£ nhÆ° sau:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> books/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">		"common"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">			"body"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">				"query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "nelly the elephant as a cartoon",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">				"cutoff_frequency"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 0.001,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">				"low_freq_operator"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "and"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">		}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">	}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Hoáº¡t Ä‘á»™ng trÃªn tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i:</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> books/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">		"bool"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">			"must"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			  { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"term"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "body":</span><span style="color:#98C379;--shiki-dark:#98C379"> "nelly"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span><span style="color:#98C379;--shiki-dark:#98C379"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			  { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"term"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "body":</span><span style="color:#98C379;--shiki-dark:#98C379"> "elephant"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span><span style="color:#98C379;--shiki-dark:#98C379"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			  { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"term"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "body":</span><span style="color:#98C379;--shiki-dark:#98C379"> "cartoon"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			],</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">			"should"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			  { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"term"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "body":</span><span style="color:#98C379;--shiki-dark:#98C379"> "the"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span><span style="color:#98C379;--shiki-dark:#98C379"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			  { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"term"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "body":</span><span style="color:#98C379;--shiki-dark:#98C379"> "as"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span><span style="color:#98C379;--shiki-dark:#98C379"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			  { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"term"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "body":</span><span style="color:#98C379;--shiki-dark:#98C379"> "a"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">		}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">	}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>query_string query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html" target="_blank" rel="noopener noreferrer"><strong><code>query_string query</code></strong></a> lÃ  má»™t loáº¡i truy váº¥n gáº¯n káº¿t cháº·t cháº½ vá»›i cÃº phÃ¡p truy váº¥n cá»§a Lucene, cho phÃ©p sá»­ dá»¥ng nhiá»u tá»« khÃ³a Ä‘iá»u kiá»‡n Ä‘áº·c biá»‡t (nhÆ°: AND | OR | NOT) trong má»™t cÃ¢u truy váº¥n Ä‘á»ƒ tÃ¬m kiáº¿m trÃªn nhiá»u trÆ°á»ng, khuyáº¿n nghá»‹ cho ngÆ°á»i dÃ¹ng Ä‘Ã£ quen vá»›i cÃº phÃ¡p truy váº¥n cá»§a Lucene.</p>
<p>NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ sá»­ dá»¥ng <code>query_string query</code> Ä‘á»ƒ táº¡o cÃ¡c truy váº¥n phá»©c táº¡p bao gá»“m kÃ½ tá»± Ä‘áº¡i diá»‡n, tÃ¬m kiáº¿m trÃªn nhiá»u trÆ°á»ng, v.v. Máº·c dÃ¹ lÃ  phá»• biáº¿n, nhÆ°ng truy váº¥n lÃ  nghiÃªm ngáº·t, náº¿u chuá»—i truy váº¥n chá»©a báº¥t ká»³ cÃº phÃ¡p khÃ´ng há»£p lá»‡ nÃ o, sáº½ tráº£ vá» lá»—i.</p>
<p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "query_string"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "(new york city) OR (big apple)",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "default_field"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "content"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3>simple_query_string query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-simple-query-string-query.html" target="_blank" rel="noopener noreferrer"><strong><code>simple_query_string query</code></strong></a> lÃ  má»™t loáº¡i truy váº¥n phÃ¹ há»£p Ä‘á»ƒ trá»±c tiáº¿p tiáº¿p xÃºc vá»›i ngÆ°á»i dÃ¹ng vÃ  cÃ³ cÃº phÃ¡p truy váº¥n ráº¥t hoÃ n chá»‰nh, cháº¥p nháº­n cÃº phÃ¡p truy váº¥n cá»§a Lucene, khÃ´ng nÃ©m ra ngoáº¡i lá»‡ náº¿u cÃ³ lá»—i trong quÃ¡ trÃ¬nh phÃ¢n tÃ­ch cÃº phÃ¡p.</p>
<p>Máº·c dÃ¹ cÃº phÃ¡p nghiÃªm ngáº·t hÆ¡n <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html" target="_blank" rel="noopener noreferrer"><strong><code>query_string query</code></strong></a>, nhÆ°ng <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-simple-query-string-query.html" target="_blank" rel="noopener noreferrer"><strong><code>simple_query_string query</code></strong></a> khÃ´ng tráº£ vá» lá»—i cÃº phÃ¡p khÃ´ng há»£p lá»‡. NgÆ°á»£c láº¡i, nÃ³ sáº½ bá» qua báº¥t ká»³ pháº§n khÃ´ng há»£p lá»‡ nÃ o cá»§a chuá»—i truy váº¥n.</p>
<p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "simple_query_string"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\"</span><span style="color:#98C379;--shiki-dark:#98C379">fried eggs</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\"</span><span style="color:#98C379;--shiki-dark:#98C379"> +(eggplant | potato) -frittata",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "fields"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span><span style="color:#98C379;--shiki-dark:#98C379">"title^5"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"body"],</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "default_operator"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "and"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>Ã nghÄ©a cá»§a simple_query_string</h4>
<ul>
<li><code>+</code>: tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i toÃ¡n tá»­ AND</li>
<li><code>|</code>: tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i toÃ¡n tá»­ OR</li>
<li><code>-</code>: tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i toÃ¡n tá»­ NOT</li>
<li><code>"</code>: bao quanh má»™t sá»‘ token Ä‘á»ƒ chá»‰ ra cá»¥m tá»« dÃ¹ng Ä‘á»ƒ tÃ¬m kiáº¿m</li>
<li><code>*</code>: sau má»™t tá»« Ä‘á»ƒ chá»‰ ra truy váº¥n tiá»n tá»‘</li>
<li><code>(</code> vÃ  <code>)</code>: chá»‰ ra má»©c Ä‘á»™ Æ°u tiÃªn</li>
<li><code>~N</code>: sau má»™t tá»« Ä‘á»ƒ chá»‰ ra khoáº£ng cÃ¡ch chá»‰nh sá»­a (má»)</li>
<li><code>~N</code>: sau má»™t cá»¥m tá»« Ä‘á»ƒ chá»‰ ra lÆ°á»£ng trÃ n</li>
</ul>
<p>LÆ°u Ã½: Äá»ƒ sá»­ dá»¥ng cÃ¡c kÃ½ tá»± trÃªn, hÃ£y sá»­ dá»¥ng dáº¥u gáº¡ch chÃ©o ngÆ°á»£c <code>/</code> Ä‘á»ƒ thoÃ¡t.</p>
<h3>VÃ­ dá»¥ hoÃ n chá»‰nh vá» truy váº¥n toÃ n vÄƒn</h3>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#Äáº·t position_increment_gap</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> groups</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> groups</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "mappings"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "properties"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "names"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "type"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "text",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "position_increment_gap"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> groups/_mapping</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> groups/_doc</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "names"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [ </span><span style="color:#98C379;--shiki-dark:#98C379">"John Water",</span><span style="color:#98C379;--shiki-dark:#98C379"> "Water Smith"]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> groups/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match_phrase"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "names"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "Water Water",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "slop"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 100</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> groups/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match_phrase"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "names"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "Water Smith"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> groups</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong vÃ­ dá»¥ nÃ y, chÃºng tÃ´i thiáº¿t láº­p <code>position_increment_gap</code> cho trÆ°á»ng "names" trong chá»‰ má»¥c "groups". <code>position_increment_gap</code> Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ kiá»ƒm soÃ¡t cÃ¡ch Elasticsearch xá»­ lÃ½ cÃ¡c máº£ng cá»§a chuá»—i vÄƒn báº£n khi thá»±c hiá»‡n truy váº¥n cá»¥m tá»«. Trong trÆ°á»ng há»£p nÃ y, nÃ³ Ä‘Æ°á»£c cÃ i Ä‘áº·t lÃ  0, cÃ³ nghÄ©a lÃ  khÃ´ng cÃ³ khoáº£ng cÃ¡ch giá»¯a cÃ¡c pháº§n tá»­ trong máº£ng.</p>
<p>Sau Ä‘Ã³, chÃºng tÃ´i thÃªm má»™t tÃ i liá»‡u vÃ o chá»‰ má»¥c, vá»›i trÆ°á»ng "names" bao gá»“m hai chuá»—i: "John Water" vÃ  "Water Smith".</p>
<p>Tiáº¿p theo, chÃºng tÃ´i thá»±c hiá»‡n hai truy váº¥n <code>match_phrase</code> khÃ¡c nhau. Truy váº¥n Ä‘áº§u tiÃªn tÃ¬m kiáº¿m cá»¥m tá»« "Water Water" vá»›i má»™t "slop" (cho phÃ©p sá»± khÃ´ng khá»›p) lÃ  100. Truy váº¥n thá»© hai tÃ¬m kiáº¿m cá»¥m tá»« "Water Smith".</p>
<p>Cuá»‘i cÃ¹ng, chÃºng tÃ´i xÃ³a chá»‰ má»¥c "groups".</p>
<h2>Truy váº¥n tá»« khÃ³a</h2>
<p><strong><code>Term</code> (tá»« khÃ³a) lÃ  Ä‘Æ¡n vá»‹ nhá» nháº¥t Ä‘á»ƒ diá»…n Ä‘áº¡t Ã½ nghÄ©a</strong>. Cáº£ viá»‡c tÃ¬m kiáº¿m vÃ  xá»­ lÃ½ ngÃ´n ngá»¯ tá»± nhiÃªn báº±ng mÃ´ hÃ¬nh ngÃ´n ngá»¯ thá»‘ng kÃª Ä‘á»u cáº§n xá»­ lÃ½ Term.</p>
<p>Truy váº¥n toÃ n vÄƒn sáº½ phÃ¢n tÃ­ch chuá»—i truy váº¥n trÆ°á»›c khi thá»±c hiá»‡n truy váº¥n.</p>
<p>KhÃ¡c vá»›i truy váº¥n toÃ n vÄƒn, truy váº¥n tá»« khÃ³a khÃ´ng phÃ¢n tÃ¡ch tá»«, mÃ  coi Ä‘áº§u vÃ o lÃ  má»™t thá»ƒ thá»‘ng nháº¥t, tÃ¬m kiáº¿m cÃ¡c tá»« khÃ³a chÃ­nh xÃ¡c trong chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c vÃ  sá»­ dá»¥ng cÃ´ng thá»©c tÃ­nh toÃ¡n Ä‘á»™ liÃªn quan cho má»—i tÃ i liá»‡u chá»©a tá»« khÃ³a Ä‘Ã³. NÃ³i cÃ¡ch khÃ¡c: <strong>truy váº¥n tá»« khÃ³a lÃ  viá»‡c khá»›p chÃ­nh xÃ¡c tá»« khÃ³a</strong>. Truy váº¥n tá»« khÃ³a thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng cho dá»¯ liá»‡u cÃ³ cáº¥u trÃºc, nhÆ° sá»‘, ngÃ y vÃ  kiá»ƒu liá»‡t kÃª.</p>
<p>CÃ¡c loáº¡i truy váº¥n tá»« khÃ³a bao gá»“m:</p>
<ul>
<li><strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-exists-query.html" target="_blank" rel="noopener noreferrer"><code>exists</code> query</a></strong></li>
<li><strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-fuzzy-query.html" target="_blank" rel="noopener noreferrer"><code>fuzzy</code> query</a></strong></li>
<li><strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-ids-query.html" target="_blank" rel="noopener noreferrer"><code>ids</code> query</a></strong></li>
<li><strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-prefix-query.html" target="_blank" rel="noopener noreferrer"><code>prefix</code> query</a></strong></li>
<li><strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-range-query.html" target="_blank" rel="noopener noreferrer"><code>range</code> query</a></strong></li>
<li><strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-regexp-query.html" target="_blank" rel="noopener noreferrer"><code>regexp</code> query</a></strong></li>
<li><strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-term-query.html" target="_blank" rel="noopener noreferrer"><code>term</code> query</a></strong></li>
<li><strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-terms-query.html" target="_blank" rel="noopener noreferrer"><code>terms</code> query</a></strong></li>
<li><strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-type-query.html" target="_blank" rel="noopener noreferrer"><code>type</code> query</a></strong></li>
<li><strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-wildcard-query.html" target="_blank" rel="noopener noreferrer"><code>wildcard</code> query</a></strong></li>
</ul>
<h3>exists query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-exists-query.html" target="_blank" rel="noopener noreferrer"><strong><code>exists query</code></strong></a> sáº½ tráº£ vá» cÃ¡c tÃ i liá»‡u cÃ³ Ã­t nháº¥t má»™t giÃ¡ trá»‹ khÃ´ng trá»‘ng trong trÆ°á»ng.</p>
<p>VÃ¬ nhiá»u lÃ½ do, trÆ°á»ng cá»§a tÃ i liá»‡u cÃ³ thá»ƒ khÃ´ng tá»“n táº¡i giÃ¡ trá»‹ chá»‰ má»¥c:</p>
<ul>
<li>TrÆ°á»ng trong JSON lÃ  <code>null</code> hoáº·c <code>[]</code></li>
<li>TrÆ°á»ng nÃ y Ä‘Æ°á»£c cáº¥u hÃ¬nh <code>"index" : false</code> trong mapping</li>
<li>Äá»™ dÃ i giÃ¡ trá»‹ trÆ°á»ng vÆ°á»£t quÃ¡ cÃ i Ä‘áº·t <code>ignore_above</code> trong mapping</li>
<li>Äá»‹nh dáº¡ng giÃ¡ trá»‹ trÆ°á»ng khÃ´ng Ä‘Ãºng vÃ  <code>ignore_malformed</code> Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong mapping</li>
</ul>
<p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> kibana_sample_data_ecommerce/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "exists"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "field"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "email"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>CÃ¡c tÃ i liá»‡u sau sáº½ khá»›p vá»›i truy váº¥n trÃªn:</p>
<ul>
<li><code>{ "user" : "jane" }</code> cÃ³ trÆ°á»ng user vÃ  khÃ´ng trá»‘ng.</li>
<li><code>{ "user" : "" }</code> cÃ³ trÆ°á»ng user, giÃ¡ trá»‹ lÃ  chuá»—i trá»‘ng.</li>
<li><code>{ "user" : "-" }</code> cÃ³ trÆ°á»ng user, giÃ¡ trá»‹ khÃ´ng trá»‘ng.</li>
<li><code>{ "user" : [ "jane" ] }</code> cÃ³ trÆ°á»ng user, giÃ¡ trá»‹ khÃ´ng trá»‘ng.</li>
<li><code>{ "user" : [ "jane", null ] }</code> cÃ³ trÆ°á»ng user, chá»‰ cáº§n cÃ³ Ã­t nháº¥t má»™t giÃ¡ trá»‹ khÃ´ng trá»‘ng.</li>
</ul>
<p>CÃ¡c tÃ i liá»‡u sau sáº½ khÃ´ng khá»›p:</p>
<ul>
<li><code>{ "user" : null }</code> cÃ³ trÆ°á»ng user nhÆ°ng giÃ¡ trá»‹ trá»‘ng.</li>
<li><code>{ "user" : [] }</code> cÃ³ trÆ°á»ng user nhÆ°ng giÃ¡ trá»‹ trá»‘ng.</li>
<li><code>{ "user" : [null] }</code> cÃ³ trÆ°á»ng user nhÆ°ng giÃ¡ trá»‹ trá»‘ng.</li>
<li><code>{ "foo" : "bar" }</code> khÃ´ng cÃ³ trÆ°á»ng user.</li>
</ul>
<h3>fuzzy query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-fuzzy-query.html" target="_blank" rel="noopener noreferrer"><strong><code>fuzzy query</code></strong> (truy váº¥n má»)</a> tráº£ vá» cÃ¡c tÃ i liá»‡u chá»©a cÃ¡c tá»« tÆ°Æ¡ng tá»± vá»›i tá»« tÃ¬m kiáº¿m. ES sá»­ dá»¥ng <a href="https://en.wikipedia.org/wiki/Levenshtein_distance" target="_blank" rel="noopener noreferrer">Khoáº£ng cÃ¡ch chá»‰nh sá»­a Levenshtein</a> Ä‘á»ƒ Ä‘o Ä‘á»™ tÆ°Æ¡ng tá»± hoáº·c má».</p>
<p>Khoáº£ng cÃ¡ch chá»‰nh sá»­a lÃ  sá»‘ lÆ°á»£ng thay Ä‘á»•i kÃ½ tá»± Ä‘Æ¡n láº» cáº§n thiáº¿t Ä‘á»ƒ chuyá»ƒn Ä‘á»•i má»™t thuáº­t ngá»¯ thÃ nh thuáº­t ngá»¯ khÃ¡c. Nhá»¯ng thay Ä‘á»•i nÃ y cÃ³ thá»ƒ bao gá»“m:</p>
<ul>
<li>Thay Ä‘á»•i má»™t kÃ½ tá»±: (<strong>b</strong>ox -&gt; <strong>f</strong>ox)</li>
<li>XÃ³a má»™t kÃ½ tá»±: (<strong>b</strong>lack -&gt; lack)</li>
<li>ThÃªm má»™t kÃ½ tá»±: (sic -&gt; sic<strong>k</strong>)</li>
<li>Äáº£o ngÆ°á»£c hai kÃ½ tá»± liá»n ká»: (<strong>ac</strong>t â†’ <strong>ca</strong>t)</li>
</ul>
<p>Äá»ƒ tÃ¬m cÃ¡c tá»« khÃ³a tÆ°Æ¡ng tá»±, truy váº¥n má» sáº½ táº¡o ra táº¥t cáº£ cÃ¡c biáº¿n thá»ƒ hoáº·c táº­p má»Ÿ rá»™ng cÃ³ thá»ƒ cá»§a tá»« khÃ³a tÃ¬m kiáº¿m trong khoáº£ng cÃ¡ch chá»‰nh sá»­a Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh. Sau Ä‘Ã³, nÃ³ tráº£ vá» cÃ¡c tÃ i liá»‡u khá»›p hoÃ n toÃ n vá»›i báº¥t ká»³ táº­p má»Ÿ rá»™ng nÃ o.</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> books/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "fuzzy"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "user.id"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "value"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "ki",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "fuzziness"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "AUTO",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "max_expansions"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 50,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "prefix_length"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 0,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "transpositions"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#98C379;--shiki-dark:#98C379">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "rewrite"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "constant_score"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>LÆ°u Ã½: Náº¿u <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html#query-dsl-allow-expensive-queries" target="_blank" rel="noopener noreferrer"><code>search.allow_expensive_queries</code></a> Ä‘Ã£ Ä‘Æ°á»£c cáº¥u hÃ¬nh, thÃ¬ truy váº¥n má» khÃ´ng thá»ƒ Ä‘Æ°á»£c thá»±c thi.</p>
<h3>ids query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-ids-query.html" target="_blank" rel="noopener noreferrer"><strong><code>ids query</code></strong></a> tráº£ vá» cÃ¡c tÃ i liá»‡u dá»±a trÃªn ID. Truy váº¥n nÃ y sá»­ dá»¥ng ID tÃ i liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ trong trÆ°á»ng <code>_id</code>.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "ids"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "values"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span><span style="color:#98C379;--shiki-dark:#98C379">"1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"4",</span><span style="color:#98C379;--shiki-dark:#98C379"> "100"]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3>prefix query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-prefix-query.html#prefix-query-ex-request" target="_blank" rel="noopener noreferrer"><strong><code>prefix query</code></strong></a> Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ truy váº¥n cÃ¡c tÃ i liá»‡u cÃ³ chá»©a tiá»n tá»‘ chá»‰ Ä‘á»‹nh trong má»™t trÆ°á»ng nÃ o Ä‘Ã³.</p>
<p>VÃ­ dá»¥, Ä‘á»ƒ truy váº¥n cÃ¡c tÃ i liá»‡u cÃ³ <code>user.id</code> chá»©a cÃ¡c tá»« khÃ³a báº¯t Ä‘áº§u báº±ng <code>ki</code>, táº¥t cáº£ cÃ¡c tÃ i liá»‡u chá»©a cÃ¡c tá»« khÃ³a nhÆ° <code>kind</code>, <code>kid</code> vÃ  báº¥t ká»³ tá»« khÃ³a nÃ o khÃ¡c báº¯t Ä‘áº§u báº±ng <code>ki</code> sáº½ Ä‘Æ°á»£c khá»›p.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "prefix"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "user.id"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "value"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "ki"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3>range query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-range-query.html" target="_blank" rel="noopener noreferrer"><strong><code>range query</code></strong></a> hay truy váº¥n pháº¡m vi, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ khá»›p cÃ¡c tÃ i liá»‡u cÃ³ trÆ°á»ng sá»‘, ngÃ y hoáº·c chuá»—i trong má»™t pháº¡m vi nháº¥t Ä‘á»‹nh. VÃ­ dá»¥, tÃ¬m kiáº¿m nhá»¯ng quyá»ƒn sÃ¡ch cÃ³ giÃ¡ tá»« 50 Ä‘áº¿n 100, hoáº·c nhá»¯ng quyá»ƒn sÃ¡ch Ä‘Æ°á»£c xuáº¥t báº£n tá»« nÄƒm 2015 Ä‘áº¿n nÄƒm 2019. <strong>Truy váº¥n pháº¡m vi chá»‰ cÃ³ thá»ƒ truy váº¥n má»™t trÆ°á»ng, khÃ´ng thá»ƒ Ã¡p dá»¥ng trÃªn nhiá»u trÆ°á»ng</strong>.</p>
<p>Truy váº¥n pháº¡m vi há»— trá»£ cÃ¡c tham sá»‘ sau:</p>
<ul>
<li><strong><code>gt</code></strong>: lá»›n hÆ¡n</li>
<li><strong><code>gte</code></strong>: lá»›n hÆ¡n hoáº·c báº±ng</li>
<li><strong><code>lt</code></strong>: nhá» hÆ¡n</li>
<li><strong><code>lte</code></strong>: nhá» hÆ¡n hoáº·c báº±ng</li>
<li><strong><code>format</code></strong>: náº¿u trÆ°á»ng lÃ  loáº¡i Date, báº¡n cÃ³ thá»ƒ Ä‘áº·t Ä‘á»‹nh dáº¡ng ngÃ y</li>
<li><strong><code>time_zone</code></strong>: mÃºi giá»</li>
<li><strong><code>relation</code></strong>: chá»‰ ra cÃ¡ch truy váº¥n pháº¡m vi khá»›p vá»›i cÃ¡c giÃ¡ trá»‹ trÆ°á»ng pháº¡m vi.
<ul>
<li><strong><code>INTERSECTS</code> (Máº·c Ä‘á»‹nh)</strong>: Khá»›p vá»›i cÃ¡c tÃ i liá»‡u cÃ³ giÃ¡ trá»‹ trÆ°á»ng pháº¡m vi giao nhau vá»›i truy váº¥n.</li>
<li><strong><code>CONTAINS</code></strong>: Khá»›p vá»›i cÃ¡c tÃ i liá»‡u hoÃ n toÃ n chá»©a giÃ¡ trá»‹ trÆ°á»ng cá»§a truy váº¥n.</li>
<li><strong><code>WITHIN</code></strong>: Khá»›p vá»›i cÃ¡c tÃ i liá»‡u cÃ³ giÃ¡ trá»‹ trÆ°á»ng pháº¡m vi hoÃ n toÃ n trong pháº¡m vi truy váº¥n.</li>
</ul>
</li>
</ul>
<p>VÃ­ dá»¥: Truy váº¥n pháº¡m vi sá»‘</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> kibana_sample_data_ecommerce/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "range"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "taxful_total_price"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "gt"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 10,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "lte"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 50</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>VÃ­ dá»¥: Truy váº¥n pháº¡m vi ngÃ y</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> kibana_sample_data_ecommerce/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "range"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "order_date"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "time_zone"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "+00:00",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "gte"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "2018-01-01T00:00:00",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "lte"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "now"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3>regexp query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-regexp-query.html" target="_blank" rel="noopener noreferrer"><strong><code>regexp query</code></strong></a> tráº£ vá» cÃ¡c tÃ i liá»‡u thuá»™c vá» cÃ¡c term khá»›p vá»›i biá»ƒu thá»©c chÃ­nh quy.</p>
<p><a href="https://vi.wikipedia.org/wiki/Bi%E1%BB%83u_th%E1%BB%A9c_ch%C3%ADnh_quy" target="_blank" rel="noopener noreferrer">Biá»ƒu thá»©c chÃ­nh quy</a> lÃ  má»™t phÆ°Æ¡ng phÃ¡p sá»­ dá»¥ng cÃ¡c kÃ½ tá»± Ä‘áº¡i diá»‡n Ä‘á»ƒ khá»›p vá»›i cÃ¡c mÃ´ hÃ¬nh dá»¯ liá»‡u, Ä‘Æ°á»£c gá»i lÃ  toÃ¡n tá»­.</p>
<p>VÃ­ dá»¥: TÃ¬m kiáº¿m dÆ°á»›i Ä‘Ã¢y tráº£ vá» cÃ¡c tÃ i liá»‡u cÃ³ trÆ°á»ng <code>user.id</code> chá»©a báº¥t ká»³ tá»« nÃ o báº¯t Ä‘áº§u báº±ng <code>k</code> vÃ  káº¿t thÃºc báº±ng <code>y</code>. ToÃ¡n tá»­ <code>.*</code> khá»›p vá»›i báº¥t ká»³ kÃ½ tá»± nÃ o vá»›i báº¥t ká»³ Ä‘á»™ dÃ i nÃ o, bao gá»“m cáº£ khÃ´ng cÃ³ kÃ½ tá»±. CÃ¡c tá»« khá»›p cÃ³ thá»ƒ bao gá»“m <code>ky</code>, <code>kay</code> vÃ  <code>kimchy</code>.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "regexp"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "user.id"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "value"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "k.*y",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "flags"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "ALL",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "case_insensitive"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#98C379;--shiki-dark:#98C379">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "max_determinized_states"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 10000,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "rewrite"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "constant_score"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><blockquote>
<p>LÆ°u Ã½: Náº¿u <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html#query-dsl-allow-expensive-queries" target="_blank" rel="noopener noreferrer"><code>search.allow_expensive_queries</code></a> Ä‘Æ°á»£c cáº¥u hÃ¬nh, thÃ¬ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-regexp-query.html" target="_blank" rel="noopener noreferrer"><strong><code>regexp query</code></strong></a> sáº½ bá»‹ vÃ´ hiá»‡u hÃ³a.</p>
</blockquote>
<h3>term query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-term-query.html" target="_blank" rel="noopener noreferrer"><strong><code>term query</code></strong></a> Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ¬m cÃ¡c tÃ i liá»‡u cÃ³ chá»©a tá»« cá»¥ thá»ƒ trong má»™t trÆ°á»ng cá»¥ thá»ƒ. Truy váº¥n term khÃ´ng Ä‘Æ°á»£c phÃ¢n tÃ­ch, chá»‰ khi tá»« truy váº¥n vÃ  tá»« trong tÃ i liá»‡u khá»›p chÃ­nh xÃ¡c thÃ¬ má»›i Ä‘Æ°á»£c tÃ¬m kiáº¿m. CÃ¡c tÃ¬nh huá»‘ng Ã¡p dá»¥ng bao gá»“m tÃ¬m kiáº¿m tÃªn ngÆ°á»i, tÃªn Ä‘á»‹a Ä‘iá»ƒm vÃ  cÃ¡c yÃªu cáº§u khá»›p chÃ­nh xÃ¡c khÃ¡c.</p>
<p>VÃ­ dá»¥:</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># 1. Táº¡o má»™t chá»‰ má»¥c</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> my-index-000001</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> my-index-000001</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "mappings"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "properties"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "full_text"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "type":</span><span style="color:#98C379;--shiki-dark:#98C379"> "text"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># 2. Sá»­ dá»¥ng tá»« khÃ³a "Quick Brown Foxes!" Ä‘á»ƒ tÃ¬m kiáº¿m trÆ°á»ng "full_text"</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> my-index-000001/_doc/1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "full_text"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "Quick Brown Foxes!"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># 3. Sá»­ dá»¥ng term query</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> my-index-000001/_search?pretty</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "term"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "full_text"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "Quick Brown Foxes!"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># VÃ¬ trÆ°á»ng full_text khÃ´ng cÃ²n chá»©a Term chÃ­nh xÃ¡c - "Quick Brown Foxes!", nÃªn term query khÃ´ng tÃ¬m tháº¥y káº¿t quáº£ nÃ o</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># 4. Sá»­ dá»¥ng match query</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> my-index-000001/_search?pretty</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "full_text"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "Quick Brown Foxes!"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> my-index-000001</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>âš ï¸ LÆ°u Ã½: NÃªn trÃ¡nh sá»­ dá»¥ng term query Ä‘á»ƒ truy váº¥n cÃ¡c trÆ°á»ng text.</p>
<p>Theo máº·c Ä‘á»‹nh, Elasticsearch phÃ¢n tÃ­ch cÃ¡c giÃ¡ trá»‹ cá»§a trÆ°á»ng text, Ä‘iá»u nÃ y khiáº¿n viá»‡c tÃ¬m kiáº¿m khá»›p chÃ­nh xÃ¡c vá»›i giÃ¡ trá»‹ cá»§a trÆ°á»ng text trá»Ÿ nÃªn khÃ³ khÄƒn.</p>
<p>Äá»ƒ tÃ¬m kiáº¿m giÃ¡ trá»‹ cá»§a trÆ°á»ng text, báº¡n nÃªn sá»­ dá»¥ng match query.</p>
</blockquote>
<h3>terms query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-terms-query.html" target="_blank" rel="noopener noreferrer"><strong><code>terms query</code></strong></a> giá»‘ng vá»›i <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-term-query.html" target="_blank" rel="noopener noreferrer"><strong><code>term query</code></strong></a>, nhÆ°ng cÃ³ thá»ƒ tÃ¬m kiáº¿m nhiá»u giÃ¡ trá»‹.</p>
<p>CÃ¡c tham sá»‘ truy váº¥n terms query:</p>
<ul>
<li><strong><code>index</code></strong>: TÃªn chá»‰ má»¥c</li>
<li><strong><code>id</code></strong>: ID tÃ i liá»‡u</li>
<li><strong><code>path</code></strong>: TÃªn cá»§a trÆ°á»ng mÃ  tá»« Ä‘Ã³ láº¥y giÃ¡ trá»‹ trÆ°á»ng, tá»©c tá»« khÃ³a tÃ¬m kiáº¿m</li>
<li><strong><code>routing</code></strong> (tÃ¹y chá»n): GiÃ¡ trá»‹ Ä‘á»‹nh tuyáº¿n tÃ¹y chá»‰nh cá»§a tÃ i liá»‡u tá»« Ä‘Ã³ láº¥y giÃ¡ trá»‹ term. Náº¿u giÃ¡ trá»‹ Ä‘á»‹nh tuyáº¿n tÃ¹y chá»‰nh Ä‘Ã£ Ä‘Æ°á»£c cung cáº¥p khi láº­p chá»‰ má»¥c tÃ i liá»‡u, thÃ¬ tham sá»‘ nÃ y lÃ  báº¯t buá»™c.</li>
</ul>
<p>VÃ­ dá»¥:</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># 1. Táº¡o má»™t chá»‰ má»¥c</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> my-index-000001</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> my-index-000001</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "mappings"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "properties"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "color"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "type":</span><span style="color:#98C379;--shiki-dark:#98C379"> "keyword"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># 2. Ghi má»™t tÃ i liá»‡u</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> my-index-000001/_doc/1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "color"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "blue"</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "green"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># 3. Ghi má»™t tÃ i liá»‡u khÃ¡c</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> my-index-000001/_doc/2</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "color"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "blue"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># 3. Sá»­ dá»¥ng terms query</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> my-index-000001/_search?pretty</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "terms"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "color"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "index"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "my-index-000001",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "id"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "2",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "path"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "color"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> my-index-000001</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>type query</h3>
<blockquote>
<p>ÄÃ£ bá»‹ loáº¡i bá» sau phiÃªn báº£n 7.0.0</p>
</blockquote>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-type-query.html" target="_blank" rel="noopener noreferrer"><strong><code>type query</code></strong></a> Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ truy váº¥n cÃ¡c tÃ i liá»‡u cÃ³ loáº¡i cá»¥ thá»ƒ.</p>
<p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "type"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "value"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "_doc"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Tuy nhiÃªn, tá»« phiÃªn báº£n 7.0.0 trá»Ÿ Ä‘i, Elasticsearch Ä‘Ã£ loáº¡i bá» há»— trá»£ cho nhiá»u loáº¡i tÃ i liá»‡u trong má»™t chá»‰ má»¥c. Do Ä‘Ã³, <code>type query</code> khÃ´ng cÃ²n Ä‘Æ°á»£c sá»­ dá»¥ng ná»¯a. Thay vÃ o Ä‘Ã³, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c cáº¥u trÃºc dá»¯ liá»‡u khÃ¡c nhau trong cÃ¹ng má»™t tÃ i liá»‡u hoáº·c sá»­ dá»¥ng nhiá»u chá»‰ má»¥c.</p>
<h3>wildcard query</h3>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-wildcard-query.html" target="_blank" rel="noopener noreferrer"><strong><code>wildcard query</code></strong></a> lÃ  truy váº¥n sá»­ dá»¥ng kÃ½ tá»± Ä‘áº¡i diá»‡n, tráº£ vá» cÃ¡c tÃ i liá»‡u khá»›p vá»›i mÃ´ hÃ¬nh kÃ½ tá»± Ä‘áº¡i diá»‡n.</p>
<p><code>?</code> Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ khá»›p vá»›i má»™t kÃ½ tá»± báº¥t ká»³, <code>*</code> Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ khá»›p vá»›i khÃ´ng hoáº·c nhiá»u kÃ½ tá»±.</p>
<p>VÃ­ dá»¥: Truy váº¥n dÆ°á»›i Ä‘Ã¢y tráº£ vá» cÃ¡c tÃ i liá»‡u mÃ  trÆ°á»ng <code>user.id</code> chá»©a cÃ¡c thuáº­t ngá»¯ báº¯t Ä‘áº§u báº±ng <code>ki</code> vÃ  káº¿t thÃºc báº±ng <code>y</code>. CÃ¡c khá»›p nÃ y cÃ³ thá»ƒ bao gá»“m <code>kiy</code>, <code>kity</code> hoáº·c <code>kimchy</code>.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "wildcard"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "user.id"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "value"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "ki*y",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "boost"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 1.0,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "rewrite"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "constant_score"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><blockquote>
<p>LÆ°u Ã½: Náº¿u <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html#query-dsl-allow-expensive-queries" target="_blank" rel="noopener noreferrer"><code>search.allow_expensive_queries</code></a> Ä‘Æ°á»£c cáº¥u hÃ¬nh, thÃ¬ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-wildcard-query.html" target="_blank" rel="noopener noreferrer"><strong><code>wildcard query</code></strong></a> sáº½ bá»‹ vÃ´ hiá»‡u hÃ³a.</p>
</blockquote>
<h3>VÃ­ dá»¥ hoÃ n chá»‰nh vá» truy váº¥n tá»« khoÃ¡</h3>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> products</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> products</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "settings"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "number_of_shards"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> /products/_bulk</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"index"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "_id":</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#98C379;--shiki-dark:#98C379"> }}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"productID"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "XHDK-A-1293-#fJ3","desc":"iPhone"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"index"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "_id":</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span><span style="color:#98C379;--shiki-dark:#98C379"> }}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"productID"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "KDKE-B-9947-#kL5","desc":"iPad"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"index"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "_id":</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 3</span><span style="color:#98C379;--shiki-dark:#98C379"> }}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"productID"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "JODL-X-1937-#pV7","desc":"MBP"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /products</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> /products/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "term"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "desc"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        //</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"value"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "iPhone"</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "value"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"iphone"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> /products/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "term"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "desc.keyword"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        //</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"value"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "iPhone"</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        //</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"value"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"iphone"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> /products/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "term"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "productID"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "value"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "XHDK-A-1293-#fJ3"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> /products/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  //</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"explain"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#98C379;--shiki-dark:#98C379">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "term"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "productID.keyword"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "value"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "XHDK-A-1293-#fJ3"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> /products/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "explain"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#98C379;--shiki-dark:#98C379">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "constant_score"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "filter"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "term"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "productID.keyword"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "XHDK-A-1293-#fJ3"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong vÃ­ dá»¥ trÃªn, chÃºng ta Ä‘Ã£ táº¡o má»™t chá»‰ má»¥c <code>products</code> vá»›i má»™t sá»‘ tÃ i liá»‡u. Má»—i tÃ i liá»‡u cÃ³ hai trÆ°á»ng lÃ  <code>productID</code> vÃ  <code>desc</code>.</p>
<p>Sau Ä‘Ã³, chÃºng ta thá»±c hiá»‡n má»™t sá»‘ truy váº¥n tá»« ngá»¯ (<code>term query</code>) khÃ¡c nhau. Truy váº¥n tá»« ngá»¯ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ¬m cÃ¡c tÃ i liá»‡u mÃ  má»™t trÆ°á»ng cá»¥ thá»ƒ chá»©a má»™t giÃ¡ trá»‹ cá»¥ thá»ƒ.</p>
<p>Trong cÃ¡c truy váº¥n, chÃºng ta cÃ³ thá»ƒ tháº¥y ráº±ng Elasticsearch phÃ¢n biá»‡t chá»¯ hoa vÃ  chá»¯ thÆ°á»ng. VÃ­ dá»¥, truy váº¥n tá»« ngá»¯ vá»›i giÃ¡ trá»‹ "iphone" sáº½ khÃ´ng tráº£ vá» tÃ i liá»‡u mÃ  trÆ°á»ng <code>desc</code> cÃ³ giÃ¡ trá»‹ "iPhone".</p>
<p>NgoÃ i ra, chÃºng ta cÅ©ng tháº¥y ráº±ng chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng trÆ°á»ng <code>keyword</code> Ä‘á»ƒ thá»±c hiá»‡n truy váº¥n khÃ´ng phÃ¢n biá»‡t chá»¯ hoa vÃ  chá»¯ thÆ°á»ng.</p>
<p>Cuá»‘i cÃ¹ng, chÃºng ta cÅ©ng tháº¥y ráº±ng chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng <code>constant_score</code> Ä‘á»ƒ Ã¡p dá»¥ng Ä‘iá»ƒm sá»‘ cá»‘ Ä‘á»‹nh cho táº¥t cáº£ cÃ¡c tÃ i liá»‡u khá»›p.</p>
<h2>Truy váº¥n káº¿t há»£p</h2>
<p>Truy váº¥n káº¿t há»£p lÃ  viá»‡c káº¿t há»£p má»™t sá»‘ truy váº¥n Ä‘Æ¡n giáº£n láº¡i vá»›i nhau Ä‘á»ƒ Ä‘Ã¡p á»©ng cÃ¡c yÃªu cáº§u truy váº¥n phá»©c táº¡p hÆ¡n. NgoÃ i ra, truy váº¥n káº¿t há»£p cÅ©ng cÃ³ thá»ƒ Ä‘iá»u khiá»ƒn hÃ nh vi cá»§a cÃ¡c truy váº¥n khÃ¡c.</p>
<h3>bool query</h3>
<p>Truy váº¥n bool cÃ³ thá»ƒ káº¿t há»£p báº¥t ká»³ sá»‘ lÆ°á»£ng truy váº¥n Ä‘Æ¡n giáº£n nÃ o, sá»­ dá»¥ng cÃ¡c tÃ¹y chá»n must, should, must_not, filter Ä‘á»ƒ biá»ƒu thá»‹ logic giá»¯a cÃ¡c truy váº¥n Ä‘Æ¡n giáº£n. Má»—i tÃ¹y chá»n cÃ³ thá»ƒ xuáº¥t hiá»‡n tá»« 0 Ä‘áº¿n nhiá»u láº§n, Ã½ nghÄ©a cá»§a chÃºng nhÆ° sau:</p>
<ul>
<li>must: tÃ i liá»‡u pháº£i khá»›p vá»›i cÃ¡c Ä‘iá»u kiá»‡n truy váº¥n trong tÃ¹y chá»n must, tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i AND trong logic, vÃ  tham gia vÃ o viá»‡c Ä‘Ã¡nh giÃ¡ má»©c Ä‘á»™ liÃªn quan cá»§a tÃ i liá»‡u.</li>
<li>should: tÃ i liá»‡u cÃ³ thá»ƒ khá»›p hoáº·c khÃ´ng khá»›p vá»›i cÃ¡c Ä‘iá»u kiá»‡n truy váº¥n trong tÃ¹y chá»n should, tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i OR trong logic, vÃ  tham gia vÃ o viá»‡c Ä‘Ã¡nh giÃ¡ má»©c Ä‘á»™ liÃªn quan cá»§a tÃ i liá»‡u.</li>
<li>must_not: ngÆ°á»£c láº¡i vá»›i must, cÃ¡c tÃ i liá»‡u khá»›p vá»›i cÃ¡c Ä‘iá»u kiá»‡n truy váº¥n trong tÃ¹y chá»n must_not sáº½ khÃ´ng Ä‘Æ°á»£c tráº£ vá»; Ä‘iá»u cáº§n lÆ°u Ã½ lÃ  <strong>cÃ¢u lá»‡nh must_not khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n viá»‡c Ä‘Ã¡nh giÃ¡ Ä‘iá»ƒm, nÃ³ chá»‰ loáº¡i bá» cÃ¡c tÃ i liá»‡u khÃ´ng liÃªn quan</strong>.</li>
<li>filter: giá»‘ng nhÆ° must, chá»‰ cÃ¡c tÃ i liá»‡u khá»›p vá»›i cÃ¡c Ä‘iá»u kiá»‡n truy váº¥n trong tÃ¹y chá»n filter má»›i Ä‘Æ°á»£c tráº£ vá», <strong>nhÆ°ng filter khÃ´ng Ä‘Ã¡nh giÃ¡ Ä‘iá»ƒm, chá»‰ cÃ³ chá»©c nÄƒng lá»c, ngÆ°á»£c láº¡i vá»›i must_not</strong>.</li>
</ul>
<p>Giáº£ sá»­ báº¡n muá»‘n tÃ¬m kiáº¿m cÃ¡c cuá»‘n sÃ¡ch cÃ³ tiÃªu Ä‘á» chá»©a tá»« khÃ³a java, giÃ¡ khÃ´ng cao hÆ¡n 70, mÃ´ táº£ cÃ³ thá»ƒ chá»©a hoáº·c khÃ´ng chá»©a mÃ¡y áº£o, báº¡n cÃ³ thá»ƒ táº¡o truy váº¥n bool nhÆ° sau:</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET books/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "query": {</span></span>
<span class="line"><span>    "bool": {</span></span>
<span class="line"><span>      "filter": {</span></span>
<span class="line"><span>        "term": {</span></span>
<span class="line"><span>          "status": 1</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      },</span></span>
<span class="line"><span>      "must_not": {</span></span>
<span class="line"><span>        "range": {</span></span>
<span class="line"><span>          "price": {</span></span>
<span class="line"><span>            "gte": 70</span></span>
<span class="line"><span>          }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      },</span></span>
<span class="line"><span>      "must": {</span></span>
<span class="line"><span>        "match": {</span></span>
<span class="line"><span>          "title": "java"</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      },</span></span>
<span class="line"><span>      "should": [</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          "match": {</span></span>
<span class="line"><span>            "description": "mÃ¡y áº£o"</span></span>
<span class="line"><span>          }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      ],</span></span>
<span class="line"><span>      "minimum_should_match": 1</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Äá»ƒ biáº¿t thÃªm thÃ´ng tin chi tiáº¿t vá» truy váº¥n bool, hÃ£y tham kháº£o <a href="https://www.knowledgedict.com/tutorial/elasticsearch-query-bool.html" target="_blank" rel="noopener noreferrer">bool queryï¼ˆtruy váº¥n káº¿t há»£pï¼‰chi tiáº¿t</a>.</p>
<h3>Truy váº¥n boosting</h3>
<p>Truy váº¥n boosting Ä‘Æ°á»£c sá»­ dá»¥ng trong cÃ¡c tÃ¬nh huá»‘ng cáº§n Ä‘iá»u chá»‰nh Ä‘iá»ƒm sá»‘ cá»§a hai truy váº¥n. Truy váº¥n boosting sáº½ Ä‘Ã³ng gÃ³i hai truy váº¥n láº¡i vá»›i nhau vÃ  giáº£m Ä‘iá»ƒm sá»‘ cá»§a má»™t trong hai truy váº¥n.</p>
<p>Truy váº¥n boosting bao gá»“m ba pháº§n: positive, negative vÃ  negative_boost. Äiá»ƒm sá»‘ cá»§a truy váº¥n trong pháº§n positive Ä‘Æ°á»£c giá»¯ nguyÃªn, truy váº¥n trong pháº§n negative sáº½ giáº£m Ä‘iá»ƒm sá»‘ cá»§a tÃ i liá»‡u, vÃ  negative_boost chá»‰ Ä‘á»‹nh giÃ¡ trá»‹ giáº£m trong pháº§n negative. Náº¿u chÃºng ta muá»‘n giáº£m Ä‘iá»ƒm sá»‘ cá»§a cÃ¡c cuá»‘n sÃ¡ch xuáº¥t báº£n trÆ°á»›c nÄƒm 2015, chÃºng ta cÃ³ thá»ƒ táº¡o má»™t truy váº¥n boosting, truy váº¥n nhÆ° sau:</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET books/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"query": {</span></span>
<span class="line"><span>		"boosting": {</span></span>
<span class="line"><span>			"positive": {</span></span>
<span class="line"><span>				"match": {</span></span>
<span class="line"><span>					"title": "python"</span></span>
<span class="line"><span>				}</span></span>
<span class="line"><span>			},</span></span>
<span class="line"><span>			"negative": {</span></span>
<span class="line"><span>				"range": {</span></span>
<span class="line"><span>					"publish_time": {</span></span>
<span class="line"><span>						"lte": "2015-01-01"</span></span>
<span class="line"><span>					}</span></span>
<span class="line"><span>				}</span></span>
<span class="line"><span>			},</span></span>
<span class="line"><span>			"negative_boost": 0.2</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong truy váº¥n boosting, chÃºng ta Ä‘Ã£ chá»‰ Ä‘á»‹nh yáº¿u tá»‘ á»©c cháº¿ lÃ  0.2, Ä‘iá»ƒm sá»‘ cá»§a cÃ¡c tÃ i liá»‡u cÃ³ giÃ¡ trá»‹ publish_time sau ngÃ y 01-01-2015 khÃ´ng thay Ä‘á»•i, Ä‘iá»ƒm sá»‘ cá»§a cÃ¡c tÃ i liá»‡u cÃ³ giÃ¡ trá»‹ publish_time trÆ°á»›c ngÃ y 01-01-2015 sáº½ lÃ  0.2 láº§n Ä‘iá»ƒm sá»‘ gá»‘c.</p>
<h3>Truy váº¥n constant_score</h3>
<p>Truy váº¥n constant_score Ä‘Ã³ng gÃ³i má»™t truy váº¥n filter vÃ  tráº£ vá» cÃ¡c tÃ i liá»‡u phÃ¹ há»£p vá»›i Ä‘iá»u kiá»‡n truy váº¥n cá»§a bá»™ lá»c, vá»›i Ä‘iá»ƒm sá»‘ liÃªn quan cá»§a táº¥t cáº£ chÃºng Ä‘á»u báº±ng giÃ¡ trá»‹ cá»§a tham sá»‘ _boost_ (cÃ³ thá»ƒ hiá»ƒu lÃ  Ä‘iá»ƒm sá»‘ liÃªn quan ban Ä‘áº§u dá»±a trÃªn tf-idf hoáº·c bm25 Ä‘Æ°á»£c cá»‘ Ä‘á»‹nh lÃ  1.0, vÃ¬ váº­y Ä‘iá»ƒm sá»‘ cuá»‘i cÃ¹ng lÃ  <em>1.0 * boost</em>, tá»©c lÃ  báº±ng giÃ¡ trá»‹ cá»§a tham sá»‘ <em>boost</em>). Truy váº¥n dÆ°á»›i Ä‘Ã¢y sáº½ tráº£ vá» cÃ¡c tÃ i liá»‡u cÃ³ trÆ°á»ng title chá»©a tá»« khÃ³a <em>elasticsearch</em>, vá»›i Ä‘iá»ƒm sá»‘ cá»§a táº¥t cáº£ cÃ¡c tÃ i liá»‡u Ä‘á»u lÃ  1.8:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET books/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "query": {</span></span>
<span class="line"><span>    "constant_score": {</span></span>
<span class="line"><span>      "filter": {</span></span>
<span class="line"><span>        "term": {</span></span>
<span class="line"><span>          "title": "elasticsearch"</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      },</span></span>
<span class="line"><span>      "boost": 1.8</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><h3>Truy váº¥n dis_max</h3>
<p>Truy váº¥n dis_max cÃ³ má»™t sá»‘ liÃªn há»‡ nhÆ°ng cÅ©ng cÃ³ sá»± khÃ¡c biá»‡t vá»›i truy váº¥n bool. Truy váº¥n dis_max há»— trá»£ nhiá»u truy váº¥n song song, cÃ³ thá»ƒ tráº£ vá» báº¥t ká»³ loáº¡i tÃ i liá»‡u nÃ o phÃ¹ há»£p vá»›i báº¥t ká»³ Ä‘iá»u kiá»‡n truy váº¥n con nÃ o. KhÃ¡c vá»›i cÃ¡ch truy váº¥n bool cÃ³ thá»ƒ káº¿t há»£p Ä‘iá»ƒm sá»‘ cá»§a táº¥t cáº£ cÃ¡c truy váº¥n phÃ¹ há»£p, truy váº¥n dis_max chá»‰ sá»­ dá»¥ng Ä‘iá»ƒm sá»‘ cá»§a Ä‘iá»u kiá»‡n truy váº¥n phÃ¹ há»£p nháº¥t. HÃ£y xem vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y:</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET books/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"query": {</span></span>
<span class="line"><span>		"dis_max": {</span></span>
<span class="line"><span>			"tie_breaker": 0.7,</span></span>
<span class="line"><span>			"boost": 1.2,</span></span>
<span class="line"><span>			"queries": [{</span></span>
<span class="line"><span>					"term": {</span></span>
<span class="line"><span>						"age": 34</span></span>
<span class="line"><span>					}</span></span>
<span class="line"><span>				},</span></span>
<span class="line"><span>				{</span></span>
<span class="line"><span>					"term": {</span></span>
<span class="line"><span>						"age": 35</span></span>
<span class="line"><span>					}</span></span>
<span class="line"><span>				}</span></span>
<span class="line"><span>			]</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>Truy váº¥n function_score</h3>
<p>Truy váº¥n function_score cÃ³ thá»ƒ chá»‰nh sá»­a Ä‘iá»ƒm sá»‘ cá»§a cÃ¡c tÃ i liá»‡u Ä‘Æ°á»£c truy váº¥n, loáº¡i truy váº¥n nÃ y ráº¥t há»¯u Ã­ch trong má»™t sá»‘ trÆ°á»ng há»£p, cháº³ng háº¡n nhÆ° khi chi phÃ­ tÃ­nh toÃ¡n Ä‘iá»ƒm sá»‘ cá»§a tÃ i liá»‡u báº±ng hÃ m Ä‘iá»ƒm sá»‘ lÃ  quÃ¡ cao, ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ thay tháº¿ cÃ¡ch tÃ­nh Ä‘iá»ƒm sá»‘ truyá»n thá»‘ng báº±ng cÃ¡ch sá»­ dá»¥ng bá»™ lá»c káº¿t há»£p vá»›i hÃ m Ä‘iá»ƒm sá»‘ tÃ¹y chá»‰nh.</p>
<p>Khi sá»­ dá»¥ng truy váº¥n function_score, ngÆ°á»i dÃ¹ng cáº§n Ä‘á»‹nh nghÄ©a má»™t truy váº¥n vÃ  má»™t hoáº·c nhiá»u hÃ m Ä‘iá»ƒm sá»‘, hÃ m Ä‘iá»ƒm sá»‘ sáº½ tÃ­nh toÃ¡n Ä‘iá»ƒm sá»‘ cho má»—i tÃ i liá»‡u Ä‘Æ°á»£c truy váº¥n.</p>
<p>Truy váº¥n dÆ°á»›i Ä‘Ã¢y sáº½ tráº£ vá» táº¥t cáº£ cÃ¡c tÃ i liá»‡u trong chá»‰ má»¥c books, vá»›i Ä‘iá»ƒm sá»‘ tá»‘i Ä‘a cá»§a tÃ i liá»‡u lÃ  5, Ä‘iá»ƒm sá»‘ cá»§a má»—i tÃ i liá»‡u Ä‘Æ°á»£c táº¡o ngáº«u nhiÃªn, cháº¿ Ä‘á»™ tÃ­nh trá»ng sá»‘ lÃ  cháº¿ Ä‘á»™ nhÃ¢n.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET books/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "query": {</span></span>
<span class="line"><span>    "function_score": {</span></span>
<span class="line"><span>      "query": {</span></span>
<span class="line"><span>        "match_all": {}</span></span>
<span class="line"><span>      },</span></span>
<span class="line"><span>      "boost": "5",</span></span>
<span class="line"><span>      "random_score": {},</span></span>
<span class="line"><span>      "boost_mode": "multiply"</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p>Sá»­ dá»¥ng script Ä‘á»ƒ tÃ¹y chá»‰nh cÃ´ng thá»©c Ä‘iá»ƒm sá»‘, á»Ÿ Ä‘Ã¢y chÃºng tÃ´i láº¥y cÄƒn báº­c hai cá»§a má»™t pháº§n mÆ°á»i giÃ¡ trá»‹ price lÃ m Ä‘iá»ƒm sá»‘ cho má»—i tÃ i liá»‡u, truy váº¥n nhÆ° sau:</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET books/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "query": {</span></span>
<span class="line"><span>    "function_score": {</span></span>
<span class="line"><span>      "query": {</span></span>
<span class="line"><span>        "match": {</span></span>
<span class="line"><span>          "title": "java"</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      },</span></span>
<span class="line"><span>      "script_score": {</span></span>
<span class="line"><span>        "inline": "Math.sqrt(doc['price'].value/10)"</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Äá»ƒ biáº¿t thÃªm chi tiáº¿t vá» function_score, vui lÃ²ng xem <a href="https://www.knowledgedict.com/tutorial/elasticsearch-function_score.html" target="_blank" rel="noopener noreferrer">Elasticsearch function_score truy váº¥n giáº£i thÃ­ch máº¡nh nháº¥t</a>.</p>
<h3>Truy váº¥n indices</h3>
<p>Truy váº¥n indices phÃ¹ há»£p vá»›i cÃ¡c tÃ¬nh huá»‘ng cáº§n truy váº¥n giá»¯a nhiá»u chá»‰ má»¥c, nÃ³ cho phÃ©p chá»‰ Ä‘á»‹nh danh sÃ¡ch tÃªn chá»‰ má»¥c vÃ  truy váº¥n ná»™i bá»™. Trong truy váº¥n indices, cÃ³ hai pháº§n lÃ  query vÃ  no_match_query. Pháº§n query Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ¬m kiáº¿m tÃ i liá»‡u trong danh sÃ¡ch chá»‰ má»¥c Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh, trong khi Ä‘iá»u kiá»‡n truy váº¥n trong no_match_query Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ¬m kiáº¿m tÃ i liá»‡u ngoÃ i danh sÃ¡ch chá»‰ má»¥c Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh. Truy váº¥n sau Ä‘Ã¢y tÃ¬m kiáº¿m cÃ¡c tÃ i liá»‡u trong chá»‰ má»¥c books vÃ  books2 cÃ³ trÆ°á»ng title chá»©a tá»« khÃ³a "javascript", vÃ  cÃ¡c tÃ i liá»‡u trong cÃ¡c chá»‰ má»¥c khÃ¡c cÃ³ trÆ°á»ng title chá»©a "basketball". Truy váº¥n nhÆ° sau:</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET books/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"query": {</span></span>
<span class="line"><span>		"indices": {</span></span>
<span class="line"><span>			"indices": ["books", "books2"],</span></span>
<span class="line"><span>			"query": {</span></span>
<span class="line"><span>				"match": {</span></span>
<span class="line"><span>					"title": "javascript"</span></span>
<span class="line"><span>				}</span></span>
<span class="line"><span>			},</span></span>
<span class="line"><span>			"no_match_query": {</span></span>
<span class="line"><span>				"term": {</span></span>
<span class="line"><span>					"title": "basketball"</span></span>
<span class="line"><span>				}</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>Truy váº¥n lá»“ng</h2>
<p>Trong há»‡ thá»‘ng phÃ¢n tÃ¡n nhÆ° Elasticsearch, viá»‡c thá»±c hiá»‡n truy váº¥n káº¿t ná»‘i theo phong cÃ¡ch SQL toÃ n diá»‡n cÃ³ chi phÃ­ cao vÃ  khÃ´ng kháº£ thi. Thay vÃ o Ä‘Ã³, Ä‘á»ƒ thá»±c hiá»‡n má»Ÿ rá»™ng theo quy mÃ´ chiá»u ngang, Elasticsearch cung cáº¥p hai hÃ¬nh thá»©c join sau:</p>
<ul>
<li>
<p>Truy váº¥n lá»“ng (nested query)</p>
<p>CÃ¡c tÃ i liá»‡u cÃ³ thá»ƒ chá»©a cÃ¡c trÆ°á»ng kiá»ƒu lá»“ng, cÃ¡c trÆ°á»ng nÃ y Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ chá»‰ má»¥c má»™t sá»‘ Ä‘á»‘i tÆ°á»£ng máº£ng, má»—i Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ Ä‘Æ°á»£c truy váº¥n nhÆ° má»™t tÃ i liá»‡u Ä‘á»™c láº­p.</p>
</li>
<li>
<p>Truy váº¥n has_child (cÃ³ truy váº¥n con) vÃ  truy váº¥n has_parent (cÃ³ truy váº¥n cha)</p>
<p>Má»‘i quan há»‡ cha-con cÃ³ thá»ƒ tá»“n táº¡i giá»¯a hai loáº¡i tÃ i liá»‡u trong má»™t chá»‰ má»¥c duy nháº¥t. Truy váº¥n has_child sáº½ tráº£ vá» cÃ¡c tÃ i liá»‡u cha mÃ  tÃ i liá»‡u con cá»§a chÃºng Ä‘Ã¡p á»©ng truy váº¥n cá»¥ thá»ƒ, trong khi has_parent sáº½ tráº£ vá» cÃ¡c tÃ i liá»‡u con mÃ  tÃ i liá»‡u cha cá»§a chÃºng Ä‘Ã¡p á»©ng truy váº¥n cá»¥ thá»ƒ.</p>
</li>
</ul>
<h3>Truy váº¥n lá»“ng</h3>
<p>CÃ¡c tÃ i liá»‡u cÃ³ thá»ƒ chá»©a cÃ¡c trÆ°á»ng kiá»ƒu lá»“ng, cÃ¡c trÆ°á»ng nÃ y Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ chá»‰ má»¥c má»™t sá»‘ Ä‘á»‘i tÆ°á»£ng máº£ng, má»—i Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ Ä‘Æ°á»£c truy váº¥n nhÆ° má»™t tÃ i liá»‡u Ä‘á»™c láº­p (sá»­ dá»¥ng truy váº¥n lá»“ng).</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>PUT /my_index</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"mappings": {</span></span>
<span class="line"><span>		"type1": {</span></span>
<span class="line"><span>			"properties": {</span></span>
<span class="line"><span>				"obj1": {</span></span>
<span class="line"><span>					"type": "nested"</span></span>
<span class="line"><span>				}</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><h3>Truy váº¥n has_child</h3>
<p>Má»‘i quan há»‡ cha-con giá»¯a cÃ¡c tÃ i liá»‡u Ä‘Æ°á»£c khai bÃ¡o trong lÃºc táº¡o chá»‰ má»¥c, trong vÃ­ dá»¥ nÃ y, chÃºng ta sáº½ sá»­ dá»¥ng nhÃ¢n viÃªn (employee) vÃ  chi nhÃ¡nh (branch) lÃ m vÃ­ dá»¥, chÃºng thuá»™c vá» cÃ¡c loáº¡i khÃ¡c nhau, tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i hai báº£ng trong cÆ¡ sá»Ÿ dá»¯ liá»‡u. Náº¿u chÃºng ta muá»‘n liÃªn káº¿t nhÃ¢n viÃªn vá»›i thÃ nh phá»‘ mÃ  há» lÃ m viá»‡c, chÃºng ta cáº§n thÃ´ng bÃ¡o cho Elasticsearch vá» má»‘i quan há»‡ cha-con giá»¯a cÃ¡c tÃ i liá»‡u, trong Ä‘Ã³ employee lÃ  loáº¡i con, vÃ  branch lÃ  loáº¡i cha. ChÃºng ta khai bÃ¡o má»‘i quan há»‡ nÃ y trong lÃºc táº¡o chá»‰ má»¥c, thá»±c hiá»‡n lá»‡nh sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>PUT /company</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"mappings": {</span></span>
<span class="line"><span>		"branch": {},</span></span>
<span class="line"><span>		"employee": {</span></span>
<span class="line"><span>			"parent": { "type": "branch" }</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p>Sá»­ dá»¥ng bulk api Ä‘á»ƒ chá»‰ má»¥c tÃ i liá»‡u dÆ°á»›i loáº¡i branch, lá»‡nh nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>POST company/branch/_bulk</span></span>
<span class="line"><span>{ "index": { "_id": "london" }}</span></span>
<span class="line"><span>{ "name": "London Westminster","city": "London","country": "UK" }</span></span>
<span class="line"><span>{ "index": { "_id": "liverpool" }}</span></span>
<span class="line"><span>{ "name": "Liverpool Central","city": "Liverpool","country": "UK" }</span></span>
<span class="line"><span>{ "index": { "_id": "paris" }}</span></span>
<span class="line"><span>{ "name": "Champs Elysees","city": "Paris","country": "France" }</span></span></code></pre>
</div><p>ThÃªm dá»¯ liá»‡u nhÃ¢n viÃªn:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>POST company/employee/_bulk</span></span>
<span class="line"><span>{ "index": { "_id": 1,"parent":"london" }}</span></span>
<span class="line"><span>{ "name": "Alice Smith","dob": "1970-10-24","hobby": "hiking" }</span></span>
<span class="line"><span>{ "index": { "_id": 2,"parent":"london" }}</span></span>
<span class="line"><span>{ "name": "Mark Tomas","dob": "1982-05-16","hobby": "diving" }</span></span>
<span class="line"><span>{ "index": { "_id": 3,"parent":"liverpool" }}</span></span>
<span class="line"><span>{ "name": "Barry Smith","dob": "1979-04-01","hobby": "hiking" }</span></span>
<span class="line"><span>{ "index": { "_id": 4,"parent":"paris" }}</span></span>
<span class="line"><span>{ "name": "Adrien Grand","dob": "1987-05-11","hobby": "horses" }</span></span></code></pre>
</div><p>Äá»ƒ truy váº¥n tÃ i liá»‡u cha thÃ´ng qua tÃ i liá»‡u con, chÃºng ta sá»­ dá»¥ng truy váº¥n has_child. VÃ­ dá»¥, Ä‘á»ƒ tÃ¬m kiáº¿m cÃ¡c chi nhÃ¡nh cÃ³ nhÃ¢n viÃªn sinh sau nÄƒm 1980, nhÃ¢n viÃªn sinh sau nÄƒm 1980 bao gá»“m Mark Thomas vÃ  Adrien Grand, há» lÃ m viá»‡c táº¡i London vÃ  Paris tÆ°Æ¡ng á»©ng. ChÃºng ta thá»±c hiá»‡n lá»‡nh truy váº¥n sau Ä‘á»ƒ xÃ¡c minh:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET company/branch/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"query": {</span></span>
<span class="line"><span>		"has_child": {</span></span>
<span class="line"><span>			"type": "employee",</span></span>
<span class="line"><span>			"query": {</span></span>
<span class="line"><span>				"range": { "dob": { "gte": "1980-01-01" } }</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p>TÃ¬m kiáº¿m nhá»¯ng chi nhÃ¡nh cÃ³ nhÃ¢n viÃªn tÃªn lÃ  "Alice Smith", vÃ¬ chÃºng ta sá»­ dá»¥ng truy váº¥n match, nÃ³ sáº½ Ä‘Æ°á»£c phÃ¢n tÃ­ch thÃ nh "Alice" vÃ  "Smith", vÃ¬ váº­y chi nhÃ¡nh mÃ  Alice Smith vÃ  Barry Smith lÃ m viá»‡c sáº½ Ä‘Æ°á»£c khá»›p. ChÃºng ta thá»±c hiá»‡n lá»‡nh truy váº¥n sau Ä‘á»ƒ xÃ¡c minh:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET company/branch/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"query": {</span></span>
<span class="line"><span>		"has_child": {</span></span>
<span class="line"><span>			"type": "employee",</span></span>
<span class="line"><span>			"score_mode": "max",</span></span>
<span class="line"><span>			"query": {</span></span>
<span class="line"><span>				"match": { "name": "Alice Smith" }</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p>ChÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng min_children Ä‘á»ƒ chá»‰ Ä‘á»‹nh sá»‘ lÆ°á»£ng tá»‘i thiá»ƒu cá»§a tÃ i liá»‡u con. VÃ­ dá»¥, Ä‘á»ƒ tÃ¬m kiáº¿m nhá»¯ng chi nhÃ¡nh cÃ³ Ã­t nháº¥t hai nhÃ¢n viÃªn, chÃºng ta thá»±c hiá»‡n lá»‡nh truy váº¥n sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET company/branch/_search?pretty</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"query": {</span></span>
<span class="line"><span>		"has_child": {</span></span>
<span class="line"><span>			"type": "employee",</span></span>
<span class="line"><span>			"min_children": 2,</span></span>
<span class="line"><span>			"query": {</span></span>
<span class="line"><span>				"match_all": {}</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><h3>Truy váº¥n has_parent</h3>
<p>Äá»ƒ truy váº¥n tÃ i liá»‡u con thÃ´ng qua tÃ i liá»‡u cha, chÃºng ta sá»­ dá»¥ng truy váº¥n has_parent. VÃ­ dá»¥, Ä‘á»ƒ tÃ¬m kiáº¿m nhá»¯ng nhÃ¢n viÃªn lÃ m viá»‡c á»Ÿ UK, chÃºng ta thá»±c hiá»‡n lá»‡nh truy váº¥n sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET company/employee/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"query": {</span></span>
<span class="line"><span>		"has_parent": {</span></span>
<span class="line"><span>			"parent_type": "branch",</span></span>
<span class="line"><span>			"query": {</span></span>
<span class="line"><span>				"match": { "country": "UK" }</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><h2>Truy váº¥n vá»‹ trÃ­</h2>
<p>Elasticsearch cÃ³ thá»ƒ tÃ¬m kiáº¿m dá»¯ liá»‡u cá»§a loáº¡i Ä‘iá»ƒm Ä‘á»‹a lÃ½ (geo_point) vÃ  hÃ¬nh dáº¡ng Ä‘á»‹a lÃ½ (geo_shape). Äá»ƒ thuáº­n tiá»‡n cho viá»‡c há»c, chÃºng ta sáº½ chuáº©n bá»‹ má»™t sá»‘ tá»a Ä‘á»™ Ä‘á»‹a lÃ½ cá»§a cÃ¡c thÃ nh phá»‘ Ä‘á»ƒ lÃ m dá»¯ liá»‡u thá»­ nghiá»‡m, má»—i tÃ i liá»‡u Ä‘á»u bao gá»“m hai trÆ°á»ng lÃ  tÃªn thÃ nh phá»‘ vÃ  tá»a Ä‘á»™ Ä‘á»‹a lÃ½. Tá»a Ä‘á»™ nÃ y Ä‘Æ°á»£c láº¥y tá»« má»™t vá»‹ trÃ­ á»Ÿ trung tÃ¢m cá»§a má»—i thÃ nh phá»‘. Äáº§u tiÃªn, hÃ£y lÆ°u ná»™i dung sau vÃ o tá»‡p geo.json:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>{"index":{ "_index":"geo","_type":"city","_id":"1" }}</span></span>
<span class="line"><span>{"name":"Báº¯c Kinh","location":"39.9088145109,116.3973999023"}</span></span>
<span class="line"><span>{"index":{ "_index":"geo","_type":"city","_id": "2" }}</span></span>
<span class="line"><span>{"name":"Urumqi","location":"43.8266300000,87.6168800000"}</span></span>
<span class="line"><span>{"index":{ "_index":"geo","_type":"city","_id":"3" }}</span></span>
<span class="line"><span>{"name":"TÃ¢y An","location":"34.3412700000,108.9398400000"}</span></span>
<span class="line"><span>{"index":{ "_index":"geo","_type":"city","_id":"4" }}</span></span>
<span class="line"><span>{"name":"Zhengzhou","location":"34.7447157466,113.6587142944"}</span></span>
<span class="line"><span>{"index":{ "_index":"geo","_type":"city","_id":"5" }}</span></span>
<span class="line"><span>{"name":"HÃ ng ChÃ¢u","location":"30.2294080260,120.1492309570"}</span></span>
<span class="line"><span>{"index":{ "_index":"geo","_type":"city","_id":"6" }}</span></span>
<span class="line"><span>{"name":"Jinan","location":"36.6518400000,117.1200900000"}</span></span></code></pre>
</div><p>Táº¡o má»™t chá»‰ má»¥c vÃ  thiáº¿t láº­p Ã¡nh xáº¡:</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>PUT geo</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"mappings": {</span></span>
<span class="line"><span>		"city": {</span></span>
<span class="line"><span>			"properties": {</span></span>
<span class="line"><span>				"name": {</span></span>
<span class="line"><span>					"type": "keyword"</span></span>
<span class="line"><span>				},</span></span>
<span class="line"><span>				"location": {</span></span>
<span class="line"><span>					"type": "geo_point"</span></span>
<span class="line"><span>				}</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Sau Ä‘Ã³ thá»±c hiá»‡n lá»‡nh nháº­p hÃ ng loáº¡t:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>curl -XPOST "http://localhost:9200/_bulk?pretty" --data-binary @geo.json</span></span></code></pre>
</div><h3>Truy váº¥n geo_distance</h3>
<p>Truy váº¥n geo_distance cÃ³ thá»ƒ tÃ¬m kiáº¿m cÃ¡c tÃ i liá»‡u Ä‘iá»ƒm Ä‘á»‹a lÃ½ náº±m trong pháº¡m vi xÃ¡c Ä‘á»‹nh tá»« má»™t Ä‘iá»ƒm trung tÃ¢m. VÃ­ dá»¥, Ä‘á»ƒ tÃ¬m kiáº¿m cÃ¡c thÃ nh phá»‘ náº±m trong bÃ¡n kÃ­nh 200km tá»« Thanh ÄÃ´, káº¿t quáº£ tÃ¬m kiáº¿m sáº½ tráº£ vá» Báº¯c Kinh, lá»‡nh nhÆ° sau:</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET geo/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"query": {</span></span>
<span class="line"><span>		"bool": {</span></span>
<span class="line"><span>			"must": {</span></span>
<span class="line"><span>				"match_all": {}</span></span>
<span class="line"><span>			},</span></span>
<span class="line"><span>			"filter": {</span></span>
<span class="line"><span>				"geo_distance": {</span></span>
<span class="line"><span>					"distance": "200km",</span></span>
<span class="line"><span>					"location": {</span></span>
<span class="line"><span>						"lat": 39.0851000000,</span></span>
<span class="line"><span>						"lon": 117.1993700000</span></span>
<span class="line"><span>					}</span></span>
<span class="line"><span>				}</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Sáº¯p xáº¿p cÃ¡c thÃ nh phá»‘ theo khoáº£ng cÃ¡ch Ä‘áº¿n Báº¯c Kinh:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET geo/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "query": {</span></span>
<span class="line"><span>    "match_all": {}</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  "sort": [{</span></span>
<span class="line"><span>    "_geo_distance": {</span></span>
<span class="line"><span>      "location": "39.9088145109,116.3973999023",</span></span>
<span class="line"><span>      "unit": "km",</span></span>
<span class="line"><span>      "order": "asc",</span></span>
<span class="line"><span>      "distance_type": "plane"</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }]</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p>Trong Ä‘Ã³, trÆ°á»ng location tÆ°Æ¡ng á»©ng vá»›i trÆ°á»ng kinh Ä‘á»™ vÃ  vÄ© Ä‘á»™; unit lÃ  <code>km</code>, nghÄ©a lÃ  khoáº£ng cÃ¡ch sáº½ Ä‘Æ°á»£c ghi vÃ o khÃ³a sort cá»§a má»—i káº¿t quáº£ tráº£ vá» theo Ä‘Æ¡n vá»‹ <code>km</code>; distance_type lÃ  <code>plane</code>, nghÄ©a lÃ  sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p tÃ­nh toÃ¡n <code>plane</code> nhanh nhÆ°ng Ä‘á»™ chÃ­nh xÃ¡c hÆ¡i kÃ©m.</p>
<h3>Truy váº¥n geo_bounding_box</h3>
<p>Truy váº¥n geo_bounding_box Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ¬m kiáº¿m cÃ¡c tá»a Ä‘á»™ Ä‘á»‹a lÃ½ náº±m trong má»™t hÃ¬nh chá»¯ nháº­t xÃ¡c Ä‘á»‹nh. Truy váº¥n xÃ¡c Ä‘á»‹nh má»™t hÃ¬nh chá»¯ nháº­t báº±ng hai Ä‘iá»ƒm, sau Ä‘Ã³ tÃ¬m kiáº¿m cÃ¡c tÃ i liá»‡u phÃ¹ há»£p trong khu vá»±c hÃ¬nh chá»¯ nháº­t.</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET geo/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"query": {</span></span>
<span class="line"><span>		"bool": {</span></span>
<span class="line"><span>			"must": {</span></span>
<span class="line"><span>				"match_all": {}</span></span>
<span class="line"><span>			},</span></span>
<span class="line"><span>			"filter": {</span></span>
<span class="line"><span>				"geo_bounding_box": {</span></span>
<span class="line"><span>					"location": {</span></span>
<span class="line"><span>						"top_left": {</span></span>
<span class="line"><span>							"lat": 38.4864400000,</span></span>
<span class="line"><span>							"lon": 106.2324800000</span></span>
<span class="line"><span>						},</span></span>
<span class="line"><span>						"bottom_right": {</span></span>
<span class="line"><span>							"lat": 28.6820200000,</span></span>
<span class="line"><span>							"lon": 115.8579400000</span></span>
<span class="line"><span>						}</span></span>
<span class="line"><span>					}</span></span>
<span class="line"><span>				}</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>Truy váº¥n geo_polygon</h3>
<p>Truy váº¥n geo_polygon Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ¬m kiáº¿m cÃ¡c Ä‘iá»ƒm Ä‘á»‹a lÃ½ náº±m trong má»™t Ä‘a giÃ¡c xÃ¡c Ä‘á»‹nh. VÃ­ dá»¥, Hohhot, Chongqing vÃ  ThÆ°á»£ng Háº£i táº¡o thÃ nh má»™t tam giÃ¡c, truy váº¥n cÃ¡c thÃ nh phá»‘ náº±m trong khu vá»±c tam giÃ¡c nÃ y, lá»‡nh nhÆ° sau:</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET geo/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"query": {</span></span>
<span class="line"><span>		"bool": {</span></span>
<span class="line"><span>			"must": {</span></span>
<span class="line"><span>				"match_all": {}</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>		},</span></span>
<span class="line"><span>		"filter": {</span></span>
<span class="line"><span>			"geo_polygon": {</span></span>
<span class="line"><span>				"location": {</span></span>
<span class="line"><span>					"points": [{</span></span>
<span class="line"><span>						"lat": 40.8414900000,</span></span>
<span class="line"><span>						"lon": 111.7519900000</span></span>
<span class="line"><span>					}, {</span></span>
<span class="line"><span>						"lat": 29.5647100000,</span></span>
<span class="line"><span>						"lon": 106.5507300000</span></span>
<span class="line"><span>					}, {</span></span>
<span class="line"><span>						"lat": 31.2303700000,</span></span>
<span class="line"><span>						"lon": 121.4737000000</span></span>
<span class="line"><span>					}]</span></span>
<span class="line"><span>				}</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>Truy váº¥n geo_shape</h3>
<p>Truy váº¥n geo_shape Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ¬m kiáº¿m dá»¯ liá»‡u Ä‘á»‹a lÃ½ kiá»ƒu geo_shape, cÃ³ ba má»‘i quan há»‡ giá»¯a cÃ¡c hÃ¬nh dáº¡ng Ä‘á»‹a lÃ½ lÃ  giao nhau, chá»©a vÃ  khÃ´ng giao nhau. Táº¡o má»™t chá»‰ má»¥c má»›i Ä‘á»ƒ thá»­ nghiá»‡m, trong Ä‘Ã³ loáº¡i trÆ°á»ng location Ä‘Æ°á»£c Ä‘áº·t lÃ  geo_shape.</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>PUT geoshape</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"mappings": {</span></span>
<span class="line"><span>		"city": {</span></span>
<span class="line"><span>			"properties": {</span></span>
<span class="line"><span>				"name": {</span></span>
<span class="line"><span>					"type": "keyword"</span></span>
<span class="line"><span>				},</span></span>
<span class="line"><span>				"location": {</span></span>
<span class="line"><span>					"type": "geo_shape"</span></span>
<span class="line"><span>				}</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Vá» thá»© tá»± kinh Ä‘á»™ vÃ  vÄ© Ä‘á»™, chÃºng ta cáº§n lÆ°u Ã½ ráº±ng, Ä‘á»‘i vá»›i trÆ°á»ng kiá»ƒu geo_point, vÄ© Ä‘á»™ Ä‘á»©ng trÆ°á»›c kinh Ä‘á»™, nhÆ°ng Ä‘á»‘i vá»›i Ä‘iá»ƒm trong kiá»ƒu geo_shape, kinh Ä‘á»™ Ä‘á»©ng trÆ°á»›c vÄ© Ä‘á»™.</p>
<p>ChÃºng ta cÃ³ thá»ƒ viáº¿t dÃ²ng káº¿t ná»‘i TÃ¢y An vÃ  Zhengzhou vÃ o chá»‰ má»¥c:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>POST geoshape/city/1</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"name": "TÃ¢y An-Zhengzhou",</span></span>
<span class="line"><span>	"location": {</span></span>
<span class="line"><span>		"type": "linestring",</span></span>
<span class="line"><span>		"coordinates": [</span></span>
<span class="line"><span>			[108.9398400000, 34.3412700000],</span></span>
<span class="line"><span>			[113.6587142944, 34.7447157466]</span></span>
<span class="line"><span>		]</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p>Truy váº¥n hÃ¬nh dáº¡ng Ä‘á»‹a lÃ½ náº±m trong hÃ¬nh chá»¯ nháº­t Ä‘Æ°á»£c táº¡o bá»Ÿi Yinchuan vÃ  Nanchang lÃ m cÃ¡c Ä‘iá»ƒm trÃªn Ä‘Æ°á»ng chÃ©o, vÃ¬ Ä‘Æ°á»ng tháº³ng tá»« TÃ¢y An Ä‘áº¿n Zhengzhou náº±m trong khu vá»±c hÃ¬nh chá»¯ nháº­t nÃ y, vÃ¬ váº­y nÃ³ cÃ³ thá»ƒ Ä‘Æ°á»£c truy váº¥n. Lá»‡nh nhÆ° sau:</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET geoshape/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"query": {</span></span>
<span class="line"><span>		"bool": {</span></span>
<span class="line"><span>			"must": {</span></span>
<span class="line"><span>				"match_all": {}</span></span>
<span class="line"><span>			},</span></span>
<span class="line"><span>			"filter": {</span></span>
<span class="line"><span>				"geo_shape": {</span></span>
<span class="line"><span>					"location": {</span></span>
<span class="line"><span>						"shape": {</span></span>
<span class="line"><span>							"type": "envelope",</span></span>
<span class="line"><span>							"coordinates": [</span></span>
<span class="line"><span>								[106.23248, 38.48644],</span></span>
<span class="line"><span>								[115.85794, 28.68202]</span></span>
<span class="line"><span>							]</span></span>
<span class="line"><span>						},</span></span>
<span class="line"><span>						"relation": "within"</span></span>
<span class="line"><span>					}</span></span>
<span class="line"><span>				}</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>Truy váº¥n more_like_this</h3>
<p>Truy váº¥n more_like_this cÃ³ thá»ƒ tÃ¬m kiáº¿m cÃ¡c tÃ i liá»‡u tÆ°Æ¡ng tá»± vá»›i vÄƒn báº£n cung cáº¥p, thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng trong cÃ¡c tÃ¬nh huá»‘ng nhÆ° Ä‘á» xuáº¥t vÄƒn báº£n tÆ°Æ¡ng tá»±. Lá»‡nh truy váº¥n nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET books/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"query": {</span></span>
<span class="line"><span>		"more_like_this": {</span></span>
<span class="line"><span>			"fields": ["title", "description"],</span></span>
<span class="line"><span>			"like": "java virtual machine",</span></span>
<span class="line"><span>			"min_term_freq": 1,</span></span>
<span class="line"><span>			"max_query_terms": 12</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p>CÃ¡c tham sá»‘ tÃ¹y chá»n vÃ  mÃ´ táº£ giÃ¡ trá»‹ cá»§a chÃºng nhÆ° sau:</p>
<ul>
<li>fields: cÃ¡c trÆ°á»ng cáº§n phÃ¹ há»£p, máº·c Ä‘á»‹nh lÃ  trÆ°á»ng _all.</li>
<li>like: vÄƒn báº£n cáº§n phÃ¹ há»£p.</li>
<li>min_term_freq: táº§n suáº¥t tá»‘i thiá»ƒu cá»§a cÃ¡c thuáº­t ngá»¯ trong tÃ i liá»‡u, máº·c Ä‘á»‹nh lÃ  2, cÃ¡c tÃ i liá»‡u cÃ³ táº§n suáº¥t tháº¥p hÆ¡n sáº½ bá»‹ bá» qua.</li>
<li>max_query_terms: sá»‘ lÆ°á»£ng thuáº­t ngá»¯ tá»‘i Ä‘a cÃ³ thá»ƒ cÃ³ trong truy váº¥n, máº·c Ä‘á»‹nh lÃ  25.</li>
<li>min_doc_freq: táº§n suáº¥t tÃ i liá»‡u tá»‘i thiá»ƒu, máº·c Ä‘á»‹nh lÃ  5.</li>
<li>max_doc_freq: táº§n suáº¥t tÃ i liá»‡u tá»‘i Ä‘a.</li>
<li>min_word_length: Ä‘á»™ dÃ i tá»‘i thiá»ƒu cá»§a tá»«.</li>
<li>max_word_length: Ä‘á»™ dÃ i tá»‘i Ä‘a cá»§a tá»«.</li>
<li>stop_words: danh sÃ¡ch cÃ¡c tá»« dá»«ng.</li>
<li>analyzer: bá»™ phÃ¢n tÃ­ch.</li>
<li>minimum_should_match: sá»‘ lÆ°á»£ng thuáº­t ngá»¯ tá»‘i thiá»ƒu mÃ  tÃ i liá»‡u cáº§n phÃ¹ há»£p, máº·c Ä‘á»‹nh lÃ  30% sá»‘ thuáº­t ngá»¯ sau khi phÃ¢n tÃ­ch truy váº¥n.</li>
<li>boost_terms: trá»ng sá»‘ cá»§a cÃ¡c thuáº­t ngá»¯.</li>
<li>include: liá»‡u cÃ³ nÃªn tráº£ vá» tÃ i liá»‡u Ä‘áº§u vÃ o nhÆ° má»™t káº¿t quáº£ hay khÃ´ng.</li>
<li>boost: trá»ng sá»‘ cá»§a toÃ n bá»™ truy váº¥n, máº·c Ä‘á»‹nh lÃ  1.0.</li>
</ul>
<h3>Truy váº¥n script</h3>
<p>Elasticsearch há»— trá»£ viá»‡c sá»­ dá»¥ng script Ä‘á»ƒ truy váº¥n. VÃ­ dá»¥, Ä‘á»ƒ tÃ¬m kiáº¿m cÃ¡c tÃ i liá»‡u cÃ³ giÃ¡ lá»›n hÆ¡n 180, lá»‡nh nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET books/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  "query": {</span></span>
<span class="line"><span>    "script": {</span></span>
<span class="line"><span>      "script": {</span></span>
<span class="line"><span>        "inline": "doc['price'].value &gt; 180",</span></span>
<span class="line"><span>        "lang": "painless"</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><h3>Truy váº¥n percolate</h3>
<p>Trong háº§u háº¿t cÃ¡c trÆ°á»ng há»£p, chÃºng ta thÆ°á»ng viáº¿t tÃ i liá»‡u vÃ o Elasticsearch trÆ°á»›c, sau Ä‘Ã³ sá»­ dá»¥ng cÃ¢u lá»‡nh truy váº¥n Ä‘á»ƒ tÃ¬m kiáº¿m tÃ i liá»‡u. Truy váº¥n percolate lÃ m Ä‘iá»u ngÆ°á»£c láº¡i, nÃ³ Ä‘Äƒng kÃ½ cÃ¡c Ä‘iá»u kiá»‡n truy váº¥n trÆ°á»›c, sau Ä‘Ã³ dá»±a vÃ o tÃ i liá»‡u Ä‘á»ƒ truy váº¥n query. VÃ­ dá»¥, trong chá»‰ má»¥c my-index cÃ³ má»™t loáº¡i laptop, tÃ i liá»‡u cÃ³ hai trÆ°á»ng lÃ  price vÃ  name, trong mapping, chÃºng ta Ä‘á»‹nh nghÄ©a má»™t trÆ°á»ng percolator lÃ  query, lá»‡nh nhÆ° sau:</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>PUT my-index</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"mappings": {</span></span>
<span class="line"><span>		"laptop": {</span></span>
<span class="line"><span>			"properties": {</span></span>
<span class="line"><span>				"price": { "type": "long" },</span></span>
<span class="line"><span>				"name": { "type": "text" }</span></span>
<span class="line"><span>			},</span></span>
<span class="line"><span>			"queries": {</span></span>
<span class="line"><span>				"properties": {</span></span>
<span class="line"><span>					"query": { "type": "percolator" }</span></span>
<span class="line"><span>				}</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ÄÄƒng kÃ½ má»™t bool query, trong Ä‘Ã³ bool query bao gá»“m má»™t range query, yÃªu cáº§u trÆ°á»ng price cÃ³ giÃ¡ trá»‹ nhá» hÆ¡n hoáº·c báº±ng 10000, vÃ  trÆ°á»ng name chá»©a tá»« khÃ³a macbook:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>PUT /my-index/queries/1?refresh</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"query": {</span></span>
<span class="line"><span>		"bool": {</span></span>
<span class="line"><span>			"must": [{</span></span>
<span class="line"><span>				"range": { "price": { "lte": 10000 } }</span></span>
<span class="line"><span>			}, {</span></span>
<span class="line"><span>				"match": { "name": "macbook" }</span></span>
<span class="line"><span>			}]</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p>Truy váº¥n query dá»±a vÃ o tÃ i liá»‡u:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET /my-index/_search</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>	"query": {</span></span>
<span class="line"><span>		"percolate": {</span></span>
<span class="line"><span>			"field": "query",</span></span>
<span class="line"><span>			"document_type": "laptop",</span></span>
<span class="line"><span>			"document": {</span></span>
<span class="line"><span>				"price": 9999,</span></span>
<span class="line"><span>				"name": "macbook pro on sale"</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p>TÃ i liá»‡u phÃ¹ há»£p vá»›i Ä‘iá»u kiá»‡n trong query, káº¿t quáº£ tráº£ vá» cÃ³ thá»ƒ tÃ¬m tháº¥y bool query Ä‘Ã£ Ä‘Äƒng kÃ½ á»Ÿ trÃªn. Truy váº¥n percolate cÃ³ tÃ­nh nÄƒng nÃ y phÃ¹ há»£p vá»›i cÃ¡c tÃ¬nh huá»‘ng nhÆ° phÃ¢n loáº¡i dá»¯ liá»‡u, Ä‘á»‹nh tuyáº¿n dá»¯ liá»‡u, giÃ¡m sÃ¡t sá»± kiá»‡n vÃ  cáº£nh bÃ¡o.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Elasticsearch Quick Start</title>
      <link>https://vanhung4499.github.io/database/elasticsearch/quick-start.html</link>
      <guid>https://vanhung4499.github.io/database/elasticsearch/quick-start.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elasticsearch Quick Start</source>
      <description>Elasticsearch: Quick Start Elasticsearch lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch dá»¯ liá»‡u phÃ¢n tÃ¡n, theo phong cÃ¡ch RESTful, cÃ³ kháº£ nÄƒng giáº£i quyáº¿t nhiá»u tÃ¬nh huá»‘ng khÃ¡c nhau Ä‘ang l...</description>
      <category>elasticssearch</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p><strong><a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch</a>&nbsp;lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch dá»¯ liá»‡u phÃ¢n tÃ¡n, theo phong cÃ¡ch RESTful</strong>, cÃ³ kháº£ nÄƒng giáº£i quyáº¿t nhiá»u tÃ¬nh huá»‘ng khÃ¡c nhau Ä‘ang liÃªn tá»¥c xuáº¥t hiá»‡n. LÃ  trung tÃ¢m cá»§a Elastic Stack, nÃ³ lÆ°u trá»¯ dá»¯ liá»‡u cá»§a báº¡n má»™t cÃ¡ch táº­p trung, giÃºp báº¡n khÃ¡m phÃ¡ nhá»¯ng Ä‘iá»u dá»± kiáº¿n vÃ  khÃ´ng dá»± kiáº¿n.</p>
<p><a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch</a>&nbsp;Ä‘Æ°á»£c phÃ¡t triá»ƒn dá»±a trÃªn thÆ° viá»‡n tÃ¬m kiáº¿m&nbsp;<a href="https://github.com/apache/lucene-solr" target="_blank" rel="noopener noreferrer">Lucene</a>. Elasticsearch áº©n Ä‘i sá»± phá»©c táº¡p cá»§a Lucene vÃ  cung cáº¥p interface API REST / Java dá»… sá»­ dá»¥ng (cÅ©ng nhÆ° cÃ¡c interface API báº±ng ngÃ´n ngá»¯ khÃ¡c).</p>
<p><em>DÆ°á»›i Ä‘Ã¢y sáº½ gá»i táº¯t lÃ  ES</em>.</p>
</blockquote>
<h2>Giá»›i thiá»‡u Elasticsearch</h2>
<p><strong><a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch</a>&nbsp;lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch dá»¯ liá»‡u phÃ¢n tÃ¡n, theo phong cÃ¡ch RESTful</strong>, cÃ³ kháº£ nÄƒng giáº£i quyáº¿t nhiá»u tÃ¬nh huá»‘ng khÃ¡c nhau Ä‘ang liÃªn tá»¥c xuáº¥t hiá»‡n. LÃ  trung tÃ¢m cá»§a Elastic Stack, nÃ³ lÆ°u trá»¯ dá»¯ liá»‡u cá»§a báº¡n má»™t cÃ¡ch táº­p trung, giÃºp báº¡n khÃ¡m phÃ¡ nhá»¯ng Ä‘iá»u dá»± kiáº¿n vÃ  khÃ´ng dá»± kiáº¿n.</p>
<p><a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch</a>&nbsp;<strong>Ä‘Æ°á»£c phÃ¡t triá»ƒn dá»±a trÃªn thÆ° viá»‡n tÃ¬m kiáº¿m&nbsp;<a href="https://github.com/apache/lucene-solr" target="_blank" rel="noopener noreferrer">Lucene</a></strong>. Elasticsearch áº©n Ä‘i sá»± phá»©c táº¡p cá»§a Lucene vÃ  cung cáº¥p interface API REST / Java dá»… sá»­ dá»¥ng (cÅ©ng nhÆ° cÃ¡c interface API báº±ng ngÃ´n ngá»¯ khÃ¡c).</p>
<p>Elasticsearch cÃ³ thá»ƒ coi lÃ  má»™t kho lÆ°u trá»¯ tÃ i liá»‡u, nÃ³&nbsp;<strong>chuáº©n hÃ³a cáº¥u trÃºc dá»¯ liá»‡u phá»©c táº¡p thÃ nh JSON Ä‘á»ƒ lÆ°u trá»¯</strong>.</p>
<p><strong>Elasticsearch lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m toÃ n vÄƒn gáº§n nhÆ° thá»i gian thá»±c</strong>, Ä‘iá»u nÃ y cÃ³ nghÄ©a lÃ :</p>
<ul>
<li>Tá»« khi ghi dá»¯ liá»‡u cho Ä‘áº¿n khi dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¬m kiáº¿m, cÃ³ má»™t Ä‘á»™ trá»… nhá» (khoáº£ng 1 giÃ¢y)</li>
<li>Thá»±c hiá»‡n tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch dá»±a trÃªn ES cÃ³ thá»ƒ Ä‘áº¡t Ä‘áº¿n má»©c giÃ¢y.</li>
</ul>
<h3>KhÃ¡i niá»‡m cá»‘t lÃµi</h3>
<p><code>index -&gt; type -&gt; mapping -&gt; document -&gt; field</code></p>
<h4>Cluster</h4>
<p>Má»™t cluster bao gá»“m nhiá»u node, má»—i node thuá»™c vá» cluster nÃ o Ä‘Æ°á»£c quyáº¿t Ä‘á»‹nh thÃ´ng qua má»™t cáº¥u hÃ¬nh. Äá»‘i vá»›i cÃ¡c á»©ng dá»¥ng vá»«a vÃ  nhá», ban Ä‘áº§u má»™t cluster chá»‰ cÃ³ má»™t node lÃ  bÃ¬nh thÆ°á»ng.</p>
<h4>Node</h4>
<p>Node lÃ  má»™t node trong cluster, má»—i node cÅ©ng cÃ³ má»™t tÃªn, máº·c Ä‘á»‹nh lÃ  Ä‘Æ°á»£c phÃ¢n bá»• ngáº«u nhiÃªn. Máº·c Ä‘á»‹nh, node sáº½ tham gia vÃ o má»™t cluster cÃ³ tÃªn lÃ &nbsp;<code>elasticsearch</code>. Náº¿u báº¡n khá»Ÿi Ä‘á»™ng má»™t loáº¡t node trá»±c tiáº¿p, chÃºng sáº½ tá»± Ä‘á»™ng hÃ¬nh thÃ nh má»™t cluster elasticsearch, táº¥t nhiÃªn má»™t node cÅ©ng cÃ³ thá»ƒ hÃ¬nh thÃ nh má»™t cluster elasticsearch.</p>
<h4>Index</h4>
<p><strong>CÃ³ thá»ƒ coi lÃ  táº­p há»£p tá»‘i Æ°u cá»§a cÃ¡c tÃ i liá»‡u (document).</strong></p>
<p>ES sáº½ xÃ¢y dá»±ng chá»‰ má»¥c cho táº¥t cáº£ cÃ¡c trÆ°á»ng, sau khi xá»­ lÃ½, nÃ³ sáº½ Ä‘Æ°á»£c ghi vÃ o má»™t chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c (Inverted Index). Khi tÃ¬m kiáº¿m dá»¯ liá»‡u, chá»‰ cáº§n tÃ¬m kiáº¿m chá»‰ má»¥c nÃ y.</p>
<p>VÃ¬ váº­y, Ä‘Æ¡n vá»‹ quáº£n lÃ½ dá»¯ liá»‡u hÃ ng Ä‘áº§u cá»§a ES Ä‘Æ°á»£c gá»i lÃ  Index (chá»‰ má»¥c). NÃ³ tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘Æ¡n láº». Má»—i Index (hay cÆ¡ sá»Ÿ dá»¯ liá»‡u) pháº£i cÃ³ tÃªn viáº¿t thÆ°á»ng.</p>
<h4>Type</h4>
<p>Má»—i chá»‰ má»¥c cÃ³ thá»ƒ chá»©a má»™t hoáº·c nhiá»u loáº¡i (type).&nbsp;<code>Type</code>&nbsp;lÃ  má»™t phÃ¢n loáº¡i logic cá»§a index.</p>
<p>CÃ¡c Type khÃ¡c nhau nÃªn cÃ³ cáº¥u trÃºc (schema) tÆ°Æ¡ng tá»±, vÃ­ dá»¥, trÆ°á»ng&nbsp;<code>id</code>&nbsp;khÃ´ng thá»ƒ lÃ  chuá»—i trong má»™t nhÃ³m nÃ y, trong khi lÃ  giÃ¡ trá»‹ sá»‘ trong má»™t nhÃ³m khÃ¡c. ÄÃ¢y lÃ  má»™t&nbsp;<a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/mapping.html" target="_blank" rel="noopener noreferrer">khÃ¡c biá»‡t</a>&nbsp;so vá»›i báº£ng cá»§a cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡. Dá»¯ liá»‡u cÃ³ tÃ­nh cháº¥t hoÃ n toÃ n khÃ¡c nhau (nhÆ°&nbsp;<code>products</code>vÃ &nbsp;<code>logs</code>) nÃªn Ä‘Æ°á»£c lÆ°u trá»¯ dÆ°á»›i dáº¡ng hai Index, chá»© khÃ´ng pháº£i lÃ  hai Type trong má»™t Index (máº·c dÃ¹ cÃ³ thá»ƒ lÃ m Ä‘Æ°á»£c).</p>
<blockquote>
<p>ChÃº Ã½: Theo&nbsp;<a href="https://www.elastic.co/blog/index-type-parent-child-join-now-future-in-elasticsearch" target="_blank" rel="noopener noreferrer">káº¿ hoáº¡ch</a>, phiÃªn báº£n Elastic 6.x chá»‰ cho phÃ©p má»—i Index chá»©a má»™t Type, phiÃªn báº£n 7.x sáº½ hoÃ n toÃ n loáº¡i bá» Type.</p>
</blockquote>
<h4>Document</h4>
<p>Trong má»—i Index, má»—i báº£n ghi Ä‘Æ°á»£c gá»i lÃ  Document. Nhiá»u Document táº¡o nÃªn má»™t Index.</p>
<p>Má»—i&nbsp;<strong><code>tÃ i liá»‡u (document)</code></strong>&nbsp;lÃ  má»™t táº­p há»£p cÃ¡c trÆ°á»ng (field).</p>
<p>Document sá»­ dá»¥ng Ä‘á»‹nh dáº¡ng JSON, dÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥.</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">	"user"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Hung Nguyen"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">	"title"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Engineer"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">	"desc"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Database management"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>CÃ¡c Document trong cÃ¹ng má»™t Index khÃ´ng yÃªu cáº§u cÃ³ cáº¥u trÃºc (scheme) giá»‘ng nhau, nhÆ°ng tá»‘t nháº¥t nÃªn giá»¯ giá»‘ng nhau, Ä‘iá»u nÃ y cÃ³ lá»£i cho viá»‡c cáº£i thiá»‡n hiá»‡u suáº¥t tÃ¬m kiáº¿m.</p>
<h4>Field</h4>
<p><strong><code>TrÆ°á»ng (field)</code></strong>&nbsp;lÃ  cáº·p khÃ³a-giÃ¡ trá»‹ chá»©a dá»¯ liá»‡u.</p>
<p>Theo máº·c Ä‘á»‹nh, Elasticsearch xÃ¢y dá»±ng chá»‰ má»¥c cho táº¥t cáº£ dá»¯ liá»‡u trong má»—i trÆ°á»ng, vÃ  má»—i trÆ°á»ng chá»‰ má»¥c cÃ³ cáº¥u trÃºc dá»¯ liá»‡u tá»‘i Æ°u riÃªng.</p>
<h4>Shard</h4>
<p>Khi má»™t mÃ¡y duy nháº¥t khÃ´ng Ä‘á»§ Ä‘á»ƒ lÆ°u trá»¯ lÆ°á»£ng dá»¯ liá»‡u lá»›n, Elasticsearch cÃ³ thá»ƒ chia dá»¯ liá»‡u trong má»™t chá»‰ má»¥c thÃ nh nhiá»u&nbsp;<strong><code>shard</code></strong>.&nbsp;<strong><code>Shard</code></strong>&nbsp;Ä‘Æ°á»£c lÆ°u trá»¯ trÃªn nhiá»u mÃ¡y chá»§. Vá»›i shard, báº¡n cÃ³ thá»ƒ má»Ÿ rá»™ng theo chiá»u ngang, lÆ°u trá»¯ nhiá»u dá»¯ liá»‡u hÆ¡n, cho phÃ©p cÃ¡c hoáº¡t Ä‘á»™ng tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch Ä‘Æ°á»£c phÃ¢n phá»‘i trÃªn nhiá»u mÃ¡y chá»§, cáº£i thiá»‡n throughput vÃ  hiá»‡u suáº¥t. Má»—i shard Ä‘á»u lÃ  má»™t chá»‰ má»¥c lucene.</p>
<h4>Replica</h4>
<p>Báº¥t ká»³ mÃ¡y chá»§ nÃ o cÅ©ng cÃ³ thá»ƒ gáº·p sá»± cá»‘ hoáº·c ngá»«ng hoáº¡t Ä‘á»™ng báº¥t cá»© lÃºc nÃ o, lÃºc nÃ y shard cÃ³ thá»ƒ bá»‹ máº¥t, do Ä‘Ã³, báº¡n cÃ³ thá»ƒ táº¡o nhiá»u&nbsp;<strong><code>báº£n sao (replica)</code></strong>&nbsp;cho má»—i shard. Báº£n sao cÃ³ thá»ƒ cung cáº¥p dá»‹ch vá»¥ dá»± phÃ²ng khi shard gáº·p sá»± cá»‘, Ä‘áº£m báº£o dá»¯ liá»‡u khÃ´ng bá»‹ máº¥t, nhiá»u báº£n sao cÃ²n cÃ³ thá»ƒ cáº£i thiá»‡n throughput vÃ  hiá»‡u suáº¥t cá»§a hoáº¡t Ä‘á»™ng tÃ¬m kiáº¿m. Shard chÃ­nh (Ä‘Æ°á»£c thiáº¿t láº­p má»™t láº§n khi táº¡o chá»‰ má»¥c, khÃ´ng thá»ƒ sá»­a Ä‘á»•i, máº·c Ä‘á»‹nh lÃ  5), shard báº£n sao (sá»‘ lÆ°á»£ng cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­a Ä‘á»•i báº¥t cá»© lÃºc nÃ o, máº·c Ä‘á»‹nh lÃ  1), máº·c Ä‘á»‹nh má»—i chá»‰ má»¥c cÃ³ 10 shard, 5 shard chÃ­nh, 5 shard báº£n sao, cáº¥u hÃ¬nh cao cÃ³ sáºµn tá»‘i thiá»ƒu, lÃ  2 mÃ¡y chá»§.</p>
<h4>ES - KhÃ¡i niá»‡m cá»‘t lÃµi vs. DB - KhÃ¡i niá»‡m cá»‘t lÃµi</h4>
<p>| ES       | DB               |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240223094001.png" type="image/png"/>
    </item>
    <item>
      <title>Elasticsearch REST API</title>
      <link>https://vanhung4499.github.io/database/elasticsearch/rest-api.html</link>
      <guid>https://vanhung4499.github.io/database/elasticsearch/rest-api.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elasticsearch REST API</source>
      <description>Elasticsearch Rest API Elasticsearch lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch dá»¯ liá»‡u phÃ¢n tÃ¡n, theo phong cÃ¡ch RESTful, cÃ³ kháº£ nÄƒng giáº£i quyáº¿t nhiá»u tÃ¬nh huá»‘ng sá»­ dá»¥ng má»›i xuáº¥t hiá»‡...</description>
      <category>elasticssearch</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p><strong><a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch</a> lÃ  má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch dá»¯ liá»‡u phÃ¢n tÃ¡n, theo phong cÃ¡ch RESTful</strong>, cÃ³ kháº£ nÄƒng giáº£i quyáº¿t nhiá»u tÃ¬nh huá»‘ng sá»­ dá»¥ng má»›i xuáº¥t hiá»‡n. LÃ  trung tÃ¢m cá»§a Elastic Stack, nÃ³ lÆ°u trá»¯ dá»¯ liá»‡u táº­p trung cá»§a báº¡n, giÃºp báº¡n phÃ¡t hiá»‡n nhá»¯ng sá»± kiá»‡n dá»± kiáº¿n vÃ  khÃ´ng dá»± kiáº¿n.</p>
<p><a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch</a> Ä‘Æ°á»£c phÃ¡t triá»ƒn dá»±a trÃªn thÆ° viá»‡n tÃ¬m kiáº¿m <a href="https://github.com/apache/lucene-solr" target="_blank" rel="noopener noreferrer">Lucene</a>. Elasticsearch áº©n Ä‘i sá»± phá»©c táº¡p cá»§a Lucene, cung cáº¥p giao diá»‡n API REST / Java dá»… sá»­ dá»¥ng (ngoÃ i ra cÃ²n cÃ³ cÃ¡c giao diá»‡n API báº±ng ngÃ´n ngá»¯ khÃ¡c).</p>
<p><em>DÆ°á»›i Ä‘Ã¢y gá»i táº¯t lÃ  ES</em>.</p>
<p>TÃ i liá»‡u chi tiáº¿t nháº¥t vá» REST API nÃªn tham kháº£o: <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/rest-apis.html" target="_blank" rel="noopener noreferrer">ES Official REST API</a></p>
</blockquote>
<h2>CÃº phÃ¡p ElasticSearch Rest API</h2>
<p>CÃ¡c pháº§n thÃ nh pháº§n cá»§a yÃªu cáº§u gá»­i Ä‘áº¿n Elasticsearch giá»‘ng nhÆ° cÃ¡c yÃªu cáº§u HTTP thÃ´ng thÆ°á»ng khÃ¡c:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">curl</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -X</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#D19A66;--shiki-dark:#D19A66">VERB</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#98C379;--shiki-dark:#98C379"> '&lt;PROTOCOL&gt;://&lt;HOST&gt;:&lt;PORT&gt;/&lt;PATH&gt;?&lt;QUERY_STRING&gt;'</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -d</span><span style="color:#98C379;--shiki-dark:#98C379"> '&lt;BODY&gt;'</span></span></code></pre>
</div><ul>
<li><code>VERB</code>ï¼šPhÆ°Æ¡ng thá»©c HTTP, há»— trá»£: <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>HEAD</code>, <code>DELETE</code></li>
<li><code>PROTOCOL</code>ï¼šgiao thá»©c http hoáº·c https (chá»‰ cÃ³ thá»ƒ sá»­ dá»¥ng khi cÃ³ proxy https phÃ­a trÆ°á»›c Elasticsearch)</li>
<li><code>HOST</code>ï¼štÃªn mÃ¡y chá»§ cá»§a báº¥t ká»³ nÃºt nÃ o trong cá»¥m Elasticsearch, náº¿u lÃ  nÃºt trÃªn mÃ¡y cá»¥c bá»™, thÃ¬ gá»i lÃ  localhost</li>
<li><code>PORT</code>ï¼šcá»•ng dá»‹ch vá»¥ HTTP cá»§a Elasticsearch, máº·c Ä‘á»‹nh lÃ  9200</li>
<li><code>PATH</code>ï¼šÄ‘Æ°á»ng dáº«n API (vÃ­ dá»¥: <code>_count</code> sáº½ tráº£ vá» sá»‘ lÆ°á»£ng tÃ i liá»‡u trong cá»¥m),</li>
<li><code>PATH</code>ï¼šcÃ³ thá»ƒ chá»©a nhiá»u thÃ nh pháº§n, vÃ­ dá»¥ <code>_cluster/stats</code> hoáº·c <code>_nodes/stats/jvm</code></li>
<li><code>QUERY_STRING</code>ï¼šmá»™t sá»‘ tham sá»‘ truy váº¥n tÃ¹y chá»n, vÃ­ dá»¥ tham sá»‘ ?pretty sáº½ lÃ m cho yÃªu cáº§u tráº£ vá» dá»¯ liá»‡u JSON dá»… Ä‘á»c hÆ¡n</li>
<li><code>BODY</code>ï¼šmá»™t cÆ¡ thá»ƒ yÃªu cáº§u á»Ÿ Ä‘á»‹nh dáº¡ng JSON (náº¿u yÃªu cáº§u cáº§n)</li>
</ul>
<p>ElasticSearch Rest API Ä‘Æ°á»£c chia thÃ nh hai loáº¡i:</p>
<ul>
<li><strong>URI Search</strong>ï¼šsá»­ dá»¥ng tham sá»‘ truy váº¥n trong URL</li>
<li><strong>Request Body Search</strong>ï¼šdá»±a trÃªn DSL Ä‘á»‹nh dáº¡ng JSON, hoÃ n chá»‰nh hÆ¡n</li>
</ul>
<p>VÃ­ dá»¥ vá» URI Search:</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20220530072511.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>VÃ­ dá»¥ vá» Request Body Search:</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20220530072654.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h2>Index API</h2>
<blockquote>
<p>TÃ i liá»‡u tham kháº£o: <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/cat-indices.html" target="_blank" rel="noopener noreferrer">Elasticsearch Official cat Index API</a></p>
</blockquote>
<h3>Táº¡o chá»‰ má»¥c</h3>
<p>Äá»ƒ táº¡o má»›i Index, báº¡n cÃ³ thá»ƒ gá»­i trá»±c tiáº¿p yÃªu cáº§u <code>PUT</code> Ä‘áº¿n mÃ¡y chá»§ ES.</p>
<p>CÃº phÃ¡p:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> /my_index</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "settings"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> ...</span><span style="color:#98C379;--shiki-dark:#98C379"> any</span><span style="color:#98C379;--shiki-dark:#98C379"> settings</span><span style="color:#98C379;--shiki-dark:#98C379"> ...</span><span style="color:#98C379;--shiki-dark:#98C379"> },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "mappings"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "type_one"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> ...</span><span style="color:#98C379;--shiki-dark:#98C379"> any</span><span style="color:#98C379;--shiki-dark:#98C379"> mappings</span><span style="color:#98C379;--shiki-dark:#98C379"> ...</span><span style="color:#98C379;--shiki-dark:#98C379"> },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "type_two"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> ...</span><span style="color:#98C379;--shiki-dark:#98C379"> any</span><span style="color:#98C379;--shiki-dark:#98C379"> mappings</span><span style="color:#98C379;--shiki-dark:#98C379"> ...</span><span style="color:#98C379;--shiki-dark:#98C379"> },</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">        ...</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> /user</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "settings"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "index"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "number_of_shards"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 3,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "number_of_replicas"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>MÃ¡y chá»§ tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng JSON, trong Ä‘Ã³ trÆ°á»ng <code>acknowledged</code> biá»ƒu thá»‹ hoáº¡t Ä‘á»™ng thÃ nh cÃ´ng.</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span><span style="color:#98C379;--shiki-dark:#98C379">"acknowledged"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">"shards_acknowledged"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">"index"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">"user"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Náº¿u báº¡n muá»‘n vÃ´ hiá»‡u hÃ³a viá»‡c táº¡o tá»± Ä‘á»™ng chá»‰ má»¥c, báº¡n cÃ³ thá»ƒ thÃªm cáº¥u hÃ¬nh sau vÃ o <code>config/elasticsearch.yml</code> trong má»—i nÃºt:</p>
<div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">action</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">auto_create_index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span></span></code></pre>
</div><h3>XÃ³a chá»‰ má»¥c</h3>
<p>Tiáº¿p theo, chÃºng ta cÃ³ thá»ƒ gá»­i yÃªu cáº§u <code>DELETE</code> Ä‘á»ƒ xÃ³a chá»‰ má»¥c nÃ y.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> /user</span></span></code></pre>
</div><p>XÃ³a nhiá»u chá»‰ má»¥c</p>
<div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">DELETE</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> /</span><span style="color:#E06C75;--shiki-dark:#E06C75">index_one</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">index_two</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">DELETE</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> /</span><span style="color:#E06C75;--shiki-dark:#E06C75">index_</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">*</span></span></code></pre>
</div><h3>Xem chá»‰ má»¥c</h3>
<p>Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng yÃªu cáº§u GET Ä‘á»ƒ xem thÃ´ng tin vá» chá»‰ má»¥c</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Xem thÃ´ng tin liÃªn quan Ä‘áº¿n chá»‰ má»¥c</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> kibana_sample_data_ecommerce</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Xem tá»•ng sá»‘ tÃ i liá»‡u trong chá»‰ má»¥c</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> kibana_sample_data_ecommerce/_count</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Xem 10 tÃ i liá»‡u Ä‘áº§u tiÃªn Ä‘á»ƒ hiá»ƒu Ä‘á»‹nh dáº¡ng tÃ i liá»‡u</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> kibana_sample_data_ecommerce/_search</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># _cat indices API</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Xem cÃ¡c chá»‰ má»¥c</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_cat/indices/kibana</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">*</span><span style="color:#98C379;--shiki-dark:#98C379">?v</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75">s</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">index</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Xem chá»‰ má»¥c cÃ³ tráº¡ng thÃ¡i lÃ  xanh</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_cat/indices?v</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75">health</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">green</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Sáº¯p xáº¿p theo sá»‘ lÆ°á»£ng tÃ i liá»‡u</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_cat/indices?v</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75">s</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">docs.count:desc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Xem cÃ¡c trÆ°á»ng cá»¥ thá»ƒ</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_cat/indices/kibana</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">*</span><span style="color:#98C379;--shiki-dark:#98C379">?pri</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&amp;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">v</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75">h</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">health,index,pri,rep,docs.count,mt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Xem bá»™ nhá»› mÃ  chá»‰ má»¥c sá»­ dá»¥ng</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_cat/indices?v</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75">h</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">i,tm</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75">s</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">tm:desc</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>BÃ­ danh chá»‰ má»¥c</h3>
<p>BÃ­ danh chá»‰ má»¥c trong ES chÃ­nh lÃ  tÃªn khÃ¡c mÃ  báº¡n Ä‘áº·t cho má»™t hoáº·c nhiá»u chá»‰ má»¥c. Má»™t á»©ng dá»¥ng Ä‘iá»ƒn hÃ¬nh lÃ  viá»‡c chuyá»ƒn mÆ°á»£t mÃ  giá»¯a cÃ¡c chá»‰ má»¥c.</p>
<p>Äáº§u tiÃªn, táº¡o chá»‰ má»¥c my_index, sau Ä‘Ã³ Ä‘áº·t bÃ­ danh my_alias cho nÃ³, vÃ­ dá»¥ nhÆ° sau:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> /my_index</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> /my_index/_alias/my_alias</span></span></code></pre>
</div><p>Báº¡n cÅ©ng cÃ³ thá»ƒ thá»±c hiá»‡n nhÆ° sau:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> /_aliases</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "actions"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"add"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "index":</span><span style="color:#98C379;--shiki-dark:#98C379"> "my_index",</span><span style="color:#98C379;--shiki-dark:#98C379"> "alias":</span><span style="color:#98C379;--shiki-dark:#98C379"> "my_alias"</span><span style="color:#98C379;--shiki-dark:#98C379"> }}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Báº¡n cÅ©ng cÃ³ thá»ƒ trong má»™t yÃªu cáº§u thÃªm vÃ  xÃ³a bÃ­ danh:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> /_aliases</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "actions"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"remove"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "index":</span><span style="color:#98C379;--shiki-dark:#98C379"> "my_index",</span><span style="color:#98C379;--shiki-dark:#98C379"> "alias":</span><span style="color:#98C379;--shiki-dark:#98C379"> "my_alias"</span><span style="color:#98C379;--shiki-dark:#98C379"> }}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"add"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "index":</span><span style="color:#98C379;--shiki-dark:#98C379"> "my_index_v2",</span><span style="color:#98C379;--shiki-dark:#98C379"> "alias":</span><span style="color:#98C379;--shiki-dark:#98C379"> "my_alias"</span><span style="color:#98C379;--shiki-dark:#98C379"> }}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><blockquote>
<p>Äiá»u cáº§n lÆ°u Ã½ lÃ  náº¿u bÃ­ danh vÃ  chá»‰ má»¥c lÃ  má»™t-Ä‘á»‘i-má»™t, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng bÃ­ danh Ä‘á»ƒ láº­p chá»‰ má»¥c hoáº·c truy váº¥n tÃ i liá»‡u. Tuy nhiÃªn, náº¿u bÃ­ danh vÃ  chá»‰ má»¥c lÃ  má»™t-Ä‘á»‘i-nhiá»u, viá»‡c sá»­ dá»¥ng bÃ­ danh sáº½ gÃ¢y ra lá»—i, vÃ¬ ES khÃ´ng biáº¿t nÃªn viáº¿t tÃ i liá»‡u vÃ o chá»‰ má»¥c nÃ o hoáº·c Ä‘á»c tÃ i liá»‡u tá»« chá»‰ má»¥c nÃ o.</p>
</blockquote>
<p>Má»™t á»©ng dá»¥ng Ä‘iá»ƒn hÃ¬nh cá»§a bÃ­ danh chá»‰ má»¥c ES lÃ  viá»‡c chuyá»ƒn mÆ°á»£t mÃ  giá»¯a cÃ¡c chá»‰ má»¥c. Äá»ƒ biáº¿t thÃªm chi tiáº¿t, báº¡n cÃ³ thá»ƒ xem <a href="https://www.knowledgedict.com/tutorial/elasticsearch-index-smooth-shift.html" target="_blank" rel="noopener noreferrer">PhÆ°Æ¡ng phÃ¡p chuyá»ƒn mÆ°á»£t mÃ  giá»¯a cÃ¡c chá»‰ má»¥c Elasticsearch (ES) mÃ  khÃ´ng cáº§n táº¯t mÃ¡y (khÃ´ng cáº§n khá»Ÿi Ä‘á»™ng láº¡i)</a>.</p>
<h3>Má»Ÿ/ÄÃ³ng chá»‰ má»¥c</h3>
<p>Báº±ng cÃ¡ch thÃªm <code>_close</code> hoáº·c <code>_open</code> vÃ o <code>POST</code>, báº¡n cÃ³ thá»ƒ má»Ÿ hoáº·c Ä‘Ã³ng chá»‰ má»¥c.</p>
<p>Má»Ÿ chá»‰ má»¥c</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Má»Ÿ chá»‰ má»¥c</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> kibana_sample_data_ecommerce/_open</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># ÄÃ³ng chá»‰ má»¥c</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> kibana_sample_data_ecommerce/_close</span></span></code></pre>
</div><h2>TÃ i liá»‡u</h2>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">############Create Document############</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#create document. _id is automatically generated</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> users/_doc</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"user"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "Mike",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "post_date"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "2019-04-15T14:12:12",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "message"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "trying out Kibana"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#create document. Specify Id. If id already exists, an error is returned</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> users/_doc/1?op_type=create</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "user"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "Jack",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "post_date"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "2019-05-15T14:12:12",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "message"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "trying out Elasticsearch"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#create document. Specify ID. If it already exists, an error is returned</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> users/_create/1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">     "user"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "Jack",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "post_date"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "2019-05-15T14:12:12",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "message"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "trying out Elasticsearch"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">### Get Document by ID</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#Get the document by ID</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> users/_doc/1</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">###  Index &amp; Update</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#Update specified ID  (delete first, then write)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> users/_doc/1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> users/_doc/1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"user"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "Mike"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#GET users/_doc/1</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#Add fields to the original document</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> users/_update/1/</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "doc"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "post_date"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "2019-05-15T14:12:12",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "message"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "trying out Elasticsearch"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">### Delete by Id</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Delete document</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> users/_doc/1</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">### Bulk Operations</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#Execute twice, check the result each time</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#Execute the first time</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> _bulk</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test",</span><span style="color:#98C379;--shiki-dark:#98C379"> "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "1"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"field1"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "value1"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"delete"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test",</span><span style="color:#98C379;--shiki-dark:#98C379"> "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "2"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"create"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test2",</span><span style="color:#98C379;--shiki-dark:#98C379"> "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "3"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"field1"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "value3"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"update"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {"_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "1",</span><span style="color:#98C379;--shiki-dark:#98C379"> "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test"}</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"doc"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {"field2"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "value2"}</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#Execute the second time</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> _bulk</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test",</span><span style="color:#98C379;--shiki-dark:#98C379"> "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "1"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"field1"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "value1"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"delete"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test",</span><span style="color:#98C379;--shiki-dark:#98C379"> "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "2"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"create"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test2",</span><span style="color:#98C379;--shiki-dark:#98C379"> "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "3"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"field1"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "value3"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"update"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {"_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "1",</span><span style="color:#98C379;--shiki-dark:#98C379"> "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test"}</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"doc"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {"field2"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "value2"}</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">### mget Operations</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_mget</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "docs"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "1"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "2"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#Specify index in URI</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /test/_mget</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "docs"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "1"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "2"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_mget</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "docs"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "1",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_source"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "2",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_source"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span><span style="color:#98C379;--shiki-dark:#98C379">"field3"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"field4"]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "3",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_source"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">                "include"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span><span style="color:#98C379;--shiki-dark:#98C379">"user"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">                "exclude"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span><span style="color:#98C379;--shiki-dark:#98C379">"user.location"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">### msearch Operations</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> kibana_sample_data_ecommerce/_msearch</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"query"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {"match_all"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {}},"size":1}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "kibana_sample_data_flights"}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"query"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {"match_all"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {}},"size":2}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">### Clear Test Data</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#Clear data</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> users</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> test</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> test2</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>Táº¡o tÃ i liá»‡u</h3>
<h4>XÃ¡c Ä‘á»‹nh ID</h4>
<p>Äá»‹nh dáº¡ng cÃº phÃ¡p:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> /_index/_type/_create/_id</span></span></code></pre>
</div><p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> /user/_doc/_create/1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "user"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "TrÆ°Æ¡ng Tam",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "title"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "Ká»¹ sÆ°",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "desc"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "Quáº£n lÃ½ cÆ¡ sá»Ÿ dá»¯ liá»‡u"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><blockquote>
<p>LÆ°u Ã½: XÃ¡c Ä‘á»‹nh Id, náº¿u id Ä‘Ã£ tá»“n táº¡i, sáº½ bÃ¡o lá»—i</p>
</blockquote>
<h4>Tá»± Ä‘á»™ng táº¡o ID</h4>
<p>Khi thÃªm báº£n ghi má»›i, báº¡n cÅ©ng cÃ³ thá»ƒ khÃ´ng xÃ¡c Ä‘á»‹nh Id, lÃºc nÃ y báº¡n cáº§n thay Ä‘á»•i yÃªu cáº§u thÃ nh POST.</p>
<p>Äá»‹nh dáº¡ng cÃº phÃ¡p:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> /_index/_type</span></span></code></pre>
</div><p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> /user/_doc</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "user"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "TrÆ°Æ¡ng Tam",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "title"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "Ká»¹ sÆ°",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "desc"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "Quáº£n trá»‹ viÃªn siÃªu cáº¥p"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3>XÃ³a tÃ i liá»‡u</h3>
<p>Äá»‹nh dáº¡ng cÃº phÃ¡p:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> /_index/_doc/_id</span></span></code></pre>
</div><p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">DELETE</span><span style="color:#98C379;--shiki-dark:#98C379"> /user/_doc/1</span></span></code></pre>
</div><h3>Cáº­p nháº­t tÃ i liá»‡u</h3>
<h4>XÃ³a trÆ°á»›c, sau Ä‘Ã³ viáº¿t vÃ o</h4>
<p>Äá»‹nh dáº¡ng cÃº phÃ¡p:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> /_index/_type/_id</span></span></code></pre>
</div><p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">PUT</span><span style="color:#98C379;--shiki-dark:#98C379"> /user/_doc/1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "user"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "LÃ½ Tá»©",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "title"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "Ká»¹ sÆ°",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "desc"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "Quáº£n trá»‹ viÃªn siÃªu cáº¥p"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>ThÃªm trÆ°á»ng vÃ o tÃ i liá»‡u gá»‘c</h4>
<p>Äá»‹nh dáº¡ng cÃº phÃ¡p:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> /_index/_update/_id</span></span></code></pre>
</div><p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> /user/_update/1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "doc"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "age"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "30"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3>Truy váº¥n tÃ i liá»‡u</h3>
<h4>Truy váº¥n theo ID cá»¥ thá»ƒ</h4>
<p>Äá»‹nh dáº¡ng cÃº phÃ¡p:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>GET /_index/_type/_id</span></span></code></pre>
</div><p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /user/_doc/1</span></span></code></pre>
</div><p>Káº¿t quáº£:</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_index"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"user"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_type"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"_doc"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_version"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_seq_no"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">536248</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_primary_term"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "found"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_source"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "user"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"TrÆ°Æ¡ng Tam"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "title"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Ká»¹ sÆ°"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "desc"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Quáº£n lÃ½ cÆ¡ sá»Ÿ dá»¯ liá»‡u"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Trong dá»¯ liá»‡u tráº£ vá», trÆ°á»ng <code>found</code> biá»ƒu thá»‹ truy váº¥n thÃ nh cÃ´ng, trÆ°á»ng <code>_source</code> tráº£ vá» báº£n gá»‘c cá»§a báº£n ghi.</p>
<p>Náº¿u id khÃ´ng chÃ­nh xÃ¡c, dá»¯ liá»‡u sáº½ khÃ´ng Ä‘Æ°á»£c tÃ¬m tháº¥y, vÃ  trÆ°á»ng <code>found</code> sáº½ lÃ  <code>false</code></p>
<h4>Truy váº¥n táº¥t cáº£ cÃ¡c báº£n ghi</h4>
<p>Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>GET</code>, yÃªu cáº§u trá»±c tiáº¿p Ä‘áº¿n <code>/index/type/_search</code>, táº¥t cáº£ cÃ¡c báº£n ghi sáº½ Ä‘Æ°á»£c tráº£ vá».</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">$</span><span style="color:#98C379;--shiki-dark:#98C379"> curl</span><span style="color:#98C379;--shiki-dark:#98C379"> 'localhost:9200/user/admin/_search?pretty'</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "took"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> 1,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "timed_out"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span><span style="color:#98C379;--shiki-dark:#98C379">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "_shards"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "total"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> 3,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "successful"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> 3,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "skipped"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> 0,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "failed"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "hits"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "total"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> 2,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "max_score"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> 1.0,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "hits"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "user",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "_type"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "admin",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "WWuoDG8BHwECs7SiYn93",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "_score"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> 1.0,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "_source"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "user"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "LÃ½ Tá»©",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "title"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "Ká»¹ sÆ°",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "desc"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "Quáº£n lÃ½ há»‡ thá»‘ng"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "user",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "_type"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "admin",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "1",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "_score"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> 1.0,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "_source"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "user"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "TrÆ°Æ¡ng Tam",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "title"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "Ká»¹ sÆ°",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">          "desc"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "Quáº£n trá»‹ viÃªn siÃªu cáº¥p"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong káº¿t quáº£ tráº£ vá» á»Ÿ trÃªn, trÆ°á»ng <code>took</code> biá»ƒu thá»‹ thá»i gian tiÃªu tá»‘n cho thao tÃ¡c nÃ y (Ä‘Æ¡n vá»‹ lÃ  mili giÃ¢y), trÆ°á»ng <code>timed_out</code> biá»ƒu thá»‹ liá»‡u cÃ³ quÃ¡ thá»i gian hay khÃ´ng, trÆ°á»ng <code>hits</code> biá»ƒu thá»‹ cÃ¡c báº£n ghi Ä‘Ã£ truy váº¥n Ä‘Æ°á»£c, trong Ä‘Ã³ cÃ¡c trÆ°á»ng con cÃ³ Ã½ nghÄ©a nhÆ° sau.</p>
<ul>
<li><code>total</code>: sá»‘ lÆ°á»£ng báº£n ghi tráº£ vá», trong trÆ°á»ng há»£p nÃ y lÃ  2.</li>
<li><code>max_score</code>: má»©c Ä‘á»™ khá»›p cao nháº¥t, trong trÆ°á»ng há»£p nÃ y lÃ  <code>1.0</code>.</li>
<li><code>hits</code>: máº£ng cÃ¡c báº£n ghi tráº£ vá».</li>
</ul>
<p>Trong cÃ¡c báº£n ghi tráº£ vá», má»—i báº£n ghi Ä‘á»u cÃ³ má»™t trÆ°á»ng <code>_score</code>, biá»ƒu thá»‹ má»©c Ä‘á»™ khá»›p, máº·c Ä‘á»‹nh lÃ  Ä‘Æ°á»£c sáº¯p xáº¿p theo trÆ°á»ng nÃ y theo thá»© tá»± giáº£m dáº§n.</p>
<h3>TÃ¬m kiáº¿m toÃ n vÄƒn</h3>
<p>ES sá»­ dá»¥ng <a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl.html" target="_blank" rel="noopener noreferrer">cÃº phÃ¡p truy váº¥n</a> Ä‘á»™c Ä‘Ã¡o cá»§a chÃ­nh nÃ³, yÃªu cáº§u cÃ¡c yÃªu cáº§u GET Ä‘i kÃ¨m vá»›i dá»¯ liá»‡u.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">$</span><span style="color:#98C379;--shiki-dark:#98C379"> curl</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -H</span><span style="color:#98C379;--shiki-dark:#98C379"> 'Content-Type: application/json'</span><span style="color:#98C379;--shiki-dark:#98C379"> 'localhost:9200/user/admin/_search?pretty'</span><span style="color:#D19A66;--shiki-dark:#D19A66">  -d</span><span style="color:#98C379;--shiki-dark:#98C379"> '</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">{</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">"query" : { "match" : { "desc" : "quáº£n lÃ½" }}</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">}'</span></span></code></pre>
</div><p>Äoáº¡n mÃ£ trÃªn sá»­ dá»¥ng <a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl-match-query.html" target="_blank" rel="noopener noreferrer">Match Query</a>, vá»›i Ä‘iá»u kiá»‡n khá»›p Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh lÃ  trÆ°á»ng <code>desc</code> chá»©a tá»« "quáº£n lÃ½". Káº¿t quáº£ tráº£ vá» nhÆ° sau.</p>
<div class="language-javascript line-numbers-mode" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  "took"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  "timed_out"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  "_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    "total"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    "successful"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    "skipped"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    "failed"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  "hits"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    "total"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    "max_score"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">0.38200712</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    "hits"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">        "_index"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"user"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">        "_type"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"admin"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">        "_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"WWuoDG8BHwECs7SiYn93"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">        "_score"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">0.38200712</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">        "_source"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">          "user"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"LÃ½ Tá»©"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">          "title"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"Ká»¹ sÆ°"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">          "desc"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"Quáº£n lÃ½ há»‡ thá»‘ng"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">        "_index"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"user"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">        "_type"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"admin"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">        "_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">        "_score"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">0.3487891</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">        "_source"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">          "user"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"TrÆ°Æ¡ng Tam"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">          "title"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"Ká»¹ sÆ°"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">          "desc"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"Quáº£n trá»‹ viÃªn siÃªu cáº¥p"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Elastic máº·c Ä‘á»‹nh tráº£ vá» 10 káº¿t quáº£ má»—i láº§n, báº¡n cÃ³ thá»ƒ thay Ä‘á»•i cÃ i Ä‘áº·t nÃ y thÃ´ng qua trÆ°á»ng <code>size</code>, vÃ  cÅ©ng cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh vá»‹ trÃ­ thÃ´ng qua trÆ°á»ng <code>from</code>.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">$</span><span style="color:#98C379;--shiki-dark:#98C379"> curl</span><span style="color:#98C379;--shiki-dark:#98C379"> 'localhost:9200/user/admin/_search'</span><span style="color:#D19A66;--shiki-dark:#D19A66">  -d</span><span style="color:#98C379;--shiki-dark:#98C379"> '</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">{</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  "query" : { "match" : { "desc" : "quáº£n lÃ½" }},</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  "from": 1,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  "size": 1</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">}'</span></span></code></pre>
</div><p>Äoáº¡n mÃ£ trÃªn chá»‰ Ä‘á»‹nh, báº¯t Ä‘áº§u tá»« vá»‹ trÃ­ 1 (máº·c Ä‘á»‹nh lÃ  báº¯t Ä‘áº§u tá»« vá»‹ trÃ­ 0), chá»‰ tráº£ vá» má»™t káº¿t quáº£.</p>
<h3>PhÃ©p toÃ¡n logic</h3>
<p>Náº¿u cÃ³ nhiá»u tá»« khÃ³a tÃ¬m kiáº¿m, Elastic coi chÃºng lÃ  má»‘i quan há»‡ <code>or</code>.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">$</span><span style="color:#98C379;--shiki-dark:#98C379"> curl</span><span style="color:#98C379;--shiki-dark:#98C379"> 'localhost:9200/user/admin/_search'</span><span style="color:#D19A66;--shiki-dark:#D19A66">  -d</span><span style="color:#98C379;--shiki-dark:#98C379"> '</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">{</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">"query" : { "match" : { "desc" : "pháº§n má»m há»‡ thá»‘ng" }}</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">}'</span></span></code></pre>
</div><p>Äoáº¡n mÃ£ trÃªn tÃ¬m kiáº¿m <code>pháº§n má»m or há»‡ thá»‘ng</code>.</p>
<p>Náº¿u báº¡n muá»‘n thá»±c hiá»‡n tÃ¬m kiáº¿m <code>and</code> vá»›i nhiá»u tá»« khÃ³a, báº¡n pháº£i sá»­ dá»¥ng <a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl-bool-query.html" target="_blank" rel="noopener noreferrer">Bool Query</a>.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">$</span><span style="color:#98C379;--shiki-dark:#98C379"> curl</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -H</span><span style="color:#98C379;--shiki-dark:#98C379"> 'Content-Type: application/json'</span><span style="color:#98C379;--shiki-dark:#98C379"> 'localhost:9200/user/admin/_search?pretty'</span><span style="color:#D19A66;--shiki-dark:#D19A66">  -d</span><span style="color:#98C379;--shiki-dark:#98C379"> '</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">{</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379"> "query": {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  "bool": {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">   "must": [</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    { "match": { "desc": "quáº£n lÃ½" } },</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    { "match": { "desc": "siÃªu cáº¥p" } }</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">   ]</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  }</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">}'</span></span></code></pre>
</div><h3>Thá»±c hiá»‡n hÃ ng loáº¡t</h3>
<p>Há»— trá»£ thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng trÃªn cÃ¡c chá»‰ má»¥c khÃ¡c nhau trong má»™t láº§n gá»i API</p>
<p>Há»— trá»£ bá»‘n loáº¡i hoáº¡t Ä‘á»™ng</p>
<ul>
<li>index</li>
<li>create</li>
<li>update</li>
<li>delete</li>
</ul>
<p>Náº¿u má»™t hoáº¡t Ä‘á»™ng Ä‘Æ¡n láº» tháº¥t báº¡i, Ä‘iá»u nÃ y sáº½ khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n cÃ¡c hoáº¡t Ä‘á»™ng khÃ¡c.</p>
<p>Káº¿t quáº£ tráº£ vá» bao gá»“m káº¿t quáº£ cá»§a tá»«ng hoáº¡t Ä‘á»™ng Ä‘Æ°á»£c thá»±c hiá»‡n.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> _bulk</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test",</span><span style="color:#98C379;--shiki-dark:#98C379"> "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "1"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"field1"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "value1"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"delete"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test",</span><span style="color:#98C379;--shiki-dark:#98C379"> "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "2"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"create"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test2",</span><span style="color:#98C379;--shiki-dark:#98C379"> "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "3"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"field1"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "value3"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"update"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {"_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "1",</span><span style="color:#98C379;--shiki-dark:#98C379"> "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test"}</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"doc"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {"field2"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "value2"}</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span></code></pre>
</div><blockquote>
<p>LÆ°u Ã½: Náº¿u vÃ­ dá»¥ trÃªn Ä‘Æ°á»£c thá»±c hiá»‡n nhiá»u láº§n, káº¿t quáº£ sáº½ khÃ´ng giá»‘ng nhau.</p>
</blockquote>
<h3>Äá»c hÃ ng loáº¡t</h3>
<p>Äá»c nhiá»u chá»‰ má»¥c</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_mget</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "docs"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "1"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "2"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Äá»c má»™t chá»‰ má»¥c</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /test/_mget</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "docs"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "1"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "2"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_mget</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "docs"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "1",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_source"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "2",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_source"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span><span style="color:#98C379;--shiki-dark:#98C379">"field3"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"field4"]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "test",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_id"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "3",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">            "_source"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">                "include"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span><span style="color:#98C379;--shiki-dark:#98C379">"user"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">                "exclude"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span><span style="color:#98C379;--shiki-dark:#98C379">"user.location"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>Truy váº¥n hÃ ng loáº¡t</h3>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> kibana_sample_data_ecommerce/_msearch</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"query"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {"match_all"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {}},"size":1}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"index"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "kibana_sample_data_flights"}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"query"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {"match_all"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> {}},"size":2}</span></span></code></pre>
</div><h3>TÃ¬m kiáº¿m URI</h3>
<p>TÃ¬m kiáº¿m URI Elasticsearch tuÃ¢n theo ngá»¯ cáº£nh QueryString, dáº¡ng nhÆ° sau:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /movies/_search?q=</span><span style="color:#D19A66;--shiki-dark:#D19A66">2012</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75">df</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75">sort</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">year:desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75">from</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75">size</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75">timeout</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">1s</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><ul>
<li><strong><code>q</code></strong> chá»‰ Ä‘á»‹nh cÃ¢u truy váº¥n, sá»­ dá»¥ng ngá»¯ cáº£nh QueryString</li>
<li><strong><code>df</code></strong> lÃ  trÆ°á»ng máº·c Ä‘á»‹nh, náº¿u khÃ´ng chá»‰ Ä‘á»‹nh</li>
<li><strong><code>sort</code></strong> sáº¯p xáº¿p: <code>from</code> vÃ  <code>size</code> Ä‘Æ°á»£c sá»­ dá»¥ng cho phÃ¢n trang</li>
<li><strong><code>profile</code></strong> cÃ³ thá»ƒ xem cÃ¡ch thá»±c hiá»‡n truy váº¥n</li>
</ul>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /movies/_search?q=title:2012</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75">sort</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">year:desc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75">from</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75">size</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75">timeout</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">1s</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"true"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>Term vÃ  Phrase</h4>
<p>Beautiful Mind tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i Beautiful OR Mind</p>
<p>"Beautiful Mind" tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i Beautiful AND Mind</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Truy váº¥n Term</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /movies/_search?q=title:Beautiful</span><span style="color:#98C379;--shiki-dark:#98C379"> Mind</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"true"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Sá»­ dá»¥ng dáº¥u ngoáº·c kÃ©p, Truy váº¥n Phrase</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /movies/_search?q=title:"Beautiful Mind"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"true"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>NhÃ³m vÃ  dáº¥u ngoáº·c kÃ©p</h4>
<p>title:(Beautiful AND Mind)</p>
<p>title="Beautiful Mind"</p>
<h4>AND, OR, NOT hoáº·c &amp;&amp;, ||, !</h4>
<blockquote>
<p>ChÃº Ã½: AND, OR, NOT pháº£i viáº¿t HOA</p>
</blockquote>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># ToÃ¡n tá»­ boolean</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /movies/_search?q=title:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">Beautiful</span><span style="color:#98C379;--shiki-dark:#98C379"> AND</span><span style="color:#98C379;--shiki-dark:#98C379"> Mind</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"true"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /movies/_search?q=title:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">Beautiful</span><span style="color:#98C379;--shiki-dark:#98C379"> NOT</span><span style="color:#98C379;--shiki-dark:#98C379"> Mind</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"true"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>Truy váº¥n pháº¡m vi</h4>
<ul>
<li><code>[]</code> biá»ƒu thá»‹ khoáº£ng Ä‘Ã³ng</li>
<li><code>{}</code> biá»ƒu thá»‹ khoáº£ng má»Ÿ</li>
</ul>
<p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Truy váº¥n pháº¡m vi, cÃº phÃ¡p khoáº£ng</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /movies/_search?q=title:beautiful</span><span style="color:#98C379;--shiki-dark:#98C379"> AND</span><span style="color:#98C379;--shiki-dark:#98C379"> year:{</span><span style="color:#D19A66;--shiki-dark:#D19A66">2010</span><span style="color:#98C379;--shiki-dark:#98C379"> TO</span><span style="color:#98C379;--shiki-dark:#98C379"> 2018%7D</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"true"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /movies/_search?q=title:beautiful</span><span style="color:#98C379;--shiki-dark:#98C379"> AND</span><span style="color:#98C379;--shiki-dark:#98C379"> year:[</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">*</span><span style="color:#98C379;--shiki-dark:#98C379"> TO</span><span style="color:#98C379;--shiki-dark:#98C379"> 2018]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"true"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>KÃ½ hiá»‡u toÃ¡n há»c</h4>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Há»“ sÆ¡ sau nÄƒm 2010</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /movies/_search?q=year</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:&gt;</span><span style="color:#98C379;--shiki-dark:#98C379">2010</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"true"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Há»“ sÆ¡ tá»« nÄƒm 2010 Ä‘áº¿n nÄƒm 2018</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /movies/_search?q=year:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(&gt;2010 &amp;&amp; &lt;</span><span style="color:#98C379;--shiki-dark:#98C379">=2018</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"true"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Há»“ sÆ¡ tá»« nÄƒm 2010 Ä‘áº¿n nÄƒm 2018</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /movies/_search?q=year:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">+</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#98C379;--shiki-dark:#98C379">2010</span><span style="color:#98C379;--shiki-dark:#98C379"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#98C379;--shiki-dark:#98C379">=</span><span style="color:#D19A66;--shiki-dark:#D19A66">2018</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"true"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>Truy váº¥n dÃ¹ng kÃ½ tá»± Ä‘áº¡i diá»‡n</h4>
<ul>
<li><code>?</code> Ä‘áº¡i diá»‡n cho 1 kÃ½ tá»±</li>
<li><code>*</code> Ä‘áº¡i diá»‡n cho 0 hoáº·c nhiá»u kÃ½ tá»±</li>
</ul>
<p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /movies/_search?q=title:mi?d</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"true"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /movies/_search?q=title:b</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">*</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"true"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>Biá»ƒu thá»©c chÃ­nh quy</h4>
<p>title:[bt]oy</p>
<h4>Káº¿t há»£p má» vÃ  truy váº¥n gáº§n Ä‘Ãºng</h4>
<p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äá»™ tÆ°Æ¡ng tá»± trong khoáº£ng 1 kÃ½ tá»±</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /movies/_search?q=title:beautifl~1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"true"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Äá»™ tÆ°Æ¡ng tá»± trong khoáº£ng 2 kÃ½ tá»±</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /movies/_search?q=title:"Lord Rings"~2</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"true"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3>Request Body &amp; DSL</h3>
<p>NgoÃ i phÆ°Æ¡ng phÃ¡p tÃ¬m kiáº¿m URI, Elasticsearch cÃ²n há»— trá»£ viá»‡c gá»­i cÃ¢u truy váº¥n thÃ´ng qua Http Request Body.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /kibana_sample_data_ecommerce/_search?ignore_unavailable=</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"true"</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	  "match_all"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">	}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>PhÃ¢n trang</h4>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /kibana_sample_data_ecommerce/_search?ignore_unavailable=</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "true",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "from"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 0,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "size"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 10,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match_all"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>Sáº¯p xáº¿p</h4>
<p>Tá»‘t nháº¥t lÃ  sáº¯p xáº¿p trÃªn trÆ°á»ng dáº¡ng sá»‘ hoáº·c ngÃ y</p>
<p>Bá»Ÿi vÃ¬ khi sáº¯p xáº¿p trÃªn trÆ°á»ng cÃ³ nhiá»u giÃ¡ trá»‹ hoáº·c Ä‘Ã£ Ä‘Æ°á»£c phÃ¢n tÃ­ch, há»‡ thá»‘ng sáº½ chá»n má»™t giÃ¡ trá»‹, khÃ´ng thá»ƒ biáº¿t giÃ¡ trá»‹ Ä‘Ã³ lÃ  gÃ¬</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /kibana_sample_data_ecommerce/_search?ignore_unavailable=</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "true",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "sort"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "order_date"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "desc"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  ],</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "from"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 1,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "size"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 10,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match_all"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>Lá»c _source</h4>
<p>Náº¿u <code>_source</code> khÃ´ng Ä‘Æ°á»£c lÆ°u trá»¯, thÃ¬ chá»‰ tráº£ vá» metadata cá»§a cÃ¡c tÃ i liá»‡u khá»›p</p>
<p><code>_source</code> há»— trá»£ sá»­ dá»¥ng kÃ½ tá»± Ä‘áº¡i diá»‡n, vÃ­ dá»¥: <code>_source["name*", "desc*"]</code></p>
<p>VÃ­ dá»¥:</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /kibana_sample_data_ecommerce/_search?ignore_unavailable=</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "true",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "_source"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "order_date"</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "category.keyword"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  ],</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "from"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 1,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "size"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 10,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match_all"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>TrÆ°á»ng script</h4>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /kibana_sample_data_ecommerce/_search?ignore_unavailable=</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "profile"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "true",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "script_fields"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "new_field"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "script"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "lang"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "painless",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "source"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">"doc['order_date'].value+' hello'"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "from"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 1,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "size"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> 10,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match_all"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>Sá»­ dá»¥ng biá»ƒu thá»©c truy váº¥n - Match</h4>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> movies/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "title"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "last christmas"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> movies/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "title"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "last christmas",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "operator"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "and"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>TÃ¬m kiáº¿m cá»¥m tá»« - Match Phrase</h4>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">POST</span><span style="color:#98C379;--shiki-dark:#98C379"> movies/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "match_phrase"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "title"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "last christmas"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h2>Cluster API</h2>
<blockquote>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster.html" target="_blank" rel="noopener noreferrer">Elasticsearch Official Cluster API</a></p>
</blockquote>
<p>Má»™t sá»‘ API cáº¥p cluster cÃ³ thá»ƒ Ä‘Æ°á»£c thá»±c thi trÃªn má»™t táº­p con cá»§a cÃ¡c node, nhá»¯ng node nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh báº±ng bá»™ lá»c node. VÃ­ dá»¥, cÃ¡c API quáº£n lÃ½ task, thá»‘ng kÃª node vÃ  thÃ´ng tin node Ä‘á»u cÃ³ thá»ƒ bÃ¡o cÃ¡o káº¿t quáº£ tá»« má»™t nhÃ³m cÃ¡c node Ä‘Ã£ lá»c thay vÃ¬ táº¥t cáº£ cÃ¡c node.</p>
<p>Bá»™ lá»c node Ä‘Æ°á»£c viáº¿t dÆ°á»›i dáº¡ng danh sÃ¡ch bá»™ lá»c Ä‘Æ¡n láº» Ä‘Æ°á»£c phÃ¢n tÃ¡ch báº±ng dáº¥u pháº©y, má»—i bá»™ lá»c thÃªm hoáº·c loáº¡i bá» cÃ¡c node tá»« táº­p con Ä‘Ã£ chá»n. Má»—i bá»™ lá»c cÃ³ thá»ƒ lÃ  má»™t trong nhá»¯ng Ä‘iá»u sau:</p>
<ul>
<li><code>_all</code>: thÃªm táº¥t cáº£ cÃ¡c node vÃ o táº­p con</li>
<li><code>_local</code>: thÃªm node cá»¥c bá»™ vÃ o táº­p con</li>
<li><code>_master</code>: thÃªm node master hiá»‡n táº¡i vÃ o táº­p con</li>
<li>ThÃªm cÃ¡c node khá»›p theo ID node hoáº·c tÃªn node vÃ o táº­p con</li>
<li>ThÃªm cÃ¡c node khá»›p theo Ä‘á»‹a chá»‰ IP hoáº·c tÃªn mÃ¡y chá»§ vÃ o táº­p con</li>
<li>Sá»­ dá»¥ng kÃ½ tá»± Ä‘áº¡i diá»‡n, thÃªm cÃ¡c node cÃ³ tÃªn, tÃªn Ä‘á»‹a chá»‰ hoáº·c tÃªn mÃ¡y chá»§ khá»›p vÃ o táº­p con</li>
<li><code>master:true</code>, <code>data:true</code>, <code>ingest:true</code>, <code>voting_only:true</code>, <code>ml:true</code> hoáº·c <code>coordinating_only:true</code>, tÆ°Æ¡ng á»©ng cÃ³ nghÄ©a lÃ  thÃªm táº¥t cáº£ cÃ¡c node master, táº¥t cáº£ cÃ¡c node dá»¯ liá»‡u, táº¥t cáº£ cÃ¡c node ingest, táº¥t cáº£ cÃ¡c node chá»‰ bá» phiáº¿u, táº¥t cáº£ cÃ¡c node machine learning vÃ  táº¥t cáº£ cÃ¡c node Ä‘iá»u phá»‘i vÃ o táº­p con.</li>
<li><code>master:false</code>, <code>data:false</code>, <code>ingest:false</code>, <code>voting_only:true</code>, <code>ml:false</code> hoáº·c <code>coordinating_only:false</code>, tÆ°Æ¡ng á»©ng cÃ³ nghÄ©a lÃ  loáº¡i trá»« táº¥t cáº£ cÃ¡c node master, táº¥t cáº£ cÃ¡c node dá»¯ liá»‡u, táº¥t cáº£ cÃ¡c node ingest, táº¥t cáº£ cÃ¡c node chá»‰ bá» phiáº¿u, táº¥t cáº£ cÃ¡c node machine learning vÃ  táº¥t cáº£ cÃ¡c node Ä‘iá»u phá»‘i ra khá»i táº­p con.</li>
<li>MÃ´ hÃ¬nh ghÃ©p cáº·p, sá»­ dá»¥ng kÃ½ tá»± Ä‘áº¡i diá»‡n <code>*</code>, theo dáº¡ng <code>attrname:attrvalue</code>, thÃªm táº¥t cáº£ cÃ¡c node cÃ³ thuá»™c tÃ­nh node tÃ¹y chá»‰nh vÃ o táº­p con, tÃªn vÃ  giÃ¡ trá»‹ cá»§a nÃ³ khá»›p vá»›i mÃ´ hÃ¬nh tÆ°Æ¡ng á»©ng. Thuá»™c tÃ­nh node tÃ¹y chá»‰nh Ä‘Æ°á»£c thiáº¿t láº­p trong tá»‡p cáº¥u hÃ¬nh theo dáº¡ng <code>node.attr.attrname: attrvalue</code>.</li>
</ul>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Náº¿u khÃ´ng cÃ³ bá»™ lá»c, máº·c Ä‘á»‹nh lÃ  truy váº¥n táº¥t cáº£ cÃ¡c node</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_nodes</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Truy váº¥n táº¥t cáº£ cÃ¡c node</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_nodes/_all</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Truy váº¥n node cá»¥c bá»™</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_nodes/_local</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Truy váº¥n node master</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_nodes/_master</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Truy váº¥n node theo tÃªn (há»— trá»£ kÃ½ tá»± Ä‘áº¡i diá»‡n)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_nodes/node_name_goes_here</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_nodes/node_name_goes_</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">*</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Truy váº¥n node theo Ä‘á»‹a chá»‰ (há»— trá»£ kÃ½ tá»± Ä‘áº¡i diá»‡n)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_nodes/10.0.0.3,10.0.0.4</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_nodes/10.0.0.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">*</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Truy váº¥n node theo quy táº¯c</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_nodes/_all,master:</span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_nodes/data:</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#98C379;--shiki-dark:#98C379">,ingest:</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_nodes/coordinating_only:</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_nodes/master:</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#98C379;--shiki-dark:#98C379">,voting_only:</span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Truy váº¥n node theo thuá»™c tÃ­nh tÃ¹y chá»‰nh (vÃ­ dá»¥: truy váº¥n cÃ¡c node cÃ³ thuá»™c tÃ­nh node.attr.rack:2 trong tá»‡p cáº¥u hÃ¬nh)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_nodes/rack:2</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_nodes/ra</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">*</span><span style="color:#98C379;--shiki-dark:#98C379">:2</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_nodes/ra</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">*</span><span style="color:#98C379;--shiki-dark:#98C379">:2</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">*</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>Cluster Health API</h3>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_cluster/health</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_cluster/health?level=shards</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_cluster/health/kibana_sample_data_ecommerce,kibana_sample_data_flights</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_cluster/health/kibana_sample_data_flights?level=shards</span></span></code></pre>
</div><h3>Cluster State API</h3>
<p>Cluster State API tráº£ vá» metadata biá»ƒu thá»‹ tráº¡ng thÃ¡i toÃ n bá»™ cluster.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_cluster/state</span></span></code></pre>
</div><h2>Nodes API</h2>
<blockquote>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/cat-nodes.html" target="_blank" rel="noopener noreferrer">Elasticsearch Official cat Nodes API</a> - Tráº£ vá» thÃ´ng tin vá» cÃ¡c node trong cluster.</p>
</blockquote>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Xem cÃ¡c trÆ°á»ng máº·c Ä‘á»‹nh</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_cat/nodes?v=</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Xem cÃ¡c trÆ°á»ng chá»‰ Ä‘á»‹nh</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_cat/nodes?v=</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75">h</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">id,ip,port,v,m</span></span></code></pre>
</div><h2>Shards API</h2>
<blockquote>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/cat-shards.html" target="_blank" rel="noopener noreferrer">Elasticsearch Official cat Shards API</a> - Lá»‡nh shards cung cáº¥p má»™t cÃ¡i nhÃ¬n chi tiáº¿t vá» shard nÃ o thuá»™c vá» node nÃ o. NÃ³ sáº½ cho báº¡n biáº¿t nÃ³ lÃ  primary hay replica, sá»‘ lÆ°á»£ng tÃ i liá»‡u, sá»‘ byte mÃ  nÃ³ chiáº¿m trÃªn Ä‘Ä©a vÃ  node mÃ  nÃ³ Ä‘ang náº±m trÃªn.</p>
</blockquote>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Xem cÃ¡c trÆ°á»ng máº·c Ä‘á»‹nh</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_cat/shards</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Truy váº¥n shard theo tÃªn (há»— trá»£ kÃ½ tá»± Ä‘áº¡i diá»‡n)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_cat/shards/my-index-</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">*</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Xem cÃ¡c trÆ°á»ng chá»‰ Ä‘á»‹nh</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_cat/shards?h=index,shard,prirep,state,unassigned.reason</span></span></code></pre>
</div><h2>Monitoring API</h2>
<p>Trong Elasticsearch, cÃ¡c thÃ´ng tin liÃªn quan Ä‘áº¿n sá»©c khá»e, thá»‘ng kÃª, v.v. cá»§a cluster Ä‘á»u xoay quanh <code>cat</code> API.</p>
<p>Báº±ng cÃ¡ch gá»­i yÃªu cáº§u GET Ä‘áº¿n cat, dÆ°á»›i Ä‘Ã¢y lÃ  táº¥t cáº£ cÃ¡c API cÃ³ sáºµn:</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> /_cat</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">=^</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">.</span><span style="color:#98C379;--shiki-dark:#98C379">^=</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/allocation</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/shards</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/shards/</span><span style="color:#98C379;--shiki-dark:#98C379">{index}</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/master</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/nodes</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/tasks</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/indices</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/indices/</span><span style="color:#98C379;--shiki-dark:#98C379">{index}</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/segments</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/segments/</span><span style="color:#98C379;--shiki-dark:#98C379">{index}</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/count</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/count/</span><span style="color:#98C379;--shiki-dark:#98C379">{index}</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/recovery</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/recovery/</span><span style="color:#98C379;--shiki-dark:#98C379">{index}</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/health</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/pending_tasks</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/aliases</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/aliases/</span><span style="color:#98C379;--shiki-dark:#98C379">{</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">alias</span><span style="color:#98C379;--shiki-dark:#98C379">}</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/thread_pool</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/thread_pool/</span><span style="color:#98C379;--shiki-dark:#98C379">{thread_pools}</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/plugins</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/fielddata</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/fielddata/</span><span style="color:#98C379;--shiki-dark:#98C379">{fields}</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/nodeattrs</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/repositories</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/snapshots/</span><span style="color:#98C379;--shiki-dark:#98C379">{repository}</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">/_cat/templates</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>TÃ i liá»‡u tham kháº£o</h2>
<ul>
<li><strong>ChÃ­nh thá»©c</strong>
<ul>
<li><a href="https://www.elastic.co/products/elasticsearch" target="_blank" rel="noopener noreferrer">Trang chá»§ Elasticsearch</a></li>
<li><a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch Github</a></li>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html" target="_blank" rel="noopener noreferrer">TÃ i liá»‡u chÃ­nh thá»©c Elasticsearch</a></li>
</ul>
</li>
</ul>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20220530072511.png" type="image/png"/>
    </item>
    <item>
      <title>Elasticsearch Sorting</title>
      <link>https://vanhung4499.github.io/database/elasticsearch/sorting.html</link>
      <guid>https://vanhung4499.github.io/database/elasticsearch/sorting.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Elasticsearch Sorting</source>
      <description>Elasticsearch Sorting Sáº¯p xáº¿p Elasticsearch Trong Elasticsearch, máº·c Ä‘á»‹nh Ä‘Æ°á»£c sáº¯p xáº¿p theo Ä‘Ã¡nh giÃ¡ liÃªn quan (_score) theo thá»© tá»± giáº£m dáº§n, hoáº·c cÃ³ thá»ƒ sáº¯p xáº¿p theo giÃ¡ trá»‹ cá»§...</description>
      <category>elasticssearch</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[<p>Elasticsearch Sorting</p>
<h1>Sáº¯p xáº¿p Elasticsearch</h1>
<p>Trong Elasticsearch, máº·c Ä‘á»‹nh Ä‘Æ°á»£c sáº¯p xáº¿p theo <strong>Ä‘Ã¡nh giÃ¡ liÃªn quan (_score)</strong> theo thá»© tá»± giáº£m dáº§n, hoáº·c cÃ³ thá»ƒ sáº¯p xáº¿p theo <strong>giÃ¡ trá»‹ cá»§a trÆ°á»ng</strong>, <strong>sáº¯p xáº¿p nhiá»u cáº¥p</strong>, <strong>sáº¯p xáº¿p trÆ°á»ng nhiá»u giÃ¡ trá»‹</strong>, <strong>sáº¯p xáº¿p dá»±a trÃªn vá»‹ trÃ­ Ä‘á»‹a lÃ½ (geo)</strong> vÃ  <strong>sáº¯p xáº¿p tÃ¹y chá»‰nh báº±ng script</strong>. NgoÃ i ra, Ä‘Ã¡nh giÃ¡ liÃªn quan cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘Ã¡nh giÃ¡ láº¡i vá»›i rescore hai, ba láº§n, nÃ³ cÃ³ thá»ƒ giá»›i háº¡n kÃ­ch thÆ°á»›c cá»­a sá»• (window size) cho viá»‡c Ä‘Ã¡nh giÃ¡ láº¡i vÃ  chá»‰nh sá»­a Ä‘iá»ƒm sá»‘ cá»§a cÃ¡c tÃ i liá»‡u trong pháº¡m vi tÃ¡c Ä‘á»™ng, tá»« Ä‘Ã³ Ä‘áº¡t Ä‘Æ°á»£c má»¥c tiÃªu kiá»ƒm soÃ¡t káº¿t quáº£ liÃªn quan má»™t cÃ¡ch tinh vi.</p>
<h2>Sáº¯p xáº¿p liÃªn quan máº·c Ä‘á»‹nh</h2>
<p>Trong Elasticsearch, máº·c Ä‘á»‹nh, cÃ¡c tÃ i liá»‡u Ä‘Æ°á»£c sáº¯p xáº¿p theo thá»© tá»± giáº£m dáº§n cá»§a Ä‘iá»ƒm liÃªn quan, trÆ°á»ng tÆ°Æ¡ng á»©ng vá»›i Ä‘iá»ƒm liÃªn quan Ä‘Æ°á»£c biá»ƒu thá»‹ báº±ng <code>_score</code>, Ä‘Ã¢y lÃ  kiá»ƒu sá»‘ thá»±c, Ä‘iá»ƒm <code>_score</code> cÃ ng cao, liÃªn quan cÃ ng cao. MÃ´ hÃ¬nh Ä‘Ã¡nh giÃ¡ cÃ³ thá»ƒ Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh thÃ´ng qua tham sá»‘ <code>similarity</code> trong Ã¡nh xáº¡.</p>
<p>Thuáº­t toÃ¡n tÆ°Æ¡ng tá»± cÃ³ thá»ƒ Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh theo trÆ°á»ng, chá»‰ cáº§n chá»n trong Ã¡nh xáº¡ cho cÃ¡c trÆ°á»ng khÃ¡c nhau, náº¿u báº¡n muá»‘n chá»‰nh sá»­a thuáº­t toÃ¡n tÆ°Æ¡ng tá»± cá»§a trÆ°á»ng hiá»‡n cÃ³, báº¡n chá»‰ cÃ³ thá»ƒ Ä‘áº¡t Ä‘Æ°á»£c má»¥c tiÃªu nÃ y báº±ng cÃ¡ch xÃ¢y dá»±ng láº¡i chá»‰ má»¥c cho dá»¯ liá»‡u. Äá»‘i vá»›i thuáº­t toÃ¡n tÆ°Æ¡ng tá»± es hÆ¡n, báº¡n cÃ³ thá»ƒ tham kháº£o <a href="https://www.knowledgedict.com/tutorial/elasticsearch-similarity.html" target="_blank" rel="noopener noreferrer">Sá»± hiá»ƒu biáº¿t sÃ¢u sáº¯c vá» thuáº­t toÃ¡n tÆ°Æ¡ng tá»± es (tÃ­nh Ä‘iá»ƒm liÃªn quan)</a>.</p>
<h3>MÃ´ hÃ¬nh TF-IDF</h3>
<p>TrÆ°á»›c phiÃªn báº£n 5.4 cá»§a Elasticsearch, cÃ¡c trÆ°á»ng kiá»ƒu text máº·c Ä‘á»‹nh sá»­ dá»¥ng mÃ´ hÃ¬nh khÃ´ng gian vector dá»±a trÃªn tf-idf.</p>
<p>Khi báº¯t Ä‘áº§u tÃ­nh Ä‘iá»ƒm, Elasticsearch sá»­ dá»¥ng táº§n suáº¥t cá»§a tá»« khÃ³a Ä‘Æ°á»£c tÃ¬m kiáº¿m vÃ  má»©c Ä‘á»™ phá»• biáº¿n cá»§a nÃ³ Ä‘á»ƒ áº£nh hÆ°á»Ÿng Ä‘áº¿n Ä‘iá»ƒm. Má»™t giáº£i thÃ­ch ngáº¯n gá»n lÃ , <strong>cÃ ng nhiá»u láº§n má»™t tá»« khÃ³a xuáº¥t hiá»‡n trong má»™t tÃ i liá»‡u, nÃ³ cÃ ng liÃªn quan; tuy nhiÃªn, náº¿u tá»« khÃ³a xuáº¥t hiá»‡n trong nhiá»u tÃ i liá»‡u khÃ¡c nhau, nÃ³ cÃ ng khÃ´ng liÃªn quan</strong>. Äiá»u nÃ y Ä‘Æ°á»£c gá»i lÃ  TF-IDF, TF lÃ  <strong>táº§n suáº¥t tá»«</strong> (term frequency), IDF lÃ  <strong>táº§n suáº¥t tÃ i liá»‡u nghá»‹ch Ä‘áº£o</strong> (inverse document frequency).</p>
<p>CÃ¡ch tiáº¿p cáº­n chÃ­nh Ä‘á»ƒ Ä‘Ã¡nh giÃ¡ má»™t tÃ i liá»‡u lÃ  Ä‘áº¿m sá»‘ láº§n má»™t tá»« khÃ³a xuáº¥t hiá»‡n trong vÄƒn báº£n. VÃ­ dá»¥, náº¿u ngÆ°á»i dÃ¹ng tÃ¬m kiáº¿m má»™t buá»•i há»p vá» Elasticsearch trong khu vá»±c cá»§a há», há» muá»‘n nhÃ³m tháº£o luáº­n vá» Elasticsearch Ä‘Æ°á»£c hiá»ƒn thá»‹ Ä‘áº§u tiÃªn.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>"We will discuss Elasticsearch at the next Big Data group."</span></span>
<span class="line"><span>"Tuesday the Elasticsearch team will gather to answer questions about Elasticsearch."</span></span></code></pre>
</div><p>CÃ¢u Ä‘áº§u tiÃªn Ä‘á» cáº­p Ä‘áº¿n Elasticsearch má»™t láº§n, trong khi cÃ¢u thá»© hai Ä‘á» cáº­p Ä‘áº¿n Elasticsearch hai láº§n, vÃ¬ váº­y tÃ i liá»‡u chá»©a cÃ¢u thá»© hai nÃªn cÃ³ Ä‘iá»ƒm sá»‘ cao hÆ¡n so vá»›i tÃ i liá»‡u chá»©a cÃ¢u Ä‘áº§u tiÃªn. Náº¿u chÃºng ta Ä‘á» cáº­p Ä‘áº¿n sá»‘ lÆ°á»£ng, táº§n suáº¥t tá»« (TF) cá»§a cÃ¢u Ä‘áº§u tiÃªn lÃ  1, trong khi táº§n suáº¥t tá»« cá»§a cÃ¢u thá»© hai sáº½ lÃ  2.</p>
<p>Táº§n suáº¥t tÃ i liá»‡u nghá»‹ch Ä‘áº£o phá»©c táº¡p hÆ¡n má»™t chÃºt so vá»›i táº§n suáº¥t tá»«. MÃ´ táº£ tuyá»‡t vá»i nÃ y cÃ³ nghÄ©a lÃ , náº¿u má»™t tá»« (thÃ´ng thÆ°á»ng lÃ  má»™t tá»«, nhÆ°ng khÃ´ng nháº¥t thiáº¿t pháº£i lÃ  má»™t tá»«) xuáº¥t hiá»‡n nhiá»u láº§n trong cÃ¡c tÃ i liá»‡u khÃ¡c nhau cá»§a chá»‰ má»¥c, thÃ¬ nÃ³ sáº½ khÃ´ng quan trá»ng. VÃ­ dá»¥ sau sáº½ giáº£i thÃ­ch Ä‘iá»u nÃ y má»™t cÃ¡ch dá»… dÃ ng hÆ¡n.</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>"We use Elasticsearch to power the search for our website."</span></span>
<span class="line"><span>"The developers like Elasticsearch so far."</span></span>
<span class="line"><span>"The scoring of documents is calculated by the scoring formula."</span></span></code></pre>
</div><p>Trong vÃ­ dá»¥ trÃªn, cáº§n hiá»ƒu nhá»¯ng Ä‘iá»ƒm sau:</p>
<ul>
<li>Táº§n suáº¥t tÃ i liá»‡u cá»§a tá»« khÃ³a "Elasticsearch" lÃ  2 (vÃ¬ nÃ³ xuáº¥t hiá»‡n trong hai tÃ i liá»‡u). Táº§n suáº¥t tÃ i liá»‡u nghá»‹ch Ä‘áº£o xuáº¥t phÃ¡t tá»« viá»‡c nhÃ¢n Ä‘iá»ƒm vá»›i 1/DF, nÆ¡i DF lÃ  táº§n suáº¥t tÃ i liá»‡u cá»§a tá»« khÃ³a. Äiá»u nÃ y cÃ³ nghÄ©a lÃ , do tá»« khÃ³a cÃ³ táº§n suáº¥t tÃ i liá»‡u cao hÆ¡n, trá»ng sá»‘ cá»§a nÃ³ sáº½ giáº£m.</li>
<li>Táº§n suáº¥t tÃ i liá»‡u cá»§a tá»« khÃ³a "the" lÃ  3, vÃ¬ nÃ³ xuáº¥t hiá»‡n trong táº¥t cáº£ ba tÃ i liá»‡u. LÆ°u Ã½ ráº±ng, máº·c dÃ¹ "the" xuáº¥t hiá»‡n hai láº§n trong tÃ i liá»‡u cuá»‘i cÃ¹ng, táº§n suáº¥t tÃ i liá»‡u cá»§a nÃ³ váº«n lÃ  3. Äiá»u nÃ y lÃ  bá»Ÿi vÃ¬ táº§n suáº¥t tÃ i liá»‡u nghá»‹ch Ä‘áº£o chá»‰ kiá»ƒm tra xem má»™t tá»« khÃ³a cÃ³ xuáº¥t hiá»‡n trong má»™t tÃ i liá»‡u nÃ o Ä‘Ã³ hay khÃ´ng, chá»© khÃ´ng kiá»ƒm tra xem nÃ³ xuáº¥t hiá»‡n bao nhiÃªu láº§n. Äiá»u Ä‘Ã³ nÃªn lÃ  má»‘i quan tÃ¢m cá»§a táº§n suáº¥t tá»«.</li>
</ul>
<p>Táº§n suáº¥t tÃ i liá»‡u nghá»‹ch Ä‘áº£o lÃ  má»™t yáº¿u tá»‘ quan trá»ng, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ cÃ¢n nháº¯c táº§n suáº¥t tá»«. VÃ­ dá»¥, xem xÃ©t má»™t ngÆ°á»i dÃ¹ng tÃ¬m kiáº¿m tá»« khÃ³a "the score", tá»« "the" xuáº¥t hiá»‡n gáº§n nhÆ° trong má»i vÄƒn báº£n tiáº¿ng Anh thÃ´ng thÆ°á»ng, náº¿u nÃ³ khÃ´ng Ä‘Æ°á»£c cÃ¢n nháº¯c, táº§n suáº¥t tá»« cá»§a tá»« "the" sáº½ hoÃ n toÃ n che má» táº§n suáº¥t tá»« cá»§a tá»« "score". Táº§n suáº¥t tÃ i liá»‡u nghá»‹ch Ä‘áº£o IDF cÃ¢n nháº¯c áº£nh hÆ°á»Ÿng liÃªn quan cá»§a tá»« thÃ´ng dá»¥ng nhÆ° "the", vÃ¬ váº­y Ä‘iá»ƒm liÃªn quan thá»±c táº¿ sáº½ mÃ´ táº£ chÃ­nh xÃ¡c hÆ¡n tá»« khÃ³a cá»§a truy váº¥n.</p>
<p>Má»™t khi táº§n suáº¥t tá»« TF vÃ  táº§n suáº¥t tÃ i liá»‡u nghá»‹ch Ä‘áº£o IDF Ä‘Ã£ Ä‘Æ°á»£c tÃ­nh toÃ¡n, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ´ng thá»©c TF-IDF Ä‘á»ƒ tÃ­nh Ä‘iá»ƒm cá»§a tÃ i liá»‡u.</p>
<h3>MÃ´ hÃ¬nh BM25</h3>
<p>Sau phiÃªn báº£n 5.4 cá»§a Elasticsearch, Ä‘á»‘i vá»›i trÆ°á»ng kiá»ƒu text, máº·c Ä‘á»‹nh sá»­ dá»¥ng mÃ´ hÃ¬nh Ä‘Ã¡nh giÃ¡ BM25, khÃ´ng pháº£i mÃ´ hÃ¬nh khÃ´ng gian vector dá»±a trÃªn tf-idf, mÃ´ hÃ¬nh Ä‘Ã¡nh giÃ¡ cÃ³ thá»ƒ Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh thÃ´ng qua tham sá»‘ <code>similarity</code> trong Ã¡nh xáº¡.</p>
<h2>Sáº¯p xáº¿p theo giÃ¡ trá»‹ cá»§a trÆ°á»ng</h2>
<p>Trong Elasticsearch, Ä‘á»ƒ sáº¯p xáº¿p theo giÃ¡ trá»‹ cá»§a má»™t trÆ°á»ng, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng tham sá»‘ <code>sort</code>.</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> books/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  "sort"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    "price"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      "order"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "desc"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Káº¿t quáº£ tráº£ vá» nhÆ° sau:</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "took"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">132</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "timed_out"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_shards"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "total"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "successful"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "skipped"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "failed"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "hits"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "total"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">749244</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "max_score"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "hits"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        "_index"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"books"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        "_type"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"book"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        "_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"8456479"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        "_score"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        "_source"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">          "id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">8456479</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">          "price"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1580.00</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">          ...</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        "sort"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">          1580.00</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      },</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">      ...</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Tá»« káº¿t quáº£ tráº£ vá» trÃªn, cÃ³ thá»ƒ tháº¥y, <code>max_score</code> vÃ  <code>_score</code> Ä‘á»u tráº£ vá» <code>null</code>, vÃ  trÆ°á»ng <code>sort</code> Ä‘Æ°á»£c thÃªm vÃ o, chá»©a giÃ¡ trá»‹ cá»§a trÆ°á»ng Ä‘Æ°á»£c sáº¯p xáº¿p. Viá»‡c tÃ­nh toÃ¡n <code>_score</code> tá»‘n kÃ©m, náº¿u khÃ´ng sáº¯p xáº¿p theo má»©c Ä‘á»™ liÃªn quan, viá»‡c ghi láº¡i <code>_score</code> khÃ´ng cÃ³ Ã½ nghÄ©a. Náº¿u báº¡n váº«n muá»‘n tÃ­nh toÃ¡n <code>_score</code> dÃ¹ sao, báº¡n cÃ³ thá»ƒ Ä‘áº·t tham sá»‘ <code>track_scores</code> thÃ nh <code>true</code>.</p>
<h2>Sáº¯p xáº¿p nhiá»u trÆ°á»ng</h2>
<p>Náº¿u chÃºng ta muá»‘n káº¿t há»£p price, date vÃ  _score Ä‘á»ƒ truy váº¥n, vÃ  káº¿t quáº£ phÃ¹ há»£p Ä‘áº§u tiÃªn Ä‘Æ°á»£c sáº¯p xáº¿p theo giÃ¡, sau Ä‘Ã³ Ä‘Æ°á»£c sáº¯p xáº¿p theo ngÃ y, vÃ  cuá»‘i cÃ¹ng Ä‘Æ°á»£c sáº¯p xáº¿p theo má»©c Ä‘á»™ liÃªn quan, vÃ­ dá»¥ cá»¥ thá»ƒ nhÆ° sau:</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">GET</span><span style="color:#98C379;--shiki-dark:#98C379"> books/_search</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"query"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">		"bool"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">			"must"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">				"match"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "content":</span><span style="color:#98C379;--shiki-dark:#98C379"> "java"</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			},</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">			"filter"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">				"term"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span><span style="color:#98C379;--shiki-dark:#98C379"> "user_id":</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 4868438</span><span style="color:#98C379;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">		}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">	},</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	"sort"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">			"price"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">				"order"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "desc"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">		}, {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">			"date"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">				"order"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "desc"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">		}, {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">			"_score"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">				"order"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">:</span><span style="color:#98C379;--shiki-dark:#98C379"> "desc"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">			}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">		}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">	]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Thá»© tá»± cá»§a cÃ¡c Ä‘iá»u kiá»‡n sáº¯p xáº¿p ráº¥t quan trá»ng. Káº¿t quáº£ Ä‘áº§u tiÃªn Ä‘Æ°á»£c sáº¯p xáº¿p theo Ä‘iá»u kiá»‡n Ä‘áº§u tiÃªn, chá»‰ khi giÃ¡ trá»‹ <code>sort</code> Ä‘áº§u tiÃªn cá»§a táº­p káº¿t quáº£ hoÃ n toÃ n giá»‘ng nhau, káº¿t quáº£ má»›i Ä‘Æ°á»£c sáº¯p xáº¿p theo Ä‘iá»u kiá»‡n thá»© hai, vÃ  cá»© tiáº¿p tá»¥c nhÆ° váº­y.</p>
<p>Sáº¯p xáº¿p nhiá»u cáº¥p khÃ´ng nháº¥t thiáº¿t pháº£i bao gá»“m <code>_score</code>. Báº¡n cÃ³ thá»ƒ sáº¯p xáº¿p theo má»™t sá»‘ trÆ°á»ng khÃ¡c nhau, nhÆ° khoáº£ng cÃ¡ch Ä‘á»‹a lÃ½ hoáº·c giÃ¡ trá»‹ Ä‘Æ°á»£c tÃ­nh toÃ¡n báº±ng script.</p>
<h2>Sáº¯p xáº¿p trÆ°á»ng cÃ³ nhiá»u giÃ¡ trá»‹</h2>
<p>Má»™t trÆ°á»ng há»£p lÃ  sáº¯p xáº¿p khi trÆ°á»ng cÃ³ nhiá»u giÃ¡ trá»‹, cáº§n nhá»› ráº±ng cÃ¡c giÃ¡ trá»‹ nÃ y khÃ´ng cÃ³ thá»© tá»± cá»‘ Ä‘á»‹nh; má»™t trÆ°á»ng cÃ³ nhiá»u giÃ¡ trá»‹ chá»‰ Ä‘Æ¡n giáº£n lÃ  má»™t bá»™ giÃ¡ trá»‹ nhiá»u, váº­y nÃªn chá»n giÃ¡ trá»‹ nÃ o Ä‘á»ƒ sáº¯p xáº¿p?</p>
<p>Äá»‘i vá»›i sá»‘ hoáº·c ngÃ y, báº¡n cÃ³ thá»ƒ giáº£m trÆ°á»ng nhiá»u giÃ¡ trá»‹ thÃ nh má»™t giÃ¡ trá»‹ duy nháº¥t, Ä‘iá»u nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c thá»±c hiá»‡n báº±ng cÃ¡ch sá»­ dá»¥ng cháº¿ Ä‘á»™ sáº¯p xáº¿p <code>min</code>, <code>max</code>, <code>avg</code> hoáº·c <code>sum</code>. VÃ­ dá»¥, báº¡n cÃ³ thá»ƒ sáº¯p xáº¿p theo ngÃ y sá»›m nháº¥t trong má»—i trÆ°á»ng date, thÃ´ng qua cÃ¡ch sau:</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#98C379;--shiki-dark:#98C379">"sort"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "dates"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "order"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"asc"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "mode"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:  </span><span style="color:#98C379;--shiki-dark:#98C379">"min"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h2>Sáº¯p xáº¿p theo khoáº£ng cÃ¡ch Ä‘á»‹a lÃ½</h2>
<p>Elasticsearch sá»­ dá»¥ng <code>_geo_distance</code> Ä‘á»ƒ sáº¯p xáº¿p theo khoáº£ng cÃ¡ch Ä‘á»‹a lÃ½, nhÆ° vÃ­ dá»¥ sau:</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "sort"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "_geo_distance"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        "es_location_field"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : [</span><span style="color:#D19A66;--shiki-dark:#D19A66">116.407526</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">39.904030</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        "order"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"asc"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        "unit"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"km"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        "mode"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"min"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        "distance_type"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"plane"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  ],</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "query"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : {</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">    ......</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>CÃ¡c tÃ¹y chá»n cá»§a <code>_geo_distance</code> cá»¥ thá»ƒ nhÆ° sau:</p>
<ul>
<li>TrÆ°á»ng <code>es_location_field</code> trong vÃ­ dá»¥ trÃªn lÃ  tÃªn cá»§a trÆ°á»ng lÆ°u trá»¯ dá»¯ liá»‡u kinh Ä‘á»™ vÃ  vÄ© Ä‘á»™ trong Elasticsearch.</li>
<li><code>order</code>: chá»‰ Ä‘á»‹nh sáº¯p xáº¿p theo khoáº£ng cÃ¡ch tÄƒng dáº§n hoáº·c giáº£m dáº§n, tÆ°Æ¡ng á»©ng vá»›i <code>asc</code> vÃ  <code>desc</code>.</li>
<li><code>unit</code>: Ä‘Æ¡n vá»‹ tÃ­nh khoáº£ng cÃ¡ch, máº·c Ä‘á»‹nh lÃ  <code>m</code>, biá»ƒu thá»‹ mÃ©t (meters), cÃ¡c tÃ¹y chá»n khÃ¡c bao gá»“m <code>mi</code>, <code>cm</code>, <code>mm</code>, <code>NM</code>, <code>km</code>, <code>ft</code>, <code>yd</code> vÃ  <code>in</code>.</li>
<li><code>mode</code>: khi xá»­ lÃ½ dá»¯ liá»‡u máº£ng (nhiá»u giÃ¡ trá»‹), chá»‰ Ä‘á»‹nh cháº¿ Ä‘á»™ láº¥y giÃ¡ trá»‹, cÃ¡c tÃ¹y chá»n bao gá»“m <code>min</code>, <code>max</code>, <code>sum</code>, <code>avg</code> vÃ  <code>median</code>. Khi sáº¯p xáº¿p theo thá»© tá»± tÄƒng dáº§n, máº·c Ä‘á»‹nh lÃ  <code>min</code>; khi sáº¯p xáº¿p theo thá»© tá»± giáº£m dáº§n, máº·c Ä‘á»‹nh lÃ  <code>max</code>.</li>
<li><code>distance_type</code>: Ä‘áº·t cÃ¡ch tÃ­nh toÃ¡n khoáº£ng cÃ¡ch, cÃ¡c tÃ¹y chá»n bao gá»“m <code>sloppy_arc</code>, <code>arc</code> vÃ  <code>plane</code>. Máº·c Ä‘á»‹nh lÃ  <code>sloppy_arc</code>. <code>arc</code> cÃ³ Ä‘á»™ chÃ­nh xÃ¡c tÆ°Æ¡ng Ä‘á»‘i cao hÆ¡n nhÆ°ng tá»‘c Ä‘á»™ sáº½ giáº£m Ä‘Ã¡ng ká»ƒ, <code>plane</code> thÃ¬ tá»‘c Ä‘á»™ tÃ­nh toÃ¡n nhanh nhÆ°ng khÃ´ng chÃ­nh xÃ¡c vá»›i khoáº£ng cÃ¡ch dÃ i.</li>
<li><code>ignore_unmapped</code>: khi gáº·p trÆ°á»ng chÆ°a Ä‘Æ°á»£c Ã¡nh xáº¡, cÃ³ nÃªn bá» qua khÃ´ng, cÃ¡c tÃ¹y chá»n bao gá»“m <code>true</code> vÃ  <code>false</code>. Máº·c Ä‘á»‹nh lÃ  <code>false</code>, tá»©c lÃ  náº¿u gáº·p trÆ°á»ng chÆ°a Ä‘Æ°á»£c Ã¡nh xáº¡, truy váº¥n sáº½ gÃ¢y ra ngoáº¡i lá»‡; náº¿u Ä‘áº·t lÃ  <code>true</code>, nÃ³ sáº½ bá» qua cÃ¡c trÆ°á»ng chÆ°a Ä‘Æ°á»£c Ã¡nh xáº¡ vÃ  khÃ´ng khá»›p vá»›i báº¥t ká»³ tÃ i liá»‡u nÃ o trong truy váº¥n nÃ y.</li>
<li><code>validation_method</code>: chá»‰ Ä‘á»‹nh cÃ¡ch kiá»ƒm tra dá»¯ liá»‡u kinh Ä‘á»™ vÃ  vÄ© Ä‘á»™, cÃ¡c tÃ¹y chá»n bao gá»“m <code>IGNORE_MALFORMED</code>, <code>COERCE</code> vÃ  <code>STRICT</code>. <code>IGNORE_MALFORMED</code> cho phÃ©p cháº¥p nháº­n Ä‘iá»ƒm Ä‘á»‹a lÃ½ cÃ³ vÄ© Ä‘á»™ hoáº·c kinh Ä‘á»™ khÃ´ng há»£p lá»‡, tá»©c lÃ  bá» qua dá»¯ liá»‡u; <code>COERCE</code> cá»‘ gáº¯ng Ä‘oÃ¡n vÃ  chuyá»ƒn Ä‘á»•i thÃ nh tá»a Ä‘á»™ Ä‘á»‹a lÃ½ chÃ­nh xÃ¡c; <code>STRICT</code> lÃ  giÃ¡ trá»‹ máº·c Ä‘á»‹nh, tá»©c lÃ  sáº½ nÃ©m ra ngoáº¡i lá»‡ khi gáº·p tá»a Ä‘á»™ Ä‘á»‹a lÃ½ khÃ´ng chÃ­nh xÃ¡c.</li>
</ul>
<h2>TÃ i liá»‡u tham kháº£o</h2>
<ul>
<li><a href="https://www.knowledgedict.com/tutorial/elasticsearch-intro.html" target="_blank" rel="noopener noreferrer">HÆ°á»›ng dáº«n Elasticsearch</a></li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>MongoDB</title>
      <link>https://vanhung4499.github.io/database/mongodb/</link>
      <guid>https://vanhung4499.github.io/database/mongodb/</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MongoDB</source>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
    </item>
    <item>
      <title>MongoDB Aggreation</title>
      <link>https://vanhung4499.github.io/database/mongodb/aggreation.html</link>
      <guid>https://vanhung4499.github.io/database/mongodb/aggreation.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MongoDB Aggreation</source>
      <description>CÃ¡c hoáº¡t Ä‘á»™ng tá»•ng há»£p trong MongoDB CÃ¡c hoáº¡t Ä‘á»™ng tá»•ng há»£p trong MongoDB xá»­ lÃ½ cÃ¡c báº£n ghi dá»¯ liá»‡u vÃ  tráº£ vá» káº¿t quáº£ tÃ­nh toÃ¡n. CÃ¡c hoáº¡t Ä‘á»™ng tá»•ng há»£p nhÃ³m cÃ¡c giÃ¡ trá»‹ tá»« nhiá»u...</description>
      <category>mongodb</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<p>CÃ¡c hoáº¡t Ä‘á»™ng tá»•ng há»£p trong MongoDB xá»­ lÃ½ cÃ¡c báº£n ghi dá»¯ liá»‡u vÃ  tráº£ vá» káº¿t quáº£ tÃ­nh toÃ¡n. CÃ¡c hoáº¡t Ä‘á»™ng tá»•ng há»£p nhÃ³m cÃ¡c giÃ¡ trá»‹ tá»« nhiá»u tÃ i liá»‡u vÃ  cÃ³ thá»ƒ thá»±c hiá»‡n cÃ¡c thao tÃ¡c khÃ¡c nhau trÃªn dá»¯ liá»‡u nhÃ³m Ä‘á»ƒ tráº£ vá» má»™t káº¿t quáº£ duy nháº¥t. MongoDB cung cáº¥p ba cÃ¡ch thá»±c hiá»‡n hoáº¡t Ä‘á»™ng tá»•ng há»£p: Pipeline, Map-Reduce vÃ  cÃ¡c phÆ°Æ¡ng phÃ¡p tá»•ng há»£p Ä‘Æ¡n láº».</p>
<h2>Pipeline</h2>
<h3>Giá»›i thiá»‡u vá» Pipeline</h3>
<p>Khung tá»•ng há»£p cá»§a MongoDB Ä‘Æ°á»£c xÃ¢y dá»±ng dá»±a trÃªn khÃ¡i niá»‡m cá»§a Pipeline xá»­ lÃ½ dá»¯ liá»‡u.</p>
<p><strong>MongoDB há»— trá»£ hoáº¡t Ä‘á»™ng tá»•ng há»£p thÃ´ng qua phÆ°Æ¡ng thá»©c <a href="https://docs.mongodb.com/manual/reference/method/db.collection.aggregate/#db.collection.aggregate" target="_blank" rel="noopener noreferrer"><code>db.collection.aggregate()</code></a></strong>. NgoÃ i ra, MongoDB cung cáº¥p lá»‡nh <a href="https://docs.mongodb.com/manual/reference/command/aggregate/#dbcmd.aggregate" target="_blank" rel="noopener noreferrer"><code>aggregate</code></a> Ä‘á»ƒ thá»±c hiá»‡n pipeline.</p>
<p>Pipeline cá»§a MongoDB bao gá»“m nhiá»u giai Ä‘oáº¡n (<a href="https://docs.mongodb.com/manual/reference/operator/aggregation-pipeline/#aggregation-pipeline-operator-reference" target="_blank" rel="noopener noreferrer">stages</a>). Má»—i giai Ä‘oáº¡n sáº½ chuyá»ƒn Ä‘á»•i cÃ¡c tÃ i liá»‡u khi chÃºng Ä‘i qua pipeline. Má»™t giai Ä‘oáº¡n khÃ´ng cáº§n táº¡o ra má»™t tÃ i liá»‡u Ä‘áº§u ra cho má»—i tÃ i liá»‡u Ä‘áº§u vÃ o. VÃ­ dá»¥, má»™t sá»‘ giai Ä‘oáº¡n cÃ³ thá»ƒ táº¡o ra cÃ¡c tÃ i liá»‡u má»›i hoáº·c lá»c cÃ¡c tÃ i liá»‡u.</p>
<p>CÃ¹ng má»™t giai Ä‘oáº¡n cÃ³ thá»ƒ xuáº¥t hiá»‡n nhiá»u láº§n trong pipeline, trá»« cÃ¡c giai Ä‘oáº¡n <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/out/#pipe._S_out" target="_blank" rel="noopener noreferrer"><code>$out</code></a>, <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/merge/#pipe._S_merge" target="_blank" rel="noopener noreferrer"><code>$merge</code></a>, vÃ  <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/geoNear/#pipe._S_geoNear" target="_blank" rel="noopener noreferrer"><code>$geoNear</code></a>. Táº¥t cáº£ cÃ¡c giai Ä‘oáº¡n pipeline cÃ³ sáºµn cÃ³ thá»ƒ Ä‘Æ°á»£c tham kháº£o táº¡i: <a href="https://docs.mongodb.com/manual/reference/operator/aggregation-pipeline/#aggregation-pipeline-operator-reference" target="_blank" rel="noopener noreferrer">Aggregation Pipeline Stages</a>.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200921092725.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<ul>
<li>Giai Ä‘oáº¡n Ä‘áº§u tiÃªn: Giai Ä‘oáº¡n <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match" target="_blank" rel="noopener noreferrer"><code>$match</code></a> lá»c cÃ¡c tÃ i liá»‡u theo trÆ°á»ng tráº¡ng thÃ¡i vÃ  chuyá»ƒn cÃ¡c tÃ i liá»‡u cÃ³ tráº¡ng thÃ¡i lÃ  "A" sang giai Ä‘oáº¡n tiáº¿p theo.</li>
<li>Giai Ä‘oáº¡n thá»© hai: Giai Ä‘oáº¡n <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/group/#pipe._S_group" target="_blank" rel="noopener noreferrer"><code>$group</code></a> nhÃ³m cÃ¡c tÃ i liá»‡u theo trÆ°á»ng cust_id Ä‘á»ƒ tÃ­nh tá»•ng sá»‘ tiá»n cho má»—i cust_id duy nháº¥t.</li>
</ul>
<p>CÃ¡c giai Ä‘oáº¡n pipeline cÆ¡ báº£n cung cáº¥p bá»™ lá»c, tÆ°Æ¡ng tá»± nhÆ° truy váº¥n, vÃ  chuyá»ƒn Ä‘á»•i tÃ i liá»‡u Ä‘áº§u ra (thay Ä‘á»•i hÃ¬nh thá»©c tÃ i liá»‡u Ä‘áº§u ra).</p>
<p>CÃ¡c hoáº¡t Ä‘á»™ng pipeline khÃ¡c cung cáº¥p cÃ¡c cÃ´ng cá»¥ Ä‘á»ƒ nhÃ³m vÃ  sáº¯p xáº¿p cÃ¡c tÃ i liá»‡u theo trÆ°á»ng cá»¥ thá»ƒ, cÅ©ng nhÆ° tá»•ng há»£p ná»™i dung cá»§a máº£ng (bao gá»“m cáº£ máº£ng tÃ i liá»‡u). NgoÃ i ra, cÃ¡c giai Ä‘oáº¡n pipeline cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c toÃ¡n tá»­ Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c nhiá»‡m vá»¥ nhÆ° tÃ­nh trung bÃ¬nh hoáº·c káº¿t há»£p chuá»—i.</p>
<p>Pipeline tá»•ng há»£p cÅ©ng cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng trÃªn táº­p há»£p phÃ¢n Ä‘oáº¡n.</p>
<h3>Tá»‘i Æ°u hÃ³a Pipeline</h3>
<h4>Tá»‘i Æ°u hÃ³a Projection</h4>
<p>Pipeline cÃ³ thá»ƒ xÃ¡c Ä‘á»‹nh xem chá»‰ cáº§n cÃ¡c trÆ°á»ng báº¯t buá»™c trong tÃ i liá»‡u Ä‘á»ƒ cÃ³ Ä‘Æ°á»£c káº¿t quáº£.</p>
<h4>Tá»‘i Æ°u hÃ³a tuáº§n tá»± Pipeline</h4>
<p>Tá»‘i Æ°u hÃ³a tuáº§n tá»± (<code>$project</code>, <code>$unset</code>, <code>$addFields</code>, <code>$set</code>) + <code>$match</code></p>
<p>Äá»‘i vá»›i Pipeline cÃ³ chá»©a cÃ¡c giai Ä‘oáº¡n chiáº¿u (<a href="https://docs.mongodb.com/manual/reference/operator/aggregation/unset/#pipe._S_unset" target="_blank" rel="noopener noreferrer"><span v-pre="" class="katex-error" title="ParseError: KaTeX parse error: Expected 'EOF', got '#' at position 81: â€¦gation/project/#Ì²pipe._S_projectâ€¦" style="color:#cc0000">project](https://docs.mongodb.com/manual/reference/operator/aggregation/project/#pipe._S_project) hoáº·c [</span>unset</a> hoáº·c <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/set/#pipe._S_set" target="_blank" rel="noopener noreferrer"><span v-pre="" class="katex-error" title="ParseError: KaTeX parse error: Expected 'EOF', got '#' at position 85: â€¦tion/addFields/#Ì²pipe._S_addFielâ€¦" style="color:#cc0000">addFields](https://docs.mongodb.com/manual/reference/operator/aggregation/addFields/#pipe._S_addFields) hoáº·c [</span>set</a>) vÃ  theo sau lÃ  giai Ä‘oáº¡n <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match" target="_blank" rel="noopener noreferrer"><span v-pre="" class="katex-error" title="ParseError: KaTeX parse error: Expected 'EOF', got '#' at position 77: â€¦regation/match/#Ì²pipe._S_match),â€¦" style="color:#cc0000">match](https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match), MongoDB sáº½ di chuyá»ƒn bá»™ lá»c cá»§a táº¥t cáº£ cÃ¡c giai Ä‘oáº¡n [</span>match</a> khÃ´ng cáº§n thiáº¿t tÃ­nh toÃ¡n cÃ¡c giÃ¡ trá»‹ trong giai Ä‘oáº¡n chiáº¿u, thÃ nh má»™t giai Ä‘oáº¡n <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match" target="_blank" rel="noopener noreferrer">$match</a> má»›i trÆ°á»›c giai Ä‘oáº¡n chiáº¿u.</p>
<p>Náº¿u Pipeline chá»©a nhiá»u giai Ä‘oáº¡n chiáº¿u vÃ /hoáº·c giai Ä‘oáº¡n <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match" target="_blank" rel="noopener noreferrer"><span v-pre="" class="katex-error" title="ParseError: KaTeX parse error: Expected 'EOF', got '#' at position 77: â€¦regation/match/#Ì²pipe._S_match),â€¦" style="color:#cc0000">match](https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match), MongoDB sáº½ thá»±c hiá»‡n tá»‘i Æ°u hÃ³a nÃ y cho má»—i giai Ä‘oáº¡n [</span>match</a>, di chuyá»ƒn bá»™ lá»c <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match" target="_blank" rel="noopener noreferrer">$match</a> vÃ o trÆ°á»›c táº¥t cáº£ cÃ¡c giai Ä‘oáº¡n chiáº¿u khÃ´ng phá»¥ thuá»™c vÃ o nÃ³.</p>
<p>ã€VÃ­ dá»¥ã€‘VÃ­ dá»¥ tá»‘i Æ°u hÃ³a tuáº§n tá»± Pipeline</p>
<p>TrÆ°á»›c tá»‘i Æ°u hÃ³a:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$addFields</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    maxTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">$max</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"$times"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    minTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">$min</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"$times"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">} },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$project</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    _id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">times</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">maxTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">minTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    avgTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">$avg</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">"$maxTime"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"$minTime"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">] }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">} },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$match</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Joe Schmoe"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    maxTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">$lt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    minTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">$gt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    avgTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">$gt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">7</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">} }</span></span></code></pre>
</div><p>Sau tá»‘i Æ°u hÃ³a:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$match</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Joe Schmoe"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$addFields</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    maxTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">$max</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"$times"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    minTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">$min</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"$times"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">} },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$match</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">maxTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">$lt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }, </span><span style="color:#E06C75;--shiki-dark:#E06C75">minTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">$gt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } } },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$project</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    _id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">times</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">maxTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">minTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    avgTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">$avg</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">"$maxTime"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"$minTime"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">] }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">} },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$match</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">avgTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">$gt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">7</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } } }</span></span></code></pre>
</div><p>Giáº£i thÃ­ch:</p>
<p><code>{ name: "Joe Schmoe" }</code> khÃ´ng cáº§n tÃ­nh toÃ¡n báº¥t ká»³ giÃ¡ trá»‹ nÃ o trong giai Ä‘oáº¡n chiáº¿u, vÃ¬ váº­y nÃ³ cÃ³ thá»ƒ Ä‘áº·t á»Ÿ Ä‘áº§u tiÃªn.</p>
<p><code>{ avgTime: { $gt: 7 } }</code> phá»¥ thuá»™c vÃ o trÆ°á»ng <code>avgTime</code> cá»§a giai Ä‘oáº¡n <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/project/#pipe._S_project" target="_blank" rel="noopener noreferrer">$project</a>, nÃªn khÃ´ng thá»ƒ di chuyá»ƒn.</p>
<p>TrÆ°á»ng <code>maxTime</code> vÃ  <code>minTime</code> Ä‘Æ°á»£c phá»¥ thuá»™c vÃ o giai Ä‘oáº¡n <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match" target="_blank" rel="noopener noreferrer"><span v-pre="" class="katex-error" title="ParseError: KaTeX parse error: Expected 'EOF', got '#' at position 85: â€¦tion/addFields/#Ì²pipe._S_addFielâ€¦" style="color:#cc0000">undefined</span>match</a> má»›i Ä‘Æ°á»£c táº¡o ra vÃ  Ä‘áº·t trÆ°á»›c giai Ä‘oáº¡n <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/project/#pipe._S_project" target="_blank" rel="noopener noreferrer">$project</a>.</p>
<h4>Tá»‘i Æ°u hÃ³a song song Pipeline</h4>
<p>Náº¿u cÃ³ thá»ƒ, giai Ä‘oáº¡n tá»‘i Æ°u hÃ³a sáº½ káº¿t há»£p cÃ¡c giai Ä‘oáº¡n Pipeline vÃ o giai Ä‘oáº¡n trÆ°á»›c Ä‘Ã³. ThÃ´ng thÆ°á»ng, viá»‡c káº¿t há»£p xáº£y ra sau tá»‘i Æ°u hÃ³a láº¡i thá»© tá»± cá»§a báº¥t ká»³ chuá»—i nÃ o.</p>
<h5><code>$sort</code> + <code>$limit</code></h5>
<p>Khi <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/limit/#pipe._S_limit" target="_blank" rel="noopener noreferrer"><span v-pre="" class="katex-error" title="ParseError: KaTeX parse error: Expected 'EOF', got '#' at position 75: â€¦gregation/sort/#Ì²pipe._S_sort) Ä‘â€¦" style="color:#cc0000">sort](https://docs.mongodb.com/manual/reference/operator/aggregation/sort/#pipe._S_sort) Ä‘á»©ng trÆ°á»›c [</span>limit</a> vÃ  khÃ´ng cÃ³ giai Ä‘oáº¡n trung gian nÃ o thay Ä‘á»•i sá»‘ lÆ°á»£ng tÃ i liá»‡u (vÃ­ dá»¥: <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/group/#pipe._S_group" target="_blank" rel="noopener noreferrer"><span v-pre="" class="katex-error" title="ParseError: KaTeX parse error: Expected 'EOF', got '#' at position 79: â€¦egation/unwind/#Ì²pipe._S_unwind)â€¦" style="color:#cc0000">unwind](https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/#pipe._S_unwind), [</span>group</a>), trÃ¬nh tá»‘i Æ°u hÃ³a cÃ³ thá»ƒ káº¿t há»£p <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/sort/#pipe._S_sort" target="_blank" rel="noopener noreferrer"><span v-pre="" class="katex-error" title="ParseError: KaTeX parse error: Expected 'EOF', got '#' at position 77: â€¦regation/limit/#Ì²pipe._S_limit) â€¦" style="color:#cc0000">limit](https://docs.mongodb.com/manual/reference/operator/aggregation/limit/#pipe._S_limit) vÃ o [</span>sort</a>. Náº¿u cÃ³ giai Ä‘oáº¡n trung gian thay Ä‘á»•i sá»‘ lÆ°á»£ng tÃ i liá»‡u giá»¯a <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/limit/#pipe._S_limit" target="_blank" rel="noopener noreferrer"><span v-pre="" class="katex-error" title="ParseError: KaTeX parse error: Expected 'EOF', got '#' at position 75: â€¦gregation/sort/#Ì²pipe._S_sort) vâ€¦" style="color:#cc0000">sort](https://docs.mongodb.com/manual/reference/operator/aggregation/sort/#pipe._S_sort) vÃ  [</span>limit</a>, MongoDB sáº½ khÃ´ng káº¿t há»£p <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/sort/#pipe._S_sort" target="_blank" rel="noopener noreferrer"><span v-pre="" class="katex-error" title="ParseError: KaTeX parse error: Expected 'EOF', got '#' at position 77: â€¦regation/limit/#Ì²pipe._S_limit) â€¦" style="color:#cc0000">limit](https://docs.mongodb.com/manual/reference/operator/aggregation/limit/#pipe._S_limit) vÃ o [</span>sort</a>.</p>
<p>ã€VÃ­ dá»¥ã€‘<code>$sort</code> + <code>$limit</code></p>
<p>TrÆ°á»›c tá»‘i Æ°u hÃ³a:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$sort</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : { </span><span style="color:#E06C75;--shiki-dark:#E06C75">age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$project</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : { </span><span style="color:#E06C75;--shiki-dark:#E06C75">age</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$limit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span></code></pre>
</div><p>Sau tá»‘i Æ°u hÃ³a:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    "$sort"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">       "sortKey"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">          "age"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">       },</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">       "limit"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">NumberLong</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">},</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#98C379;--shiki-dark:#98C379">"$project"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : {</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">         "age"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">         "status"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">         "name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h5><code>$limit</code> + <code>$limit</code></h5>
<p>Náº¿u má»™t <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/limit/#pipe._S_limit" target="_blank" rel="noopener noreferrer"><span v-pre="" class="katex-error" title="ParseError: KaTeX parse error: Expected 'EOF', got '#' at position 77: â€¦regation/limit/#Ì²pipe._S_limit) â€¦" style="color:#cc0000">limit](https://docs.mongodb.com/manual/reference/operator/aggregation/limit/#pipe._S_limit) ngay sau má»™t [</span>limit</a> khÃ¡c, chÃºng cÃ³ thá»ƒ Ä‘Æ°á»£c káº¿t há»£p thÃ nh má»™t.</p>
<p>TrÆ°á»›c tá»‘i Æ°u hÃ³a:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$limit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$limit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span></code></pre>
</div><p>Sau tá»‘i Æ°u hÃ³a:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  $limit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h5><code>$skip</code> + <code>$skip</code></h5>
<p>Náº¿u má»™t <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/skip/#pipe._S_skip" target="_blank" rel="noopener noreferrer"><span v-pre="" class="katex-error" title="ParseError: KaTeX parse error: Expected 'EOF', got '#' at position 75: â€¦gregation/skip/#Ì²pipe._S_skip) nâ€¦" style="color:#cc0000">skip](https://docs.mongodb.com/manual/reference/operator/aggregation/skip/#pipe._S_skip) ngay sau má»™t [</span>skip</a> khÃ¡c, chÃºng cÃ³ thá»ƒ Ä‘Æ°á»£c káº¿t há»£p thÃ nh má»™t.</p>
<p>TrÆ°á»›c tá»‘i Æ°u hÃ³a:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$skip</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$skip</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span></code></pre>
</div><p>Sau tá»‘i Æ°u hÃ³a:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  $skip</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">7</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h5><code>$match</code> + <code>$match</code></h5>
<p>Náº¿u má»™t <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match" target="_blank" rel="noopener noreferrer"><span v-pre="" class="katex-error" title="ParseError: KaTeX parse error: Expected 'EOF', got '#' at position 77: â€¦regation/match/#Ì²pipe._S_match) â€¦" style="color:#cc0000">match](https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match) ngay sau má»™t [</span>match</a> khÃ¡c, chÃºng cÃ³ thá»ƒ Ä‘Æ°á»£c káº¿t há»£p thÃ nh má»™t báº±ng <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/and/#exp._S_and" target="_blank" rel="noopener noreferrer">$and</a>.</p>
<p>TrÆ°á»›c tá»‘i Æ°u hÃ³a:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$match</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">year</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">2014</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$match</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"A"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } }</span></span></code></pre>
</div><p>Sau tá»‘i Æ°u hÃ³a:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  $match</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    $and</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">year</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">2014</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }, { </span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'A'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h5><code>$lookup</code> + <code>$unwind</code></h5>
<p>Náº¿u má»™t <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/#pipe._S_lookup" target="_blank" rel="noopener noreferrer"><span v-pre="" class="katex-error" title="ParseError: KaTeX parse error: Expected 'EOF', got '#' at position 79: â€¦egation/unwind/#Ì²pipe._S_unwind)â€¦" style="color:#cc0000">unwind](https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/#pipe._S_unwind) ngay sau má»™t [</span>lookup</a> vÃ  <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/#pipe._S_lookup" target="_blank" rel="noopener noreferrer"><span v-pre="" class="katex-error" title="ParseError: KaTeX parse error: Expected 'EOF', got '#' at position 79: â€¦egation/unwind/#Ì²pipe._S_unwind)â€¦" style="color:#cc0000">unwind](https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/#pipe._S_unwind) Ä‘Æ°á»£c thá»±c hiá»‡n trÃªn trÆ°á»ng as cá»§a [</span>lookup</a>, trÃ¬nh tá»‘i Æ°u hÃ³a cÃ³ thá»ƒ káº¿t há»£p <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/#pipe._S_lookup" target="_blank" rel="noopener noreferrer"><span v-pre="" class="katex-error" title="ParseError: KaTeX parse error: Expected 'EOF', got '#' at position 79: â€¦egation/unwind/#Ì²pipe._S_unwind)â€¦" style="color:#cc0000">unwind](https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/#pipe._S_unwind) vÃ o [</span>lookup</a> Ä‘á»ƒ trÃ¡nh táº¡o ra cÃ¡c tÃ i liá»‡u trung gian lá»›n hÆ¡n.</p>
<p>TrÆ°á»›c tá»‘i Æ°u hÃ³a:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  $lookup</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"otherCollection"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    as</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"resultingArray"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    localField</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"x"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    foreignField</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"y"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">},</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">$unwind</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"$resultingArray"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Sau tá»‘i Æ°u hÃ³a:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  $lookup</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"otherCollection"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    as</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"resultingArray"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    localField</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"x"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    foreignField</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"y"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    unwinding</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">preserveNullAndEmptyArrays</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3>Giá»›i háº¡n cá»§a Pipeline</h3>
<p>Má»—i tÃ i liá»‡u trong táº­p káº¿t quáº£ bá»‹ giá»›i háº¡n bá»Ÿi kÃ­ch thÆ°á»›c tÃ i liá»‡u BSON (hiá»‡n táº¡i lÃ  16 MB).</p>
<p>Giá»›i háº¡n bá»™ nhá»› cá»§a Pipeline lÃ  100 MB.</p>
<h2>Map-Reduce</h2>
<blockquote>
<p>Pipeline tá»•ng há»£p cung cáº¥p hiá»‡u suáº¥t tá»‘t hÆ¡n vÃ  giao diá»‡n nháº¥t quÃ¡n hÆ¡n so vá»›i map-reduce.</p>
</blockquote>
<p>Map-reduce lÃ  má»™t mÃ´ hÃ¬nh xá»­ lÃ½ dá»¯ liá»‡u Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tá»•ng há»£p má»™t lÆ°á»£ng lá»›n dá»¯ liá»‡u thÃ nh káº¿t quáº£ tá»•ng há»£p há»¯u Ã­ch. Äá»ƒ thá»±c hiá»‡n thao tÃ¡c map-reduce, MongoDB cung cáº¥p lá»‡nh cÆ¡ sá»Ÿ dá»¯ liá»‡u <a href="https://docs.mongodb.com/manual/reference/command/mapReduce/#dbcmd.mapReduce" target="_blank" rel="noopener noreferrer"><code>mapReduce</code></a>.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230724012524.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Trong quÃ¡ trÃ¬nh trÃªn, MongoDB Ã¡p dá»¥ng giai Ä‘oáº¡n map cho má»—i tÃ i liá»‡u Ä‘áº§u vÃ o (tá»©c lÃ  tÃ i liá»‡u trong bá»™ sÆ°u táº­p khá»›p vá»›i Ä‘iá»u kiá»‡n truy váº¥n). HÃ m map phÃ¢n phá»‘i nhiá»u cáº·p khÃ³a-giÃ¡ trá»‹. Äá»‘i vá»›i cÃ¡c khÃ³a cÃ³ nhiá»u giÃ¡ trá»‹, MongoDB Ã¡p dá»¥ng giai Ä‘oáº¡n reduce, giai Ä‘oáº¡n nÃ y thu tháº­p vÃ  tá»•ng há»£p dá»¯ liá»‡u tá»•ng há»£p. Sau Ä‘Ã³, MongoDB lÆ°u káº¿t quáº£ vÃ o bá»™ sÆ°u táº­p. TÃ¹y chá»n, Ä‘áº§u ra cá»§a hÃ m reduce cÃ³ thá»ƒ Ä‘Æ°á»£c tá»•ng há»£p thÃªm báº±ng hÃ m finalize.</p>
<p>Táº¥t cáº£ cÃ¡c hÃ m map-reduce trong MongoDB Ä‘á»u lÃ  JavaScript vÃ  cháº¡y trong quÃ¡ trÃ¬nh mongod. Thao tÃ¡c map-reduce nháº­n Ä‘áº§u vÃ o lÃ  tÃ i liá»‡u cá»§a má»™t bá»™ sÆ°u táº­p vÃ  cÃ³ thá»ƒ thá»±c hiá»‡n báº¥t ká»³ sáº¯p xáº¿p vÃ  giá»›i háº¡n nÃ o trÆ°á»›c giai Ä‘oáº¡n map. mapReduce cÃ³ thá»ƒ tráº£ vá» káº¿t quáº£ cá»§a thao tÃ¡c map-reduce dÆ°á»›i dáº¡ng tÃ i liá»‡u hoáº·c ghi káº¿t quáº£ vÃ o bá»™ sÆ°u táº­p.</p>
<h2>PhÆ°Æ¡ng phÃ¡p tá»•ng há»£p Ä‘Æ¡n má»¥c Ä‘Ã­ch</h2>
<p>MongoDB há»— trá»£ cÃ¡c phÆ°Æ¡ng phÃ¡p tá»•ng há»£p Ä‘Æ¡n má»¥c Ä‘Ã­ch sau Ä‘Ã¢y:</p>
<ul>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.estimatedDocumentCount/#db.collection.estimatedDocumentCount" target="_blank" rel="noopener noreferrer"><code>db.collection.estimatedDocumentCount()</code></a>: Äáº¿m Æ°á»›c lÆ°á»£ng sá»‘ lÆ°á»£ng tÃ i liá»‡u trong má»™t bá»™ sÆ°u táº­p.</li>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.count/#db.collection.count" target="_blank" rel="noopener noreferrer"><code>db.collection.count()</code></a>: Äáº¿m sá»‘ lÆ°á»£ng tÃ i liá»‡u trong má»™t bá»™ sÆ°u táº­p.</li>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.distinct/#db.collection.distinct" target="_blank" rel="noopener noreferrer"><code>db.collection.distinct()</code></a>: Láº¥y cÃ¡c giÃ¡ trá»‹ duy nháº¥t tá»« má»™t trÆ°á»ng trong má»™t bá»™ sÆ°u táº­p.</li>
</ul>
<p>Táº¥t cáº£ cÃ¡c thao tÃ¡c nÃ y tá»•ng há»£p cÃ¡c tÃ i liá»‡u trong má»™t bá»™ sÆ°u táº­p duy nháº¥t. Máº·c dÃ¹ cÃ¡c thao tÃ¡c nÃ y cung cáº¥p cÃ¡ch tiáº¿p cáº­n Ä‘Æ¡n giáº£n cho cÃ¡c quy trÃ¬nh tá»•ng há»£p thÃ´ng thÆ°á»ng, nhÆ°ng chÃºng thiáº¿u tÃ­nh linh hoáº¡t vÃ  tÃ­nh nÄƒng phong phÃº so vá»›i pipeline tá»•ng há»£p vÃ  map-reduce.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230724012551.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<h2>So sÃ¡nh Aggregation trong SQL vÃ  MongoDB</h2>
<p>Pipeline trong MongoDB cung cáº¥p nhiá»u phÃ©p toÃ¡n tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i cÃ¡c cÃ¢u lá»‡nh hoáº·c hÃ m tá»•ng há»£p phá»• biáº¿n trong SQL.</p>
<p>Báº£ng dÆ°á»›i Ä‘Ã¢y tÃ³m táº¯t sá»± tÆ°Æ¡ng á»©ng giá»¯a cÃ¡c cÃ¢u lá»‡nh hoáº·c khÃ¡i niá»‡m tá»•ng há»£p SQL phá»• biáº¿n vÃ  cÃ¡c phÃ©p toÃ¡n tá»•ng há»£p MongoDB:</p>
<p>| SQL Terms, Functions, and Concepts | MongoDB Aggregation Operators                                                                                                                                                                             |<br>
| :</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200921092725.png" type="image/png"/>
    </item>
    <item>
      <title>MongoDB CRUD Operations</title>
      <link>https://vanhung4499.github.io/database/mongodb/crud.html</link>
      <guid>https://vanhung4499.github.io/database/mongodb/crud.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MongoDB CRUD Operations</source>
      <description>CÃ¡c thao tÃ¡c CRUD trong MongoDB I. CÃ¡c thao tÃ¡c CRUD cÆ¡ báº£n CÃ¡c thao tÃ¡c CRUD trong MongoDB lÃ  cÃ¡c thao tÃ¡c Ä‘á»c vÃ  ghi dá»¯ liá»‡u vÃ o tÃ i liá»‡u (document). Thao tÃ¡c Create (Táº¡o) Mon...</description>
      <category>mongodb</category>
      <category>nosql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>I. CÃ¡c thao tÃ¡c CRUD cÆ¡ báº£n</h2>
<p>CÃ¡c thao tÃ¡c CRUD trong MongoDB lÃ  cÃ¡c thao tÃ¡c Ä‘á»c vÃ  ghi dá»¯ liá»‡u vÃ o tÃ i liá»‡u (document).</p>
<h3>Thao tÃ¡c Create (Táº¡o)</h3>
<p>MongoDB cung cáº¥p cÃ¡c thao tÃ¡c sau Ä‘á»ƒ chÃ¨n tÃ i liá»‡u vÃ o má»™t bá»™ sÆ°u táº­p (collection):</p>
<ul>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.insertOne/#db.collection.insertOne" target="_blank" rel="noopener noreferrer"><code>db.collection.insertOne()</code></a>: ChÃ¨n má»™t tÃ i liá»‡u vÃ o bá»™ sÆ°u táº­p.</li>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.insertMany/#db.collection.insertMany" target="_blank" rel="noopener noreferrer"><code>db.collection.insertMany()</code></a>: ChÃ¨n nhiá»u tÃ i liá»‡u vÃ o bá»™ sÆ°u táº­p.</li>
</ul>
<blockquote>
<p>LÆ°u Ã½: CÃ¡c thao tÃ¡c trÃªn Ä‘á»u lÃ  thao tÃ¡c nguyÃªn tá»­.</p>
</blockquote>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200924112342.svg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>Äáº·c Ä‘iá»ƒm cá»§a thao tÃ¡c chÃ¨n:</p>
<ul>
<li>Táº¥t cáº£ cÃ¡c thao tÃ¡c ghi trong MongoDB Ä‘á»u lÃ  thao tÃ¡c nguyÃªn tá»­ cáº¥p tÃ i liá»‡u duy nháº¥t.</li>
<li>Náº¿u bá»™ sÆ°u táº­p mÃ  báº¡n muá»‘n chÃ¨n khÃ´ng tá»“n táº¡i, thÃ¬ thao tÃ¡c chÃ¨n sáº½ tá»± Ä‘á»™ng táº¡o bá»™ sÆ°u táº­p Ä‘Ã³.</li>
<li>Trong MongoDB, má»—i tÃ i liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ trong má»™t bá»™ sÆ°u táº­p cáº§n cÃ³ má»™t trÆ°á»ng <a href="https://docs.mongodb.com/manual/reference/glossary/#term-id" target="_blank" rel="noopener noreferrer"><code>_id</code></a> duy nháº¥t lÃ m khÃ³a chÃ­nh. Náº¿u tÃ i liá»‡u chÃ¨n thiáº¿u trÆ°á»ng <code>_id</code>, thÃ¬ trÃ¬nh Ä‘iá»u khiá»ƒn MongoDB sáº½ tá»± Ä‘á»™ng táº¡o ra trÆ°á»ng <code>_id</code> dÆ°á»›i dáº¡ng ObjectId.</li>
<li>Báº¡n cÃ³ thá»ƒ Ä‘iá»u chá»‰nh cáº¥p Ä‘á»™ xÃ¡c nháº­n cá»§a thao tÃ¡c ghi trong MongoDB.</li>
</ul>
<p>ã€VÃ­ dá»¥ã€‘VÃ­ dá»¥ chÃ¨n má»™t tÃ i liá»‡u:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">db</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">inventory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">insertOne</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'canvas'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  qty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  tags</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">'cotton'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">h</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">28</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">w</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">35.5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">uom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'cm'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">})</span></span></code></pre>
</div><p>ã€VÃ­ dá»¥ã€‘VÃ­ dá»¥ chÃ¨n nhiá»u tÃ i liá»‡u:</p>
<div class="language-javascript line-numbers-mode" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">db</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">inventory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">insertMany</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">([</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'journal'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    qty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">25</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    tags</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">'blank'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'red'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">h</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">14</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">w</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">21</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">uom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'cm'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'mat'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    qty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">85</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    tags</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">'gray'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">h</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">27.9</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">w</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">35.5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">uom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'cm'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'mousepad'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    qty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">25</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    tags</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">'gel'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'blue'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">h</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">19</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">w</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">22.85</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">uom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'cm'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">])</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>Thao tÃ¡c Read (Äá»c)</h3>
<p>MongoDB cung cáº¥p phÆ°Æ¡ng thá»©c <a href="https://docs.mongodb.com/manual/reference/method/db.collection.find/#db.collection.find" target="_blank" rel="noopener noreferrer"><code>db.collection.find()</code></a> Ä‘á»ƒ truy váº¥n tÃ i liá»‡u.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200924113832.svg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h3>Thao tÃ¡c Update (Cáº­p nháº­t)</h3>
<p>MongoDB cung cáº¥p cÃ¡c thao tÃ¡c sau Ä‘á»ƒ cáº­p nháº­t tÃ i liá»‡u trong má»™t bá»™ sÆ°u táº­p:</p>
<ul>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.updateOne/#db.collection.updateOne" target="_blank" rel="noopener noreferrer"><code>db.collection.updateOne()</code></a>: Cáº­p nháº­t má»™t tÃ i liá»‡u.</li>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.updateMany/#db.collection.updateMany" target="_blank" rel="noopener noreferrer"><code>db.collection.updateMany()</code></a>: Cáº­p nháº­t nhiá»u tÃ i liá»‡u.</li>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.replaceOne/#db.collection.replaceOne" target="_blank" rel="noopener noreferrer"><code>db.collection.replaceOne()</code></a>: Thay tháº¿ má»™t tÃ i liá»‡u.</li>
</ul>
<p>CÃº phÃ¡p:</p>
<ul>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.updateOne/#db.collection.updateOne" target="_blank" rel="noopener noreferrer"><code>db.collection.updateOne(&lt;filter&gt;, &lt;update&gt;, &lt;options&gt;)</code></a></li>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.updateMany/#db.collection.updateMany" target="_blank" rel="noopener noreferrer"><code>db.collection.updateMany(&lt;filter&gt;, &lt;update&gt;, &lt;options&gt;)</code></a></li>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.replaceOne/#db.collection.replaceOne" target="_blank" rel="noopener noreferrer"><code>db.collection.replaceOne(&lt;filter&gt;, &lt;update&gt;, &lt;options&gt;)</code></a></li>
</ul>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200924114043.svg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>ã€VÃ­ dá»¥ã€‘ChÃ¨n dá»¯ liá»‡u thá»­ nghiá»‡m:</p>
<div class="language-javascript line-numbers-mode" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">db</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">inventory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">insertMany</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">([</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'canvas'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    qty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">h</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">28</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">w</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">35.5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">uom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'cm'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'A'</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'journal'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">qty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">25</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">h</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">14</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">w</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">21</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">uom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'cm'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }, </span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'A'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'mat'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">qty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">85</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">h</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">27.9</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">w</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">35.5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">uom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'cm'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }, </span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'A'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'mousepad'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    qty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">25</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">h</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">19</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">w</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">22.85</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">uom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'cm'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'P'</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'notebook'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    qty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">50</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">h</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">8.5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">w</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">11</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">uom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'in'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'P'</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'paper'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">qty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">h</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">8.5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">w</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">11</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">uom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'in'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }, </span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'D'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'planner'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    qty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">75</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">h</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">22.85</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">w</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">30</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">uom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'cm'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'D'</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'postcard'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    qty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">45</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">h</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">w</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">15.25</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">uom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'cm'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'A'</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'sketchbook'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    qty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">80</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">h</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">14</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">w</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">21</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">uom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'cm'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'A'</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'sketch pad'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    qty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">95</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">h</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">22.85</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">w</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">30.5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">uom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'cm'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'A'</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">])</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ã€VÃ­ dá»¥ã€‘Cáº­p nháº­t má»™t tÃ i liá»‡u:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">db</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">inventory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">updateOne</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'paper'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    $set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#98C379;--shiki-dark:#98C379">'size.uom'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'cm'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'P'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    $currentDate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">lastModified</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span></code></pre>
</div><p>ã€VÃ­ dá»¥ã€‘Cáº­p nháº­t nhiá»u tÃ i liá»‡u:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">db</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">inventory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">updateMany</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">qty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">$lt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">50</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    $set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#98C379;--shiki-dark:#98C379">'size.uom'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'in'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'P'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    $currentDate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">lastModified</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span></code></pre>
</div><p>ã€VÃ­ dá»¥ã€‘Thay tháº¿ má»™t tÃ i liá»‡u:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">db</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">inventory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">replaceOne</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'paper'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'paper'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    instock</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      { </span><span style="color:#E06C75;--shiki-dark:#E06C75">warehouse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'A'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">qty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">60</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      { </span><span style="color:#E06C75;--shiki-dark:#E06C75">warehouse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'B'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">qty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">40</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span></code></pre>
</div><p>Äáº·c Ä‘iá»ƒm cá»§a thao tÃ¡c cáº­p nháº­t:</p>
<ul>
<li>Táº¥t cáº£ cÃ¡c thao tÃ¡c ghi trong MongoDB Ä‘á»u lÃ  thao tÃ¡c nguyÃªn tá»­ cáº¥p tÃ i liá»‡u duy nháº¥t.</li>
<li>Má»™t khi Ä‘Ã£ Ä‘Æ°á»£c thiáº¿t láº­p, khÃ´ng thá»ƒ cáº­p nháº­t hoáº·c thay tháº¿ trÆ°á»ng <a href="https://docs.mongodb.com/manual/reference/glossary/#term-id" target="_blank" rel="noopener noreferrer"><code>_id</code></a>.</li>
<li>MongoDB sáº½ giá»¯ nguyÃªn thá»© tá»± cÃ¡c trÆ°á»ng trong tÃ i liá»‡u sau khi thá»±c hiá»‡n thao tÃ¡c ghi, trá»« khi:
<ul>
<li>TrÆ°á»ng <code>_id</code> luÃ´n lÃ  trÆ°á»ng Ä‘áº§u tiÃªn trong tÃ i liá»‡u.</li>
<li>CÃ¡c thao tÃ¡c cáº­p nháº­t bao gá»“m viá»‡c Ä‘á»•i tÃªn trÆ°á»ng cÃ³ thá»ƒ dáº«n Ä‘áº¿n sáº¯p xáº¿p láº¡i cÃ¡c trÆ°á»ng trong tÃ i liá»‡u.</li>
</ul>
</li>
<li>Náº¿u thao tÃ¡c cáº­p nháº­t chá»©a <code>upsert: true</code> vÃ  khÃ´ng cÃ³ tÃ i liá»‡u nÃ o khá»›p vá»›i bá»™ lá»c, MongoDB sáº½ chÃ¨n má»™t tÃ i liá»‡u má»›i; náº¿u cÃ³ tÃ i liá»‡u khá»›p, MongoDB sáº½ cáº­p nháº­t hoáº·c thay tháº¿ cÃ¡c tÃ i liá»‡u Ä‘Ã³.</li>
</ul>
<h3>Thao tÃ¡c Delete (XÃ³a)</h3>
<p>MongoDB cung cáº¥p cÃ¡c thao tÃ¡c sau Ä‘á»ƒ xÃ³a tÃ i liá»‡u trong má»™t bá»™ sÆ°u táº­p:</p>
<ul>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.deleteOne/#db.collection.deleteOne" target="_blank" rel="noopener noreferrer"><code>db.collection.deleteOne()</code></a>: XÃ³a má»™t tÃ i liá»‡u.</li>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.deleteMany/#db.collection.deleteMany" target="_blank" rel="noopener noreferrer"><code>db.collection.deleteMany()</code></a>: XÃ³a nhiá»u tÃ i liá»‡u.</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200924120007.svg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>Äáº·c Ä‘iá»ƒm cá»§a thao tÃ¡c xÃ³a:</p>
<ul>
<li>Táº¥t cáº£ cÃ¡c thao tÃ¡c ghi trong MongoDB Ä‘á»u lÃ  thao tÃ¡c nguyÃªn tá»­ cáº¥p tÃ i liá»‡u duy nháº¥t.</li>
</ul>
<h2>II. Thao tÃ¡c ghi hÃ ng loáº¡t</h2>
<p>MongoDB há»— trá»£ thao tÃ¡c ghi hÃ ng loáº¡t (bao gá»“m chÃ¨n hÃ ng loáº¡t, cáº­p nháº­t hÃ ng loáº¡t, xÃ³a hÃ ng loáº¡t) thÃ´ng qua phÆ°Æ¡ng thá»©c <a href="https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite" target="_blank" rel="noopener noreferrer"><code>db.collection.bulkWrite()</code></a>.</p>
<p>NgoÃ i ra, phÆ°Æ¡ng thá»©c <a href="https://docs.mongodb.com/manual/reference/method/db.collection.insertMany/#db.collection.insertMany" target="_blank" rel="noopener noreferrer"><code>db.collection.insertMany()</code></a> cÅ©ng há»— trá»£ thao tÃ¡c chÃ¨n hÃ ng loáº¡t.</p>
<h3>Thao tÃ¡c cÃ³ thá»© tá»± vÃ  khÃ´ng cÃ³ thá»© tá»±</h3>
<p>Thao tÃ¡c ghi hÃ ng loáº¡t cÃ³ thá»ƒ Ä‘Æ°á»£c thá»±c hiá»‡n theo thá»© tá»± hoáº·c khÃ´ng cÃ³ thá»© tá»±.</p>
<ul>
<li>Äá»‘i vá»›i danh sÃ¡ch cÃ³ thá»© tá»±, MongoDB thá»±c hiá»‡n cÃ¡c thao tÃ¡c theo thá»© tá»±. Náº¿u cÃ³ lá»—i xáº£y ra trong quÃ¡ trÃ¬nh xá»­ lÃ½ thao tÃ¡c ghi, MongoDB sáº½ khÃ´ng xá»­ lÃ½ cÃ¡c thao tÃ¡c ghi cÃ²n láº¡i trong danh sÃ¡ch.</li>
<li>Äá»‘i vá»›i danh sÃ¡ch khÃ´ng cÃ³ thá»© tá»±, MongoDB cÃ³ thá»ƒ thá»±c hiá»‡n cÃ¡c thao tÃ¡c song song, nhÆ°ng khÃ´ng Ä‘áº£m báº£o hÃ nh vi nÃ y. Náº¿u cÃ³ lá»—i xáº£y ra trong quÃ¡ trÃ¬nh xá»­ lÃ½ thao tÃ¡c ghi, MongoDB sáº½ tiáº¿p tá»¥c xá»­ lÃ½ cÃ¡c thao tÃ¡c ghi cÃ²n láº¡i trong danh sÃ¡ch.</li>
</ul>
<p>Thá»±c hiá»‡n cÃ¡c thao tÃ¡c cÃ³ thá»© tá»± trÃªn má»™t táº­p há»£p phÃ¢n Ä‘oáº¡n thÆ°á»ng cháº­m hÆ¡n thá»±c hiá»‡n cÃ¡c thao tÃ¡c khÃ´ng cÃ³ thá»© tá»±, vÃ¬ Ä‘á»‘i vá»›i cÃ¡c thao tÃ¡c cÃ³ thá»© tá»±, má»—i thao tÃ¡c pháº£i chá» Ä‘á»£i thao tÃ¡c trÆ°á»›c hoÃ n thÃ nh.</p>
<p>Máº·c Ä‘á»‹nh, <a href="https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite" target="_blank" rel="noopener noreferrer"><code>bulkWrite()</code></a> thá»±c hiá»‡n cÃ¡c thao tÃ¡c cÃ³ thá»© tá»±. Äá»ƒ chá»‰ Ä‘á»‹nh cÃ¡c thao tÃ¡c ghi khÃ´ng cÃ³ thá»© tá»±, hÃ£y Ä‘áº·t <code>ordered: false</code> trong tÃ i liá»‡u tÃ¹y chá»n.</p>
<h3>PhÆ°Æ¡ng thá»©c bulkWrite()</h3>
<p><a href="https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite" target="_blank" rel="noopener noreferrer"><code>bulkWrite()</code></a> há»— trá»£ cÃ¡c thao tÃ¡c ghi sau Ä‘Ã¢y:</p>
<ul>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-insertone" target="_blank" rel="noopener noreferrer">insertOne</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-updateonemany" target="_blank" rel="noopener noreferrer">updateOne</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-updateonemany" target="_blank" rel="noopener noreferrer">updateMany</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-replaceone" target="_blank" rel="noopener noreferrer">replaceOne</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-deleteonemany" target="_blank" rel="noopener noreferrer">deleteOne</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-deleteonemany" target="_blank" rel="noopener noreferrer">deleteMany</a></li>
</ul>
<p>ã€VÃ­ dá»¥ã€‘VÃ­ dá»¥ vá» thao tÃ¡c ghi hÃ ng loáº¡t:</p>
<div class="language-javascript line-numbers-mode" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">  db</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">characters</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">bulkWrite</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">([</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      insertOne</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">          _id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">          char</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Dithras'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">          class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'barbarian'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">          lvl</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      insertOne</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">          _id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">          char</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Taeln'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">          class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'fighter'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">          lvl</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      updateOne</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        filter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">char</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Eldon'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        update</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">$set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Critical Injury'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    { </span><span style="color:#E06C75;--shiki-dark:#E06C75">deleteOne</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">filter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">char</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Brisbane'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } } },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      replaceOne</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        filter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">char</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Meldane'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        replacement</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">char</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Tanys'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'oracle'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">lvl</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  ])</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">} </span><span style="color:#C678DD;--shiki-dark:#C678DD">catch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E06C75;--shiki-dark:#E06C75">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  print</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>Chiáº¿n lÆ°á»£c thao tÃ¡c ghi hÃ ng loáº¡t</h3>
<p>CÃ¡c thao tÃ¡c chÃ¨n hÃ ng loáº¡t lá»›n (bao gá»“m chÃ¨n dá»¯ liá»‡u ban Ä‘áº§u hoáº·c nháº­p dá»¯ liá»‡u thÆ°á»ng xuyÃªn) cÃ³ thá»ƒ áº£nh hÆ°á»Ÿng Ä‘áº¿n hiá»‡u suáº¥t cá»§a cá»¥m phÃ¢n Ä‘oáº¡n. Äá»‘i vá»›i thao tÃ¡c chÃ¨n hÃ ng loáº¡t, hÃ£y xem xÃ©t cÃ¡c chiáº¿n lÆ°á»£c sau:</p>
<h4>TrÆ°á»›c khi tÃ¡ch collection</h4>
<p>Náº¿u táº­p há»£p phÃ¢n Ä‘oáº¡n rá»—ng, táº­p há»£p Ä‘Ã³ chá»‰ cÃ³ má»™t phÃ¢n Ä‘oáº¡n ban Ä‘áº§u náº±m trÃªn má»™t phÃ¢n Ä‘oáº¡n duy nháº¥t. Sau Ä‘Ã³, MongoDB pháº£i máº¥t má»™t khoáº£ng thá»i gian Ä‘á»ƒ nháº­n dá»¯ liá»‡u, táº¡o cÃ¡c phÃ¢n Ä‘oáº¡n vÃ  phÃ¢n phá»‘i cÃ¡c phÃ¢n Ä‘oáº¡n Ä‘Ã£ tÃ¡ch Ä‘áº¿n cÃ¡c phÃ¢n Ä‘oáº¡n kháº£ dá»¥ng. Äá»ƒ trÃ¡nh chi phÃ­ hiá»‡u suáº¥t nÃ y, báº¡n cÃ³ thá»ƒ tiá»n tÃ¡ch collection theo hÆ°á»›ng dáº«n vá» tÃ¡ch phÃ¢n Ä‘oáº¡n trong cá»¥m phÃ¢n Ä‘oáº¡n.</p>
<h4>Thao tÃ¡c ghi khÃ´ng cÃ³ thá»© tá»±</h4>
<p>Äá»ƒ cáº£i thiá»‡n hiá»‡u suáº¥t ghi vÃ o cá»¥m phÃ¢n Ä‘oáº¡n, hÃ£y sá»­ dá»¥ng <a href="https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite" target="_blank" rel="noopener noreferrer"><code>bulkWrite()</code></a> vÃ  Ä‘áº·t tham sá»‘ tÃ¹y chá»n <code>ordered</code> thÃ nh false. <a href="https://docs.mongodb.com/manual/reference/program/mongos/#bin.mongos" target="_blank" rel="noopener noreferrer"><code>mongos</code></a> cÃ³ thá»ƒ cá»‘ gáº¯ng gá»­i cÃ¡c thao tÃ¡c ghi Ä‘áº¿n nhiá»u phÃ¢n Ä‘oáº¡n cÃ¹ng má»™t lÃºc. Äá»‘i vá»›i táº­p há»£p trá»‘ng, hÃ£y tiá»n tÃ¡ch collection theo hÆ°á»›ng dáº«n tÃ¡ch phÃ¢n Ä‘oáº¡n trong cá»¥m phÃ¢n Ä‘oáº¡n.</p>
<h4>TrÃ¡nh luá»“ng dá»¯ liá»‡u Ä‘Æ¡n Ä‘iá»‡u</h4>
<p>Náº¿u trong má»™t thao tÃ¡c chÃ¨n, khÃ³a phÃ¢n Ä‘oáº¡n tÄƒng dáº§n, táº¥t cáº£ dá»¯ liá»‡u chÃ¨n sáº½ Ä‘Æ°á»£c lÆ°u trá»¯ trong phÃ¢n Ä‘oáº¡n cuá»‘i cÃ¹ng cá»§a táº­p há»£p, tá»©c lÃ  chá»‰ lÆ°u trá»¯ trong má»™t phÃ¢n Ä‘oáº¡n. Do Ä‘Ã³, kháº£ nÄƒng chÃ¨n cá»§a cá»¥m sáº½ khÃ´ng bao giá» vÆ°á»£t quÃ¡ kháº£ nÄƒng chÃ¨n cá»§a má»™t phÃ¢n Ä‘oáº¡n duy nháº¥t.</p>
<p>Náº¿u lÆ°á»£ng dá»¯ liá»‡u chÃ¨n lá»›n hÆ¡n kháº£ nÄƒng chÃ¨n cá»§a má»™t phÃ¢n Ä‘oáº¡n duy nháº¥t vÃ  khÃ´ng thá»ƒ trÃ¡nh Ä‘Æ°á»£c khÃ³a phÃ¢n Ä‘oáº¡n tÄƒng dáº§n, hÃ£y xem xÃ©t cÃ¡c sá»­a Ä‘á»•i sau Ä‘Ã¢y cho á»©ng dá»¥ng:</p>
<ul>
<li>Äáº£o ngÆ°á»£c cÃ¡c bit nhá»‹ phÃ¢n cá»§a khÃ³a phÃ¢n Ä‘oáº¡n. Äiá»u nÃ y giá»¯ nguyÃªn thÃ´ng tin vÃ  trÃ¡nh liÃªn káº¿t thá»© tá»± chÃ¨n vá»›i sá»± gia tÄƒng giÃ¡ trá»‹.</li>
<li>HoÃ¡n Ä‘á»•i 16 bit Ä‘áº§u tiÃªn vÃ  cuá»‘i cÃ¹ng cá»§a khÃ³a Ä‘á»ƒ chÃ¨n "ngáº«u nhiÃªn".</li>
</ul>
<h2>So sÃ¡nh SQL vÃ  MongoDB</h2>
<h3>Thuáº­t ngá»¯ vÃ  KhÃ¡i niá»‡m</h3>
<p>| Thuáº­t ngá»¯ vÃ  KhÃ¡i niá»‡m SQL    | Thuáº­t ngá»¯ vÃ  KhÃ¡i niá»‡m MongoDB                                                                                                                                                                                                                         |<br>
|:</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200924112342.svg" type="image/svg+xml"/>
    </item>
    <item>
      <title>MongoDB Guide</title>
      <link>https://vanhung4499.github.io/database/mongodb/guide.html</link>
      <guid>https://vanhung4499.github.io/database/mongodb/guide.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MongoDB Guide</source>
      <description>HÆ°á»›ng dáº«n MongoDB Giá»›i thiá»‡u MongoDB lÃ  má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u dá»±a trÃªn há»‡ thá»‘ng lÆ°u trá»¯ tá»‡p phÃ¢n tÃ¡n. ÄÆ°á»£c viáº¿t báº±ng ngÃ´n ngá»¯ C++. Má»¥c tiÃªu lÃ  cung cáº¥p má»™t giáº£i phÃ¡p lÆ°u trá»¯ dá»¯ liá»‡u...</description>
      <category>mongodb</category>
      <category>nosql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Giá»›i thiá»‡u</h2>
<p>MongoDB lÃ  má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u dá»±a trÃªn há»‡ thá»‘ng lÆ°u trá»¯ tá»‡p phÃ¢n tÃ¡n. ÄÆ°á»£c viáº¿t báº±ng ngÃ´n ngá»¯ C++. Má»¥c tiÃªu lÃ  cung cáº¥p má»™t giáº£i phÃ¡p lÆ°u trá»¯ dá»¯ liá»‡u cÃ³ kháº£ nÄƒng má»Ÿ rá»™ng vÃ  hiá»‡u suáº¥t cao cho cÃ¡c á»©ng dá»¥ng web.</p>
<p>MongoDB lÆ°u trá»¯ dá»¯ liá»‡u dÆ°á»›i dáº¡ng tÃ i liá»‡u, cáº¥u trÃºc dá»¯ liá»‡u bao gá»“m cÃ¡c cáº·p khÃ³a-giÃ¡ trá»‹ (key-value). TÃ i liá»‡u trong MongoDB tÆ°Æ¡ng tá»± nhÆ° Ä‘á»‘i tÆ°á»£ng JSON. GiÃ¡ trá»‹ cá»§a trÆ°á»ng cÃ³ thá»ƒ chá»©a cÃ¡c tÃ i liá»‡u khÃ¡c, máº£ng vÃ  máº£ng tÃ i liá»‡u.</p>
<h3>PhÃ¡t triá»ƒn cá»§a MongoDB</h3>
<ul>
<li>PhiÃªn báº£n 1.x - Há»— trá»£ sao chÃ©p vÃ  phÃ¢n Ä‘oáº¡n</li>
<li>PhiÃªn báº£n 2.x - CÃ¡c tÃ­nh nÄƒng cÆ¡ sá»Ÿ dá»¯ liá»‡u phong phÃº hÆ¡n</li>
<li>PhiÃªn báº£n 3.x - WiredTiger vÃ  há»‡ sinh thÃ¡i xung quanh</li>
<li>PhiÃªn báº£n 4.x - Há»— trá»£ giao dá»‹ch phÃ¢n tÃ¡n</li>
</ul>
<h3>MongoDB vÃ  RDBMS</h3>
<p>| TÃ­nh nÄƒng   | MongoDB                                          | RDBMS    |<br>
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>MongoDB Model Example</title>
      <link>https://vanhung4499.github.io/database/mongodb/model-example.html</link>
      <guid>https://vanhung4499.github.io/database/mongodb/model-example.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MongoDB Model Example</source>
      <description>VÃ­ dá»¥ vá» mÃ´ hÃ¬nh hÃ³a MongoDB MÃ´ hÃ¬nh quan há»‡ MÃ´ hÃ¬nh nhÃºng tÃ i liá»‡u má»™t má»™t MÃ´ hÃ¬nh nhÃºng tÃ i liá»‡u má»™t-má»™t - MÃ´ hÃ¬nh nhÃºng tÃ i liá»‡u Káº¿t há»£p thÃ nh: MÃ´ hÃ¬nh nhÃºng tÃ i liá»‡u má»™t-má»™t...</description>
      <category>db</category>
      <category>mongodb</category>
      <category>nosql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>MÃ´ hÃ¬nh quan há»‡</h2>
<h3>MÃ´ hÃ¬nh nhÃºng tÃ i liá»‡u má»™t má»™t</h3>
<h4>MÃ´ hÃ¬nh nhÃºng tÃ i liá»‡u má»™t-má»™t - MÃ´ hÃ¬nh nhÃºng tÃ i liá»‡u</h4>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// patron document</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   _id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"joe"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Joe Bookreader"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// address document</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   patron_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"joe"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// reference to patron document</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   street</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"123 Fake Street"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   city</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Faketon"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   state</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"MA"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   zip</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"12345"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Káº¿t há»£p thÃ nh:</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"joe"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Joe Bookreader"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "address"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "street"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"123 Fake Street"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "city"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Faketon"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "state"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"MA"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "zip"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"12345"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4>MÃ´ hÃ¬nh nhÃºng tÃ i liá»‡u má»™t-má»™t - MÃ´ hÃ¬nh con</h4>
<p>Giáº£ sá»­, cÃ³ má»™t bá»™ sÆ°u táº­p Ä‘á»‹nh nghÄ©a thÃ´ng tin vá» phim:</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "title"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"The Arrival of a Train"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "year"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1896</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "runtime"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "released"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"01-25-1896"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "poster"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"http://ia.media-imdb.com/images/M/MV5BMjEyNDk5MDYzOV5BMl5BanBnXkFtZTgwNjIxMTEwMzE@._V1_SX300.jpg"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "plot"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"A group of people are standing in a straight line along the platform of a railway station, waiting for a train, which is seen coming at some distance. When the train stops at the platform, ..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "fullplot"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"A group of people are standing in a straight line along the platform of a railway station, waiting for a train, which is seen coming at some distance. When the train stops at the platform, the line dissolves. The doors of the railway-cars open, and people on the platform help passengers to get off."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "lastupdated"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2015-08-15T10:06:53"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "type"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"movie"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "directors"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">"Auguste LumiÃ¨re"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Louis LumiÃ¨re"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "imdb"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "rating"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">7.3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "votes"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">5043</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">12</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "countries"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">"France"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "genres"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">"Documentary"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Short"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "tomatoes"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "viewer"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "rating"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">3.7</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "numReviews"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">59</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "lastUpdated"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2020-01-09T00:02:53"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Trong á»©ng dá»¥ng, cÃ³ má»™t sá»‘ tÃ¬nh huá»‘ng chá»‰ cáº§n hiá»ƒn thá»‹ thÃ´ng tin tÃ³m táº¯t vá» phim, khÃ´ng cáº§n hiá»ƒn thá»‹ thÃ´ng tin chi tiáº¿t nhÆ° fullplot, poster. VÃ¬ váº­y, chÃºng ta cÃ³ thá»ƒ xem xÃ©t viá»‡c chia cáº¥u trÃºc ban Ä‘áº§u thÃ nh hai pháº§n vÃ  liÃªn káº¿t chÃºng thÃ´ng qua trÆ°á»ng id.</p>
<p>Bá»™ sÆ°u táº­p movie dÃ¹ng Ä‘á»ƒ hiá»ƒn thá»‹ thÃ´ng tin tÃ³m táº¯t</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// movie collection</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "title"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"The Arrival of a Train"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "year"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1896</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "runtime"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "released"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"1896-01-25"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "type"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"movie"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "directors"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">"Auguste LumiÃ¨re"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Louis LumiÃ¨re"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "countries"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">"France"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "genres"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">"Documentary"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Short"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>Bá»™ sÆ°u táº­p movie_details dÃ¹ng Ä‘á»ƒ hiá»ƒn thá»‹ thÃ´ng tin chi tiáº¿t</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// movie_details collection</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">156</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "movie_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// tham chiáº¿u Ä‘áº¿n bá»™ sÆ°u táº­p movie</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "poster"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"http://ia.media-imdb.com/images/M/MV5BMjEyNDk5MDYzOV5BMl5BanBnXkFtZTgwNjIxMTEwMzE@._V1_SX300.jpg"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "plot"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"A group of people are standing in a straight line along the platform of a railway station, waiting for a train, which is seen coming at some distance. When the train stops at the platform, ..."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "fullplot"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"A group of people are standing in a straight line along the platform of a railway station, waiting for a train, which is seen coming at some distance. When the train stops at the platform, the line dissolves. The doors of the railway-cars open, and people on the platform help passengers to get off."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "lastupdated"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2015-08-15T10:06:53"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "imdb"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "rating"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">7.3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "votes"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">5043</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">12</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "tomatoes"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "viewer"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "rating"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">3.7</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "numReviews"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">59</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "lastUpdated"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2020-01-29T00:02:53"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>MÃ´ hÃ¬nh nhÃºng tÃ i liá»‡u má»™t-nhiá»u</h3>
<h4>MÃ´ hÃ¬nh nhÃºng tÃ i liá»‡u má»™t-nhiá»u - MÃ´ hÃ¬nh nhÃºng tÃ i liá»‡u</h4>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// TÃ i liá»‡u patron</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   _id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"joe"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Joe Bookreader"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// TÃ i liá»‡u Ä‘á»‹a chá»‰</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   patron_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"joe"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">// tham chiáº¿u Ä‘áº¿n tÃ i liá»‡u patron</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   street</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"123 Fake Street"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   city</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Faketon"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   state</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"MA"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   zip</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"12345"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   patron_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"joe"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   street</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"1 Some Other Street"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   city</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Boston"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   state</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"MA"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   zip</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"12345"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Káº¿t há»£p thÃ nh:</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"joe"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Joe Bookreader"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "addresses"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "street"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"123 Fake Street"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "city"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Faketon"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "state"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"MA"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "zip"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"12345"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "street"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"1 Some Other Street"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "city"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Boston"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "state"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"MA"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "zip"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"12345"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>MÃ´ hÃ¬nh nhÃºng tÃ i liá»‡u má»™t-nhiá»u - MÃ´ hÃ¬nh con</h4>
<p>Xem xÃ©t má»™t bá»™ sÆ°u táº­p Ä‘áº¡i diá»‡n cho thÃ´ng tin sáº£n pháº©m trÃªn má»™t trang web thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­:</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Super Widget"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "description"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"This is the most useful item in your toolbox."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "price"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"value"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">NumberDecimal(</span><span style="color:#98C379;--shiki-dark:#98C379">"119.99"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"currency"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"USD"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "reviews"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "review_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">786</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "review_author"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Kristina"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "review_text"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"This is indeed an amazing widget."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "published_date"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2019-02-18"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "review_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">785</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "review_author"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Trina"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "review_text"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Nice product. Slow shipping."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "published_date"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2019-02-17"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">    ...</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "review_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "review_author"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Hans"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "review_text"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Meh, it's okay."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "published_date"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2017-12-06"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>CÃ¡c Ä‘Ã¡nh giÃ¡ Ä‘Æ°á»£c sáº¯p xáº¿p theo thá»© tá»± thá»i gian giáº£m dáº§n. Khi ngÆ°á»i dÃ¹ng truy cáº­p trang sáº£n pháº©m, á»©ng dá»¥ng sáº½ táº£i lÃªn mÆ°á»i Ä‘Ã¡nh giÃ¡ gáº§n Ä‘Ã¢y nháº¥t. Thay vÃ¬ lÆ°u trá»¯ táº¥t cáº£ cÃ¡c Ä‘Ã¡nh giÃ¡ cÃ¹ng vá»›i thÃ´ng tin sáº£n pháº©m, chÃºng ta cÃ³ thá»ƒ chia bá»™ sÆ°u táº­p thÃ nh hai bá»™ sÆ°u táº­p, má»™t bá»™ sÆ°u táº­p chá»©a thÃ´ng tin sáº£n pháº©m vÃ  mÆ°á»i Ä‘Ã¡nh giÃ¡ gáº§n Ä‘Ã¢y nháº¥t:</p>
<p>Bá»™ sÆ°u táº­p sáº£n pháº©m lÆ°u trá»¯ thÃ´ng tin vá» má»—i sáº£n pháº©m, bao gá»“m mÆ°á»i Ä‘Ã¡nh giÃ¡ gáº§n Ä‘Ã¢y nháº¥t:</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Super Widget"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "description"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"This is the most useful item in your toolbox."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "price"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"value"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">NumberDecimal(</span><span style="color:#98C379;--shiki-dark:#98C379">"119.99"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"currency"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"USD"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "reviews"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "review_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">786</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "review_author"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Kristina"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "review_text"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"This is indeed an amazing widget."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "published_date"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2019-02-18"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">    ...</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "review_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">776</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "review_author"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Pablo"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "review_text"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Amazing!"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      "published_date"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2019-02-16"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Bá»™ sÆ°u táº­p chi tiáº¿t Ä‘Ã¡nh giÃ¡ lÆ°u trá»¯ táº¥t cáº£ cÃ¡c Ä‘Ã¡nh giÃ¡:</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "review_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">786</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "product_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "review_author"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Kristina"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "review_text"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"This is indeed an amazing widget."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "published_date"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2019-02-18"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "review_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">785</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "product_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "review_author"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Trina"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "review_text"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Nice product. Slow shipping."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "published_date"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2019-02-17"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">...</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "review_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "product_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "review_author"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Hans"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "review_text"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Meh, it's okay."</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "published_date"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2017-12-06"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>MÃ´ hÃ¬nh má»™t-nhiá»u dá»±a trÃªn tÃ i liá»‡u tham chiáº¿u</h3>
<p>Xem xÃ©t vÃ­ dá»¥ sau vá» má»‘i quan há»‡ giá»¯a nhÃ  xuáº¥t báº£n vÃ  sÃ¡ch.</p>
<p>VÃ­ dá»¥ nÃ y cho tháº¥y lá»£i Ã­ch cá»§a viá»‡c sá»­ dá»¥ng tÃ i liá»‡u tham chiáº¿u Ä‘á»ƒ trÃ¡nh viá»‡c láº·p láº¡i thÃ´ng tin vá» nhÃ  xuáº¥t báº£n.</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"MongoDB: The Definitive Guide"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   author</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [ </span><span style="color:#98C379;--shiki-dark:#98C379">"Kristina Chodorow"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Mike Dirolf"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ],</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   published_date</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2010-09-24"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   pages</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">216</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   language</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"English"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   publisher</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">              name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"O'Reilly Media"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">              founded</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1980</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">              location</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"CA"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"50 Tips and Tricks for MongoDB Developer"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   author</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Kristina Chodorow"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   published_date</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2011-05-06"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   pages</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">68</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   language</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"English"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   publisher</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">              name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"O'Reilly Media"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">              founded</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1980</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">              location</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"CA"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Äá»ƒ trÃ¡nh viá»‡c láº·p láº¡i thÃ´ng tin vá» nhÃ  xuáº¥t báº£n, chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng tÃ i liá»‡u tham chiáº¿u vÃ  lÆ°u trá»¯ thÃ´ng tin vá» nhÃ  xuáº¥t báº£n riÃªng biá»‡t khá»i sÃ¡ch. Khi sá»­ dá»¥ng tham chiáº¿u, cÃ¡ch mÃ  má»‘i quan há»‡ tÄƒng lÃªn sáº½ quyáº¿t Ä‘á»‹nh nÆ¡i lÆ°u trá»¯ tham chiáº¿u. Náº¿u sá»‘ lÆ°á»£ng sÃ¡ch cá»§a má»—i nhÃ  xuáº¥t báº£n Ã­t vÃ  tÄƒng trÆ°á»Ÿng cÃ³ giá»›i háº¡n, Ä‘Ã´i khi viá»‡c lÆ°u trá»¯ tham chiáº¿u sÃ¡ch trong tÃ i liá»‡u nhÃ  xuáº¥t báº£n cÃ³ thá»ƒ há»¯u Ã­ch. NgÆ°á»£c láº¡i, náº¿u sá»‘ lÆ°á»£ng sÃ¡ch cá»§a má»—i nhÃ  xuáº¥t báº£n khÃ´ng bá»‹ giá»›i háº¡n, mÃ´ hÃ¬nh dá»¯ liá»‡u nÃ y sáº½ dáº«n Ä‘áº¿n má»™t máº£ng khÃ´ng Ä‘á»•i vÃ  khÃ´ng ngá»«ng tÄƒng, nhÆ° vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y:</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"O'Reilly Media"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   founded</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1980</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   location</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"CA"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   books</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#D19A66;--shiki-dark:#D19A66">123456789</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">234567890</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">...</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">    _id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">123456789</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">    title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"MongoDB: The Definitive Guide"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">    author</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [ </span><span style="color:#98C379;--shiki-dark:#98C379">"Kristina Chodorow"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Mike Dirolf"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ],</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">    published_date</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2010-09-24"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">    pages</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">216</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">    language</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"English"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   _id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">234567890</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"50 Tips and Tricks for MongoDB Developer"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   author</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Kristina Chodorow"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   published_date</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2011-05-06"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   pages</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">68</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   language</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"English"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Äá»ƒ trÃ¡nh máº£ng khÃ´ng Ä‘á»•i vÃ  khÃ´ng ngá»«ng tÄƒng, hÃ£y lÆ°u trá»¯ tham chiáº¿u Ä‘áº¿n nhÃ  xuáº¥t báº£n trong tÃ i liá»‡u sÃ¡ch:</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   _id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"oreilly"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"O'Reilly Media"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   founded</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1980</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   location</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"CA"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   _id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">123456789</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"MongoDB: The Definitive Guide"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   author</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [ </span><span style="color:#98C379;--shiki-dark:#98C379">"Kristina Chodorow"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Mike Dirolf"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ],</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   published_date</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2010-09-24"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   pages</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">216</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   language</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"English"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   publisher_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"oreilly"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   _id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">234567890</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"50 Tips and Tricks for MongoDB Developer"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   author</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Kristina Chodorow"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   published_date</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">ISODate(</span><span style="color:#98C379;--shiki-dark:#98C379">"2011-05-06"</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   pages</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">68</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   language</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"English"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">   publisher_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"oreilly"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>MÃ´ hÃ¬nh cÃ¢y cÃ³ cáº¥u trÃºc</h2>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200911194846.svg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h3>MÃ´ hÃ¬nh cÃ¢y cÃ³ cáº¥u trÃºc vá»›i nÃºt cha</h3>
<p>Cáº¥u trÃºc trÃªn cÃ³ thá»ƒ Ä‘Æ°á»£c biá»ƒu diá»…n báº±ng cÃ¡ch sá»­ dá»¥ng tham chiáº¿u cha:</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">db.categories.insertMany([</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"MongoDB"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"parent"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Databases"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"dbm"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"parent"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Databases"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Databases"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"parent"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Programming"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Languages"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"parent"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Programming"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Programming"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"parent"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Books"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Books"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"parent"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">])</span></span></code></pre>
</div><ul>
<li>
<p>Truy váº¥n nÃºt cha cá»§a má»™t nÃºt:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>db.categories.findOne( { _id: "MongoDB" } ).parent</span></span></code></pre>
</div></li>
<li>
<p>CÃ³ thá»ƒ táº¡o chá»‰ má»¥c trÃªn trÆ°á»ng cha Ä‘á»ƒ tÃ¬m kiáº¿m nhanh nÃºt cha:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>db.categories.createIndex( { parent: 1 } )</span></span></code></pre>
</div></li>
<li>
<p>CÃ³ thá»ƒ tÃ¬m tháº¥y cÃ¡c nÃºt con trá»±c tiáº¿p thÃ´ng qua truy váº¥n trÆ°á»ng cha:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>db.categories.find( { parent: "Databases" } )</span></span></code></pre>
</div></li>
<li>
<p>Äá»ƒ truy váº¥n cÃ¢y con, báº¡n cÃ³ thá»ƒ tham kháº£o: <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/graphLookup/#pipe._S_graphLookup" target="_blank" rel="noopener noreferrer"><code>$graphLookup</code></a>.</p>
</li>
</ul>
<h3>MÃ´ hÃ¬nh cÃ¢y cÃ³ cáº¥u trÃºc vá»›i nÃºt con</h3>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">db.categories.insertMany([</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"MongoDB"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"children"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [] },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"dbm"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"children"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [] },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Databases"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"children"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">"MongoDB"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"dbm"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">] },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Languages"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"children"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [] },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Programming"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"children"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">"Databases"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Languages"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">] },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Books"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"children"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">"Programming"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">] }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">])</span></span></code></pre>
</div><ul>
<li>
<p>Truy váº¥n cÃ¡c nÃºt con cá»§a má»™t nÃºt:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>db.categories.findOne( { _id: "Databases" } ).children</span></span></code></pre>
</div></li>
<li>
<p>CÃ³ thá»ƒ táº¡o chá»‰ má»¥c trÃªn trÆ°á»ng children Ä‘á»ƒ tÃ¬m kiáº¿m nhanh cÃ¡c nÃºt con:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>db.categories.createIndex( { children: 1 } )</span></span></code></pre>
</div></li>
<li>
<p>CÃ³ thá»ƒ truy váº¥n cÃ¡c nÃºt thÃ´ng qua trÆ°á»ng children Ä‘á»ƒ tÃ¬m kiáº¿m nÃºt cha vÃ  cÃ¡c nÃºt anh em:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>db.categories.find( { children: "MongoDB" } )</span></span></code></pre>
</div></li>
</ul>
<h3>MÃ´ hÃ¬nh cÃ¢y cÃ³ cáº¥u trÃºc vá»›i tá»• tiÃªn</h3>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">db.categories.insertMany([</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"MongoDB"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "ancestors"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">"Books"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Programming"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Databases"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "parent"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Databases"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"dbm"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "ancestors"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">"Books"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Programming"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Databases"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "parent"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Databases"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Databases"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "ancestors"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">"Books"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Programming"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "parent"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Programming"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Languages"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "ancestors"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">"Books"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"Programming"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">],</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "parent"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Programming"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Programming"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"ancestors"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">"Books"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">], </span><span style="color:#E06C75;--shiki-dark:#E06C75">"parent"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Books"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Books"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"ancestors"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [], </span><span style="color:#E06C75;--shiki-dark:#E06C75">"parent"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">])</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>
<p>Truy váº¥n tá»• tiÃªn cá»§a má»™t nÃºt hoáº·c Ä‘Æ°á»ng dáº«n lÃ  nhanh chÃ³ng vÃ  trá»±c tiáº¿p:</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">db.categories.findOne({ </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"MongoDB"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }).ancestors</span></span></code></pre>
</div></li>
<li>
<p>CÃ³ thá»ƒ táº¡o chá»‰ má»¥c trÃªn trÆ°á»ng ancestors Ä‘á»ƒ tÃ¬m kiáº¿m nhanh cÃ¡c nÃºt tá»• tiÃªn:</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">db.categories.createIndex({ </span><span style="color:#E06C75;--shiki-dark:#E06C75">"ancestors"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> })</span></span></code></pre>
</div></li>
<li>
<p>CÃ³ thá»ƒ truy váº¥n táº¥t cáº£ cÃ¡c con chÃ¡u cá»§a má»™t nÃºt thÃ´ng qua trÆ°á»ng ancestors:</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">db.categories.find({ </span><span style="color:#E06C75;--shiki-dark:#E06C75">"ancestors"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Programming"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> })</span></span></code></pre>
</div></li>
</ul>
<h3>MÃ´ hÃ¬nh cÃ¢y cÃ³ Ä‘Æ°á»ng dáº«n cá»¥ thá»ƒ</h3>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">db.categories.insertMany([</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Books"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"path"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Programming"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"path"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">",Books,"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Databases"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"path"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">",Books,Programming,"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Languages"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"path"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">",Books,Programming,"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"MongoDB"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"path"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">",Books,Programming,Databases,"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"_id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"dbm"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">"path"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">",Books,Programming,Databases,"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">])</span></span></code></pre>
</div><ul>
<li>
<p>CÃ³ thá»ƒ truy váº¥n Ä‘á»ƒ láº¥y toÃ n bá»™ cÃ¢y vÃ  sáº¯p xáº¿p theo trÆ°á»ng Ä‘Æ°á»ng dáº«n:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>db.categories.find().sort( { path: 1 } )</span></span></code></pre>
</div></li>
<li>
<p>CÃ³ thá»ƒ sá»­ dá»¥ng biá»ƒu thá»©c chÃ­nh quy trÃªn trÆ°á»ng path Ä‘á»ƒ tÃ¬m kiáº¿m cÃ¡c con chÃ¡u cá»§a Programming:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>db.categories.find( { path: /,Programming,/ } )</span></span></code></pre>
</div></li>
<li>
<p>CÃ³ thá»ƒ truy váº¥n cÃ¡c con chÃ¡u cá»§a Books, trong Ä‘Ã³ Books cÅ©ng náº±m á»Ÿ cáº¥p cao nháº¥t cá»§a cáº¥u trÃºc:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>db.categories.find( { path: /^,Books,/ } )</span></span></code></pre>
</div></li>
<li>
<p>Äá»ƒ táº¡o chá»‰ má»¥c trÃªn trÆ°á»ng path, hÃ£y sá»­ dá»¥ng lá»‡nh sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>db.categories.createIndex( { path: 1 } )</span></span></code></pre>
</div></li>
</ul>
<h3>MÃ´ hÃ¬nh cÃ¢y cÃ³ táº­p há»£p lá»“ng nhau</h3>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200911204252.svg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">db</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">categories</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">insertMany</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">([</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Books'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">parent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">left</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">right</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">12</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Programming'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">parent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Books'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">left</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">right</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">11</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Languages'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">parent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Programming'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">left</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">right</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Databases'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">parent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Programming'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">left</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">right</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'MongoDB'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">parent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Databases'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">left</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">6</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">right</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">7</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  { </span><span style="color:#E06C75;--shiki-dark:#E06C75">_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'dbm'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">parent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Databases'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">left</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">8</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">right</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">9</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">])</span></span></code></pre>
</div><p>CÃ³ thá»ƒ truy váº¥n Ä‘á»ƒ láº¥y cÃ¡c con chÃ¡u cá»§a má»™t nÃºt:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">var</span><span style="color:#E06C75;--shiki-dark:#E06C75"> databaseCategory</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> db</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">categories</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">findOne</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({ </span><span style="color:#E06C75;--shiki-dark:#E06C75">_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'Databases'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> })</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">db</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">categories</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">find</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  left</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">$gt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">databaseCategory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">left</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  right</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">$lt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">databaseCategory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">right</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">})</span></span></code></pre>
</div><h2>Máº«u thiáº¿t káº¿</h2>
<h3>TÃ i liá»‡u lá»›n, nhiá»u cá»™t, nhiá»u chá»‰ má»¥c</h3>
<p>Giáº£i phÃ¡p lÃ : Chuyá»ƒn Ä‘á»•i tá»« cá»™t sang hÃ ng</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200919225901.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h3>Quáº£n lÃ½ cÃ¡c phiÃªn báº£n tÃ i liá»‡u khÃ¡c nhau</h3>
<p>Äá»‹nh dáº¡ng tÃ i liá»‡u MongoDB ráº¥t linh hoáº¡t, Ä‘iá»u nÃ y cÃ³ thá»ƒ gÃ¢y khÃ³ khÄƒn trong viá»‡c duy trÃ¬ cÃ¡c phiÃªn báº£n.</p>
<p>Giáº£i phÃ¡p lÃ : CÃ³ thá»ƒ thÃªm má»™t trÆ°á»ng sá»‘ phiÃªn báº£n</p>
<ul>
<li>Nhanh chÃ³ng lá»c bá» cÃ¡c tÃ i liá»‡u khÃ´ng cáº§n nÃ¢ng cáº¥p</li>
<li>Khi nÃ¢ng cáº¥p, xá»­ lÃ½ khÃ¡c nhau cho cÃ¡c tÃ i liá»‡u cÃ³ phiÃªn báº£n khÃ¡c nhau</li>
</ul>
<h3>Thá»‘ng kÃª lÆ°á»£t nháº¥p vÃ o trang web</h3>
<p>YÃªu cáº§u Ä‘á»™ chÃ­nh xÃ¡c cá»§a dá»¯ liá»‡u thá»‘ng kÃª khÃ´ng quÃ¡ quan trá»ng.</p>
<p>Giáº£i phÃ¡p: Sá»­ dá»¥ng tÃ­nh toÃ¡n gáº§n Ä‘Ãºng</p>
<p>Ghi láº¡i sau má»—i 10 láº§n nháº¥p:</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{ </span><span style="color:#E06C75;--shiki-dark:#E06C75">"$inc"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">"views"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } }</span></span></code></pre>
</div><h3>Thá»‘ng kÃª chÃ­nh xÃ¡c</h3>
<p>Giáº£i phÃ¡p: Sá»­ dá»¥ng tá»•ng há»£p trÆ°á»›c</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200911194846.svg" type="image/svg+xml"/>
    </item>
    <item>
      <title>MongoDB Modeling</title>
      <link>https://vanhung4499.github.io/database/mongodb/modeling.html</link>
      <guid>https://vanhung4499.github.io/database/mongodb/modeling.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MongoDB Modeling</source>
      <description>MÃ´ hÃ¬nh hÃ³a MongoDB MÃ´ hÃ¬nh dá»¯ liá»‡u cá»§a MongoDB lÃ  má»™t mÃ´ hÃ¬nh linh hoáº¡t, trong khi cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡ yÃªu cáº§u báº¡n Ä‘á»‹nh nghÄ©a cáº¥u trÃºc mÃ´ hÃ¬nh báº£ng trÆ°á»›c khi chÃ¨n dá»¯ liá»‡u. Tu...</description>
      <category>mongodb</category>
      <category>nosql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<p>MÃ´ hÃ¬nh dá»¯ liá»‡u cá»§a MongoDB lÃ  má»™t mÃ´ hÃ¬nh linh hoáº¡t, trong khi cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡ yÃªu cáº§u báº¡n Ä‘á»‹nh nghÄ©a cáº¥u trÃºc mÃ´ hÃ¬nh báº£ng trÆ°á»›c khi chÃ¨n dá»¯ liá»‡u. Tuy nhiÃªn, trong MongoDB, tÃ i liá»‡u khÃ´ng giá»›i háº¡n cáº¥u trÃºc. Äiá»u nÃ y giÃºp dá»… dÃ ng Ã¡nh xáº¡ giá»¯a Ä‘á»‘i tÆ°á»£ng vÃ  tÃ i liá»‡u cÆ¡ sá»Ÿ dá»¯ liá»‡u. Ngay cáº£ khi cÃ³ sá»± thay Ä‘á»•i lá»›n giá»¯a cÃ¡c báº£n ghi dá»¯ liá»‡u, má»—i tÃ i liá»‡u váº«n cÃ³ thá»ƒ Ã¡nh xáº¡ tá»‘t vÃ o cÃ¡c báº£n ghi khÃ¡c nhau. Tuy nhiÃªn, trong thá»±c táº¿, cÃ¡c tÃ i liá»‡u trong cÃ¹ng má»™t bá»™ sÆ°u táº­p thÆ°á»ng cÃ³ cáº¥u trÃºc tÆ°Æ¡ng tá»± nhau.</p>
<p>Viá»‡c thiáº¿t káº¿ mÃ´ hÃ¬nh dá»¯ liá»‡u lÃ  má»™t quÃ¡ trÃ¬nh Ä‘áº§y thÃ¡ch thá»©c, Ä‘Ã²i há»i cÃ¢n nháº¯c vÃ  cÃ¢n nháº¯c giá»¯a yÃªu cáº§u á»©ng dá»¥ng, hiá»‡u suáº¥t cá»§a cÆ¡ sá»Ÿ dá»¯ liá»‡u vÃ  mÃ´ hÃ¬nh Ä‘á»c/ghi dá»¯ liá»‡u. Khi thiáº¿t káº¿ mÃ´ hÃ¬nh dá»¯ liá»‡u, hÃ£y cÃ¢n nháº¯c yÃªu cáº§u á»©ng dá»¥ng vá»›i mÃ´ hÃ¬nh sá»­ dá»¥ng dá»¯ liá»‡u (nhÆ° truy váº¥n, cáº­p nháº­t vÃ  xá»­ lÃ½) cÅ©ng nhÆ° cáº¥u trÃºc tá»± nhiÃªn cá»§a dá»¯ liá»‡u.</p>
<h2>Nháº­p mÃ´n mÃ´ hÃ¬nh hoÃ¡ dá»¯ liá»‡u MongoDB</h2>
<blockquote>
<p>Tham kháº£o: <a href="https://docs.mongodb.com/guides/server/introduction/#what-you-ll-need" target="_blank" rel="noopener noreferrer">https://docs.mongodb.com/guides/server/introduction/#what-you-ll-need</a></p>
</blockquote>
<h3>(1) XÃ¡c Ä‘á»‹nh táº­p dá»¯ liá»‡u</h3>
<p>Khi cáº§n táº¡o lÆ°u trá»¯ dá»¯ liá»‡u, trÆ°á»›c háº¿t cáº§n Ä‘áº·t cÃ¢u há»i: Dá»¯ liá»‡u nÃ o cáº§n Ä‘Æ°á»£c lÆ°u trá»¯? CÃ¡c trÆ°á»ng nÃ y liÃªn quan nhÆ° tháº¿ nÃ o?</p>
<p>ÄÃ¢y lÃ  quÃ¡ trÃ¬nh thiáº¿t káº¿ dá»¯ liá»‡u. Má»¥c tiÃªu lÃ  <strong>trá»«u tÆ°á»£ng hÃ³a yÃªu cáº§u kinh doanh thÃ nh mÃ´ hÃ¬nh logic</strong>.</p>
<p>Giáº£ sá»­ cÃ³ má»™t tÃ¬nh huá»‘ng nhÆ° sau: ChÃºng ta cáº§n xÃ¢y dá»±ng cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘á»ƒ theo dÃµi váº­t liá»‡u vÃ  sá»‘ lÆ°á»£ng, kÃ­ch thÆ°á»›c, nhÃ£n hiá»‡u vÃ  xáº¿p háº¡ng cá»§a chÃºng.</p>
<p>Náº¿u lÆ°u trá»¯ trong RDBMS, cÃ³ thá»ƒ cÃ³ báº£ng dá»¯ liá»‡u nhÆ° sau:</p>
<p>| name     | quantity | size        | status | tags                     | rating |<br>
| :</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200910193231.png" type="image/png"/>
    </item>
    <item>
      <title>MongoDB Index</title>
      <link>https://vanhung4499.github.io/database/mongodb/mongo-index.html</link>
      <guid>https://vanhung4499.github.io/database/mongodb/mongo-index.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MongoDB Index</source>
      <description>MongoDB Index Giá»›i thiá»‡u vá» Index trong MongoDB TÃ¡c dá»¥ng cá»§a Index MongoDB Ä‘á»‹nh nghÄ©a cÃ¡c chá»‰ má»¥c trÃªn cáº¥p dá»¯ liá»‡u cá»§a collection. Chá»‰ má»¥c thÆ°á»ng cÃ³ thá»ƒ cáº£i thiá»‡n Ä‘Ã¡ng ká»ƒ hiá»‡u s...</description>
      <category>mongodb</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Giá»›i thiá»‡u vá» Index trong MongoDB</h2>
<h3>TÃ¡c dá»¥ng cá»§a Index</h3>
<p><strong>MongoDB Ä‘á»‹nh nghÄ©a cÃ¡c chá»‰ má»¥c trÃªn cáº¥p dá»¯ liá»‡u cá»§a collection</strong>.</p>
<p>Chá»‰ má»¥c thÆ°á»ng cÃ³ thá»ƒ cáº£i thiá»‡n Ä‘Ã¡ng ká»ƒ hiá»‡u suáº¥t cá»§a truy váº¥n. Náº¿u <strong>khÃ´ng cÃ³ chá»‰ má»¥c</strong>, MongoDB sáº½ pháº£i quÃ©t qua tá»«ng tÃ i liá»‡u trong collection vÃ  chá»n ra nhá»¯ng báº£n ghi phÃ¹ há»£p vá»›i Ä‘iá»u kiá»‡n truy váº¥n.</p>
<p>Viá»‡c quÃ©t toÃ n bá»™ collection nhÆ° váº­y lÃ  khÃ´ng hiá»‡u quáº£, Ä‘áº·c biá»‡t khi xá»­ lÃ½ lÆ°á»£ng dá»¯ liá»‡u lá»›n. Truy váº¥n cÃ³ thá»ƒ máº¥t vÃ i chá»¥c giÃ¢y hoáº·c tháº­m chÃ­ vÃ i phÃºt, Ä‘iá»u nÃ y lÃ  khÃ´ng cháº¥p nháº­n Ä‘Æ°á»£c vá» hiá»‡u suáº¥t.</p>
<p>Chá»‰ má»¥c lÃ  má»™t cáº¥u trÃºc dá»¯ liá»‡u Ä‘áº·c biá»‡t, Ä‘Æ°á»£c lÆ°u trá»¯ trong má»™t táº­p há»£p dá»¯ liá»‡u dá»… dÃ ng duyá»‡t vÃ  Ä‘á»c. Chá»‰ má»¥c sáº¯p xáº¿p cÃ¡c giÃ¡ trá»‹ cá»§a má»™t cá»™t hoáº·c nhiá»u cá»™t trong báº£ng cÆ¡ sá»Ÿ dá»¯ liá»‡u.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200921210621.svg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h3>PhÆ°Æ¡ng thá»©c createIndex()</h3>
<p><strong>MongoDB sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>createIndex()</code> Ä‘á»ƒ táº¡o chá»‰ má»¥c</strong>.</p>
<p>CÃº phÃ¡p cá»§a <code>createIndex()</code> nhÆ° sau:</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">db</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">collection</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">createIndex</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">( &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">key</span><span style="color:#D19A66;--shiki-dark:#D19A66;font-style:italic;--shiki-dark-font-style:italic"> and</span><span style="color:#D19A66;--shiki-dark:#D19A66;font-style:italic;--shiki-dark-font-style:italic"> index</span><span style="color:#D19A66;--shiki-dark:#D19A66;font-style:italic;--shiki-dark-font-style:italic"> type</span><span style="color:#D19A66;--shiki-dark:#D19A66;font-style:italic;--shiki-dark-font-style:italic"> specification</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;, &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">options</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; )</span></span></code></pre>
</div><p>Danh sÃ¡ch cÃ¡c tham sá»‘ tÃ¹y chá»n cá»§a <code>createIndex()</code> nhÆ° sau:</p>
<p>| Tham sá»‘            | Kiá»ƒu dá»¯ liá»‡u | MÃ´ táº£                                                                                                                                           |<br>
| :</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200921210621.svg" type="image/svg+xml"/>
    </item>
    <item>
      <title>MongoDB Operation</title>
      <link>https://vanhung4499.github.io/database/mongodb/operation.html</link>
      <guid>https://vanhung4499.github.io/database/mongodb/operation.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MongoDB Operation</source>
      <description>Váº­n hÃ nh MongoDB CÃ i Ä‘áº·t MongoDB Windows (1) Táº£i xuá»‘ng vÃ  giáº£i nÃ©n Truy cáº­p vÃ o trang web chÃ­nh thá»©c Ä‘á»ƒ táº£i xuá»‘ng MongoDB vÃ  chá»n phiÃªn báº£n phÃ¹ há»£p táº¡i: Download MongoDB Communi...</description>
      <category>mongodb</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>CÃ i Ä‘áº·t MongoDB</h2>
<h3>Windows</h3>
<p>(1) Táº£i xuá»‘ng vÃ  giáº£i nÃ©n</p>
<p>Truy cáº­p vÃ o trang web chÃ­nh thá»©c Ä‘á»ƒ táº£i xuá»‘ng MongoDB vÃ  chá»n phiÃªn báº£n phÃ¹ há»£p táº¡i: <a href="https://www.mongodb.com/try/download/community" target="_blank" rel="noopener noreferrer">Download MongoDB Community Server | MongoDB</a></p>
<p>(2) Táº¡o thÆ° má»¥c dá»¯ liá»‡u</p>
<p>MongoDB lÆ°u trá»¯ dá»¯ liá»‡u trong thÆ° má»¥c db. Tuy nhiÃªn, thÆ° má»¥c nÃ y khÃ´ng Ä‘Æ°á»£c tá»± Ä‘á»™ng táº¡o ra, chÃºng ta cáº§n táº¡o nÃ³ sau khi cÃ i Ä‘áº·t.</p>
<p>VÃ­ dá»¥: <code>D:\Tools\Server\mongodb\mongodb-4.4.0\data\db</code></p>
<p>(3) Cháº¡y dá»‹ch vá»¥ MongoDB</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">mongod</span><span style="color:#D19A66;--shiki-dark:#D19A66"> --dbpath</span><span style="color:#98C379;--shiki-dark:#98C379"> D:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\T</span><span style="color:#98C379;--shiki-dark:#98C379">ools</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\S</span><span style="color:#98C379;--shiki-dark:#98C379">erver</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\m</span><span style="color:#98C379;--shiki-dark:#98C379">ongodb</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\m</span><span style="color:#98C379;--shiki-dark:#98C379">ongodb-4.4.0</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\d</span><span style="color:#98C379;--shiki-dark:#98C379">ata</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">\d</span><span style="color:#98C379;--shiki-dark:#98C379">b</span></span></code></pre>
</div><p>(4) Káº¿t ná»‘i vá»›i MongoDB tá»« mÃ¡y khÃ¡ch</p>
<p>Báº¡n cÃ³ thá»ƒ káº¿t ná»‘i vá»›i MongoDB báº±ng cÃ¡ch cháº¡y lá»‡nh <code>mongo.exe</code> trong cá»­a sá»• dÃ²ng lá»‡nh.</p>
<p>(5) Cáº¥u hÃ¬nh dá»‹ch vá»¥ MongoDB</p>
<h3>Linux</h3>
<p>(1) CÃ i Ä‘áº·t báº±ng gÃ³i cÃ i Ä‘áº·t</p>
<p>TrÆ°á»›c khi cÃ i Ä‘áº·t, chÃºng ta cáº§n cÃ i Ä‘áº·t cÃ¡c gÃ³i phá»¥ thuá»™c cho cÃ¡c ná»n táº£ng Linux.</p>
<p><strong>Red Hat/CentOS:</strong></p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>sudo yum install libcurl openssl</span></span></code></pre>
</div><p><strong>Ubuntu 18.04 LTS ("Bionic")/Debian 10 "Buster":</strong></p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>sudo apt-get install libcurl4 openssl</span></span></code></pre>
</div><p><strong>Ubuntu 16.04 LTS ("Xenial")/Debian 9 "Stretch":</strong></p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>sudo apt-get install libcurl3 openssl</span></span></code></pre>
</div><p>(2) Táº¡o thÆ° má»¥c dá»¯ liá»‡u</p>
<p>Máº·c Ä‘á»‹nh, MongoDB sáº½ khá»Ÿi táº¡o hai thÆ° má»¥c sau khi khá»Ÿi Ä‘á»™ng:</p>
<ul>
<li>ThÆ° má»¥c lÆ°u trá»¯ dá»¯ liá»‡u: /var/lib/mongodb</li>
<li>ThÆ° má»¥c ghi nháº­t kÃ½: /var/log/mongodb</li>
</ul>
<p>TrÆ°á»›c khi khá»Ÿi Ä‘á»™ng, chÃºng ta cÃ³ thá»ƒ táº¡o hai thÆ° má»¥c nÃ y vÃ  Ä‘áº·t quyá»n Ä‘á»c vÃ  ghi cho ngÆ°á»i dÃ¹ng hiá»‡n táº¡i:</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">sudo</span><span style="color:#98C379;--shiki-dark:#98C379"> mkdir</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -p</span><span style="color:#98C379;--shiki-dark:#98C379"> /var/lib/mongo</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">sudo</span><span style="color:#98C379;--shiki-dark:#98C379"> mkdir</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -p</span><span style="color:#98C379;--shiki-dark:#98C379"> /var/log/mongodb</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">sudo</span><span style="color:#98C379;--shiki-dark:#98C379"> chown</span><span style="color:#98C379;--shiki-dark:#98C379"> `</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">whoami</span><span style="color:#98C379;--shiki-dark:#98C379">`</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> /var/lib/mongo</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">     # Äáº·t quyá»n</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">sudo</span><span style="color:#98C379;--shiki-dark:#98C379"> chown</span><span style="color:#98C379;--shiki-dark:#98C379"> `</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">whoami</span><span style="color:#98C379;--shiki-dark:#98C379">`</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> /var/log/mongodb</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">   # Äáº·t quyá»n</span></span></code></pre>
</div><p>(3) Cháº¡y dá»‹ch vá»¥ MongoDB</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">mongod</span><span style="color:#D19A66;--shiki-dark:#D19A66"> --dbpath</span><span style="color:#98C379;--shiki-dark:#98C379"> /var/lib/mongo</span><span style="color:#D19A66;--shiki-dark:#D19A66"> --logpath</span><span style="color:#98C379;--shiki-dark:#98C379"> /var/log/mongodb/mongod.log</span><span style="color:#D19A66;--shiki-dark:#D19A66"> --fork</span></span></code></pre>
</div><p>Má»Ÿ tá»‡p /var/log/mongodb/mongod.log vÃ  kiá»ƒm tra thÃ´ng tin sau, náº¿u xuáº¥t hiá»‡n, Ä‘iá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ  khá»Ÿi Ä‘á»™ng thÃ nh cÃ´ng.</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># tail -10f /var/log/mongodb/mongod.log</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">2020-07-09T12:20:17.391+0800</span><span style="color:#98C379;--shiki-dark:#98C379"> I</span><span style="color:#98C379;--shiki-dark:#98C379">  NETWORK</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  [listener] Listening on /tmp/mongodb-27017.sock</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">2020-07-09T12:20:17.392+0800</span><span style="color:#98C379;--shiki-dark:#98C379"> I</span><span style="color:#98C379;--shiki-dark:#98C379">  NETWORK</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  [listener] Listening on 127.0.0.1</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">2020-07-09T12:20:17.392+0800</span><span style="color:#98C379;--shiki-dark:#98C379"> I</span><span style="color:#98C379;--shiki-dark:#98C379">  NETWORK</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  [listener] waiting </span><span style="color:#C678DD;--shiki-dark:#C678DD">for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> connections on port </span><span style="color:#D19A66;--shiki-dark:#D19A66">27017</span></span></code></pre>
</div><p>(4) Káº¿t ná»‘i vá»›i MongoDB tá»« mÃ¡y khÃ¡ch</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">cd</span><span style="color:#98C379;--shiki-dark:#98C379"> /usr/local/mongodb4/bin</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">./mongo</span></span></code></pre>
</div><h3>Thiáº¿t láº­p tÃªn ngÆ°á»i dÃ¹ng vÃ  máº­t kháº©u</h3>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; use admin</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">chuyá»ƒn</span><span style="color:#98C379;--shiki-dark:#98C379"> sang</span><span style="color:#98C379;--shiki-dark:#98C379"> db</span><span style="color:#98C379;--shiki-dark:#98C379"> admin</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; db.createUser({"user":"root","pwd":"root","roles":[{"role":"userAdminAnyDatabase","db":"admin"}]})</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">ThÃªm</span><span style="color:#98C379;--shiki-dark:#98C379"> ngÆ°á»i</span><span style="color:#98C379;--shiki-dark:#98C379"> dÃ¹ng</span><span style="color:#98C379;--shiki-dark:#98C379"> thÃ nh</span><span style="color:#98C379;--shiki-dark:#98C379"> cÃ´ng:</span><span style="color:#98C379;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "user"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "root",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        "roles"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">                        "role"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "userAdminAnyDatabase",</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">                        "db"</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> "admin"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><h2>Sao lÆ°u vÃ  khÃ´i phá»¥c dá»¯ liá»‡u</h2>
<h3>Sao lÆ°u dá»¯ liá»‡u</h3>
<p>Trong MongoDB, chÃºng ta sá»­ dá»¥ng lá»‡nh <code>mongodump</code> Ä‘á»ƒ sao lÆ°u dá»¯ liá»‡u MongoDB. Lá»‡nh nÃ y cho phÃ©p xuáº¥t táº¥t cáº£ dá»¯ liá»‡u vÃ o má»™t thÆ° má»¥c Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh.</p>
<p>CÃº phÃ¡p lá»‡nh <code>mongodump</code> nhÆ° sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>mongodump -h dbhost -d dbname -o dbdirectory</span></span></code></pre>
</div><ul>
<li>-h: Äá»‹a chá»‰ mÃ¡y chá»§ MongoDB, vÃ­ dá»¥: 127.0.0.1, cÅ©ng cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh cá»•ng: 127.0.0.1:27017.</li>
<li>-d: TÃªn cÆ¡ sá»Ÿ dá»¯ liá»‡u cáº§n sao lÆ°u, vÃ­ dá»¥: test.</li>
<li>-o: ÄÆ°á»ng dáº«n lÆ°u trá»¯ dá»¯ liá»‡u sao lÆ°u, vÃ­ dá»¥: c:\data\dump. TrÆ°á»›c khi sao lÆ°u, thÆ° má»¥c nÃ y cáº§n Ä‘Æ°á»£c táº¡o trÆ°á»›c. Sau khi sao lÆ°u hoÃ n táº¥t, MongoDB sáº½ tá»± Ä‘á»™ng táº¡o má»™t thÆ° má»¥c test trong thÆ° má»¥c dump, chá»©a dá»¯ liá»‡u sao lÆ°u cá»§a cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘Ã³.</li>
</ul>
<p>CÃ¡c tham sá»‘ tÃ¹y chá»n cho lá»‡nh <code>mongodump</code> nhÆ° sau:</p>
<p>| CÃº phÃ¡p                                              | MÃ´ táº£                           | VÃ­ dá»¥                                             |<br>
| :</p>
]]></content:encoded>
    </item>
    <item>
      <title>MongoDB Overview</title>
      <link>https://vanhung4499.github.io/database/mongodb/overview.html</link>
      <guid>https://vanhung4499.github.io/database/mongodb/overview.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MongoDB Overview</source>
      <description>MongoDB MOC MongoDB lÃ  má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u phÃ¢n tÃ¡n dá»±a trÃªn tÃ i liá»‡u, Ä‘Æ°á»£c viáº¿t báº±ng ngÃ´n ngá»¯ C++. NÃ³ nháº±m má»¥c Ä‘Ã­ch cung cáº¥p má»™t giáº£i phÃ¡p lÆ°u trá»¯ dá»¯ liá»‡u cÃ³ hiá»‡u suáº¥t cao vÃ  cÃ³ ...</description>
      <category>mongodb</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>MongoDB lÃ  má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u phÃ¢n tÃ¡n dá»±a trÃªn tÃ i liá»‡u, Ä‘Æ°á»£c viáº¿t báº±ng ngÃ´n ngá»¯ C++. NÃ³ nháº±m má»¥c Ä‘Ã­ch cung cáº¥p má»™t giáº£i phÃ¡p lÆ°u trá»¯ dá»¯ liá»‡u cÃ³ hiá»‡u suáº¥t cao vÃ  cÃ³ kháº£ nÄƒng má»Ÿ rá»™ng cho cÃ¡c á»©ng dá»¥ng web.</p>
<p>MongoDB lÃ  má»™t sáº£n pháº©m náº±m giá»¯a cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡ vÃ  cÆ¡ sá»Ÿ dá»¯ liá»‡u phi quan há»‡. NÃ³ lÃ  cÆ¡ sá»Ÿ dá»¯ liá»‡u phi quan há»‡ cÃ³ tÃ­nh nÄƒng phong phÃº nháº¥t vÃ  giá»‘ng nháº¥t vá»›i cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡. NÃ³ há»— trá»£ cáº¥u trÃºc dá»¯ liá»‡u ráº¥t linh hoáº¡t, sá»­ dá»¥ng Ä‘á»‹nh dáº¡ng bson tÆ°Æ¡ng tá»± nhÆ° json, do Ä‘Ã³ cÃ³ thá»ƒ lÆ°u trá»¯ cÃ¡c loáº¡i dá»¯ liá»‡u phá»©c táº¡p.</p>
<p>Äiá»ƒm Ä‘áº·c biá»‡t lá»›n nháº¥t cá»§a MongoDB lÃ  ngÃ´n ngá»¯ truy váº¥n máº¡nh máº½ mÃ  nÃ³ há»— trá»£. CÃº phÃ¡p cá»§a nÃ³ tÆ°Æ¡ng tá»± nhÆ° ngÃ´n ngá»¯ truy váº¥n hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng, gáº§n nhÆ° cÃ³ thá»ƒ thá»±c hiá»‡n háº§u háº¿t cÃ¡c chá»©c nÄƒng truy váº¥n cá»§a cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡ trÃªn má»™t báº£ng duy nháº¥t, vÃ  cÃ²n há»— trá»£ táº¡o chá»‰ má»¥c cho dá»¯ liá»‡u.</p>
</blockquote>
<h2>ğŸ“– Contents</h2>
]]></content:encoded>
    </item>
    <item>
      <title>MongoDB Replication</title>
      <link>https://vanhung4499.github.io/database/mongodb/replication.html</link>
      <guid>https://vanhung4499.github.io/database/mongodb/replication.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MongoDB Replication</source>
      <description>Sao lÆ°u trong MongoDB Sao lÆ°u cÃ³ thá»ƒ cung cáº¥p tÃ­nh sáºµn cÃ³ dá»± phÃ²ng vÃ  tÄƒng cÆ°á»ng kháº£ nÄƒng sáºµn cÃ³ cá»§a dá»¯ liá»‡u. Sá»­ dá»¥ng nhiá»u báº£n sao dá»¯ liá»‡u trÃªn cÃ¡c mÃ¡y chá»§ cÆ¡ sá»Ÿ dá»¯ liá»‡u khÃ¡c n...</description>
      <category>db</category>
      <category>mongodb</category>
      <category>nosql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Sao lÆ°u cÃ³ thá»ƒ <strong>cung cáº¥p tÃ­nh sáºµn cÃ³ dá»± phÃ²ng vÃ  tÄƒng cÆ°á»ng kháº£ nÄƒng sáºµn cÃ³ cá»§a dá»¯ liá»‡u</strong>. Sá»­ dá»¥ng nhiá»u báº£n sao dá»¯ liá»‡u trÃªn cÃ¡c mÃ¡y chá»§ cÆ¡ sá»Ÿ dá»¯ liá»‡u khÃ¡c nhau cÃ³ thá»ƒ cung cáº¥p kháº£ nÄƒng chá»‘ng lá»—i trong trÆ°á»ng há»£p má»™t mÃ¡y chá»§ cÆ¡ sá»Ÿ dá»¯ liá»‡u bá»‹ sá»± cá»‘ vÃ  dá»¯ liá»‡u bá»‹ máº¥t.</p>
<p>Trong má»™t sá»‘ trÆ°á»ng há»£p, sao lÆ°u cÅ©ng cÃ³ thá»ƒ <strong>cung cáº¥p kháº£ nÄƒng xá»­ lÃ½ Ä‘á»c lá»›n hÆ¡n</strong>. VÃ¬ khÃ¡ch hÃ ng cÃ³ thá»ƒ gá»­i cÃ¡c hoáº¡t Ä‘á»™ng Ä‘á»c Ä‘áº¿n cÃ¡c mÃ¡y chá»§ khÃ¡c nhau. Viá»‡c duy trÃ¬ cÃ¡c báº£n sao dá»¯ liá»‡u trÃªn cÃ¡c trung tÃ¢m dá»¯ liá»‡u khÃ¡c nhau cÅ©ng cÃ³ thá»ƒ cáº£i thiá»‡n tÃ­nh cá»¥c bá»™ cá»§a dá»¯ liá»‡u vÃ  kháº£ nÄƒng sáºµn cÃ³ cá»§a á»©ng dá»¥ng phÃ¢n tÃ¡n. Báº¡n cÅ©ng cÃ³ thá»ƒ duy trÃ¬ cÃ¡c báº£n sao khÃ¡c nhau cho má»¥c Ä‘Ã­ch Ä‘áº·c biá»‡t nhÆ° phá»¥c há»“i sau tháº£m há»a, bÃ¡o cÃ¡o hoáº·c sao lÆ°u.</p>
<h2>Báº£n sao dá»¯ liá»‡u MongoDB</h2>
<p>Báº£n sao dá»¯ liá»‡u trong MongoDB lÃ  má»™t nhÃ³m quy trÃ¬nh mongod duy trÃ¬ cÃ¹ng má»™t táº­p há»£p dá»¯ liá»‡u. Má»™t báº£n sao dá»¯ liá»‡u bao gá»“m nhiá»u thÃ nh viÃªn dá»¯ liá»‡u vÃ  má»™t thÃ nh viÃªn trá»ng tÃ¢m (tÃ¹y chá»n). Trong cÃ¡c thÃ nh viÃªn dá»¯ liá»‡u, chá»‰ cÃ³ má»™t thÃ nh viÃªn Ä‘Æ°á»£c coi lÃ  chÃ­nh vÃ  cÃ¡c thÃ nh viÃªn khÃ¡c Ä‘Æ°á»£c coi lÃ  phá»¥.</p>
<p><strong>ThÃ nh viÃªn chÃ­nh chá»‹u trÃ¡ch nhiá»‡m nháº­n táº¥t cáº£ cÃ¡c hoáº¡t Ä‘á»™ng ghi</strong>. Má»™t báº£n sao dá»¯ liá»‡u chá»‰ cÃ³ thá»ƒ cÃ³ má»™t thÃ nh viÃªn chÃ­nh vÃ  cÃ³ thá»ƒ xÃ¡c nháº­n ráº±ng cÃ¡c hoáº¡t Ä‘á»™ng ghi trÃªn cÃ¡c nÃºt trong cá»¥m báº±ng cÃ¡ch sá»­ dá»¥ng <a href="https://docs.mongodb.com/manual/reference/write-concern/#writeconcern.%22majority%22" target="_blank" rel="noopener noreferrer"><code>{ w: "majority" }</code></a>.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200920165054.svg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p><strong>CÃ¡c thÃ nh viÃªn phá»¥ sao chÃ©p nháº­t kÃ½ hoáº¡t Ä‘á»™ng cá»§a thÃ nh viÃªn chÃ­nh vÃ  Ã¡p dá»¥ng cÃ¡c hoáº¡t Ä‘á»™ng nÃ y vÃ o táº­p dá»¯ liá»‡u cá»§a mÃ¬nh</strong> Ä‘á»ƒ Ä‘á»“ng bá»™ dá»¯ liá»‡u vá»›i thÃ nh viÃªn chÃ­nh. Náº¿u thÃ nh viÃªn chÃ­nh khÃ´ng kháº£ dá»¥ng, má»™t thÃ nh viÃªn phá»¥ Ä‘á»§ Ä‘iá»u kiá»‡n sáº½ Ä‘Æ°á»£c báº§u lÃ m thÃ nh viÃªn chÃ­nh má»›i.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200920165055.svg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>Trong má»™t sá»‘ trÆ°á»ng há»£p (vÃ­ dá»¥: chá»‰ cÃ³ má»™t thÃ nh viÃªn chÃ­nh vÃ  má»™t thÃ nh viÃªn phá»¥ do háº¡n cháº¿ vá» chi phÃ­), báº¡n cÃ³ thá»ƒ chá»n thÃªm má»™t quy trÃ¬nh mongod lÃ m thÃ nh viÃªn trá»ng tÃ¢m trong báº£n sao dá»¯ liá»‡u. ThÃ nh viÃªn trá»ng tÃ¢m tham gia vÃ o quÃ¡ trÃ¬nh báº§u cá»­ nhÆ°ng khÃ´ng lÆ°u trá»¯ dá»¯ liá»‡u (khÃ´ng cung cáº¥p dá»± phÃ²ng dá»¯ liá»‡u).</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200920165053.svg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>ThÃ nh viÃªn trá»ng tÃ¢m luÃ´n lÃ  thÃ nh viÃªn trá»ng tÃ¢m. Trong quÃ¡ trÃ¬nh báº§u cá»­, thÃ nh viÃªn chÃ­nh cÃ³ thá»ƒ bá»‹ giÃ¡ng cáº¥p thÃ nh thÃ nh viÃªn phá»¥ vÃ  thÃ nh viÃªn phá»¥ cÃ³ thá»ƒ Ä‘Æ°á»£c thÄƒng cáº¥p thÃ nh thÃ nh viÃªn chÃ­nh.</p>
<h2>Sao lÆ°u khÃ´ng Ä‘á»“ng bá»™</h2>
<h3>Hoáº¡t Ä‘á»™ng cháº­m</h3>
<p>CÃ¡c thÃ nh viÃªn phá»¥ sao chÃ©p nháº­t kÃ½ hoáº¡t Ä‘á»™ng cá»§a thÃ nh viÃªn chÃ­nh vÃ  Ã¡p dá»¥ng cÃ¡c hoáº¡t Ä‘á»™ng nÃ y vÃ o táº­p dá»¯ liá»‡u cá»§a mÃ¬nh. Báº±ng cÃ¡ch Ä‘á»“ng bá»™ hÃ³a dá»¯ liá»‡u tá»« thÃ nh viÃªn chÃ­nh, ngay cáº£ khi má»™t hoáº·c nhiá»u thÃ nh viÃªn gáº·p sá»± cá»‘, báº£n sao dá»¯ liá»‡u (cá»¥m MongoDB) váº«n cÃ³ thá»ƒ tiáº¿p tá»¥c hoáº¡t Ä‘á»™ng.</p>
<p>Tá»« phiÃªn báº£n 4.2 trá»Ÿ Ä‘i, cÃ¡c thÃ nh viÃªn phá»¥ trong báº£n sao dá»¯ liá»‡u ghi láº¡i cÃ¡c hoáº¡t Ä‘á»™ng cháº­m (thá»i gian hoáº¡t Ä‘á»™ng dÃ i hÆ¡n ngÆ°á»¡ng Ä‘Æ°á»£c Ä‘áº·t). Nhá»¯ng hoáº¡t Ä‘á»™ng cháº­m nÃ y Ä‘Æ°á»£c ghi láº¡i trong <a href="https://docs.mongodb.com/manual/reference/program/mongod/#cmdoption-mongod-logpath" target="_blank" rel="noopener noreferrer">nháº­t kÃ½ cháº©n Ä‘oÃ¡n</a> cá»§a <a href="https://docs.mongodb.com/manual/reference/log-messages/#REPL" target="_blank" rel="noopener noreferrer">REPL</a> vÃ  Ä‘Æ°á»£c ghi nháº­n trong thÃ´ng bÃ¡o nháº­t kÃ½ vÄƒn báº£n vá»›i vÄƒn báº£n <code>op: &lt;oplog entry&gt;</code> Ä‘Ã£ máº¥t <code>&lt;num&gt;ms</code>. Nhá»¯ng má»¥c nháº­t kÃ½ hoáº¡t Ä‘á»™ng cháº­m nÃ y chá»‰ phá»¥ thuá»™c vÃ o ngÆ°á»¡ng hoáº¡t Ä‘á»™ng cháº­m vÃ  khÃ´ng phá»¥ thuá»™c vÃ o cáº¥p Ä‘á»™ nháº­t kÃ½ (cáº¥p Ä‘á»™ há»‡ thá»‘ng hoáº·c cáº¥p Ä‘á»™ thÃ nh pháº§n), cáº¥u hÃ¬nh hoáº·c tá»· lá»‡ máº«u hoáº¡t Ä‘á»™ng cháº­m. CÃ¡c bá»™ thu tháº­p khÃ´ng ghi láº¡i cÃ¡c má»¥c nháº­t kÃ½ hoáº¡t Ä‘á»™ng cháº­m.</p>
<h3>Äá»™ trá»… vÃ  kiá»ƒm soÃ¡t luá»“ng</h3>
<p>Äá»™ trá»… sao lÆ°u (Replication lag) lÃ  thá»i gian máº¥t Ä‘á»ƒ sao chÃ©p cÃ¡c hoáº¡t Ä‘á»™ng ghi tá»« thÃ nh viÃªn chÃ­nh sang thÃ nh viÃªn phá»¥. Thá»i gian trá»… ngáº¯n lÃ  cháº¥p nháº­n Ä‘Æ°á»£c, nhÆ°ng vá»›i Ä‘á»™ trá»… sao lÆ°u tÄƒng lÃªn, cÃ³ thá»ƒ gáº·p váº¥n Ä‘á» nghiÃªm trá»ng, vÃ­ dá»¥ nhÆ° Ã¡p lá»±c bá»™ nhá»› Ä‘á»‡m trÃªn thÃ nh viÃªn chÃ­nh.</p>
<p>Tá»« MongoDB 4.2 trá»Ÿ Ä‘i, quáº£n trá»‹ viÃªn cÃ³ thá»ƒ giá»›i háº¡n tá»‘c Ä‘á»™ ghi cá»§a thÃ nh viÃªn chÃ­nh Ä‘á»ƒ giá»¯ cho háº§u háº¿t thá»i gian trá»… dÆ°á»›i ngÆ°á»¡ng tá»‘i Ä‘a Ä‘Æ°á»£c cáº¥u hÃ¬nh <a href="https://docs.mongodb.com/manual/reference/parameters/#param.flowControlTargetLagSeconds" target="_blank" rel="noopener noreferrer"><code>flowControlTargetLagSeconds</code></a>.</p>
<p>Máº·c Ä‘á»‹nh, kiá»ƒm soÃ¡t luá»“ng Ä‘Æ°á»£c báº­t.</p>
<p>Khi kiá»ƒm soÃ¡t luá»“ng Ä‘Æ°á»£c kÃ­ch hoáº¡t, khi thá»i gian trá»… tiáº¿n Ä‘áº¿n <a href="https://docs.mongodb.com/manual/reference/parameters/#param.flowControlTargetLagSeconds" target="_blank" rel="noopener noreferrer"><code>flowControlTargetLagSeconds</code></a>, cÃ¡c hoáº¡t Ä‘á»™ng ghi trÃªn thÃ nh viÃªn chÃ­nh pháº£i nháº­n Ä‘Æ°á»£c mÃ£ thÃ´ng bÃ¡o trÆ°á»›c khi khÃ³a vÃ  thá»±c hiá»‡n hoáº¡t Ä‘á»™ng ghi. Báº±ng cÃ¡ch giá»›i háº¡n sá»‘ lÆ°á»£ng mÃ£ thÃ´ng bÃ¡o Ä‘Æ°á»£c phÃ¡t ra má»—i giÃ¢y, cÆ¡ cháº¿ kiá»ƒm soÃ¡t luá»“ng cá»‘ gáº¯ng giá»¯ cho thá»i gian trá»… dÆ°á»›i má»¥c tiÃªu.</p>
<h2>Chuyá»ƒn Ä‘á»•i lá»—i</h2>
<p>Khi thá»i gian giao tiáº¿p giá»¯a thÃ nh viÃªn chÃ­nh vÃ  cÃ¡c thÃ nh viÃªn khÃ¡c trong cá»¥m vÆ°á»£t quÃ¡ <a href="https://docs.mongodb.com/manual/reference/replica-configuration/#rsconf.settings.electionTimeoutMillis" target="_blank" rel="noopener noreferrer"><code>electionTimeoutMillis</code></a> Ä‘Æ°á»£c cáº¥u hÃ¬nh (máº·c Ä‘á»‹nh lÃ  10 giÃ¢y), cÃ¡c thÃ nh viÃªn phÃ¹ há»£p sáº½ yÃªu cáº§u má»™t cuá»™c báº§u cá»­ vÃ  Ä‘á» cá»­ chÃ­nh mÃ¬nh lÃ m thÃ nh viÃªn chÃ­nh má»›i. Cá»¥m cá»‘ gáº¯ng hoÃ n thÃ nh cuá»™c báº§u cá»­ vÃ  khÃ´i phá»¥c hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200920175429.svg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>TrÆ°á»›c khi hoÃ n thÃ nh cuá»™c báº§u cá»­, báº£n sao dá»¯ liá»‡u khÃ´ng thá»ƒ xá»­ lÃ½ cÃ¡c hoáº¡t Ä‘á»™ng ghi. Náº¿u báº£n sao dá»¯ liá»‡u Ä‘Æ°á»£c cáº¥u hÃ¬nh Ä‘á»ƒ cháº¡y khi thÃ nh viÃªn chÃ­nh khÃ´ng kháº£ dá»¥ng, nÃ³ cÃ³ thá»ƒ tiáº¿p tá»¥c cung cáº¥p truy váº¥n Ä‘á»c.</p>
<p>Náº¿u cáº¥u hÃ¬nh báº£n sao dá»¯ liá»‡u máº·c Ä‘á»‹nh lÃ  cháº¡y khi thÃ nh viÃªn chÃ­nh khÃ´ng kháº£ dá»¥ng, nÃ³ sáº½ tiáº¿p tá»¥c Ä‘Ã¡p á»©ng cÃ¡c truy váº¥n Ä‘á»c trong khi chá» cuá»™c báº§u cá»­ vÃ  sau Ä‘Ã³ tiáº¿p tá»¥c ghi láº¡i hoáº¡t Ä‘á»™ng ghi tá»« thÃ nh viÃªn chÃ­nh má»›i.</p>
<p>á»¨ng dá»¥ng káº¿t ná»‘i nÃªn bao gá»“m xá»­ lÃ½ lá»—i tá»± Ä‘á»™ng vÃ  tÃ¡i thá»­ láº¡i cho viá»‡c chuyá»ƒn Ä‘á»•i lá»—i tá»± Ä‘á»™ng vÃ  cuá»™c báº§u cá»­ tiáº¿p theo. Tá»« MongoDB 3.6 trá»Ÿ Ä‘i, cÃ¡c trÃ¬nh Ä‘iá»u khiá»ƒn MongoDB cÃ³ thá»ƒ phÃ¡t hiá»‡n sá»± máº¥t káº¿t ná»‘i vá»›i thÃ nh viÃªn chÃ­nh vÃ  cÃ³ thá»ƒ tá»± Ä‘á»™ng thá»­ láº¡i má»™t sá»‘ hoáº¡t Ä‘á»™ng ghi.</p>
<p>Tá»« MongoDB 4.4 trá»Ÿ Ä‘i, MongoDB cung cáº¥p Ä‘á»c gÆ°Æ¡ng: nÃ³ sáº½ nÃ³i trÆ°á»›c dá»¯ liá»‡u gáº§n Ä‘Ã¢y cá»§a thÃ nh viÃªn cÃ³ thá»ƒ báº§u cá»­ (thÃ nh viÃªn Æ°u tiÃªn lá»›n hÆ¡n 0). Viá»‡c nÃ³i trÆ°á»›c bá»™ nhá»› Ä‘á»‡m cá»§a thÃ nh viÃªn cÃ³ thá»ƒ báº§u cá»­ cÃ³ thá»ƒ giÃºp khÃ´i phá»¥c nhanh hÆ¡n sau cuá»™c báº§u cá»­.</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200920165054.svg" type="image/svg+xml"/>
    </item>
    <item>
      <title>MongoDB Sharding</title>
      <link>https://vanhung4499.github.io/database/mongodb/sharding.html</link>
      <guid>https://vanhung4499.github.io/database/mongodb/sharding.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MongoDB Sharding</source>
      <description>MongoDB PhÃ¢n Ä‘oáº¡n Giá»›i thiá»‡u vá» cá»¥m phÃ¢n Ä‘oáº¡n Khi MongoDB cáº§n lÆ°u trá»¯ dá»¯ liá»‡u lá»›n, má»™t nÃºt Ä‘Æ¡n khÃ´ng Ä‘á»§ Ä‘á»ƒ lÆ°u trá»¯ toÃ n bá»™ dá»¯ liá»‡u vÃ  cÃ³ thá»ƒ khÃ´ng cung cáº¥p Ä‘Æ°á»£c hiá»‡u suáº¥t Ä‘Ã¡ng h...</description>
      <category>db</category>
      <category>mongodb</category>
      <category>nosql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Giá»›i thiá»‡u vá» cá»¥m phÃ¢n Ä‘oáº¡n</h2>
<p>Khi MongoDB cáº§n lÆ°u trá»¯ dá»¯ liá»‡u lá»›n, má»™t nÃºt Ä‘Æ¡n khÃ´ng Ä‘á»§ Ä‘á»ƒ lÆ°u trá»¯ toÃ n bá»™ dá»¯ liá»‡u vÃ  cÃ³ thá»ƒ khÃ´ng cung cáº¥p Ä‘Æ°á»£c hiá»‡u suáº¥t Ä‘Ã¡ng hÃ i lÃ²ng. Do Ä‘Ã³, chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng cÆ¡ cháº¿ phÃ¢n Ä‘oáº¡n cá»§a MongoDB Ä‘á»ƒ há»— trá»£ má»Ÿ rá»™ng theo chiá»u ngang.</p>
<h3>Äáº·c Ä‘iá»ƒm cá»§a cá»¥m phÃ¢n Ä‘oáº¡n</h3>
<p>HoÃ n toÃ n trong suá»‘t vá»›i á»©ng dá»¥ng</p>
<p>CÃ¢n báº±ng dá»¯ liá»‡u tá»± Ä‘á»™ng</p>
<p>Má»Ÿ rá»™ng Ä‘á»™ng</p>
<p>Cung cáº¥p ba phÆ°Æ¡ng phÃ¡p phÃ¢n Ä‘oáº¡n khÃ¡c nhau</p>
<h3>CÃ¡c thÃ nh pháº§n cá»§a cá»¥m phÃ¢n Ä‘oáº¡n</h3>
<p>Cá»¥m phÃ¢n Ä‘oáº¡n MongoDB bao gá»“m cÃ¡c thÃ nh pháº§n sau:</p>
<ul>
<li><a href="https://docs.mongodb.com/manual/core/sharded-cluster-shards/" target="_blank" rel="noopener noreferrer">shard</a>: Má»—i phÃ¢n Ä‘oáº¡n chá»©a má»™t pháº§n con cá»§a dá»¯ liá»‡u phÃ¢n Ä‘oáº¡n. Má»—i phÃ¢n Ä‘oáº¡n cÃ³ thá»ƒ triá»ƒn khai nhÆ° má»™t bá»™ nhÃ¢n báº£n.</li>
<li><a href="https://docs.mongodb.com/manual/core/sharded-cluster-query-router/" target="_blank" rel="noopener noreferrer">mongos</a>: mongos hoáº¡t Ä‘á»™ng nhÆ° má»™t bá»™ Ä‘á»‹nh tuyáº¿n truy váº¥n, cung cáº¥p giao diá»‡n giá»¯a á»©ng dá»¥ng khÃ¡ch hÃ ng vÃ  cá»¥m phÃ¢n Ä‘oáº¡n. Tá»« phiÃªn báº£n MongoDB 4.4 trá»Ÿ Ä‘i, mongos cÃ³ thá»ƒ há»— trá»£ <a href="https://docs.mongodb.com/manual/core/sharded-cluster-query-router/#mongos-hedged-reads" target="_blank" rel="noopener noreferrer">hedged reads</a> Ä‘á»ƒ giáº£m thiá»ƒu Ä‘á»™ trá»….</li>
<li><a href="https://docs.mongodb.com/manual/core/sharded-cluster-config-servers/" target="_blank" rel="noopener noreferrer">config servers</a>: Cung cáº¥p lÆ°u trá»¯ dá»¯ liá»‡u siÃªu dá»¯ liá»‡u vÃ  Ã¡nh xáº¡ phÃ¢n phá»‘i dá»¯ liá»‡u.</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230724020005.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<h3>PhÃ¢n phá»‘i cá»§a cá»¥m phÃ¢n Ä‘oáº¡n</h3>
<p><strong>Cá»¥m sao chÃ©p MongoDB Ä‘Æ°á»£c phÃ¢n phá»‘i theo bá»™ sÆ°u táº­p</strong>, phÃ¢n phá»‘i dá»¯ liá»‡u trÃªn cÃ¡c phÃ¢n Ä‘oáº¡n trong cá»¥m. Tá»‘i Ä‘a cho phÃ©p 1024 phÃ¢n Ä‘oáº¡n.</p>
<p>Dá»¯ liá»‡u giá»¯a cÃ¡c phÃ¢n Ä‘oáº¡n trong cá»¥m sao chÃ©p MongoDB khÃ´ng trÃ¹ng láº·p, chá»‰ khi táº¥t cáº£ cÃ¡c phÃ¢n Ä‘oáº¡n Ä‘á»u hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng, cá»¥m má»›i hoáº¡t Ä‘á»™ng Ä‘áº§y Ä‘á»§.</p>
<p>CÆ¡ sá»Ÿ dá»¯ liá»‡u MongoDB cÃ³ thá»ƒ chá»©a cáº£ bá»™ sÆ°u táº­p Ä‘Ã£ phÃ¢n Ä‘oáº¡n vÃ  chÆ°a phÃ¢n Ä‘oáº¡n. CÃ¡c bá»™ sÆ°u táº­p Ä‘Ã£ phÃ¢n Ä‘oáº¡n sáº½ Ä‘Æ°á»£c phÃ¢n phá»‘i trÃªn cÃ¡c nÃºt trong cá»¥m. Trong khi Ä‘Ã³, cÃ¡c bá»™ sÆ°u táº­p chÆ°a phÃ¢n Ä‘oáº¡n Ä‘Æ°á»£c lÆ°u trá»¯ trÃªn nÃºt chÃ­nh. Má»—i cÆ¡ sá»Ÿ dá»¯ liá»‡u cÃ³ nÃºt chÃ­nh riÃªng cá»§a nÃ³.</p>
<p>Bá»™ sÆ°u táº­p Ä‘Ã£ phÃ¢n Ä‘oáº¡n vÃ  chÆ°a phÃ¢n Ä‘oáº¡n:</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200920212159.svg" alt="20200920212159.svg" tabindex="0" loading="lazy"><figcaption>20200920212159.svg</figcaption></figure>
<h3>NÃºt Ä‘á»‹nh tuyáº¿n mongos</h3>
<p>Äá»ƒ káº¿t ná»‘i vá»›i <a href="https://docs.mongodb.com/manual/reference/glossary/#term-sharded-cluster" target="_blank" rel="noopener noreferrer">cá»¥m phÃ¢n Ä‘oáº¡n MongoDB</a>, báº¡n pháº£i káº¿t ná»‘i vá»›i bá»™ Ä‘á»‹nh tuyáº¿n <a href="https://docs.mongodb.com/manual/reference/glossary/#term-mongos" target="_blank" rel="noopener noreferrer"><code>mongos</code></a>. Äiá»u nÃ y bao gá»“m cáº£ cÃ¡c bá»™ sÆ°u táº­p Ä‘Ã£ phÃ¢n Ä‘oáº¡n vÃ  chÆ°a phÃ¢n Ä‘oáº¡n. KhÃ¡ch hÃ ng khÃ´ng nÃªn káº¿t ná»‘i trá»±c tiáº¿p vá»›i cÃ¡c nÃºt phÃ¢n Ä‘oáº¡n Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng Ä‘á»c vÃ  ghi.</p>
<p>CÃ¡ch káº¿t ná»‘i vá»›i <a href="https://docs.mongodb.com/manual/reference/program/mongos/#bin.mongos" target="_blank" rel="noopener noreferrer"><code>mongos</code></a> tÆ°Æ¡ng tá»± nhÆ° káº¿t ná»‘i vá»›i <a href="https://docs.mongodb.com/manual/reference/program/mongod/#bin.mongod" target="_blank" rel="noopener noreferrer"><code>mongod</code></a>, vÃ­ dá»¥ nhÆ° thÃ´ng qua <a href="https://docs.mongodb.com/manual/reference/program/mongo/#bin.mongo" target="_blank" rel="noopener noreferrer"><code>mongo</code></a> shell hoáº·c <a href="https://docs.mongodb.com/drivers/?jump=docs" target="_blank" rel="noopener noreferrer">MongoDB driver</a>.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200920212157.svg" alt="20200920212157.svg" tabindex="0" loading="lazy"><figcaption>20200920212157.svg</figcaption></figure>
<p>Vai trÃ² cá»§a nÃºt Ä‘á»‹nh tuyáº¿n:</p>
<ul>
<li>Cung cáº¥p Ä‘iá»ƒm vÃ o duy nháº¥t cho cá»¥m</li>
<li>Chuyá»ƒn tiáº¿p yÃªu cáº§u tá»« á»©ng dá»¥ng</li>
<li>Chá»n nÃºt dá»¯ liá»‡u phÃ¹ há»£p Ä‘á»ƒ Ä‘á»c vÃ  ghi</li>
<li>Káº¿t há»£p káº¿t quáº£ tá»« nhiá»u nÃºt dá»¯ liá»‡u</li>
</ul>
<p>ThÆ°á»ng thÃ¬, nÃªn cÃ³ Ã­t nháº¥t 2 nÃºt Ä‘á»‹nh tuyáº¿n mongos.</p>
<h1>KhÃ³a phÃ¢n Ä‘oáº¡n</h1>
<p>MongoDB sá»­ dá»¥ng khÃ³a phÃ¢n Ä‘oáº¡n Ä‘á»ƒ phÃ¢n phá»‘i cÃ¡c tÃ i liá»‡u trong bá»™ sÆ°u táº­p giá»¯a cÃ¡c phÃ¢n Ä‘oáº¡n. KhÃ³a phÃ¢n Ä‘oáº¡n Ä‘Æ°á»£c táº¡o thÃ nh tá»« má»™t hoáº·c nhiá»u trÆ°á»ng trong tÃ i liá»‡u.</p>
<ul>
<li>Tá»« phiÃªn báº£n MongoDB 4.4 trá»Ÿ Ä‘i, cÃ¡c tÃ i liá»‡u trong bá»™ sÆ°u táº­p phÃ¢n Ä‘oáº¡n cÃ³ thá»ƒ thiáº¿u trÆ°á»ng khÃ³a phÃ¢n Ä‘oáº¡n. Khi phÃ¢n phá»‘i tÃ i liá»‡u qua cÃ¡c phÃ¢n Ä‘oáº¡n, viá»‡c thiáº¿u trÆ°á»ng khÃ³a phÃ¢n Ä‘oáº¡n sáº½ Ä‘Æ°á»£c coi nhÆ° cÃ³ giÃ¡ trá»‹ rá»—ng, nhÆ°ng khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng trong cÃ¡c truy váº¥n Ä‘á»‹nh tuyáº¿n.</li>
<li>Trong MongoDB 4.2 vÃ  cÃ¡c phiÃªn báº£n cÅ© hÆ¡n, trÆ°á»ng khÃ³a phÃ¢n Ä‘oáº¡n pháº£i tá»“n táº¡i trong má»—i tÃ i liá»‡u trong bá»™ sÆ°u táº­p phÃ¢n Ä‘oáº¡n.</li>
</ul>
<p>Lá»±a chá»n khÃ³a phÃ¢n Ä‘oáº¡n khi phÃ¢n Ä‘oáº¡n bá»™ sÆ°u táº­p.</p>
<ul>
<li>Tá»« phiÃªn báº£n MongoDB 4.4 trá»Ÿ Ä‘i, báº¡n cÃ³ thá»ƒ tá»‘i Æ°u hÃ³a khÃ³a phÃ¢n Ä‘oáº¡n cá»§a bá»™ sÆ°u táº­p báº±ng cÃ¡ch thÃªm má»™t hoáº·c nhiá»u trÆ°á»ng háº­u tá»‘ vÃ o khÃ³a hiá»‡n cÃ³.</li>
<li>Trong MongoDB 4.2 vÃ  cÃ¡c phiÃªn báº£n cÅ© hÆ¡n, khÃ´ng thá»ƒ thay Ä‘á»•i lá»±a chá»n khÃ³a phÃ¢n Ä‘oáº¡n sau khi Ä‘Ã£ phÃ¢n Ä‘oáº¡n.</li>
</ul>
<p>GiÃ¡ trá»‹ khÃ³a phÃ¢n Ä‘oáº¡n cá»§a tÃ i liá»‡u xÃ¡c Ä‘á»‹nh phÃ¢n phá»‘i cá»§a nÃ³ trÃªn cÃ¡c phÃ¢n Ä‘oáº¡n</p>
<ul>
<li>Tá»« phiÃªn báº£n MongoDB 4.2 trá»Ÿ Ä‘i, báº¡n cÃ³ thá»ƒ cáº­p nháº­t giÃ¡ trá»‹ khÃ³a phÃ¢n Ä‘oáº¡n cá»§a tÃ i liá»‡u trá»« khi trÆ°á»ng khÃ³a phÃ¢n Ä‘oáº¡n cá»§a báº¡n lÃ  trÆ°á»ng khÃ´ng thá»ƒ thay Ä‘á»•i nhÆ° _id.</li>
<li>Trong MongoDB 4.0 vÃ  cÃ¡c phiÃªn báº£n cÅ© hÆ¡n, giÃ¡ trá»‹ trÆ°á»ng khÃ³a phÃ¢n Ä‘oáº¡n cá»§a tÃ i liá»‡u lÃ  khÃ´ng thá»ƒ thay Ä‘á»•i.</li>
</ul>
<p>Chá»‰ má»¥c khÃ³a phÃ¢n Ä‘oáº¡n: Äá»ƒ phÃ¢n Ä‘oáº¡n má»™t bá»™ sÆ°u táº­p Ä‘Ã£ Ä‘Æ°á»£c Ä‘iá»n, bá»™ sÆ°u táº­p Ä‘Ã³ pháº£i cÃ³ má»™t chá»‰ má»¥c báº¯t Ä‘áº§u báº±ng khÃ³a phÃ¢n Ä‘oáº¡n. Khi phÃ¢n Ä‘oáº¡n má»™t bá»™ sÆ°u táº­p trá»‘ng, MongoDB sáº½ táº¡o má»™t chá»‰ má»¥c há»— trá»£ cho khÃ³a phÃ¢n Ä‘oáº¡n Ä‘Ã£ chá»‰ Ä‘á»‹nh náº¿u bá»™ sÆ°u táº­p Ä‘Ã³ chÆ°a cÃ³ chá»‰ má»¥c phÃ¹ há»£p.</p>
<p>Chiáº¿n lÆ°á»£c phÃ¢n Ä‘oáº¡n: Lá»±a chá»n khÃ³a phÃ¢n Ä‘oáº¡n áº£nh hÆ°á»Ÿng Ä‘áº¿n hiá»‡u suáº¥t, hiá»‡u quáº£ vÃ  kháº£ nÄƒng má»Ÿ rá»™ng cá»§a cá»¥m phÃ¢n Ä‘oáº¡n. Lá»±a chá»n khÃ³a phÃ¢n Ä‘oáº¡n vÃ  chá»‰ má»¥c phá»¥ trá»£ cÅ©ng áº£nh hÆ°á»Ÿng Ä‘áº¿n chiáº¿n lÆ°á»£c phÃ¢n Ä‘oáº¡n mÃ  cá»¥m cÃ³ thá»ƒ sá»­ dá»¥ng.</p>
<p>MongoDB phÃ¢n Ä‘oáº¡n dá»¯ liá»‡u. Má»—i phÃ¢n Ä‘oáº¡n cÃ³ giá»›i háº¡n dá»±a trÃªn khÃ³a phÃ¢n Ä‘oáº¡n.</p>
<p>Äá»ƒ Ä‘áº£m báº£o phÃ¢n phá»‘i Ä‘á»“ng Ä‘á»u cá»§a cÃ¡c phÃ¢n Ä‘oáº¡n trÃªn toÃ n cá»¥m, trÃ¬nh cÃ¢n báº±ng cháº¡y trong ná»n vÃ  di chuyá»ƒn cÃ¡c phÃ¢n Ä‘oáº¡n trÃªn cÃ¡c phÃ¢n Ä‘oáº¡n.</p>
<h2>Chiáº¿n lÆ°á»£c phÃ¢n Ä‘oáº¡n</h2>
<p>MongoDB há»— trá»£ hai chiáº¿n lÆ°á»£c phÃ¢n Ä‘oáº¡n: PhÃ¢n Ä‘oáº¡n theo bÄƒm vÃ  phÃ¢n Ä‘oáº¡n theo pháº¡m vi.</p>
<h3>PhÃ¢n Ä‘oáº¡n theo bÄƒm</h3>
<p>Chiáº¿n lÆ°á»£c phÃ¢n Ä‘oáº¡n theo bÄƒm tÃ­nh toÃ¡n giÃ¡ trá»‹ bÄƒm cá»§a trÆ°á»ng khÃ³a phÃ¢n Ä‘oáº¡n; sau Ä‘Ã³, má»—i <a href="https://docs.mongodb.com/manual/reference/glossary/#term-chunk" target="_blank" rel="noopener noreferrer">chunk</a> Ä‘Æ°á»£c gÃ¡n má»™t pháº¡m vi dá»±a trÃªn giÃ¡ trá»‹ khÃ³a phÃ¢n Ä‘oáº¡n.</p>
<blockquote>
<p>LÆ°u Ã½: Khi giáº£i quyáº¿t truy váº¥n sá»­ dá»¥ng chá»‰ má»¥c bÄƒm, MongoDB tá»± Ä‘á»™ng tÃ­nh toÃ¡n giÃ¡ trá»‹ bÄƒm, khÃ´ng cáº§n á»©ng dá»¥ng tÃ­nh toÃ¡n giÃ¡ trá»‹ bÄƒm.</p>
</blockquote>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200920213343.svg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>Máº·c dÃ¹ cÃ¡c pháº¡m vi khÃ³a phÃ¢n Ä‘oáº¡n cÃ³ thá»ƒ "gáº§n nhau", nhÆ°ng giÃ¡ trá»‹ bÄƒm cá»§a chÃºng khÃ´ng thá»ƒ cÃ³ kháº£ nÄƒng náº±m trÃªn cÃ¹ng má»™t <a href="https://docs.mongodb.com/manual/reference/glossary/#term-chunk" target="_blank" rel="noopener noreferrer">chunk</a>. PhÃ¢n phá»‘i dá»¯ liá»‡u dá»±a trÃªn bÄƒm giÃºp phÃ¢n phá»‘i dá»¯ liá»‡u Ä‘á»“ng Ä‘á»u hÆ¡n, Ä‘áº·c biá»‡t lÃ  trong cÃ¡c táº­p dá»¯ liá»‡u mÃ  khÃ³a phÃ¢n Ä‘oáº¡n thay Ä‘á»•i má»™t cÃ¡ch Ä‘Æ¡n Ä‘iá»‡u.</p>
<p>Tuy nhiÃªn, phÃ¢n Ä‘oáº¡n theo bÄƒm cÃ³ nghÄ©a lÃ  cÃ¡c truy váº¥n pháº¡m vi trÃªn khÃ³a phÃ¢n Ä‘oáº¡n khÃ´ng thá»ƒ Ä‘Æ°á»£c hÆ°á»›ng Ä‘áº¿n má»™t phÃ¢n Ä‘oáº¡n duy nháº¥t, dáº«n Ä‘áº¿n nhiá»u hoáº¡t Ä‘á»™ng truyá»n phÃ¡t trong pháº¡m vi cá»¥m.</p>
<h3>PhÃ¢n Ä‘oáº¡n theo pháº¡m vi</h3>
<p>PhÃ¢n Ä‘oáº¡n theo pháº¡m vi chia dá»¯ liá»‡u thÃ nh nhiá»u pháº¡m vi dá»±a trÃªn giÃ¡ trá»‹ khÃ³a phÃ¢n Ä‘oáº¡n. Sau Ä‘Ã³, má»—i <a href="https://docs.mongodb.com/manual/reference/glossary/#term-chunk" target="_blank" rel="noopener noreferrer">chunk</a> Ä‘Æ°á»£c gÃ¡n má»™t pháº¡m vi dá»±a trÃªn giÃ¡ trá»‹ khÃ³a phÃ¢n Ä‘oáº¡n.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200920213345.svg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>CÃ¡c giÃ¡ trá»‹ khÃ³a phÃ¢n Ä‘oáº¡n tÆ°Æ¡ng Ä‘á»‘i gáº§n nhau cÃ³ kháº£ nÄƒng náº±m trÃªn cÃ¹ng má»™t <a href="https://docs.mongodb.com/manual/reference/glossary/#term-chunk" target="_blank" rel="noopener noreferrer">chunk</a>. Hiá»‡u suáº¥t cá»§a phÃ¢n Ä‘oáº¡n theo pháº¡m vi phá»¥ thuá»™c vÃ o lá»±a chá»n khÃ³a phÃ¢n Ä‘oáº¡n. Lá»±a chá»n khÃ³a phÃ¢n Ä‘oáº¡n khÃ´ng tá»‘t cÃ³ thá»ƒ dáº«n Ä‘áº¿n phÃ¢n phá»‘i dá»¯ liá»‡u khÃ´ng Ä‘á»“ng Ä‘á»u, gÃ¢y suy giáº£m má»™t sá»‘ lá»£i Ã­ch cá»§a phÃ¢n Ä‘oáº¡n hoáº·c gÃ¢y ra háº¡n cháº¿ hiá»‡u suáº¥t.</p>
<h2>VÃ¹ng trong cá»¥m phÃ¢n Ä‘oáº¡n</h2>
<p>VÃ¹ng cÃ³ thá»ƒ cáº£i thiá»‡n tÃ­nh cá»¥c bá»™ cá»§a dá»¯ liá»‡u trong cá»¥m phÃ¢n Ä‘oáº¡n cháº¡y trÃªn nhiá»u trung tÃ¢m dá»¯ liá»‡u.</p>
<p>Trong cá»¥m phÃ¢n Ä‘oáº¡n, cÃ³ thá»ƒ táº¡o ra cÃ¡c <a href="https://docs.mongodb.com/manual/reference/glossary/#term-zone" target="_blank" rel="noopener noreferrer">vÃ¹ng</a> dá»¯ liá»‡u dá»±a trÃªn khÃ³a phÃ¢n Ä‘oáº¡n. Má»—i vÃ¹ng cÃ³ thá»ƒ Ä‘Æ°á»£c liÃªn káº¿t vá»›i má»™t hoáº·c nhiá»u phÃ¢n Ä‘oáº¡n trong cá»¥m. Má»™t phÃ¢n Ä‘oáº¡n cÃ³ thá»ƒ Ä‘Æ°á»£c liÃªn káº¿t vá»›i báº¥t ká»³ sá»‘ lÆ°á»£ng vÃ¹ng nÃ o. Trong cá»¥m cÃ¢n báº±ng, MongoDB chá»‰ di chuyá»ƒn cÃ¡c <a href="https://docs.mongodb.com/manual/reference/glossary/#term-chunk" target="_blank" rel="noopener noreferrer">chunk</a> mÃ  vÃ¹ng bao phá»§ tá»›i phÃ¢n Ä‘oáº¡n liÃªn quan Ä‘áº¿n vÃ¹ng Ä‘Ã³.</p>
<p>Má»—i vÃ¹ng bao phá»§ má»™t hoáº·c nhiá»u pháº¡m vi giÃ¡ trá»‹ khÃ³a phÃ¢n Ä‘oáº¡n. Má»—i pháº¡m vi bao phá»§ luÃ´n bao gá»“m cáº£ giá»›i háº¡n trÃªn vÃ  giá»›i háº¡n dÆ°á»›i cá»§a nÃ³.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200920214854.svg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>Khi xÃ¡c Ä‘á»‹nh cÃ¡c pháº¡m vi má»›i Ä‘á»ƒ bao phá»§ vÃ¹ng, pháº£i sá»­ dá»¥ng cÃ¡c trÆ°á»ng cÃ³ trong khÃ³a phÃ¢n Ä‘oáº¡n. Náº¿u sá»­ dá»¥ng khÃ³a phÃ¢n Ä‘oáº¡n káº¿t há»£p, pháº¡m vi pháº£i bao gá»“m tiá»n tá»‘ cá»§a khÃ³a phÃ¢n Ä‘oáº¡n.</p>
<p>Khi lá»±a chá»n khÃ³a phÃ¢n Ä‘oáº¡n, nÃªn xem xÃ©t cÃ¡c vÃ¹ng cÃ³ thá»ƒ sá»­ dá»¥ng trong tÆ°Æ¡ng lai.</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230724020005.png" type="image/png"/>
    </item>
    <item>
      <title>MongoDB Transaction</title>
      <link>https://vanhung4499.github.io/database/mongodb/transaction.html</link>
      <guid>https://vanhung4499.github.io/database/mongodb/transaction.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MongoDB Transaction</source>
      <description>Giao dá»‹ch trong MongoDB writeConcern cÃ³ thá»ƒ xÃ¡c Ä‘á»‹nh sá»‘ lÆ°á»£ng node cáº§n xÃ¡c nháº­n Ä‘á»ƒ ghi thÃ nh cÃ´ng. Máº·c Ä‘á»‹nh: KhÃ´ng cÃ³ thiáº¿t láº­p nÃ o cho replica set nhiá»u node, do Ä‘Ã³ cÃ³ thá»ƒ máº¥t ...</description>
      <category>mongodb</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<p>writeConcern cÃ³ thá»ƒ xÃ¡c Ä‘á»‹nh sá»‘ lÆ°á»£ng node cáº§n xÃ¡c nháº­n Ä‘á»ƒ ghi thÃ nh cÃ´ng.</p>
<ul>
<li>Máº·c Ä‘á»‹nh: KhÃ´ng cÃ³ thiáº¿t láº­p nÃ o cho replica set nhiá»u node, do Ä‘Ã³ cÃ³ thá»ƒ máº¥t dá»¯ liá»‡u.</li>
<li><code>w: "majority"</code>: ÄÆ°á»£c coi lÃ  ghi thÃ nh cÃ´ng náº¿u háº§u háº¿t cÃ¡c node xÃ¡c nháº­n.</li>
<li><code>w: "all"</code>: Chá»‰ Ä‘Æ°á»£c coi lÃ  ghi thÃ nh cÃ´ng náº¿u táº¥t cáº£ cÃ¡c node xÃ¡c nháº­n.</li>
</ul>
<p>journal xÃ¡c Ä‘á»‹nh cÃ¡ch xem ghi thÃ nh cÃ´ng. CÃ³ cÃ¡c giÃ¡ trá»‹ sau:</p>
<ul>
<li><code>true</code>: Chá»‰ Ä‘Æ°á»£c coi lÃ  ghi thÃ nh cÃ´ng khi hoáº¡t Ä‘á»™ng ghi Ä‘Æ°á»£c lÆ°u vÃ o táº­p tin nháº­t kÃ½ (journal).</li>
<li><code>false</code>: Chá»‰ Ä‘Æ°á»£c coi lÃ  ghi thÃ nh cÃ´ng khi hoáº¡t Ä‘á»™ng ghi Ä‘Æ°á»£c lÆ°u trong bá»™ nhá»›.</li>
</ul>
<p>ã€VÃ­ dá»¥ã€‘Sá»­ dá»¥ng tham sá»‘ writeConcern trong má»™t cá»¥m</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">db</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">transaction</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">insert</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({ </span><span style="color:#E06C75;--shiki-dark:#E06C75">count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }, { </span><span style="color:#E06C75;--shiki-dark:#E06C75">writeConcern</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">w</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'majoriy'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } })</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">db</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">transaction</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">insert</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({ </span><span style="color:#E06C75;--shiki-dark:#E06C75">count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }, { </span><span style="color:#E06C75;--shiki-dark:#E06C75">writeConcern</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">w</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'4'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } })</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">db</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">transaction</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">insert</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({ </span><span style="color:#E06C75;--shiki-dark:#E06C75">count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }, { </span><span style="color:#E06C75;--shiki-dark:#E06C75">writeConcern</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">w</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'all'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } })</span></span></code></pre>
</div><p>ã€VÃ­ dá»¥ã€‘Cáº¥u hÃ¬nh node trá»… Ä‘á»ƒ mÃ´ phá»ng Ä‘á»™ trá»… máº¡ng</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>conf=rs.conf()</span></span>
<span class="line"><span>conf.memebers[2].slaveDelay=5</span></span>
<span class="line"><span>conf.memebers[2].priority=0</span></span>
<span class="line"><span>rs.reconfig(conf)</span></span></code></pre>
</div>]]></content:encoded>
    </item>
    <item>
      <title>MySQL</title>
      <link>https://vanhung4499.github.io/database/mysql/</link>
      <guid>https://vanhung4499.github.io/database/mysql/</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MySQL</source>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
    </item>
    <item>
      <title>MySQL Architecture</title>
      <link>https://vanhung4499.github.io/database/mysql/architecture.html</link>
      <guid>https://vanhung4499.github.io/database/mysql/architecture.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MySQL Architecture</source>
      <description>MySQL Architecture Kiáº¿n trÃºc cÆ¡ báº£n NÃ³i chung, MySQL cÃ³ thá»ƒ Ä‘Æ°á»£c chia thÃ nh hai pháº§n: lá»›p mÃ¡y chá»§ vÃ  lá»›p lÆ°u trá»¯. Lá»›p mÃ¡y chá»§ bao gá»“m cÃ¡c thÃ nh pháº§n nhÆ° káº¿t ná»‘i, bá»™ nhá»› cache tr...</description>
      <category>mysql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Kiáº¿n trÃºc cÆ¡ báº£n</h2>
<p>NÃ³i chung, MySQL cÃ³ thá»ƒ Ä‘Æ°á»£c chia thÃ nh hai pháº§n: lá»›p mÃ¡y chá»§ vÃ  lá»›p lÆ°u trá»¯.</p>
<p><strong>Lá»›p mÃ¡y chá»§</strong> bao gá»“m cÃ¡c thÃ nh pháº§n nhÆ° káº¿t ná»‘i, bá»™ nhá»› cache truy váº¥n, trÃ¬nh phÃ¢n tÃ­ch, trÃ¬nh tá»‘i Æ°u hÃ³a, trÃ¬nh thá»±c thi, vv. NÃ³ bao gá»“m háº§u háº¿t cÃ¡c chá»©c nÄƒng vÃ  dá»‹ch vá»¥ cá»‘t lÃµi cá»§a MySQL, cÅ©ng nhÆ° táº¥t cáº£ cÃ¡c hÃ m tÃ­ch há»£p (nhÆ° hÃ m ngÃ y thÃ¡ng, thá»i gian, toÃ¡n há»c vÃ  mÃ£ hÃ³a), táº¥t cáº£ cÃ¡c chá»©c nÄƒng chung cho táº¥t cáº£ cÃ¡c lÆ°u trá»¯ (nhÆ° thá»§ tá»¥c lÆ°u trá»¯, trigger, view, vv).</p>
<p><strong>Lá»›p lÆ°u trá»¯</strong> chá»‹u trÃ¡ch nhiá»‡m lÆ°u trá»¯ vÃ  truy xuáº¥t dá»¯ liá»‡u. Kiáº¿n trÃºc cá»§a nÃ³ lÃ  má»™t kiáº¿n trÃºc cáº¯m, há»— trá»£ nhiá»u lÆ°u trá»¯ nhÆ° InnoDB, MyISAM, Memory, vv. Hiá»‡n nay, lÆ°u trá»¯ phá»• biáº¿n nháº¥t lÃ  InnoDB, nÃ³ Ä‘Ã£ trá»Ÿ thÃ nh lÆ°u trá»¯ máº·c Ä‘á»‹nh tá»« phiÃªn báº£n MySQL 5.5.5 trá»Ÿ Ä‘i.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/mysql-workflow.drawio.png" alt="mysql-workflow" tabindex="0" loading="lazy"><figcaption>mysql-workflow</figcaption></figure>
<h2>QuÃ¡ trÃ¬nh truy váº¥n</h2>
<p>CÃ¢u lá»‡nh SQL Ä‘Æ°á»£c thá»±c hiá»‡n nhÆ° tháº¿ nÃ o trong MySQL?</p>
<p>QuÃ¡ trÃ¬nh thá»±c hiá»‡n truy váº¥n MySQL tá»•ng cá»™ng cÃ³ 6 bÆ°á»›c, tÆ°Æ¡ng á»©ng vá»›i 6 thÃ nh pháº§n:</p>
<ol>
<li>Káº¿t ná»‘i: Káº¿t ná»‘i giá»¯a mÃ¡y khÃ¡ch vÃ  mÃ¡y chá»§ MySQL; Káº¿t ná»‘i chá»‹u trÃ¡ch nhiá»‡m thiáº¿t láº­p káº¿t ná»‘i vá»›i mÃ¡y khÃ¡ch, xÃ¡c Ä‘á»‹nh quyá»n truy cáº­p vÃ  duy trÃ¬ quáº£n lÃ½ káº¿t ná»‘i.</li>
<li>MySQL kiá»ƒm tra bá»™ nhá»› cache truy váº¥n trÆ°á»›c tiÃªn. Náº¿u truy váº¥n Ä‘Æ°á»£c lÆ°u trong bá»™ nhá»› cache, káº¿t quáº£ sáº½ Ä‘Æ°á»£c tráº£ vá» ngay láº­p tá»©c. Náº¿u khÃ´ng, chuyá»ƒn sang bÆ°á»›c tiáº¿p theo.</li>
<li>MÃ¡y chá»§ MySQL thá»±c hiá»‡n phÃ¢n tÃ­ch SQL: phÃ¢n tÃ­ch cÃº phÃ¡p, phÃ¢n tÃ­ch tá»« vá»±ng.</li>
<li>MÃ¡y chá»§ MySQL sá»­ dá»¥ng trÃ¬nh tá»‘i Æ°u hÃ³a Ä‘á»ƒ táº¡o ra káº¿ hoáº¡ch thá»±c thi tÆ°Æ¡ng á»©ng.</li>
<li>MÃ¡y chá»§ MySQL gá»i API lÆ°u trá»¯ Ä‘á»ƒ thá»±c hiá»‡n truy váº¥n dá»±a trÃªn káº¿ hoáº¡ch thá»±c hiá»‡n.</li>
<li>MÃ¡y chá»§ MySQL tráº£ káº¿t quáº£ cho mÃ¡y khÃ¡ch, Ä‘á»“ng thá»i lÆ°u káº¿t quáº£ truy váº¥n vÃ o bá»™ nhá»› cache.</li>
</ol>
<h3>(1) Káº¿t ná»‘i</h3>
<p>BÆ°á»›c Ä‘áº§u tiÃªn khi sá»­ dá»¥ng MySQL lÃ  káº¿t ná»‘i vÃ o cÆ¡ sá»Ÿ dá»¯ liá»‡u. <strong>Káº¿t ná»‘i chá»‹u trÃ¡ch nhiá»‡m thiáº¿t láº­p káº¿t ná»‘i vá»›i mÃ¡y chá»§ MySQL, xÃ¡c Ä‘á»‹nh quyá»n truy cáº­p vÃ  duy trÃ¬ quáº£n lÃ½ káº¿t ná»‘i</strong>.</p>
<p>Giao tiáº¿p giá»¯a mÃ¡y khÃ¡ch vÃ  mÃ¡y chá»§ MySQL lÃ  má»™t cháº¿ Ä‘á»™ bÃ¡n song cÃ´ng: vÃ o báº¥t ká»³ thá»i Ä‘iá»ƒm nÃ o, mÃ¡y chá»§ cÃ³ thá»ƒ gá»­i dá»¯ liá»‡u cho mÃ¡y khÃ¡ch hoáº·c mÃ¡y khÃ¡ch cÃ³ thá»ƒ gá»­i dá»¯ liá»‡u cho mÃ¡y chá»§. MÃ¡y khÃ¡ch gá»­i má»™t gÃ³i dá»¯ liá»‡u duy nháº¥t chá»©a yÃªu cáº§u truy váº¥n cho mÃ¡y chá»§, vÃ¬ váº­y náº¿u cÃ¢u lá»‡nh truy váº¥n dÃ i, báº¡n cáº§n thiáº¿t láº­p tham sá»‘ <code>max_allowed_packet</code>. Tuy nhiÃªn, náº¿u cÃ¢u lá»‡nh truy váº¥n quÃ¡ lá»›n, mÃ¡y chá»§ sáº½ tá»« chá»‘i nháº­n thÃªm dá»¯ liá»‡u vÃ  nÃ©m ra má»™t ngoáº¡i lá»‡.</p>
<p>Lá»‡nh káº¿t ná»‘i MySQL cá»§a khÃ¡ch hÃ ng: <code>mysql -h&lt;host&gt; -P&lt;port&gt; -u&lt;username&gt; -p&lt;password&gt;</code>. Náº¿u khÃ´ng chá»‰ Ä‘á»‹nh máº­t kháº©u, báº¡n sáº½ Ä‘Æ°á»£c yÃªu cáº§u nháº­p máº­t kháº©u trÆ°á»›c khi truy cáº­p.</p>
<p>Sau khi thiáº¿t láº­p káº¿t ná»‘i, náº¿u khÃ´ng cÃ³ hoáº¡t Ä‘á»™ng tiáº¿p theo, káº¿t ná»‘i sáº½ á»Ÿ tráº¡ng thÃ¡i khÃ´ng hoáº¡t Ä‘á»™ng vÃ  báº¡n cÃ³ thá»ƒ tháº¥y nÃ³ trong lá»‡nh <code>show processlist</code>. Náº¿u khÃ¡ch hÃ ng khÃ´ng hoáº¡t Ä‘á»™ng trong thá»i gian quÃ¡ lÃ¢u, káº¿t ná»‘i sáº½ tá»± Ä‘á»™ng bá»‹ Ä‘Ã³ng. Thá»i gian duy trÃ¬ káº¿t ná»‘i cá»§a khÃ¡ch hÃ ng Ä‘Æ°á»£c Ä‘iá»u chá»‰nh báº±ng tham sá»‘ <code>wait_timeout</code>, giÃ¡ trá»‹ máº·c Ä‘á»‹nh lÃ  8 giá». Náº¿u káº¿t ná»‘i bá»‹ Ä‘Ã³ng vÃ  khÃ¡ch hÃ ng gá»­i yÃªu cáº§u truy váº¥n, báº¡n sáº½ nháº­n Ä‘Æ°á»£c thÃ´ng bÃ¡o lá»—i "Lost connection to MySQL server during query". Trong trÆ°á»ng há»£p nÃ y, báº¡n cáº§n pháº£i káº¿t ná»‘i láº¡i vÃ  thá»±c hiá»‡n yÃªu cáº§u truy váº¥n.</p>
<p>QuÃ¡ trÃ¬nh thiáº¿t láº­p káº¿t ná»‘i thÆ°á»ng lÃ  phá»©c táº¡p, do Ä‘Ã³, khuyáº¿n nghá»‹ giáº£m thiá»ƒu sá»‘ láº§n thiáº¿t láº­p káº¿t ná»‘i trong quÃ¡ trÃ¬nh sá»­ dá»¥ng vÃ  sá»­ dá»¥ng káº¿t ná»‘i dÃ i hÆ¡n. Äá»ƒ tÄƒng cÆ°á»ng viá»‡c tÃ¡i sá»­ dá»¥ng káº¿t ná»‘i cÆ¡ sá»Ÿ dá»¯ liá»‡u trong chÆ°Æ¡ng trÃ¬nh, thÆ°á»ng sá»­ dá»¥ng bá»ƒ káº¿t ná»‘i cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘á»ƒ quáº£n lÃ½ vÃ  duy trÃ¬.</p>
<p>Tuy nhiÃªn, náº¿u chá»‰ sá»­ dá»¥ng káº¿t ná»‘i dÃ i hÆ¡n, báº¡n cÃ³ thá»ƒ nháº­n tháº¥y ráº±ng MySQL sá»­ dá»¥ng bá»™ nhá»› nhanh hÆ¡n. Äiá»u nÃ y lÃ  do MySQL sá»­ dá»¥ng bá»™ nhá»› táº¡m thá»i trong quÃ¡ trÃ¬nh thá»±c thi vÃ  giá»¯ tÃ i nguyÃªn káº¿t ná»‘i. Nhá»¯ng tÃ i nguyÃªn nÃ y chá»‰ Ä‘Æ°á»£c giáº£i phÃ³ng khi káº¿t ná»‘i bá»‹ Ä‘Ã³ng. Do Ä‘Ã³, náº¿u tÃ­ch lÅ©y káº¿t ná»‘i dÃ i hÆ¡n, cÃ³ thá»ƒ dáº«n Ä‘áº¿n sá»± sá»­ dá»¥ng bá»™ nhá»› quÃ¡ lá»›n vÃ  bá»‹ há»‡ thá»‘ng giáº¿t (OOM). Khi xáº£y ra hiá»‡n tÆ°á»£ng nÃ y, MySQL sáº½ khá»Ÿi Ä‘á»™ng láº¡i má»™t cÃ¡ch báº¥t thÆ°á»ng.</p>
<p>LÃ m tháº¿ nÃ o Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y? Báº¡n cÃ³ thá»ƒ xem xÃ©t hai giáº£i phÃ¡p sau Ä‘Ã¢y.</p>
<ul>
<li><strong>ÄÃ³ng káº¿t ná»‘i dÃ i hÆ¡n Ä‘á»‹nh ká»³</strong>: Sá»­ dá»¥ng má»™t khoáº£ng thá»i gian hoáº·c kiá»ƒm tra trong chÆ°Æ¡ng trÃ¬nh, sau khi thá»±c hiá»‡n má»™t hoáº¡t Ä‘á»™ng chiáº¿m nhiá»u bá»™ nhá»›, Ä‘Ã³ng káº¿t ná»‘i vÃ  sau Ä‘Ã³ thá»±c hiá»‡n káº¿t ná»‘i láº¡i khi cáº§n truy váº¥n.</li>
<li>Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng phiÃªn báº£n MySQL 5.7 trá»Ÿ lÃªn, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng <code>mysql_reset_connection</code> Ä‘á»ƒ khá»Ÿi táº¡o láº¡i tÃ i nguyÃªn káº¿t ná»‘i sau má»—i hoáº¡t Ä‘á»™ng lá»›n. QuÃ¡ trÃ¬nh nÃ y khÃ´ng cáº§n pháº£i káº¿t ná»‘i láº¡i vÃ  xÃ¡c thá»±c quyá»n, nhÆ°ng sáº½ khÃ´i phá»¥c káº¿t ná»‘i vá» tráº¡ng thÃ¡i ban Ä‘áº§u khi táº¡o ra.</li>
</ul>
<h3>(2) Bá»™ nhá»› cache truy váº¥n</h3>
<blockquote>
<p><strong>KhÃ´ng khuyáº¿n nghá»‹ sá»­ dá»¥ng bá»™ nhá»› cache truy váº¥n, vÃ¬ thÆ°á»ng cÃ³ nhiá»u háº¡i hÆ¡n lá»£i Ã­ch</strong>.</p>
</blockquote>
<p>TrÆ°á»›c khi phÃ¢n tÃ­ch má»™t cÃ¢u lá»‡nh truy váº¥n, náº¿u bá»™ nhá»› cache truy váº¥n Ä‘Æ°á»£c báº­t, MySQL sáº½ kiá»ƒm tra xem cÃ¢u lá»‡nh truy váº¥n nÃ y cÃ³ trÃºng káº¿t quáº£ trong bá»™ nhá»› cache khÃ´ng. Náº¿u truy váº¥n hiá»‡n táº¡i trÃ¹ng khá»›p vá»›i dá»¯ liá»‡u trong bá»™ nhá»› cache, sau khi kiá»ƒm tra quyá»n cá»§a ngÆ°á»i dÃ¹ng, káº¿t quáº£ sáº½ Ä‘Æ°á»£c tráº£ vá» trá»±c tiáº¿p tá»« bá»™ nhá»› cache. Trong trÆ°á»ng há»£p nÃ y, truy váº¥n khÃ´ng Ä‘Æ°á»£c phÃ¢n tÃ­ch, khÃ´ng táº¡o káº¿ hoáº¡ch thá»±c hiá»‡n, vÃ  khÃ´ng thá»±c hiá»‡n.</p>
<p>MySQL lÆ°u trá»¯ bá»™ nhá»› cache trong má»™t báº£ng tham chiáº¿u (Ä‘á»«ng hiá»ƒu nháº§m lÃ  <code>table</code>, cÃ³ thá»ƒ coi nÃ³ lÃ  má»™t cáº¥u trÃºc dá»¯ liá»‡u giá»‘ng <code>HashMap</code>), Ä‘Æ°á»£c chá»‰ má»¥c báº±ng má»™t giÃ¡ trá»‹ bÄƒm Ä‘Æ°á»£c tÃ­nh toÃ¡n tá»« cÃ¡c yáº¿u tá»‘ cÃ³ thá»ƒ áº£nh hÆ°á»Ÿng Ä‘áº¿n káº¿t quáº£ truy váº¥n, bao gá»“m truy váº¥n hiá»‡n táº¡i, cÆ¡ sá»Ÿ dá»¯ liá»‡u hiá»‡n táº¡i vÃ  sá»‘ phiÃªn báº£n giao thá»©c khÃ¡ch hÃ ng. VÃ¬ váº­y, báº¥t ká»³ sá»± khÃ¡c biá»‡t nÃ o trong cÃ¡c kÃ½ tá»± (vÃ­ dá»¥: khoáº£ng tráº¯ng, chÃº thÃ­ch) cÅ©ng sáº½ khiáº¿n bá»™ nhá»› cache khÃ´ng trÃ¹ng khá»›p.</p>
<p><strong>Náº¿u truy váº¥n chá»©a báº¥t ká»³ hÃ m ngÆ°á»i dÃ¹ng, hÃ m lÆ°u trá»¯, biáº¿n ngÆ°á»i dÃ¹ng, báº£ng táº¡m thá»i hoáº·c báº£ng há»‡ thá»‘ng trong cÆ¡ sá»Ÿ dá»¯ liá»‡u mysql, káº¿t quáº£ truy váº¥n sáº½ khÃ´ng Ä‘Æ°á»£c lÆ°u vÃ o bá»™ nhá»› cache</strong>. VÃ­ dá»¥, cÃ¡c hÃ m <code>NOW()</code> hoáº·c <code>CURRENT_DATE()</code> sáº½ tráº£ vá» káº¿t quáº£ khÃ¡c nhau dá»±a trÃªn thá»i gian truy váº¥n, vÃ  cÃ¡c truy váº¥n chá»©a <code>CURRENT_USER</code> hoáº·c <code>CONNECTION_ID()</code> sáº½ tráº£ vá» káº¿t quáº£ khÃ¡c nhau dá»±a trÃªn ngÆ°á»i dÃ¹ng, viá»‡c lÆ°u káº¿t quáº£ truy váº¥n nhÆ° váº­y khÃ´ng cÃ³ Ã½ nghÄ©a.</p>
<p><strong>KhÃ´ng khuyáº¿n nghá»‹ sá»­ dá»¥ng bá»™ nhá»› cache truy váº¥n, vÃ¬ thÆ°á»ng cÃ³ nhiá»u háº¡i hÆ¡n lá»£i Ã­ch</strong>. Tá»· lá»‡ trÃºng káº¿t quáº£ cá»§a bá»™ nhá»› cache truy váº¥n thÆ°á»ng ráº¥t tháº¥p, chá»‰ cáº§n cÃ³ báº¥t ká»³ cáº­p nháº­t nÃ o trÃªn má»™t báº£ng, táº¥t cáº£ cÃ¡c bá»™ nhá»› cache truy váº¥n cá»§a báº£ng Ä‘Ã³ sáº½ bá»‹ xÃ³a. Do Ä‘Ã³, kháº£ nÄƒng trÃºng káº¿t quáº£ cá»§a bá»™ nhá»› cache truy váº¥n trong cÆ¡ sá»Ÿ dá»¯ liá»‡u cÃ³ Ã¡p lá»±c cáº­p nháº­t lá»›n sáº½ ráº¥t tháº¥p. Trá»« khi báº¡n cÃ³ má»™t báº£ng tÄ©nh vÃ  chá»‰ cáº§n cáº­p nháº­t má»™t láº§n trong thá»i gian dÃ i. VÃ­ dá»¥, má»™t báº£ng cáº¥u hÃ¬nh há»‡ thá»‘ng, trong trÆ°á»ng há»£p nÃ y, truy váº¥n trÃªn báº£ng nÃ y sáº½ phÃ¹ há»£p vá»›i viá»‡c sá»­ dá»¥ng bá»™ nhá»› cache truy váº¥n.</p>
<p>May máº¯n thay, MySQL cÅ©ng cung cáº¥p cÃ¡ch "sá»­ dá»¥ng theo yÃªu cáº§u". Báº¡n cÃ³ thá»ƒ Ä‘áº·t tham sá»‘ <code>query_cache_type</code> thÃ nh <code>DEMAND</code>, Ä‘iá»u nÃ y sáº½ khÃ´ng sá»­ dá»¥ng bá»™ nhá»› cache truy váº¥n cho cÃ¡c cÃ¢u lá»‡nh SQL máº·c Ä‘á»‹nh. Äá»‘i vá»›i cÃ¡c cÃ¢u lá»‡nh SQL mÃ  báº¡n muá»‘n sá»­ dá»¥ng bá»™ nhá»› cache truy váº¥n, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng <code>SQL_CACHE</code> Ä‘á»ƒ chá»‰ Ä‘á»‹nh, giá»‘ng nhÆ° cÃ¢u lá»‡nh dÆ°á»›i Ä‘Ã¢y:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> SQL_CACHE * </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> T </span><span style="color:#C678DD;--shiki-dark:#C678DD">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ID</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><blockquote>
<p>LÆ°u Ã½: PhiÃªn báº£n MySQL 8.0 Ä‘Ã£ loáº¡i bá» hoÃ n toÃ n chá»©c nÄƒng bá»™ nhá»› cache truy váº¥n.</p>
</blockquote>
<h3>(3) PhÃ¢n tÃ­ch cÃº phÃ¡p</h3>
<p>Náº¿u khÃ´ng trÃºng káº¿t quáº£ bá»™ nhá»› cache truy váº¥n, quÃ¡ trÃ¬nh thá»±c thi cÃ¢u lá»‡nh sáº½ báº¯t Ä‘áº§u. TrÆ°á»›c tiÃªn, MySQL cáº§n biáº¿t báº¡n muá»‘n lÃ m gÃ¬, vÃ¬ váº­y nÃ³ cáº§n phÃ¢n tÃ­ch cÃ¢u lá»‡nh SQL. MySQL sá»­ dá»¥ng tá»« khÃ³a Ä‘á»ƒ phÃ¢n tÃ­ch cÃ¢u lá»‡nh SQL vÃ  táº¡o ra má»™t cÃ¢y phÃ¢n tÃ­ch cÃº phÃ¡p tÆ°Æ¡ng á»©ng. Trong quÃ¡ trÃ¬nh nÃ y, trÃ¬nh phÃ¢n tÃ­ch sá»­ dá»¥ng cÃ¡c quy táº¯c cÃº phÃ¡p Ä‘á»ƒ xÃ¡c minh vÃ  phÃ¢n tÃ­ch cÃ¢y phÃ¢n tÃ­ch cÃº phÃ¡p cá»§a báº¡n. VÃ­ dá»¥, trÃ¬nh phÃ¢n tÃ­ch sáº½ nháº­n ra tá»« khÃ³a "select" báº¡n nháº­p vÃ  xÃ¡c Ä‘á»‹nh Ä‘Ã¢y lÃ  má»™t cÃ¢u lá»‡nh truy váº¥n. NÃ³ cÅ©ng sáº½ nháº­n ra chuá»—i "T" lÃ  "tÃªn báº£ng T" vÃ  chuá»—i "ID" lÃ  "cá»™t ID".</p>
<ul>
<li>TrÃ¬nh phÃ¢n tÃ­ch Ä‘áº§u tiÃªn thá»±c hiá»‡n "phÃ¢n tÃ­ch tá»« vá»±ng". Báº¡n nháº­p vÃ o má»™t cÃ¢u lá»‡nh SQL gá»“m nhiá»u chuá»—i vÃ  dáº¥u cÃ¡ch, MySQL cáº§n xÃ¡c Ä‘á»‹nh cÃ¡c chuá»—i Ä‘Ã³ Ä‘áº¡i diá»‡n cho cÃ¡i gÃ¬. MySQL nháº­n ra tá»« khÃ³a "select" tá»« báº¡n nháº­p vÃ o, Ä‘Ã³ lÃ  má»™t cÃ¢u lá»‡nh truy váº¥n. NÃ³ cÅ©ng nháº­n ra chuá»—i "T" lÃ  "tÃªn báº£ng T" vÃ  chuá»—i "ID" lÃ  "cá»™t ID".</li>
<li>Tiáº¿p theo, thá»±c hiá»‡n "phÃ¢n tÃ­ch cÃº phÃ¡p". Dá»±a trÃªn káº¿t quáº£ phÃ¢n tÃ­ch tá»« vá»±ng, trÃ¬nh phÃ¢n tÃ­ch cÃº phÃ¡p sáº½ xÃ¡c Ä‘á»‹nh xem cÃ¢u lá»‡nh SQL báº¡n nháº­p cÃ³ Ä‘Ã¡p á»©ng cÃº phÃ¡p cá»§a MySQL khÃ´ng. Náº¿u cÃ¢u lá»‡nh cá»§a báº¡n khÃ´ng Ä‘Ãºng, báº¡n sáº½ nháº­n Ä‘Æ°á»£c thÃ´ng bÃ¡o lá»—i "You have an error in your SQL syntax", vÃ­ dá»¥ nhÆ° cÃ¢u lá»‡nh select bá»‹ thiáº¿u chá»¯ cÃ¡i "s".</li>
</ul>
<h3>(4) Tá»‘i Æ°u hÃ³a truy váº¥n</h3>
<p>Sau khi hoÃ n thÃ nh phÃ¢n tÃ­ch vÃ  xÃ¡c Ä‘á»‹nh cÃ¢u lá»‡nh SQL, MySQL sáº½ tiáº¿n hÃ nh tá»‘i Æ°u hÃ³a truy váº¥n.</p>
<p>Sau khi hoÃ n thÃ nh phÃ¢n tÃ­ch vÃ  xÃ¡c Ä‘á»‹nh cÃ¢y phÃ¢n tÃ­ch cÃº phÃ¡p, MySQL sáº½ chuyá»ƒn Ä‘á»•i nÃ³ thÃ nh káº¿ hoáº¡ch thá»±c hiá»‡n tÆ°Æ¡ng á»©ng. Trong háº§u háº¿t cÃ¡c trÆ°á»ng há»£p, má»™t truy váº¥n cÃ³ thá»ƒ cÃ³ nhiá»u cÃ¡ch thá»±c hiá»‡n, nhÆ°ng káº¿t quáº£ cuá»‘i cÃ¹ng váº«n lÃ  cÃ¹ng má»™t. Nhiá»‡m vá»¥ cá»§a trÃ¬nh tá»‘i Æ°u hÃ³a lÃ  tÃ¬m ra káº¿ hoáº¡ch thá»±c hiá»‡n tá»‘t nháº¥t trong sá»‘ Ä‘Ã³.</p>
<p>MySQL sá»­ dá»¥ng trÃ¬nh tá»‘i Æ°u hÃ³a dá»±a trÃªn chi phÃ­, nÃ³ cá»‘ gáº¯ng dá»± Ä‘oÃ¡n chi phÃ­ cá»§a má»™t truy váº¥n khi sá»­ dá»¥ng má»™t káº¿ hoáº¡ch thá»±c hiá»‡n cá»¥ thá»ƒ vÃ  chá»n káº¿ hoáº¡ch cÃ³ chi phÃ­ nhá» nháº¥t. Trong MySQL, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng giÃ¡ trá»‹ <code>last_query_cost</code> cá»§a phiÃªn truy váº¥n hiá»‡n táº¡i Ä‘á»ƒ tÃ­nh toÃ¡n chi phÃ­ truy váº¥n hiá»‡n táº¡i.</p>
<div class="language-ruby" data-ext="ruby" data-title="ruby"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> select</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> *</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> from t_message limit </span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">...</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Omit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> result set</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> show status like </span><span style="color:#98C379;--shiki-dark:#98C379">'last_query_cost'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span></span></code></pre>
</div>]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/mysql-workflow.drawio.png" type="image/png"/>
    </item>
    <item>
      <title>MySQL Configuration</title>
      <link>https://vanhung4499.github.io/database/mysql/configuration.html</link>
      <guid>https://vanhung4499.github.io/database/mysql/configuration.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MySQL Configuration</source>
      <description>Cáº¥u hÃ¬nh MySQL PhiÃªn báº£n: mysql Cáº¥u hÃ¬nh cÆ¡ báº£n Giáº£i thÃ­ch cÃ¡c cáº¥u hÃ¬nh</description>
      <category>mysql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>PhiÃªn báº£n: <img src="https://img.shields.io/badge/mysql-8.0-blue" alt="mysql" loading="lazy"></p>
</blockquote>
<h2>Cáº¥u hÃ¬nh cÆ¡ báº£n</h2>
<div class="language-ini" data-ext="ini" data-title="ini"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">[mysqld]</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># GENERAL</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">#</span></span></code></pre>
</div>]]></content:encoded>
      <enclosure url="https://img.shields.io/badge/mysql-8.0-blue" type="image/"/>
    </item>
    <item>
      <title>MySQL Storage Engine</title>
      <link>https://vanhung4499.github.io/database/mysql/engine.html</link>
      <guid>https://vanhung4499.github.io/database/mysql/engine.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MySQL Storage Engine</source>
      <description>MySQL Storage Engine CÃ¡c storage engine trong MySQL Trong há»‡ thá»‘ng tá»‡p, MySQL lÆ°u má»—i cÆ¡ sá»Ÿ dá»¯ liá»‡u (cÅ©ng cÃ³ thá»ƒ gá»i lÃ  schema) dÆ°á»›i dáº¡ng má»™t thÆ° má»¥c con trong thÆ° má»¥c dá»¯ liá»‡u. ...</description>
      <category>mysql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>CÃ¡c storage engine trong MySQL</h2>
<p>Trong há»‡ thá»‘ng tá»‡p, MySQL lÆ°u má»—i cÆ¡ sá»Ÿ dá»¯ liá»‡u (cÅ©ng cÃ³ thá»ƒ gá»i lÃ  schema) dÆ°á»›i dáº¡ng má»™t thÆ° má»¥c con trong thÆ° má»¥c dá»¯ liá»‡u. Khi táº¡o báº£ng, MySQL sáº½ táº¡o má»™t tá»‡p <code>.frm</code> cÃ¹ng tÃªn vá»›i báº£ng trong thÆ° má»¥c cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘á»ƒ lÆ°u Ä‘á»‹nh nghÄ©a cá»§a báº£ng. VÃ¬ MySQL sá»­ dá»¥ng cÃ¡c thÆ° má»¥c vÃ  tá»‡p há»‡ thá»‘ng tá»‡p Ä‘á»ƒ lÆ°u Ä‘á»‹nh nghÄ©a cÆ¡ sá»Ÿ dá»¯ liá»‡u vÃ  báº£ng, tÃ­nh nháº¡y cáº£m chá»¯ hoa chá»¯ thÆ°á»ng phá»¥ thuá»™c vÃ o ná»n táº£ng cá»¥ thá»ƒ. Trong Windows, tÃ­nh nháº¡y cáº£m chá»¯ hoa chá»¯ thÆ°á»ng khÃ´ng Ä‘Æ°á»£c Ã¡p dá»¥ng; trong cÃ¡c há»‡ thá»‘ng tÆ°Æ¡ng tá»± Unix, tÃ­nh nháº¡y cáº£m chá»¯ hoa chá»¯ thÆ°á»ng Ä‘Æ°á»£c Ã¡p dá»¥ng. <strong>CÃ¡c storage engine khÃ¡c nhau lÆ°u trá»¯ dá»¯ liá»‡u vÃ  chá»‰ má»¥c theo cÃ¡ch khÃ¡c nhau, nhÆ°ng Ä‘á»‹nh nghÄ©a báº£ng thÃ¬ Ä‘Æ°á»£c xá»­ lÃ½ thá»‘ng nháº¥t á»Ÿ táº§ng dá»‹ch vá»¥ cá»§a MySQL.</strong></p>
<p>MySQL sá»­ dá»¥ng cÃ¡c storage engine dÆ°á»›i dáº¡ng plugin, má»—i storage engine nháº¯m Ä‘áº¿n má»™t mÃ´i trÆ°á»ng á»©ng dá»¥ng cÆ¡ sá»Ÿ dá»¯ liá»‡u cá»¥ thá»ƒ. Äá»“ng thá»i, MySQL mÃ£ nguá»“n má»Ÿ cÃ²n cho phÃ©p cÃ¡c nhÃ  phÃ¡t triá»ƒn thiáº¿t láº­p cÃ¡c storage engine riÃªng cá»§a há». DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ storage engine phá»• biáº¿n:</p>
<ul>
<li>storage engine InnoDB: ÄÃ¢y lÃ  storage engine máº·c Ä‘á»‹nh tá»« phiÃªn báº£n MySQL 5.5 trá»Ÿ Ä‘i, vá»›i Ä‘áº·c Ä‘iá»ƒm lá»›n nháº¥t lÃ  há»— trá»£ giao dá»‹ch, khÃ³a cáº¥p hÃ ng, vÃ  rÃ ng buá»™c khÃ³a ngoáº¡i.</li>
<li>storage engine MyISAM: LÃ  storage engine máº·c Ä‘á»‹nh trÆ°á»›c phiÃªn báº£n MySQL 5.5, khÃ´ng há»— trá»£ giao dá»‹ch, cÅ©ng khÃ´ng há»— trá»£ khÃ³a ngoáº¡i, nhÆ°ng cÃ³ Ä‘áº·c Ä‘iá»ƒm lá»›n nháº¥t lÃ  tá»‘c Ä‘á»™ nhanh vÃ  chiáº¿m Ã­t tÃ i nguyÃªn.</li>
<li>storage engine Memory: Sá»­ dá»¥ng bá»™ nhá»› há»‡ thá»‘ng lÃ m phÆ°Æ¡ng tiá»‡n lÆ°u trá»¯ Ä‘á»ƒ cÃ³ Ä‘Æ°á»£c tá»‘c Ä‘á»™ pháº£n há»“i nhanh hÆ¡n. Tuy nhiÃªn, náº¿u quÃ¡ trÃ¬nh mysqld bá»‹ sáº­p, táº¥t cáº£ dá»¯ liá»‡u sáº½ bá»‹ máº¥t, do Ä‘Ã³ chá»‰ nÃªn sá»­ dá»¥ng storage engine Memory khi dá»¯ liá»‡u lÃ  táº¡m thá»i.</li>
<li>storage engine NDB: CÃ²n Ä‘Æ°á»£c gá»i lÃ  storage engine NDB Cluster, chá»§ yáº¿u Ä‘Æ°á»£c sá»­ dá»¥ng cho mÃ´i trÆ°á»ng cá»¥m phÃ¢n tÃ¡n MySQL Cluster, tÆ°Æ¡ng tá»± nhÆ° cá»¥m RAC cá»§a Oracle.</li>
<li>storage engine Archive: CÃ³ cÆ¡ cháº¿ nÃ©n tá»‘t, dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ tá»‡p. Khi yÃªu cáº§u ghi dá»¯ liá»‡u, sáº½ thá»±c hiá»‡n nÃ©n, do Ä‘Ã³ thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ lÃ m kho lÆ°u trá»¯.</li>
</ul>
<h2>CÃ¡c thao tÃ¡c liÃªn quan Ä‘áº¿n storage engine</h2>
<h3>Lá»‡nh show storage engine</h3>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"># Xem cÃ¡c storage engine Ä‘Æ°á»£c há»— trá»£</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">SHOW ENGINES;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"># Xem storage engine máº·c Ä‘á»‹nh</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">SHOW VARIABLES </span><span style="color:#C678DD;--shiki-dark:#C678DD">LIKE</span><span style="color:#98C379;--shiki-dark:#98C379"> 'storage_engine'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"># Xem storage engine cá»§a má»™t báº£ng cá»¥ thá»ƒ</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">SHOW </span><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TABLE</span><span style="color:#98C379;--shiki-dark:#98C379"> `table_name`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"># Xem storage engine cá»§a má»™t báº£ng cá»¥ thá»ƒ trong má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">SHOW </span><span style="color:#C678DD;--shiki-dark:#C678DD">TABLE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> STATUS</span><span style="color:#C678DD;--shiki-dark:#C678DD"> LIKE</span><span style="color:#98C379;--shiki-dark:#98C379"> 'table_name'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">SHOW </span><span style="color:#C678DD;--shiki-dark:#C678DD">TABLE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> STATUS</span><span style="color:#C678DD;--shiki-dark:#C678DD"> FROM</span><span style="color:#98C379;--shiki-dark:#98C379"> `database_name`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> WHERE</span><span style="color:#98C379;--shiki-dark:#98C379"> `name`</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "table_name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><h2>CÃ¡c lá»‡nh thiáº¿t láº­p storage engine</h2>
<h3>Lá»‡nh táº¡o vÃ  thay Ä‘á»•i storage engine</h3>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"># Chá»‰ Ä‘á»‹nh storage engine khi táº¡o báº£ng, náº¿u khÃ´ng chá»‰ Ä‘á»‹nh rÃµ, máº·c Ä‘á»‹nh lÃ  INNODB</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> t1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (i </span><span style="color:#C678DD;--shiki-dark:#C678DD">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) ENGINE </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> INNODB;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> t2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (i </span><span style="color:#C678DD;--shiki-dark:#C678DD">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) ENGINE </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> CSV;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> t3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (i </span><span style="color:#C678DD;--shiki-dark:#C678DD">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) ENGINE </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> MEMORY;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"># Thay Ä‘á»•i storage engine</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> t ENGINE </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> InnoDB;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"># Thay Ä‘á»•i storage engine máº·c Ä‘á»‹nh, cÅ©ng cÃ³ thá»ƒ thay Ä‘á»•i trong tá»‡p cáº¥u hÃ¬nh </span><span style="color:#D19A66;--shiki-dark:#D19A66">my</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#D19A66;--shiki-dark:#D19A66">cnf</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> default_storage_engine</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">NDBCLUSTER;</span></span></code></pre>
</div><p>Máº·c Ä‘á»‹nh, má»—i khi <code>CREATE TABLE</code> hoáº·c <code>ALTER TABLE</code> khÃ´ng thá»ƒ sá»­ dá»¥ng storage engine máº·c Ä‘á»‹nh, sáº½ táº¡o ra má»™t cáº£nh bÃ¡o. Äá»ƒ ngÄƒn cháº·n hÃ nh vi gÃ¢y nháº§m láº«n khi storage engine yÃªu cáº§u khÃ´ng kháº£ dá»¥ng, cÃ³ thá»ƒ kÃ­ch hoáº¡t cháº¿ Ä‘á»™ <code>NO_ENGINE_SUBSTITUTION SQL</code>. Náº¿u bá»™ mÃ¡y yÃªu cáº§u khÃ´ng kháº£ dá»¥ng, thiáº¿t láº­p nÃ y sáº½ táº¡o ra lá»—i thay vÃ¬ cáº£nh bÃ¡o vÃ  sáº½ khÃ´ng táº¡o hoáº·c thay Ä‘á»•i báº£ng.</p>
<h2>Giá»›i thiá»‡u vá» cÃ¡c storage engine MySQL</h2>
<h3>CÃ¡c storage engine tÃ­ch há»£p trong MySQL</h3>
<ul>
<li><strong>InnoDB</strong> - InnoDB lÃ  storage engine máº·c Ä‘á»‹nh tá»« phiÃªn báº£n MySQL 5.5 trá»Ÿ Ä‘i. NÃ³ cung cáº¥p khÃ³a cáº¥p hÃ ng vÃ  rÃ ng buá»™c khÃ³a ngoáº¡i. Hiá»‡u suáº¥t tá»‘t vÃ  há»— trá»£ tá»± Ä‘á»™ng phá»¥c há»“i sau khi gáº·p sá»± cá»‘.</li>
<li><strong>MyISAM</strong> - TrÆ°á»›c phiÃªn báº£n MySQL 5.5, MyISAM lÃ  storage engine máº·c Ä‘á»‹nh. NÃ³ cÃ³ nhiá»u tÃ­nh nÄƒng nhÆ°ng khÃ´ng há»— trá»£ giao dá»‹ch, khÃ´ng há»— trá»£ khÃ³a cáº¥p hÃ ng vÃ  khÃ³a ngoáº¡i, vÃ  khÃ´ng cÃ³ kháº£ nÄƒng phá»¥c há»“i sau sá»± cá»‘.</li>
<li><strong>CSV</strong> - CÃ³ thá»ƒ xá»­ lÃ½ tá»‡p CSV nhÆ° báº£ng MySQL, nhÆ°ng báº£ng nÃ y khÃ´ng há»— trá»£ chá»‰ má»¥c.</li>
<li><strong>Memory</strong> - LÆ°u trá»¯ dá»¯ liá»‡u trong bá»™ nhá»› Ä‘á»ƒ cÃ³ tá»‘c Ä‘á»™ pháº£n há»“i nhanh hÆ¡n. Tuy nhiÃªn, náº¿u quÃ¡ trÃ¬nh mysqld gáº·p sá»± cá»‘, táº¥t cáº£ dá»¯ liá»‡u sáº½ bá»‹ máº¥t.</li>
<li><strong>NDB</strong> - CÃ²n gá»i lÃ  storage engine NDB Cluster, chá»§ yáº¿u dÃ¹ng cho mÃ´i trÆ°á»ng cá»¥m phÃ¢n tÃ¡n MySQL Cluster, tÆ°Æ¡ng tá»± nhÆ° cá»¥m RAC cá»§a Oracle.</li>
<li><strong>Archive</strong> - storage engine Archive ráº¥t phÃ¹ há»£p Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u.
<ul>
<li>storage engine Archive chá»‰ há»— trá»£ thao tÃ¡c <code>INSERT</code> vÃ  <code>SELECT</code>.</li>
<li>storage engine Archive sá»­ dá»¥ng thuáº­t toÃ¡n nÃ©n zlib, vá»›i tá»· lá»‡ nÃ©n cÃ³ thá»ƒ Ä‘áº¡t 1:10.</li>
</ul>
</li>
</ul>
<h3>CÃ¡ch chá»n storage engine phÃ¹ há»£p</h3>
<p>Pháº§n lá»›n trÆ°á»ng há»£p, InnoDB lÃ  lá»±a chá»n Ä‘Ãºng Ä‘áº¯n, trá»« khi cáº§n cÃ¡c tÃ­nh nÄƒng mÃ  InnoDB khÃ´ng cÃ³.</p>
<p>Náº¿u á»©ng dá»¥ng cáº§n chá»n storage engine khÃ¡c InnoDB, cÃ³ thá»ƒ xem xÃ©t cÃ¡c yáº¿u tá»‘ sau:</p>
<ul>
<li><strong>Giao dá»‹ch</strong>: Náº¿u ká»‹ch báº£n kinh doanh lÃ  OLTP, thÃ¬ InnoDB lÃ  storage engine Ä‘Æ°á»£c Æ°u tiÃªn. Náº¿u khÃ´ng cáº§n há»— trá»£ giao dá»‹ch vÃ  chá»§ yáº¿u lÃ  cÃ¡c thao tÃ¡c SELECT vÃ  INSERT, MyISAM lÃ  lá»±a chá»n tá»‘t. VÃ¬ váº­y, náº¿u MySQL Ä‘Æ°á»£c triá»ƒn khai theo mÃ´ hÃ¬nh chá»§ - phá»¥ vÃ  tÃ¡ch biá»‡t Ä‘á»c/ghi, cÃ³ thá»ƒ lÃ m nhÆ° sau: nÃºt chÃ­nh chá»‰ há»— trá»£ ghi, bá»™ mÃ¡y máº·c Ä‘á»‹nh lÃ  InnoDB; nÃºt phá»¥ chá»‰ há»— trá»£ Ä‘á»c, bá»™ mÃ¡y máº·c Ä‘á»‹nh lÃ  MyISAM.</li>
<li><strong>Äá»“ng thá»i</strong>: MyISAM chá»‰ há»— trá»£ khÃ³a cáº¥p báº£ng, trong khi InnoDB há»— trá»£ khÃ³a cáº¥p hÃ ng. Do Ä‘Ã³, InnoDB cÃ³ hiá»‡u suáº¥t Ä‘á»“ng thá»i cao hÆ¡n.</li>
<li><strong>KhÃ³a ngoáº¡i</strong>: InnoDB há»— trá»£ khÃ³a ngoáº¡i.</li>
<li><strong>Sao lÆ°u</strong>: InnoDB há»— trá»£ sao lÆ°u nÃ³ng trá»±c tuyáº¿n.</li>
<li><strong>Phá»¥c há»“i sau sá»± cá»‘</strong>: Kháº£ nÄƒng hÆ° há»ng sau sá»± cá»‘ cá»§a MyISAM cao hÆ¡n nhiá»u so vá»›i InnoDB, vÃ  tá»‘c Ä‘á»™ phá»¥c há»“i cÅ©ng cháº­m hÆ¡n.</li>
<li><strong>TÃ­nh nÄƒng khÃ¡c</strong>: MyISAM há»— trá»£ báº£ng nÃ©n vÃ  chá»‰ má»¥c dá»¯ liá»‡u khÃ´ng gian.</li>
</ul>
<h2>Giá»›i thiá»‡u vá» InnoDB</h2>
<p>InnoDB lÃ  storage engine máº·c Ä‘á»‹nh tá»« phiÃªn báº£n MySQL 5.5 trá»Ÿ Ä‘i. Chá»‰ nÃªn sá»­ dá»¥ng storage engine khÃ¡c khi cáº§n cÃ¡c tÃ­nh nÄƒng mÃ  InnoDB khÃ´ng há»— trá»£.</p>
<p>InnoDB cÅ©ng sá»­ dá»¥ng cÃ¢y B+ (B+Tree) lÃ m cáº¥u trÃºc chá»‰ má»¥c, nhÆ°ng cÃ¡ch thá»±c hiá»‡n cá»¥ thá»ƒ ráº¥t khÃ¡c so vá»›i MyISAM. Trong MyISAM, tá»‡p chá»‰ má»¥c vÃ  tá»‡p dá»¯ liá»‡u lÃ  tÃ¡ch biá»‡t, tá»‡p chá»‰ má»¥c chá»‰ lÆ°u trá»¯ Ä‘á»‹a chá»‰ cá»§a báº£n ghi dá»¯ liá»‡u. Trong <strong>InnoDB, tá»‡p dá»¯ liá»‡u cá»§a báº£ng chÃ­nh lÃ  má»™t cáº¥u trÃºc chá»‰ má»¥c B+Tree</strong>. CÃ¡c nÃºt lÃ¡ (leaf node) cá»§a cÃ¢y nÃ y chá»©a toÃ n bá»™ báº£n ghi dá»¯ liá»‡u. <strong>Chá»‰ má»¥c nÃ y sá»­ dá»¥ng khÃ³a chÃ­nh cá»§a báº£ng lÃ m khÃ³a</strong>, do Ä‘Ã³, <strong>tá»‡p dá»¯ liá»‡u cá»§a báº£ng InnoDB chÃ­nh lÃ  chá»‰ má»¥c chÃ­nh</strong>.</p>
<p>InnoDB sá»­ dá»¥ng MVCC (Multi-Version Concurrency Control) Ä‘á»ƒ há»— trá»£ kháº£ nÄƒng xá»­ lÃ½ Ä‘á»“ng thá»i cao, vÃ  thá»±c hiá»‡n bá»‘n má»©c Ä‘á»™ cÃ´ láº­p tiÃªu chuáº©n. Má»©c Ä‘á»™ máº·c Ä‘á»‹nh lÃ  Ä‘á»c láº·p láº¡i (REPEATABLE READ) vÃ  sá»­ dá»¥ng khÃ³a khoáº£ng (next-key locking) Ä‘á»ƒ ngÄƒn cháº·n hiá»‡n tÆ°á»£ng Ä‘á»c áº£o.</p>
<p>InnoDB Ä‘Æ°á»£c xÃ¢y dá»±ng dá»±a trÃªn chá»‰ má»¥c nhÃ³m (clustered index), khÃ¡c biá»‡t lá»›n so vá»›i cÃ¡c storage engine khÃ¡c. Dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trong chá»‰ má»¥c, giÃºp trÃ¡nh viá»‡c Ä‘á»c tá»« Ä‘Ä©a trá»±c tiáº¿p, do Ä‘Ã³ cáº£i thiá»‡n hiá»‡u suáº¥t truy váº¥n.</p>
<p>InnoDB Ä‘Ã£ thá»±c hiá»‡n nhiá»u tá»‘i Æ°u ná»™i bá»™, bao gá»“m Ä‘á»c dá»¯ liá»‡u tá»« Ä‘Ä©a theo dá»± Ä‘oÃ¡n, chá»‰ má»¥c bÄƒm thÃ­ch á»©ng tá»± Ä‘á»™ng táº¡o Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ Ä‘á»c, vÃ  vÃ¹ng Ä‘á»‡m chÃ¨n giÃºp tÄƒng tá»‘c Ä‘á»™ chÃ¨n dá»¯ liá»‡u.</p>
<p>InnoDB há»— trá»£ sao lÆ°u nÃ³ng trá»±c tuyáº¿n thá»±c sá»±. CÃ¡c storage engine khÃ¡c khÃ´ng há»— trá»£ sao lÆ°u nÃ³ng trá»±c tuyáº¿n; Ä‘á»ƒ cÃ³ Ä‘Æ°á»£c cháº¿ Ä‘á»™ xem nháº¥t quÃ¡n, cáº§n pháº£i dá»«ng táº¥t cáº£ cÃ¡c thao tÃ¡c ghi vÃ o báº£ng, vÃ  trong mÃ´i trÆ°á»ng Ä‘á»c ghi há»—n há»£p, viá»‡c dá»«ng ghi cÅ©ng cÃ³ thá»ƒ Ä‘á»“ng nghÄ©a vá»›i viá»‡c dá»«ng Ä‘á»c.</p>
<h3>Cáº¥u trÃºc tá»‡p váº­t lÃ½ cá»§a InnoDB:</h3>
<ul>
<li><strong>Tá»‡p <code>.frm</code></strong>: Chá»©a thÃ´ng tin siÃªu dá»¯ liá»‡u liÃªn quan Ä‘áº¿n báº£ng, bao gá»“m thÃ´ng tin Ä‘á»‹nh nghÄ©a cáº¥u trÃºc báº£ng.</li>
<li><strong>Tá»‡p <code>.ibd</code> hoáº·c <code>.ibdata</code></strong>: Chá»©a dá»¯ liá»‡u cá»§a InnoDB. CÃ³ hai cÃ¡ch lÆ°u trá»¯ dá»¯ liá»‡u InnoDB cÃ³ thá»ƒ Ä‘Æ°á»£c cáº¥u hÃ¬nh:
<ul>
<li><strong>KhÃ´ng gian báº£ng riÃªng láº» (file-per-table)</strong>: Sá»­ dá»¥ng tá»‡p <code>.ibd</code>, má»—i báº£ng cÃ³ má»™t tá»‡p <code>.ibd</code>.</li>
<li><strong>KhÃ´ng gian báº£ng chia sáº» (shared-tablespace)</strong>: Sá»­ dá»¥ng tá»‡p <code>.ibdata</code>, táº¥t cáº£ cÃ¡c báº£ng dÃ¹ng chung má»™t tá»‡p <code>.ibdata</code> (hoáº·c nhiá»u tá»‡p, cÃ³ thá»ƒ cáº¥u hÃ¬nh).</li>
</ul>
</li>
</ul>
<h2>Kiáº¿n trÃºc lÆ°u trá»¯ InnoDB</h2>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406241406713.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>Kiáº¿n trÃºc lÆ°u trá»¯ cá»§a InnoDB Ä‘Æ°á»£c chia thÃ nh cáº¥u trÃºc bá»™ nhá»› vÃ  cáº¥u trÃºc Ä‘Ä©a.</p>
<h3>Cáº¥u trÃºc bá»™ nhá»› cá»§a InnoDB:</h3>
<ul>
<li><strong>Buffer Pool</strong>: VÃ¹ng Ä‘á»‡m chÃ­nh lÆ°u trá»¯ dá»¯ liá»‡u vÃ  chá»‰ má»¥c Ä‘Æ°á»£c Ä‘á»c tá»« Ä‘Ä©a.</li>
<li><strong>Change Buffer</strong>: VÃ¹ng Ä‘á»‡m thay Ä‘á»•i lÆ°u trá»¯ cÃ¡c thay Ä‘á»•i Ä‘á»‘i vá»›i chá»‰ má»¥c khÃ´ng duy nháº¥t.</li>
<li><strong>Adaptive Hash Index</strong>: Chá»‰ má»¥c bÄƒm thÃ­ch á»©ng tá»± Ä‘á»™ng táº¡o Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ truy váº¥n.</li>
<li><strong>Log Buffer</strong>: VÃ¹ng Ä‘á»‡m ghi láº¡i cÃ¡c thay Ä‘á»•i trÆ°á»›c khi Ä‘Æ°á»£c ghi vÃ o tá»‡p nháº­t kÃ½.</li>
</ul>
<h3>Cáº¥u trÃºc Ä‘Ä©a cá»§a InnoDB:</h3>
<ul>
<li><strong>Tablespace</strong>: KhÃ´ng gian lÆ°u trá»¯ cÃ¡c tá»‡p dá»¯ liá»‡u vÃ  chá»‰ má»¥c.</li>
<li><strong>Doublewrite Buffer</strong>: VÃ¹ng Ä‘á»‡m ghi Ä‘Ã´i Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh toÃ n váº¹n dá»¯ liá»‡u.</li>
<li><strong>Redo log</strong>: Nháº­t kÃ½ ghi láº¡i cÃ¡c thay Ä‘á»•i Ä‘á»ƒ phá»¥c há»“i sau sá»± cá»‘.</li>
<li><strong>Undo log</strong>: Nháº­t kÃ½ hoÃ n tÃ¡c giÃºp há»— trá»£ giao dá»‹ch vÃ  khÃ´i phá»¥c tráº¡ng thÃ¡i trÆ°á»›c Ä‘Ã³ cá»§a dá»¯ liá»‡u.</li>
</ul>
<p>InnoDB mang láº¡i nhiá»u lá»£i Ã­ch vá» hiá»‡u suáº¥t vÃ  Ä‘á»™ tin cáº­y nhá» cÃ¡c tÃ­nh nÄƒng vÃ  cáº¥u trÃºc lÆ°u trá»¯ tiÃªn tiáº¿n.</p>
<h2>KhÃ´ng gian báº£ng InnoDB</h2>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406241406812.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h3>DÃ²ng (Row)</h3>
<p>CÃ¡c báº£n ghi trong báº£ng cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ theo dÃ²ng (row), má»—i dÃ²ng báº£n ghi cÃ³ cáº¥u trÃºc lÆ°u trá»¯ khÃ¡c nhau tÃ¹y thuá»™c vÃ o Ä‘á»‹nh dáº¡ng dÃ²ng. Sau nÃ y chÃºng ta sáº½ giá»›i thiá»‡u chi tiáº¿t vá» Ä‘á»‹nh dáº¡ng dÃ²ng cá»§a InnoDB, Ä‘Ã¢y cÅ©ng lÃ  ná»™i dung chÃ­nh cá»§a bÃ i viáº¿t nÃ y.</p>
<h3>Trang (Page)</h3>
<p>Báº£n ghi Ä‘Æ°á»£c lÆ°u trá»¯ theo dÃ²ng, nhÆ°ng viá»‡c Ä‘á»c cÆ¡ sá»Ÿ dá»¯ liá»‡u khÃ´ng pháº£i theo "dÃ²ng", vÃ¬ náº¿u váº­y má»—i láº§n Ä‘á»c (má»™t láº§n thao tÃ¡c I/O) chá»‰ xá»­ lÃ½ má»™t dÃ²ng dá»¯ liá»‡u, hiá»‡u quáº£ sáº½ ráº¥t tháº¥p. Do Ä‘Ã³, <strong>dá»¯ liá»‡u cá»§a InnoDB Ä‘Æ°á»£c Ä‘á»c vÃ  ghi theo Ä‘Æ¡n vá»‹ "trang"</strong>. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  khi cáº§n Ä‘á»c má»™t báº£n ghi, khÃ´ng pháº£i Ä‘á»c chá»‰ má»™t dÃ²ng tá»« Ä‘Ä©a, mÃ  lÃ  Ä‘á»c cáº£ má»™t trang vÃ o bá»™ nhá»›.</p>
<p><strong>Máº·c Ä‘á»‹nh má»—i trang cÃ³ kÃ­ch thÆ°á»›c 16KB</strong>, cÃ³ nghÄ©a lÃ  Ä‘áº£m báº£o khÃ´ng gian lÆ°u trá»¯ liÃªn tá»¥c tá»‘i Ä‘a 16KB. Trang lÃ  Ä‘Æ¡n vá»‹ quáº£n lÃ½ nhá» nháº¥t cá»§a Ä‘Ä©a trong storage engine InnoDB, nghÄ©a lÃ  má»—i láº§n cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘á»c ghi Ã­t nháº¥t lÃ  16KB, Ä‘á»c tá»« Ä‘Ä©a vÃ o bá»™ nhá»› Ã­t nháº¥t lÃ  16K, vÃ  ghi tá»« bá»™ nhá»› ra Ä‘Ä©a Ã­t nháº¥t lÃ  16K.</p>
<p>CÃ³ nhiá»u loáº¡i trang, phá»• biáº¿n nháº¥t lÃ  trang dá»¯ liá»‡u, trang nháº­t kÃ½ undo, trang trÃ n, v.v. CÃ¡c báº£n ghi trong báº£ng Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi "trang dá»¯ liá»‡u", cáº¥u trÃºc cá»§a trang dá»¯ liá»‡u khÃ´ng Ä‘Æ°á»£c Ä‘á» cáº­p chi tiáº¿t á»Ÿ Ä‘Ã¢y. Báº¡n cÃ³ thá»ƒ tham kháº£o bÃ i viáº¿t nÃ y Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t: <a href="https://xiaolincoding.com/mysql/index/page.html" target="_blank" rel="noopener noreferrer">Thay Ä‘á»•i gÃ³c nhÃ¬n vá» cÃ¢y B+</a>.</p>
<p>NÃ³i chung, báº¡n chá»‰ cáº§n biáº¿t cÃ¡c báº£n ghi trong báº£ng Ä‘Æ°á»£c lÆ°u trá»¯ trong "trang dá»¯ liá»‡u".</p>
<h3>VÃ¹ng (Extent)</h3>
<p>ChÃºng ta biáº¿t ráº±ng storage engine InnoDB tá»• chá»©c dá»¯ liá»‡u báº±ng cÃ¢y B+ (B+Tree). Trong cÃ¢y B+, má»—i táº§ng Ä‘Æ°á»£c káº¿t ná»‘i báº±ng danh sÃ¡ch liÃªn káº¿t hai chiá»u. Náº¿u phÃ¢n bá»• khÃ´ng gian lÆ°u trá»¯ theo Ä‘Æ¡n vá»‹ trang, vá»‹ trÃ­ váº­t lÃ½ cá»§a hai trang liá»n ká» trong danh sÃ¡ch liÃªn káº¿t cÃ³ thá»ƒ khÃ´ng liÃªn tiáº¿p, cÃ³ thá»ƒ ráº¥t xa nhau, Ä‘iá»u nÃ y dáº«n Ä‘áº¿n nhiá»u thao tÃ¡c I/O ngáº«u nhiÃªn, ráº¥t cháº­m.</p>
<p>Giáº£i phÃ¡p ráº¥t Ä‘Æ¡n giáº£n, lÃ m cho vá»‹ trÃ­ váº­t lÃ½ cá»§a cÃ¡c trang liá»n ká» trong danh sÃ¡ch liÃªn káº¿t cÅ©ng liá»n ká», nhÆ° váº­y cÃ³ thá»ƒ sá»­ dá»¥ng I/O tuáº§n tá»±. Äiá»u nÃ y cáº£i thiá»‡n hiá»‡u suáº¥t khi thá»±c hiá»‡n cÃ¡c truy váº¥n pháº¡m vi (quÃ©t cÃ¡c nÃºt lÃ¡).</p>
<p>CÃ¡ch cá»¥ thá»ƒ Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y lÃ  gÃ¬?</p>
<p><strong>Khi lÆ°á»£ng dá»¯ liá»‡u trong báº£ng lá»›n, viá»‡c phÃ¢n bá»• khÃ´ng gian cho má»™t chá»‰ má»¥c khÃ´ng cÃ²n theo Ä‘Æ¡n vá»‹ trang, mÃ  theo Ä‘Æ¡n vá»‹ vÃ¹ng (extent). Má»—i vÃ¹ng cÃ³ kÃ­ch thÆ°á»›c 1MB, Ä‘á»‘i vá»›i trang 16KB, 64 trang liÃªn tiáº¿p sáº½ táº¡o thÃ nh má»™t vÃ¹ng. Äiá»u nÃ y lÃ m cho vá»‹ trÃ­ váº­t lÃ½ cá»§a cÃ¡c trang liá»n ká» trong danh sÃ¡ch liÃªn káº¿t cÅ©ng liá»n ká», vÃ  cÃ³ thá»ƒ sá»­ dá»¥ng I/O tuáº§n tá»±</strong>.</p>
<h3>Äoáº¡n (Segment)</h3>
<p>KhÃ´ng gian báº£ng Ä‘Æ°á»£c táº¡o thÃ nh tá»« cÃ¡c Ä‘oáº¡n (segment), má»—i Ä‘oáº¡n gá»“m nhiá»u vÃ¹ng (extent). CÃ¡c Ä‘oáº¡n thÆ°á»ng Ä‘Æ°á»£c chia thÃ nh Ä‘oáº¡n dá»¯ liá»‡u, Ä‘oáº¡n chá»‰ má»¥c vÃ  Ä‘oáº¡n hoÃ n tÃ¡c.</p>
<ul>
<li><strong>Äoáº¡n chá»‰ má»¥c</strong>: Chá»©a cÃ¡c vÃ¹ng cá»§a cÃ¡c nÃºt khÃ´ng pháº£i lÃ¡ cá»§a cÃ¢y B+.</li>
<li><strong>Äoáº¡n dá»¯ liá»‡u</strong>: Chá»©a cÃ¡c vÃ¹ng cá»§a cÃ¡c nÃºt lÃ¡ cá»§a cÃ¢y B+.</li>
<li><strong>Äoáº¡n hoÃ n tÃ¡c</strong>: Chá»©a cÃ¡c vÃ¹ng cá»§a dá»¯ liá»‡u hoÃ n tÃ¡c.</li>
</ul>
<p>Váº­y lÃ  chÃºng ta Ä‘Ã£ hoÃ n thÃ nh viá»‡c mÃ´ táº£ cáº¥u trÃºc cá»§a khÃ´ng gian báº£ng. Tiáº¿p theo, chÃºng ta sáº½ nÃ³i chi tiáº¿t vá» Ä‘á»‹nh dáº¡ng dÃ²ng cá»§a InnoDB.</p>
<p>Viá»‡c giá»›i thiá»‡u vÃ²ng quanh nÃ y nháº±m giÃºp báº¡n hiá»ƒu dÃ²ng báº£n ghi Ä‘Æ°á»£c lÆ°u trá»¯ á»Ÿ tá»‡p nÃ o vÃ  khu vá»±c nÃ o trong khÃ´ng gian báº£ng nÃ y, tá»« gÃ³c nhÃ¬n tá»« trÃªn xuá»‘ng. Äiá»u nÃ y giÃºp báº¡n hiá»ƒu rÃµ hÆ¡n vÃ  khÃ´ng tháº¥y mÆ¡ há»“.</p>
<h2>Cáº¥u trÃºc bá»™ nhá»› InnoDB</h2>
<h3>Bá»™ Ä‘á»‡m (Buffer Pool)</h3>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406241416178.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>Bá»™ Ä‘á»‡m dÃ¹ng Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ truy cáº­p vÃ  chá»‰nh sá»­a dá»¯ liá»‡u báº±ng cÃ¡ch lÆ°u trá»¯ dá»¯ liá»‡u nÃ³ng trong bá»™ nhá»›, giáº£m thiá»ƒu tá»‘i Ä‘a I/O tá»« Ä‘Ä©a vÃ  tÄƒng tá»‘c Ä‘á»™ Ä‘á»c vÃ  ghi dá»¯ liá»‡u nÃ³ng.</p>
<p>Dá»¯ liá»‡u trong Buffer Pool Ä‘Æ°á»£c lÆ°u trá»¯ theo Ä‘Æ¡n vá»‹ trang vÃ  Ä‘Æ°á»£c quáº£n lÃ½ báº±ng cáº¥u trÃºc danh sÃ¡ch liÃªn káº¿t Ä‘Æ¡n theo Ä‘Æ¡n vá»‹ trang. Do giá»›i háº¡n cá»§a bá»™ nhá»›, Buffer Pool chá»‰ cÃ³ thá»ƒ chá»©a Ä‘Æ°á»£c dá»¯ liá»‡u nÃ³ng nháº¥t. Buffer Pool sá»­ dá»¥ng thuáº­t toÃ¡n LRU (Least Recently Used) Ä‘á»ƒ loáº¡i bá» dá»¯ liá»‡u khÃ´ng nÃ³ng.</p>
<p>Dá»±a trÃªn nguyÃªn lÃ½ cá»¥c bá»™ thá»i gian vÃ  khÃ´ng gian, Buffer Pool lÆ°u trá»¯ cÃ¡c trang dá»¯ liá»‡u hoáº¡t Ä‘á»™ng hiá»‡n táº¡i báº±ng cÃ¡ch sá»­ dá»¥ng cÆ¡ cháº¿ Ä‘á»c trÆ°á»›c (Read-ahead) Ä‘á»ƒ lÆ°u trá»¯ cÃ¡c trang dá»¯ liá»‡u gáº§n dá»¯ liá»‡u má»¥c tiÃªu.</p>
<p>CÆ¡ cháº¿ Ä‘á»c trÆ°á»›c dáº«n Ä‘áº¿n váº¥n Ä‘á» Ä‘á»c trÆ°á»›c tháº¥t báº¡i. InnoDB sá»­ dá»¥ng cÆ¡ cháº¿ phÃ¢n chia tháº¿ há»‡ Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y: chia Buffer Pool thÃ nh hai pháº§n lÃ  New SubList vÃ  Old SubList, Ä‘áº·t cÃ¡c trang dá»¯ liá»‡u má»›i Ä‘á»c vÃ o Ä‘áº§u Old SubList, cÃ¡c trang dá»¯ liá»‡u trong Old SubList Ä‘Æ°á»£c truy cáº­p láº¡i sáº½ Ä‘Æ°á»£c Ä‘áº·t vÃ o Ä‘áº§u New SubList; cÃ¡c trang dá»¯ liá»‡u láº¡nh tháº¥t báº¡i trong viá»‡c Ä‘á»c trÆ°á»›c sáº½ nhanh chÃ³ng bá»‹ loáº¡i bá» khá»i Old SubList mÃ  khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n dá»¯ liá»‡u nÃ³ng trong New SubList.</p>
<p>InnoDB sá»­ dá»¥ng cÆ¡ cháº¿ cá»­a sá»• thá»i gian (Time Window) Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» Ã´ nhiá»…m bá»™ Ä‘á»‡m: Ä‘á»‘i vá»›i cÃ¡c trang dá»¯ liá»‡u trong Old SubList, chÃºng pháº£i á»Ÿ láº¡i Old SubList trong má»™t khoáº£ng thá»i gian nháº¥t Ä‘á»‹nh rá»“i má»›i Ä‘Æ°á»£c chuyá»ƒn vÃ o New SubList náº¿u Ä‘Æ°á»£c truy cáº­p láº¡i. Cá»­a sá»• máº·c Ä‘á»‹nh lÃ  1 giÃ¢y.</p>
<p>Äá»‘i vá»›i truy váº¥n dá»¯ liá»‡u trong Buffer Pool, InnoDB sáº½ Ä‘á»c vÃ  tráº£ vá» trá»±c tiáº¿p; Ä‘á»‘i vá»›i sá»­a Ä‘á»•i dá»¯ liá»‡u trong Buffer Pool, InnoDB sáº½ sá»­a trá»±c tiáº¿p trong Buffer Pool vÃ  ghi sá»­a Ä‘á»•i vÃ o redo Log. Khi trang dá»¯ liá»‡u bá»‹ thuáº­t toÃ¡n LRU loáº¡i bá», nÃ³ sáº½ Ä‘Æ°á»£c ghi vÃ o Ä‘Ä©a, náº¿u há»‡ thá»‘ng gáº·p sá»± cá»‘ trÆ°á»›c khi Ä‘Æ°á»£c ghi vÃ o Ä‘Ä©a, sáº½ sá»­ dá»¥ng redo Log Ä‘á»ƒ khÃ´i phá»¥c khi khá»Ÿi Ä‘á»™ng láº¡i.</p>
<h3>Bá»™ Ä‘á»‡m thay Ä‘á»•i (Change Buffer)</h3>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406241416527.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>Change Buffer dÃ¹ng Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ ghi vÃ o chá»‰ má»¥c thá»© cáº¥p cá»§a dá»¯ liá»‡u khÃ´ng nÃ³ng. Do tÃ­nh khÃ´ng liÃªn tá»¥c cá»§a dá»¯ liá»‡u chá»‰ má»¥c thá»© cáº¥p, viá»‡c sá»­a Ä‘á»•i chá»‰ má»¥c thá»© cáº¥p yÃªu cáº§u I/O Ä‘Ä©a thÆ°á»ng xuyÃªn, tiÃªu tá»‘n nhiá»u hiá»‡u nÄƒng. Change Buffer lÆ°u trá»¯ cÃ¡c thao tÃ¡c sá»­a Ä‘á»•i chá»‰ má»¥c thá»© cáº¥p vÃ  ghi vÃ o redo log. Khi Change Buffer Ä‘áº¡t Ä‘áº¿n má»™t lÆ°á»£ng nháº¥t Ä‘á»‹nh hoáº·c há»‡ thá»‘ng Ã­t báº­n rá»™n, nÃ³ sáº½ thá»±c hiá»‡n thao tÃ¡c <code>ibuf merge</code> Ä‘á»ƒ ghi sá»­a Ä‘á»•i vÃ o Ä‘Ä©a. Change Buffer cÃ³ vÃ¹ng lÆ°u trá»¯ bá»n bá»‰ trong khÃ´ng gian báº£ng há»‡ thá»‘ng.</p>
<p>KÃ­ch thÆ°á»›c Change Buffer máº·c Ä‘á»‹nh chiáº¿m 25% Buffer Pool, Ä‘Æ°á»£c khá»Ÿi táº¡o khi khá»Ÿi Ä‘á»™ng mÃ¡y chá»§. Cáº¥u trÃºc váº­t lÃ½ cá»§a nÃ³ lÃ  má»™t cÃ¢y B-Tree gá»i lÃ  <code>ibuf</code>. Äiá»u kiá»‡n sá»­ dá»¥ng Change Buffer lÃ :</p>
<ul>
<li>InnoDB báº­t <code>innodb_change_buffering</code> vÃ  báº£ng hiá»‡n táº¡i khÃ´ng cÃ³ thao tÃ¡c <code>flush</code>.</li>
<li>Chá»‰ sá»­a Ä‘á»•i cÃ¡c nÃºt lÃ¡ cá»§a cÃ¢y chá»‰ má»¥c thá»© cáº¥p vÃ  trang chá»‰ má»¥c khÃ´ng náº±m trong Buffer Pool.</li>
<li>Äá»‘i vá»›i chá»‰ má»¥c thá»© cáº¥p duy nháº¥t, chá»‰ cÃ³ thao tÃ¡c xÃ³a cÃ³ thá»ƒ Ä‘Æ°á»£c lÆ°u vÃ o bá»™ Ä‘á»‡m.</li>
</ul>
<p>Thá»i Ä‘iá»ƒm thá»±c hiá»‡n <code>ibuf merge</code>:</p>
<ul>
<li>Khi ngÆ°á»i dÃ¹ng sá»­ dá»¥ng chá»‰ má»¥c thá»© cáº¥p Ä‘á»ƒ truy váº¥n.</li>
<li>Khi dá»± Ä‘oÃ¡n ráº±ng khÃ´ng gian trang sáº½ khÃ´ng Ä‘á»§ khi lÆ°u trá»¯ thao tÃ¡c chÃ¨n, cÃ³ thá»ƒ dáº«n Ä‘áº¿n phÃ¢n chia trang chá»‰ má»¥c.</li>
<li>Khi thao tÃ¡c lÆ°u trá»¯ láº§n nÃ y dáº«n Ä‘áº¿n phÃ¢n chia trang cÃ¢y ibuf vÃ  kÃ­ch thÆ°á»›c Change Buffer vÆ°á»£t quÃ¡ giá»›i háº¡n sau khi phÃ¢n loáº¡i.</li>
<li>Khi luá»“ng master thá»±c hiá»‡n lá»‡nh <code>merge</code>.</li>
<li>Khi ngÆ°á»i dÃ¹ng thá»±c hiá»‡n thao tÃ¡c <code>flush</code> trÃªn báº£ng.</li>
</ul>
<h3>Chá»‰ má»¥c bÄƒm thÃ­ch nghi (Adaptive Hash Index)</h3>
<p>Chá»‰ má»¥c bÄƒm thÃ­ch nghi (Adaptive Hash Index, AHI) dÃ¹ng Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ truy váº¥n cho cÃ¡c trang dá»¯ liá»‡u nÃ³ng. Khi sá»­ dá»¥ng chá»‰ má»¥c cá»¥m (clustered index) Ä‘á»ƒ Ä‘á»‹nh vá»‹ trang dá»¯ liá»‡u, cáº§n Ä‘i tá»« nÃºt gá»‘c Ä‘áº¿n nÃºt lÃ¡ cá»§a cÃ¢y chá»‰ má»¥c, thÆ°á»ng máº¥t 3-4 láº§n truy váº¥n. InnoDB phÃ¢n tÃ­ch viá»‡c sá»­ dá»¥ng chá»‰ má»¥c vÃ  cÃ¡c trÆ°á»ng chá»‰ má»¥c Ä‘á»ƒ táº¡o hoáº·c xÃ³a chá»‰ má»¥c bÄƒm má»™t cÃ¡ch tá»± Ä‘á»™ng.</p>
<p>AHI Ã¡p dá»¥ng cho cÃ¡c trang dá»¯ liá»‡u vÃ  chá»‰ má»¥c Ä‘Æ°á»£c truy váº¥n thÆ°á»ng xuyÃªn. VÃ¬ trang dá»¯ liá»‡u lÃ  má»™t pháº§n cá»§a chá»‰ má»¥c cá»¥m, AHI Ä‘Æ°á»£c xÃ¢y dá»±ng trÃªn chá»‰ má»¥c. <strong>Äá»‘i vá»›i chá»‰ má»¥c thá»© cáº¥p, náº¿u trÃºng AHI, sáº½ láº¥y trá»±c tiáº¿p con trá» báº£n ghi tá»« chá»‰ má»¥c thá»© cáº¥p trong AHI vÃ  sau Ä‘Ã³ theo khÃ³a chÃ­nh tÃ¬m dá»¯ liá»‡u dá»c theo chá»‰ má»¥c cá»¥m; náº¿u truy váº¥n chá»‰ má»¥c cá»¥m cÅ©ng trÃºng AHI, sáº½ tráº£ vá» trá»±c tiáº¿p con trá» báº£n ghi cá»§a trang dá»¯ liá»‡u má»¥c tiÃªu, tá»« Ä‘Ã³ cÃ³ thá»ƒ Ä‘á»‹nh vá»‹ trang dá»¯ liá»‡u trá»±c tiáº¿p theo con trá» báº£n ghi</strong>.</p>
<p>KÃ­ch thÆ°á»›c AHI lÃ  1/64 cá»§a Buffer Pool. Tá»« MySQL 5.7 trá»Ÿ Ä‘i, AHI há»— trá»£ phÃ¢n vÃ¹ng Ä‘á»ƒ giáº£m cáº¡nh tranh trÃªn khÃ³a AHI toÃ n cá»¥c, máº·c Ä‘á»‹nh lÃ  8 phÃ¢n vÃ¹ng.</p>
<h3>Bá»™ Ä‘á»‡m nháº­t kÃ½ (Log Buffer)</h3>
<p>Bá»™ Ä‘á»‡m nháº­t kÃ½ (Log Buffer) Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ táº¡m thá»i cÃ¡c dá»¯ liá»‡u nháº­t kÃ½ cáº§n ghi vÃ o Ä‘Ä©a. Táº¥t cáº£ cÃ¡c thao tÃ¡c sá»­a Ä‘á»•i cá»§a InnoDB sáº½ Ä‘Æ°á»£c ghi vÃ o cÃ¡c tá»‡p nháº­t kÃ½ nhÆ° redo log, undo log. Náº¿u má»—i láº§n sá»­a Ä‘á»•i Ä‘á»u Ä‘Æ°á»£c ghi trá»±c tiáº¿p vÃ o Ä‘Ä©a, sáº½ gÃ¢y ra ráº¥t nhiá»u I/O. Log Buffer tá»‘i Æ°u váº¥n Ä‘á» nÃ y báº±ng cÃ¡ch lÆ°u trá»¯ cÃ¡c thao tÃ¡c sá»­a Ä‘á»•i trong vÃ¹ng nhá»› nÃ y trÆ°á»›c, sau Ä‘Ã³ Ä‘á»‹nh ká»³ ghi hÃ ng loáº¡t vÃ o Ä‘Ä©a.</p>
<p>KÃ­ch thÆ°á»›c cá»§a bá»™ Ä‘á»‡m nháº­t kÃ½ cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘iá»u chá»‰nh báº±ng cáº¥u hÃ¬nh <code>innodb_log_buffer_size</code>, máº·c Ä‘á»‹nh lÃ  16MB.</p>
<h2>MyISAM</h2>
<p>MyISAM lÃ  há»‡ thá»‘ng lÆ°u trá»¯ máº·c Ä‘á»‹nh cá»§a MySQL trÆ°á»›c phiÃªn báº£n 5.5.</p>
<p>MyISAM Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘Æ¡n giáº£n vá»›i dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ theo Ä‘á»‹nh dáº¡ng nÃ©n. MyISAM thÃ­ch há»£p cho dá»¯ liá»‡u chá»‰ Ä‘á»c, hoáº·c báº£ng nhá» cÃ³ thá»ƒ cháº¥p nháº­n cÃ¡c thao tÃ¡c sá»­a chá»¯a.</p>
<p>MyISAM sá»­ dá»¥ng cáº¥u trÃºc B+Tree cho chá»‰ má»¥c, trong Ä‘Ã³ <strong>nÃºt lÃ¡ cá»§a trÆ°á»ng dá»¯ liá»‡u lÆ°u trá»¯ Ä‘á»‹a chá»‰ cá»§a cÃ¡c báº£n ghi dá»¯ liá»‡u</strong>.</p>
<p>MyISAM cung cáº¥p nhiá»u tÃ­nh nÄƒng nhÆ°: chá»‰ má»¥c toÃ n vÄƒn, báº£ng nÃ©n, vÃ  cÃ¡c hÃ m khÃ´ng gian. Tuy nhiÃªn, MyISAM khÃ´ng há»— trá»£ giao dá»‹ch vÃ  khÃ³a cáº¥p hÃ ng. MyISAM cÅ©ng khÃ´ng há»— trá»£ khÃ´i phá»¥c an toÃ n sau khi há»‡ thá»‘ng gáº·p sá»± cá»‘.</p>
<p>Cáº¥u trÃºc tá»‡p váº­t lÃ½ cá»§a MyISAM:</p>
<ul>
<li>Tá»‡p <code>.frm</code>: lÆ°u trá»¯ thÃ´ng tin siÃªu dá»¯ liá»‡u liÃªn quan Ä‘áº¿n báº£ng, bao gá»“m Ä‘á»‹nh nghÄ©a cáº¥u trÃºc báº£ng.</li>
<li>Tá»‡p <code>.MYD</code> (<code>MYData</code>): dÃ nh riÃªng cho MyISAM Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u cá»§a báº£ng MyISAM.</li>
<li>Tá»‡p <code>.MYI</code> (<code>MYIndex</code>): dÃ nh riÃªng cho MyISAM Ä‘á»ƒ lÆ°u trá»¯ thÃ´ng tin liÃªn quan Ä‘áº¿n chá»‰ má»¥c cá»§a báº£ng MyISAM.</li>
</ul>
<h2>So sÃ¡nh InnoDB vÃ  MyISAM</h2>
<p>Báº£ng so sÃ¡nh giá»¯a InnoDB vÃ  MyISAM:</p>
<p>| Äá»‘i chiáº¿u    | MyISAM                                        | InnoDB                           |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406241406713.png" type="image/png"/>
    </item>
    <item>
      <title>MySQL Guide</title>
      <link>https://vanhung4499.github.io/database/mysql/guide.html</link>
      <guid>https://vanhung4499.github.io/database/mysql/guide.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MySQL Guide</source>
      <description>MySQL Guide Kiáº¿n trÃºc MySQL Äá»ƒ hiá»ƒu MySQL, tá»‘t nháº¥t lÃ  hiá»ƒu cÃ¡ch MySQL hoáº¡t Ä‘á»™ng á»Ÿ má»©c Ä‘á»™ tá»•ng quÃ¡t. Tham kháº£o: MySQL Architecture Storage Engine MySQL há»— trá»£ nhiá»u loáº¡i storage...</description>
      <category>mysql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Kiáº¿n trÃºc MySQL</h2>
<p>Äá»ƒ hiá»ƒu MySQL, tá»‘t nháº¥t lÃ  hiá»ƒu cÃ¡ch MySQL hoáº¡t Ä‘á»™ng á»Ÿ má»©c Ä‘á»™ tá»•ng quÃ¡t.</p>
<p>Tham kháº£o:&nbsp;<a href="architecture">MySQL Architecture</a></p>
<h2>Storage Engine</h2>
<p>MySQL há»— trá»£ nhiá»u loáº¡i storage engine, má»—i loáº¡i cÃ³ Æ°u vÃ  nhÆ°á»£c Ä‘iá»ƒm riÃªng.</p>
<p>Tham kháº£o:&nbsp;<a href="storage-engine">MySQL Storage Engine</a></p>
<h2>Kiá»ƒu dá»¯ liá»‡u</h2>
<h3>Kiá»ƒu sá»‘ nguyÃªn</h3>
<p><code>TINYINT</code>,&nbsp;<code>SMALLINT</code>,&nbsp;<code>MEDIUMINT</code>,&nbsp;<code>INT</code>,&nbsp;<code>BIGINT</code>&nbsp;láº§n lÆ°á»£t sá»­ dá»¥ng 8, 16, 24, 32, 64 bit khÃ´ng gian lÆ°u trá»¯, trong háº§u háº¿t cÃ¡c trÆ°á»ng há»£p, cÃ ng nhá» cÃ ng tá»‘t.</p>
<p><strong><code>UNSIGNED</code>&nbsp;chá»‰ ra ráº±ng khÃ´ng cho phÃ©p giÃ¡ trá»‹ Ã¢m, cÃ³ thá»ƒ tÄƒng giá»›i háº¡n trÃªn cÃ¹ng cá»§a sá»‘ dÆ°Æ¡ng</strong>.</p>
<p>Sá»‘ trong&nbsp;<code>INT(11)</code>&nbsp;chá»‰ quy Ä‘á»‹nh sá»‘ kÃ½ tá»± hiá»ƒn thá»‹ cho cá»™t trong cÃ´ng cá»¥ tÆ°Æ¡ng tÃ¡c, khÃ´ng cÃ³ Ã½ nghÄ©a vá»›i viá»‡c lÆ°u trá»¯ vÃ  tÃ­nh toÃ¡n.</p>
<h3>Kiá»ƒu sá»‘ thá»±c</h3>
<p><code>FLOAT</code>&nbsp;vÃ &nbsp;<code>DOUBLE</code>&nbsp;lÃ  kiá»ƒu sá»‘ thá»±c.</p>
<p>Kiá»ƒu&nbsp;<code>DECIMAL</code>&nbsp;chá»§ yáº¿u Ä‘Æ°á»£c sá»­ dá»¥ng cho tÃ­nh toÃ¡n chÃ­nh xÃ¡c, tuy nhiÃªn nÃ³ tá»‘n kÃ©m vÃ  chá»‰ nÃªn sá»­ dá»¥ng&nbsp;<code>DECIMAL</code>&nbsp;khi tÃ­nh toÃ¡n sá»‘ tháº­p phÃ¢n chÃ­nh xÃ¡c - vÃ­ dá»¥: lÆ°u trá»¯ dá»¯ liá»‡u tÃ i chÃ­nh. Khi cÃ³ sá»‘ lÆ°á»£ng dá»¯ liá»‡u lá»›n, cÃ³ thá»ƒ sá»­ dá»¥ng&nbsp;<code>BIGINT</code>&nbsp;thay tháº¿&nbsp;<code>DECIMAL</code>.</p>
<p><code>FLOAT</code>,&nbsp;<code>DOUBLE</code>&nbsp;vÃ &nbsp;<code>DECIMAL</code>&nbsp;cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh chiá»u rá»™ng cá»™t, vÃ­ dá»¥&nbsp;<code>DECIMAL(18, 9)</code>&nbsp;chá»‰ ra tá»•ng cá»™ng 18 chá»¯ sá»‘, 9 chá»¯ sá»‘ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ lÆ°u trá»¯ pháº§n tháº­p phÃ¢n.</p>
<h3>Kiá»ƒu chuá»—i</h3>
<p>Chá»§ yáº¿u cÃ³ hai loáº¡i kiá»ƒu chuá»—i lÃ &nbsp;<code>CHAR</code>&nbsp;vÃ &nbsp;<code>VARCHAR</code>, má»™t loáº¡i lÃ  cá»‘ Ä‘á»‹nh, má»™t loáº¡i lÃ  biáº¿n Ä‘á»•i.</p>
<p><strong>Kiá»ƒu biáº¿n Ä‘á»•i&nbsp;<code>VARCHAR</code>&nbsp;nÃ y cÃ³ thá»ƒ tiáº¿t kiá»‡m khÃ´ng gian vÃ¬ chá»‰ cáº§n lÆ°u trá»¯ ná»™i dung cáº§n thiáº¿t. Tuy nhiÃªn, khi thá»±c hiá»‡n UPDATE, cÃ³ thá»ƒ lÃ m cho hÃ ng trá»Ÿ nÃªn dÃ i hÆ¡n so vá»›i ban Ä‘áº§u</strong>. Khi vÆ°á»£t quÃ¡ kÃ­ch thÆ°á»›c mÃ  má»™t trang cÃ³ thá»ƒ chá»©a, sáº½ cÃ³ thÃªm hoáº¡t Ä‘á»™ng. MyISAM sáº½ chia hÃ ng thÃ nh cÃ¡c Ä‘oáº¡n khÃ¡c nhau Ä‘á»ƒ lÆ°u trá»¯, trong khi InnoDB cáº§n pháº£i chia trang Ä‘á»ƒ Ä‘Æ°a hÃ ng vÃ o trang.</p>
<p><code>VARCHAR</code>&nbsp;sáº½ giá»¯ cÃ¡c khoáº£ng tráº¯ng á»Ÿ cuá»‘i chuá»—i, trong khi&nbsp;<code>CHAR</code>&nbsp;sáº½ xÃ³a chÃºng.</p>
<h3>Thá»i gian vÃ  ngÃ y thÃ¡ng</h3>
<p>MySQL cung cáº¥p hai loáº¡i ngÃ y thÃ¡ng tÆ°Æ¡ng tá»± nhau:&nbsp;<code>DATATIME</code>&nbsp;vÃ &nbsp;<code>TIMESTAMP</code>.</p>
<h4>DATATIME</h4>
<p>CÃ³ thá»ƒ lÆ°u trá»¯ ngÃ y thÃ¡ng vÃ  thá»i gian tá»« nÄƒm 1001 Ä‘áº¿n nÄƒm 9999, vá»›i Ä‘á»™ chÃ­nh xÃ¡c Ä‘áº¿n giÃ¢y, sá»­ dá»¥ng 8 byte khÃ´ng gian lÆ°u trá»¯.</p>
<p>NÃ³ khÃ´ng phá»¥ thuá»™c vÃ o mÃºi giá».</p>
<p>Máº·c Ä‘á»‹nh, MySQL hiá»ƒn thá»‹ giÃ¡ trá»‹ DATATIME dÆ°á»›i dáº¡ng cÃ³ thá»ƒ sáº¯p xáº¿p, khÃ´ng gÃ¢y hiá»ƒu láº§m, vÃ­ dá»¥: "2008-01-16 22:37:08", Ä‘Ã¢y lÃ  cÃ¡ch biá»ƒu diá»…n ngÃ y thÃ¡ng vÃ  thá»i gian Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a bá»Ÿi tiÃªu chuáº©n ANSI.</p>
<h4>TIMESTAMP</h4>
<p>TÆ°Æ¡ng tá»± nhÆ° dáº¥u thá»i gian UNIX, lÆ°u trá»¯ sá»‘ giÃ¢y ká»ƒ tá»« nÄƒm 1970, sá»­ dá»¥ng 4 byte, chá»‰ cÃ³ thá»ƒ biá»ƒu diá»…n tá»« nÄƒm 1970 Ä‘áº¿n nÄƒm 2038.</p>
<p>NÃ³ phá»¥ thuá»™c vÃ o mÃºi giá», cÃ³ nghÄ©a lÃ  má»™t dáº¥u thá»i gian cÃ³ thá»ƒ Ä‘áº¡i diá»‡n cho thá»i gian cá»¥ thá»ƒ khÃ¡c nhau trong cÃ¡c mÃºi giá» khÃ¡c nhau.</p>
<p>MySQL cung cáº¥p hÃ m FROM_UNIXTIME() Ä‘á»ƒ chuyá»ƒn Ä‘á»•i dáº¥u thá»i gian UNIX thÃ nh ngÃ y thÃ¡ng vÃ  cung cáº¥p hÃ m UNIX_TIMESTAMP() Ä‘á»ƒ chuyá»ƒn Ä‘á»•i ngÃ y thÃ¡ng thÃ nh dáº¥u thá»i gian UNIX.</p>
<p>Máº·c Ä‘á»‹nh, náº¿u khÃ´ng chá»‰ Ä‘á»‹nh giÃ¡ trá»‹ cá»™t TIMESTAMP khi chÃ¨n, giÃ¡ trá»‹ nÃ y sáº½ Ä‘Æ°á»£c Ä‘áº·t thÃ nh thá»i gian hiá»‡n táº¡i.</p>
<p>NÃªn sá»­ dá»¥ng TIMESTAMP náº¿u cÃ³ thá»ƒ, vÃ¬ nÃ³ cÃ³ hiá»‡u suáº¥t cao hÆ¡n so vá»›i DATETIME.</p>
<h3>BLOB vÃ  TEXT</h3>
<p><code>BLOB</code>&nbsp;vÃ &nbsp;<code>TEXT</code>&nbsp;Ä‘á»u Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u lá»›n, cÃ¡i trÆ°á»›c lÃ  dá»¯ liá»‡u nhá»‹ phÃ¢n, cÃ¡i sau lÃ  dá»¯ liá»‡u chuá»—i.</p>
<p>KhÃ´ng thá»ƒ sáº¯p xáº¿p hoáº·c táº¡o chá»‰ má»¥c cho toÃ n bá»™ ná»™i dung cá»§a kiá»ƒu&nbsp;<code>BLOB</code>&nbsp;vÃ &nbsp;<code>TEXT</code>.</p>
<h3>Kiá»ƒu enum</h3>
<p>Trong háº§u háº¿t cÃ¡c trÆ°á»ng há»£p, khÃ´ng cáº§n sá»­ dá»¥ng kiá»ƒu enum. Má»™t trong nhá»¯ng nhÆ°á»£c Ä‘iá»ƒm cá»§a kiá»ƒu enum lÃ  danh sÃ¡ch chuá»—i enum lÃ  cá»‘ Ä‘á»‹nh, viá»‡c thÃªm vÃ  xÃ³a chuá»—i (lá»±a chá»n enum) pháº£i sá»­ dá»¥ng&nbsp;<code>ALTER TABLE</code>&nbsp;(náº¿u chá»‰ thÃªm vÃ o cuá»‘i danh sÃ¡ch, khÃ´ng cáº§n xÃ¢y dá»±ng láº¡i báº£ng).</p>
<h3>Lá»±a chá»n kiá»ƒu dá»¯ liá»‡u</h3>
<ul>
<li>Kiá»ƒu sá»‘ nguyÃªn thÆ°á»ng lÃ  lá»±a chá»n tá»‘t nháº¥t cho cá»™t Ä‘á»‹nh danh, vÃ¬ chÃºng nhanh chÃ³ng vÃ  cÃ³ thá»ƒ sá»­ dá»¥ng&nbsp;<code>AUTO_INCREMENT</code>.</li>
<li>Kiá»ƒu&nbsp;<code>ENUM</code>&nbsp;vÃ &nbsp;<code>SET</code>&nbsp;thÆ°á»ng lÃ  lá»±a chá»n tá»“i, nÃªn trÃ¡nh sá»­ dá»¥ng chÃºng.</li>
<li>NÃªn trÃ¡nh sá»­ dá»¥ng kiá»ƒu chuá»—i lÃ m cá»™t Ä‘á»‹nh danh, vÃ¬ chÃºng chiáº¿m khÃ´ng gian vÃ  thÆ°á»ng cháº­m hÆ¡n kiá»ƒu sá»‘. Äá»‘i vá»›i cÃ¡c chuá»—i ngáº«u nhiÃªn nhÆ°&nbsp;<code>MD5</code>,&nbsp;<code>SHA</code>,&nbsp;<code>UUID</code>, do tÃ­nh ngáº«u nhiÃªn, nÃªn lÆ°u trá»¯ dÆ°á»›i dáº¡ng sá»‘ lÆ°á»£ng lá»›n, cÃ³ thá»ƒ sá»­ dá»¥ng&nbsp;<code>BIGINT</code>&nbsp;thay cho&nbsp;<code>DECIMAL</code>. Äá»ƒ lÆ°u trá»¯ UUID, nÃªn xÃ³a dáº¥u&nbsp;<code>-</code>; cÃ¡ch tá»‘t hÆ¡n lÃ  chuyá»ƒn Ä‘á»•i giÃ¡ trá»‹ UUID thÃ nh sá»‘ 16 byte báº±ng cÃ¡ch sá»­ dá»¥ng hÃ m&nbsp;<code>UNHEX()</code>&nbsp;vÃ  lÆ°u trá»¯ trong cá»™t&nbsp;<code>BINARY(16)</code>, khi truy váº¥n, cÃ³ thá»ƒ Ä‘á»‹nh dáº¡ng láº¡i thÃ nh Ä‘á»‹nh dáº¡ng hexa báº±ng cÃ¡ch sá»­ dá»¥ng hÃ m&nbsp;<code>HEX()</code>.</li>
</ul>
<h2>Chá»‰ má»¥c</h2>
<p>Chi tiáº¿t xem:&nbsp;<a href="mysql-index">MySQL Index</a></p>
<h2>KhÃ³a</h2>
<p>Chi tiáº¿t xem:&nbsp;<a href="locks">MySQL Locks</a></p>
<h2>Giao dá»‹ch</h2>
<p>Chi tiáº¿t xem:&nbsp;<a href="transactions">MySQL Transactions</a></p>
<h2>Tá»‘i Æ°u hiá»‡u suáº¥t</h2>
<p>Chi tiáº¿t xem:&nbsp;<a href="performance-optimization">MySQL Performance Optimization</a></p>
<h2>Replication</h2>
<h3>Sao chÃ©p Master-Slave</h3>
<p>MySQL há»— trá»£ hai phÆ°Æ¡ng phÃ¡p sao chÃ©p: sao chÃ©p dá»±a trÃªn hÃ ng vÃ  sao chÃ©p dá»±a trÃªn cÃ¢u lá»‡nh.</p>
<p>Cáº£ hai phÆ°Æ¡ng phÃ¡p Ä‘á»u ghi láº¡i nháº­t kÃ½ nhá»‹ phÃ¢n trÃªn mÃ¡y chá»§ chÃ­nh vÃ  sau Ä‘Ã³ cháº¡y láº¡i nháº­t kÃ½ trÃªn mÃ¡y chá»§ phá»¥ Ä‘á»ƒ thá»±c hiá»‡n sao chÃ©p dá»¯ liá»‡u khÃ´ng Ä‘á»“ng bá»™. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  quÃ¡ trÃ¬nh sao chÃ©p cÃ³ Ä‘á»™ trá»… vÃ  trong khoáº£ng thá»i gian nÃ y, dá»¯ liá»‡u trÃªn mÃ¡y chá»§ chÃ­nh vÃ  mÃ¡y chá»§ phá»¥ cÃ³ thá»ƒ khÃ´ng nháº¥t quÃ¡n.</p>
<p>Chá»§ yáº¿u liÃªn quan Ä‘áº¿n ba luá»“ng: luá»“ng nháº­t kÃ½ nhá»‹ phÃ¢n, luá»“ng I/O vÃ  luá»“ng SQL.</p>
<ul>
<li><strong>Luá»“ng nháº­t kÃ½ nhá»‹ phÃ¢n</strong>: Äáº£m nhiá»‡m viá»‡c ghi dá»¯ liá»‡u thay Ä‘á»•i tá»« mÃ¡y chá»§ chÃ­nh vÃ o tá»‡p nháº­t kÃ½ nhá»‹ phÃ¢n (binlog).</li>
<li><strong>Luá»“ng I/O</strong>: Äáº£m nhiá»‡m Ä‘á»c tá»‡p nháº­t kÃ½ nhá»‹ phÃ¢n tá»« mÃ¡y chá»§ chÃ­nh vÃ  ghi vÃ o nháº­t kÃ½ chuyá»ƒn tiáº¿p trÃªn mÃ¡y chá»§ phá»¥.</li>
<li><strong>Luá»“ng SQL</strong>: Äáº£m nhiá»‡m Ä‘á»c nháº­t kÃ½ chuyá»ƒn tiáº¿p vÃ  thá»±c thi cÃ¡c cÃ¢u lá»‡nh SQL.</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721153816.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<h3>PhÃ¢n tÃ¡ch Ä‘á»c ghi</h3>
<p>MÃ¡y chá»§ chÃ­nh Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xá»­ lÃ½ cÃ¡c hoáº¡t Ä‘á»™ng ghi vÃ  cÃ¡c hoáº¡t Ä‘á»™ng Ä‘á»c cÃ³ yÃªu cáº§u thá»i gian thá»±c cao, trong khi mÃ¡y chá»§ phá»¥ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xá»­ lÃ½ cÃ¡c hoáº¡t Ä‘á»™ng Ä‘á»c.</p>
<p>PhÃ¢n tÃ¡ch Ä‘á»c ghi thÆ°á»ng Ä‘Æ°á»£c thá»±c hiá»‡n thÃ´ng qua proxy, trong Ä‘Ã³ mÃ¡y chá»§ proxy nháº­n cÃ¡c yÃªu cáº§u Ä‘á»c vÃ  ghi tá»« á»©ng dá»¥ng, sau Ä‘Ã³ quyáº¿t Ä‘á»‹nh chuyá»ƒn tiáº¿p yÃªu cáº§u Ä‘áº¿n mÃ¡y chá»§ nÃ o.</p>
<p>PhÃ¢n tÃ¡ch Ä‘á»c ghi trong MySQL cÃ³ thá»ƒ cáº£i thiá»‡n hiá»‡u suáº¥t vÃ¬:</p>
<ul>
<li>MÃ¡y chá»§ chÃ­nh vÃ  mÃ¡y chá»§ phá»¥ chá»‹u trÃ¡ch nhiá»‡m cho cÃ¡c hoáº¡t Ä‘á»™ng Ä‘á»c vÃ  ghi riÃªng biá»‡t, giáº£m Ä‘Ã¡ng ká»ƒ sá»± cáº¡nh tranh khÃ³a;</li>
<li>MÃ¡y chá»§ phá»¥ cÃ³ thá»ƒ Ä‘Æ°á»£c cáº¥u hÃ¬nh Ä‘á»ƒ sá»­ dá»¥ng há»‡ thá»‘ng lÆ°u trá»¯ MyISAM, cáº£i thiá»‡n hiá»‡u suáº¥t truy váº¥n vÃ  tiáº¿t kiá»‡m tÃ i nguyÃªn há»‡ thá»‘ng;</li>
<li>TÄƒng tÃ­nh dá»± phÃ²ng, cáº£i thiá»‡n kháº£ nÄƒng sáºµn cÃ³.</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/master-slave-proxy.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721153816.png" type="image/png"/>
    </item>
    <item>
      <title>Lock</title>
      <link>https://vanhung4499.github.io/database/mysql/lock.html</link>
      <guid>https://vanhung4499.github.io/database/mysql/lock.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Lock</source>
      <description>MySQL Lock KhÃ³a láº¡c quan vÃ  khÃ³a bi quan Äáº£m báº£o khÃ´ng lÃ m há»ng tÃ­nh cÃ´ láº­p, tÃ­nh thá»‘ng nháº¥t vÃ  tÃ­nh thá»‘ng nháº¥t cá»§a cÆ¡ sá»Ÿ dá»¯ liá»‡u khi nhiá»u giao dá»‹ch truy cáº­p cÃ¹ng má»™t dá»¯ liá»‡u t...</description>
      <category>mysql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>KhÃ³a láº¡c quan vÃ  khÃ³a bi quan</h2>
<p>Äáº£m báº£o khÃ´ng lÃ m há»ng tÃ­nh cÃ´ láº­p, tÃ­nh thá»‘ng nháº¥t vÃ  tÃ­nh thá»‘ng nháº¥t cá»§a cÆ¡ sá»Ÿ dá»¯ liá»‡u khi nhiá»u giao dá»‹ch truy cáº­p cÃ¹ng má»™t dá»¯ liá»‡u trong cÃ¹ng má»™t thá»i Ä‘iá»ƒm, <strong>khÃ³a láº¡c quan vÃ  khÃ³a bi quan lÃ  cÃ¡c phÆ°Æ¡ng phÃ¡p ká»¹ thuáº­t Ä‘Æ°á»£c sá»­ dá»¥ng chÃ­nh cho kiá»ƒm soÃ¡t Ä‘á»“ng thá»i</strong>.</p>
<ul>
<li><strong><code>KhÃ³a bi quan</code></strong> - Giáº£ Ä‘á»‹nh xáº£y ra xung Ä‘á»™t Ä‘á»“ng thá»i vÃ  cháº·n má»i hoáº¡t Ä‘á»™ng cÃ³ thá»ƒ vi pháº¡m tÃ­nh toÃ n váº¹n dá»¯ liá»‡u.
<ul>
<li>KhÃ³a giao dá»‹ch ngay sau khi truy váº¥n dá»¯ liá»‡u, vÃ  chá»‰ má»Ÿ khÃ³a khi giao dá»‹ch Ä‘Æ°á»£c cam káº¿t (<code>COMMIT</code>).</li>
<li>CÃ¡ch thá»±c hiá»‡n: <strong>Sá»­ dá»¥ng cÆ¡ cháº¿ khÃ³a trong cÆ¡ sá»Ÿ dá»¯ liá»‡u</strong>.</li>
</ul>
</li>
<li><strong><code>KhÃ³a láº¡c quan</code></strong> - Giáº£ Ä‘á»‹nh khÃ´ng xáº£y ra xung Ä‘á»™t Ä‘á»“ng thá»i vÃ  chá»‰ kiá»ƒm tra vi pháº¡m tÃ­nh toÃ n váº¹n dá»¯ liá»‡u khi thá»±c hiá»‡n thao tÃ¡c gá»­i Ä‘i.
<ul>
<li>KhÃ³a giao dá»‹ch khi thay Ä‘á»•i dá»¯ liá»‡u vÃ  sá»­ dá»¥ng phiÃªn báº£n Ä‘á»ƒ khÃ³a.</li>
<li>CÃ¡ch thá»±c hiá»‡n: <strong>Sá»­ dá»¥ng phiÃªn báº£n hoáº·c dáº¥u thá»i gian</strong>.</li>
</ul>
</li>
</ul>
<p>ã€VÃ­ dá»¥ã€‘VÃ­ dá»¥ vá» khÃ³a láº¡c quan</p>
<p>Báº£ng hÃ ng hÃ³a (goods) cÃ³ má»™t trÆ°á»ng status, trong Ä‘Ã³ status = 1 cho biáº¿t hÃ ng hÃ³a chÆ°a Ä‘Æ°á»£c Ä‘áº·t hÃ ng, status = 2 cho biáº¿t hÃ ng hÃ³a Ä‘Ã£ Ä‘Æ°á»£c Ä‘áº·t hÃ ng, vÃ¬ váº­y khi Ä‘áº·t hÃ ng cho má»™t máº·t hÃ ng cáº§n Ä‘áº£m báº£o status cá»§a máº·t hÃ ng Ä‘Ã³ lÃ  1. Giáº£ sá»­ id cá»§a máº·t hÃ ng lÃ  1.</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD">status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#C678DD;--shiki-dark:#C678DD">status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#C678DD;--shiki-dark:#C678DD">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> t_goods </span><span style="color:#C678DD;--shiki-dark:#C678DD">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">#{id}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">update</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> t_goods</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">set</span><span style="color:#C678DD;--shiki-dark:#C678DD"> status</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#C678DD;--shiki-dark:#C678DD">version</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">+</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">#{id} </span><span style="color:#C678DD;--shiki-dark:#C678DD">and</span><span style="color:#C678DD;--shiki-dark:#C678DD"> version</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">#{</span><span style="color:#C678DD;--shiki-dark:#C678DD">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">};</span></span></code></pre>
</div><h2>KhÃ³a báº£ng vÃ  khÃ³a hÃ ng</h2>
<p>Dá»±a trÃªn pháº¡m vi khÃ³a cá»§a cÆ¡ sá»Ÿ dá»¯ liá»‡u, MySQL cung cáº¥p hai loáº¡i khÃ³a: khÃ³a hÃ ng vÃ  khÃ³a báº£ng.</p>
<ul>
<li><strong>KhÃ³a báº£ng (table lock)</strong> - KhÃ³a toÃ n bá»™ báº£ng. TrÆ°á»›c khi ngÆ°á»i dÃ¹ng thá»±c hiá»‡n thao tÃ¡c ghi trÃªn báº£ng, cáº§n cÃ³ khÃ³a ghi, Ä‘iá»u nÃ y sáº½ cháº·n táº¥t cáº£ cÃ¡c hoáº¡t Ä‘á»™ng Ä‘á»c vÃ  ghi cá»§a ngÆ°á»i dÃ¹ng khÃ¡c trÃªn báº£ng Ä‘Ã³. Chá»‰ khi khÃ´ng cÃ³ khÃ³a ghi, ngÆ°á»i dÃ¹ng khÃ¡c má»›i cÃ³ thá»ƒ nháº­n Ä‘Æ°á»£c khÃ³a Ä‘á»c vÃ  cÃ¡c khÃ³a Ä‘á»c khÃ´ng cháº·n láº«n nhau.</li>
<li><strong>KhÃ³a hÃ ng (row lock)</strong> - KhÃ³a cÃ¡c báº£n ghi hÃ ng Ä‘á»‹nh. Äiá»u nÃ y cho phÃ©p cÃ¡c tiáº¿n trÃ¬nh khÃ¡c váº«n cÃ³ thá»ƒ thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng trÃªn cÃ¡c báº£n ghi khÃ¡c trong cÃ¹ng má»™t báº£ng.</li>
</ul>
<p>NÃªn chá»‰ khÃ³a cÃ¡c dá»¯ liá»‡u cáº§n thay Ä‘á»•i, khÃ´ng pháº£i táº¥t cáº£ tÃ i nguyÃªn. <strong>CÃ ng khÃ³a Ã­t dá»¯ liá»‡u, táº§n suáº¥t cáº¡nh tranh khÃ³a cÃ ng Ã­t, Ä‘á»™ Ä‘á»“ng thá»i cá»§a há»‡ thá»‘ng cÃ ng cao</strong>. Tuy nhiÃªn, viá»‡c khÃ³a cáº§n tiÃªu tá»‘n tÃ i nguyÃªn vÃ  cÃ¡c hoáº¡t Ä‘á»™ng liÃªn quan Ä‘áº¿n khÃ³a (bao gá»“m láº¥y khÃ³a, giáº£i phÃ³ng khÃ³a vÃ  kiá»ƒm tra tráº¡ng thÃ¡i khÃ³a) Ä‘á»u lÃ m tÄƒng chi phÃ­ cá»§a há»‡ thá»‘ng. Do Ä‘Ã³, <strong>Ä‘á»™ Ä‘á»“ng thá»i cá»§a khÃ³a cÃ ng nhá», chi phÃ­ cá»§a há»‡ thá»‘ng cÃ ng lá»›n</strong>.</p>
<p>Khi chá»n má»©c Ä‘á»™ chi tiáº¿t cá»§a khÃ³a, cáº§n pháº£i cÃ¢n báº±ng giá»¯a chi phÃ­ khÃ³a vÃ  Ä‘á»™ Ä‘á»“ng thá»i cá»§a há»‡ thá»‘ng.</p>
<p>Trong <code>InnoDB</code>, <strong>khÃ³a hÃ ng Ä‘Æ°á»£c thá»±c hiá»‡n báº±ng cÃ¡ch khÃ³a cÃ¡c má»¥c nháº­p chá»‰ má»¥c (index entry) trÃªn chá»‰ má»¥c (index)</strong>. <strong>Náº¿u khÃ´ng cÃ³ chá»‰ má»¥c, <code>InnoDB</code> sáº½ khÃ³a báº£n ghi thÃ´ng qua chá»‰ má»¥c cá»¥m áº©n</strong>.</p>
<h2>KhÃ³a Ä‘á»c vÃ  khÃ³a ghi</h2>
<ul>
<li>KhÃ³a Ä‘á»™c quyá»n (Exclusive), viáº¿t táº¯t lÃ  khÃ³a X, cÃ²n Ä‘Æ°á»£c gá»i lÃ  khÃ³a ghi. CÃ¡ch sá»­ dá»¥ng: <code>SELECT â€¦ FOR UPDATE;</code></li>
<li>KhÃ³a chia sáº» (Shared), viáº¿t táº¯t lÃ  khÃ³a S, cÃ²n Ä‘Æ°á»£c gá»i lÃ  khÃ³a Ä‘á»c. CÃ¡ch sá»­ dá»¥ng: <code>SELECT â€¦ LOCK IN SHARE MODE;</code></li>
</ul>
<p>Má»‘i quan há»‡ giá»¯a khÃ³a ghi vÃ  khÃ³a Ä‘á»c, nÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n: <strong>Khi cÃ³ khÃ³a Ä‘á»™c quyá»n tá»“n táº¡i, cÃ¡c giao dá»‹ch khÃ¡c khÃ´ng thá»ƒ thá»±c hiá»‡n báº¥t ká»³ hoáº¡t Ä‘á»™ng nÃ o</strong>.</p>
<p><strong>KhÃ³a hÃ ng, khÃ³a khoáº£ng (gap lock) vÃ  khÃ³a next-key trong <code>InnoDB</code> Ä‘á»u thuá»™c loáº¡i khÃ³a Ä‘á»™c quyá»n</strong>.</p>
<h2>KhÃ³a Ã½ Ä‘á»‹nh</h2>
<p><strong>Khi cÃ³ khÃ³a báº£ng vÃ  khÃ³a hÃ ng cÃ¹ng tá»“n táº¡i, trÆ°á»›c tiÃªn pháº£i yÃªu cáº§u khÃ³a Ã½ Ä‘á»‹nh (khÃ³a báº£ng, nhÆ°ng khÃ´ng pháº£i khÃ³a thá»±c sá»±), sau Ä‘Ã³ má»›i nháº­n Ä‘Æ°á»£c khÃ³a hÃ ng</strong>. Sá»­ dá»¥ng khÃ³a Ã½ Ä‘á»‹nh (Intention Lock) cÃ³ thá»ƒ dá»… dÃ ng há»— trá»£ nhiá»u má»©c khÃ³a.</p>
<p><strong>KhÃ³a Ã½ Ä‘á»‹nh Ä‘Æ°á»£c <code>InnoDB</code> tá»± Ä‘á»™ng thÃªm vÃ o, khÃ´ng cáº§n can thiá»‡p cá»§a ngÆ°á»i dÃ¹ng</strong>.</p>
<p>Khi cÃ³ khÃ³a hÃ ng vÃ  khÃ³a báº£ng, giao dá»‹ch T muá»‘n khÃ³a báº£ng A báº±ng khÃ³a X, chá»‰ cáº§n kiá»ƒm tra xem cÃ³ giao dá»‹ch khÃ¡c Ä‘Ã£ khÃ³a báº£ng A hoáº·c má»™t hÃ ng nÃ o Ä‘Ã³ trong báº£ng A báº±ng khÃ³a X/IX/S/IS chÆ°a. Náº¿u Ä‘Ã£ khÃ³a, cÃ³ nghÄ©a lÃ  cÃ³ giao dá»‹ch khÃ¡c Ä‘ang sá»­ dá»¥ng báº£ng nÃ y hoáº·c khÃ³a cá»§a má»™t hÃ ng trong báº£ng nÃ y, do Ä‘Ã³ giao dá»‹ch T khÃ´ng thá»ƒ khÃ³a thÃ nh cÃ´ng.</p>
<p>CÃ¡c quy táº¯c khÃ³a Ã½ Ä‘á»‹nh:</p>
<ul>
<li>IX/IS lÃ  khÃ³a báº£ng;</li>
<li>X/S lÃ  khÃ³a hÃ ng.</li>
<li>TrÆ°á»›c khi má»™t giao dá»‹ch nháº­n khÃ³a S cho má»™t hÃ ng dá»¯ liá»‡u nÃ o Ä‘Ã³, trÆ°á»›c tiÃªn pháº£i nháº­n khÃ³a IS hoáº·c khÃ³a máº¡nh hÆ¡n trÃªn báº£ng;</li>
<li>TrÆ°á»›c khi má»™t giao dá»‹ch nháº­n khÃ³a X cho má»™t hÃ ng dá»¯ liá»‡u nÃ o Ä‘Ã³, trÆ°á»›c tiÃªn pháº£i nháº­n khÃ³a IX hoáº·c khÃ³a máº¡nh hÆ¡n trÃªn báº£ng.</li>
</ul>
<p>Báº±ng cÃ¡ch giá»›i thiá»‡u khÃ³a Ã½ Ä‘á»‹nh, giao dá»‹ch T muá»‘n khÃ³a báº£ng A báº±ng khÃ³a X chá»‰ cáº§n kiá»ƒm tra xem cÃ³ giao dá»‹ch khÃ¡c Ä‘Ã£ khÃ³a A báº±ng khÃ³a X/IX/S/IS chÆ°a, náº¿u Ä‘Ã£ khÃ³a thÃ¬ cÃ³ nghÄ©a lÃ  cÃ³ giao dá»‹ch khÃ¡c Ä‘ang sá»­ dá»¥ng báº£ng nÃ y hoáº·c má»™t hÃ ng trong báº£ng nÃ y, do Ä‘Ã³ giao dá»‹ch T khÃ´ng thá»ƒ khÃ³a thÃ nh cÃ´ng.</p>
<p>CÃ¡c quan há»‡ khÃ³a khÃ¡c nhau nhÆ° sau:</p>
<table>
<thead>
<tr>
<th style="text-align:center">-</th>
<th style="text-align:center">X</th>
<th style="text-align:center">IX</th>
<th style="text-align:center">S</th>
<th style="text-align:center">IS</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">X</td>
<td style="text-align:center">âŒ</td>
<td style="text-align:center">âŒ</td>
<td style="text-align:center">âŒ</td>
<td style="text-align:center">âŒ</td>
</tr>
<tr>
<td style="text-align:center">IX</td>
<td style="text-align:center">âŒ</td>
<td style="text-align:center">âœ”ï¸</td>
<td style="text-align:center">âŒ</td>
<td style="text-align:center">âœ”ï¸</td>
</tr>
<tr>
<td style="text-align:center">S</td>
<td style="text-align:center">âŒ</td>
<td style="text-align:center">âŒ</td>
<td style="text-align:center">âœ”ï¸</td>
<td style="text-align:center">âœ”ï¸</td>
</tr>
<tr>
<td style="text-align:center">IS</td>
<td style="text-align:center">âŒ</td>
<td style="text-align:center">âœ”ï¸</td>
<td style="text-align:center">âœ”ï¸</td>
<td style="text-align:center">âœ”ï¸</td>
</tr>
</tbody>
</table>
<p>Giáº£i thÃ­ch:</p>
<ul>
<li>Báº¥t ká»³ khÃ³a IS/IX nÃ o cÅ©ng tÆ°Æ¡ng thÃ­ch vá»›i nhau, vÃ¬ chÃºng chá»‰ Ä‘áº¡i diá»‡n cho viá»‡c muá»‘n khÃ³a báº£ng, khÃ´ng pháº£i khÃ³a thá»±c sá»±;</li>
<li>Quan há»‡ tÆ°Æ¡ng thÃ­ch Ã¡p dá»¥ng cho khÃ³a cáº¥p báº£ng, trong khi khÃ³a IX cáº¥p báº£ng vÃ  khÃ³a X cáº¥p hÃ ng tÆ°Æ¡ng thÃ­ch vá»›i nhau. Hai giao dá»‹ch cÃ³ thá»ƒ Ä‘áº·t khÃ³a X trÃªn hai hÃ ng dá»¯ liá»‡u (Giao dá»‹ch T1 muá»‘n Ä‘áº·t khÃ³a X trÃªn hÃ ng R1, Giao dá»‹ch T2 muá»‘n Ä‘áº·t khÃ³a X trÃªn hÃ ng R2 cá»§a cÃ¹ng má»™t báº£ng. Cáº£ hai giao dá»‹ch Ä‘á»u cáº§n pháº£i Ä‘áº·t khÃ³a IX trÃªn báº£ng nÃ y, nhÆ°ng cÃ¡c loáº¡i khÃ³a nÃ y lÃ  tÆ°Æ¡ng thÃ­ch vÃ  tÆ°Æ¡ng thÃ­ch vá»›i khoÃ¡ X cáº¥p hÃ ng nghÄ©a lÃ  cáº£ hai giao dá»‹ch cÃ³ thá»ƒ khoÃ¡ thÃ nh cÃ´ng vÃ  chá»‰nh sá»­a hai hÃ ng dá»¯ liá»‡u trong cÃ¹ng má»™t báº£ng).</li>
</ul>
<h2>MVCC</h2>
<p><strong>Äiá»u khiá»ƒn Ä‘á»“ng thá»i Ä‘a phiÃªn báº£n (Multi-Version Concurrency Control, MVCC)</strong>&nbsp;cÃ³ thá»ƒ coi lÃ  má»™t biáº¿n thá»ƒ cá»§a khÃ³a cáº¥p hÃ ng. Trong nhiá»u trÆ°á»ng há»£p, nÃ³ trÃ¡nh Ä‘Æ°á»£c cÃ¡c hoáº¡t Ä‘á»™ng khÃ³a, do Ä‘Ã³ cÃ³ chi phÃ­ tháº¥p hÆ¡n. KhÃ´ng chá»‰ cÃ³ Mysql, cÃ¡c cÆ¡ sá»Ÿ dá»¯ liá»‡u khÃ¡c nhÆ° Oracle, PostgreSQL cÅ©ng Ä‘Ã£ triá»ƒn khai MVCC cá»§a riÃªng há», khÃ´ng cÃ³ tiÃªu chuáº©n thá»‘ng nháº¥t cho cÆ¡ cháº¿ triá»ƒn khai.</p>
<p>MVCC lÃ  má»™t cÃ¡ch cá»¥ thá»ƒ Ä‘á»ƒ triá»ƒn khai cáº¥p Ä‘á»™ cÃ´ láº­p trong Ä‘á»™ng cÆ¡ lÆ°u trá»¯ InnoDB, <strong>Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ triá»ƒn khai cáº¥p Ä‘á»™ Ä‘á»c Ä‘Ã£ cam káº¿t vÃ  Ä‘á»c láº·p láº¡i</strong>. Cáº¥p Ä‘á»™ Ä‘á»c chÆ°a cam káº¿t luÃ´n Ä‘á»c dÃ²ng dá»¯ liá»‡u má»›i nháº¥t, yÃªu cáº§u tháº¥p, khÃ´ng cáº§n sá»­ dá»¥ng MVCC. Cáº¥p Ä‘á»™ tuáº§n tá»± hÃ³a yÃªu cáº§u khÃ³a táº¥t cáº£ cÃ¡c dÃ²ng dá»¯ liá»‡u Ä‘á»c, khÃ´ng thá»ƒ triá»ƒn khai chá»‰ báº±ng MVCC.</p>
<h3>Ã tÆ°á»Ÿng cá»§a MVCC</h3>
<p>Viá»‡c khÃ³a cÃ³ thá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nháº¥t quÃ¡n Ä‘á»“ng thá»i xáº£y ra khi nhiá»u giao dá»‹ch Ä‘Æ°á»£c thá»±c hiá»‡n cÃ¹ng má»™t lÃºc. Trong cÃ¡c tÃ¬nh huá»‘ng thá»±c táº¿, thao tÃ¡c Ä‘á»c thÆ°á»ng nhiá»u hÆ¡n thao tÃ¡c ghi, do Ä‘Ã³, khÃ³a Ä‘á»c vÃ  ghi Ä‘Æ°á»£c giá»›i thiá»‡u Ä‘á»ƒ trÃ¡nh cÃ¡c hoáº¡t Ä‘á»™ng khÃ³a khÃ´ng cáº§n thiáº¿t, cháº³ng háº¡n nhÆ° khÃ´ng cÃ³ má»‘i quan há»‡ cáº¡nh tranh giá»¯a Ä‘á»c vÃ  Ä‘á»c. Thao tÃ¡c Ä‘á»c vÃ  ghi trong khÃ³a Ä‘á»c vÃ  ghi váº«n tÆ°Æ¡ng Ä‘á»‘i cáº¡nh tranh.</p>
<p>Ã tÆ°á»Ÿng cá»§a MVCC lÃ :</p>
<ul>
<li><strong>LÆ°u trá»¯ báº£n chá»¥p (snapshot) cá»§a dá»¯ liá»‡u táº¡i má»™t thá»i Ä‘iá»ƒm nÃ o Ä‘Ã³, cÃ¡c thao tÃ¡c ghi (DELETE, INSERT, UPDATE) cáº­p nháº­t báº£n chá»¥p phiÃªn báº£n má»›i nháº¥t; trong khi cÃ¡c thao tÃ¡c Ä‘á»c truy cáº­p báº£n chá»¥p phiÃªn báº£n cÅ©, khÃ´ng cÃ³ má»‘i quan há»‡ cáº¡nh tranh</strong>. Äiá»u nÃ y tÆ°Æ¡ng tá»± nhÆ°&nbsp;<code>CopyOnWrite</code>.</li>
<li>Äá»c báº©n vÃ  Ä‘á»c láº¡i khÃ´ng nháº¥t quÃ¡n lÃ  do&nbsp;<strong>giao dá»‹ch Ä‘á»c cÃ¡c thay Ä‘á»•i chÆ°a Ä‘Æ°á»£c giao dá»‹ch khÃ¡c cam káº¿t</strong>. Khi giao dá»‹ch thá»±c hiá»‡n thao tÃ¡c Ä‘á»c, Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» Ä‘á»c báº©n vÃ  Ä‘á»c khÃ´ng nháº¥t quÃ¡n,&nbsp;<strong>MVCC quy Ä‘á»‹nh chá»‰ cÃ³ thá»ƒ Ä‘á»c báº£n chá»¥p Ä‘Ã£ cam káº¿t</strong>. Táº¥t nhiÃªn, má»™t giao dá»‹ch cÃ³ thá»ƒ Ä‘á»c báº£n chá»¥p chÆ°a Ä‘Æ°á»£c cam káº¿t cá»§a chÃ­nh nÃ³, Ä‘iá»u nÃ y khÃ´ng Ä‘Æ°á»£c coi lÃ  Ä‘á»c báº©n.</li>
</ul>
<h3>Sá»‘ phiÃªn báº£n</h3>
<p>Triá»ƒn khai MVCC cá»§a InnoDB lÃ : lÆ°u trá»¯ hai cá»™t áº©n sau má»—i dÃ²ng ghi, má»™t cá»™t lÆ°u trá»¯ thá»i gian táº¡o dÃ²ng, cá»™t cÃ²n láº¡i lÆ°u trá»¯ thá»i gian háº¿t háº¡n cá»§a dÃ²ng (thá»i gian á»Ÿ Ä‘Ã¢y cÃ³ nghÄ©a lÃ  sá»‘ phiÃªn báº£n há»‡ thá»‘ng). Má»—i khi báº¯t Ä‘áº§u má»™t giao dá»‹ch má»›i, sá»‘ phiÃªn báº£n há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng tÄƒng lÃªn, sá»‘ phiÃªn báº£n há»‡ thá»‘ng táº¡i thá»i Ä‘iá»ƒm báº¯t Ä‘áº§u giao dá»‹ch sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng lÃ m sá»‘ phiÃªn báº£n cá»§a giao dá»‹ch, Ä‘á»ƒ so sÃ¡nh vá»›i sá»‘ phiÃªn báº£n cá»§a má»—i dÃ²ng ghi Ä‘Æ°á»£c truy váº¥n.</p>
<ul>
<li>Sá»‘ phiÃªn báº£n há»‡ thá»‘ng&nbsp;<code>SYS_ID</code>: lÃ  má»™t sá»‘ tÄƒng dáº§n, má»—i khi báº¯t Ä‘áº§u má»™t giao dá»‹ch má»›i, sá»‘ phiÃªn báº£n há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng tÄƒng lÃªn.</li>
<li>Sá»‘ phiÃªn báº£n giao dá»‹ch&nbsp;<code>TRX_ID</code>: sá»‘ phiÃªn báº£n há»‡ thá»‘ng táº¡i thá»i Ä‘iá»ƒm báº¯t Ä‘áº§u giao dá»‹ch.</li>
</ul>
<h3>Undo log</h3>
<p>MVCC cá»§a nhiá»u phiÃªn báº£n Ä‘á» cáº­p Ä‘áº¿n viá»‡c lÆ°u trá»¯ nhiá»u báº£n chá»¥p, báº£n chá»¥p Ä‘Æ°á»£c lÆ°u trá»¯ trong Undo log, log nÃ y káº¿t ná»‘i táº¥t cáº£ cÃ¡c báº£n chá»¥p cá»§a má»™t dÃ²ng dá»¯ liá»‡u thÃ´ng qua con trá» rollback&nbsp;<code>ROLL_PTR</code>.</p>
<p>VÃ­ dá»¥, trong MySQL, táº¡o má»™t báº£ng t, bao gá»“m khÃ³a chÃ­nh id vÃ  má»™t trÆ°á»ng x. ChÃºng ta chÃ¨n má»™t dÃ²ng dá»¯ liá»‡u trÆ°á»›c, sau Ä‘Ã³ thá»±c hiá»‡n hai láº§n cáº­p nháº­t trÃªn dÃ²ng Ä‘Ã³.</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> t(id, x) </span><span style="color:#C678DD;--shiki-dark:#C678DD">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">UPDATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> t </span><span style="color:#C678DD;--shiki-dark:#C678DD">SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> x</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">"b"</span><span style="color:#C678DD;--shiki-dark:#C678DD"> WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">UPDATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> t </span><span style="color:#C678DD;--shiki-dark:#C678DD">SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> x</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">"c"</span><span style="color:#C678DD;--shiki-dark:#C678DD"> WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>VÃ¬ khÃ´ng sá»­ dá»¥ng&nbsp;<code>START TRANSACTION</code>&nbsp;Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng trÃªn nhÆ° má»™t giao dá»‹ch, theo cÆ¡ cháº¿&nbsp;<code>AUTOCOMMIT</code>&nbsp;cá»§a MySQL, má»—i hoáº¡t Ä‘á»™ng sáº½ Ä‘Æ°á»£c coi lÃ  má»™t giao dá»‹ch, vÃ¬ váº­y tá»•ng cá»™ng cÃ³ ba giao dá»‹ch.<br>
Trong báº£n chá»¥p, ngoÃ i viá»‡c ghi láº¡i sá»‘ phiÃªn báº£n cá»§a giao dá»‹ch <code>TRX_ID</code> vÃ  cÃ¡c hoáº¡t Ä‘á»™ng, cÃ²n cÃ³ má»™t trÆ°á»ng DEL kiá»ƒu bit Ä‘á»ƒ Ä‘Ã¡nh dáº¥u xem liá»‡u nÃ³ Ä‘Ã£ bá»‹ xÃ³a hay chÆ°a.</p>
<p><code>INSERT</code>, <code>UPDATE</code>, vÃ  <code>DELETE</code> sáº½ táº¡o ra má»™t báº£n ghi nháº­t kÃ½ vÃ  ghi sá»‘ phiÃªn báº£n giao dá»‹ch <code>TRX_ID</code>. <code>DELETE</code> cÃ³ thá»ƒ coi lÃ  má»™t loáº¡i Ä‘áº·c biá»‡t cá»§a <code>UPDATE</code>, ngoÃ i ra cÃ²n thiáº¿t láº­p trÆ°á»ng DEL thÃ nh 1.</p>
<h3>ReadView</h3>
<p>MVCC duy trÃ¬ má»™t&nbsp;<code>consistent read view</code>, chá»©a danh sÃ¡ch cÃ¡c giao dá»‹ch chÆ°a Ä‘Æ°á»£c cam káº¿t trong há»‡ thá»‘ng&nbsp;<code>TRX_IDs {TRX_ID_1, TRX_ID_2, â€¦}</code>, cÃ¹ng vá»›i giÃ¡ trá»‹ nhá» nháº¥t vÃ  lá»›n nháº¥t cá»§a danh sÃ¡ch Ä‘Ã³&nbsp;<code>TRX_ID_MIN</code>&nbsp;vÃ &nbsp;<code>TRX_ID_MAX</code>.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/mysql-mvcc-readview.png" alt="mysql-mvcc-readview.png" tabindex="0" loading="lazy"><figcaption>mysql-mvcc-readview.png</figcaption></figure>
<p>NhÆ° váº­y, Ä‘á»‘i vá»›i thá»i Ä‘iá»ƒm báº¯t Ä‘áº§u cá»§a giao dá»‹ch hiá»‡n táº¡i, má»™t phiÃªn báº£n dá»¯ liá»‡u hÃ ng <code>trx_id</code> cÃ³ thá»ƒ cÃ³ cÃ¡c trÆ°á»ng há»£p sau:</p>
<ol>
<li>Náº¿u náº±m trong pháº§n mÃ u xanh lÃ¡ cÃ¢y, Ä‘Ã³ chá»‰ lÃ  phiÃªn báº£n cá»§a má»™t giao dá»‹ch Ä‘Ã£ Ä‘Æ°á»£c cam káº¿t hoáº·c Ä‘Æ°á»£c táº¡o bá»Ÿi chÃ­nh giao dá»‹ch hiá»‡n táº¡i, dá»¯ liá»‡u nÃ y cÃ³ thá»ƒ nhÃ¬n tháº¥y.</li>
<li>Náº¿u náº±m trong pháº§n mÃ u Ä‘á», Ä‘Ã³ chá»‰ lÃ  phiÃªn báº£n Ä‘Æ°á»£c táº¡o bá»Ÿi má»™t giao dá»‹ch sáº½ Ä‘Æ°á»£c khá»Ÿi Ä‘á»™ng trong tÆ°Æ¡ng lai, nÃ³ cháº¯c cháº¯n khÃ´ng thá»ƒ nhÃ¬n tháº¥y.</li>
<li>Náº¿u náº±m trong pháº§n mÃ u cam, cÃ³ hai trÆ°á»ng há»£p:
<ul>
<li>Náº¿u hÃ ng <code>trx_id</code> cÃ³ trong máº£ng, Ä‘Ã³ chá»‰ lÃ  phiÃªn báº£n Ä‘Æ°á»£c táº¡o bá»Ÿi má»™t giao dá»‹ch chÆ°a Ä‘Æ°á»£c cam káº¿t, khÃ´ng thá»ƒ nhÃ¬n tháº¥y.</li>
<li>Náº¿u hÃ ng <code>trx_id</code> khÃ´ng cÃ³ trong máº£ng, Ä‘Ã³ chá»‰ lÃ  phiÃªn báº£n Ä‘Æ°á»£c táº¡o bá»Ÿi má»™t giao dá»‹ch Ä‘Ã£ Ä‘Æ°á»£c cam káº¿t, cÃ³ thá»ƒ nhÃ¬n tháº¥y.</li>
</ul>
</li>
</ol>
<p>Khi thá»±c hiá»‡n thao tÃ¡c&nbsp;<code>SELECT</code>, ta cÃ³ thá»ƒ xÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c kháº£ nÄƒng sá»­ dá»¥ng báº£n chá»¥p hÃ ng dá»¯ liá»‡u dá»±a trÃªn má»‘i quan há»‡ giá»¯a <code>TRX_ID</code> cá»§a báº£n chá»¥p vÃ  <code>TRX_ID_MIN</code> cÅ©ng nhÆ° <code>TRX_ID_MAX</code>.</p>
<ul>
<li><code>TRX_ID</code>&nbsp;&lt;&nbsp;<code>TRX_ID_MIN</code>, Ä‘Ã³ lÃ  phiÃªn báº£n dÃ²ng dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c thay Ä‘á»•i trÆ°á»›c táº¥t cáº£ cÃ¡c giao dá»‹ch chÆ°a Ä‘Æ°á»£c cam káº¿t hiá»‡n táº¡i, do Ä‘Ã³ cÃ³ thá»ƒ sá»­ dá»¥ng.</li>
<li><code>TRX_ID</code>&nbsp;&gt;&nbsp;<code>TRX_ID_MAX</code>, Ä‘Ã³ lÃ  phiÃªn báº£n dÃ²ng dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c thay Ä‘á»•i sau khi giao dá»‹ch báº¯t Ä‘áº§u, do Ä‘Ã³ khÃ´ng thá»ƒ sá»­ dá»¥ng.</li>
<li><code>TRX_ID_MIN</code>&nbsp;&lt;=&nbsp;<code>TRX_ID</code>&nbsp;&lt;=&nbsp;<code>TRX_ID_MAX</code>, cáº§n xÃ¡c Ä‘á»‹nh dá»±a trÃªn cáº¥p Ä‘á»™ cÃ´ láº­p:
<ul>
<li>Äá»c Ä‘Ã£ cam káº¿t: Náº¿u&nbsp;<code>TRX_ID</code>&nbsp;cÃ³ trong danh sÃ¡ch&nbsp;<code>TRX_IDs</code>, Ä‘Ã³ lÃ  phiÃªn báº£n dÃ²ng dá»¯ liá»‡u tÆ°Æ¡ng á»©ng vá»›i giao dá»‹ch chÆ°a Ä‘Æ°á»£c cam káº¿t, do Ä‘Ã³ phiÃªn báº£n nÃ y khÃ´ng thá»ƒ sá»­ dá»¥ng. Náº¿u khÃ´ng, Ä‘Ã³ lÃ  phiÃªn báº£n Ä‘Ã£ Ä‘Æ°á»£c cam káº¿t, cÃ³ thá»ƒ sá»­ dá»¥ng.</li>
<li>Äá»c láº·p láº¡i: khÃ´ng thá»ƒ sá»­ dá»¥ng cáº£ hai. VÃ¬ náº¿u cÃ³ thá»ƒ sá»­ dá»¥ng, thÃ¬ cÃ¡c giao dá»‹ch khÃ¡c cÅ©ng cÃ³ thá»ƒ Ä‘á»c phiÃªn báº£n dÃ²ng dá»¯ liá»‡u nÃ y vÃ  thá»±c hiá»‡n thay Ä‘á»•i, khiáº¿n giÃ¡ trá»‹ Ä‘á»c cá»§a giao dá»‹ch hiá»‡n táº¡i thay Ä‘á»•i, tá»©c lÃ  xáº£y ra váº¥n Ä‘á» Ä‘á»c láº·p láº¡i khÃ´ng nháº¥t quÃ¡n.</li>
</ul>
</li>
</ul>
<p>Trong trÆ°á»ng há»£p khÃ´ng thá»ƒ sá»­ dá»¥ng báº£n chá»¥p hÃ ng dá»¯ liá»‡u, cáº§n tÃ¬m Ä‘áº¿n chá»‰ sá»‘ cuá»™n <code>ROLL_PTR</code> trong Undo Log Ä‘á»ƒ tÃ¬m báº£n chá»¥p tiáº¿p theo vÃ  tiáº¿n hÃ nh kiá»ƒm tra nhÆ° Ä‘Ã£ nÃªu á»Ÿ trÃªn.</p>
<h3>Äá»c báº£n chá»¥p vÃ  Ä‘á»c hiá»‡n táº¡i</h3>
<p><strong>Äá»c báº£n chá»¥p</strong></p>
<p>Thao tÃ¡c <code>SELECT</code> cá»§a MVCC lÃ  dá»¯ liá»‡u trong báº£n chá»¥p, khÃ´ng cáº§n thá»±c hiá»‡n hoáº¡t Ä‘á»™ng khÃ³a.</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD">FROM</span><span style="color:#C678DD;--shiki-dark:#C678DD"> table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ...;</span></span></code></pre>
</div><p><strong>Äá»c hiá»‡n táº¡i</strong></p>
<p>CÃ¡c hoáº¡t Ä‘á»™ng khÃ¡c cá»§a MVCC sáº½ thay Ä‘á»•i cÆ¡ sá»Ÿ dá»¯ liá»‡u (<code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>) cáº§n thá»±c hiá»‡n hoáº¡t Ä‘á»™ng khÃ³a Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u má»›i nháº¥t. CÃ³ thá»ƒ tháº¥y MVCC khÃ´ng hoÃ n toÃ n khÃ´ng sá»­ dá»¥ng khÃ³a, mÃ  chá»‰ trÃ¡nh viá»‡c Ã¡p dá»¥ng khÃ³a cho <code>SELECT</code>.</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">INSERT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">UPDATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">DELETE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>Khi thá»±c hiá»‡n thao tÃ¡c <code>SELECT</code>, cÃ³ thá»ƒ báº¯t buá»™c chá»‰ Ä‘á»‹nh thá»±c hiá»‡n khÃ³a. CÃ¢u lá»‡nh Ä‘áº§u tiÃªn yÃªu cáº§u khÃ³a S, cÃ¢u lá»‡nh thá»© hai yÃªu cáº§u khÃ³a X.</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD">FROM</span><span style="color:#C678DD;--shiki-dark:#C678DD"> table</span><span style="color:#C678DD;--shiki-dark:#C678DD"> WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ? lock </span><span style="color:#C678DD;--shiki-dark:#C678DD">in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> share mode;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD">FROM</span><span style="color:#C678DD;--shiki-dark:#C678DD"> table</span><span style="color:#C678DD;--shiki-dark:#C678DD"> WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ? </span><span style="color:#C678DD;--shiki-dark:#C678DD">for</span><span style="color:#C678DD;--shiki-dark:#C678DD"> update</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><h2>KhÃ³a hÃ ng</h2>
<p>CÃ³ ba thuáº­t toÃ¡n cá»¥ thá»ƒ Ä‘á»ƒ triá»ƒn khai khÃ³a hÃ ng (row lock): khÃ³a báº£n ghi (record lock), KhoÃ¡ khoáº£ng (gap lock) vÃ  khÃ³a next-key.</p>
<ul>
<li><code>KhÃ³a báº£n ghi (Record Lock)</code> - <strong>KhÃ³a hÃ ng báº±ng cÃ¡ch khÃ³a cÃ¡c má»¥c chá»‰ má»¥c (index entry), náº¿u khÃ´ng cÃ³ chá»‰ má»¥c thÃ¬ sá»­ dá»¥ng khÃ³a báº£ng</strong>.</li>
<li><code>KhoÃ¡ khoáº£ng (Gap Lock)</code> - <strong>KhoÃ¡ khoáº£ng giá»¯a cÃ¡c má»¥c chá»‰ má»¥c (index entry)</strong>. KhoÃ¡ khoáº£ng giá»¯a cÃ¡c má»¥c chá»‰ má»¥c, nhÆ°ng khÃ´ng bao gá»“m chÃ­nh má»¥c chá»‰ má»¥c Ä‘Ã³. VÃ­ dá»¥, khi má»™t giao dá»‹ch thá»±c hiá»‡n cÃ¢u lá»‡nh sau, cÃ¡c giao dá»‹ch khÃ¡c khÃ´ng thá»ƒ chÃ¨n giÃ¡ trá»‹ 15 vÃ o cá»™t c trong báº£ng t: <code>SELECT c FROM t WHERE c BETWEEN 10 and 20 FOR UPDATE;</code>. Trong MySQL, KhoÃ¡ khoáº£ng máº·c Ä‘á»‹nh lÃ  Ä‘Æ°á»£c báº­t, tá»©c lÃ  giÃ¡ trá»‹ cá»§a tham sá»‘ <code>innodb_locks_unsafe_for_binlog</code> lÃ  <code>disable</code>, vÃ  máº·c Ä‘á»‹nh trong MySQL lÃ  cáº¥p Ä‘á»™ cÃ´ láº­p giao dá»‹ch RR.</li>
<li><code>KhÃ³a next-key</code> - ÄÃ¢y lÃ  sá»± káº¿t há»£p cá»§a <code>KhÃ³a báº£n ghi (record lock)</code> vÃ  <code>KhoÃ¡ khoáº£ng (gap lock)</code>. NÃ³ khÃ´ng chá»‰ khÃ³a má»™t má»¥c chá»‰ má»¥c trÃªn má»™t báº£n ghi, mÃ  cÃ²n khoÃ¡ khoáº£ng giá»¯a cÃ¡c chá»‰ má»¥c. NÃ³ khÃ³a má»™t khoáº£ng má»Ÿ phÃ­a trÆ°á»›c vÃ  Ä‘Ã³ng phÃ­a sau.</li>
</ul>
<p>Chá»‰ cÃ³ cÃ¡choáº¡t Ä‘á»™ng cá»¥ thá»ƒ trong cáº¥p Ä‘á»™ cÃ´ láº­p Ä‘á»c cÃ³ thá»ƒ láº·p láº¡i hoáº·c cao hÆ¡n má»›i sáº½ nháº­n Ä‘Æ°á»£c khÃ³a khoáº£ng (gap lock) hoáº·c khÃ³a next-key. Trong cÃ¡c cÃ¢u lá»‡nh <code>SELECT</code>, <code>UPDATE</code> vÃ  <code>DELETE</code>, ngoáº¡i trá»« cÃ¡c truy váº¥n dá»±a trÃªn chá»‰ má»¥c duy nháº¥t, cÃ¡c truy váº¥n dá»±a trÃªn chá»‰ má»¥c khÃ¡c Ä‘á»u láº¥y khoÃ¡ khoáº£ng hoáº·c khÃ³a next-key, tá»©c lÃ  khÃ³a pháº¡m vi quÃ©t cá»§a chÃºng. Chá»‰ má»¥c khÃ³a chÃ­nh cÅ©ng Ä‘Æ°á»£c coi lÃ  chá»‰ má»¥c duy nháº¥t, vÃ¬ váº­y chá»‰ má»¥c khÃ³a chÃ­nh khÃ´ng sá»­ dá»¥ng khÃ³a khoáº£ng (gap lock) hoáº·c khÃ³a next-key.</p>
<p>MVCC khÃ´ng thá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» Ä‘á»c láº¡i khÃ´ng nháº¥t quÃ¡n, <strong>khÃ³a next-key Ä‘Æ°á»£c táº¡o ra Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» Ä‘á»c láº¡i khÃ´ng nháº¥t quÃ¡n</strong>. Trong cáº¥p Ä‘á»™ cÃ´ láº­p Ä‘á»c cÃ³ thá»ƒ láº·p láº¡i (<code>REPEATABLE READ</code>), sá»­ dá»¥ng <strong>MVCC + KhÃ³a next-key</strong> cÃ³ thá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» Ä‘á»c láº¡i khÃ´ng nháº¥t quÃ¡n.</p>
<p>Chá»‰ má»¥c Ä‘Æ°á»£c chia thÃ nh chá»‰ má»¥c khÃ³a chÃ­nh (primary index) vÃ  chá»‰ má»¥c khoÃ¡ phá»¥ (khÃ´ng pháº£i khÃ³a chÃ­nh - non-primary index). Náº¿u má»™t cÃ¢u lá»‡nh SQL thao tÃ¡c trÃªn chá»‰ má»¥c khÃ³a chÃ­nh, MySQL sáº½ khÃ³a chá»‰ má»¥c khÃ³a chÃ­nh Ä‘Ã³; náº¿u má»™t cÃ¢u lá»‡nh thao tÃ¡c trÃªn chá»‰ má»¥c khoÃ¡ phá»¥, MySQL sáº½ khÃ³a chá»‰ má»¥c khoÃ¡ phá»¥ Ä‘Ã³ trÆ°á»›c, sau Ä‘Ã³ khÃ³a chá»‰ má»¥c khÃ³a chÃ­nh liÃªn quan. Trong cÃ¡c cÃ¢u lá»‡nh <code>UPDATE</code> vÃ  <code>DELETE</code>, MySQL khÃ´ng chá»‰ khÃ³a táº¥t cáº£ cÃ¡c báº£n ghi chá»‰ má»¥c Ä‘Æ°á»£c quÃ©t bá»Ÿi Ä‘iá»u kiá»‡n <code>WHERE</code>, mÃ  cÃ²n khÃ³a cÃ¡c giÃ¡ trá»‹ liá»n ká», cÃ²n Ä‘Æ°á»£c gá»i lÃ  <code>khÃ³a next-key</code>.</p>
<p>Khi hai giao dá»‹ch Ä‘Æ°á»£c thá»±c hiá»‡n Ä‘á»“ng thá»i, má»™t giao dá»‹ch khÃ³a chá»‰ má»¥c khoÃ¡ chÃ­nh vÃ  Ä‘ang chá» Ä‘á»£i cÃ¡c chá»‰ má»¥c liÃªn quan. Giao dá»‹ch khÃ¡c khÃ³a chá»‰ má»¥c khoÃ¡ phá»¥ vÃ  Ä‘ang chá» Ä‘á»£i chá»‰ má»¥c khoÃ¡ chÃ­nh liÃªn quan. Äiá»u nÃ y dáº«n Ä‘áº¿n tÃ¬nh tráº¡ng báº¿ táº¯c. Sau khi xáº£y ra tÃ¬nh tráº¡ng báº¿ táº¯c, <code>InnoDB</code> thÆ°á»ng cÃ³ thá»ƒ phÃ¡t hiá»‡n vÃ  lÃ m cho má»™t giao dá»‹ch giáº£i phÃ³ng khÃ³a vÃ  rollback, vÃ  giao dá»‹ch khÃ¡c tiáº¿p tá»¥c láº¥y khÃ³a Ä‘á»ƒ hoÃ n thÃ nh giao dá»‹ch.</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/mysql-mvcc-readview.png" type="image/png"/>
    </item>
    <item>
      <title>MySQL Index</title>
      <link>https://vanhung4499.github.io/database/mysql/mysql-index.html</link>
      <guid>https://vanhung4499.github.io/database/mysql/mysql-index.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MySQL Index</source>
      <description>MySQL Index Chá»‰ má»¥c lÃ  má»™t phÆ°Æ¡ng phÃ¡p quan trá»ng Ä‘á»ƒ cáº£i thiá»‡n hiá»‡u suáº¥t truy váº¥n trong MySQL, nhÆ°ng quÃ¡ nhiá»u chá»‰ má»¥c cÃ³ thá»ƒ dáº«n Ä‘áº¿n sá»­ dá»¥ng Ä‘Ä©a cao vÃ  chiáº¿m nhiá»u bá»™ nhá»›, áº£nh ...</description>
      <category>mysql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>Chá»‰ má»¥c lÃ  má»™t phÆ°Æ¡ng phÃ¡p quan trá»ng Ä‘á»ƒ cáº£i thiá»‡n hiá»‡u suáº¥t truy váº¥n trong MySQL, nhÆ°ng quÃ¡ nhiá»u chá»‰ má»¥c cÃ³ thá»ƒ dáº«n Ä‘áº¿n sá»­ dá»¥ng Ä‘Ä©a cao vÃ  chiáº¿m nhiá»u bá»™ nhá»›, áº£nh hÆ°á»Ÿng Ä‘áº¿n hiá»‡u suáº¥t tá»•ng thá»ƒ cá»§a á»©ng dá»¥ng. NÃªn trÃ¡nh viá»‡c thÃªm chá»‰ má»¥c sau khi Ä‘Ã£ triá»ƒn khai, vÃ¬ sau Ä‘Ã³ cÃ³ thá»ƒ cáº§n giÃ¡m sÃ¡t nhiá»u truy váº¥n SQL Ä‘á»ƒ xÃ¡c Ä‘á»‹nh vá»‹ trÃ­ cá»§a váº¥n Ä‘á», vÃ  thá»i gian thÃªm chá»‰ má»¥c nháº¥t Ä‘á»‹nh lÃ  lá»›n hÆ¡n thá»i gian ban Ä‘áº§u Ä‘á»ƒ thÃªm chá»‰ má»¥c, Ä‘iá»u nÃ y cho tháº¥y viá»‡c thÃªm chá»‰ má»¥c cÅ©ng ráº¥t cÃ³ tÃ­nh ká»¹ thuáº­t.</p>
<p>Tiáº¿p theo, tÃ´i sáº½ giá»›i thiá»‡u cho báº¡n má»™t loáº¡t cÃ¡c chiáº¿n lÆ°á»£c táº¡o chá»‰ má»¥c hiá»‡u suáº¥t cao vÃ  nguyÃªn táº¯c lÃ m viá»‡c Ä‘áº±ng sau má»—i chiáº¿n lÆ°á»£c. Tuy nhiÃªn, trÆ°á»›c khi Ä‘i vÃ o chi tiáº¿t, hÃ£y tÃ¬m hiá»ƒu má»™t sá»‘ thuáº­t toÃ¡n vÃ  cáº¥u trÃºc dá»¯ liá»‡u liÃªn quan Ä‘áº¿n chá»‰ má»¥c, Ä‘iá»u nÃ y sáº½ giÃºp báº¡n hiá»ƒu rÃµ hÆ¡n ná»™i dung sau nÃ y.</p>
</blockquote>
<h2>Giá»›i thiá»‡u vá» chá»‰ má»¥c</h2>
<p><strong>Chá»‰ má»¥c lÃ  má»™t cáº¥u trÃºc dá»¯ liá»‡u trong cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ cáº£i thiá»‡n hiá»‡u suáº¥t tÃ¬m kiáº¿m</strong>.</p>
<p>Chá»‰ má»¥c lÃ  yáº¿u tá»‘ quan trá»ng cho hiá»‡u suáº¥t tá»‘t, khi dá»¯ liá»‡u nhá» vÃ  táº£i khÃ´ng cao, tÃ¡c Ä‘á»™ng cá»§a chá»‰ má»¥c khÃ´ng thá»ƒ tháº¥y rÃµ; nhÆ°ng khi dá»¯ liá»‡u tÄƒng dáº§n, hiá»‡u suáº¥t sáº½ giáº£m Ä‘Ã¡ng ká»ƒ. Do Ä‘Ã³, tá»‘i Æ°u chá»‰ má»¥c lÃ  biá»‡n phÃ¡p hiá»‡u quáº£ nháº¥t Ä‘á»ƒ tá»‘i Æ°u hiá»‡u suáº¥t truy váº¥n.</p>
<h3>Æ¯u vÃ  nhÆ°á»£c Ä‘iá»ƒm cá»§a chá»‰ má»¥c</h3>
<p>B-Tree lÃ  cáº¥u trÃºc dá»¯ liá»‡u chá»‰ má»¥c phá»• biáº¿n nháº¥t, lÆ°u trá»¯ dá»¯ liá»‡u theo thá»© tá»±, vÃ¬ váº­y MySQL cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng&nbsp;<code>ORDER BY</code>&nbsp;vÃ &nbsp;<code>GROUP BY</code>. VÃ¬ dá»¯ liá»‡u Ä‘Æ°á»£c sáº¯p xáº¿p, B-Tree cÅ©ng sáº½ lÆ°u trá»¯ cÃ¡c giÃ¡ trá»‹ cá»™t liÃªn quan cÃ¹ng nhau. Cuá»‘i cÃ¹ng, vÃ¬ chá»‰ má»¥c lÆ°u trá»¯ cÃ¡c giÃ¡ trá»‹ cá»™t thá»±c táº¿, nÃªn má»™t sá»‘ truy váº¥n chá»‰ cáº§n sá»­ dá»¥ng chá»‰ má»¥c Ä‘á»ƒ hoÃ n thÃ nh toÃ n bá»™ truy váº¥n.</p>
<p>âœ” Æ¯u Ä‘iá»ƒm cá»§a chá»‰ má»¥c:</p>
<ul>
<li><strong>Chá»‰ má»¥c giáº£m Ä‘Ã¡ng ká»ƒ lÆ°á»£ng dá»¯ liá»‡u cáº§n quÃ©t bá»Ÿi mÃ¡y chá»§, tá»« Ä‘Ã³ tÄƒng tá»‘c Ä‘á»™ truy váº¥n</strong>.</li>
<li><strong>Chá»‰ má»¥c cÃ³ thá»ƒ giÃºp mÃ¡y chá»§ trÃ¡nh sáº¯p xáº¿p vÃ  báº£ng táº¡m thá»i</strong>.</li>
<li><strong>Chá»‰ má»¥c cÃ³ thá»ƒ biáº¿n I/O ngáº«u nhiÃªn thÃ nh I/O tuáº§n tá»±</strong>.</li>
<li>CÃ¡c cÆ¡ sá»Ÿ dá»¯ liá»‡u há»— trá»£ khÃ³a hÃ ng, cháº³ng háº¡n nhÆ° InnoDB, sáº½ khÃ³a khi truy cáº­p hÃ ng.&nbsp;<strong>Sá»­ dá»¥ng chá»‰ má»¥c cÃ³ thá»ƒ giáº£m sá»‘ lÆ°á»£ng hÃ ng truy cáº­p, tá»« Ä‘Ã³ giáº£m sá»± cáº¡nh tranh khÃ³a vÃ  tÄƒng cÆ°á»ng Ä‘á»“ng thá»i</strong>.</li>
<li>Chá»‰ má»¥c duy nháº¥t Ä‘áº£m báº£o tÃ­nh duy nháº¥t cá»§a má»—i hÃ ng dá»¯ liá»‡u, sá»­ dá»¥ng chá»‰ má»¥c cÃ³ thá»ƒ táº­n dá»¥ng Ä‘Æ°á»£c trÃ¬nh tá»‘i Æ°u hÃ³a áº©n, cáº£i thiá»‡n hiá»‡u suáº¥t há»‡ thá»‘ng.</li>
</ul>
<p>âŒ NhÆ°á»£c Ä‘iá»ƒm cá»§a chá»‰ má»¥c:</p>
<ul>
<li><strong>Táº¡o vÃ  duy trÃ¬ chá»‰ má»¥c máº¥t thá»i gian</strong>, Ä‘iá»u nÃ y tÄƒng theo lÆ°á»£ng dá»¯ liá»‡u.</li>
<li><strong>Chá»‰ má»¥c chiáº¿m khÃ´ng gian váº­t lÃ½ bá»• sung</strong>, ngoÃ i khÃ´ng gian dá»¯ liá»‡u cá»§a báº£ng, má»—i chá»‰ má»¥c cÅ©ng cáº§n má»™t khÃ´ng gian váº­t lÃ½ nháº¥t Ä‘á»‹nh, náº¿u táº¡o chá»‰ má»¥c káº¿t há»£p, khÃ´ng gian cáº§n thiáº¿t sáº½ lá»›n hÆ¡n.</li>
<li><strong>CÃ³ thá»ƒ cáº§n cáº­p nháº­t chá»‰ má»¥c khi thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng ghi (<code>INSERT</code>/<code>UPDATE</code>/<code>DELETE</code>)</strong>, dáº«n Ä‘áº¿n giáº£m hiá»‡u suáº¥t ghi cá»§a cÆ¡ sá»Ÿ dá»¯ liá»‡u.</li>
</ul>
<h3>Khi nÃ o sá»­ dá»¥ng chá»‰ má»¥c</h3>
<blockquote>
<p>Chá»‰ má»¥c cÃ³ thá»ƒ dá»… dÃ ng nÃ¢ng cao hiá»‡u suáº¥t truy váº¥n má»™t vÃ i cáº¥p sá»‘ nhÃ¢n.</p>
</blockquote>
<p>âœ” TrÆ°á»ng há»£p&nbsp;<strong>thÃ­ch há»£p</strong>&nbsp;sá»­ dá»¥ng chá»‰ má»¥c:</p>
<ul>
<li><strong>Thao tÃ¡c Ä‘á»c thÆ°á»ng xuyÃªn (<code>SELECT</code>)</strong>.</li>
<li><strong>Dá»¯ liá»‡u trong báº£ng lá»›n</strong>.</li>
<li><strong>TÃªn cá»™t thÆ°á»ng xuáº¥t hiá»‡n trong Ä‘iá»u kiá»‡n&nbsp;<code>WHERE</code>&nbsp;hoáº·c Ä‘iá»u kiá»‡n káº¿t ná»‘i (<code>JOIN</code>)</strong>.</li>
</ul>
<p>âŒ TrÆ°á»ng há»£p&nbsp;<strong>khÃ´ng thÃ­ch há»£p</strong>&nbsp;sá»­ dá»¥ng chá»‰ má»¥c:</p>
<ul>
<li><strong>Thao tÃ¡c ghi thÆ°á»ng xuyÃªn (<code>INSERT</code>/<code>UPDATE</code>/<code>DELETE</code>)</strong>, Ä‘iá»u nÃ y cÃ³ nghÄ©a lÃ  cáº§n cáº­p nháº­t chá»‰ má»¥c.</li>
<li><strong>TÃªn cá»™t khÃ´ng thÆ°á»ng xuáº¥t hiá»‡n trong Ä‘iá»u kiá»‡n&nbsp;<code>WHERE</code>&nbsp;hoáº·c Ä‘iá»u kiá»‡n káº¿t ná»‘i (<code>JOIN</code>)</strong>, Ä‘iá»u nÃ y cÃ³ nghÄ©a lÃ  chá»‰ má»¥c thÆ°á»ng khÃ´ng Ä‘Æ°á»£c tÃ¬m tháº¥y, khÃ´ng cÃ³ Ã½ nghÄ©a vÃ  tÄƒng chi phÃ­ khÃ´ng gian.</li>
<li><strong>Báº£ng ráº¥t nhá»</strong>, trong háº§u háº¿t cÃ¡c trÆ°á»ng há»£p, quÃ©t toÃ n bá»™ báº£ng Ä‘Æ¡n giáº£n hÆ¡n vÃ  hiá»‡u quáº£ hÆ¡n cho báº£ng ráº¥t nhá».</li>
<li><strong>Báº£ng cá»¡ lá»›n Ä‘áº·c biá»‡t</strong>, chi phÃ­ táº¡o vÃ  sá»­ dá»¥ng chá»‰ má»¥c sáº½ tÄƒng lÃªn. CÃ³ thá»ƒ xem xÃ©t sá»­ dá»¥ng ká»¹ thuáº­t phÃ¢n vÃ¹ng hoáº·c NoSQL.</li>
</ul>
<h2>Cáº¥u trÃºc dá»¯ liá»‡u cá»§a chá»‰ má»¥c</h2>
<p>Trong MySQL, chá»‰ má»¥c Ä‘Æ°á»£c thá»±c hiá»‡n á»Ÿ bá»™ lÆ°u trá»¯ (storage engine), chá»© khÃ´ng pháº£i á»Ÿ lá»›p mÃ¡y chá»§. Do Ä‘Ã³, khÃ´ng cÃ³ tiÃªu chuáº©n chá»‰ má»¥c chung; cáº¥u trÃºc dá»¯ liá»‡u chá»‰ má»¥c cÃ³ thá»ƒ khÃ¡c nhau cho cÃ¡c storage engine khÃ¡c nhau.</p>
<h3>Máº£ng (Array)</h3>
<p>Máº£ng lÃ  má»™t cáº¥u trÃºc dá»¯ liá»‡u lÆ°u trá»¯ dá»¯ liá»‡u trong má»™t khÃ´ng gian bá»™ nhá»› liÃªn tá»¥c vÃ  há»— trá»£ truy cáº­p ngáº«u nhiÃªn.</p>
<p>Máº£ng Ä‘Æ°á»£c sáº¯p xáº¿p cÃ³ thá»ƒ sá»­ dá»¥ng thuáº­t toÃ¡n tÃ¬m kiáº¿m nhá»‹ phÃ¢n, cÃ³ Ä‘á»™ phá»©c táº¡p thá»i gian lÃ  <strong>O(log n)</strong>, cho cáº£ truy váº¥n báº±ng giÃ¡ trá»‹ vÃ  truy váº¥n theo pháº¡m vi.</p>
<p>Tuy nhiÃªn, máº£ng cÃ³ hai háº¡n cháº¿ quan trá»ng:</p>
<ul>
<li>KÃ­ch thÆ°á»›c khÃ´ng gian máº£ng cá»‘ Ä‘á»‹nh, náº¿u cáº§n má»Ÿ rá»™ng chá»‰ cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡ch sao chÃ©p máº£ng.</li>
<li>Thá»i gian phá»©c táº¡p cá»§a viá»‡c chÃ¨n vÃ  xÃ³a lÃ  O(n).</li>
</ul>
<p>Äiá»u nÃ y cÃ³ nghÄ©a lÃ , náº¿u sá»­ dá»¥ng máº£ng lÃ m chá»‰ má»¥c vÃ  muá»‘n Ä‘áº£m báº£o máº£ng Ä‘Æ°á»£c sáº¯p xáº¿p, thÃ¬ viá»‡c cáº­p nháº­t sáº½ tá»‘n kÃ©m.</p>
<h3>Chá»‰ má»¥c bÄƒm (Hash Index)</h3>
<p>Báº£ng bÄƒm lÃ  má»™t cáº¥u trÃºc dá»¯ liá»‡u lÆ°u trá»¯ dá»¯ liá»‡u dÆ°á»›i dáº¡ng cáº·p khÃ³a - giÃ¡ trá»‹ (key-value), trong Ä‘Ã³ chÃºng ta chá»‰ cáº§n nháº­p giÃ¡ trá»‹ cáº§n tÃ¬m kiáº¿m lÃ  khÃ³a (key), chÃºng ta sáº½ tÃ¬m tháº¥y giÃ¡ trá»‹ tÆ°Æ¡ng á»©ng.</p>
<p><strong>Báº£ng bÄƒm</strong>&nbsp;sá»­ dá»¥ng&nbsp;<strong>hÃ m bÄƒm</strong>&nbsp;Ä‘á»ƒ tá»• chá»©c dá»¯ liá»‡u, há»— trá»£ viá»‡c chÃ¨n vÃ  tÃ¬m kiáº¿m nhanh chÃ³ng. Cáº¥u trÃºc dá»¯ liá»‡u báº£ng bÄƒm thá»±c cháº¥t lÃ  má»™t máº£ng, vá»›i Ã½ tÆ°á»Ÿng lÃ : sá»­ dá»¥ng hÃ m bÄƒm Ä‘á»ƒ chuyá»ƒn Ä‘á»•i khÃ³a thÃ nh chá»‰ má»¥c máº£ng, sá»­ dá»¥ng tÃ­nh cháº¥t truy cáº­p ngáº«u nhiÃªn cá»§a máº£ng, cho phÃ©p chÃºng ta tÃ¬m kiáº¿m trong thá»i gian O(1).</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20220320201844.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>CÃ³ hai loáº¡i báº£ng bÄƒm khÃ¡c nhau:&nbsp;<strong>báº£ng bÄƒm táº­p há»£p</strong>&nbsp;vÃ &nbsp;<strong>báº£ng bÄƒm Ã¡nh xáº¡</strong>.</p>
<ul>
<li><strong>Báº£ng bÄƒm táº­p há»£p</strong>&nbsp;lÃ  má»™t cáº¥u trÃºc dá»¯ liá»‡u Ä‘á»ƒ lÆ°u trá»¯ cÃ¡c giÃ¡ trá»‹ khÃ´ng trÃ¹ng láº·p.</li>
<li><strong>Báº£ng bÄƒm Ã¡nh xáº¡</strong>&nbsp;lÃ  má»™t cáº¥u trÃºc dá»¯ liá»‡u Ä‘á»ƒ lÆ°u trá»¯ cáº·p khÃ³a - giÃ¡ trá»‹, trong Ä‘Ã³ giÃ¡ trá»‹ Ä‘Æ°á»£c liÃªn káº¿t vá»›i khÃ³a.</li>
</ul>
<p>Chá»‰ má»¥c bÄƒm dá»±a trÃªn báº£ng bÄƒm Ä‘á»ƒ triá»ƒn khai,&nbsp;<strong>chá»‰ há»— trá»£ truy váº¥n so sÃ¡nh báº±ng</strong>. Äá»‘i vá»›i má»—i hÃ ng dá»¯ liá»‡u, chá»‰ má»¥c bÄƒm sáº½ tÃ­nh toÃ¡n má»™t mÃ£ bÄƒm (hashcode) cho táº¥t cáº£ cÃ¡c cá»™t chá»‰ má»¥c vÃ  lÆ°u trá»¯ mÃ£ bÄƒm trong chá»‰ má»¥c, Ä‘á»“ng thá»i lÆ°u trá»¯ con trá» Ä‘áº¿n má»—i hÃ ng dá»¯ liá»‡u trong báº£ng bÄƒm.</p>
<p>Trong Mysql, chá»‰ cÃ³ lÆ°u trá»¯ bá»™ nhá»› (Memory) hiá»ƒn thá»‹ há»— trá»£ chá»‰ má»¥c bÄƒm.</p>
<p>âœ” Æ¯u Ä‘iá»ƒm cá»§a chá»‰ má»¥c bÄƒm:</p>
<ul>
<li>VÃ¬ cáº¥u trÃºc dá»¯ liá»‡u chá»‰ má»¥c gá»n nháº¹, nÃªn&nbsp;<strong>tá»‘c Ä‘á»™ truy váº¥n ráº¥t nhanh</strong>.</li>
</ul>
<p>âŒ NhÆ°á»£c Ä‘iá»ƒm cá»§a chá»‰ má»¥c bÄƒm:</p>
<ul>
<li>GiÃ¡ trá»‹ chá»‰ má»¥c khÃ´ng bao gá»“m giÃ¡ trá»‹ cá»™t, do Ä‘Ã³ khÃ´ng thá»ƒ sá»­ dá»¥ng giÃ¡ trá»‹ chá»‰ má»¥c Ä‘á»ƒ trÃ¡nh Ä‘á»c hÃ ng. Tuy nhiÃªn, viá»‡c truy cáº­p hÃ ng trong bá»™ nhá»› nhanh, vÃ¬ váº­y trong háº§u háº¿t cÃ¡c trÆ°á»ng há»£p, Ä‘iá»u nÃ y khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n hiá»‡u suáº¥t.</li>
<li>Dá»¯ liá»‡u chá»‰ má»¥c bÄƒm khÃ´ng Ä‘Æ°á»£c sáº¯p xáº¿p theo giÃ¡ trá»‹ chá»‰ má»¥c, do Ä‘Ã³&nbsp;<strong>khÃ´ng thá»ƒ sá»­ dá»¥ng Ä‘á»ƒ sáº¯p xáº¿p</strong>.</li>
<li>Chá»‰ má»¥c bÄƒm&nbsp;<strong>khÃ´ng há»— trá»£ truy váº¥n pháº¡m vi</strong>, vÃ¬ chá»‰ má»¥c bÄƒm sá»­ dá»¥ng toÃ n bá»™ ná»™i dung cá»™t chá»‰ má»¥c Ä‘á»ƒ tÃ­nh toÃ¡n bÄƒm. VÃ­ dá»¥, trÃªn cá»™t dá»¯ liá»‡u (A, B) xÃ¢y dá»±ng chá»‰ má»¥c bÄƒm, náº¿u truy váº¥n chá»‰ cÃ³ cá»™t dá»¯ liá»‡u A, khÃ´ng thá»ƒ sá»­ dá»¥ng chá»‰ má»¥c nÃ y.</li>
<li>Chá»‰ má»¥c bÄƒm cÃ³ thá»ƒ gáº·p&nbsp;<strong>xung Ä‘á»™t bÄƒm</strong>:
<ul>
<li>Khi xáº£y ra xung Ä‘á»™t bÄƒm, pháº£i duyá»‡t qua táº¥t cáº£ cÃ¡c con trá» hÃ ng trong danh sÃ¡ch liÃªn káº¿t, so sÃ¡nh tá»«ng hÃ ng má»™t cho Ä‘áº¿n khi tÃ¬m tháº¥y hÃ ng phÃ¹ há»£p.</li>
<li>Náº¿u xung Ä‘á»™t bÄƒm nhiá»u, viá»‡c duy trÃ¬ chá»‰ má»¥c sáº½ tá»‘n kÃ©m.</li>
</ul>
</li>
</ul>
<blockquote>
<p>VÃ¬ cÃ¡c háº¡n cháº¿ trÃªn, chá»‰ má»¥c bÄƒm chá»‰ phÃ¹ há»£p cho cÃ¡c tÃ¬nh huá»‘ng cá»¥ thá»ƒ. Tuy nhiÃªn, má»™t khi sá»­ dá»¥ng chá»‰ má»¥c bÄƒm, hiá»‡u suáº¥t cáº£i thiá»‡n sáº½ ráº¥t Ä‘Ã¡ng ká»ƒ.</p>
</blockquote>
<h3>Chá»‰ má»¥c B-Tree</h3>
<p>ThÆ°á»ng khi nÃ³i vá» chá»‰ má»¥c, chÃºng ta Ä‘á» cáº­p Ä‘áº¿n chá»‰ má»¥c B-Tree, Ä‘Ã¢y lÃ  loáº¡i chá»‰ má»¥c phá»• biáº¿n nháº¥t trong cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡, háº§u háº¿t cÃ¡c Ä‘á»™ng cÆ¡ lÆ°u trá»¯ Ä‘á»u há»— trá»£ loáº¡i chá»‰ má»¥c nÃ y. Tá»« <code>B-Tree</code> Ä‘Æ°á»£c sá»­ dá»¥ng trong MySQL trong cÃ¡c cÃ¢u lá»‡nh&nbsp;<code>CREATE TABLE</code>&nbsp;hoáº·c cÃ¡c cÃ¢u lá»‡nh khÃ¡c, nhÆ°ng thá»±c táº¿ cÃ¡c storage engine khÃ¡c nhau cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c cáº¥u trÃºc dá»¯ liá»‡u khÃ¡c nhau, vÃ­ dá»¥ nhÆ° InnoDB sá»­ dá»¥ng <code>B+Tree</code>.</p>
<p>Trong B+Tree, chá»¯ <code>B</code> Ä‘á» cáº­p Ä‘áº¿n tá»« <code>balance</code>, cÃ³ nghÄ©a lÃ  cÃ¢n báº±ng. Cáº§n lÆ°u Ã½ ráº±ng chá»‰ má»¥c B+Tree khÃ´ng thá»ƒ tÃ¬m ra hÃ ng cá»¥ thá»ƒ cho má»™t giÃ¡ trá»‹ khÃ³a Ä‘Ã£ cho, nÃ³ chá»‰ tÃ¬m ra trang chá»©a dÃ²ng dá»¯ liá»‡u Ä‘Æ°á»£c tÃ¬m kiáº¿m vÃ  sau Ä‘Ã³ cÆ¡ sá»Ÿ dá»¯ liá»‡u sáº½ Ä‘á»c trang vÃ o bá»™ nhá»› vÃ  tiáº¿p tá»¥c tÃ¬m kiáº¿m trong bá»™ nhá»› Ä‘á»ƒ cuá»‘i cÃ¹ng thu Ä‘Æ°á»£c dá»¯ liá»‡u mong muá»‘n.</p>
<h4>CÃ¢y tÃ¬m kiáº¿m nhá»‹ phÃ¢n</h4>
<p>CÃ¢y tÃ¬m kiáº¿m nhá»‹ phÃ¢n cÃ³ Ä‘áº·c Ä‘iá»ƒm lÃ  má»—i nÃºt con trÃ¡i nhá» hÆ¡n nÃºt cha vÃ  nÃºt cha nhá» hÆ¡n nÃºt con pháº£i. Äá»™ phá»©c táº¡p thá»i gian truy váº¥n cá»§a nÃ³ lÃ  $$O(log(N))$$.</p>
<p>Tuy nhiÃªn, Ä‘á»ƒ duy trÃ¬ Ä‘á»™ phá»©c táº¡p truy váº¥n $$O(log(N))$$, báº¡n cáº§n Ä‘áº£m báº£o ráº±ng cÃ¢y nÃ y lÃ  má»™t cÃ¢y tÃ¬m kiáº¿m nhá»‹ phÃ¢n cÃ¢n báº±ng. Äá»ƒ Ä‘áº£m báº£o Ä‘iá»u nÃ y, Ä‘á»™ phá»©c táº¡p thá»i gian cáº­p nháº­t cÅ©ng lÃ  $$O(log(N))$$.</p>
<p>Khi dá»¯ liá»‡u trong cÆ¡ sá»Ÿ dá»¯ liá»‡u tÄƒng lÃªn, kÃ­ch thÆ°á»›c chá»‰ má»¥c cÅ©ng tÄƒng lÃªn vÃ  khÃ´ng thá»ƒ lÆ°u trá»¯ toÃ n bá»™ chá»‰ má»¥c trong bá»™ nhá»›. Do Ä‘Ã³, chá»‰ má»¥c thÆ°á»ng Ä‘Æ°á»£c lÆ°u trá»¯ dÆ°á»›i dáº¡ng tá»‡p trÃªn Ä‘Ä©a. Trong quÃ¡ trÃ¬nh tÃ¬m kiáº¿m chá»‰ má»¥c, sáº½ cÃ³ sá»± tiÃªu tá»‘n I/O Ä‘Ä©a, so vá»›i truy cáº­p bá»™ nhá»›, tiÃªu tá»‘n I/O Ä‘Ä©a cao hÆ¡n má»™t vÃ i láº§n. HÃ£y tÆ°á»Ÿng tÆ°á»£ng xem má»™t cÃ¢y nhá»‹ phÃ¢n cÃ³ hÃ ng triá»‡u nÃºt sÃ¢u Ä‘áº¿n Ä‘Ã¢u? Náº¿u Ä‘áº·t cÃ¢y nhá»‹ phÃ¢n cÃ³ Ä‘á»™ sÃ¢u lá»›n nhÆ° váº­y lÃªn Ä‘Ä©a, má»—i láº§n Ä‘á»c má»™t nÃºt, sáº½ cáº§n má»™t láº§n Ä‘á»c I/O Ä‘Ä©a, rÃµ rÃ ng thá»i gian tÃ¬m kiáº¿m nhÆ° váº­y lÃ  khÃ´ng cháº¥p nháº­n Ä‘Æ°á»£c. Váº­y lÃ m tháº¿ nÃ o Ä‘á»ƒ giáº£m sá»‘ láº§n truy cáº­p I/O trong quÃ¡ trÃ¬nh tÃ¬m kiáº¿m?</p>
<p>Má»™t phÆ°Æ¡ng phÃ¡p hiá»‡u quáº£ lÃ  giáº£m Ä‘á»™ sÃ¢u cá»§a cÃ¢y, biáº¿n cÃ¢y nhá»‹ phÃ¢n thÃ nh cÃ¢y nhiá»u nhÃ¡nh (multiway search tree), vÃ &nbsp;<strong>B+ tree lÃ  má»™t loáº¡i cÃ¢y nhiá»u nhÃ¡nh</strong>.</p>
<h4>B+Tree</h4>
<p>B+Tree lÃ  má»™t cáº¥u trÃºc dá»¯ liá»‡u dÃ¹ng Ä‘á»ƒ táº¡o chá»‰ má»¥c, phÃ¹ há»£p cho viá»‡c tÃ¬m kiáº¿m toÃ n bá»™ khÃ³a, tÃ¬m kiáº¿m pháº¡m vi khÃ³a vÃ  tÃ¬m kiáº¿m tiá»n tá»‘ khÃ³a. Tuy nhiÃªn, tÃ¬m kiáº¿m tiá»n tá»‘ khÃ³a chá»‰ Ã¡p dá»¥ng cho viá»‡c tÃ¬m kiáº¿m tiá»n tá»‘ bÃªn trÃ¡i.</p>
<p>Äá»ƒ hiá»ƒu B+Tree, chá»‰ cáº§n hiá»ƒu hai Ä‘áº·c Ä‘iá»ƒm quan trá»ng nháº¥t cá»§a nÃ³:</p>
<ul>
<li>Thá»© nháº¥t, táº¥t cáº£ cÃ¡c khÃ³a (cÃ³ thá»ƒ hiá»ƒu lÃ  dá»¯ liá»‡u) Ä‘Æ°á»£c lÆ°u trá»¯ trong cÃ¡c nÃºt lÃ¡, cÃ¡c nÃºt khÃ´ng pháº£i lÃ¡ khÃ´ng lÆ°u trá»¯ dá»¯ liá»‡u thá»±c sá»±, táº¥t cáº£ cÃ¡c nÃºt ghi nháº­n Ä‘Æ°á»£c sáº¯p xáº¿p theo thá»© tá»± giÃ¡ trá»‹ khÃ³a vÃ  Ä‘Æ°á»£c lÆ°u trá»¯ trÃªn cÃ¹ng má»™t táº§ng nÃºt lÃ¡.</li>
<li>Thá»© hai, táº¥t cáº£ cÃ¡c nÃºt lÃ¡ Ä‘Æ°á»£c káº¿t ná»‘i báº±ng con trá». HÃ¬nh áº£nh dÆ°á»›i Ä‘Ã¢y lÃ  má»™t cÃ¢y B+ Ä‘Æ°á»£c Ä‘Æ¡n giáº£n hÃ³a.</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200304235424.jpg" alt="b-tree-index" tabindex="0" loading="lazy"><figcaption>b-tree-index</figcaption></figure>
<p>Dá»±a trÃªn ná»™i dung cá»§a cÃ¡c nÃºt lÃ¡, loáº¡i chá»‰ má»¥c Ä‘Æ°á»£c chia thÃ nh chá»‰ má»¥c khÃ³a chÃ­nh vÃ  chá»‰ má»¥c khÃ´ng pháº£i khÃ³a chÃ­nh.</p>
<ul>
<li><strong>Chá»‰ má»¥c khÃ³a chÃ­nh</strong>&nbsp;(clustered index), cÃ²n Ä‘Æ°á»£c gá»i lÃ  chá»‰ má»¥c chÃ­nh, chá»‰ má»¥c cá»¥m, nÃºt lÃ¡ lÆ°u trá»¯ toÃ n bá»™ dá»¯ liá»‡u hÃ ng. VÃ¬ khÃ´ng thá»ƒ lÆ°u trá»¯ hÃ ng dá»¯ liá»‡u á»Ÿ hai vá»‹ trÃ­ khÃ¡c nhau cÃ¹ng má»™t lÃºc, nÃªn&nbsp;<strong>má»™t báº£ng chá»‰ cÃ³ thá»ƒ cÃ³ má»™t chá»‰ má»¥c khÃ³a chÃ­nh</strong>.&nbsp;<strong>Chá»‰ má»¥c khÃ³a chÃ­nh cá»§a InnoDB thá»±c táº¿ lÃ  lÆ°u trá»¯ cáº£ chá»‰ má»¥c B-Tree vÃ  hÃ ng dá»¯ liá»‡u trong cÃ¹ng má»™t cáº¥u trÃºc</strong>.</li>
<li>Chá»‰ má»¥c khÃ´ng pháº£i khÃ³a chÃ­nh (non-clustered index) lÆ°u trá»¯ giÃ¡ trá»‹ khÃ³a chÃ­nh tÆ°Æ¡ng á»©ng vá»›i khÃ³a. Trong InnoDB, chá»‰ má»¥c khÃ´ng pháº£i khÃ³a chÃ­nh cÃ²n Ä‘Æ°á»£c gá»i lÃ  chá»‰ má»¥c phá»¥ (secondary index). Dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ á»Ÿ má»™t vá»‹ trÃ­, chá»‰ má»¥c Ä‘Æ°á»£c lÆ°u trá»¯ á»Ÿ má»™t vá»‹ trÃ­ khÃ¡c, chá»‰ má»¥c chá»©a con trá» Ä‘áº¿n vá»‹ trÃ­ dá»¯ liá»‡u. CÃ³ thá»ƒ cÃ³ nhiá»u chá»‰ má»¥c phá»¥, tá»‘i Ä‘a 249.</li>
</ul>
<p><strong>PhÃ¢n cá»¥m (clustered) cÃ³ nghÄ©a lÃ  cÃ¡c hÃ ng dá»¯ liá»‡u vÃ  giÃ¡ trá»‹ khÃ³a liá»n ká» Ä‘Æ°á»£c lÆ°u trá»¯ cÃ¹ng nhau má»™t cÃ¡ch nhá» gá»n. Do Ä‘Ã³ viá»‡c truy cáº­p nhanh chÃ³ng</strong>. VÃ¬ khÃ´ng thá»ƒ lÆ°u trá»¯ hÃ ng dá»¯ liá»‡u trong hai vá»‹ trÃ­ khÃ¡c nhau cÃ¹ng má»™t lÃºc, nÃªn <strong>má»™t báº£ng chá»‰ cÃ³ thá»ƒ cÃ³ má»™t chá»‰ sá»‘ cá»¥m</strong>.</p>
<p><strong>Sá»± khÃ¡c biá»‡t giá»¯a truy váº¥n chá»‰ má»¥c phÃ¢n cá»¥m vÃ  truy váº¥n chá»‰ má»¥c khÃ´ng phÃ¢n cá»¥m</strong></p>
<ul>
<li>Náº¿u cÃ¢u lá»‡nh lÃ &nbsp;<code>SELECT * FROM T WHERE ID = 500</code>, tá»©c lÃ  truy váº¥n chá»‰ má»¥c phÃ¢n cá»¥m, chá»‰ cáº§n tÃ¬m kiáº¿m B+Tree cá»§a ID;</li>
<li>Náº¿u cÃ¢u lá»‡nh lÃ &nbsp;<code>SELECT * FROM T WHERE k = 5</code>, tá»©c lÃ  truy váº¥n chá»‰ má»¥c khÃ´ng phÃ¢n cá»¥m, cáº§n tÃ¬m kiáº¿m cÃ¢y chá»‰ má»¥c k trÆ°á»›c, tÃ¬m giÃ¡ trá»‹ ID lÃ  500, sau Ä‘Ã³ tÃ¬m kiáº¿m cÃ¢y chá»‰ má»¥c ID. QuÃ¡ trÃ¬nh nÃ y Ä‘Æ°á»£c gá»i lÃ &nbsp;<strong>truy váº¥n láº¡i</strong>.</li>
</ul>
<p>NghÄ©a lÃ ,&nbsp;<strong>truy váº¥n dá»±a trÃªn chá»‰ má»¥c khÃ´ng phÃ¢n cá»¥m cáº§n quÃ©t hai cÃ¢y chá»‰ má»¥c</strong>. Do Ä‘Ã³, chÃºng ta nÃªn Æ°u tiÃªn sá»­ dá»¥ng truy váº¥n khÃ³a chÃ­nh.</p>
<p><strong>RÃµ rÃ ng, Ä‘á»™ dÃ i khÃ³a chÃ­nh cÃ ng nhá» thÃ¬ nÃºt lÃ¡ chá»‰ má»¥c khÃ´ng pháº£i khÃ³a chÃ­nh cÃ ng nhá», chá»‰ má»¥c khÃ´ng phÃ¢n cá»¥m chiáº¿m Ã­t khÃ´ng gian hÆ¡n.</strong></p>
<p>KhÃ³a chÃ­nh tá»± tÄƒng lÃ  khÃ³a chÃ­nh Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trÃªn cá»™t tá»± tÄƒng, trong cÃ¢u lá»‡nh táº¡o báº£ng thÆ°á»ng Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a nhÆ° sau: <code>NOT NULL PRIMARY KEY AUTO_INCREMENT</code>. Vá» máº·t hiá»‡u suáº¥t vÃ  khÃ´ng gian lÆ°u trá»¯, khÃ³a chÃ­nh tá»± tÄƒng thÆ°á»ng lÃ  lá»±a chá»n há»£p lÃ½ hÆ¡n. CÃ³ trÆ°á»ng há»£p nÃ o phÃ¹ há»£p Ä‘á»ƒ sá»­ dá»¥ng trÆ°á»ng kinh doanh lÃ m khÃ³a chÃ­nh khÃ´ng? CÃ³. VÃ­ dá»¥, má»™t sá»‘ yÃªu cáº§u ká»‹ch báº£n kinh doanh nhÆ° sau:</p>
<ul>
<li>Chá»‰ cÃ³ má»™t chá»‰ má»¥c;</li>
<li>Chá»‰ má»¥c nÃ y pháº£i lÃ  chá»‰ má»¥c duy nháº¥t.</li>
</ul>
<p>VÃ¬ khÃ´ng cÃ³ chá»‰ má»¥c khÃ¡c, khÃ´ng cáº§n xem xÃ©t váº¥n Ä‘á» kÃ­ch thÆ°á»›c nÃºt lÃ¡ chá»‰ má»¥c khÃ´ng pháº£i khÃ³a chÃ­nh.</p>
<p>LÃºc nÃ y, chÃºng ta nÃªn Æ°u tiÃªn Ã¡p dá»¥ng nguyÃªn táº¯c "Æ°u tiÃªn sá»­ dá»¥ng truy váº¥n khÃ³a chÃ­nh", trá»±c tiáº¿p Ä‘áº·t chá»‰ má»¥c nÃ y lÃ m khÃ³a chÃ­nh, cÃ³ thá»ƒ trÃ¡nh viá»‡c má»—i láº§n truy váº¥n Ä‘á»u cáº§n tÃ¬m kiáº¿m hai cÃ¢y.</p>
<h3>Chá»‰ má»¥c toÃ n vÄƒn báº£n (Full-Text Index)</h3>
<p>MyISAM há»— trá»£ chá»‰ má»¥c toÃ n vÄƒn báº£n, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ¬m kiáº¿m tá»« khÃ³a trong vÄƒn báº£n thay vÃ¬ so sÃ¡nh trá»±c tiáº¿p. Äiá»u kiá»‡n tÃ¬m kiáº¿m Ä‘Æ°á»£c sá»­ dá»¥ng lÃ  <code>MATCH AGAINST</code> thay vÃ¬ <code>WHERE</code> thÃ´ng thÆ°á»ng.</p>
<p>Chá»‰ má»¥c toÃ n vÄƒn báº£n thÆ°á»ng sá»­ dá»¥ng cáº¥u trÃºc dá»¯ liá»‡u chá»‰ má»¥c Ä‘áº£o ngÆ°á»£c (inverted index), nÃ³ ghi láº¡i Ã¡nh xáº¡ tá»« khÃ³a Ä‘áº¿n tÃ i liá»‡u chá»©a nÃ³.</p>
<p>InnoDB Storage Engine há»— trá»£ chá»‰ má»¥c toÃ n vÄƒn báº£n tá»« phiÃªn báº£n MySQL 5.6.4.</p>
<h3>Chá»‰ má»¥c khÃ´ng gian</h3>
<p>LÆ°u trá»¯ MyISAM há»— trá»£ chá»‰ má»¥c khÃ´ng gian (R-Tree), Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u Ä‘á»‹a lÃ½. Chá»‰ má»¥c khÃ´ng gian sáº½ tá»• chá»©c dá»¯ liá»‡u tá»« táº¥t cáº£ cÃ¡c chiá»u Ä‘á»ƒ tÃ¬m kiáº¿m hiá»‡u quáº£ báº±ng báº¥t ká»³ káº¿t há»£p nÃ o cá»§a cÃ¡c chiá»u.</p>
<p>Cáº§n sá»­ dá»¥ng cÃ¡c hÃ m liÃªn quan Ä‘áº¿n GIS Ä‘á»ƒ duy trÃ¬ dá»¯ liá»‡u.</p>
<h2>CÃ¡c loáº¡i chá»‰ má»¥c</h2>
<p>CÃ¡c há»‡ thá»‘ng cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡ phá»• biáº¿n thÆ°á»ng há»— trá»£ cÃ¡c loáº¡i chá»‰ má»¥c sau:</p>
<h3>Chá»‰ má»¥c khÃ³a chÃ­nh (<code>PRIMARY</code>)</h3>
<p>Chá»‰ má»¥c khÃ³a chÃ­nh: ÄÃ¢y lÃ  má»™t loáº¡i chá»‰ má»¥c Ä‘áº·c biá»‡t, khÃ´ng cho phÃ©p giÃ¡ trá»‹ trá»‘ng. Má»™t báº£ng chá»‰ cÃ³ thá»ƒ cÃ³ má»™t chá»‰ má»¥c khÃ³a chÃ­nh (thá»±c táº¿ lÃ  chá»‰ má»¥c gom cá»¥m trong InnoDB) vÃ  thÆ°á»ng Ä‘Æ°á»£c táº¡o cÃ¹ng vá»›i viá»‡c táº¡o báº£ng.</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> `</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">` (</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    `id`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">11</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    ...</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#98C379;--shiki-dark:#98C379">`id`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span></code></pre>
</div><h3>Chá»‰ má»¥c duy nháº¥t (<code>UNIQUE</code>)</h3>
<p>Chá»‰ má»¥c duy nháº¥t: CÃ¡c giÃ¡ trá»‹ trong cá»™t chá»‰ má»¥c pháº£i lÃ  duy nháº¥t, nhÆ°ng cho phÃ©p giÃ¡ trá»‹ trá»‘ng. Náº¿u Ä‘Ã³ lÃ  chá»‰ má»¥c káº¿t há»£p, thÃ¬ sá»± káº¿t há»£p cá»§a cÃ¡c giÃ¡ trá»‹ cá»™t pháº£i lÃ  duy nháº¥t.</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> `</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">` (</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    ...</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    UNIQUE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> indexName (title(</span><span style="color:#C678DD;--shiki-dark:#C678DD">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">))</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span></code></pre>
</div><h3>Chá»‰ má»¥c thÃ´ng thÆ°á»ng (<code>INDEX</code>)</h3>
<p>Chá»‰ má»¥c thÃ´ng thÆ°á»ng: ÄÃ¢y lÃ  loáº¡i chá»‰ má»¥c cÆ¡ báº£n, khÃ´ng cÃ³ báº¥t ká»³ rÃ ng buá»™c nÃ o.</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> `</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">` (</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    ...</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    INDEX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> index_name (title(</span><span style="color:#C678DD;--shiki-dark:#C678DD">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">))</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span></code></pre>
</div><h3>Chá»‰ má»¥c toÃ n vÄƒn (<code>FULLTEXT</code>)</h3>
<p>Chá»‰ má»¥c toÃ n vÄƒn: Chá»§ yáº¿u Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ¬m kiáº¿m tá»« khÃ³a trong vÄƒn báº£n, thay vÃ¬ so sÃ¡nh trá»±c tiáº¿p vá»›i cÃ¡c giÃ¡ trá»‹ trong chá»‰ má»¥c.</p>
<p>Chá»‰ má»¥c toÃ n vÄƒn khÃ¡c biá»‡t ráº¥t nhiá»u so vá»›i cÃ¡c loáº¡i chá»‰ má»¥c khÃ¡c, nÃ³ giá»‘ng nhÆ° má»™t cÃ´ng cá»¥ tÃ¬m kiáº¿m hÆ¡n lÃ  má»™t tham sá»‘ so sÃ¡nh trong cÃ¢u lá»‡nh WHERE. Chá»‰ má»¥c toÃ n vÄƒn Ä‘Æ°á»£c sá»­ dá»¥ng káº¿t há»£p vá»›i phÃ©p toÃ¡n <code>match against</code>, thay vÃ¬ sá»­ dá»¥ng cÃ¢u lá»‡nh WHERE thÃ´ng thÆ°á»ng kÃ¨m theo LIKE. Chá»‰ má»¥c toÃ n vÄƒn cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng trong <code>CREATE TABLE</code>, <code>ALTER TABLE</code>, <code>CREATE INDEX</code>, nhÆ°ng hiá»‡n táº¡i chá»‰ cÃ³ thá»ƒ táº¡o chá»‰ má»¥c toÃ n vÄƒn trÃªn cÃ¡c cá»™t kiá»ƒu <code>char</code>, <code>varchar</code> vÃ  <code>text</code>. ÄÃ¡ng lÆ°u Ã½ lÃ , khi cÃ³ sá»‘ lÆ°á»£ng dá»¯ liá»‡u lá»›n, viá»‡c Ä‘Æ°a dá»¯ liá»‡u vÃ o má»™t báº£ng khÃ´ng cÃ³ chá»‰ má»¥c toÃ n cá»¥c trÆ°á»›c, sau Ä‘Ã³ táº¡o chá»‰ má»¥c toÃ n vÄƒn báº±ng cÃ¡ch sá»­ dá»¥ng <code>CREATE INDEX</code> sáº½ nhanh hÆ¡n viá»‡c táº¡o chá»‰ má»¥c toÃ n vÄƒn trÆ°á»›c khi Ä‘Æ°a dá»¯ liá»‡u vÃ o.</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> `</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">` (</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    `content`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> text</span><span style="color:#C678DD;--shiki-dark:#C678DD"> CHARACTER</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    ...</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    FULLTEXT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (content)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span></code></pre>
</div><h3>Chá»‰ má»¥c káº¿t há»£p</h3>
<p>Chá»‰ má»¥c káº¿t há»£p: ÄÃ¢y lÃ  chá»‰ má»¥c Ä‘Æ°á»£c táº¡o trÃªn nhiá»u trÆ°á»ng, chá»‰ khi trÆ°á»ng Ä‘áº§u tiÃªn trong Ä‘iá»u kiá»‡n truy váº¥n sá»­ dá»¥ng chá»‰ má»¥c, chá»‰ má»¥c má»›i Ä‘Æ°á»£c sá»­ dá»¥ng. Khi sá»­ dá»¥ng chá»‰ má»¥c káº¿t há»£p, cáº§n tuÃ¢n theo táº­p há»£p tiá»n tá»‘ tá»‘i Ä‘a bÃªn trÃ¡i.</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> `</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">` (</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    ...</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    INDEX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> index_name (title(</span><span style="color:#C678DD;--shiki-dark:#C678DD">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">), title(</span><span style="color:#C678DD;--shiki-dark:#C678DD">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">), ...)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span></code></pre>
</div><h2>Chiáº¿n lÆ°á»£c láº­p chá»‰ má»¥c</h2>
<p>Giáº£ sá»­ cÃ³ báº£ng sau:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> `</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">t</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">` (</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `id`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">11</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `city`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">16</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `name`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">16</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `age`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">11</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `addr`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">128</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">DEFAULT</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#98C379;--shiki-dark:#98C379">`id`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">),</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  KEY</span><span style="color:#98C379;--shiki-dark:#98C379"> `city`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#98C379;--shiki-dark:#98C379">`city`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) ENGINE</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">InnoDB;</span></span></code></pre>
</div><h3>NguyÃªn táº¯c cÆ¡ báº£n cá»§a láº­p chá»‰ má»¥c</h3>
<ul>
<li><strong>KhÃ´ng pháº£i cÃ ng nhiá»u chá»‰ má»¥c cÃ ng tá»‘t, khÃ´ng nÃªn táº¡o chá»‰ má»¥c cho táº¥t cáº£ cÃ¡c cá»™t</strong>. Cáº§n xem xÃ©t chi phÃ­ duy trÃ¬ chá»‰ má»¥c, khÃ´ng gian chiáº¿m dá»¥ng vÃ  chi phÃ­ cá»§a viá»‡c truy váº¥n láº¡i dá»¯ liá»‡u. Chá»‰ táº¡o chá»‰ má»¥c khi cáº§n thiáº¿t vÃ  cáº§n Ä‘áº£m báº£o chá»‰ má»¥c nháº¹ nhÃ ng. Khi táº¡o chá»‰ má»¥c káº¿t há»£p nhiá»u cá»™t, cáº§n cá»‘ gáº¯ng sá»­ dá»¥ng chá»‰ má»¥c Ä‘á»ƒ thá»±c hiá»‡n truy váº¥n dá»¯ liá»‡u vÃ  giáº£m thiá»ƒu chi phÃ­ truy váº¥n láº¡i dá»¯ liá»‡u.</li>
<li><strong>TrÃ¡nh táº¡o chá»‰ má»¥c trÃ¹ng láº·p vÃ  khÃ´ng cáº§n thiáº¿t</strong>.</li>
<li><strong>Xem xÃ©t xÃ³a cÃ¡c chá»‰ má»¥c khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng</strong>.</li>
<li><strong>Má»Ÿ rá»™ng chá»‰ má»¥c hiá»‡n cÃ³ thay vÃ¬ táº¡o má»›i chá»‰ má»¥c</strong>.</li>
<li><strong>CÃ¡c cá»™t Ä‘Æ°á»£c sá»­ dá»¥ng thÆ°á»ng xuyÃªn lÃ m Ä‘iá»u kiá»‡n lá»c nÃªn xem xÃ©t viá»‡c táº¡o chá»‰ má»¥c</strong>.</li>
</ul>
<h3>Cá»™t Ä‘á»™c láº­p</h3>
<p><strong>"Cá»™t Ä‘á»™c láº­p" cÃ³ nghÄ©a lÃ  cÃ¡c cá»™t Ä‘Æ°á»£c láº­p chá»‰ má»¥c khÃ´ng thá»ƒ lÃ  má»™t pháº§n cá»§a biá»ƒu thá»©c, chÃºng cÅ©ng khÃ´ng thá»ƒ lÃ  tham sá»‘ cá»§a hÃ m</strong>&nbsp;.</p>
<p><strong>Viá»‡c thá»±c hiá»‡n cÃ¡c phÃ©p toÃ¡n trÃªn trÆ°á»ng chá»‰ má»¥c cÃ³ thá»ƒ gÃ¢y thiá»‡t háº¡i Ä‘áº¿n tÃ­nh tuáº§n tá»± cá»§a giÃ¡ trá»‹ chá»‰ má»¥c, do Ä‘Ã³ trÃ¬nh tá»‘i Æ°u quyáº¿t Ä‘á»‹nh tá»« chá»‘i sá»­ dá»¥ng chá»©c nÄƒng tÃ¬m kiáº¿m cÃ¢y.</strong></p>
<p>Náº¿u cÃ¡c cá»™t trong truy váº¥n khÃ´ng pháº£i lÃ  cÃ¡c cá»™t Ä‘á»™c láº­p, cÆ¡ sá»Ÿ dá»¯ liá»‡u sáº½ khÃ´ng sá»­ dá»¥ng chá»‰ má»¥c.</p>
<p>âŒ VÃ­ dá»¥ khÃ´ng Ä‘Ãºng:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> actor_id </span><span style="color:#C678DD;--shiki-dark:#C678DD">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> actor </span><span style="color:#C678DD;--shiki-dark:#C678DD">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> actor_id + </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ... </span><span style="color:#C678DD;--shiki-dark:#C678DD">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> TO_DAYS(current_date) - TO_DAYS(date_col) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><h3>Chá»‰ má»¥c che phá»§</h3>
<p><strong>Chá»‰ má»¥c che phá»§ lÃ  chá»‰ má»¥c mÃ  thÃ´ng tin trÃªn chá»‰ má»¥c Ä‘á»§ Ä‘á»ƒ Ä‘Ã¡p á»©ng yÃªu cáº§u truy váº¥n, khÃ´ng cáº§n truy váº¥n láº¡i dá»¯ liá»‡u</strong>.</p>
<p>ã€VÃ­ dá»¥ã€‘Truy váº¥n pháº¡m vi</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">create</span><span style="color:#C678DD;--shiki-dark:#C678DD"> table</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> T</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">ID </span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#C678DD;--shiki-dark:#C678DD"> primary key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">k </span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">s </span><span style="color:#C678DD;--shiki-dark:#C678DD">varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">16</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379"> ''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> k(k))</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">engine</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">InnoDB;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">insert into</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> T </span><span style="color:#C678DD;--shiki-dark:#C678DD">values</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'aa'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">),(</span><span style="color:#D19A66;--shiki-dark:#D19A66">200</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'bb'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">),(</span><span style="color:#D19A66;--shiki-dark:#D19A66">300</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'cc'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">),(</span><span style="color:#D19A66;--shiki-dark:#D19A66">500</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'ee'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">),(</span><span style="color:#D19A66;--shiki-dark:#D19A66">600</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">6</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'ff'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">),(</span><span style="color:#D19A66;--shiki-dark:#D19A66">700</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">7</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379">'gg'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> T </span><span style="color:#C678DD;--shiki-dark:#C678DD">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> k </span><span style="color:#C678DD;--shiki-dark:#C678DD">between</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 3</span><span style="color:#C678DD;--shiki-dark:#C678DD"> and</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 5</span></span></code></pre>
</div><p>Cáº§n thá»±c hiá»‡n bao nhiÃªu láº§n tÃ¬m kiáº¿m cÃ¢y, quÃ©t qua bao nhiÃªu hÃ ng?</p>
<ol>
<li>TÃ¬m kiáº¿m báº£n ghi vá»›i k=3 trÃªn cÃ¢y chá»‰ má»¥c k, láº¥y ID = 300;</li>
<li>TÃ¬m kiáº¿m báº£n ghi vá»›i ID = 300 trÃªn cÃ¢y chá»‰ má»¥c ID, láº¥y R3;</li>
<li>TÃ¬m kiáº¿m báº£n ghi vá»›i k=5 trÃªn cÃ¢y chá»‰ má»¥c k, láº¥y ID = 500;</li>
<li>TÃ¬m kiáº¿m báº£n ghi vá»›i ID = 500 trÃªn cÃ¢y chá»‰ má»¥c ID, láº¥y R4;</li>
<li>TÃ¬m kiáº¿m báº£n ghi vá»›i k=6 trÃªn cÃ¢y chá»‰ má»¥c k, khÃ´ng thá»a mÃ£n Ä‘iá»u kiá»‡n, káº¿t thÃºc vÃ²ng láº·p.</li>
</ol>
<p>Trong quÃ¡ trÃ¬nh nÃ y, quÃ¡ trÃ¬nh tÃ¬m kiáº¿m láº¡i trÃªn cÃ¢y chá»‰ má»¥c chÃ­nh Ä‘Æ°á»£c gá»i lÃ  truy váº¥n láº¡i. CÃ³ thá»ƒ tháº¥y, quÃ¡ trÃ¬nh truy váº¥n nÃ y Ä‘á»c 3 báº£n ghi trÃªn cÃ¢y chá»‰ má»¥c k (bÆ°á»›c 1, 3 vÃ  5) vÃ  truy váº¥n láº¡i hai láº§n (bÆ°á»›c 2 vÃ  4).</p>
<p>Náº¿u cÃ¢u lá»‡nh thá»±c hiá»‡n lÃ  select ID from T where k between 3 and 5, chá»‰ cáº§n láº¥y giÃ¡ trá»‹ ID, vÃ  giÃ¡ trá»‹ ID Ä‘Ã£ cÃ³ trÃªn cÃ¢y chá»‰ má»¥c k, do Ä‘Ã³ cÃ³ thá»ƒ tráº£ káº¿t quáº£ truy váº¥n trá»±c tiáº¿p mÃ  khÃ´ng cáº§n truy váº¥n láº¡i. Chá»‰ má»¥c chá»©a táº¥t cáº£ cÃ¡c giÃ¡ trá»‹ cáº§n truy váº¥n, Ä‘Æ°á»£c gá»i lÃ  chá»‰ má»¥c che phá»§.</p>
<p><strong>Do chá»‰ má»¥c che phá»§ giáº£m sá»‘ láº§n tÃ¬m kiáº¿m cÃ¢y, Ä‘Ã¡ng ká»ƒ cáº£i thiá»‡n hiá»‡u suáº¥t truy váº¥n, nÃªn sá»­ dá»¥ng chá»‰ má»¥c che phá»§ lÃ  má»™t biá»‡n phÃ¡p tá»‘i Æ°u hiá»‡u suáº¥t phá»• biáº¿n</strong>.</p>
<h3>Sá»­ dá»¥ng chá»‰ má»¥c Ä‘á»ƒ sáº¯p xáº¿p</h3>
<p>MySQL cÃ³ hai cÃ¡ch Ä‘á»ƒ táº¡o káº¿t quáº£ sáº¯p xáº¿p: thÃ´ng qua thao tÃ¡c sáº¯p xáº¿p hoáº·c quÃ©t theo thá»© tá»± chá»‰ má»¥c.</p>
<p><strong>Chá»‰ má»¥c tá»‘t lÃ  chá»‰ má»¥c cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ sáº¯p xáº¿p vÃ  tÃ¬m kiáº¿m hÃ ng</strong>. Äiá»u nÃ y cho phÃ©p káº¿t quáº£ Ä‘Æ°á»£c truy xuáº¥t trá»±c tiáº¿p tá»« chá»‰ má»¥c mÃ  khÃ´ng cáº§n sáº¯p xáº¿p láº¡i.</p>
<p>Khi sá»­ dá»¥ng chá»‰ má»¥c Ä‘á»ƒ sáº¯p xáº¿p, cáº§n Ä‘áº£m báº£o chá»‰ má»¥c Ä‘Æ°á»£c chá»n Ä‘á»§ Ä‘á»ƒ thá»±c hiá»‡n truy váº¥n dá»¯ liá»‡u vÃ  giáº£m thiá»ƒu chi phÃ­ truy váº¥n láº¡i dá»¯ liá»‡u.</p>
<p>QuÃ¡ trÃ¬nh thá»±c hiá»‡n truy váº¥n sáº½ nhÆ° sau:</p>
<ol>
<li>TÃ¬m kiáº¿m báº£n ghi Ä‘áº§u tiÃªn trong chá»‰ má»¥c (city, name, age) thá»a mÃ£n Ä‘iá»u kiá»‡n city='HÃ  Ná»™i' vÃ  láº¥y giÃ¡ trá»‹ city, name vÃ  age lÃ m má»™t pháº§n cá»§a káº¿t quáº£ trá»±c tiáº¿p tráº£ vá»;</li>
<li>Láº¥y báº£n ghi tiáº¿p theo tá»« chá»‰ má»¥c (city, name, age) vÃ  láº¥y giÃ¡ trá»‹ city, name vÃ  age lÃ m má»™t pháº§n cá»§a káº¿t quáº£ trá»±c tiáº¿p tráº£ vá»;</li>
<li>Láº·p láº¡i bÆ°á»›c 2 cho Ä‘áº¿n khi tÃ¬m tháº¥y báº£n ghi thá»© 1000 hoáº·c khÃ´ng thá»a mÃ£n Ä‘iá»u kiá»‡n city='HÃ  Ná»™i' thÃ¬ káº¿t thÃºc vÃ²ng láº·p.</li>
</ol>
<h3>Chá»‰ má»¥c tiá»n tá»‘</h3>
<p>ÄÃ´i khi cáº§n táº¡o chá»‰ má»¥c cho cÃ¡c cá»™t cÃ³ Ä‘á»™ dÃ i lá»›n, Ä‘iá»u nÃ y sáº½ lÃ m cho chá»‰ má»¥c trá»Ÿ nÃªn lá»›n vÃ  cháº­m.</p>
<p>Trong trÆ°á»ng há»£p nÃ y, cÃ³ thá»ƒ sá»­ dá»¥ng chá»‰ má»¥c tiá»n tá»‘, chá»‰ lÆ°u trá»¯ má»™t pháº§n Ä‘áº§u cá»§a chuá»—i, Ä‘iá»u nÃ y cÃ³ thá»ƒ <strong>tiáº¿t kiá»‡m khÃ´ng gian chá»‰ má»¥c Ä‘Ã¡ng ká»ƒ vÃ  cáº£i thiá»‡n hiá»‡u suáº¥t chá»‰ má»¥c</strong>. Tuy nhiÃªn, Ä‘iá»u nÃ y cÅ©ng <strong>giáº£m tÃ­nh chá»n lá»c cá»§a chá»‰ má»¥c</strong>. Äá»‘i vá»›i cÃ¡c cá»™t vÄƒn báº£n nhÆ° <code>BLOB</code>/<code>TEXT</code>/<code>VARCHAR</code> khÃ´ng thá»ƒ táº¡o chá»‰ má»¥c Ä‘áº§y Ä‘á»§, vÃ¬ háº§u háº¿t cÃ¡c cÆ¡ sá»Ÿ dá»¯ liá»‡u khÃ´ng cho phÃ©p táº¡o chá»‰ má»¥c Ä‘áº§y Ä‘á»§ cho cÃ¡c cá»™t nÃ y.</p>
<p><strong>TÃ­nh chá»n lá»c cá»§a chá»‰ má»¥c</strong> lÃ  tá»· lá»‡ giá»¯a cÃ¡c giÃ¡ trá»‹ chá»‰ má»¥c khÃ´ng trÃ¹ng nhau vÃ  tá»•ng sá»‘ báº£n ghi trong báº£ng dá»¯ liá»‡u. GiÃ¡ trá»‹ tá»‘i Ä‘a lÃ  1, khi Ä‘Ã³ má»—i báº£n ghi cÃ³ má»™t chá»‰ má»¥c duy nháº¥t tÆ°Æ¡ng á»©ng. Äá»™ chá»n lá»c cÃ ng cao, hiá»‡u suáº¥t truy váº¥n cÅ©ng cÃ ng cao. Náº¿u cÃ³ nhiá»u chá»‰ má»¥c tiá»n tá»‘ khá»›p vá»›i Ä‘iá»u kiá»‡n, ta pháº£i quÃ©t tá»«ng cÃ¡i cho Ä‘áº¿n khi tÃ¬m Ä‘Æ°á»£c báº£n ghi chÃ­nh xÃ¡c cuá»‘i cÃ¹ng.</p>
<p><strong>Sá»­ dá»¥ng chá»‰ má»¥c tiá»n tá»‘ vÃ  xÃ¡c Ä‘á»‹nh Ä‘á»™ dÃ i, báº¡n cÃ³ thá»ƒ tiáº¿t kiá»‡m khÃ´ng gian mÃ  khÃ´ng cáº§n tÄƒng thÃªm quÃ¡ nhiá»u chi phÃ­ truy váº¥n.</strong></p>
<p>Lá»±a chá»n Ä‘á»™ dÃ i chá»‰ má»¥c tiá»n tá»‘ phÃ¹ há»£p lÃ m tháº¿ nÃ o?</p>
<p>CÃ³ thá»ƒ sá»­ dá»¥ng cÃ¢u lá»‡nh sau Ä‘á»ƒ tÃ­nh toÃ¡n sá»‘ lÆ°á»£ng giÃ¡ trá»‹ khÃ¡c nhau trÃªn cá»™t:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">select</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">distinct</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> email) </span><span style="color:#C678DD;--shiki-dark:#C678DD">as</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> L </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> SUser;</span></span></code></pre>
</div><p>Sau Ä‘Ã³, láº§n lÆ°á»£t chá»n cÃ¡c Ä‘á»™ dÃ i tiá»n tá»‘ khÃ¡c nhau Ä‘á»ƒ xem giÃ¡ trá»‹ nÃ y, vÃ­ dá»¥: chÃºng ta muá»‘n xem tiá»n tá»‘ tá»« 4 Ä‘áº¿n 7 kÃ½ tá»±, cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¢u lá»‡nh sau:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">select</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">  count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">distinct</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> left</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(email,</span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)ï¼‰</span><span style="color:#C678DD;--shiki-dark:#C678DD">as</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> L4,</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">  count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">distinct</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> left</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(email,</span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)ï¼‰</span><span style="color:#C678DD;--shiki-dark:#C678DD">as</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> L5,</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">  count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">distinct</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> left</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(email,</span><span style="color:#D19A66;--shiki-dark:#D19A66">6</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)ï¼‰</span><span style="color:#C678DD;--shiki-dark:#C678DD">as</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> L6,</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">  count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">distinct</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> left</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(email,</span><span style="color:#D19A66;--shiki-dark:#D19A66">7</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)ï¼‰</span><span style="color:#C678DD;--shiki-dark:#C678DD">as</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> L7,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> SUser;</span></span></code></pre>
</div><p>Táº¥t nhiÃªn, <strong>sá»­ dá»¥ng chá»‰ má»¥c tiá»n tá»‘ cÃ³ thá»ƒ lÃ m giáº£m Ä‘á»™ phÃ¢n biá»‡t</strong>, vÃ¬ váº­y báº¡n cáº§n thiáº¿t láº­p trÆ°á»›c tá»· lá»‡ cháº¥p nháº­n Ä‘Æ°á»£c cá»§a sá»± giáº£m nÃ y, vÃ­ dá»¥ nhÆ° 5%. Sau Ä‘Ã³, trong cÃ¡c káº¿t quáº£ tráº£ vá» tá»« L4~L7, hÃ£y tÃ¬m cÃ¡c giÃ¡ trá»‹ khÃ´ng nhá» hÆ¡n L * 95%, giáº£ sá»­ á»Ÿ Ä‘Ã¢y cáº£ L6 vÃ  L7 Ä‘á»u thá»a mÃ£n Ä‘iá»u kiá»‡n nÃ y, báº¡n cÃ³ thá»ƒ chá»n chiá»u dÃ i tiá»n tá»‘ lÃ  6.</p>
<p>NgoÃ i ra, <strong><code>ORDER BY</code> khÃ´ng thá»ƒ sá»­ dá»¥ng chá»‰ má»¥c tiá»n tá»‘, khÃ´ng thá»ƒ sá»­ dá»¥ng chá»‰ má»¥c tiá»n tá»‘ lÃ m chá»‰ má»¥c che phá»§</strong>.</p>
<h3>NguyÃªn táº¯c khá»›p trÆ°á»›c tá»‘i Ä‘a</h3>
<p>KhÃ´ng chá»‰ lÃ  toÃ n bá»™ Ä‘á»‹nh nghÄ©a chá»‰ má»¥c, chá»‰ cáº§n Ä‘Ã¡p á»©ng khá»›p trÆ°á»›c tá»‘i Ä‘a, chá»‰ má»¥c cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÄƒng tá»‘c tÃ¬m kiáº¿m. Khá»›p trÆ°á»›c tá»‘i Ä‘a cÃ³ thá»ƒ lÃ  N cá»™t Ä‘áº§u tiÃªn cá»§a chá»‰ má»¥c káº¿t há»£p hoáº·c M kÃ½ tá»± Ä‘áº§u tiÃªn cá»§a chá»‰ má»¥c chuá»—i.</p>
<p>MySQL sáº½ tiáº¿p tá»¥c khá»›p tá»« trÃ¡i sang pháº£i cho Ä‘áº¿n khi gáº·p cÃ¡c truy váº¥n pháº¡m vi (<code>&gt;</code>,<code>&lt;</code>,<code>BETWEEN</code>,<code>LIKE</code>).</p>
<ul>
<li>Chá»‰ má»¥c cÃ³ thá»ƒ Ä‘Æ¡n giáº£n nhÆ° má»™t cá»™t (a) hoáº·c phá»©c táº¡p nhÆ° nhiá»u cá»™t (a, b, c, d), tá»©c lÃ  chá»‰ má»¥c káº¿t há»£p.</li>
<li>Náº¿u Ä‘Ã³ lÃ  chá»‰ má»¥c káº¿t há»£p, thÃ¬ khÃ³a cÅ©ng bao gá»“m nhiá»u cá»™t, Ä‘á»“ng thá»i, chá»‰ má»¥c chá»‰ cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ¬m kiáº¿m khÃ³a cÃ³ sáºµn (báº±ng nhau), khi gáº·p truy váº¥n pháº¡m vi (<code>&gt;</code>,<code>&lt;</code>,<code>BETWEEN</code>,<code>LIKE</code>), nÃ³ sáº½ khÃ´ng thá»ƒ khá»›p tiáº¿p theo, sau Ä‘Ã³ rÆ¡i vÃ o tÃ¬m kiáº¿m tuyáº¿n tÃ­nh.</li>
<li>Do Ä‘Ã³, <strong>thá»© tá»± cá»™t quyáº¿t Ä‘á»‹nh sá»‘ cá»™t cÃ³ thá»ƒ khá»›p Ä‘Æ°á»£c</strong>.</li>
</ul>
<p><strong>KhÃ´ng nÃªn táº¡o chá»‰ má»¥c Ä‘á»™c láº­p cho má»—i cá»™t</strong>.</p>
<p><strong>HÃ£y Ä‘áº·t cá»™t cÃ³ kháº£ nÄƒng chá»n lá»c cao hoáº·c cÆ¡ sá»Ÿ sá»‘ lÆ°á»£ng lá»›n á»Ÿ Ä‘áº§u danh sÃ¡ch cÃ¡c cá»™t káº¿t há»£p</strong>. Tuy nhiÃªn, Ä‘Ã´i khi cÅ©ng cáº§n xem xÃ©t cÃ¡c yáº¿u tá»‘ nhÆ° sáº¯p xáº¿p, nhÃ³m vÃ  Ä‘iá»u kiá»‡n pháº¡m vi trong má»‡nh Ä‘á» <code>WHERE</code>, nhá»¯ng yáº¿u tá»‘ nÃ y cÅ©ng áº£nh hÆ°á»Ÿng Ä‘Ã¡ng ká»ƒ Ä‘áº¿n hiá»‡u suáº¥t truy váº¥n.</p>
<p>VÃ­ dá»¥: <code>a = 1 and b = 2 and c &gt; 3 and d = 4</code>ï¼Œnáº¿u táº¡o chá»‰ má»¥c theo thá»© tá»± (a,b,c,d)ï¼ŒthÃ¬ d sáº½ khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng chá»‰ má»¥c. Náº¿u táº¡o chá»‰ má»¥c theo thá»© tá»± (a,b,d,c)ï¼ŒthÃ¬ cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng chá»‰ má»¥c cho táº¥t cáº£ cÃ¡c cá»™t. Thá»© tá»± a,b,d cÃ³ thá»ƒ Ä‘Æ°á»£c sáº¯p xáº¿p theo báº¥t ká»³ cÃ¡ch nÃ o.</p>
<p>HÃ£y Ä‘áº·t cá»™t chá»‰ má»¥c cÃ³ tÃ­nh chá»n lá»c cao nháº¥t á»Ÿ phÃ­a trÆ°á»›c, tÃ­nh chá»n lá»c cá»§a chá»‰ má»¥c Ä‘Æ°á»£c hiá»ƒu lÃ  tá»· lá»‡ giá»¯a giÃ¡ trá»‹ chá»‰ má»¥c khÃ´ng trÃ¹ng vÃ  tá»•ng sá»‘ báº£n ghi. GiÃ¡ trá»‹ tá»‘i Ä‘a lÃ  1, khi Ä‘Ã³ má»—i báº£n ghi sáº½ cÃ³ duy nháº¥t má»™t chá»‰ má»¥c tÆ°Æ¡ng á»©ng. Äá»™ chá»n lá»c cÃ ng cao thÃ¬ hiá»‡u suáº¥t truy váº¥n cÅ©ng cÃ ng cao.</p>
<p>VÃ­ dá»¥ nhÆ° káº¿t quáº£ hiá»ƒn thá»‹ dÆ°á»›i Ä‘Ã¢y, tÃ­nh chá»n lá»c cá»§a customer_id cÃ³ má»©c Ä‘á»™ Æ°u tiÃªn cao hÆ¡n so vá»›i staff_id, do Ä‘Ã³ tá»‘t nháº¥t lÃ  Ä‘á»ƒ cá»™t customer_id Ä‘Æ°á»£c Ä‘áº·t trÆ°á»›c trong chá»‰ má»¥c káº¿t há»£p.</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SELECT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> COUNT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">DISTINCT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> staff_id)/</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">COUNT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(*) </span><span style="color:#C678DD;--shiki-dark:#C678DD">AS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> staff_id_selectivity,</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">COUNT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">DISTINCT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> customer_id)/</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">COUNT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(*) </span><span style="color:#C678DD;--shiki-dark:#C678DD">AS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> customer_id_selectivity,</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">COUNT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(*)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> payment;</span></span></code></pre>
</div><div class="language-batch" data-ext="batch" data-title="batch"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">   staff_id_selectivity: 0.0001</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">customer_id_selectivity: 0.0373</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">               COUNT(*): </span><span style="color:#D19A66;--shiki-dark:#D19A66">16049</span></span></code></pre>
</div><h3>PhÃ©p = vÃ  in cÃ³ thá»ƒ khÃ´ng tuÃ¢n theo thá»© tá»±</h3>
<p><strong>KhÃ´ng cáº§n quan tÃ¢m Ä‘áº¿n thá»© tá»± cá»§a <code>=</code> vÃ  <code>IN</code></strong>ï¼ŒMySQL sáº½ tá»± Ä‘á»™ng tá»‘i Æ°u thá»© tá»± cá»§a cÃ¡c Ä‘iá»u kiá»‡n nÃ y Ä‘á»ƒ khá»›p vá»›i sá»‘ lÆ°á»£ng cá»™t chá»‰ má»¥c cÃ ng nhiá»u cÃ ng tá»‘t.</p>
<p>ã€VÃ­ dá»¥ã€‘Náº¿u cÃ³ chá»‰ má»¥c (a, b, c, d), cÃ¢u truy váº¥n cÃ³ Ä‘iá»u kiá»‡n <code>c &gt; 3 and b = 2 and a = 1 and d &lt; 4</code> vÃ  <code>a = 1 and c &gt; 3 and b = 2 and d &lt; 4</code> Ä‘á»u cÃ³ thá»ƒ. MySQL sáº½ tá»± Ä‘á»™ng tá»‘i Æ°u thÃ nh <code>a = 1 and b = 2 and c &gt; 3 and d &lt; 4</code>, vÃ  tÃ¬m kiáº¿m theo thá»© tá»± a, b, c, d.</p>
<h2>Thá»±c hÃ nh tá»‘t nháº¥t cho chá»‰ má»¥c</h2>
<p>Viá»‡c táº¡o chá»‰ má»¥c khÃ´ng Ä‘áº£m báº£o sáº½ mang láº¡i hiá»‡u quáº£. VÃ­ dá»¥, khÃ´ng tuÃ¢n thá»§ chá»‰ má»¥c tiá»n tá»‘, nguyÃªn táº¯c khá»›p trÆ°á»›c tá»‘i Ä‘a, Ä‘iá»u kiá»‡n truy váº¥n liÃªn quan Ä‘áº¿n tÃ­nh toÃ¡n hÃ m, v.v. Ä‘á»u khÃ´ng thá»ƒ sá»­ dá»¥ng chá»‰ má»¥c. NgoÃ i ra, ngay cáº£ khi cÃ¢u lá»‡nh SQL thá»a mÃ£n Ä‘iá»u kiá»‡n sá»­ dá»¥ng chá»‰ má»¥c, MySQL cÅ©ng sáº½ Ä‘Ã¡nh giÃ¡ chi phÃ­ cá»§a cÃ¡c phÆ°Æ¡ng phÃ¡p truy váº¥n khÃ¡c nhau Ä‘á»ƒ quyáº¿t Ä‘á»‹nh xem cÃ³ sá»­ dá»¥ng chá»‰ má»¥c hay khÃ´ng vÃ  sá»­ dá»¥ng chá»‰ má»¥c nÃ o.</p>
<p>Do Ä‘Ã³, khi cá»‘ gáº¯ng tá»‘i Æ°u hiá»‡u suáº¥t SQL báº±ng cÃ¡ch sá»­ dá»¥ng chá»‰ má»¥c, hÃ£y cháº¯c cháº¯n xÃ¡c nháº­n xem chá»‰ má»¥c cÃ³ thá»ƒ cáº£i thiá»‡n hiá»‡u suáº¥t thá»±c táº¿ hay khÃ´ng thÃ´ng qua chiáº¿n lÆ°á»£c thá»±c thi (<code>EXPLAIN</code>) hoáº·c hiá»‡u quáº£ thá»±c táº¿. Náº¿u cÃ³ tháº¯c máº¯c vá» káº¿ hoáº¡ch thá»±c thi Ä‘Æ°á»£c cung cáº¥p bá»Ÿi <code>EXPLAIN</code>, báº¡n cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng <code>optimizer_trace</code> Ä‘á»ƒ xem káº¿ hoáº¡ch thá»±c thi chi tiáº¿t Ä‘á»ƒ phÃ¢n tÃ­ch tiáº¿p.</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20220320201844.png" type="image/png"/>
    </item>
    <item>
      <title>MySQL Opearation</title>
      <link>https://vanhung4499.github.io/database/mysql/opearation.html</link>
      <guid>https://vanhung4499.github.io/database/mysql/opearation.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MySQL Opearation</source>
      <description>MySQL Operation Náº¿u cÃ´ng ty cá»§a báº¡n cÃ³ DBA, thÃ¬ tÃ´i xin chÃºc má»«ng báº¡n, báº¡n cÃ³ thá»ƒ bá» qua viá»‡c quáº£n trá»‹ Mysql. Náº¿u cÃ´ng ty cá»§a báº¡n khÃ´ng cÃ³ DBA, hÃ£y há»c cÃ¡ch thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘...</description>
      <category>mysql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>Náº¿u cÃ´ng ty cá»§a báº¡n cÃ³ DBA, thÃ¬ tÃ´i xin chÃºc má»«ng báº¡n, báº¡n cÃ³ thá»ƒ bá» qua viá»‡c quáº£n trá»‹ Mysql. Náº¿u cÃ´ng ty cá»§a báº¡n khÃ´ng cÃ³ DBA, hÃ£y há»c cÃ¡ch thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng quáº£n trá»‹ cÆ¡ báº£n cá»§a Mysql, Ä‘Ã³ lÃ  Ä‘iá»u cáº§n thiáº¿t Ä‘á»ƒ tá»± báº£o vá»‡ mÃ¬nh khi hoáº¡t Ä‘á»™ng trong lÄ©nh vá»±c nÃ y.</p>
</blockquote>
<h2>CÃ i Ä‘áº·t vÃ  triá»ƒn khai</h2>
<h3>CÃ i Ä‘áº·t trÃªn Windows</h3>
<p>(1) Táº£i phiÃªn báº£n Mysql 5.7 Portable (khÃ´ng cáº§n cÃ i Ä‘áº·t)</p>
<p>Link táº£i: <a href="https://dev.mysql.com/downloads/mysql/5.7.html#downloads" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/downloads/mysql/5.7.html#downloads</a></p>
<p>(2) Giáº£i nÃ©n vÃ  táº¡o file my.ini trong thÆ° má»¥c gá»‘c</p>
<p>VÃ­ dá»¥ file my.ini:</p>
<div class="language-ini line-numbers-mode" data-ext="ini" data-title="ini"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">[mysqld]</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Thiáº¿t láº­p cá»•ng 3306</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">port</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> 3306</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Thiáº¿t láº­p Ä‘Æ°á»ng dáº«n cÃ i Ä‘áº·t mysql, thay Ä‘á»•i Ä‘Æ°á»ng dáº«n nÃ y cho phÃ¹ há»£p vá»›i thÆ° má»¥c báº¡n giáº£i nÃ©n</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">basedir</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">D:\\Tools\\DB\\mysql\\mysql-5.7.31</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Sá»‘ káº¿t ná»‘i tá»‘i Ä‘a</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">max_connections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">200</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Mysql sá»­ dá»¥ng bá»™ kÃ½ tá»± máº·c Ä‘á»‹nh lÃ  latin1</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">character-set-server</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">utf8</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Thiáº¿t láº­p engine lÆ°u trá»¯ máº·c Ä‘á»‹nh cho báº£ng má»›i</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">default-storage-engine</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">INNODB</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">[client]</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Thiáº¿t láº­p bá»™ kÃ½ tá»± máº·c Ä‘á»‹nh cho client mysql</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">default-character-set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">utf8</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>(3) Thá»±c hiá»‡n cÃ¡c lá»‡nh cÃ i Ä‘áº·t</p>
<p>TrÃªn cá»­a sá»• CMD, thá»±c hiá»‡n láº§n lÆ°á»£t cÃ¡c lá»‡nh cÃ i Ä‘áº·t sau:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>cd D:\\Tools\\DB\\mysql\\mysql-5.7.31</span></span>
<span class="line"><span>mysqld --initialize</span></span>
<span class="line"><span>mysqld -install</span></span></code></pre>
</div><p>Giáº£i thÃ­ch:</p>
<ul>
<li><code>mysqld --initialize</code> sáº½ tá»± Ä‘á»™ng khá»Ÿi táº¡o vÃ  táº¡o thÆ° má»¥c data.</li>
<li><code>mysqld -install</code> sáº½ cÃ i Ä‘áº·t dá»‹ch vá»¥ mysql.</li>
</ul>
<p>(4) Khá»Ÿi Ä‘á»™ng dá»‹ch vá»¥</p>
<p>TrÃªn cá»­a sá»• CMD, thá»±c hiá»‡n lá»‡nh <code>net start mysql</code> Ä‘á»ƒ khá»Ÿi Ä‘á»™ng dá»‹ch vá»¥.</p>
<h3>CÃ i Ä‘áº·t trÃªn CentOS</h3>
<blockquote>
<p>BÃ i viáº¿t nÃ y chá»‰ giá»›i thiá»‡u cÃ¡ch cÃ i Ä‘áº·t thÃ´ng qua gÃ³i rpm</p>
</blockquote>
<h4>CÃ i Ä‘áº·t nguá»“n yum cá»§a mysql</h4>
<p>Link táº£i chÃ­nh thá»©c: <a href="https://dev.mysql.com/downloads/repo/yum/" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/downloads/repo/yum/</a></p>
<p>(1) Táº£i gÃ³i yum</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">wget</span><span style="color:#98C379;--shiki-dark:#98C379"> https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm</span></span></code></pre>
</div><p>(2) CÃ i Ä‘áº·t tá»‡p repo yum vÃ  cáº­p nháº­t bá»™ nhá»› cache yum</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">rpm</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -ivh</span><span style="color:#98C379;--shiki-dark:#98C379"> mysql80-community-release-el7-1.noarch.rpm</span></span></code></pre>
</div><p>Káº¿t quáº£ thá»±c hiá»‡n:</p>
<p>Sáº½ táº¡o ra hai tá»‡p repo trong thÆ° má»¥c /etc/yum.repos.d/</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">$</span><span style="color:#98C379;--shiki-dark:#98C379"> ls</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> | </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">grep</span><span style="color:#98C379;--shiki-dark:#98C379"> mysql</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">mysql-community.repo</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">mysql-community-source.repo</span></span></code></pre>
</div><p>Cáº­p nháº­t yum:</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">yum</span><span style="color:#98C379;--shiki-dark:#98C379"> clean</span><span style="color:#98C379;--shiki-dark:#98C379"> all</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">yum</span><span style="color:#98C379;--shiki-dark:#98C379"> makecache</span></span></code></pre>
</div><p>(3) Kiá»ƒm tra tráº¡ng thÃ¡i cÃ i Ä‘áº·t rpm</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">$</span><span style="color:#98C379;--shiki-dark:#98C379"> yum</span><span style="color:#98C379;--shiki-dark:#98C379"> search</span><span style="color:#98C379;--shiki-dark:#98C379"> mysql</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> | </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">grep</span><span style="color:#98C379;--shiki-dark:#98C379"> server</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">mysql-community-common.i686</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> MySQL</span><span style="color:#98C379;--shiki-dark:#98C379"> database</span><span style="color:#98C379;--shiki-dark:#98C379"> common</span><span style="color:#98C379;--shiki-dark:#98C379"> files</span><span style="color:#98C379;--shiki-dark:#98C379"> for</span><span style="color:#98C379;--shiki-dark:#98C379"> server</span><span style="color:#98C379;--shiki-dark:#98C379"> and</span><span style="color:#98C379;--shiki-dark:#98C379"> client</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">mysql-community-common.x86_64</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> MySQL</span><span style="color:#98C379;--shiki-dark:#98C379"> database</span><span style="color:#98C379;--shiki-dark:#98C379"> common</span><span style="color:#98C379;--shiki-dark:#98C379"> files</span><span style="color:#98C379;--shiki-dark:#98C379"> for</span><span style="color:#98C379;--shiki-dark:#98C379"> server</span><span style="color:#98C379;--shiki-dark:#98C379"> and</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">mysql-community-test.x86_64</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> Test</span><span style="color:#98C379;--shiki-dark:#98C379"> suite</span><span style="color:#98C379;--shiki-dark:#98C379"> for</span><span style="color:#98C379;--shiki-dark:#98C379"> the</span><span style="color:#98C379;--shiki-dark:#98C379"> MySQL</span><span style="color:#98C379;--shiki-dark:#98C379"> database</span><span style="color:#98C379;--shiki-dark:#98C379"> server</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">                       :</span><span style="color:#98C379;--shiki-dark:#98C379"> administering</span><span style="color:#98C379;--shiki-dark:#98C379"> MySQL</span><span style="color:#98C379;--shiki-dark:#98C379"> servers</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">mysql-community-server.x86_64</span><span style="color:#98C379;--shiki-dark:#98C379"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> A</span><span style="color:#98C379;--shiki-dark:#98C379"> very</span><span style="color:#98C379;--shiki-dark:#98C379"> fast</span><span style="color:#98C379;--shiki-dark:#98C379"> and</span><span style="color:#98C379;--shiki-dark:#98C379"> reliable</span><span style="color:#98C379;--shiki-dark:#98C379"> SQL</span><span style="color:#98C379;--shiki-dark:#98C379"> database</span><span style="color:#98C379;--shiki-dark:#98C379"> server</span></span></code></pre>
</div><p>Sau khi cÃ i Ä‘áº·t mysql báº±ng yum, sáº½ cÃ³ má»™t sá»‘ thÆ° má»¥c quan trá»ng:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>## Tá»‡p cáº¥u hÃ¬nh</span></span>
<span class="line"><span>/etc/my.cnf</span></span>
<span class="line"><span>## ThÆ° má»¥c cÆ¡ sá»Ÿ dá»¯ liá»‡u</span></span>
<span class="line"><span>/var/lib/mysql/</span></span>
<span class="line"><span>## Tá»‡p cáº¥u hÃ¬nh</span></span>
<span class="line"><span>/usr/share/mysql (lá»‡nh mysql.server vÃ  tá»‡p cáº¥u hÃ¬nh)</span></span>
<span class="line"><span>## CÃ¡c lá»‡nh liÃªn quan</span></span>
<span class="line"><span>/usr/bin (mysqladmin, mysqldump vÃ  cÃ¡c lá»‡nh khÃ¡c)</span></span>
<span class="line"><span>## Tá»‡p khá»Ÿi Ä‘á»™ng</span></span>
<span class="line"><span>/usr/lib/systemd/system/mysqld.service (Ä‘Äƒng kÃ½ dá»‹ch vá»¥ systemd)</span></span></code></pre>
</div><p>(4) CÃ i Ä‘áº·t mÃ¡y chá»§ mysql</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">yum</span><span style="color:#98C379;--shiki-dark:#98C379"> install</span><span style="color:#98C379;--shiki-dark:#98C379"> mysql-community-server</span></span></code></pre>
</div><h4>Quáº£n lÃ½ dá»‹ch vá»¥ mysql</h4>
<p>Sau khi cÃ i Ä‘áº·t mysql báº±ng yum, sáº½ cÃ³ má»™t dá»‹ch vá»¥ systemd cÃ³ tÃªn <code>mysqld</code>.</p>
<p>Quáº£n lÃ½ dá»‹ch vá»¥ ráº¥t Ä‘Æ¡n giáº£n:</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">## Kiá»ƒm tra tráº¡ng thÃ¡i</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379"> status</span><span style="color:#98C379;--shiki-dark:#98C379"> mysqld</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">## KÃ­ch hoáº¡t dá»‹ch vá»¥</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379"> enable</span><span style="color:#98C379;--shiki-dark:#98C379"> mysqld</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">## VÃ´ hiá»‡u hÃ³a dá»‹ch vá»¥</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379"> disable</span><span style="color:#98C379;--shiki-dark:#98C379"> mysqld</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">## Khá»Ÿi Ä‘á»™ng dá»‹ch vá»¥</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379"> start</span><span style="color:#98C379;--shiki-dark:#98C379"> mysqld</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">## Khá»Ÿi Ä‘á»™ng láº¡i dá»‹ch vá»¥</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379"> restart</span><span style="color:#98C379;--shiki-dark:#98C379"> mysqld</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">## Dá»«ng dá»‹ch vá»¥</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379"> stop</span><span style="color:#98C379;--shiki-dark:#98C379"> mysqld</span></span></code></pre>
</div><h3>Khá»Ÿi táº¡o máº­t kháº©u cho cÆ¡ sá»Ÿ dá»¯ liá»‡u</h3>
<p>Xem máº­t kháº©u táº¡m thá»i:</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">$</span><span style="color:#98C379;--shiki-dark:#98C379"> grep</span><span style="color:#98C379;--shiki-dark:#98C379"> "password"</span><span style="color:#98C379;--shiki-dark:#98C379"> /var/log/mysqld.log</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">2018-09-30T03:13:41.727736Z</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [Note] [MY-010454] [Server] A temporary password is generated </span><span style="color:#C678DD;--shiki-dark:#C678DD">for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> root@localhost: %:lt+srWu4k1</span></span></code></pre>
</div><p>Thá»±c hiá»‡n lá»‡nh sau:</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">mysql</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -uroot</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -p</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#D19A66;--shiki-dark:#D19A66">temporary_password</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><p>Nháº­p máº­t kháº©u táº¡m thá»i Ä‘á»ƒ truy cáº­p vÃ o mysql. Náº¿u báº¡n muá»‘n thay Ä‘á»•i máº­t kháº©u, thá»±c hiá»‡n lá»‡nh sau:</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">ALTER</span><span style="color:#98C379;--shiki-dark:#98C379"> USER</span><span style="color:#98C379;--shiki-dark:#98C379"> 'root'@'localhost'</span><span style="color:#98C379;--shiki-dark:#98C379"> IDENTIFIED</span><span style="color:#98C379;--shiki-dark:#98C379"> BY</span><span style="color:#98C379;--shiki-dark:#98C379"> 'your_password'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>LÆ°u Ã½: Máº­t kháº©u máº·c Ä‘á»‹nh cÃ³ Ä‘á»™ máº¡nh trung bÃ¬nh, bao gá»“m chá»¯ hoa, chá»¯ thÆ°á»ng, chá»¯ sá»‘ vÃ  kÃ½ tá»± Ä‘áº·c biá»‡t. Báº¡n chá»‰ cÃ³ thá»ƒ thay Ä‘á»•i cáº¥u hÃ¬nh Ä‘á»ƒ sá»­ dá»¥ng máº­t kháº©u Ä‘Æ¡n giáº£n hÆ¡n sau khi Ä‘Ã£ thay Ä‘á»•i thÃ nh cÃ´ng máº­t kháº©u.</p>
<h3>Cáº¥u hÃ¬nh truy cáº­p tá»« xa</h3>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> USER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> '</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">root</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">'@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> IDENTIFIED </span><span style="color:#C678DD;--shiki-dark:#C678DD">BY</span><span style="color:#98C379;--shiki-dark:#98C379"> 'your_password'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">GRANT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ALL </span><span style="color:#C678DD;--shiki-dark:#C678DD">ON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> *.* </span><span style="color:#C678DD;--shiki-dark:#C678DD">TO</span><span style="color:#98C379;--shiki-dark:#98C379"> 'root'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD"> USER</span><span style="color:#98C379;--shiki-dark:#98C379"> 'root'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> IDENTIFIED </span><span style="color:#C678DD;--shiki-dark:#C678DD">WITH</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> mysql_native_password </span><span style="color:#C678DD;--shiki-dark:#C678DD">BY</span><span style="color:#98C379;--shiki-dark:#98C379"> 'your_password'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">FLUSH PRIVILEGES;</span></span></code></pre>
</div><h3>Bá» qua xÃ¡c thá»±c Ä‘Äƒng nháº­p</h3>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">vim</span><span style="color:#98C379;--shiki-dark:#98C379"> /etc/my.cnf</span></span></code></pre>
</div><p>ThÃªm dÃ²ng <code>skip-grant-tables</code> dÆ°á»›i pháº§n <code>[mysqld]</code>.</p>
<p>Chá»©c nÄƒng nÃ y cho phÃ©p bá» qua xÃ¡c thá»±c Ä‘Äƒng nháº­p, nghÄ©a lÃ  báº¡n cÃ³ thá»ƒ Ä‘Äƒng nháº­p vÃ o root vá»›i báº¥t ká»³ máº­t kháº©u nÃ o.</p>
<p>Thá»±c hiá»‡n <code>systemctl restart mysqld</code> Ä‘á»ƒ khá»Ÿi Ä‘á»™ng láº¡i mysql.</p>
<h3>Káº¿t ná»‘i tá»« mÃ¡y khÃ¡ch</h3>
<p>CÃº phÃ¡p: <code>mysql -h&lt;host&gt; -P&lt;port&gt; -u&lt;username&gt; -p&lt;password&gt;</code></p>
<p>Náº¿u khÃ´ng chá»‰ Ä‘á»‹nh máº­t kháº©u má»™t cÃ¡ch rÃµ rÃ ng, báº¡n sáº½ Ä‘Æ°á»£c yÃªu cáº§u nháº­p máº­t kháº©u trÆ°á»›c khi truy cáº­p.</p>
<p>ã€VÃ­ dá»¥ã€‘Káº¿t ná»‘i Ä‘áº¿n Mysql cá»¥c bá»™</p>
<div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">$</span><span style="color:#98C379;--shiki-dark:#98C379"> mysql</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -h</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 127.0.0.1</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -P</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 3306</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -u</span><span style="color:#98C379;--shiki-dark:#98C379"> root</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -p</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">Enter</span><span style="color:#98C379;--shiki-dark:#98C379"> password:</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">Welcome</span><span style="color:#98C379;--shiki-dark:#98C379"> to</span><span style="color:#98C379;--shiki-dark:#98C379"> the</span><span style="color:#98C379;--shiki-dark:#98C379"> MySQL</span><span style="color:#98C379;--shiki-dark:#98C379"> monitor.</span><span style="color:#98C379;--shiki-dark:#98C379">  Commands</span><span style="color:#98C379;--shiki-dark:#98C379"> end</span><span style="color:#98C379;--shiki-dark:#98C379"> with</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ; </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">or</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> \g</span><span style="color:#98C379;--shiki-dark:#98C379">.</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">Your</span><span style="color:#98C379;--shiki-dark:#98C379"> MySQL</span><span style="color:#98C379;--shiki-dark:#98C379"> connection</span><span style="color:#98C379;--shiki-dark:#98C379"> id</span><span style="color:#98C379;--shiki-dark:#98C379"> is</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 13501</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">Server</span><span style="color:#98C379;--shiki-dark:#98C379"> version:</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 8.0.19</span><span style="color:#98C379;--shiki-dark:#98C379"> MySQL</span><span style="color:#98C379;--shiki-dark:#98C379"> Community</span><span style="color:#98C379;--shiki-dark:#98C379"> Server</span><span style="color:#98C379;--shiki-dark:#98C379"> -</span><span style="color:#98C379;--shiki-dark:#98C379"> GPL</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">Copyright</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">Oracle</span><span style="color:#98C379;--shiki-dark:#98C379"> is</span><span style="color:#98C379;--shiki-dark:#98C379"> a</span><span style="color:#98C379;--shiki-dark:#98C379"> registered</span><span style="color:#98C379;--shiki-dark:#98C379"> trademark</span><span style="color:#98C379;--shiki-dark:#98C379"> of</span><span style="color:#98C379;--shiki-dark:#98C379"> Oracle</span><span style="color:#98C379;--shiki-dark:#98C379"> Corporation</span><span style="color:#98C379;--shiki-dark:#98C379"> and/or</span><span style="color:#98C379;--shiki-dark:#98C379"> its</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">affiliates.</span><span style="color:#98C379;--shiki-dark:#98C379"> Other</span><span style="color:#98C379;--shiki-dark:#98C379"> names</span><span style="color:#98C379;--shiki-dark:#98C379"> may</span><span style="color:#98C379;--shiki-dark:#98C379"> be</span><span style="color:#98C379;--shiki-dark:#98C379"> trademarks</span><span style="color:#98C379;--shiki-dark:#98C379"> of</span><span style="color:#98C379;--shiki-dark:#98C379"> their</span><span style="color:#98C379;--shiki-dark:#98C379"> respective</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">owners.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">Type</span><span style="color:#98C379;--shiki-dark:#98C379"> 'help;'</span><span style="color:#98C379;--shiki-dark:#98C379"> or</span><span style="color:#98C379;--shiki-dark:#98C379"> '\h'</span><span style="color:#98C379;--shiki-dark:#98C379"> for</span><span style="color:#98C379;--shiki-dark:#98C379"> help.</span><span style="color:#98C379;--shiki-dark:#98C379"> Type</span><span style="color:#98C379;--shiki-dark:#98C379"> '\c'</span><span style="color:#98C379;--shiki-dark:#98C379"> to</span><span style="color:#98C379;--shiki-dark:#98C379"> clear</span><span style="color:#98C379;--shiki-dark:#98C379"> the</span><span style="color:#98C379;--shiki-dark:#98C379"> current</span><span style="color:#98C379;--shiki-dark:#98C379"> input</span><span style="color:#98C379;--shiki-dark:#98C379"> statement.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">mysql</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>Xem káº¿t ná»‘i</h3>
<p>Sau khi káº¿t ná»‘i thÃ nh cÃ´ng, náº¿u báº¡n khÃ´ng cÃ³ hoáº¡t Ä‘á»™ng tiáº¿p theo, káº¿t ná»‘i sáº½ á»Ÿ tráº¡ng thÃ¡i ráº£nh rá»—i vÃ  báº¡n cÃ³ thá»ƒ tháº¥y nÃ³ trong lá»‡nh <code>show processlist</code>. Náº¿u mÃ¡y khÃ¡ch khÃ´ng cÃ³ hoáº¡t Ä‘á»™ng trong má»™t khoáº£ng thá»i gian dÃ i, trÃ¬nh káº¿t ná»‘i sáº½ tá»± Ä‘á»™ng Ä‘Ã³ng nÃ³. Thá»i gian nÃ y Ä‘Æ°á»£c Ä‘iá»u chá»‰nh bá»Ÿi tham sá»‘ <code>wait_timeout</code>, giÃ¡ trá»‹ máº·c Ä‘á»‹nh lÃ  8 giá».</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200714115031.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h3>Táº¡o ngÆ°á»i dÃ¹ng</h3>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> USER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> '</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">username</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">'@</span><span style="color:#98C379;--shiki-dark:#98C379">'host'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> IDENTIFIED </span><span style="color:#C678DD;--shiki-dark:#C678DD">BY</span><span style="color:#98C379;--shiki-dark:#98C379"> 'password'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>Giáº£i thÃ­ch:</p>
<ul>
<li>username: TÃªn ngÆ°á»i dÃ¹ng báº¡n muá»‘n táº¡o</li>
<li>host: XÃ¡c Ä‘á»‹nh ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ Ä‘Äƒng nháº­p tá»« mÃ¡y chá»§ nÃ o. Náº¿u lÃ  ngÆ°á»i dÃ¹ng cá»¥c bá»™, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng localhost. Náº¿u báº¡n muá»‘n ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ Ä‘Äƒng nháº­p tá»« báº¥t ká»³ mÃ¡y chá»§ tá»« xa nÃ o, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng kÃ½ tá»± Ä‘áº¡i diá»‡n <code>%</code>.</li>
<li>password: Máº­t kháº©u Ä‘Äƒng nháº­p cá»§a ngÆ°á»i dÃ¹ng. Máº­t kháº©u cÃ³ thá»ƒ Ä‘á»ƒ trá»‘ng. Náº¿u Ä‘á»ƒ trá»‘ng, ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ Ä‘Äƒng nháº­p vÃ o mÃ¡y chá»§ mÃ  khÃ´ng cáº§n máº­t kháº©u.</li>
</ul>
<p>VÃ­ dá»¥:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> USER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> '</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">dog</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">'@</span><span style="color:#98C379;--shiki-dark:#98C379">'localhost'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> IDENTIFIED </span><span style="color:#C678DD;--shiki-dark:#C678DD">BY</span><span style="color:#98C379;--shiki-dark:#98C379"> '123456'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> USER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> '</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">pig</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">'@</span><span style="color:#98C379;--shiki-dark:#98C379">'192.168.1.101_'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> IDENDIFIED </span><span style="color:#C678DD;--shiki-dark:#C678DD">BY</span><span style="color:#98C379;--shiki-dark:#98C379"> '123456'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> USER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> '</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">pig</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">'@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> IDENTIFIED </span><span style="color:#C678DD;--shiki-dark:#C678DD">BY</span><span style="color:#98C379;--shiki-dark:#98C379"> '123456'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> USER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> '</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">pig</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">'@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> IDENTIFIED </span><span style="color:#C678DD;--shiki-dark:#C678DD">BY</span><span style="color:#98C379;--shiki-dark:#98C379"> ''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> USER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> '</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">pig</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">'@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><blockquote>
<p>LÆ°u Ã½: Trong Mysql 8, xÃ¡c thá»±c máº·c Ä‘á»‹nh khÃ´ng cÃ²n lÃ  <code>password</code>. VÃ¬ váº­y, khi táº¡o ngÆ°á»i dÃ¹ng, <code>create user 'username'@'%' identified by 'password';</code> khÃ´ng thá»ƒ káº¿t ná»‘i tá»« mÃ¡y khÃ¡ch.</p>
<p>VÃ¬ váº­y, báº¡n cáº§n thÃªm <code>IDENTIFIED WITH mysql_native_password</code>, vÃ­ dá»¥: <code>CREATE USER 'slave'@'%' IDENTIFIED WITH mysql_native_password BY '123456';</code></p>
</blockquote>
<h3>Xem ngÆ°á»i dÃ¹ng</h3>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Xem táº¥t cáº£ ngÆ°á»i dÃ¹ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SELECT DISTINCT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> CONCAT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'User: '''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, user, </span><span style="color:#98C379;--shiki-dark:#98C379">'''@'''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, host, </span><span style="color:#98C379;--shiki-dark:#98C379">''';'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">AS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> query</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">FROM</span><span style="color:#D19A66;--shiki-dark:#D19A66"> mysql</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#D19A66;--shiki-dark:#D19A66">user</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><h3>Cáº¥p quyá»n</h3>
<p>CÃº phÃ¡p:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">GRANT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> privileges </span><span style="color:#C678DD;--shiki-dark:#C678DD">ON</span><span style="color:#D19A66;--shiki-dark:#D19A66"> databasename</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#D19A66;--shiki-dark:#D19A66">tablename</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TO</span><span style="color:#98C379;--shiki-dark:#98C379"> 'username'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'host'</span></span></code></pre>
</div><p>Giáº£i thÃ­ch:</p>
<ul>
<li>privileges: CÃ¡c quyá»n thá»±c hiá»‡n cá»§a ngÆ°á»i dÃ¹ng, nhÆ° <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code>, vv. Náº¿u muá»‘n cáº¥p táº¥t cáº£ quyá»n, sá»­ dá»¥ng <code>ALL</code>.</li>
<li>databasename: TÃªn cÆ¡ sá»Ÿ dá»¯ liá»‡u.</li>
<li>tablename: TÃªn báº£ng. Náº¿u muá»‘n cáº¥p quyá»n cho ngÆ°á»i dÃ¹ng trÃªn táº¥t cáº£ cÆ¡ sá»Ÿ dá»¯ liá»‡u vÃ  báº£ng, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng <code>*.*</code>.</li>
</ul>
<p>VÃ­ dá»¥:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">GRANT</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">INSERT</span><span style="color:#C678DD;--shiki-dark:#C678DD"> ON</span><span style="color:#D19A66;--shiki-dark:#D19A66"> test</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#D19A66;--shiki-dark:#D19A66">user</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TO</span><span style="color:#98C379;--shiki-dark:#98C379"> 'pig'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">GRANT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ALL </span><span style="color:#C678DD;--shiki-dark:#C678DD">ON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> *.* </span><span style="color:#C678DD;--shiki-dark:#C678DD">TO</span><span style="color:#98C379;--shiki-dark:#98C379"> 'pig'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">GRANT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ALL </span><span style="color:#C678DD;--shiki-dark:#C678DD">ON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> maindataplus.* </span><span style="color:#C678DD;--shiki-dark:#C678DD">TO</span><span style="color:#98C379;--shiki-dark:#98C379"> 'pig'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>LÆ°u Ã½:</p>
<p>NgÆ°á»i dÃ¹ng Ä‘Æ°á»£c cáº¥p quyá»n báº±ng cÃ¡c lá»‡nh trÃªn khÃ´ng thá»ƒ cáº¥p quyá»n cho ngÆ°á»i dÃ¹ng khÃ¡c. Náº¿u báº¡n muá»‘n cho phÃ©p ngÆ°á»i dÃ¹ng cáº¥p quyá»n, sá»­ dá»¥ng lá»‡nh sau:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Cáº¥u hÃ¬nh quyá»n cá»¥ thá»ƒ cho ngÆ°á»i dÃ¹ng Ä‘Ã£ chá»‰ Ä‘á»‹nh</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">GRANT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> privileges </span><span style="color:#C678DD;--shiki-dark:#C678DD">ON</span><span style="color:#D19A66;--shiki-dark:#D19A66"> databasename</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#D19A66;--shiki-dark:#D19A66">tablename</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TO</span><span style="color:#98C379;--shiki-dark:#98C379"> 'username'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'host'</span><span style="color:#C678DD;--shiki-dark:#C678DD"> WITH</span><span style="color:#C678DD;--shiki-dark:#C678DD"> GRANT</span><span style="color:#C678DD;--shiki-dark:#C678DD"> OPTION</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- GÃ¡n táº¥t cáº£ quyá»n cho ngÆ°á»i dÃ¹ng root</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">GRANT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ALL </span><span style="color:#C678DD;--shiki-dark:#C678DD">ON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> *.* </span><span style="color:#C678DD;--shiki-dark:#C678DD">TO</span><span style="color:#98C379;--shiki-dark:#98C379"> 'root'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> IDENTIFIED </span><span style="color:#C678DD;--shiki-dark:#C678DD">BY</span><span style="color:#98C379;--shiki-dark:#98C379"> 'password'</span><span style="color:#C678DD;--shiki-dark:#C678DD"> WITH</span><span style="color:#C678DD;--shiki-dark:#C678DD"> GRANT</span><span style="color:#C678DD;--shiki-dark:#C678DD"> OPTION</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><h3>Thu há»“i quyá»n</h3>
<p>CÃº phÃ¡p:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">REVOKE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> privilege </span><span style="color:#C678DD;--shiki-dark:#C678DD">ON</span><span style="color:#D19A66;--shiki-dark:#D19A66"> databasename</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#D19A66;--shiki-dark:#D19A66">tablename</span><span style="color:#C678DD;--shiki-dark:#C678DD"> FROM</span><span style="color:#98C379;--shiki-dark:#98C379"> 'username'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'host'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>Giáº£i thÃ­ch:</p>
<p>privilege, databasename, tablename: TÆ°Æ¡ng tá»± nhÆ° pháº§n cáº¥p quyá»n.</p>
<p>VÃ­ dá»¥:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">REVOKE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SELECT</span><span style="color:#C678DD;--shiki-dark:#C678DD"> ON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> *.* </span><span style="color:#C678DD;--shiki-dark:#C678DD">FROM</span><span style="color:#98C379;--shiki-dark:#98C379"> 'pig'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>LÆ°u Ã½:</p>
<p>Náº¿u báº¡n Ä‘Ã£ cáº¥p quyá»n cho ngÆ°á»i dÃ¹ng <code>'pig'@'%'</code> nhÆ° sau (hoáº·c tÆ°Æ¡ng tá»±): <code>GRANT SELECT ON test.user TO 'pig'@'%'</code>, thÃ¬ viá»‡c sá»­ dá»¥ng lá»‡nh <code>REVOKE SELECT ON *.* FROM 'pig'@'%';</code> sáº½ khÃ´ng thu há»“i quyá»n <code>SELECT</code> cá»§a ngÆ°á»i dÃ¹ng trÃªn báº£ng <code>user</code> trong cÆ¡ sá»Ÿ dá»¯ liá»‡u <code>test</code>. NgÆ°á»£c láº¡i, náº¿u quyá»n Ä‘Æ°á»£c cáº¥p báº±ng <code>GRANT SELECT ON *.* TO 'pig'@'%';</code>, thÃ¬ lá»‡nh <code>REVOKE SELECT ON test.user FROM 'pig'@'%';</code> cÅ©ng khÃ´ng thu há»“i quyá»n <code>SELECT</code> cá»§a ngÆ°á»i dÃ¹ng trÃªn báº£ng <code>user</code> trong cÆ¡ sá»Ÿ dá»¯ liá»‡u <code>test</code>.</p>
<p>Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng lá»‡nh <code>SHOW GRANTS FOR 'pig'@'%';</code> Ä‘á»ƒ xem thÃ´ng tin chi tiáº¿t.</p>
<h3>Xem quyá»n</h3>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Xem quyá»n cá»§a ngÆ°á»i dÃ¹ng</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">SHOW GRANTS </span><span style="color:#C678DD;--shiki-dark:#C678DD">FOR</span><span style="color:#98C379;--shiki-dark:#98C379"> 'root'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><h3>Thay Ä‘á»•i máº­t kháº©u ngÆ°á»i dÃ¹ng</h3>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SET</span><span style="color:#C678DD;--shiki-dark:#C678DD"> PASSWORD</span><span style="color:#C678DD;--shiki-dark:#C678DD"> FOR</span><span style="color:#98C379;--shiki-dark:#98C379"> 'username'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'host'</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> PASSWORD</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'newpassword'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>Náº¿u Ä‘ang Ä‘Äƒng nháº­p vá»›i ngÆ°á»i dÃ¹ng hiá»‡n táº¡i, sá»­ dá»¥ng:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SET</span><span style="color:#C678DD;--shiki-dark:#C678DD"> PASSWORD</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> PASSWORD</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"newpassword"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><p>VÃ­ dá»¥:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SET</span><span style="color:#C678DD;--shiki-dark:#C678DD"> PASSWORD</span><span style="color:#C678DD;--shiki-dark:#C678DD"> FOR</span><span style="color:#98C379;--shiki-dark:#98C379"> 'pig'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> PASSWORD</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"123456"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span></code></pre>
</div><h3>Sao lÆ°u vÃ  khÃ´i phá»¥c</h3>
<p>Äá»ƒ sao lÆ°u dá»¯ liá»‡u MySQL, chÃºng ta sá»­ dá»¥ng lá»‡nh mysqldump.</p>
<p>Mysqldump sáº½ sao lÆ°u dá»¯ liá»‡u trong cÆ¡ sá»Ÿ dá»¯ liá»‡u thÃ nh má»™t tá»‡p vÄƒn báº£n, cáº¥u trÃºc báº£ng vÃ  dá»¯ liá»‡u cá»§a báº£ng sáº½ Ä‘Æ°á»£c lÆ°u trá»¯ trong tá»‡p vÄƒn báº£n Ä‘Æ°á»£c táº¡o ra.</p>
<p>Sao lÆ°u:</p>
<h4>Sao lÆ°u má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u</h4>
<p>CÃº phÃ¡p:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">mysqldump -h </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">host</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> -P</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">port</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> -u</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">username</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> -p</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#C678DD;--shiki-dark:#C678DD">database</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> [&lt;table1&gt; &lt;table2&gt; ...]</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> backup</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#D19A66;--shiki-dark:#D19A66">sql</span></span></code></pre>
</div><ul>
<li><strong><code>host</code></strong> - MÃ¡y chá»§ Mysql</li>
<li><strong><code>port</code></strong> - Cá»•ng cá»§a mÃ¡y chá»§ Mysql</li>
<li><strong><code>username</code></strong> - TÃªn ngÆ°á»i dÃ¹ng cÆ¡ sá»Ÿ dá»¯ liá»‡u</li>
<li><strong><code>dbname</code></strong> - TÃªn cÆ¡ sá»Ÿ dá»¯ liá»‡u</li>
<li>Tham sá»‘ table1 vÃ  table2 Ä‘áº¡i diá»‡n cho tÃªn cÃ¡c báº£ng cáº§n sao lÆ°u, náº¿u Ä‘á»ƒ trá»‘ng thÃ¬ sao lÆ°u toÃ n bá»™ cÆ¡ sá»Ÿ dá»¯ liá»‡u;</li>
<li>Tham sá»‘ BackupName.sql Ä‘áº¡i diá»‡n cho tÃªn tá»‡p sao lÆ°u Ä‘Æ°á»£c táº¡o ra, báº¡n cÃ³ thá»ƒ thÃªm Ä‘Æ°á»ng dáº«n tuyá»‡t Ä‘á»‘i trÆ°á»›c tÃªn tá»‡p. ThÃ´ng thÆ°á»ng, cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘Æ°á»£c sao lÆ°u thÃ nh má»™t tá»‡p cÃ³ pháº§n má»Ÿ rá»™ng lÃ  sql.</li>
</ul>
<h4>Sao lÆ°u nhiá»u cÆ¡ sá»Ÿ dá»¯ liá»‡u</h4>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">mysqldump -u </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">username</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> -p </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">--databases &lt;database1&gt; &lt;database2&gt; ... &gt; backup.sql</span></span></code></pre>
</div><h4>Sao lÆ°u táº¥t cáº£ cÆ¡ sá»Ÿ dá»¯ liá»‡u</h4>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">mysqldump -u </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">username</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> -p </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">--all-databases &gt; backup.sql</span></span></code></pre>
</div><h4>KhÃ´i phá»¥c má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u</h4>
<p>Äá»ƒ khÃ´i phá»¥c dá»¯ liá»‡u MySQL, chÃºng ta sá»­ dá»¥ng lá»‡nh mysql.</p>
<p>CÃº phÃ¡p:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">mysql -h </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">host</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> -P</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">port</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> -u</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">username</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> -p</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#C678DD;--shiki-dark:#C678DD">database</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &lt;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> backup</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#D19A66;--shiki-dark:#D19A66">sql</span></span></code></pre>
</div><h4>KhÃ´i phá»¥c táº¥t cáº£ cÆ¡ sá»Ÿ dá»¯ liá»‡u</h4>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">mysql -u</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">username</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> -p </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">--all-databases &lt; backup.sql</span></span></code></pre>
</div><h3>Gá»¡ cÃ i Ä‘áº·t</h3>
<p>(1) Xem MySQL Ä‘Ã£ Ä‘Æ°á»£c cÃ i Ä‘áº·t</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">$</span><span style="color:#98C379;--shiki-dark:#98C379"> rpm</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -qa</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> | </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">grep</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -i</span><span style="color:#98C379;--shiki-dark:#98C379"> mysql</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">perl-DBD-MySQL-4.023-6.el7.x86_64</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">mysql80-community-release-el7-1.noarch</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">mysql-community-common-8.0.12-1.el7.x86_64</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">mysql-community-client-8.0.12-1.el7.x86_64</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">mysql-community-libs-compat-8.0.12-1.el7.x86_64</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">mysql-community-libs-8.0.12-1.el7.x86_64</span></span></code></pre>
</div><p>(2) Gá»¡ cÃ i Ä‘áº·t MySQL</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">yum</span><span style="color:#98C379;--shiki-dark:#98C379"> remove</span><span style="color:#98C379;--shiki-dark:#98C379"> mysql-community-server.x86_64</span></span></code></pre>
</div><h3>Triá»ƒn khai Master-Slave</h3>
<p>Giáº£ sá»­ báº¡n cáº§n cáº¥u hÃ¬nh má»™t mÃ´i trÆ°á»ng mÃ¡y chá»§ Master-Slave cho MySQL:</p>
<ul>
<li>Node Master: 192.168.8.10</li>
<li>Node Slave: 192.168.8.11</li>
</ul>
<h4>CÃ¡c bÆ°á»›c trÃªn Node Master</h4>
<p>(1) Sá»­a Ä‘á»•i cáº¥u hÃ¬nh vÃ  khá»Ÿi Ä‘á»™ng láº¡i</p>
<p>Cháº¡y lá»‡nh <code>vi /etc/my.cnf</code> vÃ  thÃªm cáº¥u hÃ¬nh sau:</p>
<div class="language-ini" data-ext="ini" data-title="ini"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">[mysqld]</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">server-id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">1</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">log_bin</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">/var/lib/mysql/binlog</span></span></code></pre>
</div><ul>
<li><code>server-id</code> - Sá»‘ ID cá»§a mÃ¡y chá»§. Trong kiáº¿n trÃºc Master-Slave, má»—i mÃ¡y pháº£i cÃ³ má»™t ID duy nháº¥t.</li>
<li><code>log_bin</code> - ÄÆ°á»ng dáº«n vÃ  tÃªn tá»‡p nháº­t kÃ½ Ä‘á»“ng bá»™, hÃ£y Ä‘áº£m báº£o ráº±ng thÆ° má»¥c nÃ y cÃ³ quyá»n ghi cho MySQL;</li>
</ul>
<p>Sau khi chá»‰nh sá»­a, khá»Ÿi Ä‘á»™ng láº¡i MySQL Ä‘á»ƒ Ã¡p dá»¥ng cáº¥u hÃ¬nh má»›i:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">systemctl </span><span style="color:#C678DD;--shiki-dark:#C678DD">restart</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> mysql</span></span></code></pre>
</div><p>(2) Táº¡o ngÆ°á»i dÃ¹ng cho Ä‘á»“ng bá»™ hoÃ¡</p>
<p>Truy cáº­p vÃ o báº£ng Ä‘iá»u khiá»ƒn MySQL:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>$ mysql -u root -p</span></span>
<span class="line"><span>Password:</span></span></code></pre>
</div><p>Thá»±c hiá»‡n cÃ¡c cÃ¢u lá»‡nh SQL sau:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- a. Táº¡o ngÆ°á»i dÃ¹ng slave</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> USER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> '</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">slave</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">'@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> IDENTIFIED </span><span style="color:#C678DD;--shiki-dark:#C678DD">WITH</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> mysql_native_password </span><span style="color:#C678DD;--shiki-dark:#C678DD">BY</span><span style="color:#98C379;--shiki-dark:#98C379"> 'password'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Cáº¥p quyá»n REPLICATION SLAVE cho slave</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">GRANT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> REPLICATION SLAVE </span><span style="color:#C678DD;--shiki-dark:#C678DD">ON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> *.* </span><span style="color:#C678DD;--shiki-dark:#C678DD">TO</span><span style="color:#98C379;--shiki-dark:#98C379"> 'slave'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- b. Hoáº·c, táº¡o ngÆ°á»i dÃ¹ng slave vÃ  cho phÃ©p ngÆ°á»i dÃ¹ng Ä‘Äƒng nháº­p tá»« báº¥t ká»³ mÃ¡y chá»§ nÃ o</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Náº¿u cÃ³ nhiá»u slave vÃ  báº¡n muá»‘n táº¥t cáº£ cÃ¡c slave sá»­ dá»¥ng cÃ¹ng má»™t tÃªn ngÆ°á»i dÃ¹ng vÃ  máº­t kháº©u, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡ch nÃ y</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> USER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> '</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">slave</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">'@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> IDENTIFIED </span><span style="color:#C678DD;--shiki-dark:#C678DD">WITH</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> mysql_native_password </span><span style="color:#C678DD;--shiki-dark:#C678DD">BY</span><span style="color:#98C379;--shiki-dark:#98C379"> 'password'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">GRANT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> REPLICATION SLAVE </span><span style="color:#C678DD;--shiki-dark:#C678DD">ON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> *.* </span><span style="color:#C678DD;--shiki-dark:#C678DD">TO</span><span style="color:#98C379;--shiki-dark:#98C379"> 'slave'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- LÃ m má»›i thÃ´ng tin báº£ng phÃ¢n quyá»n</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">FLUSH PRIVILEGES;</span></span></code></pre>
</div><blockquote>
<p>LÆ°u Ã½: Trong MySQL 8, phÆ°Æ¡ng thá»©c xÃ¡c thá»±c máº·c Ä‘á»‹nh khÃ´ng cÃ²n lÃ  <code>password</code>. VÃ¬ váº­y, khi táº¡o ngÆ°á»i dÃ¹ng, <code>create user 'username'@'%' identified by 'password';</code> khÃ´ng thá»ƒ káº¿t ná»‘i tá»« mÃ¡y khÃ¡ch. VÃ¬ váº­y, báº¡n cáº§n thÃªm <code>IDENTIFIED WITH mysql_native_password BY 'password'</code> khi táº¡o ngÆ°á»i dÃ¹ng.</p>
</blockquote>
<p>SQL quáº£n lÃ½ ngÆ°á»i dÃ¹ng bá»• sung:</p>
<div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Xem táº¥t cáº£ ngÆ°á»i dÃ¹ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SELECT DISTINCT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> CONCAT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'User: '''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, user, </span><span style="color:#98C379;--shiki-dark:#98C379">'''@'''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, host, </span><span style="color:#98C379;--shiki-dark:#98C379">''';'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">AS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> query</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">FROM</span><span style="color:#D19A66;--shiki-dark:#D19A66"> mysql</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#D19A66;--shiki-dark:#D19A66">user</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Xem quyá»n cá»§a ngÆ°á»i dÃ¹ng</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">SHOW GRANTS </span><span style="color:#C678DD;--shiki-dark:#C678DD">FOR</span><span style="color:#98C379;--shiki-dark:#98C379"> 'root'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Táº¡o ngÆ°á»i dÃ¹ng</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- a. Táº¡o ngÆ°á»i dÃ¹ng slave vÃ  chá»‰ cho phÃ©p ngÆ°á»i dÃ¹ng Ä‘Äƒng nháº­p tá»« mÃ¡y chá»§ 192.168.8.11</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> USER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> '</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">slave</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">'@</span><span style="color:#98C379;--shiki-dark:#98C379">'192.168.8.11'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> IDENTIFIED </span><span style="color:#C678DD;--shiki-dark:#C678DD">WITH</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> mysql_native_password </span><span style="color:#C678DD;--shiki-dark:#C678DD">BY</span><span style="color:#98C379;--shiki-dark:#98C379"> 'password'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Cáº¥p quyá»n REPLICATION SLAVE cho slave</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">GRANT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> REPLICATION SLAVE </span><span style="color:#C678DD;--shiki-dark:#C678DD">ON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> *.* </span><span style="color:#C678DD;--shiki-dark:#C678DD">TO</span><span style="color:#98C379;--shiki-dark:#98C379"> 'slave'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'192.168.8.11'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- XÃ³a ngÆ°á»i dÃ¹ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">DROP</span><span style="color:#C678DD;--shiki-dark:#C678DD"> USER</span><span style="color:#98C379;--shiki-dark:#98C379"> 'slave'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'192.168.8.11'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>(3) ThÃªm khÃ³a Ä‘á»c</p>
<p>Äá»ƒ Ä‘áº£m báº£o dá»¯ liá»‡u trÃªn mÃ¡y chá»§ chÃ­nh vÃ  mÃ¡y chá»§ phá»¥ giá»¯ nguyÃªn, chÃºng ta sáº½ thÃªm khÃ³a Ä‘á»c cho MySQL, biáº¿n nÃ³ thÃ nh chá»‰ cÃ³ thá»ƒ Ä‘á»c.</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> FLUSH TABLES </span><span style="color:#C678DD;--shiki-dark:#C678DD">WITH</span><span style="color:#C678DD;--shiki-dark:#C678DD"> READ</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> LOCK;</span></span></code></pre>
</div><p>(4) Xem tráº¡ng thÃ¡i cá»§a mÃ¡y chá»§ chÃ­nh</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> show </span><span style="color:#C678DD;--shiki-dark:#C678DD">master</span><span style="color:#C678DD;--shiki-dark:#C678DD"> status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">+</span></span></code></pre>
</div>]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200714115031.png" type="image/png"/>
    </item>
    <item>
      <title>MySQL Optimization</title>
      <link>https://vanhung4499.github.io/database/mysql/optimization.html</link>
      <guid>https://vanhung4499.github.io/database/mysql/optimization.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MySQL Optimization</source>
      <description>MySQL Optimization Slow Query (Truy váº¥n cháº­m) Nháº­t kÃ½ truy váº¥n cháº­m cÃ³ thá»ƒ giÃºp chÃºng ta tÃ¬m ra cÃ¡c cÃ¢u lá»‡nh SQL thá»±c thi cháº­m. Báº¡n cÃ³ thá»ƒ kiá»ƒm tra xem nháº­t kÃ½ truy váº¥n cháº­m cÃ³ ...</description>
      <category>mysql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Slow Query (Truy váº¥n cháº­m)</h2>
<p>Nháº­t kÃ½ truy váº¥n cháº­m cÃ³ thá»ƒ giÃºp chÃºng ta tÃ¬m ra cÃ¡c cÃ¢u lá»‡nh SQL thá»±c thi cháº­m.</p>
<p>Báº¡n cÃ³ thá»ƒ kiá»ƒm tra xem nháº­t kÃ½ truy váº¥n cháº­m cÃ³ Ä‘Æ°á»£c báº­t hay khÃ´ng báº±ng cÃ¡ch sá»­ dá»¥ng lá»‡nh sau:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> show variables </span><span style="color:#C678DD;--shiki-dark:#C678DD">like</span><span style="color:#98C379;--shiki-dark:#98C379"> '%slow_query_log%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">+</span></span></code></pre>
</div>]]></content:encoded>
    </item>
    <item>
      <title>MySQL Overview</title>
      <link>https://vanhung4499.github.io/database/mysql/overview.html</link>
      <guid>https://vanhung4499.github.io/database/mysql/overview.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MySQL Overview</source>
      <description>MySQL Overview Contents</description>
      <category>mysql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Contents</h2>
]]></content:encoded>
    </item>
    <item>
      <title>MySQL Replication</title>
      <link>https://vanhung4499.github.io/database/mysql/replication.html</link>
      <guid>https://vanhung4499.github.io/database/mysql/replication.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MySQL Replication</source>
      <description>MySQL Replication Replication Replication lÃ  má»™t phÆ°Æ¡ng phÃ¡p phá»• biáº¿n Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» cÃ³ sáºµn cao cá»§a há»‡ thá»‘ng. Ã tÆ°á»Ÿng cÆ¡ báº£n lÃ : khÃ´ng nÃªn Ä‘á»ƒ táº¥t cáº£ trá»©ng vÃ o má»™t giá». Váº¥n...</description>
      <category>mysql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Replication</h2>
<p>Replication lÃ  má»™t phÆ°Æ¡ng phÃ¡p phá»• biáº¿n Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» cÃ³ sáºµn cao cá»§a há»‡ thá»‘ng. Ã tÆ°á»Ÿng cÆ¡ báº£n lÃ : khÃ´ng nÃªn Ä‘á»ƒ táº¥t cáº£ trá»©ng vÃ o má»™t giá».</p>
<p>Váº¥n Ä‘á» cÆ¡ báº£n mÃ  replication giáº£i quyáº¿t lÃ  Ä‘á»“ng bá»™ hÃ³a dá»¯ liá»‡u cá»§a má»™t mÃ¡y chá»§ vá»›i cÃ¡c mÃ¡y chá»§ khÃ¡c. Dá»¯ liá»‡u tá»« má»™t mÃ¡y chá»§ chÃ­nh cÃ³ thá»ƒ Ä‘Æ°á»£c replication Ä‘áº¿n nhiá»u mÃ¡y chá»§ dá»± phÃ²ng, vÃ  cÃ¡c mÃ¡y chá»§ dá»± phÃ²ng cÃ³ thá»ƒ Ä‘Æ°á»£c cáº¥u hÃ¬nh thÃ nh má»™t mÃ¡y chá»§ chÃ­nh cho má»™t mÃ¡y chá»§ khÃ¡c. CÃ³ nhiá»u cÃ¡ch khÃ¡c nhau Ä‘á»ƒ káº¿t há»£p mÃ¡y chá»§ chÃ­nh vÃ  mÃ¡y chá»§ dá»± phÃ²ng.</p>
<p>MySQL há»— trá»£ hai phÆ°Æ¡ng phÃ¡p replication: replication dá»±a trÃªn hÃ ng vÃ  replication dá»±a trÃªn cÃ¢u lá»‡nh. Cáº£ hai phÆ°Æ¡ng phÃ¡p Ä‘á»u sá»­ dá»¥ng cÃ¡ch ghi láº¡i bin log trÃªn mÃ¡y chá»§ chÃ­nh vÃ  cháº¡y láº¡i log trÃªn mÃ¡y chá»§ dá»± phÃ²ng Ä‘á»ƒ thá»±c hiá»‡n replication dá»¯ liá»‡u báº¥t Ä‘á»“ng bá»™. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  quÃ¡ trÃ¬nh replication cÃ³ Ä‘á»™ trá»… vÃ  trong khoáº£ng thá»i gian nÃ y, dá»¯ liá»‡u giá»¯a mÃ¡y chá»§ chÃ­nh vÃ  mÃ¡y chá»§ phá»¥ cÃ³ thá»ƒ khÃ´ng Ä‘á»“ng nháº¥t.</p>
<h3>CÃ¡ch thá»©c hoáº¡t Ä‘á»™ng cá»§a replication</h3>
<p>Trong MySQL, quÃ¡ trÃ¬nh replication Ä‘Æ°á»£c chia thÃ nh ba bÆ°á»›c, má»—i bÆ°á»›c do má»™t luá»“ng hoÃ n thÃ nh:</p>
<ul>
<li><strong>Luá»“ng binlog dump</strong> - TrÃªn mÃ¡y chá»§ chÃ­nh cÃ³ má»™t luá»“ng Ä‘áº·c biá»‡t gá»i lÃ  luá»“ng binlog dump, chá»‹u trÃ¡ch nhiá»‡m ghi cÃ¡c thay Ä‘á»•i dá»¯ liá»‡u tá»« mÃ¡y chá»§ chÃ­nh vÃ o binlog.</li>
<li><strong>Luá»“ng I/O</strong> - TrÃªn mÃ¡y chá»§ dá»± phÃ²ng cÃ³ má»™t luá»“ng I/O, chá»‹u trÃ¡ch nhiá»‡m Ä‘á»c binlog tá»« mÃ¡y chá»§ chÃ­nh vÃ  ghi vÃ o log trung gian (relay log) cá»§a mÃ¡y chá»§ dá»± phÃ²ng.</li>
<li><strong>Luá»“ng SQL</strong> - TrÃªn mÃ¡y chá»§ dá»± phÃ²ng cÃ³ má»™t luá»“ng SQL, chá»‹u trÃ¡ch nhiá»‡m Ä‘á»c log trung gian (relay log) vÃ  thá»±c hiá»‡n láº¡i cÃ¡c cÃ¢u lá»‡nh SQL tá»« Ä‘Ã³.</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240624154231.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<p>Kiáº¿n â€‹â€‹trÃºc nÃ y giáº£i quyáº¿t váº¥n Ä‘á» giáº£i phÃ³ng dá»¯ liá»‡u vÃ  Ä‘á»“ng bá»™ hÃ³a dá»¯ liá»‡u báº¥t Ä‘á»“ng bá»™. Tuy nhiÃªn, kiáº¿n â€‹â€‹trÃºc nÃ y cÅ©ng giá»›i háº¡n quÃ¡ trÃ¬nh replication, Ä‘iá»ƒm quan trá»ng nháº¥t lÃ  cÃ¡c truy váº¥n Ä‘ang cháº¡y song song trÃªn mÃ¡y chá»§ chÃ­nh pháº£i Ä‘Æ°á»£c thá»±c hiá»‡n tuáº§n tá»± trÃªn mÃ¡y chá»§ dá»± phÃ²ng, vÃ¬ chá»‰ cÃ³ má»™t luá»“ng SQL Ä‘á»ƒ cháº¡y láº¡i cÃ¡c sá»± kiá»‡n trong relay log.</p>
<h3>Cáº¥u hÃ¬nh replication Master-Slave</h3>
<p>Giáº£ sá»­ báº¡n cáº§n cáº¥u hÃ¬nh má»™t cáº·p nÃºt MySQL Master-Slave vá»›i mÃ´i trÆ°á»ng sau Ä‘Ã¢y:</p>
<ul>
<li>NÃºt Master: 192.168.8.10</li>
<li>NÃºt Slave: 192.168.8.11</li>
</ul>
<h4>CÃ¡c bÆ°á»›c trÃªn nÃºt Master</h4>
<ol>
<li>
<p><strong>Sá»­a Ä‘á»•i cáº¥u hÃ¬nh vÃ  khá»Ÿi Ä‘á»™ng láº¡i</strong></p>
<p>Sá»­ dá»¥ng lá»‡nh <code>vi /etc/my.cnf</code>, thÃªm cÃ¡c cáº¥u hÃ¬nh sau:</p>
</li>
</ol>
<div class="language-ini" data-ext="ini" data-title="ini"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">[mysqld]</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">server-id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">1</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">log_bin</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">/var/lib/mysql/binlog</span></span></code></pre>
</div><ul>
<li><code>server-id</code> - ID duy nháº¥t cá»§a mÃ¡y chá»§ trong kiáº¿n â€‹â€‹trÃºc Master-Slave.</li>
<li><code>log_bin</code> - ÄÆ°á»ng dáº«n vÃ  tÃªn táº­p tin log Ä‘á»ƒ Ä‘á»“ng bá»™, Ä‘áº£m báº£o thÆ° má»¥c nÃ y cÃ³ quyá»n ghi cá»§a MySQL.</li>
</ul>
<p>Sau khi chá»‰nh sá»­a, khá»Ÿi Ä‘á»™ng láº¡i MySQL Ä‘á»ƒ cáº­p nháº­t cáº¥u hÃ¬nh:</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379"> restart</span><span style="color:#98C379;--shiki-dark:#98C379"> mysql</span></span></code></pre>
</div><ol start="2">
<li><strong>Táº¡o ngÆ°á»i dÃ¹ng Ä‘á»“ng bá»™</strong></li>
</ol>
<p>Truy cáº­p vÃ o MySQL console:</p>
<div class="language-sh" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">$</span><span style="color:#98C379;--shiki-dark:#98C379"> mysql</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -u</span><span style="color:#98C379;--shiki-dark:#98C379"> root</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -p</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">Password:</span></span></code></pre>
</div><p>Thá»±c thi cÃ¡c lá»‡nh SQL sau:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- a. Táº¡o ngÆ°á»i dÃ¹ng 'slave' cÃ³ thá»ƒ Ä‘Äƒng nháº­p tá»« báº¥t ká»³ Ä‘á»‹a chá»‰ IP nÃ o</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">   CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> USER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> '</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">slave</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">'@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> IDENTIFIED </span><span style="color:#C678DD;--shiki-dark:#C678DD">WITH</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> mysql_native_password </span><span style="color:#C678DD;--shiki-dark:#C678DD">BY</span><span style="color:#98C379;--shiki-dark:#98C379"> 'password'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">   GRANT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> REPLICATION SLAVE </span><span style="color:#C678DD;--shiki-dark:#C678DD">ON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> *.* </span><span style="color:#C678DD;--shiki-dark:#C678DD">TO</span><span style="color:#98C379;--shiki-dark:#98C379"> 'slave'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'%'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">   -- b. Hoáº·c, táº¡o ngÆ°á»i dÃ¹ng 'slave' cÃ³ thá»ƒ Ä‘Äƒng nháº­p tá»« má»™t Ä‘á»‹a chá»‰ IP cá»¥ thá»ƒ</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">   CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> USER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> '</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">slave</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">'@</span><span style="color:#98C379;--shiki-dark:#98C379">'192.168.8.11'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> IDENTIFIED </span><span style="color:#C678DD;--shiki-dark:#C678DD">WITH</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> mysql_native_password </span><span style="color:#C678DD;--shiki-dark:#C678DD">BY</span><span style="color:#98C379;--shiki-dark:#98C379"> 'password'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">   GRANT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> REPLICATION SLAVE </span><span style="color:#C678DD;--shiki-dark:#C678DD">ON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> *.* </span><span style="color:#C678DD;--shiki-dark:#C678DD">TO</span><span style="color:#98C379;--shiki-dark:#98C379"> 'slave'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#98C379;--shiki-dark:#98C379">'192.168.8.11'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">   -- LÃ m má»›i láº¡i cÃ¡c quyá»n</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">   FLUSH PRIVILEGES;</span></span></code></pre>
</div><p>Äá»ƒ Ä‘áº£m báº£o tÆ°Æ¡ng thÃ­ch vá»›i MySQL 8 trá»Ÿ lÃªn, sá»­ dá»¥ng <code>mysql_native_password</code> cho phÆ°Æ¡ng thá»©c xÃ¡c thá»±c.</p>
<ol start="3">
<li><strong>KhÃ³a Ä‘á»c</strong></li>
</ol>
<p>Äá»ƒ Ä‘á»“ng bá»™ dá»¯ liá»‡u giá»¯a Master vÃ  Slave, khÃ³a Ä‘á»c trÃªn Master:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">   mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> FLUSH TABLES </span><span style="color:#C678DD;--shiki-dark:#C678DD">WITH</span><span style="color:#C678DD;--shiki-dark:#C678DD"> READ</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> LOCK;</span></span></code></pre>
</div><ol start="4">
<li><strong>Xem tráº¡ng thÃ¡i cá»§a Master</strong></li>
</ol>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">   mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> SHOW </span><span style="color:#C678DD;--shiki-dark:#C678DD">MASTER</span><span style="color:#C678DD;--shiki-dark:#C678DD"> STATUS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">   +</span></span></code></pre>
</div>]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240624154231.png" type="image/png"/>
    </item>
    <item>
      <title>MySQL Transaction</title>
      <link>https://vanhung4499.github.io/database/mysql/transaction.html</link>
      <guid>https://vanhung4499.github.io/database/mysql/transaction.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">MySQL Transaction</source>
      <description>MySQL Transaction KhÃ´ng pháº£i táº¥t cáº£ cÃ¡c engine lÆ°u trá»¯ cá»§a MySQL Ä‘á»u há»— trá»£ giao dá»‹ch. CÃ¡c engine lÆ°u trá»¯ há»— trá»£ giao dá»‹ch bao gá»“m: InnoDB vÃ  NDB Cluster. CÃ¡c engine lÆ°u trá»¯ khÃ´...</description>
      <category>mysql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>KhÃ´ng pháº£i táº¥t cáº£ cÃ¡c engine lÆ°u trá»¯ cá»§a MySQL Ä‘á»u há»— trá»£ giao dá»‹ch. CÃ¡c engine lÆ°u trá»¯ há»— trá»£ giao dá»‹ch bao gá»“m:&nbsp;<code>InnoDB</code>&nbsp;vÃ &nbsp;<code>NDB Cluster</code>. CÃ¡c engine lÆ°u trá»¯ khÃ´ng há»— trá»£ giao dá»‹ch bao gá»“m:&nbsp;<code>MyISAM</code>.</p>
<p>NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ chá»n engine lÆ°u trá»¯ phÃ¹ há»£p dá»±a trÃªn viá»‡c cÃ³ cáº§n xá»­ lÃ½ giao dá»‹ch hay khÃ´ng (xá»­ lÃ½ giao dá»‹ch cÃ³ thá»ƒ Ä‘áº£m báº£o an toÃ n dá»¯ liá»‡u nhÆ°ng sáº½ tÄƒng chi phÃ­ há»‡ thá»‘ng).</p>
</blockquote>
<h2>Giá»›i thiá»‡u vá» giao dá»‹ch</h2>
<blockquote>
<p>Giao dá»‹ch Ä‘Æ¡n giáº£n lÃ :&nbsp;<strong>Táº¥t cáº£ cÃ¡c hoáº¡t Ä‘á»™ng trong má»™t phiÃªn lÃ m viá»‡c pháº£i thÃ nh cÃ´ng hoáº·c tháº¥t báº¡i cÃ¹ng nhau</strong>. Cá»¥ thá»ƒ hÆ¡n, giao dá»‹ch lÃ  má»™t nhÃ³m cÃ¡c hoáº¡t Ä‘á»™ng tuÃ¢n thá»§ cÃ¡c Ä‘áº·c Ä‘iá»ƒm ACID, cÃ³ thá»ƒ Ä‘Æ°á»£c gá»­i Ä‘i báº±ng cÃ¡ch sá»­ dá»¥ng&nbsp;<code>Commit</code>&nbsp;Ä‘á»ƒ xÃ¡c nháº­n giao dá»‹ch hoáº·c sá»­ dá»¥ng&nbsp;<code>Rollback</code>&nbsp;Ä‘á»ƒ hoÃ n tÃ¡c giao dá»‹ch.</p>
</blockquote>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/185b9c49-4c13-4241-a848-fbff85c03a64.png" alt="185b9c49-4c13-4241-a848-fbff85c03a64.png" tabindex="0" loading="lazy"><figcaption>185b9c49-4c13-4241-a848-fbff85c03a64.png</figcaption></figure>
<p><strong>Giao dá»‹ch lÃ  má»™t nhÃ³m cÃ¡c cÃ¢u lá»‡nh SQL nguyÃªn tá»­</strong>. Cá»¥ thá»ƒ hÆ¡n, giao dá»‹ch lÃ  má»™t nhÃ³m cÃ¡c hoáº¡t Ä‘á»™ng tuÃ¢n thá»§ cÃ¡c Ä‘áº·c Ä‘iá»ƒm ACID.</p>
<p><strong>CÃ¡c cÃ¢u lá»‡nh SQL trong giao dá»‹ch pháº£i Ä‘Æ°á»£c thá»±c thi hoÃ n toÃ n thÃ nh cÃ´ng hoáº·c tháº¥t báº¡i hoÃ n toÃ n</strong>.</p>
<p><strong>CÃ¡c cÆ¡ cháº¿ cÃ¡ch ly giao dá»‹ch khÃ¡c nhau cÃ³ thá»ƒ Ä‘Æ°á»£c thá»±c hiá»‡n báº±ng cÃ¡ch sá»­ dá»¥ng khÃ³a</strong>.</p>
<p>HÃ£y tÆ°á»Ÿng tÆ°á»£ng náº¿u khÃ´ng cÃ³ giao dá»‹ch, trong mÃ´i trÆ°á»ng Ä‘á»“ng thá»i, cÃ³ thá»ƒ xáº£y ra viá»‡c máº¥t mÃ¡t thay Ä‘á»•i.</p>
<p>Hai luá»“ng T1&nbsp;vÃ  T2&nbsp;Ä‘á»u thay Ä‘á»•i dá»¯ liá»‡u, T1&nbsp;thay Ä‘á»•i trÆ°á»›c, T2&nbsp;thay Ä‘á»•i sau, thay Ä‘á»•i cá»§a T2&nbsp;ghi Ä‘Ã¨ lÃªn thay Ä‘á»•i cá»§a T1.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721002023.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<h2>CÃ¡ch sá»­ dá»¥ng giao dá»‹ch</h2>
<h3>CÃ¡c lá»‡nh xá»­ lÃ½ giao dá»‹ch</h3>
<p>Trong MySQL, sá»­ dá»¥ng cÃ¢u lá»‡nh&nbsp;<code>START TRANSACTION</code>&nbsp;Ä‘á»ƒ báº¯t Ä‘áº§u má»™t giao dá»‹ch; sá»­ dá»¥ng cÃ¢u lá»‡nh&nbsp;<code>COMMIT</code>&nbsp;Ä‘á»ƒ xÃ¡c nháº­n táº¥t cáº£ cÃ¡c thay Ä‘á»•i; sá»­ dá»¥ng cÃ¢u lá»‡nh&nbsp;<code>ROLLBACK</code>&nbsp;Ä‘á»ƒ hoÃ n tÃ¡c táº¥t cáº£ cÃ¡c thay Ä‘á»•i. KhÃ´ng thá»ƒ hoÃ n tÃ¡c cÃ¢u lá»‡nh&nbsp;<code>SELECT</code>, viá»‡c hoÃ n tÃ¡c cÃ¢u lá»‡nh&nbsp;<code>SELECT</code>&nbsp;cÅ©ng khÃ´ng cÃ³ Ã½ nghÄ©a; cÅ©ng khÃ´ng thá»ƒ hoÃ n tÃ¡c cÃ¢u lá»‡nh&nbsp;<code>CREATE</code>&nbsp;vÃ &nbsp;<code>DROP</code>.</p>
<ul>
<li><code>START TRANSACTION</code>&nbsp;- CÃ¢u lá»‡nh dÃ¹ng Ä‘á»ƒ Ä‘Ã¡nh dáº¥u Ä‘iá»ƒm báº¯t Ä‘áº§u cá»§a giao dá»‹ch.</li>
<li><code>SAVEPOINT</code>&nbsp;- CÃ¢u lá»‡nh dÃ¹ng Ä‘á»ƒ táº¡o Ä‘iá»ƒm lÆ°u trá»¯.</li>
<li><code>ROLLBACK TO</code>&nbsp;- CÃ¢u lá»‡nh dÃ¹ng Ä‘á»ƒ hoÃ n tÃ¡c Ä‘áº¿n Ä‘iá»ƒm lÆ°u trá»¯ Ä‘Ã£ chá»‰ Ä‘á»‹nh; náº¿u khÃ´ng cÃ³ Ä‘iá»ƒm lÆ°u trá»¯ Ä‘Æ°á»£c Ä‘áº·t, nÃ³ sáº½ hoÃ n tÃ¡c Ä‘áº¿n cÃ¢u lá»‡nh&nbsp;<code>START TRANSACTION</code>.</li>
<li><code>COMMIT</code>&nbsp;- XÃ¡c nháº­n giao dá»‹ch.</li>
</ul>
<p>VÃ­ dá»¥ xá»­ lÃ½ giao dá»‹ch:</p>
<p>(1) Táº¡o má»™t báº£ng vÃ­ dá»¥</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- XÃ³a báº£ng user náº¿u tá»“n táº¡i</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">DROP</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TABLE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> IF</span><span style="color:#C678DD;--shiki-dark:#C678DD"> EXISTS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> user;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Táº¡o báº£ng user</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> user</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  id </span><span style="color:#C678DD;--shiki-dark:#C678DD">int</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) unsigned </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'Id'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  username </span><span style="color:#C678DD;--shiki-dark:#C678DD">varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">64</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379"> 'default'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'TÃªn Ä‘Äƒng nháº­p'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  password</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">64</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379"> 'default'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'Máº­t kháº©u'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  email </span><span style="color:#C678DD;--shiki-dark:#C678DD">varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">64</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379"> 'default'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'Email'</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) COMMENT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">'Báº£ng ngÆ°á»i dÃ¹ng'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>(2) Thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng giao dá»‹ch</p>
<div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Báº¯t Ä‘áº§u giao dá»‹ch</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">START TRANSACTION</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Thá»±c hiá»‡n hoáº¡t Ä‘á»™ng A</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">INSERT INTO</span><span style="color:#98C379;--shiki-dark:#98C379"> `user`</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'root1'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'root1'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'xxxx@163.com'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Táº¡o Ä‘iá»ƒm lÆ°u trá»¯ updateA</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">SAVEPOINT updateA;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Thá»±c hiá»‡n hoáº¡t Ä‘á»™ng B</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">INSERT INTO</span><span style="color:#98C379;--shiki-dark:#98C379"> `user`</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'root2'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'root2'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'xxxx@163.com'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- HoÃ n tÃ¡c Ä‘áº¿n Ä‘iá»ƒm lÆ°u trá»¯ updateA</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">ROLLBACK</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> updateA;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- XÃ¡c nháº­n giao dá»‹ch, chá»‰ hoáº¡t Ä‘á»™ng A Ä‘Æ°á»£c Ã¡p dá»¥ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">COMMIT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>(3) Káº¿t quáº£ thá»±c thi</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> user;</span></span></code></pre>
</div><p>Káº¿t quáº£:</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>1	root1	root1	xxxx@163.com</span></span></code></pre>
</div><h3>AUTOCOMMIT</h3>
<p><strong>Máº·c Ä‘á»‹nh, MySQL sá»­ dá»¥ng cháº¿ Ä‘á»™ xÃ¡c nháº­n ngáº§m (<code>autocommit</code>)</strong>. Má»—i cÃ¢u lá»‡nh Ä‘Æ°á»£c thá»±c thi Ä‘Æ°á»£c coi lÃ  má»™t giao dá»‹ch vÃ  Ä‘Æ°á»£c xÃ¡c nháº­n. Khi gáº·p cÃ¢u lá»‡nh&nbsp;<code>START TRANSACTION</code>, cháº¿ Ä‘á»™ xÃ¡c nháº­n ngáº§m sáº½ bá»‹ táº¯t; sau khi thá»±c hiá»‡n cÃ¢u lá»‡nh&nbsp;<code>COMMIT</code>&nbsp;hoáº·c&nbsp;<code>ROLLBACK</code>, giao dá»‹ch sáº½ tá»± Ä‘á»™ng Ä‘Ã³ng vÃ  cháº¿ Ä‘á»™ xÃ¡c nháº­n ngáº§m sáº½ Ä‘Æ°á»£c khÃ´i phá»¥c.</p>
<p>Báº±ng cÃ¡ch sá»­ dá»¥ng&nbsp;<code>set autocommit=0</code>, báº¡n cÃ³ thá»ƒ há»§y bá» xÃ¡c nháº­n tá»± Ä‘á»™ng cho Ä‘áº¿n khi&nbsp;<code>set autocommit=1</code>&nbsp;Ä‘Æ°á»£c thá»±c hiá»‡n; cá»&nbsp;<code>autocommit</code>&nbsp;Ä‘Æ°á»£c Ã¡p dá»¥ng cho má»—i káº¿t ná»‘i chá»© khÃ´ng pháº£i cho mÃ¡y chá»§.</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Xem cá» AUTOCOMMIT</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">SHOW VARIABLES </span><span style="color:#C678DD;--shiki-dark:#C678DD">LIKE</span><span style="color:#98C379;--shiki-dark:#98C379"> 'AUTOCOMMIT'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Táº¯t AUTOCOMMIT</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> autocommit </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Báº­t AUTOCOMMIT</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> autocommit </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><h1>ACID</h1>
<p>ACID lÃ  bá»‘n yáº¿u tá»‘ cÆ¡ báº£n Ä‘á»ƒ Ä‘áº£m báº£o thá»±c hiá»‡n giao dá»‹ch Ä‘Ãºng Ä‘áº¯n trong cÆ¡ sá»Ÿ dá»¯ liá»‡u.</p>
<ul>
<li><strong>TÃ­nh nguyÃªn tá»­ (Atomicity)</strong>
<ul>
<li>Giao dá»‹ch Ä‘Æ°á»£c coi lÃ  Ä‘Æ¡n vá»‹ nhá» nháº¥t khÃ´ng thá»ƒ chia tÃ¡ch, táº¥t cáº£ cÃ¡c hoáº¡t Ä‘á»™ng trong giao dá»‹ch pháº£i Ä‘Æ°á»£c thá»±c hiá»‡n hoÃ n toÃ n thÃ nh cÃ´ng hoáº·c hoÃ n toÃ n tháº¥t báº¡i.</li>
<li>Rollback cÃ³ thá»ƒ Ä‘Æ°á»£c thá»±c hiá»‡n báº±ng cÃ¡ch sá»­ dá»¥ng nháº­t kÃ½, nháº­t kÃ½ ghi láº¡i cÃ¡c thay Ä‘á»•i Ä‘Æ°á»£c thá»±c hiá»‡n trong giao dá»‹ch vÃ  thá»±c hiá»‡n ngÆ°á»£c láº¡i cÃ¡c thay Ä‘á»•i nÃ y khi rollback.</li>
</ul>
</li>
<li><strong>TÃ­nh nháº¥t quÃ¡n (Consistency)</strong>
<ul>
<li>CÆ¡ sá»Ÿ dá»¯ liá»‡u duy trÃ¬ tráº¡ng thÃ¡i nháº¥t quÃ¡n trÆ°á»›c vÃ  sau khi thá»±c hiá»‡n giao dá»‹ch.</li>
<li>Trong tráº¡ng thÃ¡i nháº¥t quÃ¡n, káº¿t quáº£ Ä‘á»c cá»§a táº¥t cáº£ cÃ¡c giao dá»‹ch Ä‘á»‘i vá»›i má»™t dá»¯ liá»‡u lÃ  giá»‘ng nhau.</li>
</ul>
</li>
<li><strong>TÃ­nh cÃ´ láº­p (Isolation)</strong>
<ul>
<li>Sá»± thay Ä‘á»•i mÃ  má»™t giao dá»‹ch thá»±c hiá»‡n khÃ´ng Ä‘Æ°á»£c nhÃ¬n tháº¥y bá»Ÿi cÃ¡c giao dá»‹ch khÃ¡c cho Ä‘áº¿n khi nÃ³ Ä‘Æ°á»£c cam káº¿t.</li>
</ul>
</li>
<li><strong>TÃ­nh bá»n vá»¯ng (Durability)</strong>
<ul>
<li>Khi má»™t giao dá»‹ch Ä‘Æ°á»£c cam káº¿t, cÃ¡c thay Ä‘á»•i mÃ  nÃ³ thá»±c hiá»‡n sáº½ Ä‘Æ°á»£c lÆ°u trá»¯ vÄ©nh viá»…n trong cÆ¡ sá»Ÿ dá»¯ liá»‡u. Ngay cáº£ khi há»‡ thá»‘ng gáº·p sá»± cá»‘, káº¿t quáº£ cá»§a giao dá»‹ch váº«n khÃ´ng bá»‹ máº¥t.</li>
<li>Äiá»u nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘áº¡t Ä‘Æ°á»£c báº±ng sao lÆ°u vÃ  khÃ´i phá»¥c cÆ¡ sá»Ÿ dá»¯ liá»‡u, trong trÆ°á»ng há»£p há»‡ thá»‘ng gáº·p sá»± cá»‘.</li>
</ul>
</li>
</ul>
<p><strong>Há»‡ thá»‘ng cÆ¡ sá»Ÿ dá»¯ liá»‡u há»— trá»£ giao dá»‹ch pháº£i cÃ³ bá»‘n tÃ­nh cháº¥t nÃ y, náº¿u khÃ´ng, khÃ´ng thá»ƒ Ä‘áº£m báº£o tÃ­nh chÃ­nh xÃ¡c cá»§a dá»¯ liá»‡u trong quÃ¡ trÃ¬nh giao dá»‹ch.</strong></p>
<ul>
<li>Chá»‰ khi tuÃ¢n thá»§ tÃ­nh nháº¥t quÃ¡n, káº¿t quáº£ thá»±c hiá»‡n cá»§a giao dá»‹ch má»›i lÃ  chÃ­nh xÃ¡c.</li>
<li>Trong trÆ°á»ng há»£p khÃ´ng cÃ³ sá»± cáº¡nh tranh, khi giao dá»‹ch Ä‘Æ°á»£c thá»±c hiá»‡n tuáº§n tá»±, tÃ­nh cÃ´ láº­p sáº½ Ä‘Æ°á»£c Ä‘áº£m báº£o. Khi Ä‘Ã³, chá»‰ cáº§n Ä‘áº£m báº£o tÃ­nh nguyÃªn tá»­, tÃ­nh nháº¥t quÃ¡n cÅ©ng sáº½ Ä‘Æ°á»£c Ä‘áº£m báº£o.</li>
<li>Trong trÆ°á»ng há»£p cÃ³ sá»± cáº¡nh tranh, khi nhiá»u giao dá»‹ch Ä‘Æ°á»£c thá»±c hiá»‡n song song, giao dá»‹ch khÃ´ng chá»‰ cáº§n Ä‘áº£m báº£o tÃ­nh nguyÃªn tá»­ mÃ  cÃ²n cáº§n Ä‘áº£m báº£o tÃ­nh cÃ´ láº­p Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh nháº¥t quÃ¡n.</li>
<li>TÃ­nh bá»n vá»¯ng cá»§a giao dá»‹ch lÃ  Ä‘á»ƒ xá»­ lÃ½ trÆ°á»ng há»£p há»‡ thá»‘ng gáº·p sá»± cá»‘.</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/acid.png" alt="acid.png" tabindex="0" loading="lazy"><figcaption>acid.png</figcaption></figure>
<blockquote>
<p>Mysql máº·c Ä‘á»‹nh sá»­ dá»¥ng cháº¿ Ä‘á»™ tá»± Ä‘á»™ng cam káº¿t (<code>AUTO COMMIT</code>). Äiá»u nÃ y cÃ³ nghÄ©a lÃ  náº¿u khÃ´ng sá»­ dá»¥ng rÃµ rÃ ng cÃ¢u lá»‡nh&nbsp;<code>START TRANSACTION</code>&nbsp;Ä‘á»ƒ báº¯t Ä‘áº§u má»™t giao dá»‹ch, má»—i cÃ¢u lá»‡nh truy váº¥n sáº½ Ä‘Æ°á»£c coi lÃ  má»™t giao dá»‹ch vÃ  tá»± Ä‘á»™ng cam káº¿t.</p>
</blockquote>
<h2>CÃ¡c cáº¥p Ä‘á»™ cÃ´ láº­p giao dá»‹ch</h2>
<h3>Giá»›i thiá»‡u vá» cáº¥p Ä‘á»™ cÃ´ láº­p giao dá»‹ch</h3>
<p>Trong mÃ´i trÆ°á»ng Ä‘á»“ng thá»i, ráº¥t khÃ³ Ä‘áº£m báº£o tÃ­nh cÃ´ láº­p cá»§a giao dá»‹ch, do Ä‘Ã³ sáº½ xuáº¥t hiá»‡n nhiá»u váº¥n Ä‘á» vá» tÃ­nh nháº¥t quÃ¡n:</p>
<ul>
<li><strong>Máº¥t mÃ¡t thay Ä‘á»•i</strong></li>
<li><strong>Äá»c báº©n (Dirty Read)</strong></li>
<li><strong>Äá»c khÃ´ng nháº¥t quÃ¡n (Non-Repeatable Read)</strong></li>
<li><strong>Äá»c áº£o (Phantom Read)</strong></li>
</ul>
<p>Trong tiÃªu chuáº©n SQL, xÃ¡c Ä‘á»‹nh bá»‘n cáº¥p Ä‘á»™ cÃ´ láº­p giao dá»‹ch (tá»« tháº¥p Ä‘áº¿n cao):</p>
<ul>
<li><strong>Äá»c chÆ°a cam káº¿t (Read Uncommitted)</strong></li>
<li><strong>Äá»c Ä‘Ã£ cam káº¿t (Read Committed)</strong></li>
<li><strong>Äá»c láº·p láº¡i (Repeatable Read)</strong></li>
<li><strong>Serializable (Serializable)</strong></li>
</ul>
<p>Xem vÃ  thiáº¿t láº­p cáº¥p Ä‘á»™ cÃ´ láº­p giao dá»‹ch trong MySQL:</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Xem cáº¥p Ä‘á»™ cÃ´ láº­p giao dá»‹ch</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">SHOW VARIABLES </span><span style="color:#C678DD;--shiki-dark:#C678DD">LIKE</span><span style="color:#98C379;--shiki-dark:#98C379"> 'transaction_isolation'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Thiáº¿t láº­p cáº¥p Ä‘á»™ cÃ´ láº­p giao dá»‹ch lÃ  READ UNCOMMITTED</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SET</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SESSION</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TRANSACTION</span><span style="color:#C678DD;--shiki-dark:#C678DD"> ISOLATION</span><span style="color:#C678DD;--shiki-dark:#C678DD"> LEVEL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> READ</span><span style="color:#C678DD;--shiki-dark:#C678DD"> UNCOMMITTED</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Thiáº¿t láº­p cáº¥p Ä‘á»™ cÃ´ láº­p giao dá»‹ch lÃ  READ COMMITTED</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SET</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SESSION</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TRANSACTION</span><span style="color:#C678DD;--shiki-dark:#C678DD"> ISOLATION</span><span style="color:#C678DD;--shiki-dark:#C678DD"> LEVEL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> READ</span><span style="color:#C678DD;--shiki-dark:#C678DD"> COMMITTED</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Thiáº¿t láº­p cáº¥p Ä‘á»™ cÃ´ láº­p giao dá»‹ch lÃ  REPEATABLE READ</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SET</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SESSION</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TRANSACTION</span><span style="color:#C678DD;--shiki-dark:#C678DD"> ISOLATION</span><span style="color:#C678DD;--shiki-dark:#C678DD"> LEVEL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> REPEATABLE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> READ</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">-- Thiáº¿t láº­p cáº¥p Ä‘á»™ cÃ´ láº­p giao dá»‹ch lÃ  SERIALIZABLE</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">SET</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SESSION</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TRANSACTION</span><span style="color:#C678DD;--shiki-dark:#C678DD"> ISOLATION</span><span style="color:#C678DD;--shiki-dark:#C678DD"> LEVEL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SERIALIZABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><h3>Äá»c chÆ°a cam káº¿t</h3>
<p><strong><code>Äá»c chÆ°a cam káº¿t (Read Uncommitted)</code></strong>&nbsp;cÃ³ nghÄ©a lÃ : CÃ¡c thay Ä‘á»•i trong giao dá»‹ch, ngay cáº£ khi chÆ°a Ä‘Æ°á»£c cam káº¿t, cÅ©ng cÃ³ thá»ƒ nhÃ¬n tháº¥y bá»Ÿi cÃ¡c giao dá»‹ch khÃ¡c.</p>
<p>Váº¥n Ä‘á» cá»§a Ä‘á»c chÆ°a cam káº¿t: Giao dá»‹ch cÃ³ thá»ƒ Ä‘á»c dá»¯ liá»‡u chÆ°a Ä‘Æ°á»£c cam káº¿t, cÃ²n Ä‘Æ°á»£c gá»i lÃ &nbsp;<strong>Ä‘á»c báº©n (Dirty Read)</strong>.</p>
<p>T1&nbsp;thay Ä‘á»•i má»™t dá»¯ liá»‡u, T2&nbsp;sau Ä‘Ã³ Ä‘á»c dá»¯ liá»‡u nÃ y. Náº¿u T1&nbsp;há»§y bá» thay Ä‘á»•i nÃ y, thÃ¬ dá»¯ liá»‡u Ä‘á»c bá»Ÿi T2&nbsp;lÃ  dá»¯ liá»‡u báº©n.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202307210021321.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<h3>Äá»c Ä‘Ã£ cam káº¿t</h3>
<p><strong><code>Äá»c Ä‘Ã£ cam káº¿t (Read Committed)</code></strong>&nbsp;cÃ³ nghÄ©a lÃ : CÃ¡c thay Ä‘á»•i trong giao dá»‹ch chá»‰ cÃ³ thá»ƒ nhÃ¬n tháº¥y bá»Ÿi cÃ¡c giao dá»‹ch khÃ¡c sau khi Ä‘Ã£ Ä‘Æ°á»£c cam káº¿t. NÃ³ giáº£i quyáº¿t váº¥n Ä‘á» Ä‘á»c dÆ¡ báº©n.</p>
<p>Äá»c Ä‘Ã£ cam káº¿t lÃ  cáº¥p Ä‘á»™ cÃ´ láº­p máº·c Ä‘á»‹nh cá»§a háº§u háº¿t cÃ¡c cÆ¡ sá»Ÿ dá»¯ liá»‡u.</p>
<p>Váº¥n Ä‘á» cá»§a Ä‘á»c Ä‘Ã£ cam káº¿t: Khi thá»±c hiá»‡n hai láº§n truy váº¥n giá»‘ng nhau, káº¿t quáº£ cÃ³ thá»ƒ khÃ´ng nháº¥t quÃ¡n.</p>
<p>T2&nbsp;Ä‘á»c má»™t dá»¯ liá»‡u, T1&nbsp;thay Ä‘á»•i dá»¯ liá»‡u nÃ y. Náº¿u T2&nbsp;Ä‘á»c dá»¯ liá»‡u nÃ y láº§n ná»¯a, káº¿t quáº£ Ä‘á»c sáº½ khÃ¡c vá»›i káº¿t quáº£ Ä‘á»c láº§n Ä‘áº§u.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721002326.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<h3>Äá»c láº·p láº¡i</h3>
<p><strong><code>Äá»c láº·p láº¡i (Repeatable Read)</code></strong>&nbsp;cÃ³ nghÄ©a lÃ : Äáº£m báº£o káº¿t quáº£ cá»§a viá»‡c Ä‘á»c nhiá»u láº§n cÃ¹ng má»™t dá»¯ liá»‡u trong cÃ¹ng má»™t giao dá»‹ch lÃ  giá»‘ng nhau. Äá»c láº·p láº¡i giáº£i quyáº¿t váº¥n Ä‘á» Ä‘á»c khÃ´ng nháº¥t quÃ¡n.</p>
<p>Äá»c láº·p láº¡i lÃ  cáº¥p Ä‘á»™ cÃ´ láº­p máº·c Ä‘á»‹nh cá»§a MySQL.</p>
<p>Váº¥n Ä‘á» cá»§a Ä‘á»c láº·p láº¡i: Khi má»™t giao dá»‹ch T1 Ä‘á»c má»™t pháº¡m vi dá»¯ liá»‡u, giao dá»‹ch T2 chÃ¨n má»™t báº£n ghi má»›i vÃ o pháº¡m vi Ä‘Ã³, sau Ä‘Ã³ giao dá»‹ch T1 Ä‘á»c láº¡i pháº¡m vi dá»¯ liá»‡u nÃ y, káº¿t quáº£ Ä‘á»c sáº½ khÃ¡c vá»›i káº¿t quáº£ Ä‘á»c láº§n Ä‘áº§u, Ä‘Æ°á»£c gá»i lÃ &nbsp;<strong>Ä‘á»c áº£o (Phantom Read)</strong>.</p>
<figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230721002333.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>
<h3>Tuáº§n tá»± hoÃ¡</h3>
<p><strong><code>Tuáº§n tá»± hoÃ¡ (Serializable)</code></strong>&nbsp;cÃ³ nghÄ©a lÃ : Buá»™c giao dá»‹ch thá»±c hiá»‡n tuáº§n tá»±, khÃ³a Ä‘á»c vÃ  ghi cho cÃ¹ng má»™t hÃ ng dá»¯ liá»‡u. Náº¿u xáº£y ra xung Ä‘á»™t khÃ³a, giao dá»‹ch phÃ­a trÆ°á»›c pháº£i chá» giao dá»‹ch phÃ­a sau giáº£i phÃ³ng khÃ³a.</p>
<p>Thá»±c hiá»‡n giao dá»‹ch tuáº§n tá»± sáº½ trÃ¡nh táº¥t cáº£ cÃ¡c váº¥n Ä‘á» Ä‘á»“ng thá»i. Chiáº¿n lÆ°á»£c tuáº§n tá»± hÃ³a sáº½ khÃ³a tá»«ng hÃ ng dá»¯ liá»‡u Ä‘Æ°á»£c Ä‘á»c, Ä‘iá»u nÃ y cÃ³ thá»ƒ dáº«n Ä‘áº¿n nhiá»u thá»i gian chá» vÃ  cáº¡nh tranh khÃ³a. Äiá»u nÃ y gáº§n nhÆ° khÃ´ng thá»ƒ cháº¥p nháº­n Ä‘Æ°á»£c Ä‘á»‘i vá»›i cÃ¡c á»©ng dá»¥ng cÃ³ Ä‘á»™ táº£i cao, vÃ¬ váº­y thÆ°á»ng khÃ´ng sá»­ dá»¥ng cáº¥p Ä‘á»™ nÃ y.</p>
<h3>TÃ³m táº¯t vá» cÃ¡c cáº¥p Ä‘á»™ cÃ´ láº­p</h3>
<ul>
<li><strong><code>Äá»c chÆ°a cam káº¿t (Read Uncommitted)</code></strong>&nbsp;- CÃ¡c thay Ä‘á»•i trong giao dá»‹ch, ngay cáº£ khi chÆ°a Ä‘Æ°á»£c cam káº¿t, cÅ©ng cÃ³ thá»ƒ nhÃ¬n tháº¥y bá»Ÿi cÃ¡c giao dá»‹ch khÃ¡c.</li>
<li><strong><code>Äá»c Ä‘Ã£ cam káº¿t (Read Committed)</code></strong>&nbsp;- CÃ¡c thay Ä‘á»•i trong giao dá»‹ch chá»‰ cÃ³ thá»ƒ nhÃ¬n tháº¥y bá»Ÿi cÃ¡c giao dá»‹ch khÃ¡c sau khi Ä‘Ã£ Ä‘Æ°á»£c cam káº¿t.</li>
<li><strong><code>Äá»c láº·p láº¡i (Repeatable Read)</code></strong>&nbsp;- Äáº£m báº£o káº¿t quáº£ cá»§a viá»‡c Ä‘á»c nhiá»u láº§n cÃ¹ng má»™t dá»¯ liá»‡u trong cÃ¹ng má»™t giao dá»‹ch lÃ  giá»‘ng nhau.</li>
<li><strong><code>Tuáº§n tá»± hoÃ¡ (Serializable)</code></strong>&nbsp;- Buá»™c giao dá»‹ch thá»±c hiá»‡n tuáº§n tá»±, khÃ³a Ä‘á»c vÃ  ghi cho cÃ¹ng má»™t hÃ ng dá»¯ liá»‡u.</li>
</ul>
<p>CÃ¡c váº¥n Ä‘á» Ä‘Æ°á»£c giáº£i quyáº¿t bá»Ÿi cÃ¡c cáº¥p Ä‘á»™ cÃ´ láº­p giao dá»‹ch:</p>
<p>| Cáº¥p Ä‘á»™ cÃ´ láº­p | Máº¥t mÃ¡t thay Ä‘á»•i | Äá»c báº©n | Äá»c khÃ´ng nháº¥t quÃ¡n | Äá»c áº£o |<br>
| :</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/vanhung4499/images/master/snap/185b9c49-4c13-4241-a848-fbff85c03a64.png" type="image/png"/>
    </item>
    <item>
      <title>Redis</title>
      <link>https://vanhung4499.github.io/database/redis/</link>
      <guid>https://vanhung4499.github.io/database/redis/</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Redis</source>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
    </item>
    <item>
      <title>Redis In Action</title>
      <link>https://vanhung4499.github.io/database/redis/action.html</link>
      <guid>https://vanhung4499.github.io/database/redis/action.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Redis In Action</source>
      <description>Redis in action Redis cÃ³ thá»ƒ Ä‘Æ°á»£c Ã¡p dá»¥ng trong nhiá»u tÃ¬nh huá»‘ng, dÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ tÃ¬nh huá»‘ng sá»­ dá»¥ng phá»• biáº¿n. Bá»™ nhá»› Ä‘á»‡m Bá»™ nhá»› Ä‘á»‡m lÃ  ká»‹ch báº£n á»©ng dá»¥ng phá»• biáº¿n nháº¥t cá»§a Re...</description>
      <category>db</category>
      <category>redis</category>
      <category>nosql</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>Redis cÃ³ thá»ƒ Ä‘Æ°á»£c Ã¡p dá»¥ng trong nhiá»u tÃ¬nh huá»‘ng, dÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ tÃ¬nh huá»‘ng sá»­ dá»¥ng phá»• biáº¿n.</p>
</blockquote>
<h2>Bá»™ nhá»› Ä‘á»‡m</h2>
<p>Bá»™ nhá»› Ä‘á»‡m lÃ  ká»‹ch báº£n á»©ng dá»¥ng phá»• biáº¿n nháº¥t cá»§a Redis.</p>
<p>Redis cÃ³ nhiá»u loáº¡i dá»¯ liá»‡u vÃ  lá»‡nh hoáº¡t Ä‘á»™ng phong phÃº, Ä‘á»“ng thá»i cÃ³ cÃ¡c tÃ­nh nÄƒng hiá»‡u suáº¥t cao vÃ  tÃ­nh sáºµn sÃ ng cao, khiáº¿n nÃ³ ráº¥t phÃ¹ há»£p cho bá»™ nhá»› Ä‘á»‡m phÃ¢n tÃ¡n.</p>
<blockquote>
<p>NguyÃªn táº¯c cÆ¡ báº£n cá»§a viá»‡c sá»­ dá»¥ng cache, vui lÃ²ng tham kháº£o pháº§n <a href=""><strong>NguyÃªn táº¯c cÆ¡ báº£n cá»§a cache</strong></a>.</p>
</blockquote>
<h2>BitMap vÃ  BloomFilter</h2>
<p>Redis khÃ´ng chá»‰ há»— trá»£ 5 loáº¡i dá»¯ liá»‡u cÆ¡ báº£n mÃ  cÃ²n cÃ³ BitMap vÃ  BloomFilter (bá»™ lá»c Bloom, cÃ³ thá»ƒ Ä‘Æ°á»£c há»— trá»£ thÃ´ng qua Redis Module).</p>
<p>BitMap vÃ  BloomFilter Ä‘á»u cÃ³ thá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» xuyÃªn tháº¥u bá»™ nhá»› Ä‘á»‡m. Äiá»ƒm quan trá»ng lÃ : lá»c ra cÃ¡c dá»¯ liá»‡u khÃ´ng thá»ƒ tá»“n táº¡i.</p>
<blockquote>
<p>Váº¥n Ä‘á» cache penetration cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¬m hiá»ƒu táº¡i: [<strong>NguyÃªn táº¯c cÆ¡ báº£n cá»§a cache</strong>]</p>
</blockquote>
<h3>BitMap</h3>
<ul>
<li>BitMap thÃ­ch há»£p cho cÃ¡c táº­p dá»¯ liá»‡u nhá».</li>
<li>DÃ¹ng Ä‘á»ƒ hiá»‡u quáº£ Ä‘Ã¡nh dáº¥u sá»± tá»“n táº¡i cá»§a cÃ¡c dá»¯ liá»‡u, tá»« Ä‘Ã³ giÃºp loáº¡i bá» cÃ¡c truy váº¥n khÃ´ng cáº§n thiáº¿t.</li>
</ul>
<h3>BloomFilter</h3>
<ul>
<li>BloomFilter thÃ­ch há»£p cho cÃ¡c táº­p dá»¯ liá»‡u lá»›n.</li>
<li>Sá»­ dá»¥ng Ä‘á»ƒ kiá»ƒm tra xem má»™t pháº§n tá»­ cÃ³ tá»“n táº¡i trong táº­p dá»¯ liá»‡u hay khÃ´ng, mÃ  khÃ´ng cáº§n pháº£i láº¥y toÃ n bá»™ dá»¯ liá»‡u tá»« bá»™ nhá»› Ä‘á»‡m.</li>
</ul>
<h2>KhÃ³a phÃ¢n tÃ¡n (Distributed Lock)</h2>
<p>Sá»­ dá»¥ng Redis nhÆ° má»™t khÃ³a phÃ¢n tÃ¡n cÃ³ nhá»¯ng Ä‘iá»ƒm cÆ¡ báº£n sau:</p>
<ul>
<li><strong>Sá»± Ä‘á»™c quyá»n</strong>: Sá»­ dá»¥ng <code>setnx</code> Ä‘á»ƒ chiáº¿m giá»¯ khÃ³a.</li>
<li><strong>TrÃ¡nh khÃ´ng giáº£i phÃ³ng khÃ³a mÃ£i mÃ£i</strong>: Sá»­ dá»¥ng <code>expire</code> Ä‘á»ƒ Ä‘áº·t thá»i gian háº¿t háº¡n, trÃ¡nh tÃ¬nh tráº¡ng giá»¯ khÃ³a mÃ£i mÃ£i gÃ¢y táº¯c ngháº½n.</li>
<li><strong>TÃ­nh nguyÃªn tá»­</strong>: <code>setnx</code> vÃ  <code>expire</code> pháº£i Ä‘Æ°á»£c thá»±c hiá»‡n nhÆ° má»™t lá»‡nh nguyÃªn tá»­, trÃ¡nh tÃ¬nh tráº¡ng chiáº¿m giá»¯ khÃ³a xong mÃ¡y chá»§ bá»‹ sáº­p mÃ  khÃ´ng ká»‹p Ä‘áº·t expire, dáº«n Ä‘áº¿n khÃ´ng giáº£i phÃ³ng khÃ³a.</li>
</ul>
<blockquote>
<p>Äá»ƒ biáº¿t thÃªm vá» cÃ¡c cÃ¡ch triá»ƒn khai khÃ³a phÃ¢n tÃ¡n vÃ  chi tiáº¿t, vui lÃ²ng tham kháº£o: <a href=""><strong>NguyÃªn táº¯c cÆ¡ báº£n cá»§a khÃ³a phÃ¢n tÃ¡n</strong></a></p>
</blockquote>
<h2>keys vÃ  scan</h2>
<p>Sá»­ dá»¥ng lá»‡nh <code>keys</code> Ä‘á»ƒ quÃ©t danh sÃ¡ch cÃ¡c key theo má»™t máº«u nháº¥t Ä‘á»‹nh.</p>
<p>Náº¿u Redis Ä‘Ã³ Ä‘ang phá»¥c vá»¥ dá»‹ch vá»¥ trá»±c tuyáº¿n, viá»‡c sá»­ dá»¥ng lá»‡nh <code>keys</code> sáº½ gáº·p váº¥n Ä‘á»:</p>
<p>Äáº§u tiÃªn, Redis lÃ  há»‡ thá»‘ng Ä‘Æ¡n luá»“ng. Lá»‡nh <code>keys</code> sáº½ gÃ¢y cháº·n luá»“ng má»™t khoáº£ng thá»i gian, dáº«n Ä‘áº¿n dá»«ng dá»‹ch vá»¥ trá»±c tuyáº¿n cho Ä‘áº¿n khi lá»‡nh Ä‘Æ°á»£c thá»±c thi xong.</p>
<p>Trong trÆ°á»ng há»£p nÃ y, cÃ³ thá»ƒ sá»­ dá»¥ng lá»‡nh <code>scan</code>. Lá»‡nh <code>scan</code> cho phÃ©p trÃ­ch xuáº¥t danh sÃ¡ch cÃ¡c key theo máº«u mÃ  khÃ´ng cháº·n luá»“ng. Tuy nhiÃªn, cÃ³ thá»ƒ xáº£y ra sá»± trÃ¹ng láº·p nháº¥t Ä‘á»‹nh, vÃ  cáº§n thá»±c hiá»‡n loáº¡i bá» trÃ¹ng láº·p á»Ÿ phÃ­a mÃ¡y khÃ¡ch, tuy nhiÃªn tá»•ng thá»i gian thá»±c hiá»‡n cÃ³ thá»ƒ dÃ i hÆ¡n so vá»›i viá»‡c sá»­ dá»¥ng trá»±c tiáº¿p lá»‡nh <code>keys</code>.</p>
<p>Tuy nhiÃªn, cÃ¡c lá»‡nh duyá»‡t tÄƒng dáº§n cÅ©ng khÃ´ng pháº£i lÃ  khÃ´ng cÃ³ Ä‘iá»ƒm yáº¿u: vÃ­ dá»¥, lá»‡nh <code>SMEMBERS</code> cÃ³ thá»ƒ tráº£ vá» táº¥t cáº£ cÃ¡c pháº§n tá»­ hiá»‡n cÃ³ trong táº­p há»£p, nhÆ°ng Ä‘á»‘i vá»›i cÃ¡c lá»‡nh duyá»‡t tÄƒng dáº§n nhÆ° <code>SCAN</code>, do quÃ¡ trÃ¬nh duyá»‡t tÄƒng dáº§n cÃ³ thá»ƒ sá»­a Ä‘á»•i cÃ¡c key, nÃªn chá»‰ cÃ³ thá»ƒ Ä‘áº£m báº£o giá»›i háº¡n Ä‘á»‘i vá»›i cÃ¡c pháº§n tá»­ Ä‘Æ°á»£c tráº£ vá».</p>
<h2>Xá»­ lÃ½ cÃ¡c Key lá»›n trong Redis</h2>
<h3>Key lá»›n Redis lÃ  gÃ¬?</h3>
<p>Key lá»›n trong Redis khÃ´ng chá»‰ Ä‘Æ¡n thuáº§n lÃ  giÃ¡ trá»‹ cá»§a key lá»›n mÃ  lÃ  giÃ¡ trá»‹ mÃ  key Ä‘Ã³ Ä‘ang lÆ°u trá»¯.</p>
<p>ThÆ°á»ng thÃ¬ hai trÆ°á»ng há»£p sau Ä‘Æ°á»£c gá»i lÃ  "Key lá»›n":</p>
<ul>
<li>GiÃ¡ trá»‹ cá»§a kiá»ƒu String lá»›n hÆ¡n 10 KB;</li>
<li>Sá»‘ lÆ°á»£ng pháº§n tá»­ trong cÃ¡c kiá»ƒu Hash, List, Set, ZSet lá»›n hÆ¡n 5000 pháº§n tá»­</li>
</ul>
<h3>Key lá»›n cÃ³ thá»ƒ gÃ¢y ra váº¥n Ä‘á» gÃ¬?</h3>
<p>Key lá»›n cÃ³ thá»ƒ gÃ¢y ra cÃ¡c váº¥n Ä‘á» sau Ä‘Ã¢y:</p>
<ul>
<li><strong>Cháº·n thá»i gian chá» cá»§a khÃ¡ch hÃ ng</strong>: Do Redis xá»­ lÃ½ cÃ¡c lá»‡nh theo luá»“ng Ä‘Æ¡n, cÃ¡c thao tÃ¡c vá»›i key lá»›n cÃ³ thá»ƒ tá»‘n nhiá»u thá»i gian, lÃ m cho Redis bá»‹ cháº·n vÃ  khÃ¡ch hÃ ng khÃ´ng nháº­n Ä‘Æ°á»£c pháº£n há»“i trong má»™t thá»i gian dÃ i.</li>
<li><strong>GÃ¢y ra ngháº½n máº¡ng</strong>: Viá»‡c truy xuáº¥t key lá»›n táº¡o ra lÆ°u lÆ°á»£ng máº¡ng lá»›n. VÃ­ dá»¥, náº¿u má»™t key cÃ³ kÃ­ch thÆ°á»›c lÃ  1 MB vÃ  cÃ³ 1000 láº§n truy cáº­p má»—i giÃ¢y, Ä‘iá»u nÃ y cÃ³ thá»ƒ táº¡o ra 1000 MB lÆ°u lÆ°á»£ng máº¡ng má»—i giÃ¢y, gÃ¢y khÃ³ khÄƒn cho mÃ¡y chá»§ cÃ³ card máº¡ng gigabit.</li>
<li><strong>Cháº·n luá»“ng lÃ m viá»‡c</strong>: XÃ³a má»™t key lá»›n cÃ³ thá»ƒ cháº·n luá»“ng lÃ m viá»‡c, khÃ´ng cho phÃ©p xá»­ lÃ½ cÃ¡c lá»‡nh tiáº¿p theo.</li>
<li><strong>PhÃ¢n phá»‘i bá»™ nhá»› khÃ´ng Ä‘á»“ng Ä‘á»u</strong>: Trong mÃ´ hÃ¬nh cá»¥m, náº¿u má»™t sá»‘ node Redis chá»©a cÃ¡c key lá»›n, chÃºng cÃ³ thá»ƒ chiáº¿m nhiá»u bá»™ nhá»› hÆ¡n vÃ  táº¡o ra má»™t sá»‘ lÆ°á»£ng truy váº¥n má»—i giÃ¢y (QPS) lá»›n hÆ¡n.</li>
</ul>
<h3>LÃ m tháº¿ nÃ o Ä‘á»ƒ tÃ¬m kiáº¿m cÃ¡c Key lá»›n?</h3>
<p><strong><em>1. Sá»­ dá»¥ng redis-cli --bigkeys Ä‘á»ƒ tÃ¬m kiáº¿m cÃ¡c key lá»›n</em></strong></p>
<p>Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng lá»‡nh <code>redis-cli --bigkeys</code> Ä‘á»ƒ tÃ¬m kiáº¿m cÃ¡c key lá»›n trong Redis:</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">redis-cli</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -h</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 127.0.0.1</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -p</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 6379</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -a</span><span style="color:#98C379;--shiki-dark:#98C379"> "password"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> --</span><span style="color:#98C379;--shiki-dark:#98C379"> bigkeys</span></span></code></pre>
</div><p>LÆ°u Ã½ khi sá»­ dá»¥ng:</p>
<ul>
<li>NÃªn thá»±c hiá»‡n lá»‡nh nÃ y trÃªn cÃ¡c node slave thay vÃ¬ node master. Viá»‡c thá»±c hiá»‡n trÃªn node master cÃ³ thá»ƒ gÃ¢y ra sá»± cháº­m trá»….</li>
<li>Náº¿u khÃ´ng cÃ³ node slave, báº¡n nÃªn chá»n thá»i Ä‘iá»ƒm tháº¥p Ä‘iá»ƒm cá»§a táº£i hoáº¡t Ä‘á»™ng cá»§a Redis Ä‘á»ƒ thá»±c hiá»‡n quÃ©t, nháº±m trÃ¡nh áº£nh hÆ°á»Ÿng Ä‘áº¿n hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng cá»§a há»‡ thá»‘ng. Hoáº·c báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng tham sá»‘ <code>-i</code> Ä‘á»ƒ Ä‘iá»u chá»‰nh khoáº£ng thá»i gian quÃ©t vÃ  trÃ¡nh giáº£m hiá»‡u suáº¥t trong thá»i gian dÃ i.</li>
</ul>
<p><strong>NhÆ°á»£c Ä‘iá»ƒm cá»§a phÆ°Æ¡ng phÃ¡p nÃ y:</strong></p>
<ul>
<li>PhÆ°Æ¡ng phÃ¡p nÃ y chá»‰ tráº£ vá» key lá»›n nháº¥t trong má»—i loáº¡i, khÃ´ng pháº£i lÃ  danh sÃ¡ch cÃ¡c key lá»›n nháº¥t.</li>
<li>Äá»‘i vá»›i cÃ¡c loáº¡i táº­p há»£p, phÆ°Æ¡ng phÃ¡p nÃ y chá»‰ thá»‘ng kÃª sá»‘ lÆ°á»£ng cÃ¡c pháº§n tá»­ trong táº­p há»£p, khÃ´ng pháº£i dung lÆ°á»£ng thá»±c táº¿ chiáº¿m giá»¯. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  má»™t táº­p há»£p cÃ³ nhiá»u pháº§n tá»­ khÃ´ng nháº¥t thiáº¿t pháº£i chiáº¿m nhiá»u bá»™ nhá»› náº¿u má»—i pháº§n tá»­ cÃ³ dung lÆ°á»£ng nhá».</li>
</ul>
<p><strong><em>2. Sá»­ dá»¥ng lá»‡nh SCAN Ä‘á»ƒ tÃ¬m kiáº¿m cÃ¡c key lá»›n</em></strong></p>
<p>Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng lá»‡nh SCAN Ä‘á»ƒ quÃ©t toÃ n bá»™ cÆ¡ sá»Ÿ dá»¯ liá»‡u Redis vÃ  sau Ä‘Ã³ sá»­ dá»¥ng lá»‡nh TYPE Ä‘á»ƒ láº¥y loáº¡i cá»§a tá»«ng key Ä‘Æ°á»£c tráº£ vá».</p>
<p>Äá»‘i vá»›i cÃ¡c key lÃ  kiá»ƒu String, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng lá»‡nh STRLEN Ä‘á»ƒ láº¥y Ä‘á»™ dÃ i cá»§a chuá»—i, tá»©c lÃ  sá»‘ byte chiáº¿m giá»¯ trong bá»™ nhá»›.</p>
<p>Äá»‘i vá»›i cÃ¡c kiá»ƒu táº­p há»£p, cÃ³ hai cÃ¡ch Ä‘á»ƒ biáº¿t Ä‘Æ°á»£c kÃ­ch thÆ°á»›c bá»™ nhá»› mÃ  chÃºng chiáº¿m giá»¯:</p>
<ul>
<li>
<p>Náº¿u báº¡n cÃ³ thá»ƒ biáº¿t trÆ°á»›c kÃ­ch thÆ°á»›c trung bÃ¬nh cá»§a cÃ¡c pháº§n tá»­ trong táº­p há»£p tá»« lá»›p kinh doanh, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c lá»‡nh sau Ä‘á»ƒ láº¥y sá»‘ lÆ°á»£ng cÃ¡c pháº§n tá»­ trong táº­p há»£p vÃ  sau Ä‘Ã³ nhÃ¢n vá»›i kÃ­ch thÆ°á»›c trung bÃ¬nh cá»§a tá»«ng pháº§n tá»­: Lá»‡nh LLEN cho List, HLEN cho Hash, SCARD cho Set vÃ  ZCARD cho Sorted Set.</p>
</li>
<li>
<p>Náº¿u báº¡n khÃ´ng thá»ƒ biáº¿t trÆ°á»›c kÃ­ch thÆ°á»›c cÃ¡c pháº§n tá»­ trong táº­p há»£p, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng lá»‡nh MEMORY USAGE (yÃªu cáº§u Redis phiÃªn báº£n 4.0 trá»Ÿ lÃªn) Ä‘á»ƒ truy váº¥n kÃ­ch thÆ°á»›c bá»™ nhá»› mÃ  má»™t key Ä‘ang chiáº¿m giá»¯.</p>
</li>
</ul>
<p><strong><em>3. Sá»­ dá»¥ng cÃ´ng cá»¥ RdbTools Ä‘á»ƒ tÃ¬m kiáº¿m cÃ¡c key lá»›n</em></strong></p>
<p>Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ´ng cá»¥ RdbTools, má»™t cÃ´ng cá»¥ mÃ£ nguá»“n má»Ÿ cá»§a bÃªn thá»© ba, Ä‘á»ƒ phÃ¢n tÃ­ch cÃ¡c táº­p tin chá»¥p Redis (RDB) vÃ  tÃ¬m kiáº¿m cÃ¡c key lá»›n trong Ä‘Ã³.</p>
<p>VÃ­ dá»¥, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng lá»‡nh sau Ä‘á»ƒ xuáº¥t cÃ¡c key cÃ³ kÃ­ch thÆ°á»›c lá»›n hÆ¡n 10 KB vÃ o má»™t tá»‡p báº£ng:</p>
<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">rdb</span><span style="color:#98C379;--shiki-dark:#98C379"> dump.rdb</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -c</span><span style="color:#98C379;--shiki-dark:#98C379"> memory</span><span style="color:#D19A66;--shiki-dark:#D19A66"> --bytes</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10240</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -f</span><span style="color:#98C379;--shiki-dark:#98C379"> redis.csv</span></span></code></pre>
</div><h3>LÃ m tháº¿ nÃ o Ä‘á»ƒ xÃ³a key lá»›n?</h3>
<p>QuÃ¡ trÃ¬nh xÃ³a key trong Redis thá»±c cháº¥t lÃ  giáº£i phÃ³ng khÃ´ng gian bá»™ nhá»› mÃ  key Ä‘Ã³ Ä‘ang chiáº¿m dá»¥ng. Tuy nhiÃªn, viá»‡c giáº£i phÃ³ng bá»™ nhá»› chá»‰ lÃ  bÆ°á»›c Ä‘áº§u tiÃªn. Äá»ƒ quáº£n lÃ½ khÃ´ng gian bá»™ nhá»› má»™t cÃ¡ch hiá»‡u quáº£ hÆ¡n, khi á»©ng dá»¥ng giáº£i phÃ³ng bá»™ nhá»›, há»‡ Ä‘iá»u hÃ nh cáº§n pháº£i chÃ¨n cÃ¡c khá»‘i bá»™ nhá»› Ä‘Æ°á»£c giáº£i phÃ³ng vÃ o má»™t danh sÃ¡ch liÃªn káº¿t cÃ¡c khá»‘i bá»™ nhá»› trá»‘ng, Ä‘á»ƒ sau nÃ y cÃ³ thá»ƒ quáº£n lÃ½ vÃ  phÃ¢n bá»• láº¡i. QuÃ¡ trÃ¬nh nÃ y máº¥t má»™t khoáº£ng thá»i gian nháº¥t Ä‘á»‹nh vÃ  cÃ³ thá»ƒ lÃ m cháº·n á»©ng dá»¥ng hiá»‡n táº¡i Ä‘ang giáº£i phÃ³ng bá»™ nhá»›.</p>
<p>Do Ä‘Ã³, náº¿u giáº£i phÃ³ng má»™t lÆ°á»£ng lá»›n bá»™ nhá»› cÃ¹ng má»™t lÃºc, thá»i gian thá»±c hiá»‡n cÃ¡c thao tÃ¡c trÃªn danh sÃ¡ch khá»‘i bá»™ nhá»› trá»‘ng sáº½ tÄƒng lÃªn. Äiá»u nÃ y cÃ³ thá»ƒ dáº«n Ä‘áº¿n cháº·n trong quÃ¡ trÃ¬nh chÃ­nh cá»§a Redis. Náº¿u quÃ¡ trÃ¬nh chÃ­nh bá»‹ cháº·n, cÃ¡c yÃªu cáº§u khÃ¡c cÃ³ thá»ƒ gáº·p pháº£i váº¥n Ä‘á» vÆ°á»£t thá»i gian, dáº«n Ä‘áº¿n tÃ¬nh tráº¡ng káº¿t ná»‘i Redis bá»‹ tiÃªu tá»‘n háº¿t vÃ  gÃ¢y ra cÃ¡c váº¥n Ä‘á» khÃ¡c.</p>
<p>VÃ¬ váº­y, khi thá»±c hiá»‡n hÃ nh Ä‘á»™ng xÃ³a key lá»›n trong Redis, chÃºng ta cáº§n pháº£i cáº©n tháº­n. DÆ°á»›i Ä‘Ã¢y lÃ  hai phÆ°Æ¡ng phÃ¡p Ä‘á»ƒ lÃ m Ä‘iá»u nÃ y:</p>
<ul>
<li>XÃ³a key theo tá»«ng Ä‘á»£t (phÃ¢n lÃ´ xÃ³a)</li>
<li>XÃ³a key báº¥t Ä‘á»“ng bá»™ (Redis phiÃªn báº£n 4.0 trá»Ÿ lÃªn)</li>
</ul>
<h4>XoÃ¡ theo Ä‘á»£t</h4>
<p><strong>1. XÃ³a Hash lá»›n:</strong></p>
<ul>
<li>Sá»­ dá»¥ng lá»‡nh <code>hscan</code> Ä‘á»ƒ láº¥y 100 trÆ°á»ng (fields) má»—i láº§n.</li>
<li>Sau Ä‘Ã³ sá»­ dá»¥ng lá»‡nh <code>hdel</code> Ä‘á»ƒ xÃ³a tá»«ng trÆ°á»ng má»™t.</li>
</ul>
<div class="language-python" data-ext="python" data-title="python"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> redis</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">def</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> del_large_hash</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">():</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    r </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> redis.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">StrictRedis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">host</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">'redis-host1'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">port</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66">6379</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    large_hash_key </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> "xxx"</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  # TÃªn key hash lá»›n cáº§n xÃ³a</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    cursor </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> '0'</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    while</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> cursor </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        cursor, data </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> r.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">hscan</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(large_hash_key, </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">cursor</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">cursor, </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">count</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> field, value </span><span style="color:#C678DD;--shiki-dark:#C678DD">in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> data.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">items</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">():</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            r.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">hdel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(large_hash_key, field)</span></span></code></pre>
</div><p><strong>2. XÃ³a List lá»›n:</strong></p>
<ul>
<li>Sá»­ dá»¥ng lá»‡nh <code>ltrim</code> Ä‘á»ƒ má»—i láº§n chá»‰ giá»¯ láº¡i má»™t pháº§n nhá» cá»§a list.</li>
</ul>
<div class="language-python" data-ext="python" data-title="python"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> redis</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">def</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> del_large_list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">():</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    r </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> redis.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">StrictRedis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">host</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">'redis-host1'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">port</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66">6379</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    large_list_key </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> 'xxx'</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  # TÃªn key list lá»›n cáº§n xÃ³a</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    while</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> r.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">llen</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(large_list_key) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        r.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ltrim</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(large_list_key, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-</span><span style="color:#D19A66;--shiki-dark:#D19A66">101</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)  </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># Chá»‰ giá»¯ láº¡i 100 pháº§n tá»­ cuá»‘i cÃ¹ng cá»§a list</span></span></code></pre>
</div><p><strong>3. XÃ³a Set lá»›n:</strong></p>
<ul>
<li>Sá»­ dá»¥ng lá»‡nh <code>sscan</code> Ä‘á»ƒ quÃ©t tá»«ng pháº§n tá»­ cá»§a set (100 pháº§n tá»­ má»—i láº§n).</li>
<li>Sá»­ dá»¥ng lá»‡nh <code>srem</code> Ä‘á»ƒ xÃ³a tá»«ng pháº§n tá»­ má»™t.</li>
</ul>
<div class="language-python" data-ext="python" data-title="python"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> redis</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">def</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> del_large_set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">():</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    r </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> redis.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">StrictRedis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">host</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">'redis-host1'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">port</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66">6379</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    large_set_key </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> 'xxx'</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">   # TÃªn key set lá»›n cáº§n xÃ³a</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    cursor </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> '0'</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    while</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> cursor </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        cursor, data </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> r.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">sscan</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(large_set_key, </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">cursor</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">cursor, </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">count</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> member </span><span style="color:#C678DD;--shiki-dark:#C678DD">in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> data:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            r.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">srem</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(large_set_key, member)</span></span></code></pre>
</div><p><strong>4. XÃ³a Sorted Set lá»›n:</strong></p>
<ul>
<li>Sá»­ dá»¥ng lá»‡nh <code>zremrangebyrank</code> Ä‘á»ƒ xÃ³a má»™t lÆ°á»£ng pháº§n tá»­ hÃ ng Ä‘áº§u cá»§a Sorted Set.</li>
</ul>
<div class="language-python" data-ext="python" data-title="python"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> redis</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">def</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> del_large_sortedset</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">():</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    r </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> redis.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">StrictRedis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">host</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">'redis-host1'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic">port</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66">6379</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    large_sortedset_key </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379"> 'xxx'</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic">  # TÃªn key Sorted Set lá»›n cáº§n xÃ³a</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    while</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> r.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">zcard</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(large_sortedset_key) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        r.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">zremrangebyrank</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(large_sortedset_key, </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">99</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)  </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic"># XÃ³a 100 pháº§n tá»­ Ä‘áº§u tiÃªn cá»§a Sorted Set</span></span></code></pre>
</div><h4>XoÃ¡ báº¥t Ä‘á»“ng bá»™</h4>
<p>Tá»« phiÃªn báº£n Redis 4.0 trá»Ÿ Ä‘i, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng <strong>xÃ³a báº¥t Ä‘á»“ng bá»™</strong> báº±ng cÃ¡ch sá»­ dá»¥ng lá»‡nh <strong>unlink</strong> thay vÃ¬ <strong>del</strong> Ä‘á»ƒ xÃ³a cÃ¡c key.</p>
<p>Khi Ä‘Ã³, Redis sáº½ Ä‘Æ°a key nÃ y vÃ o má»™t luá»“ng báº¥t Ä‘á»“ng bá»™ Ä‘á»ƒ thá»±c hiá»‡n xÃ³a, Ä‘iá»u nÃ y giÃºp trÃ¡nh cháº·n luá»“ng chÃ­nh.</p>
<p>NgoÃ i viá»‡c sá»­ dá»¥ng lá»‡nh unlink Ä‘á»ƒ thá»±c hiá»‡n xÃ³a báº¥t Ä‘á»“ng bá»™, báº¡n cÅ©ng cÃ³ thá»ƒ cáº¥u hÃ¬nh tham sá»‘ Ä‘á»ƒ tá»± Ä‘á»™ng thá»±c hiá»‡n xÃ³a báº¥t Ä‘á»“ng bá»™ trong má»™t sá»‘ trÆ°á»ng há»£p cá»¥ thá»ƒ.</p>
<p>CÃ³ tá»•ng cá»™ng 4 cÃ i Ä‘áº·t máº·c Ä‘á»‹nh nhÆ° sau:</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>lazyfree-lazy-eviction no</span></span>
<span class="line"><span>lazyfree-lazy-expire no</span></span>
<span class="line"><span>lazyfree-lazy-server-del</span></span>
<span class="line"><span>noslave-lazy-flush no</span></span></code></pre>
</div><ul>
<li>
<p><strong>lazyfree-lazy-eviction</strong>: ÄÆ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh liá»‡u Redis cÃ³ nÃªn kÃ­ch hoáº¡t cÆ¡ cháº¿ xÃ³a lÆ°á»i biáº¿ng khi bá»™ nhá»› vÆ°á»£t quÃ¡ giá»›i háº¡n maxmemory hay khÃ´ng.</p>
</li>
<li>
<p><strong>lazyfree-lazy-expire</strong>: XÃ¡c Ä‘á»‹nh liá»‡u Redis cÃ³ nÃªn kÃ­ch hoáº¡t cÆ¡ cháº¿ xÃ³a lÆ°á»i biáº¿ng cho cÃ¡c key háº¿t háº¡n khÃ´ng.</p>
</li>
<li>
<p><strong>lazyfree-lazy-server-del</strong>: Má»™t sá»‘ lá»‡nh khi xá»­ lÃ½ cÃ¡c key Ä‘Ã£ tá»“n táº¡i, vÃ­ dá»¥ nhÆ° lá»‡nh rename, náº¿u key Ä‘Ã­ch Ä‘Ã£ tá»“n táº¡i thÃ¬ Redis sáº½ trÆ°á»›c tiÃªn xÃ³a key Ä‘Ã­ch nÃ y. Náº¿u key nÃ y lÃ  má»™t big key, viá»‡c xÃ³a cÃ³ thá»ƒ gÃ¢y ra váº¥n Ä‘á» cháº·n. CÃ i Ä‘áº·t nÃ y xÃ¡c Ä‘á»‹nh liá»‡u Redis cÃ³ nÃªn kÃ­ch hoáº¡t cÆ¡ cháº¿ xÃ³a lÆ°á»i biáº¿ng trong trÆ°á»ng há»£p nÃ y hay khÃ´ng.</p>
</li>
<li>
<p><strong>noslave-lazy-flush</strong>: Äá»‘i vá»›i slave (nÃºt con), khi nÃ³ táº£i tá»‡p RDB cá»§a master thÃ¬ trÆ°á»›c Ä‘Ã³ nÃ³ sáº½ thá»±c hiá»‡n lá»‡nh flushall Ä‘á»ƒ xÃ³a dá»¯ liá»‡u cá»§a nÃ³. CÃ i Ä‘áº·t nÃ y xÃ¡c Ä‘á»‹nh liá»‡u Redis cÃ³ nÃªn kÃ­ch hoáº¡t cÆ¡ cháº¿ xÃ³a lÆ°á»i biáº¿ng trong trÆ°á»ng há»£p nÃ y hay khÃ´ng.</p>
</li>
</ul>
<p>Äá» xuáº¥t nÃªn kÃ­ch hoáº¡t cÃ¡c cÃ i Ä‘áº·t nhÆ° lazyfree-lazy-eviction, lazyfree-lazy-expire, lazyfree-lazy-server-del Ä‘á»ƒ cáº£i thiá»‡n hiá»‡u suáº¥t thá»±c thi cá»§a luá»“ng chÃ­nh trong Redis.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Redis Advanced Data Types</title>
      <link>https://vanhung4499.github.io/database/redis/advanced-data-types.html</link>
      <guid>https://vanhung4499.github.io/database/redis/advanced-data-types.html</guid>
      <source url="https://vanhung4499.github.io/rss.xml">Redis Advanced Data Types</source>
      <description>Redis Advanced Data Types Redis há»— trá»£ cÃ¡c kiá»ƒu dá»¯ liá»‡u nÃ¢ng cao nhÆ° BitMap, HyperLogLog, GEO vÃ  Stream. Hiá»ƒu Ä‘Æ°á»£c Ä‘áº·c tÃ­nh cá»§a cÃ¡c kiá»ƒu dá»¯ liá»‡u nÃ y vÃ  Ã¡p dá»¥ng linh hoáº¡t vÃ  hiá»‡u...</description>
      <category>redis</category>
      <pubDate>Fri, 28 Jun 2024 15:54:38 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Redis há»— trá»£ cÃ¡c kiá»ƒu dá»¯ liá»‡u nÃ¢ng cao nhÆ° BitMap, HyperLogLog, GEO vÃ  Stream. Hiá»ƒu Ä‘Æ°á»£c Ä‘áº·c tÃ­nh cá»§a cÃ¡c kiá»ƒu dá»¯ liá»‡u nÃ y vÃ  Ã¡p dá»¥ng linh hoáº¡t vÃ  hiá»‡u quáº£ vÃ o tá»«ng ká»‹ch báº£n nghiá»‡p vá»¥ cá»¥ thá»ƒ lÃ  ráº¥t quan trá»ng khi sá»­ dá»¥ng Redis Ä‘á»ƒ mÃ´ hÃ¬nh hÃ³a dá»¯ liá»‡u.</p>
<h2>BitMap</h2>
<h3>Giá»›i thiá»‡u vá» BitMap</h3>
<p>BitMap, nhÆ° tÃªn gá»i, lÃ  má»™t chuá»—i liÃªn tá»¥c cÃ¡c sá»‘ nhá»‹ phÃ¢n (0 vÃ  1) trong Ä‘Ã³ cÃ¡c pháº§n tá»­ Ä‘Æ°á»£c truy cáº­p báº±ng cÃ¡c offset. VÃ¬ bit lÃ  Ä‘Æ¡n vá»‹ nhá» nháº¥t trong mÃ¡y tÃ­nh, viá»‡c sá»­ dá»¥ng BitMap Ä‘á»ƒ lÆ°u trá»¯ cÃ³ thá»ƒ <strong>tiáº¿t kiá»‡m ráº¥t nhiá»u khÃ´ng gian</strong>, Ä‘áº·c biá»‡t phÃ¹ há»£p cho cÃ¡c ká»‹ch báº£n thá»‘ng kÃª nhá»‹ phÃ¢n vá»›i táº­p dá»¯ liá»‡u lá»›n. VÃ­ dá»¥, trong má»™t há»‡ thá»‘ng nÆ¡i mÃ  ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c biá»ƒu diá»…n báº±ng cÃ¡c ID ngÆ°á»i dÃ¹ng tÄƒng dáº§n, BitMap cÃ³ thá»ƒ lÆ°u trá»¯ hiá»‡u quáº£ tráº¡ng thÃ¡i Ä‘Äƒng nháº­p cá»§a tá»«ng ngÆ°á»i dÃ¹ng. Vá»›i BitMap, há»‡ thá»‘ng cÃ³ thá»ƒ xá»­ lÃ½ Ä‘áº¿n 4 tá»· ngÆ°á»i dÃ¹ng (khoáº£ng $$2^{32}$$), chá»‰ cáº§n 512 MB bá»™ nhá»› Ä‘á»ƒ lÆ°u trá»¯ tráº¡ng thÃ¡i Ä‘Äƒng nháº­p.</p>
<h3>Thá»±c hiá»‡n BitMap</h3>
<p>Trong thá»±c táº¿, <strong>BitMap khÃ´ng pháº£i lÃ  má»™t cáº¥u trÃºc dá»¯ liá»‡u Ä‘á»™c láº­p mÃ  lÃ  má»™t táº­p há»£p cÃ¡c phÃ©p toÃ¡n bit Ä‘Æ°á»£c thá»±c hiá»‡n trÃªn chuá»—i String</strong>.</p>
<p>Vá»›i Redis, cÃ¡c chuá»—i lÃ  an toÃ n cho dá»¯ liá»‡u nhá»‹ phÃ¢n vÃ  cÃ³ thá»ƒ lÆ°u trá»¯ Ä‘áº¿n 512 MB Ä‘á»™ dÃ i. Do Ä‘Ã³, BitMap cho phÃ©p thiáº¿t láº­p Ä‘áº¿n $$2^{32}$$ bit khÃ¡c nhau, giÃºp quáº£n lÃ½ dá»¯ liá»‡u nhá»‹ phÃ¢n quy mÃ´ lá»›n má»™t cÃ¡ch hiá»‡u quáº£ trong Redis, táº­n dá»¥ng kháº£ nÄƒng lÆ°u trá»¯ vÃ  thao tÃ¡c tá»‘i Æ°u cá»§a nÃ³.</p>
<h3>CÃ¡c Lá»‡nh BitMap</h3>
<p>| Lá»‡nh     | HÃ nh Ä‘á»™ng                                                |<br>
|</p>
]]></content:encoded>
    </item>
  </channel>
</rss>