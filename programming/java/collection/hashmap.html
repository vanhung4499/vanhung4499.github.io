<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.12" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.46" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://vanhung4499.github.io/programming/java/collection/hashmap.html"><meta property="og:site_name" content="vanhung4499"><meta property="og:title" content="Java HashMap"><meta property="og:description" content="T√¨m hi·ªÉu chi ti·∫øt v·ªÅ HashMap trong Java (k√®m m√£ ngu·ªìn) Trong b√†i vi·∫øt n√†y, ch√∫ng ta s·∫Ω ƒëi s√¢u v√†o t√¨m hi·ªÉu v·ªÅ HashMap trong Java, bao g·ªìm nguy√™n l√Ω ph∆∞∆°ng ph√°p bƒÉm, c∆° ch·∫ø m·ªü r·ªô..."><meta property="og:type" content="article"><meta property="og:image" content="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220021653.png"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2024-06-26T14:44:55.000Z"><meta property="article:author" content="Hung Nguyen"><meta property="article:tag" content="java"><meta property="article:modified_time" content="2024-06-26T14:44:55.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Java HashMap","image":["https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220021653.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220021792.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220057969.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220126917.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220131276.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220139193.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220140253.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220154191.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220201995.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622020336.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622020427.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622020440.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622020450.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622021038.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622021108.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622021118.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220126917.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622021926.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622021953.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622022021.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622022101.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622022117.png","https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622022144.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/collection/hashmap-thread-nosafe-08.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/collection/hashmap-thread-nosafe-09.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/collection/hashmap-thread-nosafe-10.png","https://cdn.tobebetterjavaer.com/stutymore/collection-20240326085630.png"],"dateModified":"2024-06-26T14:44:55.000Z","author":[{"@type":"Person","name":"Hung Nguyen","url":"https://vanhung4499.github.io","email":"vanhung4499@gmail.com"}]}</script><meta name="robots" content="all"><meta name="author" content="Hung Nguyen"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><meta name="keywords" content="Java, JVM, MySQL, Spring, Redis, MyBatis, SpringBoot, Frontend, Backend, Fullstack, DevOps, Hackintosh"><meta name="apple-mobile-web-app-capable" content="yes"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><title>Java HashMap | vanhung4499</title><meta name="description" content="T√¨m hi·ªÉu chi ti·∫øt v·ªÅ HashMap trong Java (k√®m m√£ ngu·ªìn) Trong b√†i vi·∫øt n√†y, ch√∫ng ta s·∫Ω ƒëi s√¢u v√†o t√¨m hi·ªÉu v·ªÅ HashMap trong Java, bao g·ªìm nguy√™n l√Ω ph∆∞∆°ng ph√°p bƒÉm, c∆° ch·∫ø m·ªü r·ªô...">
    <link rel="preload" href="/assets/style-CQc2aIVV.css" as="style"><link rel="stylesheet" href="/assets/style-CQc2aIVV.css">
    <link rel="modulepreload" href="/assets/app-C-_dXKvP.js"><link rel="modulepreload" href="/assets/hashmap.html-Bpd2bqsu.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="https://theme-hope-assets.vuejs.press/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">vanhung4499</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="Home"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->Home<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog.html" aria-label="Blog"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-blog" style=""></span><!--]-->Blog<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/dsa/" aria-label="Algorithm"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-lightbulb" style=""></span><!--]-->Algorithm<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Programming"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-code" style=""></span>Programming<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/programming/java/" aria-label="Java"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-java" style=""></span><!--]-->Java<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/golang/" aria-label="Golang"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-golang" style=""></span><!--]-->Golang<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/js/" aria-label="JavaScript"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-js" style=""></span><!--]-->JavaScript<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/ts/" aria-label="TypeScript"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-t" style=""></span><!--]-->TypeScript<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/python/" aria-label="Python"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-python" style=""></span><!--]-->Python<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Database"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-database" style=""></span>Database<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/sql/" aria-label="SQL"><!---->SQL<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/mysql/" aria-label="MySQL"><!---->MySQL<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/mongodb/" aria-label="MongoDB"><!---->MongoDB<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/redis/" aria-label="Redis"><!---->Redis<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/elasticsearch/" aria-label="Elasticsearch"><!---->Elasticsearch<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Framework"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-server" style=""></span>Framework<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/backend/spring/" aria-label="Spring"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-java" style=""></span><!--]-->Spring<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/backend/nestjs/" aria-label="NestJS"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-js" style=""></span><!--]-->NestJS<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/backend/gin/" aria-label="Gin"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-golang" style=""></span><!--]-->Gin<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="DevOps"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-tools" style=""></span>DevOps<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/docker/" aria-label="Docker"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-docker" style=""></span><!--]-->Docker<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/kubernetes/" aria-label="Kubernetes"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-kubernetes" style=""></span><!--]-->Kubernetes<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/jenkins/" aria-label="Jenkins"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-jenkins" style=""></span><!--]-->Jenkins<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/git/" aria-label="Git"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-github" style=""></span><!--]-->Git<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/linux/" aria-label="Linux"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-linux" style=""></span><!--]-->Linux<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Design"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-paint-brush" style=""></span>Design<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/design/design-pattern/" aria-label="Design Pattern"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-paint-brush" style=""></span><!--]-->Design Pattern<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/design/system-design/" aria-label="System Design"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-gear" style=""></span><!--]-->System Design<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/projects/" aria-label="Projects"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-project-diagram" style=""></span><!--]-->Projects<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="About"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-circle-info" style=""></span>About<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/about/me.html" aria-label="Me"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-circle-info" style=""></span><!--]-->Me<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/about/" aria-label="Page"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-file" style=""></span><!--]-->Page<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/vanhung4499/vanhung4499.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">Search</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/programming/java/" aria-label="Java"><!---->Java<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Advanced</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Basic</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><a class="route-link route-link-active auto-link vp-sidebar-title no-external-link-icon" href="/programming/java/collection/" aria-label="Collection"><!---->Collection<!----></a><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/programming/java/collection/overview.html" aria-label="Collection Overview"><!---->Collection Overview<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/programming/java/collection/arraylist.html" aria-label="Java ArrayList"><!---->Java ArrayList<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/programming/java/collection/linkedlist.html" aria-label="Java LinkedList"><!---->Java LinkedList<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/programming/java/collection/stack.html" aria-label="Java Stack"><!---->Java Stack<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link vp-sidebar-page active" href="/programming/java/collection/hashmap.html" aria-label="Java HashMap"><!---->Java HashMap<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/programming/java/collection/linkedhashmap.html" aria-label="LinkedHashMap"><!---->LinkedHashMap<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/programming/java/collection/arraydeque.html" aria-label="/programming/java/collection/arraydeque.html"><!---->/programming/java/collection/arraydeque.html<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/programming/java/collection/comparable-comparator.html" aria-label="/programming/java/collection/comparable-comparator.html"><!---->/programming/java/collection/comparable-comparator.html<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/programming/java/collection/fail-fast.html" aria-label="/programming/java/collection/fail-fast.html"><!---->/programming/java/collection/fail-fast.html<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/programming/java/collection/iterator-iterable.html" aria-label="/programming/java/collection/iterator-iterable.html"><!---->/programming/java/collection/iterator-iterable.html<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/programming/java/collection/list-war.html" aria-label="/programming/java/collection/list-war.html"><!---->/programming/java/collection/list-war.html<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/programming/java/collection/priorityqueue.html" aria-label="/programming/java/collection/priorityqueue.html"><!---->/programming/java/collection/priorityqueue.html<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/programming/java/collection/time-complexity.html" aria-label="/programming/java/collection/time-complexity.html"><!---->/programming/java/collection/time-complexity.html<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/programming/java/collection/treemap.html" aria-label="/programming/java/collection/treemap.html"><!---->/programming/java/collection/treemap.html<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Concurency</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">IO</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/programming/java/JavaSE%20MOC.html" aria-label="JavaSE MOC"><!---->JavaSE MOC<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">JVM</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Java HashMap</h1><div class="page-info"><span class="page-author-info" aria-label="Authorüñä" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://vanhung4499.github.io" target="_blank" rel="noopener noreferrer">Hung Nguyen</a></span><span property="author" content="Hung Nguyen"></span></span><span class="page-category-info" aria-label="Categoryüåà" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color8 clickable" role="navigation">java</span><!--]--><meta property="articleSection" content="java"></span><span class="page-date-info" aria-label="Writing DateüìÖ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-06-26T14:44:55.000Z"></span><!----><span class="page-tag-info" aria-label="Tagüè∑" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8 clickable" role="navigation">java</span><!--]--><meta property="keywords" content="java"></span><span class="page-reading-time-info" aria-label="Reading Time‚åõ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 53 min</span><meta property="timeRequired" content="PT53M"></span><span class="page-word-info" aria-label="Wordsüî†" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon" name="word"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>About 15800 words</span><meta property="wordCount" content="15800"></span><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_01-nguyen-ly-cua-phuong-thuc-hash">01. Nguy√™n l√Ω c·ªßa ph∆∞∆°ng th·ª©c hash</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_02-co-che-mo-rong-cua-hashmap">02. C∆° ch·∫ø m·ªü r·ªông c·ªßa HashMap</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_03-tai-sao-he-so-tai-lai-la-0-75">03. T·∫°i sao h·ªá s·ªë t·∫£i l·∫°i l√† 0,75?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_04-van-ƒëe-an-toan-ƒëa-luong">04. V·∫•n ƒë·ªÅ an to√†n ƒëa lu·ªìng</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_05-tom-tat">05. T√≥m t·∫Øt</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="tim-hieu-chi-tiet-ve-hashmap-trong-java-kem-ma-nguon" tabindex="-1"><a class="header-anchor" href="#tim-hieu-chi-tiet-ve-hashmap-trong-java-kem-ma-nguon"><span>T√¨m hi·ªÉu chi ti·∫øt v·ªÅ HashMap trong Java (k√®m m√£ ngu·ªìn)</span></a></h1><p>Trong b√†i vi·∫øt n√†y, ch√∫ng ta s·∫Ω ƒëi s√¢u v√†o t√¨m hi·ªÉu v·ªÅ HashMap trong Java, bao g·ªìm nguy√™n l√Ω ph∆∞∆°ng ph√°p bƒÉm, c∆° ch·∫ø m·ªü r·ªông c·ªßa HashMap, t·∫°i sao h·ªá s·ªë t·∫£i c·ªßa HashMap l√† 0.75 m√† kh√¥ng ph·∫£i l√† 0.6 ho·∫∑c 0.8, v√† t·∫°i sao HashMap kh√¥ng an to√†n ƒë·ªëi v·ªõi lu·ªìng, t√≥m l·∫°i, h·∫ßu h·∫øt c√°c c√¢u h·ªèi ph·ªèng v·∫•n v·ªÅ HashMap s·∫Ω ƒë∆∞·ª£c gi·∫£i th√≠ch trong b√†i vi·∫øt n√†y.</p><p>HashMap l√† m·ªôt trong nh·ªØng c·∫•u tr√∫c d·ªØ li·ªáu ph·ªï bi·∫øn trong Java, ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ l∆∞u tr·ªØ c√°c c·∫∑p kh√≥a-gi√° tr·ªã. Trong HashMap, m·ªói kh√≥a ƒë∆∞·ª£c √°nh x·∫° ƒë·∫øn m·ªôt gi√° tr·ªã duy nh·∫•t, cho ph√©p truy c·∫≠p nhanh ƒë·∫øn gi√° tr·ªã t∆∞∆°ng ·ª©ng v·ªõi kh√≥a v·ªõi ƒë·ªô ph·ª©c t·∫°p th·ªùi gian l√† O(1).</p><p>HashMap kh√¥ng ch·ªâ ƒë∆∞·ª£c s·ª≠ d·ª•ng th∆∞·ªùng xuy√™n trong ph√°t tri·ªÉn h√†ng ng√†y m√† c√≤n l√† m·ªôt trong nh·ªØng ƒë·ªëi t∆∞·ª£ng quan tr·ªçng trong c√°c cu·ªôc ph·ªèng v·∫•n.</p><p>D∆∞·ªõi ƒë√¢y l√† m·ªôt s·ªë thao t√°c c∆° b·∫£n v·ªõi HashMap:</p><p><strong>1) Th√™m ph·∫ßn t·ª≠:</strong></p><p>Th√™m m·ªôt c·∫∑p kh√≥a-gi√° tr·ªã v√†o HashMap b·∫±ng c√°ch s·ª≠ d·ª•ng ph∆∞∆°ng th·ª©c <code>put()</code>:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">HashMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> Integer</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> map </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> HashMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">()</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Tom&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#005CC5;--shiki-dark:#D19A66;">20</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Jerry&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#005CC5;--shiki-dark:#D19A66;">25</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2) X√≥a ph·∫ßn t·ª≠:</strong></p><p>X√≥a m·ªôt c·∫∑p kh√≥a-gi√° tr·ªã t·ª´ HashMap b·∫±ng ph∆∞∆°ng th·ª©c <code>remove()</code>:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">remove</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Tom&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>3) S·ª≠a ƒë·ªïi ph·∫ßn t·ª≠:</strong></p><p>ƒê·ªÉ s·ª≠a ƒë·ªïi gi√° tr·ªã c·ªßa m·ªôt kh√≥a trong HashMap, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng l·∫°i ph∆∞∆°ng th·ª©c <code>put()</code>, v√¨ m·ªói kh√≥a l√† duy nh·∫•t:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Tom&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#005CC5;--shiki-dark:#D19A66;">30</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>4) T√¨m ki·∫øm ph·∫ßn t·ª≠:</strong></p><p>ƒê·ªÉ l·∫•y gi√° tr·ªã t·ª´ HashMap, s·ª≠ d·ª•ng ph∆∞∆°ng th·ª©c <code>get()</code>:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> age </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Tom&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Trong c√°c ·ª©ng d·ª•ng th·ª±c t·∫ø, HashMap th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ cache, ch·ªâ m·ª•c v√† c√°c t√¨nh hu·ªëng t∆∞∆°ng t·ª±. V√≠ d·ª•, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng HashMap ƒë·ªÉ l∆∞u tr·ªØ th√¥ng tin ng∆∞·ªùi d√πng v·ªõi ID l√†m kh√≥a v√† th√¥ng tin ng∆∞·ªùi d√πng l√†m gi√° tr·ªã, ho·∫∑c l∆∞u tr·ªØ ch·ªâ m·ª•c t√†i li·ªáu v·ªõi t·ª´ kh√≥a l√† t·ª´ kho√° v√† danh s√°ch ID t√†i li·ªáu l√†m gi√° tr·ªã ƒë·ªÉ t√¨m ki·∫øm nhanh t√†i li·ªáu.</p><p>Nguy√™n t·∫Øc tri·ªÉn khai c·ªßa HashMap d·ª±a tr√™n b·∫£ng bƒÉm. L·ªõp d∆∞·ªõi c√πng c·ªßa n√≥ l√† m·ªôt m·∫£ng. M·ªói v·ªã tr√≠ c·ªßa m·∫£ng c√≥ th·ªÉ l√† m·ªôt danh s√°ch li√™n k·∫øt ho·∫∑c m·ªôt c√¢y ƒë·ªè ƒëen ho·∫∑c c√≥ th·ªÉ ch·ªâ l√† m·ªôt c·∫∑p kh√≥a-gi√° tr·ªã (s·∫Ω ƒë∆∞·ª£c th·∫£o lu·∫≠n sau). Khi th√™m c·∫∑p key-value, HashMap s·∫Ω t√≠nh to√°n ch·ªâ s·ªë m·∫£ng (ch·ªâ m·ª•c) t∆∞∆°ng ·ª©ng v·ªõi key d·ª±a tr√™n gi√° tr·ªã bƒÉm c·ªßa key, sau ƒë√≥ ch√®n c·∫∑p key-value v√†o v·ªã tr√≠ t∆∞∆°ng ·ª©ng.</p><p>Khi tra c·ª©u m·ªôt gi√° tr·ªã theo kh√≥a, HashMap c≈©ng s·∫Ω t√≠nh ch·ªâ s·ªë m·∫£ng d·ª±a tr√™n gi√° tr·ªã bƒÉm c·ªßa kh√≥a v√† t√¨m gi√° tr·ªã t∆∞∆°ng ·ª©ng.</p><h3 id="_01-nguyen-ly-cua-phuong-thuc-hash" tabindex="-1"><a class="header-anchor" href="#_01-nguyen-ly-cua-phuong-thuc-hash"><span>01. Nguy√™n l√Ω c·ªßa ph∆∞∆°ng th·ª©c hash</span></a></h3><p>Sau khi hi·ªÉu ƒë∆°n gi·∫£n v·ªÅ HashMap, ch√∫ng ta s·∫Ω b√†n lu·∫≠n v·ªÅ c√¢u h·ªèi ƒë·∫ßu ti√™n: nguy√™n l√Ω c·ªßa ph∆∞∆°ng th·ª©c hash, ƒëi·ªÅu n√†y s·∫Ω gi√∫p b·∫°n hi·ªÉu r√µ h∆°n v·ªÅ HashMap.</p><p>H√£y xem m√£ ngu·ªìn c·ªßa ph∆∞∆°ng th·ª©c hash trong HashMap c·ªßa JDK 8:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">static</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> final</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> int</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> hash</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">Object</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> h</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    return</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (key </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#C678DD;">?</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> :</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">hashCode</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">^</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;&gt;&gt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 16</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ƒêo·∫°n code n√†y ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ l√†m g√¨?</p><p><strong>N√≥ ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ x·ª≠ l√Ω gi√° tr·ªã hashCode c·ªßa key, ƒë·ªÉ ƒë·∫°t ƒë∆∞·ª£c gi√° tr·ªã bƒÉm cu·ªëi c√πng.</strong></p><p>L√†m sao ƒë·ªÉ hi·ªÉu c√¢u n√†y? ƒê·ª´ng v·ªôi v√†ng.</p><p>H√£y t·∫°o m·ªôt HashMap m·ªõi v√† th√™m m·ªôt ph·∫ßn t·ª≠ b·∫±ng ph∆∞∆°ng th·ª©c put.</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">HashMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> map </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> HashMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">()</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;chenmo&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Ê≤âÈªò&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>H√£y xem m√£ ngu·ªìn c·ªßa ph∆∞∆°ng th·ª©c put.</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">public</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> V</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> put</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> V</span><span style="color:#24292E;--shiki-dark:#E06C75;"> value) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    return</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> putVal</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">hash</span><span style="color:#24292E;--shiki-dark:#E06C75;">(key)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> value</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> false</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> true</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>B·∫°n ƒë√£ nh√¨n th·∫•y s·ª± xu·∫•t hi·ªán c·ªßa ph∆∞∆°ng th·ª©c hash ch∆∞a?</p><h4 id="tac-dung-cua-phuong-thuc-hash" tabindex="-1"><a class="header-anchor" href="#tac-dung-cua-phuong-thuc-hash"><span>T√°c d·ª•ng c·ªßa ph∆∞∆°ng th·ª©c hash</span></a></h4><p>ƒê·∫ßu ti√™n, nh·ªõ r·∫±ng HashMap ƒë∆∞·ª£c tri·ªÉn khai b·∫±ng m·∫£ng v√† k√≠ch th∆∞·ªõc ban ƒë·∫ßu c·ªßa n√≥ l√† 16 (ch√∫ng ta s·∫Ω th·∫£o lu·∫≠n v·ªÅ ƒëi·ªÅu n√†y sau).</p><p>HashMap khi th√™m ph·∫ßn t·ª≠ ƒë·∫ßu ti√™n, c·∫ßn x√°c ƒë·ªãnh v·ªã tr√≠ (index) trong m·∫£ng c√≥ k√≠ch th∆∞·ªõc l√† 16 d·ª±a tr√™n m√£ bƒÉm (hash code) c·ªßa key. Nh∆∞ th·∫ø l√†m sao ƒë·ªÉ x√°c ƒë·ªãnh v·ªã tr√≠?</p><p>ƒê·ªÉ gi√∫p b·∫°n d·ªÖ hi·ªÉu h∆°n, m√¨nh ƒë√£ v·∫Ω m·ªôt bi·ªÉu ƒë·ªì, c√≥ 16 √¥ vu√¥ng (b·∫°n c√≥ th·ªÉ h√¨nh dung ch√∫ng nh∆∞ c√°c th√πng), m·ªói √¥ c√≥ m·ªôt s·ªë th·ª© t·ª± t∆∞∆°ng ·ª©ng v·ªõi ch·ªâ s·ªë (index) trong m·∫£ng c√≥ k√≠ch th∆∞·ªõc 16.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220021653.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>B√¢y gi·ªù, ch√∫ng ta mu·ªën ƒë·∫∑t c·∫∑p key l√† &quot;chenmo&quot; v√† value l√† &quot;Ê≤âÈªò&quot; v√†o 16 √¥ n√†y. L√†m sao ƒë·ªÉ x√°c ƒë·ªãnh v·ªã tr√≠ (index)?</p><p>T√¥i s·∫Ω ti·∫øt l·ªô k·∫øt qu·∫£, v·ªã tr√≠ t√≠nh to√°n c·ªßa key &quot;chenmo&quot; l√† bao nhi√™u?</p><p>ƒê√°p √°n l√† 8, ƒëi·ªÅu n√†y c√≥ nghƒ©a l√† <code>map.put(&quot;chenmo&quot;, &quot;Ê≤âÈªò&quot;)</code> s·∫Ω ƒë·∫∑t c·∫∑p key l√† &quot;chenmo&quot; v√† value l√† &quot;Ê≤âÈªò&quot; v√†o v·ªã tr√≠ c√≥ index l√† 8 (c≈©ng l√† th√πng c√≥ index l√† 8).</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220021792.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Nh∆∞ v·∫≠y, b·∫°n s·∫Ω c√≥ m·ªôt kh√°i ni·ªám r√µ r√†ng h∆°n v·ªÅ c√°ch HashMap l∆∞u tr·ªØ c√°c c·∫∑p key-value (ph·∫ßn t·ª≠). Ph∆∞∆°ng th·ª©c hash c√≥ vai tr√≤ quan tr·ªçng trong vi·ªác t√≠nh to√°n v·ªã tr√≠ c·ªßa c·∫∑p key-value.</p><p>Quay l·∫°i ph∆∞∆°ng th·ª©c hash:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">static</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> final</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> int</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> hash</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">Object</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> h</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    return</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (key </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#C678DD;">?</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> :</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">hashCode</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">^</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;&gt;&gt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 16</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>D∆∞·ªõi ƒë√¢y l√† m·ªôt s·ªë l·ªùi gi·∫£i th√≠ch cho ph∆∞∆°ng th·ª©c n√†y:</p><ul><li>Tham s·ªë key: ƒê√≥ l√† key m√† ch√∫ng ta mu·ªën t√≠nh m√£ bƒÉm c·ªßa n√≥.</li><li><code>key == null ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16)</code>: ƒê√¢y l√† to√°n t·ª≠ ba ng√¥i, n·∫øu key l√† null th√¨ m√£ bƒÉm s·∫Ω l√† 0 (nghƒ©a l√† n√≥ s·∫Ω ƒë∆∞·ª£c ƒë·∫∑t v√†o v·ªã tr√≠ ƒë·∫ßu ti√™n); n·∫øu kh√¥ng, n√≥ s·∫Ω t√≠nh to√°n m√£ bƒÉm c·ªßa key b·∫±ng c√°ch g·ªçi <code>hashCode()</code> v√† th·ª±c hi·ªán ph√©p XOR v·ªõi m√£ bƒÉm d·ªãch ph·∫£i 16 bit.</li><li>Ph√©p to√°n XOR (<code>^</code>): ƒê√¢y l√† ph√©p to√°n bitwise trong Java, n√≥ so s√°nh t·ª´ng bit c·ªßa hai s·ªë, n·∫øu bit l√† gi·ªëng nhau th√¨ k·∫øt qu·∫£ l√† 0, n·∫øu kh√°c nhau th√¨ l√† 1.</li><li><code>h &gt;&gt;&gt; 16</code>: D·ªãch ph·∫£i m√£ bƒÉm 16 bit, t∆∞∆°ng ƒë∆∞∆°ng v·ªõi vi·ªác chia m√£ bƒÉm th√†nh hai ph·∫ßn 16 bit.</li><li>K·∫øt qu·∫£ tr·∫£ v·ªÅ l√† gi√° tr·ªã bƒÉm ƒë√£ ƒë∆∞·ª£c t√≠nh to√°n.</li></ul><p>M·ªôt d√≤ng m√£ ng·∫Øn g·ªçn n√†y th·ªÉ hi·ªán s·ª± th√¥ng minh c·ªßa nh·ªØng nh√† khoa h·ªçc m√°y t√≠nh.</p><p>L√Ω thuy·∫øt cho th·∫•y r·∫±ng, gi√° tr·ªã bƒÉm (hash code) l√† m·ªôt s·ªë nguy√™n c√≥ d·∫•u, trong kho·∫£ng t·ª´ -2147483648 ƒë·∫øn 2147483648.</p><p>Tuy nhi√™n, m·ªôt m·∫£ng c√≥ ƒë·ªô d√†i 40 t·ª∑ √¥ nh·ªõ kh√¥ng th·ªÉ ch·ª©a ƒë∆∞·ª£c. Tr∆∞·ªõc khi m·ªü r·ªông, m·∫£ng ban ƒë·∫ßu c·ªßa HashMap c√≥ k√≠ch th∆∞·ªõc l√† 16, v√¨ v·∫≠y gi√° tr·ªã bƒÉm n√†y kh√¥ng th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng tr·ª±c ti·∫øp, m√† ph·∫£i th·ª±c hi·ªán ph√©p AND v·ªõi k√≠ch th∆∞·ªõc c·ªßa m·∫£ng (nh∆∞ ƒë√£ ƒë·ªÅ c·∫≠p tr∆∞·ªõc ƒë√≥ <code>(n - 1) &amp; hash</code>), v√† s·ª≠ d·ª•ng gi√° tr·ªã nh·∫≠n ƒë∆∞·ª£c ƒë·ªÉ truy c·∫≠p ch·ªâ s·ªë c·ªßa m·∫£ng.</p><h4 id="phep-chia-lay-du-modulo-vs-phep-chia-lay-so-du-remainder-vs-phep-and-bitwise-and" tabindex="-1"><a class="header-anchor" href="#phep-chia-lay-du-modulo-vs-phep-chia-lay-so-du-remainder-vs-phep-and-bitwise-and"><span>Ph√©p chia l·∫•y d∆∞ (Modulo) VS Ph√©p chia l·∫•y s·ªë d∆∞ (Remainder) VS Ph√©p AND (Bitwise AND)</span></a></h4><p>·ªû ƒë√¢y t√¥i s·∫Ω b·ªï sung m·ªôt s·ªë ki·∫øn th·ª©c v·ªÅ ph√©p chia l·∫•y d∆∞ (Modulo)/l·∫•y s·ªë d∆∞ (Remainder) v√† ph√©p AND (AND operation).</p><p>Ph√©p chia l·∫•y d∆∞ (Modulo Operation) v√† ph√©p chia l·∫•y s·ªë d∆∞ (Remainder Operation), t·ª´ m·∫∑t nghi√™m ng·∫∑t, l√† hai ph∆∞∆°ng ph√°p t√≠nh to√°n kh√°c nhau v√† c√°ch th·ª©c tri·ªÉn khai c·ªßa ch√∫ng trong m√°y t√≠nh c≈©ng kh√°c nhau.</p><p>Trong Java, th∆∞·ªùng s·ª≠ d·ª•ng to√°n t·ª≠ % ƒë·ªÉ bi·ªÉu di·ªÖn ph√©p chia l·∫•y s·ªë d∆∞ v√† s·ª≠ d·ª•ng <code>Math.floorMod()</code> ƒë·ªÉ bi·ªÉu di·ªÖn ph√©p chia l·∫•y d∆∞.</p><ul><li>Khi c·∫£ hai to√°n h·∫°ng ƒë·ªÅu l√† s·ªë d∆∞∆°ng, k·∫øt qu·∫£ c·ªßa ph√©p chia l·∫•y d∆∞ v√† ph√©p chia l·∫•y s·ªë d∆∞ l√† gi·ªëng nhau.</li><li>Ch·ªâ khi c√≥ to√°n h·∫°ng √¢m, k·∫øt qu·∫£ m·ªõi kh√°c nhau.</li><li><strong>K·∫øt qu·∫£ c·ªßa ph√©p chia l·∫•y d∆∞ h∆∞·ªõng v·ªÅ √¢m v√¥ c√πng; k·∫øt qu·∫£ c·ªßa ph√©p chia l·∫•y s·ªë d∆∞ h∆∞·ªõng v·ªÅ 0</strong>. ƒê√¢y l√† nguy√™n nh√¢n c∆° b·∫£n d·∫´n ƒë·∫øn s·ª± kh√°c bi·ªát gi·ªØa ch√∫ng khi x·ª≠ l√Ω c√°c s·ªë √¢m.</li><li>Khi ƒë·ªô d√†i c·ªßa m·∫£ng l√† 2 m≈© n, hay l√† b·ªôi s·ªë c·ªßa n, ph√©p chia l·∫•y d∆∞/ph√©p chia l·∫•y s·ªë d∆∞ c√≥ th·ªÉ ƒë∆∞·ª£c thay th·∫ø b·∫±ng ph√©p AND (AND operation), hi·ªáu qu·∫£ h∆°n, b·ªüi v√¨ m√°y t√≠nh ch·ªâ nh·∫≠n d·∫°ng s·ªë nh·ªã ph√¢n m√† th√¥i.</li></ul><p>Ch√∫ng ta s·∫Ω xem x√©t m·ªôt v√≠ d·ª• c·ª• th·ªÉ ƒë·ªÉ hi·ªÉu h∆°n.</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> a </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> -</span><span style="color:#005CC5;--shiki-dark:#D19A66;">7</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> b </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 3</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// Ph√©p chia l·∫•y s·ªë d∆∞ c·ªßa a cho b</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> remainder </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> a </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">%</span><span style="color:#24292E;--shiki-dark:#E06C75;"> b</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// Ph√©p chia l·∫•y d∆∞ c·ªßa a cho b</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> modulus </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Math</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">floorMod</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(a, b);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">System</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">out</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;S·ªë: a = &quot;</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> a </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;, b = &quot;</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> b);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">System</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">out</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Ph√©p chia l·∫•y s·ªë d∆∞ (%): &quot;</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> remainder);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">System</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">out</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Ph√©p chia l·∫•y d∆∞ (Math.floorMod): &quot;</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> modulus);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// Thay ƒë·ªïi d·∫•u c·ªßa a v√† b</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">a </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 7</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">b </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> -</span><span style="color:#005CC5;--shiki-dark:#D19A66;">3</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">remainder </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> a </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">%</span><span style="color:#24292E;--shiki-dark:#E06C75;"> b</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">modulus </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Math</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">floorMod</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(a, b);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">System</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">out</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="color:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="color:#032F62;--shiki-dark:#98C379;">S·ªë: a = &quot;</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> a </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="color:#032F62;--shiki-dark:#98C379;"> &quot;, b = &quot;</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> b);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">System</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">out</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Ph√©p chia l·∫•y s·ªë d∆∞ (%): &quot;</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> remainder);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">System</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">out</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Ph√©p chia l·∫•y d∆∞ (Math.floorMod): &quot;</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> modulus);</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>K·∫øt qu·∫£ ƒë·∫ßu ra nh∆∞ sau:</p><div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>S·ªë: a = -7, b = 3</span></span>
<span class="line"><span>Ph√©p chia l·∫•y s·ªë d∆∞ (%): -1</span></span>
<span class="line"><span>Ph√©p chia l·∫•y d∆∞ (Math.floorMod): 2</span></span>
<span class="line"><span></span></span>
<span class="line"><span>S·ªë: a = 7, b = -3</span></span>
<span class="line"><span>Ph√©p chia l·∫•y s·ªë d∆∞ (%): 1</span></span>
<span class="line"><span>Ph√©p chia l·∫•y d∆∞ (Math.floorMod): -2</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>T·∫°i sao ch√∫ng ta l·∫°i c√≥ c√°c k·∫øt qu·∫£ nh∆∞ v·∫≠y?</strong></p><p>H√£y xem x√©t tr∆∞·ªõc h·∫øt v·ªÅ ph√©p chia th√¥ng th∆∞·ªùng. Khi ch√∫ng ta chia m·ªôt s·ªë cho m·ªôt s·ªë kh√°c, ch√∫ng ta s·∫Ω c√≥ m·ªôt ph·∫ßn d∆∞ v√† m·ªôt ph·∫ßn d∆∞.</p><p>V√≠ d·ª•, khi chia 7 cho 3, ch√∫ng ta c√≥ ph·∫ßn th∆∞∆°ng l√† 2 v√† ph·∫ßn d∆∞ l√† 1, b·ªüi v√¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>7</mn><mo>=</mo><mn>3</mn><mo>√ó</mo><mn>2</mn><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(7 = 3 \times 2 + 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">7</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">√ó</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>.</p><p>ƒê·ªÅ ngh·ªã ƒë·ªçc th√™m: <a href="https://www.cnblogs.com/doondo/p/14678204.html" target="_blank" rel="noopener noreferrer">Java Modulo and Remainder</a></p><p><strong>01. Ph·∫ßn d∆∞:</strong></p><p>Ph·∫ßn d∆∞ ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a d·ª±a tr√™n ph√©p chia th√¥ng th∆∞·ªùng, v√¨ v·∫≠y d·∫•u c·ªßa n√≥ lu√¥n gi·ªëng v·ªõi s·ªë b·ªã chia. Ph·∫ßn th∆∞∆°ng h∆∞·ªõng v·ªÅ 0.</p><p>V√≠ d·ª•, v·ªõi <code>-7 % 3</code>, ph·∫ßn d∆∞ l√† <code>-1</code>. ƒêi·ªÅu n√†y x·∫£y ra v√¨ <code>-7 / 3</code> c√≥ th·ªÉ c√≥ hai k·∫øt qu·∫£: m·ªôt l√† ph·∫ßn th∆∞∆°ng <code>-2</code> v√† ph·∫ßn d∆∞ <code>-1</code>; hai l√† ph·∫ßn th∆∞∆°ng <code>-3</code> v√† ph·∫ßn d∆∞ <code>2</code>. V√¨ ph·∫ßn d∆∞ h∆∞·ªõng v·ªÅ 0, n√™n <code>-2</code> g·∫ßn v·ªõi 0 h∆°n <code>-3</code>, do ƒë√≥ k·∫øt qu·∫£ c·ªßa ph√©p chia l·∫•y ph·∫ßn d∆∞ l√† <code>-1</code>.</p><p><strong>02. Ph√©p chia l·∫•y d∆∞:</strong></p><p>Ph√©p chia l·∫•y d∆∞ c≈©ng d·ª±a tr√™n ph√©p chia, ch·ªâ kh√°c l√† d·∫•u c·ªßa n√≥ lu√¥n gi·ªëng v·ªõi s·ªë chia. Ph·∫ßn th∆∞∆°ng h∆∞·ªõng v·ªÅ v√¥ c√πng √¢m.</p><p>V√≠ d·ª•, v·ªõi <code>Math.floorMod(-7, 3)</code>, k·∫øt qu·∫£ l√† <code>2</code>. T∆∞∆°ng t·ª±, <code>-7 / 3</code> c√≥ th·ªÉ c√≥ hai k·∫øt qu·∫£: m·ªôt l√† ph·∫ßn th∆∞∆°ng <code>-2</code> v√† ph·∫ßn d∆∞ <code>-1</code>; hai l√† ph·∫ßn th∆∞∆°ng <code>-3</code> v√† ph·∫ßn d∆∞ <code>2</code>. V√¨ ph·∫ßn th∆∞∆°ng h∆∞·ªõng v·ªÅ v√¥ c√πng √¢m, n√™n <code>-3</code> g·∫ßn v·ªõi v√¥ c√πng √¢m h∆°n <code>-2</code>, do ƒë√≥ k·∫øt qu·∫£ c·ªßa ph√©p chia l·∫•y ph·∫ßn d∆∞ l√† <code>2</code>.</p><p>C·∫ßn l∆∞u √Ω r·∫±ng, cho d√π l√† ph√©p chia l·∫•y s·ªë d∆∞ hay ph√©p chia l·∫•y d∆∞, s·ªë chia kh√¥ng th·ªÉ l√† 0, v√¨ c·∫£ hai ƒë·ªÅu d·ª±a tr√™n ph√©p chia.</p><p><strong>03. Ph√©p AND:</strong></p><p>Khi s·ªë b·ªã chia v√† s·ªë chia ƒë·ªÅu l√† s·ªë d∆∞∆°ng, k·∫øt qu·∫£ c·ªßa ph√©p chia l·∫•y ph·∫ßn d∆∞ v√† ph√©p chia l·∫•y ph·∫ßn d∆∞ l√† gi·ªëng nhau.</p><p>V√≠ d·ª•, ph·∫ßn d∆∞ c·ªßa 7 chia cho 3 v√† ph√©p chia l·∫•y d∆∞ c·ªßa 7 chia cho 3 ƒë·ªÅu l√† 1. B·ªüi v√¨ c·∫£ hai ƒë·ªÅu d·ª±a tr√™n ph√©p chia, ph·∫ßn th∆∞∆°ng c·ªßa 7 chia cho 3 l√† 2 v√† ph·∫ßn d∆∞ l√† 1.</p><p>Do ƒë√≥, ch√∫ng ta th∆∞·ªùng th·∫•y r·∫±ng &quot;ph√©p chia l·∫•y s·ªë d∆∞&quot; c≈©ng c√≥ th·ªÉ g·ªçi l√† &quot;ph√©p chia l·∫•y d∆∞&quot;, ƒëi·ªÅu n√†y l√† kh√¥ng ch√≠nh x√°c, d·ª±a tr√™n tr∆∞·ªùng h·ª£p s·ªë h·∫°ng b·∫±ng 0.</p><p>ƒê·ªëi v·ªõi HashMap, n√≥ c·∫ßn s·ª≠ d·ª•ng <code>hash % table.length</code> ƒë·ªÉ x√°c ƒë·ªãnh v·ªã tr√≠ ph·∫ßn t·ª≠ trong m·∫£ng, ƒëi·ªÅu n√†y gi√∫p ph√¢n b·ªë c√°c ph·∫ßn t·ª≠ m·ªôt c√°ch ƒë·ªìng ƒë·ªÅu trong m·∫£ng.</p><p>V√≠ d·ª•, n·∫øu ƒë·ªô d√†i m·∫£ng l√† 3 v√† hash l√† 7, th√¨ <code>7 % 3</code> cho k·∫øt qu·∫£ l√† 1, nghƒ©a l√† ph·∫ßn t·ª≠ c√≥ th·ªÉ ƒë∆∞·ª£c ƒë·∫∑t v√†o v·ªã tr√≠ ch·ªâ s·ªë l√† 1.</p><p>Khi hash l√† 8, <code>8 % 3</code> cho k·∫øt qu·∫£ l√† 2, nghƒ©a l√† ph·∫ßn t·ª≠ c√≥ th·ªÉ ƒë∆∞·ª£c ƒë·∫∑t v√†o v·ªã tr√≠ ch·ªâ s·ªë l√† 2.</p><p>Khi hash l√† 9, <code>9 % 3</code> cho k·∫øt qu·∫£ l√† 0, nghƒ©a l√† ph·∫ßn t·ª≠ c√≥ th·ªÉ ƒë∆∞·ª£c ƒë·∫∑t v√†o v·ªã tr√≠ ch·ªâ s·ªë l√† 0.</p><p>ƒêi·ªÅu n√†y th·∫≠t s·ª± k·ª≥ di·ªáu, khi m·∫£ng c√≥ ƒë·ªô d√†i l√† 3, ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng h·∫øt 3 v·ªã tr√≠ n√†y.</p><p>V·∫≠y t·∫°i sao HashMap khi t√≠nh ch·ªâ s·ªë l·∫°i kh√¥ng s·ª≠ d·ª•ng tr·ª±c ti·∫øp ph√©p chia l·∫•y s·ªë d∆∞ (ho·∫∑c ph√©p chia l·∫•y d∆∞), m√† l·∫°i s·ª≠ d·ª•ng ph√©p AND &amp;?</p><p>B·ªüi v√¨ khi ƒë·ªô d√†i c·ªßa m·∫£ng l√† 2 m≈© n (<code>2^n</code>), <code>hash &amp; (length - 1) = hash % length</code>.</p><p>V√≠ d·ª•, <code>9 % 4 = 1</code>, s·ªë nh·ªã ph√¢n c·ªßa 9 l√† 1001, <code>4 - 1 = 3</code>, s·ªë nh·ªã ph√¢n c·ªßa 3 l√† 0011, <code>9 &amp; 3 = 1001 &amp; 0011 = 0001 = 1</code>.</p><p>Ti·∫øp t·ª•c v·ªõi <code>10 % 4 = 2</code>, s·ªë nh·ªã ph√¢n c·ªßa 10 l√† 1010, <code>4 - 1 = 3</code>, s·ªë nh·ªã ph√¢n c·ªßa 3 l√† 0011, <code>10 &amp; 3 = 1010 &amp; 0011 = 0010 = 2</code>.</p><p>Khi ƒë·ªô d√†i c·ªßa m·∫£ng kh√¥ng ph·∫£i l√† <code>2^n</code>, k·∫øt qu·∫£ c·ªßa <code>hash % length</code> v√† <code>hash &amp; (length - 1)</code> s·∫Ω kh√¥ng gi·ªëng nhau.</p><p>V√≠ d·ª•, <code>7 % 3 = 1</code>, s·ªë nh·ªã ph√¢n c·ªßa 7 l√† 0111, <code>3 - 1 = 2</code>, s·ªë nh·ªã ph√¢n c·ªßa 2 l√† 0010, <code>7 &amp; 2 = 0111 &amp; 0010 = 0010 = 2</code>.</p><p><strong>V·∫≠y t·∫°i sao?</strong></p><p>ƒê√≥ l√† b·ªüi v√¨ t·ª´ g√≥c nh√¨n c·ªßa h·ªá th·ªëng nh·ªã ph√¢n, ph√©p chia <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mi mathvariant="normal">/</mi><mi>l</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo>=</mo><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mi mathvariant="normal">/</mi><msup><mn>2</mn><mi>n</mi></msup><mo>=</mo><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mo>&gt;</mo><mo>&gt;</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">hash / length = hash / 2^n = hash &gt;&gt; n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">ha</span><span class="mord mathnormal">s</span><span class="mord mathnormal">h</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">ha</span><span class="mord mathnormal">s</span><span class="mord mathnormal">h</span><span class="mord">/</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">ha</span><span class="mord mathnormal">s</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> c√≥ th·ªÉ thay th·∫ø b·∫±ng vi·ªác d·ªãch ph·∫£i n bit c·ªßa <code>hash</code>, cho ta k·∫øt qu·∫£ l√† ph·∫ßn nguy√™n c·ªßa <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mi mathvariant="normal">/</mi><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">hash / 2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">ha</span><span class="mord mathnormal">s</span><span class="mord mathnormal">h</span><span class="mord">/</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span>.</p><p>Ph·∫ßn d∆∞, hay <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mi mathvariant="normal">%</mi><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">hash \% 2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord mathnormal">ha</span><span class="mord mathnormal">s</span><span class="mord mathnormal">h</span><span class="mord">%</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span>, ƒë∆∞·ª£c x√°c ƒë·ªãnh b·ªüi c√°c bit th·∫•p nh·∫•t c·ªßa bi·ªÉu di·ªÖn nh·ªã ph√¢n c·ªßa <code>hash</code>. ƒêi·ªÅu n√†y l√† do trong ph√©p chia theo c∆° s·ªë <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span>, ch·ªâ c√≥ ph·∫ßn th·∫•p h∆°n <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span> ·∫£nh h∆∞·ªüng ƒë·∫øn k·∫øt qu·∫£.</p><p>V√≠ d·ª•, v·ªõi s·ªë 26 c√≥ bi·ªÉu di·ªÖn nh·ªã ph√¢n l√† 11010, ƒë·ªÉ t√≠nh 26 % 8, trong ƒë√≥ 8 l√† <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">2^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>, ch√∫ng ta ch·ªâ quan t√¢m ƒë·∫øn 3 bit th·∫•p nh·∫•t c·ªßa bi·ªÉu di·ªÖn nh·ªã ph√¢n c·ªßa 26: 11010 c√≥ 3 bit th·∫•p nh·∫•t l√† 010.</p><p>010 t∆∞∆°ng ·ª©ng v·ªõi s·ªë 2 trong h·ªá th·∫≠p ph√¢n, do ƒë√≥ k·∫øt qu·∫£ c·ªßa 26 % 8 l√† 2.</p><p>Khi th·ª±c hi·ªán <code>hash &amp; (length - 1)</code>, ch√∫ng ta th·ª±c t·∫ø l√† gi·ªØ l·∫°i n bit th·∫•p nh·∫•t c·ªßa bi·ªÉu di·ªÖn nh·ªã ph√¢n c·ªßa <code>hash</code>, v√† x√≥a b·ªè c√°c bit cao h∆°n.</p><p>V√≠ d·ª•, v·ªõi <code>hash = 14</code> v√† <code>n = 3</code> (t·ª©c l√† ƒë·ªô d√†i m·∫£ng l√† <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">2^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>, t·ª©c l√† 8):</p><div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>  1110 (hash = 14)</span></span>
<span class="line"><span>&amp; 0111 (length - 1 = 7)</span></span>
<span class="line"><span>  ----</span></span>
<span class="line"><span>  0110 (k·∫øt qu·∫£ = 6)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ch·ªâ gi·ªØ l·∫°i 3 bit th·∫•p nh·∫•t c·ªßa 14, c√°c bit cao h∆°n ƒë√£ b·ªã x√≥a b·ªè.</p><p>Nh·ªù v√†o ƒëi·ªÅu n√†y, hai ph√©p t√≠nh <code>hash % length</code> v√† <code>hash &amp; (length - 1)</code> ƒë√£ tr·ªü th√†nh m·ªôt h·ªá th·ªëng ho√†n ch·ªânh. Trong m√°y t√≠nh, ph√©p t√≠nh bitwise c√≥ t·ªëc ƒë·ªô nhanh h∆°n r·∫•t nhi·ªÅu so v·ªõi ph√©p chia l·∫•y d∆∞, v√¨ m√°y t√≠nh ho·∫°t ƒë·ªông ch·ªß y·∫øu tr√™n h·ªá th·ªëng nh·ªã ph√¢n.</p><p>HashMap s·ª≠ d·ª•ng ph√©p chia l·∫•y d∆∞ ·ªü hai ch·ªó.</p><p>HashMap trong Java s·ª≠ d·ª•ng ph√©p t√≠nh <code>(n - 1) &amp; hash</code> thay cho ph√©p chia l·∫•y d∆∞ <code>%</code> c√≥ hai tr∆∞·ªùng h·ª£p ch√≠nh.</p><p>Khi th√™m ph·∫ßn t·ª≠ v√†o HashMap (qua ph∆∞∆°ng th·ª©c <code>putVal</code>):</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">final</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> V</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> putVal</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> K</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> V</span><span style="color:#24292E;--shiki-dark:#E06C75;"> value</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> boolean</span><span style="color:#24292E;--shiki-dark:#E06C75;"> onlyIfAbsent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> boolean</span><span style="color:#24292E;--shiki-dark:#E06C75;"> evict) {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // M·∫£ng</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    HashMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">Node</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">[] tab</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // Node</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    HashMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">Node</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> p</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // n l√† ƒë·ªô d√†i c·ªßa m·∫£ng, i l√† ch·ªâ s·ªë</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> n</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> i</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // N·∫øu m·∫£ng r·ªóng</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ((tab </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> table) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> ||</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (n </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> tab</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">length</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">        // K√≠ch th∆∞·ªõc c·ªßa m·∫£ng sau khi m·ªü r·ªông l·∫ßn ƒë·∫ßu</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        n </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (tab </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> resize</span><span style="color:#24292E;--shiki-dark:#E06C75;">())</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">length</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // T√≠nh v·ªã tr√≠ ch√®n n√∫t, n·∫øu v·ªã tr√≠ ƒë√≥ tr·ªëng, t·∫°o m·ªôt n√∫t m·ªõi v√† ch√®n v√†o</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ((p </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> tab[i </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (n </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&amp;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash]) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        tab[i] </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> newNode</span><span style="color:#24292E;--shiki-dark:#E06C75;">(hash</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> value</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ph√©p t√≠nh <code>(n - 1) &amp; hash</code> ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ t√≠nh to√°n v·ªã tr√≠ l∆∞u tr·ªØ c·ªßa ph·∫ßn t·ª≠ d·ª±a tr√™n gi√° tr·ªã bƒÉm (<code>hash</code>) c·ªßa kh√≥a. N√≥ thay th·∫ø cho ph√©p chia l·∫•y d∆∞ <code>%</code>, s·∫Ω ƒë∆∞·ª£c gi·∫£i th√≠ch sau.</p><p>Khi truy xu·∫•t ph·∫ßn t·ª≠ t·ª´ HashMap (qua ph∆∞∆°ng th·ª©c <code>getNode</code>):</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">final</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Node</span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;">V</span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> getNode</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Object</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key) {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // L·∫•y m·∫£ng v√† ƒë·ªô d√†i hi·ªán t·∫°i, v√† n√∫t ƒë·∫ßu ti√™n c·ªßa chu·ªói n√∫t (d·ª±a tr√™n ch·ªâ s·ªë tr·ª±c ti·∫øp t·ª´ m·∫£ng)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    Node</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">[] tab</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    Node</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> first</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> n</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    K</span><span style="color:#24292E;--shiki-dark:#E06C75;"> k</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ((tab </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> table) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (n </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> tab</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">length</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">            (first </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> tab[(n </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&amp;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash]) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">        // N·∫øu n√∫t ƒë·∫ßu ti√™n ch√≠nh l√† n√∫t c·∫ßn t√¨m, tr·∫£ v·ªÅ n√∫t n√†y</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#24292E;--shiki-dark:#E5C07B;">first</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">hash</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> ==</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&amp;&amp;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ((k </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> first</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">key</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">||</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (key </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">equals</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(k)</span><span style="color:#24292E;--shiki-dark:#E06C75;">)))</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">            return</span><span style="color:#24292E;--shiki-dark:#E06C75;"> first</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">        // N·∫øu n√∫t ƒë·∫ßu ti√™n kh√¥ng ph·∫£i l√† n√∫t c·∫ßn t√¨m, duy·ªát qua chu·ªói n√∫t ƒë·ªÉ t√¨m ki·∫øm</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ((e </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> first</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">next</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">            do</span><span style="color:#24292E;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#24292E;--shiki-dark:#E5C07B;">e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">hash</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> ==</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&amp;&amp;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ((k </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">key</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">||</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (key </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">equals</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(k)</span><span style="color:#24292E;--shiki-dark:#E06C75;">)))</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                    return</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">            } </span><span style="color:#D73A49;--shiki-dark:#C678DD;">while</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ((e </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">next</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // N·∫øu kh√¥ng t√¨m th·∫•y n√∫t t∆∞∆°ng ·ª©ng trong chu·ªói n√∫t, tr·∫£ v·ªÅ null</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    return</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>L·∫°i xu·∫•t hi·ªán ph√©p t√≠nh <code>(n - 1) &amp; hash</code>, th·ª±c hi·ªán ƒë·ªÉ x√°c ƒë·ªãnh v·ªã tr√≠ c·ªßa ph·∫ßn t·ª≠ c·∫ßn truy xu·∫•t d·ª±a tr√™n gi√° tr·ªã bƒÉm (<code>hash</code>).</p><p>Ph√©p t√≠nh n√†y <code>(n - 1) &amp; hash</code> thay th·∫ø cho ph√©p chia l·∫•y d∆∞ <code>%</code>, ƒë∆∞·ª£c √°p d·ª•ng v√¨:</p><ul><li>N√≥ nhanh h∆°n ph√©p chia l·∫•y d∆∞ <code>%</code> trong c√°c m√°y t√≠nh hi·ªán ƒë·∫°i, ƒë·∫∑c bi·ªát l√† khi <code>n</code> l√† m·ªôt s·ªë l≈©y th·ª´a c·ªßa 2 (nh∆∞ 16, 32, 64,...).</li><li>Ph√©p <code>&amp;</code> ch·ªâ y√™u c·∫ßu c√°c ph√©p to√°n bitwise, n√≥ c·ª±c k·ª≥ nhanh ch√≥ng so v·ªõi ph√©p chia l·∫•y d∆∞ <code>%</code>.</li><li>ƒêi·ªÅu n√†y c·∫£i thi·ªán hi·ªáu su·∫•t c·ªßa HashMap khi th·ª±c hi·ªán c√°c thao t√°c th√™m, truy xu·∫•t v√† x√≥a ph·∫ßn t·ª≠.</li></ul><p>Do ƒë√≥, trong HashMap c·ªßa Java, s·ª≠ d·ª•ng ph√©p <code>&amp;</code> l√† m·ªôt chi·∫øn l∆∞·ª£c t·ªëi ∆∞u ƒë·ªÉ t√≠nh to√°n v·ªã tr√≠ l∆∞u tr·ªØ c·ªßa c√°c ph·∫ßn t·ª≠ d·ª±a tr√™n gi√° tr·ªã bƒÉm.</p><h4 id="phep-chia-lay-so-du-va-phep-and" tabindex="-1"><a class="header-anchor" href="#phep-chia-lay-so-du-va-phep-and"><span>Ph√©p chia l·∫•y s·ªë d∆∞ % v√† ph√©p AND &amp;</span></a></h4><p>C√≥ l·∫Ω m·ªçi ng∆∞·ªùi s·∫Ω t·ª± h·ªèi: <strong>T·∫°i sao kh√¥ng s·ª≠ d·ª•ng ph√©p chia l·∫•y d∆∞ % m√† l·∫°i ch·ªçn ph√©p AND &amp; ·ªü ƒë√¢y nh·ªâ</strong>?</p><p>ƒêi·ªÅu n√†y l√† v√¨ ph√©p AND &amp; nhanh h∆°n so v·ªõi ph√©p % v√† khi b l√† m·ªôt l≈©y th·ª´a c·ªßa 2, c√≥ m·ªôt m·ªëi quan h·ªá to√°n h·ªçc nh∆∞ sau.</p><blockquote><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi mathvariant="normal">%</mi><mi>b</mi><mo>=</mo><mi>a</mi><mi mathvariant="normal">&amp;</mi><mo stretchy="false">(</mo><mi>b</mi><mo>‚àí</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a \% b = a \&amp; (b-1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord mathnormal">a</span><span class="mord">%</span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mord">&amp;</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">‚àí</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></p></blockquote><p>N·∫øu thay b·∫±ng <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span>, th√¨ c√¥ng th·ª©c tr·ªü th√†nh:</p><blockquote><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi mathvariant="normal">%</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo stretchy="false">)</mo><mo>=</mo><mi>a</mi><mi mathvariant="normal">&amp;</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo>‚àí</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a \% ( 2^n ) = a \&amp; (2^n - 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mord">%</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mord">&amp;</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">‚àí</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></p></blockquote><p>H√£y xem x√©t m·ªôt v√≠ d·ª•, gi·∫£ s·ª≠ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><mn>14</mn></mrow><annotation encoding="application/x-tex">a = 14</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">14</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mo>=</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">b = 8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span></span></span></span>, t·ª©c l√† <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">2^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">n = 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>.</p><p>14 % 8 (d∆∞ l√† 6).</p><p>14 ·ªü h·ªá nh·ªã ph√¢n l√† 1110, 8 ·ªü h·ªá nh·ªã ph√¢n l√† 1000, 8-1 = 7, 7 ·ªü h·ªá nh·ªã ph√¢n l√† 0111, 1110 &amp; 0111 = 0110, t·ª©c l√† <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>√ó</mo><msup><mn>2</mn><mn>0</mn></msup><mo>+</mo><mn>1</mn><mo>√ó</mo><msup><mn>2</mn><mn>1</mn></msup><mo>+</mo><mn>1</mn><mo>√ó</mo><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><mn>0</mn><mo>√ó</mo><msup><mn>2</mn><mn>3</mn></msup><mo>=</mo><mn>0</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>4</mn><mo>+</mo><mn>0</mn><mo>=</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">0\times 2^0 + 1 \times 2^1 + 1 \times 2^2 + 0 \times 2^3= 0 + 2 + 4 + 0 = 6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">√ó</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">√ó</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">√ó</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">√ó</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span></span></span></span>, n√™n 14%8 c≈©ng b·∫±ng 6.</p><p>Nh∆∞ v·∫≠y, m√°y t√≠nh l√†m vi·ªác nh∆∞ v·∫≠y, kh√¥ng th·ªÉ thay ƒë·ªïi ƒë∆∞·ª£c, üòù</p><p>ƒêi·ªÅu n√†y c≈©ng gi·∫£i th√≠ch <strong>t·∫°i sao ƒë·ªô d√†i c·ªßa m·∫£ng trong HashMap n√™n l√† l≈©y th·ª´a c·ªßa 2</strong>.</p><p>V√¨ sao l·∫°i nh∆∞ th·∫ø?</p><p>B·ªüi v√¨ (ƒë·ªô d√†i c·ªßa m·∫£ng - 1) ch√≠nh l√† m·ªôt &quot;m·∫∑t n·∫°&quot; low bits - c√°c bit cu·ªëi c√πng c·ªßa n√≥ th∆∞·ªùng l√† 1, gi√∫p cho ph√©p &amp; c√≥ √Ω nghƒ©a, c√≤n k·∫øt qu·∫£ l√† 0.</p><blockquote><p>K·∫øt qu·∫£ c·ªßa ph√©p to√°n a&amp;b l√†: n·∫øu c√°c bit t∆∞∆°ng ·ª©ng trong a v√† b ƒë·ªìng th·ªùi l√† 1 th√¨ bit k·∫øt qu·∫£ t∆∞∆°ng ·ª©ng l√† 1, ng∆∞·ª£c l·∫°i l√† 0. V√≠ d·ª•: 5&amp;3=1, s·ªë nh·ªã ph√¢n c·ªßa 5 l√† 0101, s·ªë nh·ªã ph√¢n c·ªßa 3 l√† 0011, 5&amp;3=0001=1.</p></blockquote><p>lu·ªπ th·ª´a c·ªßa 2 l√† s·ªë ch·∫µn, s·ªë ch·∫µn tr·ª´ ƒëi 1 l√† s·ªë l·∫ª, v√† bit cu·ªëi c√πng c·ªßa s·ªë l·∫ª l√† 1, ƒë·∫£m b·∫£o r·∫±ng <code>hash &amp;(length-1)</code> c√≥ th·ªÉ k·∫øt th√∫c b·∫±ng 0 ho·∫∑c 1 (ph·ª• thu·ªôc v√†o gi√° tr·ªã c·ªßa hash), nghƒ©a l√† k·∫øt qu·∫£ c·ªßa ph√©p &amp; c√≥ th·ªÉ l√† s·ªë ch·∫µn ho·∫∑c s·ªë l·∫ª, ƒëi·ªÅu n√†y gi√∫p ph√¢n ph·ªëi ƒë·ªÅu c√°c gi√° tr·ªã hash.</p><p>N√≥i m·ªôt c√°ch kh√°c, ph√©p &amp; l√†m cho c√°c bit cao c·ªßa gi√° tr·ªã hash tr·ªü th√†nh 0, ch·ªâ gi·ªØ l·∫°i c√°c gi√° tr·ªã bit th·∫•p.</p><p>Gi·∫£ s·ª≠ gi√° tr·ªã hash nh·ªã ph√¢n l√† <code>10100101 11000100 00100101</code>, ch√∫ng ta th·ª≠ √°p d·ª•ng ph√©p &amp; v·ªõi n√≥. ƒê·ªô d√†i ban ƒë·∫ßu c·ªßa HashMap l√† 16, 16-1=15, bi·ªÉu di·ªÖn nh·ªã ph√¢n l√† <code>00000000 00000000 00001111</code> (c√°c bit cao ƒë∆∞·ª£c ƒëi·ªÅn v√†o b·∫±ng 0):</p><div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>	 10100101 11000100 00100101</span></span>
<span class="line"><span>&amp;	 00000000 00000000 00001111</span></span>
<span class="line"><span>----------------------------------</span></span>
<span class="line"><span>	 00000000 00000000 00000101</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Do 15 c√≥ c√°c bit cao l√† 0, k·∫øt qu·∫£ c·ªßa ph√©p &amp; c≈©ng ch·∫Øc ch·∫Øn l√† 0 ·ªü bit cao, ch·ªâ c√≤n l·∫°i 4 bit th·∫•p <code>0101</code>, t∆∞∆°ng ƒë∆∞∆°ng v·ªõi s·ªë th·∫≠p ph√¢n 5.</p><p>V√¨ v·∫≠y, gi√° tr·ªã hash <code>10100101 11000100 00100101</code> s·∫Ω ƒë∆∞·ª£c ƒë·∫∑t v√†o v·ªã tr√≠ th·ª© 5 trong m·∫£ng.</p><p>D√π b·∫°n c√≥ l√† ng∆∞·ªùi m·ªõi, b·∫°n v·∫´n c√≥ th·ªÉ hi·ªÉu r·∫±ng ph√©p &amp; ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ t√≠nh ch·ªâ s·ªë c·ªßa m·∫£ng.</p><ul><li>Khi th·ª±c hi·ªán put, t√≠nh ch·ªâ s·ªë, ƒë·∫∑t c·∫∑p kh√≥a gi√° tr·ªã v√†o th√πng t∆∞∆°ng ·ª©ng.</li><li>Khi th·ª±c hi·ªán get, th√¥ng qua ch·ªâ s·ªë, l·∫•y c·∫∑p kh√≥a gi√° tr·ªã t·ª´ th√πng t∆∞∆°ng ·ª©ng.</li></ul><h4 id="tai-sao-lai-goi-phuong-thuc-hash-truoc-khi-thuc-hien-phep-chia-lay-du" tabindex="-1"><a class="header-anchor" href="#tai-sao-lai-goi-phuong-thuc-hash-truoc-khi-thuc-hien-phep-chia-lay-du"><span>T·∫°i sao l·∫°i g·ªçi ph∆∞∆°ng th·ª©c hash tr∆∞·ªõc khi th·ª±c hi·ªán ph√©p chia l·∫•y d∆∞?</span></a></h4><p>H√£y xem h√¨nh d∆∞·ªõi ƒë√¢y.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220057969.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Gi·∫£ s·ª≠ gi√° tr·ªã hash c·ªßa m·ªôt kh√≥a l√† <code>11111111 11111111 11110000 1110 1010</code>, sau khi d·ªãch ph·∫£i 16 bit (h &gt;&gt;&gt; 16), ch√≠nh l√† <code>00000000 00000000 11111111 11111111</code>, sau khi th·ª±c hi·ªán ph√©p XOR (h ^ (h &gt;&gt;&gt; 16)), k·∫øt qu·∫£ l√† <code>11111111 11111111 00001111 00010101</code>.</p><blockquote><p>Ph√©p XOR (<code>^</code>) l√† ph√©p to√°n d·ª±a tr√™n c√°c bit nh·ªã ph√¢n, c√≥ k√Ω hi·ªáu l√† XOR ho·∫∑c <code>^</code>, v·ªõi quy t·∫Øc ph√©p to√°n nh∆∞ sau: N·∫øu hai bit c√πng m·ªôt gi√° tr·ªã, k·∫øt qu·∫£ l√† 0, n·∫øu kh√°c nhau, k·∫øt qu·∫£ l√† 1.</p></blockquote><p>B·∫±ng c√°ch k·∫øt h·ª£p bit cao v√† bit th·∫•p c·ªßa gi√° tr·ªã hash ban ƒë·∫ßu, s·ª± ng·∫´u nhi√™n c·ªßa bit th·∫•p ƒë∆∞·ª£c tƒÉng c∆∞·ªùng (b·∫±ng c√°ch th√™m v√†o m·ªôt ph·∫ßn ƒë·∫∑c tr∆∞ng c·ªßa bit cao). K·∫øt qu·∫£ sau ƒë√≥ ƒë∆∞·ª£c th·ª±c hi·ªán ph√©p &amp; v·ªõi (ƒë·ªô d√†i m·∫£ng - 1) (<code>00000000 00000000 00001111</code>), cho ta ch·ªâ s·ªë l√† <code>00000000 00000000 00000101</code>, t·ª©c l√† 5.</p><p>H√£y nh·ªõ l·∫°i v√≠ d·ª• tr∆∞·ªõc ƒë√≥ c·ªßa ch√∫ng ta v·ªõi gi√° tr·ªã hash <code>10100101 11000100 00100101</code>. Tr∆∞·ªõc khi g·ªçi ph∆∞∆°ng th·ª©c hash, k·∫øt qu·∫£ ph√©p chia l·∫•y d∆∞ v·ªõi 15 c≈©ng l√† 5. B√¢y gi·ªù h√£y xem k·∫øt qu·∫£ ph√©p chia l·∫•y d∆∞ sau khi g·ªçi ph∆∞∆°ng th·ª©c hash.</p><p>Gi√° tr·ªã hash <code>00000000 10100101 11000100 00100101</code> (b·ªï sung 32 bit), sau khi d·ªãch ph·∫£i 16 bit (h &gt;&gt;&gt; 16) l√† <code>00000000 00000000 00000000 10100101</code>, sau ph√©p XOR (h ^ (h &gt;&gt;&gt; 16)) l√† <code>00000000 10100101 00111011 10000000</code>.</p><p>K·∫øt qu·∫£ sau ƒë√≥ ƒë∆∞·ª£c th·ª±c hi·ªán ph√©p &amp; v·ªõi (ƒë·ªô d√†i m·∫£ng - 1) (<code>00000000 00000000 00001111</code>), cho ta ch·ªâ s·ªë l√† <code>00000000 00000000 00000000</code>, t·ª©c l√† 0.</p><p>T√≥m l·∫°i, <strong>ph∆∞∆°ng th·ª©c hash ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ t·ªëi ∆∞u h√≥a gi√° tr·ªã hash</strong>, d·ªãch ph·∫£i gi√° tr·ªã hash 16 bit, t·ª©c l√† ch√≠nh n√≥ ƒë·ªô d√†i c·ªßa m·ªôt n·ª≠a, sau ƒë√≥ th·ª±c hi·ªán ph√©p XOR v·ªõi gi√° tr·ªã hash ban ƒë·∫ßu ƒë·ªÉ h·ªón h·ª£p gi√° tr·ªã cao v√† th·∫•p c·ªßa hash, tƒÉng t√≠nh ng·∫´u nhi√™n.</p><p>N√≥i m·ªôt c√°ch ƒë∆°n gi·∫£n, <strong>ph∆∞∆°ng th·ª©c hash gi√∫p tƒÉng t√≠nh ng·∫´u nhi√™n, gi√∫p ph√¢n b·ªë c√°c ph·∫ßn t·ª≠ d·ªØ li·ªáu m·ªôt c√°ch ƒë·ªìng ƒë·ªÅu h∆°n, gi·∫£m thi·ªÉu c√°c va ch·∫°m</strong>.</p><p>D∆∞·ªõi ƒë√¢y l√† ƒëo·∫°n m√£ ki·ªÉm tra m√† t√¥i vi·∫øt, gi·∫£ s·ª≠ ƒë·ªô d√†i ban ƒë·∫ßu c·ªßa HashMap l√† 16 sau khi m·ªü r·ªông l·∫ßn ƒë·∫ßu ti√™n, t√¥i ƒë√£ ƒë·∫∑t nƒÉm c·∫∑p kh√≥a-gi√° tr·ªã v√†o ƒë√≥ ƒë·ªÉ xem gi√° tr·ªã hash c·ªßa kh√≥a (sau khi t√≠nh to√°n b·∫±ng ph∆∞∆°ng th·ª©c <code>hash()</code>) v√† ch·ªâ s·ªë (sau khi th·ª±c hi·ªán ph√©p chia l·∫•y d∆∞).</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">HashMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> map </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> HashMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">()</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;chenmo&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Ê≤âÈªò&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;wanger&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Áéã‰∫å&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;chenqingyang&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;ÈôàÊ∏ÖÊâ¨&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;xiaozhuanling&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Â∞èËΩ¨ÈìÉ&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;fangxiaowan&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;ÊñπÂ∞èÂ©â&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// Duy·ªát qua HashMap</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">for</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">keySet</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="color:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> h</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> n </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 16</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (key </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#C678DD;">?</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> :</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">hashCode</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">^</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;&gt;&gt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 16</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> i </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (n </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&amp;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // In ra gi√° tr·ªã hash v√† ch·ªâ s·ªë i c·ªßa kh√≥a</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    System</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">out</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Gi√° tr·ªã hash c·ªßa &quot;</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> key </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="color:#032F62;--shiki-dark:#98C379;"> &quot; l√†: &quot;</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> hash </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="color:#032F62;--shiki-dark:#98C379;"> &quot; v√† ch·ªâ s·ªë i l√†: &quot;</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> i);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>K·∫øt qu·∫£ xu·∫•t ra nh∆∞ sau:</p><div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>Gi√° tr·ªã hash c·ªßa xiaozhuanling l√†: 14597045 v√† ch·ªâ s·ªë i l√†: 5</span></span>
<span class="line"><span>Gi√° tr·ªã hash c·ªßa fangxiaowan l√†: -392727066 v√† ch·ªâ s·ªë i l√†: 6</span></span>
<span class="line"><span>Gi√° tr·ªã hash c·ªßa chenmo l√†: -1361556696 v√† ch·ªâ s·ªë i l√†: 8</span></span>
<span class="line"><span>Gi√° tr·ªã hash c·ªßa chenqingyang l√†: -613818743 v√† ch·ªâ s·ªë i l√†: 9</span></span>
<span class="line"><span>Gi√° tr·ªã hash c·ªßa wanger l√†: -795084437 v√† ch·ªâ s·ªë i l√†: 11</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>N√≥i c√°ch kh√°c, trong tr∆∞·ªùng h·ª£p n√†y, kh√¥ng c√≥ xung ƒë·ªôt hash x·∫£y ra, c√°c ch·ªâ s·ªë l√† kh√° ph√¢n b·ªë ƒë·ªÅu, l√† 5, 6, 8, 9 v√† 11. ƒêi·ªÅu n√†y ch·ªß y·∫øu nh·ªù v√†o ph∆∞∆°ng th·ª©c hash.</p><h4 id="tom-tat" tabindex="-1"><a class="header-anchor" href="#tom-tat"><span>T√≥m t·∫Øt</span></a></h4><p>Ph∆∞∆°ng th·ª©c <code>hash</code> c√≥ vai tr√≤ ch√≠nh l√† x·ª≠ l√Ω gi√° tr·ªã <code>hashCode</code> c·ªßa <code>key</code>, t·ª´ ƒë√≥ thu ƒë∆∞·ª£c gi√° tr·ªã bƒÉm cu·ªëi c√πng. B·ªüi v√¨ gi√° tr·ªã <code>hashCode</code> c·ªßa <code>key</code> l√† kh√¥ng x√°c ƒë·ªãnh, c√≥ th·ªÉ x·∫£y ra va ch·∫°m bƒÉm, do ƒë√≥ c·∫ßn ph·∫£i √°nh x·∫° gi√° tr·ªã bƒÉm n√†y v√†o v·ªã tr√≠ l∆∞u tr·ªØ th·ª±c t·∫ø c·ªßa HashMap th√¥ng qua m·ªôt thu·∫≠t to√°n nh·∫•t ƒë·ªãnh.</p><p>Nguy√™n l√Ω c·ªßa ph∆∞∆°ng th·ª©c <code>hash</code> l√† ƒë·∫ßu ti√™n l·∫•y gi√° tr·ªã <code>hashCode</code> c·ªßa ƒë·ªëi t∆∞·ª£ng <code>key</code>, sau ƒë√≥ th·ª±c hi·ªán ph√©p XOR gi·ªØa c√°c bit cao v√† th·∫•p c·ªßa n√≥ ƒë·ªÉ thu ƒë∆∞·ª£c m·ªôt gi√° tr·ªã bƒÉm m·ªõi. T·∫°i sao l·∫°i s·ª≠ d·ª•ng ph√©p XOR? B·ªüi v√¨ ph√¢n b·ªë c·ªßa c√°c bit cao v√† th·∫•p trong gi√° tr·ªã <code>hashCode</code> l√† kh√° ƒë·ªìng ƒë·ªÅu. N·∫øu ch·ªâ ƒë∆°n gi·∫£n c·ªông ch√∫ng ho·∫∑c th·ª±c hi·ªán ph√©p to√°n bit, c√≥ th·ªÉ d·ªÖ d√†ng x·∫£y ra va ch·∫°m bƒÉm, trong khi ph√©p XOR c√≥ th·ªÉ tr√°nh ƒë∆∞·ª£c v·∫•n ƒë·ªÅ n√†y.</p><p>Ti·∫øp theo, gi√° tr·ªã bƒÉm m·ªõi n√†y ƒë∆∞·ª£c th·ª±c hi·ªán ph√©p l·∫•y d∆∞ (mod), t·ª´ ƒë√≥ thu ƒë∆∞·ª£c v·ªã tr√≠ l∆∞u tr·ªØ th·ª±c t·∫ø. M·ª•c ƒë√≠ch c·ªßa ph√©p l·∫•y d∆∞ n√†y l√† √°nh x·∫° gi√° tr·ªã bƒÉm v√†o ch·ªâ s·ªë c·ªßa th√πng (bucket) trong HashMap. M·ªói th√πng trong m·∫£ng c·ªßa HashMap s·∫Ω l∆∞u tr·ªØ m·ªôt danh s√°ch li√™n k·∫øt (ho·∫∑c c√¢y ƒë·ªè ƒëen), ch·ª©a c√°c c·∫∑p key-value c√≥ c√πng gi√° tr·ªã bƒÉm (n·∫øu kh√¥ng c√≥ gi√° tr·ªã bƒÉm gi·ªëng nhau th√¨ ch·ªâ l∆∞u tr·ªØ m·ªôt c·∫∑p key-value).</p><p>T·ªïng k·∫øt l·∫°i, ph∆∞∆°ng th·ª©c <code>hash</code> c·ªßa HashMap c√≥ nhi·ªám v·ª• l√† x·ª≠ l√Ω gi√° tr·ªã <code>hashCode</code> c·ªßa ƒë·ªëi t∆∞·ª£ng <code>key</code>, t·ª´ ƒë√≥ thu ƒë∆∞·ª£c gi√° tr·ªã bƒÉm cu·ªëi c√πng v√† √°nh x·∫° n√≥ v√†o v·ªã tr√≠ l∆∞u tr·ªØ th·ª±c t·∫ø trong HashMap. Qu√° tr√¨nh n√†y quy·∫øt ƒë·ªãnh hi·ªáu su·∫•t t√¨m ki·∫øm c√°c c·∫∑p key-value trong HashMap.</p><h3 id="_02-co-che-mo-rong-cua-hashmap" tabindex="-1"><a class="header-anchor" href="#_02-co-che-mo-rong-cua-hashmap"><span>02. C∆° ch·∫ø m·ªü r·ªông c·ªßa HashMap</span></a></h3><p>Sau khi hi·ªÉu ƒë∆∞·ª£c ph∆∞∆°ng th·ª©c <code>hash</code>, ch√∫ng ta s·∫Ω ti·∫øp t·ª•c ƒëi s√¢u v√†o v·∫•n ƒë·ªÅ th·ª© hai, ƒë√≥ l√† c∆° ch·∫ø m·ªü r·ªông c·ªßa HashMap.</p><p>Ch√∫ng ta ƒë·ªÅu bi·∫øt r·∫±ng m·∫£ng khi ƒë√£ kh·ªüi t·∫°o k√≠ch th∆∞·ªõc th√¨ kh√¥ng th·ªÉ thay ƒë·ªïi ƒë∆∞·ª£c, do ƒë√≥ ƒë√£ c√≥ c√°c c·∫•u tr√∫c d·ªØ li·ªáu nh∆∞ <a class="route-link" href="/programming/java/collection/arraylist.html">ArrayList</a> l√† &quot;m·∫£ng ƒë·ªông&quot;, c√≥ th·ªÉ t·ª± ƒë·ªông m·ªü r·ªông.</p><p>HashMap d√πng m·∫£ng l√†m n·ªÅn t·∫£ng. Khi th√™m c√°c ph·∫ßn t·ª≠ v√†o HashMap m√† m·∫£ng kh√¥ng c√≤n ƒë·ªß ch·ªó ƒë·ªÉ ch·ª©a th√™m n·ªØa, ta c·∫ßn ph·∫£i m·ªü r·ªông m·∫£ng ƒë·ªÉ c√≥ th·ªÉ ch·ª©a th√™m c√°c ph·∫ßn t·ª≠ m·ªõi; ngo√†i ra, vi·ªác tƒÉng dung l∆∞·ª£ng c≈©ng s·∫Ω tƒÉng hi·ªáu su·∫•t truy v·∫•n t∆∞∆°ng ·ª©ng, v√¨ c√≥ nhi·ªÅu &quot;th√πng&quot; h∆°n, nh·ªØng ph·∫ßn t·ª≠ tr∆∞·ªõc ƒë√¢y c·∫ßn l∆∞u trong danh s√°ch li√™n k·∫øt (ho·∫∑c c√¢y ƒë·ªè ƒëen khi c·∫ßn thi·∫øt ƒë·ªÉ t·ªëi ∆∞u) c√≥ th·ªÉ c√≥ &quot;th√πng&quot; ri√™ng bi·ªát (c√≥ th·ªÉ truy c·∫≠p tr·ª±c ti·∫øp).</p><p>Xem x√©t v√≠ d·ª• sau, ta ƒë·∫∑t dung l∆∞·ª£ng ban ƒë·∫ßu l√† 16:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">HashMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> String</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> map </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> HashMap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">()</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;chenmo&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Ê≤âÈªò&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;wanger&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Áéã‰∫å&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;chenqingyang&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;ÈôàÊ∏ÖÊâ¨&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;xiaozhuanling&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Â∞èËΩ¨ÈìÉ&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;fangxiaowan&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;ÊñπÂ∞èÂ©â&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;yexin&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;Âè∂Ëæõ&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;liuting&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;ÂàòÂ©∑&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;yaoxiaojuan&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;ÂßöÂ∞èÂ®ü&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// Duy·ªát qua HashMap</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">for</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#24292E;--shiki-dark:#E5C07B;">String</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> map</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">keySet</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="color:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> h</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> n </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 16</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (key </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#C678DD;">?</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> :</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">hashCode</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">^</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;&gt;&gt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 16</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> i </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (n </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&amp;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // In ra gi√° tr·ªã hashCode c·ªßa key v√† ch·ªâ s·ªë i</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    System</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">out</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(key </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="color:#032F62;--shiki-dark:#98C379;"> &quot; c√≥ hashCode : &quot;</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> hash </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot; v√† ch·ªâ s·ªë : &quot;</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> i);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>K·∫øt qu·∫£ in ra nh∆∞ sau:</p><div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>liuting c√≥ hashCode : 183821170 v√† ch·ªâ s·ªë : 2</span></span>
<span class="line"><span>xiaozhuanling c√≥ hashCode : 14597045 v√† ch·ªâ s·ªë : 5</span></span>
<span class="line"><span>fangxiaowan c√≥ hashCode : -392727066 v√† ch·ªâ s·ªë : 6</span></span>
<span class="line"><span>yaoxiaojuan c√≥ hashCode : 1231568918 v√† ch·ªâ s·ªë : 6</span></span>
<span class="line"><span>chenmo c√≥ hashCode : -1361556696 v√† ch·ªâ s·ªë : 8</span></span>
<span class="line"><span>chenqingyang c√≥ hashCode : -613818743 v√† ch·ªâ s·ªë : 9</span></span>
<span class="line"><span>yexin c√≥ hashCode : 114873289 v√† ch·ªâ s·ªë : 9</span></span>
<span class="line"><span>wanger c√≥ hashCode : -795084437 v√† ch·ªâ s·ªë : 11</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Nh√¨n v√†o ƒë·∫•y:</p><ul><li>fangxiaowan v√† yaoxiaojuan c√≥ ch·ªâ s·ªë l√† 6;</li><li>chenqingyang v√† yexin c√≥ ch·ªâ s·ªë l√† 9.</li></ul><p>ƒêi·ªÅu n√†y c√≥ nghƒ©a l√†, ta s·∫Ω d√πng ph∆∞∆°ng ph√°p ƒëan xen (s·∫Ω gi·∫£i th√≠ch sau) ƒë·ªÉ cho ch√∫ng v√†o c√πng m·ªôt ch·ªâ s·ªë. Khi tra c·ª©u, kh√¥ng th·ªÉ truy c·∫≠p tr·ª±c ti·∫øp b·∫±ng c√°ch ch·ªâ ƒë·ªãnh ch·ªâ s·ªë (O(1) th·ªùi gian ph·ª©c t·∫°p), m√† ph·∫£i duy·ªát qua (O(n) th·ªùi gian ph·ª©c t·∫°p).</p><p>N·∫øu tƒÉng k√≠ch th∆∞·ªõc m·∫£ng t·ª´ 16 l√™n 32 th√¨ sao?</p><p>ƒê∆°n gi·∫£n l√† thay ƒë·ªïi n t·ª´ 16 th√†nh 32 trong v√≠ d·ª• tr∆∞·ªõc s·∫Ω cho k·∫øt qu·∫£ sau:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">liuting c√≥ hashCode </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 183821170</span><span style="color:#24292E;--shiki-dark:#E06C75;"> v√† ch·ªâ s·ªë </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 18</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">xiaozhuanling c√≥ hashCode </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 14597045</span><span style="color:#24292E;--shiki-dark:#E06C75;"> v√† ch·ªâ s·ªë </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 21</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">fangxiaowan c√≥ hashCode </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> -</span><span style="color:#005CC5;--shiki-dark:#D19A66;">392727066</span><span style="color:#24292E;--shiki-dark:#E06C75;"> v√† ch·ªâ s·ªë </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 6</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">yaoxiaojuan c√≥ hashCode </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1231568918</span><span style="color:#24292E;--shiki-dark:#E06C75;"> v√† ch·ªâ s·ªë </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 22</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">chenmo c√≥ hashCode </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> -</span><span style="color:#005CC5;--shiki-dark:#D19A66;">1361556696</span><span style="color:#24292E;--shiki-dark:#E06C75;"> v√† ch·ªâ s·ªë </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 8</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">chenqingyang c√≥ hashCode </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> -</span><span style="color:#005CC5;--shiki-dark:#D19A66;">613818743</span><span style="color:#24292E;--shiki-dark:#E06C75;"> v√† ch·ªâ s·ªë </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 9</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">yexin c√≥ hashCode </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 114873289</span><span style="color:#24292E;--shiki-dark:#E06C75;"> v√† ch·ªâ s·ªë </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 9</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">wanger c√≥ hashCode </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> -</span><span style="color:#005CC5;--shiki-dark:#D19A66;">795084437</span><span style="color:#24292E;--shiki-dark:#E06C75;"> v√† ch·ªâ s·ªë </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 11</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>C√≥ th·ªÉ th·∫•y:</p><ul><li>M·∫∑c d√π chenqingyang v√† yexin v·∫´n c√≥ ch·ªâ s·ªë l√† 9.</li><li>Nh∆∞ng fangxiaowan c√≥ ch·ªâ s·ªë l√† 6, yaoxiaojuan c√≥ ch·ªâ s·ªë t·ª´ 6 tƒÉng l√™n 22, m·ªói ng∆∞·ªùi ƒë·ªÅu c√≥ ch·ªó tr·ªëng.</li></ul><p>Tuy nhi√™n, m·∫£ng kh√¥ng t·ª± m·ªü r·ªông, v√¨ v·∫≠y n·∫øu b·∫°n mu·ªën m·ªü r·ªông, b·∫°n c·∫ßn t·∫°o m·ªôt m·∫£ng l·ªõn h∆°n, sau ƒë√≥ sao ch√©p c√°c th√†nh ph·∫ßn t·ª´ m·∫£ng nh·ªè h∆°n v√† b·∫°n c·∫ßn ph·∫£i t√≠nh l·∫°i gi√° tr·ªã bƒÉm v√† ph√¢n ph·ªëi l·∫°i c√°c th√πng (t√≠nh l·∫°i ph√¢n b·ªë) th·ªùi gian n√†y c≈©ng hao ph√≠.</p><h4 id="phuong-thuc-resize" tabindex="-1"><a class="header-anchor" href="#phuong-thuc-resize"><span>Ph∆∞∆°ng th·ª©c resize</span></a></h4><p>Qu√° tr√¨nh m·ªü r·ªông c·ªßa HashMap ƒë∆∞·ª£c th·ª±c hi·ªán th√¥ng qua ph∆∞∆°ng th·ª©c resize. Tr√™n JDK 8, n√≥ ƒë√£ t√≠ch h·ª£p c√¢y ƒë·ªè ƒëen (khi ƒë·ªô d√†i c·ªßa danh s√°ch v∆∞·ª£t qu√° 8, danh s√°ch s·∫Ω ƒë∆∞·ª£c chuy·ªÉn th√†nh c√¢y ƒë·ªè ƒëen ƒë·ªÉ tƒÉng hi·ªáu su·∫•t truy v·∫•n), ƒëi·ªÅu n√†y c√≥ th·ªÉ kh√≥ hi·ªÉu ƒë·ªëi v·ªõi ng∆∞·ªùi m·ªõi.</p><p>ƒê·ªÉ gi·∫£m √°p l·ª±c h·ªçc t·∫≠p, ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng m√£ ngu·ªìn c·ªßa JDK 7 ƒë·ªÉ hi·ªÉu r√µ h∆°n. Sau ƒë√≥, khi nh√¨n v√†o JDK 8, m·ªçi th·ª© s·∫Ω tr·ªü n√™n d·ªÖ d√†ng h∆°n nhi·ªÅu.</p><p>H√£y xem m√£ ngu·ªìn ph∆∞∆°ng th·ª©c resize trong Java 7, t√¥i ƒë√£ th√™m ch√∫ th√≠ch:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// newCapacity l√† dung l∆∞·ª£ng m·ªõi</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">void</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> resize</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newCapacity) {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // oldTable l√† m·∫£ng nh·ªè, l√† b·ªô nh·ªõ t·∫°m th·ªùi</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#E5C07B;">    Entry</span><span style="color:#24292E;--shiki-dark:#E06C75;">[] oldTable </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> table</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // oldCapacity l√† dung l∆∞·ª£ng c≈©</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> oldTable</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">length</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // MAXIMUM_CAPACITY l√† dung l∆∞·ª£ng t·ªëi ƒëa, 2 m≈© 30 = 1&lt;&lt;30</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (oldCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#24292E;--shiki-dark:#E06C75;"> MAXIMUM_CAPACITY) {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">        // Dung l∆∞·ª£ng ƒë∆∞·ª£c ƒëi·ªÅu ch·ªânh th√†nh gi√° tr·ªã l·ªõn nh·∫•t c·ªßa Integer, 0x7fffffff (h·ªá s·ªë hexa) = 2 m≈© 31 - 1</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        threshold </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">MAX_VALUE</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // Kh·ªüi t·∫°o m·ªôt m·∫£ng m·ªõi (dung l∆∞·ª£ng l·ªõn)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#E5C07B;">    Entry</span><span style="color:#24292E;--shiki-dark:#E06C75;">[] newTable </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> Entry</span><span style="color:#24292E;--shiki-dark:#E06C75;">[newCapacity]</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // Chuy·ªÉn c√°c ph·∫ßn t·ª≠ t·ª´ m·∫£ng nh·ªè sang m·∫£ng l·ªõn</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    transfer</span><span style="color:#24292E;--shiki-dark:#E06C75;">(newTable</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> initHashSeedAsNeeded</span><span style="color:#24292E;--shiki-dark:#E06C75;">(newCapacity))</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // Tham chi·∫øu ƒë·∫øn m·∫£ng l·ªõn m·ªõi</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    table </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newTable</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // T√≠nh to√°n l·∫°i ng∆∞·ª°ng</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    threshold </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#E5C07B;">Math</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">min</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(newCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">*</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> loadFactor, MAXIMUM_CAPACITY </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ph∆∞∆°ng th·ª©c n√†y nh·∫≠n ƒë·∫ßu v√†o l√† dung l∆∞·ª£ng m·ªõi newCapacity v√† m·ªü r·ªông dung l∆∞·ª£ng c·ªßa HashMap l√™n newCapacity.</p><p>ƒê·∫ßu ti√™n, ph∆∞∆°ng th·ª©c l·∫•y m·∫£ng c≈© oldTable v√† dung l∆∞·ª£ng c≈© oldCapacity c·ªßa HashMap hi·ªán t·∫°i. N·∫øu dung l∆∞·ª£ng c≈© ƒë√£ ƒë·∫°t ƒë·∫øn dung l∆∞·ª£ng t·ªëi ƒëa m√† HashMap h·ªó tr·ª£ MAXIMUM_CAPACITY (2^30), ng∆∞·ª°ng m·ªõi threshold s·∫Ω ƒë∆∞·ª£c ƒë·∫∑t l√† Integer.MAX_VALUE (2 m≈© 31 - 1), b·ªüi v√¨ dung l∆∞·ª£ng c·ªßa HashMap kh√¥ng th·ªÉ v∆∞·ª£t qu√° MAXIMUM_CAPACITY.</p><p>Sau ƒë√≥, ph∆∞∆°ng th·ª©c t·∫°o ra m·ªôt m·∫£ng m·ªõi newTable v√† chuy·ªÉn c√°c ph·∫ßn t·ª≠ t·ª´ m·∫£ng c≈© oldTable sang m·∫£ng m·ªõi newTable. Qu√° tr√¨nh chuy·ªÉn ƒë·ªïi ƒë∆∞·ª£c th·ª±c hi·ªán b·∫±ng c√°ch g·ªçi ph∆∞∆°ng th·ª©c transfer. Ph∆∞∆°ng th·ª©c n√†y duy·ªát qua t·ª´ng bucket trong m·∫£ng c≈© v√† sau khi t√≠nh l·∫°i gi√° tr·ªã bƒÉm c·ªßa m·ªói c·∫∑p kh√≥a-gi√° tr·ªã, ch√®n ch√∫ng v√†o bucket t∆∞∆°ng ·ª©ng trong m·∫£ng m·ªõi.</p><p>Khi qu√° tr√¨nh chuy·ªÉn ƒë·ªïi ho√†n t·∫•t, ph∆∞∆°ng th·ª©c thay ƒë·ªïi tham chi·∫øu m·∫£ng trong HashMap t·ª´ m·∫£ng c≈© table sang m·∫£ng m·ªõi newTable, v√† t√≠nh to√°n l·∫°i ng∆∞·ª°ng threshold. Ng∆∞·ª°ng m·ªõi ƒë∆∞·ª£c t√≠nh l√† gi√° tr·ªã nh·ªè h∆°n gi·ªØa newCapacity * loadFactor v√† MAXIMUM_CAPACITY + 1, nh∆∞ng n·∫øu k·∫øt qu·∫£ t√≠nh to√°n v∆∞·ª£t qu√° dung l∆∞·ª£ng t·ªëi ƒëa MAXIMUM_CAPACITY m√† HashMap h·ªó tr·ª£, th√¨ ng∆∞·ª°ng s·∫Ω ƒë∆∞·ª£c ƒë·∫∑t l√† MAXIMUM_CAPACITY + 1, b·ªüi v√¨ s·ªë l∆∞·ª£ng ph·∫ßn t·ª≠ trong HashMap kh√¥ng th·ªÉ v∆∞·ª£t qu√° MAXIMUM_CAPACITY.</p><h4 id="dung-luong-moi-newcapacity" tabindex="-1"><a class="header-anchor" href="#dung-luong-moi-newcapacity"><span>Dung l∆∞·ª£ng m·ªõi newCapacity</span></a></h4><p>V·∫≠y newCapacity ƒë∆∞·ª£c t√≠nh to√°n nh∆∞ th·∫ø n√†o?</p><p>Trong JDK 7, newCapacity ƒë∆∞·ª£c kh·ªüi t·∫°o b·∫±ng hai l·∫ßn dung l∆∞·ª£ng c≈© oldCapacity. Sau ƒë√≥, n√≥ s·∫Ω ƒë∆∞·ª£c ƒëi·ªÅu ch·ªânh d·ª±a tr√™n c√°c ƒëi·ªÅu ki·ªán sau:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">*</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (newCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> ||</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> MAXIMUM_CAPACITY) {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    newCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> MAXIMUM_CAPACITY</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">} </span><span style="color:#D73A49;--shiki-dark:#C678DD;">else</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (newCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> DEFAULT_INITIAL_CAPACITY) {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    newCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> DEFAULT_INITIAL_CAPACITY</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>N·∫øu newCapacity t√≠nh to√°n v∆∞·ª£t qu√° gi·ªõi h·∫°n dung l∆∞·ª£ng t·ªëi ƒëa c·ªßa HashMap MAXIMUM_CAPACITY (t·ª©c l√† 2^30), th√¨ newCapacity s·∫Ω ƒë∆∞·ª£c ƒë·∫∑t l·∫°i b·∫±ng MAXIMUM_CAPACITY. Ngo√†i ra, n·∫øu newCapacity nh·ªè h∆°n dung l∆∞·ª£ng kh·ªüi t·∫°o m·∫∑c ƒë·ªãnh DEFAULT_INITIAL_CAPACITY (t·ª©c l√† 16), th√¨ newCapacity s·∫Ω ƒë∆∞·ª£c ƒë·∫∑t l·∫°i b·∫±ng DEFAULT_INITIAL_CAPACITY. ƒêi·ªÅu n√†y gi√∫p tr√°nh t√¨nh tr·∫°ng newCapacity qu√° nh·ªè ho·∫∑c qu√° l·ªõn d·∫´n ƒë·∫øn nhi·ªÅu xung ƒë·ªôt bƒÉm ho·∫∑c l√£ng ph√≠ kh√¥ng gian.</p><p>Trong JDK 8, c√°ch t√≠nh to√°n newCapacity ƒë√£ c√≥ m·ªôt s·ªë thay ƒë·ªïi nh·ªè:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&lt;&lt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (newCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> DEFAULT_INITIAL_CAPACITY </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&amp;&amp;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> DEFAULT_INITIAL_CAPACITY) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (newCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> MAXIMUM_CAPACITY)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        newCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> MAXIMUM_CAPACITY</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">} </span><span style="color:#D73A49;--shiki-dark:#C678DD;">else</span><span style="color:#24292E;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (newCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> DEFAULT_INITIAL_CAPACITY)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        newCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> DEFAULT_INITIAL_CAPACITY</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>·ªû ƒë√¢y, <code>oldCapacity &lt;&lt; 1</code> thay th·∫ø cho <code>oldCapacity * 2</code>, ƒëi·ªÅu n√†y s·ª≠ d·ª•ng to√°n t·ª≠ d·ªãch tr√°i (<code>&lt;&lt;</code>).</p><p>ƒê√¢y l√† ph·∫ßn gi·ªõi thi·ªáu ng·∫Øn g·ªçn:</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>a=39</span></span>
<span class="line"><span>b = a &lt;&lt; 2</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>S·ªë th·∫≠p ph√¢n 39 ƒë∆∞·ª£c bi·ªÉu th·ªã d∆∞·ªõi d·∫°ng nh·ªã ph√¢n 8 ch·ªØ s·ªë, l√† 00100111. Sau khi d·ªãch hai v·ªã tr√≠ sang tr√°i, n√≥ l√† 10011100 (c√°c bit th·∫•p ƒë∆∞·ª£c ƒëi·ªÅn b·∫±ng 0), sau ƒë√≥ ƒë∆∞·ª£c chuy·ªÉn ƒë·ªïi th√†nh s·ªë th·∫≠p ph√¢n, l√† 156.</p><p>C√°c ph√©p t√≠nh d·ªãch chuy·ªÉn th∆∞·ªùng c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ thay th·∫ø c√°c ph√©p t√≠nh nh√¢n v√† chia. V√≠ d·ª•: d·ªãch chuy·ªÉn 0010011 (39) sang tr√°i hai v·ªã tr√≠ s·∫Ω tr·ªü th√†nh 10011100 (156), ch√≠nh x√°c g·∫•p 4 l·∫ßn gi√° tr·ªã ban ƒë·∫ßu.</p><p>Tr√™n th·ª±c t·∫ø, sau khi d·ªãch s·ªë nh·ªã ph√¢n sang tr√°i, n√≥ s·∫Ω g·∫•p 2, 4 ho·∫∑c 8 l·∫ßn gi√° tr·ªã ban ƒë·∫ßu. V√† ng∆∞·ª£c l·∫°i d·ªãch sang ph·∫£i s·∫Ω l√† chia 2, 4, 8, ... Ch·ªâ c·∫ßn nh·ªõ ƒëi·ªÅu n√†y.</p><h4 id="phuong-thuc-transfer" tabindex="-1"><a class="header-anchor" href="#phuong-thuc-transfer"><span>Ph∆∞∆°ng th·ª©c transfer</span></a></h4><p>Ti·∫øp theo, h√£y n√≥i v·ªÅ ph∆∞∆°ng th·ª©c transfer, ph∆∞∆°ng th·ª©c n√†y ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ chuy·ªÉn ƒë·ªïi c√°c ph·∫ßn t·ª≠ t·ª´ m·∫£ng nh·ªè c≈© sang m·∫£ng l·ªõn m·ªõi.</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">void</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> transfer</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">Entry</span><span style="color:#24292E;--shiki-dark:#E06C75;">[] newTable</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> boolean</span><span style="color:#24292E;--shiki-dark:#E06C75;"> rehash) {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // Dung l∆∞·ª£ng m·ªõi c·ªßa m·∫£ng</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> newTable</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">length</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // Duy·ªát qua m·∫£ng nh·ªè c≈©</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    for</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#24292E;--shiki-dark:#E5C07B;">Entry</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#24292E;--shiki-dark:#E06C75;"> table) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        while</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#005CC5;--shiki-dark:#D19A66;">null</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e) {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">            // L·∫•y ph·∫ßn t·ª≠ ti·∫øp theo trong chu·ªói (chain)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">            Entry</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> next </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">next</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">            // N·∫øu c·∫ßn t√≠nh l·∫°i hash</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">            if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (rehash) {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">hash</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> ==</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">key</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> ?</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> :</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> hash</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">key</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">            }</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">            // T√≠nh ch·ªâ s·ªë i trong m·∫£ng m·ªõi d·ª±a tr√™n hash c·ªßa key v√† dung l∆∞·ª£ng m·ªõi</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">            int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> i </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> indexFor</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">hash</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newCapacity)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">            // ƒê∆∞a ph·∫ßn t·ª≠ m·ªõi v√†o ƒë·∫ßu danh s√°ch t·∫°i v·ªã tr√≠ i trong m·∫£ng m·ªõi</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">            e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">next</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newTable[i]</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">            newTable[i] </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">            // Ti·∫øp t·ª•c v·ªõi ph·∫ßn t·ª≠ ti·∫øp theo trong chu·ªói</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">            e </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> next</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ph∆∞∆°ng th·ª©c n√†y nh·∫≠n v√†o m·ªôt m·∫£ng m·ªõi <code>newTable</code> v√† m·ªôt gi√° tr·ªã boolean <code>rehash</code>, trong ƒë√≥ <code>newTable</code> ƒë·∫°i di·ªán cho b·∫£ng bƒÉm m·ªõi v√† <code>rehash</code> x√°c ƒë·ªãnh xem c√≥ c·∫ßn t√≠nh l·∫°i gi√° tr·ªã bƒÉm cho c√°c kh√≥a kh√¥ng.</p><p>Trong ph∆∞∆°ng th·ª©c, ƒë·∫ßu ti√™n l·∫•y ra dung l∆∞·ª£ng m·ªõi <code>newCapacity</code> c·ªßa m·∫£ng <code>newTable</code>. Ti·∫øp theo, ph∆∞∆°ng th·ª©c duy·ªát qua t·ª´ng ph·∫ßn t·ª≠ <code>e</code> trong m·∫£ng <code>table</code> (m·∫£ng c≈©). ƒê·ªëi v·ªõi m·ªói ph·∫ßn t·ª≠ <code>e</code>, n√≥ s·ª≠ d·ª•ng ph∆∞∆°ng ph√°p chu·ªói (chain) ƒë·ªÉ l∆∞u tr·ªØ c√°c gi√° tr·ªã kh√°c nhau c·ªßa c√πng m·ªôt kh√≥a. N·∫øu <code>rehash</code> l√† true, ph∆∞∆°ng th·ª©c t√≠nh l·∫°i gi√° tr·ªã bƒÉm c·ªßa kh√≥a v√† l∆∞u gi·ªØ trong thu·ªôc t√≠nh <code>hash</code> c·ªßa <code>e</code>.</p><p>Ti·∫øp theo, ph∆∞∆°ng th·ª©c t√≠nh ch·ªâ s·ªë <code>i</code> trong m·∫£ng m·ªõi d·ª±a tr√™n gi√° tr·ªã bƒÉm <code>e.hash</code> v√† <code>newCapacity</code>.</p><p>Sau ƒë√≥, ph∆∞∆°ng th·ª©c th√™m ph·∫ßn t·ª≠ <code>e</code> v√†o ƒë·∫ßu danh s√°ch t·∫°i v·ªã tr√≠ <code>i</code> trong m·∫£ng m·ªõi <code>newTable</code>. C·ª• th·ªÉ l√† ƒë·∫∑t <code>e.next</code> th√†nh ph·∫ßn t·ª≠ ƒë·∫ßu ti√™n c·ªßa danh s√°ch hi·ªán t·∫°i t·∫°i v·ªã tr√≠ <code>i</code>, v√† sau ƒë√≥ g√°n <code>e</code> l√† ph·∫ßn t·ª≠ ƒë·∫ßu ti√™n c·ªßa danh s√°ch t·∫°i v·ªã tr√≠ <code>i</code> trong <code>newTable</code>.</p><p>Cu·ªëi c√πng, ph∆∞∆°ng th·ª©c ti·∫øp t·ª•c v·ªõi ph·∫ßn t·ª≠ ti·∫øp theo trong chu·ªói (n·∫øu c√≥) b·∫±ng c√°ch g√°n <code>e</code> b·∫±ng <code>next</code>, v√† l·∫∑p l·∫°i qu√° tr√¨nh cho ƒë·∫øn khi h·∫øt chu·ªói c·ªßa ph·∫ßn t·ª≠ hi·ªán t·∫°i.</p><p>Khi ph∆∞∆°ng th·ª©c k·∫øt th√∫c, t·∫•t c·∫£ c√°c ph·∫ßn t·ª≠ t·ª´ m·∫£ng c≈© <code>table</code> ƒë√£ ƒë∆∞·ª£c chuy·ªÉn sang m·∫£ng m·ªõi <code>newTable</code>, ho√†n t·∫•t qu√° tr√¨nh chuy·ªÉn ƒë·ªïi.</p><h4 id="phuong-phap-chaining" tabindex="-1"><a class="header-anchor" href="#phuong-phap-chaining"><span>Ph∆∞∆°ng ph√°p Chaining</span></a></h4><p>Xin l∆∞u √Ω r·∫±ng <code>e.next = newTable[i]</code> s·ª≠ d·ª•ng ph∆∞∆°ng th·ª©c ch√®n v√†o ƒë·∫ßu c·ªßa danh s√°ch li√™n k·∫øt ƒë∆°n. ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† m·ªói khi c√≥ ph·∫ßn t·ª≠ m·ªõi t·∫°i c√πng m·ªôt v·ªã tr√≠, ph·∫ßn t·ª≠ m·ªõi n√†y s·∫Ω lu√¥n ƒë∆∞·ª£c ƒë·∫∑t ·ªü ƒë·∫ßu danh s√°ch. ƒêi·ªÅu n√†y d·∫´n ƒë·∫øn vi·ªác c√°c ph·∫ßn t·ª≠ ƒë∆∞·ª£c th√™m v√†o ƒë·∫ßu c·ªßa danh s√°ch s·∫Ω cu·ªëi c√πng ƒë∆∞·ª£c ƒë∆∞a l√™n cu·ªëi danh s√°ch.</p><p>Tuy nhi√™n, ƒëi·ªÅu n√†y c√≥ th·ªÉ g√¢y ra m·ªôt v·∫•n ƒë·ªÅ: c√°c ph·∫ßn t·ª≠ tr√™n c√πng m·ªôt chu·ªói trong m·∫£ng c≈©, sau khi t√≠nh l·∫°i v·ªã tr√≠ ch·ªâ m·ª•c, c√≥ th·ªÉ ƒë∆∞·ª£c ƒë·∫∑t v√†o c√°c v·ªã tr√≠ kh√°c nhau trong m·∫£ng m·ªõi.</p><p>ƒê·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ n√†y, Java 8 ƒë√£ c√≥ nh·ªØng c·∫£i ti·∫øn ƒë√°ng k·ªÉ (s·∫Ω ƒë∆∞·ª£c th·∫£o lu·∫≠n khi n√≥i ƒë·∫øn qu√° tr√¨nh m·ªü r·ªông).</p><h4 id="mo-rong-trong-java-8" tabindex="-1"><a class="header-anchor" href="#mo-rong-trong-java-8"><span>M·ªü r·ªông trong Java 8</span></a></h4><p>M√£ ngu·ªìn m·ªü r·ªông c·ªßa JDK 8:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">final</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Node</span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;">V</span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">[] </span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">resize</span><span style="color:#24292E;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    Node</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">[] oldTab </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> table</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // L·∫•y m·∫£ng c≈© table</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldCap </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (oldTab </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#C678DD;">?</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> :</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> oldTab</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">length</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // L·∫•y ƒë·ªô d√†i c·ªßa m·∫£ng c≈© oldCap</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldThr </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> threshold</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // L·∫•y ng∆∞·ª°ng threshold</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newCap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newThr </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (oldCap </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#24292E;--shiki-dark:#E06C75;">) { </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// N·∫øu m·∫£ng c≈© table kh√¥ng r·ªóng</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (oldCap </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> MAXIMUM_CAPACITY) { </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// N·∫øu ƒë·ªô d√†i m·∫£ng c≈© v∆∞·ª£t qu√° MAXIMUM_CAPACITY, ch·ªâ ƒë·ªãnh ng∆∞·ª°ng l√† Integer.MAX_VALUE v√† tr·∫£ v·ªÅ m·∫£ng c≈©</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">            threshold </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">MAX_VALUE</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">            return</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldTab</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        }</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        else</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ((newCap </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldCap </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&lt;&lt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> MAXIMUM_CAPACITY </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&amp;&amp;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // N·∫øu ƒë·ªô d√†i m·∫£ng m·ªõi kh√¥ng v∆∞·ª£t qu√° MAXIMUM_CAPACITY v√† oldCap l·ªõn h∆°n ho·∫∑c b·∫±ng DEFAULT_INITIAL_CAPACITY</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                 oldCap </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> DEFAULT_INITIAL_CAPACITY)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">            newThr </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldThr </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&lt;&lt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // double threshold</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    else</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (oldThr </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// initial capacity was placed in threshold</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        newCap </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldThr</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    else</span><span style="color:#24292E;--shiki-dark:#E06C75;"> { </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// zero initial threshold signifies using defaults</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        newCap </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> DEFAULT_INITIAL_CAPACITY</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        newThr </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;">)(DEFAULT_LOAD_FACTOR </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">*</span><span style="color:#24292E;--shiki-dark:#E06C75;"> DEFAULT_INITIAL_CAPACITY)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // T√≠nh to√°n gi·ªõi h·∫°n m·ªü r·ªông m·ªõi</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (newThr </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        float</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ft </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#D73A49;--shiki-dark:#C678DD;">float</span><span style="color:#24292E;--shiki-dark:#E06C75;">)newCap </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">*</span><span style="color:#24292E;--shiki-dark:#E06C75;"> loadFactor</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        newThr </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (newCap </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> MAXIMUM_CAPACITY </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&amp;&amp;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ft </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#D73A49;--shiki-dark:#C678DD;">float</span><span style="color:#24292E;--shiki-dark:#E06C75;">)MAXIMUM_CAPACITY </span><span style="color:#D73A49;--shiki-dark:#C678DD;">?</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                  (</span><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;">)ft </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">MAX_VALUE</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    threshold </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newThr</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // G√°n ng∆∞·ª°ng m·ªü r·ªông m·ªõi cho th√†nh vi√™n threshold</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">SuppressWarnings</span><span style="color:#24292E;--shiki-dark:#E06C75;">({</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;rawtypes&quot;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;unchecked&quot;</span><span style="color:#24292E;--shiki-dark:#E06C75;">})</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        Node</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">[] newTab </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#24292E;--shiki-dark:#E5C07B;">Node</span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;">V</span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">[])</span><span style="color:#D73A49;--shiki-dark:#C678DD;">new</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> Node</span><span style="color:#24292E;--shiki-dark:#E06C75;">[newCap]</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // T·∫°o m·∫£ng m·ªõi newTab</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    table </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newTab</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // G√°n m·∫£ng m·ªõi newTab cho th√†nh vi√™n table</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (oldTab </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) { </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// N·∫øu m·∫£ng c≈© oldTab kh√¥ng r·ªóng</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        for</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> j </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> j </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldCap</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;"> ++</span><span style="color:#24292E;--shiki-dark:#E06C75;">j) { </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// Duy·ªát qua t·ª´ng ph·∫ßn t·ª≠ c·ªßa m·∫£ng c≈©</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">            Node</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">            if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ((e </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldTab[j]) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) { </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// N·∫øu ph·∫ßn t·ª≠ n√†y kh√¥ng r·ªóng</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                oldTab[j] </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // G√°n ph·∫ßn t·ª≠ t·∫°i v·ªã tr√≠ j c·ªßa m·∫£ng c≈© th√†nh null ƒë·ªÉ thu gom r√°c</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#24292E;--shiki-dark:#E5C07B;">e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">next</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> ==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// N·∫øu ph·∫ßn t·ª≠ n√†y kh√¥ng c√≥ va ch·∫°m</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                    newTab[</span><span style="color:#24292E;--shiki-dark:#E5C07B;">e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">hash</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> &amp;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (newCap </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="color:#24292E;--shiki-dark:#E06C75;">)] </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // ƒê∆∞a ph·∫ßn t·ª≠ n√†y v√†o m·∫£ng m·ªõi</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                else</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (e </span><span style="color:#D73A49;--shiki-dark:#C678DD;">instanceof</span><span style="color:#24292E;--shiki-dark:#E06C75;"> TreeNode) </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// N·∫øu ph·∫ßn t·ª≠ n√†y l√† TreeNode</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                    ((</span><span style="color:#24292E;--shiki-dark:#E5C07B;">TreeNode</span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;">V</span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">)e)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">split</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#005CC5;--shiki-dark:#E5C07B;">this</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, newTab, j, oldCap);</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // Chia ph·∫ßn t·ª≠ TreeNode n√†y th√†nh hai danh s√°ch li√™n k·∫øt</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                else</span><span style="color:#24292E;--shiki-dark:#E06C75;"> { </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// N·∫øu ph·∫ßn t·ª≠ n√†y l√† danh s√°ch li√™n k·∫øt</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                    Node</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> loHead </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> loTail </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // ƒê·∫ßu v√† ƒëu√¥i c·ªßa danh s√°ch li√™n k·∫øt th·∫•p</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                    Node</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hiHead </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hiTail </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // ƒê·∫ßu v√† ƒëu√¥i c·ªßa danh s√°ch li√™n k·∫øt cao</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                    Node</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> next</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                    do</span><span style="color:#24292E;--shiki-dark:#E06C75;"> { </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// Duy·ªát qua danh s√°ch li√™n k·∫øt n√†y</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                        next </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">next</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                        if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ((</span><span style="color:#24292E;--shiki-dark:#E5C07B;">e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">hash</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> &amp;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldCap) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#24292E;--shiki-dark:#E06C75;">) { </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// N·∫øu ph·∫ßn t·ª≠ n√†y thu·ªôc danh s√°ch li√™n k·∫øt th·∫•p</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                            if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (loTail </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// N·∫øu danh s√°ch li√™n k·∫øt th·∫•p ch∆∞a c√≥ ph·∫ßn t·ª≠</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                                loHead </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // ƒê·∫∑t ph·∫ßn t·ª≠ n√†y l√†m ƒë·∫ßu danh s√°ch li√™n k·∫øt th·∫•p</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                            else</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                                loTail</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">next</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // N·∫øu danh s√°ch li√™n k·∫øt th·∫•p ƒë√£ c√≥ ph·∫ßn t·ª≠, th√™m ph·∫ßn t·ª≠ n√†y v√†o cu·ªëi danh s√°ch li√™n k·∫øt th·∫•p</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                            loTail </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // C·∫≠p nh·∫≠t ƒëu√¥i c·ªßa danh s√°ch li√™n k·∫øt th·∫•p</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                        }</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                        else</span><span style="color:#24292E;--shiki-dark:#E06C75;"> { </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// N·∫øu ph·∫ßn t·ª≠ n√†y thu·ªôc danh s√°ch li√™n k·∫øt cao</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                            if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (hiTail </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// N·∫øu danh s√°ch li√™n k·∫øt cao ch∆∞a c√≥ ph·∫ßn t·ª≠</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                                hiHead </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // ƒê·∫∑t ph·∫ßn t·ª≠ n√†y l√†m ƒë·∫ßu danh s√°ch li√™n k·∫øt cao</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                            else</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                                hiTail</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">next</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // N·∫øu danh s√°ch li√™n k·∫øt cao ƒë√£ c√≥ ph·∫ßn t·ª≠, th√™m ph·∫ßn t·ª≠ n√†y v√†o cu·ªëi danh s√°ch li√™n k·∫øt cao</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                            hiTail </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // C·∫≠p nh·∫≠t ƒëu√¥i c·ªßa danh s√°ch li√™n k·∫øt cao</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                        }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                    } </span><span style="color:#D73A49;--shiki-dark:#C678DD;">while</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ((e </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> next) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> //</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (loTail </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) { </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// N·∫øu danh s√°ch li√™n k·∫øt th·∫•p kh√¥ng r·ªóng</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                        loTail</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">next</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // G√°n ƒëu√¥i c·ªßa danh s√°ch li√™n k·∫øt th·∫•p th√†nh null ƒë·ªÉ thu gom r√°c</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                        newTab[j] </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> loHead</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // ƒê∆∞a danh s√°ch li√™n k·∫øt th·∫•p v√†o v·ªã tr√≠ t∆∞∆°ng ·ª©ng c·ªßa m·∫£ng m·ªõi</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                    }</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (hiTail </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) { </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// N·∫øu danh s√°ch li√™n k·∫øt cao kh√¥ng r·ªóng</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                        hiTail</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">next</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // G√°n ƒëu√¥i c·ªßa danh s√°ch li√™n k·∫øt cao th√†nh null ƒë·ªÉ thu gom r√°c</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                        newTab[j </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldCap] </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hiHead</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // ƒê∆∞a danh s√°ch li√™n k·∫øt cao v√†o v·ªã tr√≠ t∆∞∆°ng ·ª©ng c·ªßa m·∫£ng m·ªõi</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                    }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">            }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    return</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newTab</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // Tr·∫£ v·ªÅ m·∫£ng m·ªõi</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p>L·∫•y m·∫£ng c≈© <code>table</code>, ƒë·ªô d√†i c·ªßa m·∫£ng <code>oldCap</code>, v√† ng∆∞·ª°ng <code>oldThr</code>.</p></li><li><p>N·∫øu m·∫£ng c≈© <code>table</code> kh√¥ng r·ªóng, t√≠nh to√°n ƒë·ªô d√†i m·∫£ng m·ªõi <code>newCap</code> v√† ng∆∞·ª°ng m·ªõi <code>newThr</code> d·ª±a tr√™n quy t·∫Øc m·ªü r·ªông v√† sao ch√©p c√°c ph·∫ßn t·ª≠ t·ª´ m·∫£ng c≈© sang m·∫£ng m·ªõi.</p></li><li><p>N·∫øu m·∫£ng c≈© <code>table</code> r·ªóng nh∆∞ng ng∆∞·ª°ng <code>oldThr</code> l·ªõn h∆°n 0, ƒë·ªô d√†i m·∫£ng m·ªõi <code>newCap</code> s·∫Ω l√† ng∆∞·ª°ng c≈© <code>oldThr</code>.</p></li><li><p>N·∫øu c·∫£ m·∫£ng c≈© <code>table</code> v√† ng∆∞·ª°ng <code>oldThr</code> ƒë·ªÅu b·∫±ng 0, ƒëi·ªÅu n√†y cho th·∫•y HashMap ƒë∆∞·ª£c t·∫°o b·∫±ng constructor kh√¥ng tham s·ªë, v√¨ v·∫≠y t√≠nh to√°n m·∫∑c ƒë·ªãnh cho ƒë·ªô d√†i m·∫£ng <code>DEFAULT_INITIAL_CAPACITY (16)</code> v√† ng∆∞·ª°ng m·ªü r·ªông <code>DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY</code>.</p></li><li><p>T√≠nh to√°n ng∆∞·ª°ng m·ªü r·ªông <code>threshold</code> m·ªõi v√† g√°n cho bi·∫øn th√†nh vi√™n <code>threshold</code>.</p></li><li><p>T·∫°o m·∫£ng m·ªõi <code>newTab</code> v√† g√°n cho bi·∫øn th√†nh vi√™n <code>table</code>.</p></li><li><p>N·∫øu m·∫£ng c≈© <code>oldTab</code> kh√¥ng r·ªóng, sao ch√©p c√°c ph·∫ßn t·ª≠ t·ª´ m·∫£ng c≈© sang m·∫£ng m·ªõi v√† x·ª≠ l√Ω va ch·∫°m b·∫±ng c√°ch chia ph·∫ßn t·ª≠ <code>TreeNode</code> ho·∫∑c danh s√°ch li√™n k·∫øt.</p></li><li><p>Tr·∫£ v·ªÅ m·∫£ng m·ªõi <code>newTab</code>.</p></li></ol><p>Trong JDK 7, ph∆∞∆°ng th·ª©c ƒë·ªÉ x√°c ƒë·ªãnh v·ªã tr√≠ c·ªßa ph·∫ßn t·ª≠ trong HashMap ƒë∆∞·ª£c th·ª±c hi·ªán nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">static</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> int</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> indexFor</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> h</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> length) {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // assert Integer.bitCount(length) == 1 : &quot;length must be a non-zero power of 2&quot;;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    return</span><span style="color:#24292E;--shiki-dark:#E06C75;"> h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&amp;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (length</span><span style="color:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="color:#005CC5;--shiki-dark:#D19A66;">1</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ph∆∞∆°ng th·ª©c n√†y th·ª±c ch·∫•t l√† th·ª±c hi·ªán ph√©p AND bit gi·ªØa gi√° tr·ªã hash c·ªßa key <code>h</code> v√† ƒë·ªô d√†i c·ªßa m·∫£ng <code>length</code>, t∆∞∆°ng ƒë∆∞∆°ng v·ªõi ph√©p <code>h % length</code> (chia l·∫•y d∆∞). Ph∆∞∆°ng th·ª©c n√†y ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ t√≠nh to√°n v·ªã tr√≠ c·ªßa ph·∫ßn t·ª≠ trong m·∫£ng d·ª±a tr√™n gi√° tr·ªã hash c·ªßa key.</p><p>Gi·ªù ch√∫ng ta ƒëi ph√¢n t√≠ch tr∆∞·ªùng h·ª£p tr∆∞·ªõc v√† sau khi m·ªü r·ªông m·∫£ng, gi·∫£ s·ª≠ ƒë·ªô d√†i m·∫£ng <code>table</code> ban ƒë·∫ßu l√† 2 v√† h·ªá s·ªë t·∫£i <code>loadFactor</code> l√† 1, t·ª©c l√† khi s·ªë l∆∞·ª£ng ph·∫ßn t·ª≠ v∆∞·ª£t qu√° ƒë·ªô d√†i c·ªßa m·∫£ng th√¨ th·ª±c hi·ªán m·ªü r·ªông.</p><p><strong>T√¨nh hu·ªëng ban ƒë·∫ßu:</strong></p><p>ƒê·ªô d√†i m·∫£ng <code>table.length = 2</code>, v√† c√°c key c√≥ gi√° tr·ªã hash l·∫ßn l∆∞·ª£t l√† 3, 7, 5.</p><p>Sau thao t√°c modulo, m·ªôt xung ƒë·ªôt bƒÉm ƒë√£ x·∫£y ra tr√™n c√°c key v√† t·∫•t c·∫£ ch√∫ng ƒë·ªÅu v√†o¬†<code>table[1]</code>. V√¨ v·∫≠y, ƒë√¢y l√† nh·ªØng g√¨ n√≥ tr√¥ng gi·ªëng nh∆∞ tr∆∞·ªõc khi m·ªü r·ªông.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220126917.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Dung l∆∞·ª£ng c·ªßa m·∫£ng l√† 2 v√† c√°c ph·∫ßn t·ª≠ c√≥ kh√≥a 3, 7 v√† 5 ƒë·ªÅu v√†o¬†<code>table[1]</code> v√† xung ƒë·ªôt bƒÉm c·∫ßn ƒë∆∞·ª£c gi·∫£i quy·∫øt th√¥ng qua ph∆∞∆°ng ph√°p chaining.</p><p>H·ªá s·ªë t·∫£i LoadFactor l√† 1, nghƒ©a l√† vi·ªác m·ªü r·ªông ƒë∆∞·ª£c th·ª±c hi·ªán khi s·ªë ph·∫ßn t·ª≠ l·ªõn h∆°n ƒë·ªô d√†i c·ªßa b·∫£ng.</p><p>Sau khi m·ªü r·ªông, ƒë·ªô d√†i m·∫£ng <code>table</code> tƒÉng l√™n 4.</p><ul><li>Key 3 sau khi t√≠nh to√°n <code>3 % 4</code> l√† 3, ƒë∆∞·ª£c ƒë·∫∑t v√†o <code>table[3]</code>.</li><li>Key 7 sau khi t√≠nh to√°n <code>7 % 4</code> l√† 3, ƒë∆∞·ª£c ƒë·∫∑t v√†o ƒë·∫ßu danh s√°ch li√™n k·∫øt c·ªßa <code>table[3]</code>.</li><li>Key 5 sau khi t√≠nh to√°n <code>5 % 4</code> l√† 1, ƒë∆∞·ª£c ƒë·∫∑t v√†o <code>table[1]</code>.</li></ul><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220131276.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Key 7 di chuy·ªÉn tr∆∞·ªõc 3 v√¨ JDK 7 s·ª≠ d·ª•ng ph∆∞∆°ng ph√°p ch√®n ƒë·∫ßu.</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">next</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newTable[i]</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ƒê·ªìng th·ªùi, key 5 m·ªü r·ªông di chuy·ªÉn ƒë·∫øn v·ªã tr√≠ c√≥ ch·ªâ s·ªë 1.</p><p>Trong t√¨nh hu·ªëng t·ªët nh·∫•t, sau khi m·ªü r·ªông, key 7 s·∫Ω ƒë∆∞·ª£c ƒë·∫∑t sau key 3, v√† key 5 s·∫Ω ƒë∆∞·ª£c ƒë·∫∑t sau key 7, gi·ªØ nguy√™n th·ª© t·ª± ban ƒë·∫ßu.</p><p>JDK 8 ho√†n to√†n ƒë·∫£o ng∆∞·ª£c t√¨nh tr·∫°ng n√†y, v√¨ thu·∫≠t to√°n bƒÉm c·ªßa JDK 8 ƒë√£ ƒë∆∞·ª£c t·ªëi ∆∞u h√≥a v√† khi ƒë·ªô d√†i m·∫£ng l√† l≈©y th·ª´a c·ªßa 2, n√≥ c√≥ th·ªÉ gi·∫£i quy·∫øt m·ªôt c√°ch kh√©o l√©o c√°c v·∫•n ƒë·ªÅ g·∫∑p ph·∫£i trong JDK 7.</p><p>M√£ m·ªü r·ªông cho JDK 8 nh∆∞ sau:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">Node</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">[] newTab </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> Node</span><span style="color:#24292E;--shiki-dark:#E06C75;">[newCapacity]</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">for</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> j </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> j </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> oldTab</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">length</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> j</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">++</span><span style="color:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    Node</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldTab[j]</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (e </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">hash</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newIndex </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&amp;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (newCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // T√≠nh v·ªã tr√≠ m·ªõi trong m·∫£ng m·ªõi</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">        // Di chuy·ªÉn n√∫t v√†o v·ªã tr√≠ t∆∞∆°ng ·ª©ng trong m·∫£ng m·ªõi</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        newTab[newIndex] </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>·ªû ƒë√¢y, c√°ch t√≠nh v·ªã tr√≠ m·ªõi l√† <code>hash &amp; (newCapacity - 1)</code>, t∆∞∆°ng t·ª± nh∆∞ JDK 7 <code>h &amp; (length-1)</code>. Ph·∫ßn kh√°c bi·ªát ch·ªß y·∫øu n·∫±m ·ªü h√†m bƒÉm trong JDK 8:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">static</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> final</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> int</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> hash</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">Object</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> h</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    return</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (key </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#C678DD;">?</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> :</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">hashCode</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">^</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;&gt;&gt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 16</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ƒêo·∫°n m√£ n√†y th·ª±c hi·ªán vi·ªác l·∫•y gi√° tr·ªã hash 32 bit c·ªßa key <code>key.hashCode()</code> v√† th·ª±c hi·ªán ph√©p XOR v·ªõi k·∫øt qu·∫£ c·ªßa ph√©p d·ªãch ph·∫£i kh√¥ng d·∫•u 16 bit c·ªßa <code>h</code>. ƒêi·ªÅu n√†y gi√∫p ph√¢n t√°n c√°c gi√° tr·ªã hash c·ªßa c√°c key kh√°c nhau m·ªôt c√°ch hi·ªáu qu·∫£ h∆°n, gi·∫£m thi·ªÉu xung ƒë·ªôt v√† c·∫£i thi·ªán hi·ªáu su·∫•t c·ªßa HashMap.</p><p>JDK 7 gi·ªëng th·∫ø n√†y:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">final</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> int</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> hash</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">Object</span><span style="color:#24292E;--shiki-dark:#E06C75;"> k) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hashSeed</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#005CC5;--shiki-dark:#D19A66;">0</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&amp;&amp;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> k </span><span style="color:#D73A49;--shiki-dark:#C678DD;">instanceof</span><span style="color:#24292E;--shiki-dark:#E06C75;"> String) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> sun</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">misc</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">Hashing</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">stringHash32</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">((String) k);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">^=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> k</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">hashCode</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // This function ensures that hashCodes that differ only by</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // constant multiples at each bit position have a bounded</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // number of collisions (approximately 8 at default load factor).</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">^=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;&gt;&gt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 20</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">^</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;&gt;&gt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 12</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    return</span><span style="color:#24292E;--shiki-dark:#E06C75;"> h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">^</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;&gt;&gt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 7</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">^</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;&gt;&gt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 4</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>N·∫øu s·ª≠ d·ª•ng thu·∫≠t to√°n bƒÉm c·ªßa JDK 8 ƒë·ªÉ t√≠nh gi√° tr·ªã bƒÉm, ch√∫ng ta s·∫Ω t√¨m th·∫•y ƒëi·ªÅu g√¨ ƒë√≥ ƒë·∫∑c bi·ªát.</p><p>Gi·∫£ s·ª≠ tr∆∞·ªõc khi m·ªü r·ªông, ƒë·ªô d√†i m·∫£ng l√† 16 (n-1 l√† 0000 1111), v√† c√°c key c√≥ hash nh∆∞ sau: key1 l√† 5 (0000 0101), key2 l√† 21 (0001 0101).</p><ul><li>key1 &amp; (n-1) cho k·∫øt qu·∫£ l√† 0000 0101, t·ª©c l√† 5.</li><li>key2 &amp; (n-1) cho k·∫øt qu·∫£ l√† 0000 0101, t·ª©c l√† 5.</li><li>T·∫°i th·ªùi ƒëi·ªÉm n√†y, c√≥ xung ƒë·ªôt bƒÉm v√† ph∆∞∆°ng ph√°p chaining ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ gi·∫£i quy·∫øt xung ƒë·ªôt bƒÉm.</li></ul><p>Khi m·∫£ng ƒë∆∞·ª£c m·ªü r·ªông l√™n g·∫•p ƒë√¥i, t·ª©c l√† 32 (n-1 l√† 0001 1111):</p><ul><li>key1 &amp; (n-1) cho k·∫øt qu·∫£ l√† 0000 0101, t·ª©c l√† 5.</li><li>key2 &amp; (n-1) cho k·∫øt qu·∫£ l√† 0001 0101, t·ª©c l√† 21 (5 + 16), t·∫°i v·ªã tr√≠ g·∫•p ƒë√¥i c·ªßa v·ªã tr√≠ trong m·∫£ng c≈©.</li></ul><p>Th·∫≠t tuy·ªát v·ªùi ph·∫£i kh√¥ng?</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220139193.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>N√≥i c√°ch kh√°c, theo thu·∫≠t to√°n bƒÉm m·ªõi c·ªßa JDK 8, v·ªã tr√≠ ch·ªâ m·ª•c sau khi m·∫£ng ƒë∆∞·ª£c m·ªü r·ªông l√† v·ªã tr√≠ ch·ªâ m·ª•c g·ªëc ho·∫∑c &quot;ch·ªâ m·ª•c g·ªëc + dung l∆∞·ª£ng g·ªëc&quot;, tu√¢n theo c√°c quy t·∫Øc nh·∫•t ƒë·ªãnh.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220140253.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>T·∫•t nhi√™n, c√¥ng lao n√†y thu·ªôc v·ªÅ c·∫£ thu·∫≠t to√°n bƒÉm m·ªõi v√† ti·ªÅn ƒë·ªÅ r·∫±ng n l√† l≈©y th·ª´a nguy√™n c·ªßa 2. ƒê√¢y l√† k·∫øt qu·∫£ c·ªßa nh·ªØng n·ªó l·ª±c chung c·ªßa h·ªç¬†<code>hash &amp; (newCapacity - 1)</code>.</p><h4 id="tom-tat-1" tabindex="-1"><a class="header-anchor" href="#tom-tat-1"><span>T√≥m t·∫Øt</span></a></h4><p>Khi th√™m c√°c ph·∫ßn t·ª≠ v√†o HashMap, n·∫øu s·ªë l∆∞·ª£ng ph·∫ßn t·ª≠ v∆∞·ª£t qua gi·ªõi h·∫°n ƒë∆∞·ª£c x√°c ƒë·ªãnh b·ªüi t√≠ch c·ªßa h·ªá s·ªë t·∫£i (load factor) v√† ƒë·ªô d√†i c·ªßa m·∫£ng, HashMap s·∫Ω th·ª±c hi·ªán thao t√°c m·ªü r·ªông t·ª± ƒë·ªông ƒë·ªÉ ƒë·∫£m b·∫£o r·∫±ng kh√¥ng c√≥ qu√° nhi·ªÅu ph·∫ßn t·ª≠ trong b·ªô nh·ªõ.</p><h5 id="qua-trinh-mo-rong-cua-hashmap" tabindex="-1"><a class="header-anchor" href="#qua-trinh-mo-rong-cua-hashmap"><span>Qu√° tr√¨nh m·ªü r·ªông c·ªßa HashMap</span></a></h5><ol><li><p><strong>ƒêi·ªÅu ki·ªán m·ªü r·ªông</strong>: Khi s·ªë l∆∞·ª£ng ph·∫ßn t·ª≠ v∆∞·ª£t qu√° load factor nh√¢n v·ªõi ƒë·ªô d√†i m·∫£ng, HashMap s·∫Ω m·ªü r·ªông m·∫£ng l√™n g·∫•p ƒë√¥i.</p></li><li><p><strong>B∆∞·ªõc m·ªü r·ªông</strong>:</p><ul><li>HashMap t·∫°o m·ªôt m·∫£ng m·ªõi c√≥ ƒë·ªô d√†i g·∫•p ƒë√¥i so v·ªõi m·∫£ng hi·ªán t·∫°i.</li><li>T·∫•t c·∫£ c√°c ph·∫ßn t·ª≠ t·ª´ m·∫£ng c≈© ƒë∆∞·ª£c t√°i ph√¢n b·ªë v√†o m·∫£ng m·ªõi d·ª±a tr√™n gi√° tr·ªã hash c·ªßa key v√† ƒë·ªô d√†i m·ªõi c·ªßa m·∫£ng.</li></ul></li><li><p><strong>Ph√¢n b·ªë ph·∫ßn t·ª≠</strong>:</p><ul><li>M·ªói ph·∫ßn t·ª≠ ƒë∆∞·ª£c x√°c ƒë·ªãnh v·ªã tr√≠ m·ªõi trong m·∫£ng m·ªõi b·∫±ng c√°ch s·ª≠ d·ª•ng ph√©p to√°n <code>hash &amp; (newCapacity - 1)</code>, v·ªõi <code>newCapacity</code> l√† ƒë·ªô d√†i m·ªõi c·ªßa m·∫£ng.</li><li>Ph·∫ßn l·ªõn c√°c ph·∫ßn t·ª≠ v·∫´n gi·ªØ nguy√™n v·ªã tr√≠, nh∆∞ng m·ªôt s·ªë ph·∫ßn t·ª≠ s·∫Ω di chuy·ªÉn ƒë·∫øn c√°c v·ªã tr√≠ m·ªõi ƒë∆∞·ª£c t√≠nh b·∫±ng &quot;v·ªã tr√≠ c≈© + ƒë·ªô d√†i c≈© c·ªßa m·∫£ng&quot;.</li></ul></li></ol><h3 id="_03-tai-sao-he-so-tai-lai-la-0-75" tabindex="-1"><a class="header-anchor" href="#_03-tai-sao-he-so-tai-lai-la-0-75"><span>03. T·∫°i sao h·ªá s·ªë t·∫£i l·∫°i l√† 0,75?</span></a></h3><p>Trong c√¢u h·ªèi tr∆∞·ªõc ƒë√≥ ƒë√£ ƒë·ªÅ c·∫≠p ƒë·∫øn h·ªá s·ªë t·∫£i (hay c√≤n g·ªçi l√† h·ªá s·ªë t·∫£i), v·∫≠y c√¢u h·ªèi n√†y ch√∫ng ta s·∫Ω th·∫£o lu·∫≠n t·∫°i sao h·ªá s·ªë t·∫£i l·∫°i l√† 0.75 m√† kh√¥ng ph·∫£i l√† 0.6, 0.8.</p><p>Ch√∫ng ta bi·∫øt r·∫±ng, HashMap ƒë∆∞·ª£c th·ª±c hi·ªán b·∫±ng c√°ch s·ª≠ d·ª•ng m·∫£ng k·∫øt h·ª£p v·ªõi danh s√°ch li√™n k·∫øt / c√¢y ƒë·ªè ƒëen, ƒë·ªÉ th√™m d·ªØ li·ªáu (ph·∫ßn t·ª≠/ c·∫∑p kh√≥a gi√° tr·ªã) v√†o HashMap ho·∫∑c l·∫•y d·ªØ li·ªáu t·ª´ ƒë√≥, ch√∫ng ta c·∫ßn x√°c ƒë·ªãnh ch·ªâ s·ªë (ch·ªâ m·ª•c) c·ªßa d·ªØ li·ªáu trong m·∫£ng.</p><p>ƒê·∫ßu ti√™n, ch√∫ng ta s·∫Ω bƒÉm kh√≥a d·ªØ li·ªáu m·ªôt l·∫ßn:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">static</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> final</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> int</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> hash</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">Object</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> h</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    return</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (key </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#C678DD;">?</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> :</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">hashCode</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">^</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (h </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;&gt;&gt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 16</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ti·∫øp theo, ch√∫ng ta s·∫Ω th·ª±c hi·ªán ph√©p to√°n l·∫•y d∆∞ ƒë·ªÉ x√°c ƒë·ªãnh ch·ªâ s·ªë:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">i </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (n </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&amp;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Qu√° tr√¨nh n√†y c√≥ th·ªÉ d·∫´n ƒë·∫øn hai v·∫•n ƒë·ªÅ:</p><ul><li>K√≠ch th∆∞·ªõc c·ªßa m·∫£ng qu√° nh·ªè, sau khi t√≠nh to√°n bƒÉm, ch·ªâ s·ªë d·ªÖ g√¢y ra xung ƒë·ªôt.</li><li>K√≠ch th∆∞·ªõc c·ªßa m·∫£ng qu√° l·ªõn, d·∫´n ƒë·∫øn kh√¥ng t·∫≠n d·ª•ng t·ªët kh√¥ng gian.</li></ul><p>H·ªá s·ªë t·∫£i ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ bi·ªÉu th·ªã m·ª©c ƒë·ªô l·∫•p ƒë·∫ßy d·ªØ li·ªáu trong HashMap:</p><blockquote><p>H·ªá s·ªë t·∫£i = S·ªë l∆∞·ª£ng d·ªØ li·ªáu ƒë√£ ƒëi·ªÅn v√†o b·∫£ng bƒÉm / ƒê·ªô d√†i c·ªßa b·∫£ng bƒÉm</p></blockquote><p>ƒêi·ªÅu n√†y c√≥ nghƒ©a l√†:</p><ul><li>H·ªá s·ªë t·∫£i c√†ng nh·ªè, s·ªë l∆∞·ª£ng d·ªØ li·ªáu ƒëi·ªÅn v√†o c√†ng √≠t, nguy c∆° xung ƒë·ªôt bƒÉm c√†ng gi·∫£m, nh∆∞ng ƒë·ªìng th·ªùi l√£ng ph√≠ kh√¥ng gian v√† tƒÉng kh·∫£ nƒÉng k√≠ch ho·∫°t qu√° tr√¨nh m·ªü r·ªông.</li><li>H·ªá s·ªë t·∫£i c√†ng l·ªõn, s·ªë l∆∞·ª£ng d·ªØ li·ªáu ƒëi·ªÅn v√†o c√†ng nhi·ªÅu, t·∫≠n d·ª•ng kh√¥ng gian c√†ng t·ªët, nh∆∞ng nguy c∆° xung ƒë·ªôt bƒÉm c√†ng cao.</li></ul><p>Th·∫≠t kh√≥ khƒÉn! ! ! !</p><p>ƒêi·ªÅu n√†y ƒë√≤i h·ªèi ch√∫ng ta ph·∫£i c√¢n b·∫±ng gi·ªØa &quot;xung ƒë·ªôt bƒÉm&quot; v√† &quot;t·∫≠n d·ª•ng kh√¥ng gian&quot;, c·ªë g·∫Øng duy tr√¨ s·ª± c√¢n b·∫±ng, kh√¥ng l√†m ·∫£nh h∆∞·ªüng ƒë·∫øn nhau.</p><p>Ch√∫ng ta bi·∫øt r·∫±ng, HashMap gi·∫£i quy·∫øt xung ƒë·ªôt bƒÉm b·∫±ng ph∆∞∆°ng ph√°p x√≠ch ƒëu (chaining).</p><p>ƒê·ªÉ gi·∫£m thi·ªÉu kh·∫£ nƒÉng x·∫£y ra xung ƒë·ªôt bƒÉm, khi ƒë·ªô d√†i m·∫£ng c·ªßa HashMap ƒë·∫°t ƒë·∫øn m·ªôt &quot;gi√° tr·ªã ng∆∞·ª°ng&quot; n√†o ƒë√≥, qu√° tr√¨nh m·ªü r·ªông s·∫Ω ƒë∆∞·ª£c k√≠ch ho·∫°t. Sau khi m·ªü r·ªông, c√°c ph·∫ßn t·ª≠ t·ª´ m·∫£ng nh·ªè tr∆∞·ªõc ƒë√≥ s·∫Ω ƒë∆∞·ª£c chuy·ªÉn sang m·∫£ng l·ªõn h∆°n, ƒë√¢y l√† m·ªôt ho·∫°t ƒë·ªông t·ªën th·ªùi gian.</p><p>Gi√° tr·ªã ng∆∞·ª°ng n√†y ƒë∆∞·ª£c x√°c ƒë·ªãnh b·ªüi ƒëi·ªÅu g√¨?</p><blockquote><p>Gi√° tr·ªã ng∆∞·ª°ng = Dung l∆∞·ª£ng ban ƒë·∫ßu * H·ªá s·ªë t·∫£i</p></blockquote><p>Ban ƒë·∫ßu, dung l∆∞·ª£ng c·ªßa HashMap l√† 16:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">static</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> final</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> DEFAULT_INITIAL_CAPACITY </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> &lt;&lt;</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 4</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"> // t∆∞∆°ng ƒë∆∞∆°ng v·ªõi 16</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>H·ªá s·ªë t·∫£i l√† 0.75:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">static</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> final</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> float</span><span style="color:#24292E;--shiki-dark:#E06C75;"> DEFAULT_LOAD_FACTOR </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0.75f</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ƒêi·ªÅu n√†y c√≥ nghƒ©a l√†, khi 16 * 0.75 = 12, qu√° tr√¨nh m·ªü r·ªông s·∫Ω ƒë∆∞·ª£c k√≠ch ho·∫°t.</p><p><strong>T·∫°i sao l·∫°i ch·ªçn h·ªá s·ªë t·∫£i l√† 0.75? T·∫°i sao kh√¥ng ph·∫£i l√† 0.8, 0.6?</strong></p><p>ƒêi·ªÅu n√†y li√™n quan ƒë·∫øn m·ªôt nguy√™n l√Ω quan tr·ªçng trong th·ªëng k√™ - ph√¢n ph·ªëi Poisson.</p><p>ƒê√£ ƒë·∫øn l√∫c tham kh·∫£o Wikipedia:</p><blockquote><p>Ph√¢n ph·ªëi Poisson l√† m·ªôt ph√¢n ph·ªëi x√°c su·∫•t r·ªùi r·∫°c ph·ªï bi·∫øn trong th·ªëng k√™ v√† x√°c su·∫•t h·ªçc, ƒë∆∞·ª£c nh√† to√°n h·ªçc ng∆∞·ªùi Ph√°p Simeon-Denis Poisson ƒë·ªÅ xu·∫•t v√†o nƒÉm 1838. N√≥ m√¥ h√¨nh ho√° s·ªë l·∫ßn x·∫£y ra c·ªßa m·ªôt s·ª± ki·ªán ng·∫´u nhi√™n trong m·ªôt kho·∫£ng th·ªùi gian, kho·∫£ng c√°ch, di·ªán t√≠ch, v.v.</p></blockquote><p>Gi√°o s∆∞ Ruan Yi Phong t·ª´ng chi ti·∫øt gi·ªõi thi·ªáu ph√¢n ph·ªëi Poisson v√† ph√¢n ph·ªëi m≈©, m·ªçi ng∆∞·ªùi c√≥ th·ªÉ xem qua.</p><blockquote><p>Li√™n k·∫øt: <a href="https://www.ruanyifeng.com/blog/2015/06/poisson-distribution.html" target="_blank" rel="noopener noreferrer">https://www.ruanyifeng.com/blog/2015/06/poisson-distribution.html</a></p></blockquote><p>C·ª• th·ªÉ, n√≥ ƒë∆∞·ª£c bi·ªÉu di·ªÖn b·∫±ng m·ªôt c√¥ng th·ª©c nh∆∞ v·∫≠y.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220154191.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Trong t√†i li·ªáu doc ‚Äã‚Äãc·ªßa HashMap c√≥ m√¥ t·∫£ nh∆∞ sau:</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>Because TreeNodes are about twice the size of regular nodes, we</span></span>
<span class="line"><span>use them only when bins contain enough nodes to warrant use</span></span>
<span class="line"><span>(see TREEIFY_THRESHOLD). And when they become too small (due to</span></span>
<span class="line"><span>removal or resizing) they are converted back to plain bins.  In</span></span>
<span class="line"><span>usages with well-distributed user hashCodes, tree bins are</span></span>
<span class="line"><span>rarely used.  Ideally, under random hashCodes, the frequency of</span></span>
<span class="line"><span>nodes in bins follows a Poisson distribution</span></span>
<span class="line"><span>(http://en.wikipedia.org/wiki/Poisson_distribution) with a</span></span>
<span class="line"><span>parameter of about 0.5 on average for the default resizing</span></span>
<span class="line"><span>threshold of 0.75, although with a large variance because of</span></span>
<span class="line"><span>resizing granularity. Ignoring variance, the expected</span></span>
<span class="line"><span>occurrences of list size k are (exp(-0.5) * pow(0.5, k) /</span></span>
<span class="line"><span>factorial(k)). The first values are:</span></span>
<span class="line"><span>0:    0.60653066</span></span>
<span class="line"><span>1:    0.30326533</span></span>
<span class="line"><span>2:    0.07581633</span></span>
<span class="line"><span>3:    0.01263606</span></span>
<span class="line"><span>4:    0.00157952</span></span>
<span class="line"><span>5:    0.00015795</span></span>
<span class="line"><span>6:    0.00001316</span></span>
<span class="line"><span>7:    0.00000094</span></span>
<span class="line"><span>8:    0.00000006</span></span>
<span class="line"><span>more: less than 1 in ten million</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ƒê·ªÉ m·ªçi ng∆∞·ªùi d·ªÖ hi·ªÉu, ch√∫ng ta c√πng xem l·∫°i ph∆∞∆°ng ph√°p zip v√† c·∫•u tr√∫c c√¢y ƒë·ªè ƒëen c·ªßa HashMap.</p><p>Tr∆∞·ªõc Java 8, HashMap ƒë√£ s·ª≠ d·ª•ng danh s√°ch li√™n k·∫øt ƒë·ªÉ gi·∫£i quy·∫øt xung ƒë·ªôt, nghƒ©a l√† khi hai ho·∫∑c nhi·ªÅu kh√≥a ƒë∆∞·ª£c √°nh x·∫° v√†o c√πng m·ªôt nh√≥m, ch√∫ng s·∫Ω ƒë∆∞·ª£c ƒë·∫∑t v√†o danh s√°ch li√™n k·∫øt c·ªßa c√πng m·ªôt nh√≥m. Khi c√≥ qu√° nhi·ªÅu n√∫t (Node) trong danh s√°ch li√™n k·∫øt, danh s√°ch li√™n k·∫øt s·∫Ω tr·ªü n√™n r·∫•t d√†i v√† hi·ªáu qu·∫£ t√¨m ki·∫øm (Hi·ªáu qu·∫£ t√¨m ki·∫øm l√† O(n)) s·∫Ω b·ªã ·∫£nh h∆∞·ªüng.</p><p>Trong Java 8, khi s·ªë l∆∞·ª£ng n√∫t trong danh s√°ch li√™n k·∫øt v∆∞·ª£t qu√° ng∆∞·ª°ng (8), danh s√°ch li√™n k·∫øt s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·ªïi th√†nh c√¢y ƒë·ªè ƒëen (n√∫t l√† TreeNode) v√† c√¢y ƒë·ªè ƒëen (khi n√≥i v·ªÅ¬†<a href="/programming/java/collection/treemap">TreeMap</a> l√† m·ªôt c·∫•u tr√∫c c√¢y c√¢n b·∫±ng hi·ªáu qu·∫£ c√≥ th·ªÉ ho√†n th√†nh c√°c thao t√°c ch√®n, x√≥a v√† t√¨m ki·∫øm trong th·ªùi gian O(log n). C·∫•u tr√∫c n√†y c√≥ th·ªÉ c·∫£i thi·ªán hi·ªáu su·∫•t v√† kh·∫£ nƒÉng m·ªü r·ªông c·ªßa HashMap khi s·ªë l∆∞·ª£ng n√∫t l·ªõn.</p><p>M·∫∑c d√π m·ª•c ƒë√≠ch ban ƒë·∫ßu c·ªßa ƒëo·∫°n n√†y l√† ƒë·ªÉ tr√¨nh b√†y l√Ω do t·∫°i sao vi·ªác chuy·ªÉn ƒë·ªïi c√¢y ƒë·ªè-ƒëen ƒë∆∞·ª£c th·ª±c hi·ªán khi chi·ªÅu d√†i d√¢y k√©o v∆∞·ª£t qu√° 8 trong jdk 8, h·ªá s·ªë t·∫£i 0,75 ƒë∆∞·ª£c ƒë·ªÅ c·∫≠p nh∆∞ng l√Ω do kh√¥ng ƒë∆∞·ª£c ƒë·ªÅ c·∫≠p.</p><p>ƒê·ªÉ t√¨m hi·ªÉu l√Ω do t·∫°i sao, t√¥i ƒë√£ xem qua b√†i vi·∫øt n√†y:</p><blockquote><p>Link tham kh·∫£o:¬†<a href="https://segmentfault.com/a/1190000023308658" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000023308658</a></p></blockquote><p>M·ªôt kh√°i ni·ªám ƒë∆∞·ª£c ƒë·ªÅ c·∫≠p:¬†<strong>Ph√¢n ph·ªëi nh·ªã th·ª©c</strong>.</p><p>Khi l√†m m·ªôt vi·ªác g√¨ ƒë√≥, ch·ªâ c√≥ hai kh·∫£ nƒÉng x·∫£y ra k·∫øt qu·∫£, gi·ªëng nh∆∞ vi·ªác tung ƒë·ªìng xu, m·∫∑t ng·ª≠a ho·∫∑c m·∫∑t s·∫•p.</p><p>N·∫øu ch√∫ng ta th·ª±c hi·ªán N th√≠ nghi·ªám th√¨ m·ªói th√≠ nghi·ªám ch·ªâ c√≥ hai k·∫øt qu·∫£ c√≥ th·ªÉ x·∫£y ra v√† m·ªói th√≠ nghi·ªám l√† ƒë·ªôc l·∫≠p, c√°c th√≠ nghi·ªám kh√°c nhau kh√¥ng ·∫£nh h∆∞·ªüng l·∫´n nhau v√† x√°c su·∫•t th√†nh c√¥ng c·ªßa m·ªói th√≠ nghi·ªám l√† nh∆∞ nhau.</p><p>D·ª±a tr√™n l√Ω thuy·∫øt n√†y: ch√∫ng ta n√©m d·ªØ li·ªáu v√†o b·∫£ng bƒÉm v√† n·∫øu x·∫£y ra xung ƒë·ªôt bƒÉm th√¨ l√† th·∫•t b·∫°i, ng∆∞·ª£c l·∫°i l√† th√†nh c√¥ng.</p><p>Ch√∫ng ta c√≥ th·ªÉ t∆∞·ªüng t∆∞·ª£ng r·∫±ng gi√° tr·ªã bƒÉm c·ªßa th·ª≠ nghi·ªám l√† ng·∫´u nhi√™n v√† c√°c kh√≥a ƒë√£ ƒë∆∞·ª£c bƒÉm s·∫Ω ƒë∆∞·ª£c √°nh x·∫° t·ªõi kh√¥ng gian ƒë·ªãa ch·ªâ c·ªßa b·∫£ng bƒÉm n√™n k·∫øt qu·∫£ c≈©ng l√† ng·∫´u nhi√™n. V√¨ v·∫≠y, m·ªói l·∫ßn ch√∫ng ta ƒë·∫∑t, n√≥ t∆∞∆°ng ƒë∆∞∆°ng v·ªõi vi·ªác n√©m m·ªôt con x√∫c x·∫Øc 16 m·∫∑t (ƒë·ªô d√†i m·∫∑c ƒë·ªãnh c·ªßa m·∫£ng sau l·∫ßn m·ªü r·ªông ƒë·∫ßu ti√™n c·ªßa HashMap l√† 16). Khi va ch·∫°m x·∫£y ra, c√°c s·ªë l·∫∑p l·∫°i xu·∫•t hi·ªán sau khi b·ªã n√©m n l·∫ßn.</p><p>V·∫≠y m·ª•c ƒë√≠ch c·ªßa ch√∫ng ta l√† g√¨?</p><p>C√≥ nghƒ©a l√† sau khi tung x√∫c x·∫Øc k l·∫ßn, kh√¥ng c√≥ vi√™n n√†o c√≥ x√°c su·∫•t b·∫±ng nhau. N√≥i chung, ch√∫ng ta ph·∫£i l·ªõn h∆°n 0,5 (con s·ªë n√†y l√† m·ªôt con s·ªë l√Ω t∆∞·ªüng).</p><p>Do ƒë√≥, x√°c su·∫•t va ch·∫°m l√† 0 trong s·ªë n s·ª± ki·ªán ƒë∆∞·ª£c t√≠nh t·ª´ c√¥ng th·ª©c tr√™n:</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220201995.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Gi√° tr·ªã x√°c su·∫•t n√†y c·∫ßn ph·∫£i l·ªõn h∆°n 0,5. Ch√∫ng t√¥i tin r·∫±ng s∆° ƒë·ªì bƒÉm nh∆∞ v·∫≠y c√≥ th·ªÉ mang l·∫°i t·ª∑ l·ªá xung ƒë·ªôt r·∫•t th·∫•p. V√¨ th·∫ø:</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622020336.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>L√∫c n√†y, ƒëi·ªÅu ch√∫ng ta mong mu·ªën nh·∫•t ƒë·ªëi v·ªõi c√¥ng th·ª©c n√†y l√† khi ƒë·ªô d√†i n ph·∫£i ƒë∆∞·ª£c m·ªü r·ªông bao nhi√™u l·∫ßn? H·ªá s·ªë t·∫£i l√† <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mi mathvariant="normal">/</mi><mi>S</mi></mrow><annotation encoding="application/x-tex">N/S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> gi√° tr·ªã. V√¨ v·∫≠y, ƒë·∫°o h√†m nh∆∞ sau:</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622020427.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>V√¨ v·∫≠y b·∫°n c√≥ th·ªÉ nh·∫≠n ƒë∆∞·ª£c</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622020440.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>TRONG</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622020450.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>ƒê√¢y l√†¬†b√†i to√°n t√¨m gi·ªõi h·∫°n <code>‚àû‚ãÖ0</code> c·ªßa h√†m s·ªë h√†m s·ªë <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>=</mo><mi>m</mi><mo>+</mo><mn>1</mn><mtext>Ôºà</mtext><mi>m</mi><mo>‚Üí</mo><mi mathvariant="normal">‚àû</mi><mtext>Ôºâ</mtext></mrow><annotation encoding="application/x-tex">s = m+1Ôºàm \to \inftyÔºâ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">1</span><span class="mord cjk_fallback">Ôºà</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">‚Üí</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">‚àû</span><span class="mord cjk_fallback">Ôºâ</span></span></span></span></p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622021038.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>Ch√∫ng t√¥i ƒë·∫∑t <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><mtext>Ôºà</mtext><mi>x</mi><mo>‚Üí</mo><mn>0</mn><mtext>Ôºâ</mtext></mrow><annotation encoding="application/x-tex">x = \frac{1}{m} Ôºàx \to 0Ôºâ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord cjk_fallback">Ôºà</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">‚Üí</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">0</span><span class="mord cjk_fallback">Ôºâ</span></span></span></span> sau ƒë√≥ c√≥:</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622021108.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>V√¨ th·∫ø:</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622021118.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>C√≥ m·ªôt y√™u c·∫ßu khi xem x√©t dung l∆∞·ª£ng c·ªßa HashMap: n√≥ ph·∫£i l√† l≈©y th·ª´a n c·ªßa 2. Khi h·ªá s·ªë t·∫£i ƒë∆∞·ª£c ch·ªçn l√† 0,75, c√≥ th·ªÉ ƒë·∫£m b·∫£o r·∫±ng t√≠ch c·ªßa n√≥ nh√¢n v·ªõi c√¥ng su·∫•t l√† m·ªôt s·ªë nguy√™n.</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>16*0.75=12</span></span>
<span class="line"><span>32*0.75=24</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Ngo√†i 0,75, c√≤n c√≥ 0,625 (5/8) v√† 0,875 (7/8) n·∫±m trong kho·∫£ng t·ª´ 0,5 ƒë·∫øn 1. T·ª´ g√≥c ƒë·ªô trung v·ªã, 0,75 l√† ho√†n h·∫£o h∆°n. Ngo√†i ra, Wikipedia n√≥i r·∫±ng h·ªá s·ªë t·∫£i c·ªßa ph∆∞∆°ng ph√°p chaining (m·ªôt ph∆∞∆°ng ph√°p gi·∫£i quy·∫øt xung ƒë·ªôt bƒÉm) t·ªët nh·∫•t n√™n ƒë∆∞·ª£c gi·ªõi h·∫°n ·ªü m·ª©c d∆∞·ªõi 0,7-0,8. N·∫øu v∆∞·ª£t qu√° 0,8, b·ªô ƒë·ªám CPU b·ªã thi·∫øu trong qu√° tr√¨nh tra c·ª©u b·∫£ng s·∫Ω tƒÉng theo ƒë∆∞·ªùng cong h√†m m≈©.</p><p>T√≥m l·∫°i, 0,75 l√† m·ªôt l·ª±a ch·ªçn ho√†n h·∫£o.</p><h4 id="tom-tat-2" tabindex="-1"><a class="header-anchor" href="#tom-tat-2"><span>T√≥m t·∫Øt</span></a></h4><p><strong>H·ªá s·ªë t·∫£i (load factor) c·ªßa HashMap</strong> l√† t·ª∑ l·ªá gi·ªØa s·ªë l∆∞·ª£ng ph·∫ßn t·ª≠ ƒë√£ ƒë∆∞·ª£c th√™m v√†o v√† s·ªë l∆∞·ª£ng bucket trong b·∫£ng bƒÉm. Khi s·ªë l∆∞·ª£ng ph·∫ßn t·ª≠ ƒë·∫°t ƒë·∫øn t√≠ch c·ªßa h·ªá s·ªë t·∫£i v√† s·ªë l∆∞·ª£ng bucket, HashMap s·∫Ω th·ª±c hi·ªán thao t√°c m·ªü r·ªông. Th√¥ng th∆∞·ªùng, gi√° tr·ªã h·ªá s·ªë t·∫£i ƒë∆∞·ª£c ch·ªçn l√† 0.75. L·ª±a ch·ªçn n√†y d·ª±a tr√™n vi·ªác c√¢n nh·∫Øc gi·ªØa chi ph√≠ th·ªùi gian v√† chi ph√≠ kh√¥ng gian, gi√∫p ƒë·∫£m b·∫£o hi·ªáu su·∫•t c·ªßa HashMap ƒë·∫°t ƒë∆∞·ª£c m·ª©c ƒë√°ng k·ªÉ.</p><ul><li><p><strong>H·ªá s·ªë t·∫£i qu√° cao</strong>: N·∫øu h·ªá s·ªë t·∫£i qu√° cao, t·ª©c l√† s·ªë l∆∞·ª£ng ph·∫ßn t·ª≠ th√™m v√†o qu√° nhi·ªÅu, c√°c ph·∫ßn t·ª≠ trong HashMap s·∫Ω t·∫≠p trung v√†o √≠t bucket h∆°n, d·∫´n ƒë·∫øn tƒÉng s·ªë l∆∞·ª£ng xung ƒë·ªôt. ƒêi·ªÅu n√†y l√†m gi·∫£m hi·ªáu su·∫•t c√°c thao t√°c t√¨m ki·∫øm, th√™m v√† x√≥a, ƒë·ªìng th·ªùi y√™u c·∫ßu ph·∫£i th·ª±c hi·ªán thao t√°c m·ªü r·ªông th∆∞·ªùng xuy√™n h∆°n, l√†m gi·∫£m hi·ªáu nƒÉng.</p></li><li><p><strong>H·ªá s·ªë t·∫£i qu√° th·∫•p</strong>: Ng∆∞·ª£c l·∫°i, n·∫øu h·ªá s·ªë t·∫£i ƒë∆∞·ª£c ƒë·∫∑t qu√° th·∫•p, s·ªë l∆∞·ª£ng bucket s·∫Ω tƒÉng l√™n, m·∫∑c d√π c√≥ th·ªÉ gi·∫£m xung ƒë·ªôt, nh∆∞ng c≈©ng c√≥ th·ªÉ l√†m l√£ng ph√≠ kh√¥ng gian. Do ƒë√≥, vi·ªác ch·ªçn h·ªá s·ªë t·∫£i l√† 0.75 gi√∫p ƒë·∫°t ƒë∆∞·ª£c s·ª± c√¢n b·∫±ng t·ªët gi·ªØa hi·ªáu su·∫•t v√† s·ª≠ d·ª•ng kh√¥ng gian.</p></li></ul><p>T√≥m l·∫°i, l·ª±a ch·ªçn gi√° tr·ªã 0.75 cho h·ªá s·ªë t·∫£i gi√∫p ƒë·∫°t ƒë∆∞·ª£c s·ª± c√¢n b·∫±ng t·ªëi ∆∞u gi·ªØa th·ªùi gian v√† kh√¥ng gian cho HashMap, t·ª´ ƒë√≥ t·ªëi ∆∞u h√≥a hi·ªáu su·∫•t c·ªßa n√≥.</p><h3 id="_04-van-ƒëe-an-toan-ƒëa-luong" tabindex="-1"><a class="header-anchor" href="#_04-van-ƒëe-an-toan-ƒëa-luong"><span>04. V·∫•n ƒë·ªÅ an to√†n ƒëa lu·ªìng</span></a></h3><p>V·∫•n ƒë·ªÅ n√†y kh√¥ng c·∫ßn n√≥i qu√° nhi·ªÅu, nh∆∞ng c√≥ th·ªÉ m·ªôt v√†i nh√† ph·ªèng v·∫•n s·∫Ω h·ªèi nh∆∞ ƒë√£ ƒë·ªÅ c·∫≠p <a class="route-link" href="/interview/java-hashmap.html">·ªü ƒë√¢y</a>, v√¨ v·∫≠y ƒë∆°n gi·∫£n t√¥i s·∫Ω gi·∫£i th√≠ch m·ªôt ch√∫t.</p><p>C√≥ ba nguy√™n nh√¢n ch√≠nh:</p><ul><li>ƒêa lu·ªìng khi m·ªü r·ªông c√≥ th·ªÉ d·∫´n ƒë·∫øn v√≤ng l·∫∑p v√¥ h·∫°n.</li><li>ƒêa lu·ªìng khi th√™m ph·∫ßn t·ª≠ c√≥ th·ªÉ d·∫´n ƒë·∫øn m·∫•t m√°t c√°c ph·∫ßn t·ª≠.</li><li>C√°c ho·∫°t ƒë·ªông ƒë·ªìng th·ªùi c·ªßa put v√† get c√≥ th·ªÉ d·∫´n ƒë·∫øn vi·ªác get ƒë∆∞·ª£c gi√° tr·ªã null.</li></ul><h4 id="_1-ƒëa-luong-khi-mo-rong-co-the-dan-ƒëen-vong-lap-vo-han" tabindex="-1"><a class="header-anchor" href="#_1-ƒëa-luong-khi-mo-rong-co-the-dan-ƒëen-vong-lap-vo-han"><span>1) ƒêa lu·ªìng khi m·ªü r·ªông c√≥ th·ªÉ d·∫´n ƒë·∫øn v√≤ng l·∫∑p v√¥ h·∫°n</span></a></h4><p>Nh∆∞ ch√∫ng ta bi·∫øt, HashMap s·ª≠ d·ª•ng ph∆∞∆°ng ph√°p chu·ªói li√™n k·∫øt ƒë·ªÉ gi·∫£i quy·∫øt xung ƒë·ªôt bƒÉm, nghƒ©a l√† khi c√≥ xung ƒë·ªôt bƒÉm, c√°c c·∫∑p kh√≥a-gi√° tr·ªã v·ªõi c√πng gi√° tr·ªã bƒÉm s·∫Ω ƒë∆∞·ª£c l∆∞u tr·ªØ d∆∞·ªõi d·∫°ng chu·ªói li√™n k·∫øt.</p><p>Trong JDK 7, n√≥ s·ª≠ d·ª•ng ph∆∞∆°ng ph√°p ch√®n v√†o ƒë·∫ßu ƒë·ªÉ l∆∞u tr·ªØ chu·ªói, nghƒ©a l√† c√°c c·∫∑p kh√≥a-gi√° tr·ªã xung ƒë·ªôt s·∫Ω ƒë∆∞·ª£c ch√®n v√†o tr∆∞·ªõc c·∫∑p kh√≥a-gi√° tr·ªã tr∆∞·ªõc ƒë√≥ trong chu·ªói (ƒë√£ ƒë·ªÅ c·∫≠p khi th·∫£o lu·∫≠n v·ªÅ m·ªü r·ªông). Vi·ªác m·ªü r·ªông c√≥ th·ªÉ d·∫´n ƒë·∫øn h√¨nh th√†nh chu·ªói v√≤ng, g√¢y ra v√≤ng l·∫∑p v√¥ h·∫°n.</p><p>M√£ ngu·ªìn c·ªßa ph∆∞∆°ng th·ª©c resize:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// newCapacity l√† dung l∆∞·ª£ng m·ªõi</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">void</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> resize</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newCapacity) {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // oldTable l√† b·∫£ng c≈©</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#E5C07B;">    Entry</span><span style="color:#24292E;--shiki-dark:#E06C75;">[] oldTable </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> table</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // oldCapacity l√† dung l∆∞·ª£ng c≈©</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> oldTable</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">length</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // MAXIMUM_CAPACITY l√† dung l∆∞·ª£ng l·ªõn nh·∫•t, 2 m≈© 30 = 1&lt;&lt;30</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (oldCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#24292E;--shiki-dark:#E06C75;"> MAXIMUM_CAPACITY) {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">        // ƒêi·ªÅu ch·ªânh dung l∆∞·ª£ng th√†nh gi√° tr·ªã t·ªëi ƒëa c·ªßa Integer 0x7fffffff (h·ªá 16) = 2^31-1</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        threshold </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">MAX_VALUE</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // Kh·ªüi t·∫°o m·ªôt m·∫£ng m·ªõi (dung l∆∞·ª£ng l·ªõn)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#E5C07B;">    Entry</span><span style="color:#24292E;--shiki-dark:#E06C75;">[] newTable </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="color:#D73A49;--shiki-dark:#E5C07B;"> Entry</span><span style="color:#24292E;--shiki-dark:#E06C75;">[newCapacity]</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // Chuy·ªÉn d·ªØ li·ªáu t·ª´ m·∫£ng c≈© sang m·∫£ng m·ªõi</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    transfer</span><span style="color:#24292E;--shiki-dark:#E06C75;">(newTable</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> initHashSeedAsNeeded</span><span style="color:#24292E;--shiki-dark:#E06C75;">(newCapacity))</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // Tham chi·∫øu ƒë·∫øn m·∫£ng m·ªõi</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    table </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newTable</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // T√≠nh to√°n l·∫°i ng∆∞·ª°ng</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    threshold </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#E5C07B;">Math</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">min</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(newCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">*</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> loadFactor, MAXIMUM_CAPACITY </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ph∆∞∆°ng th·ª©c transfer ƒë·ªÉ chuy·ªÉn d·ªØ li·ªáu, sao ch√©p c√°c ph·∫ßn t·ª≠ t·ª´ m·∫£ng c≈© sang m·∫£ng m·ªõi.</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">void</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> transfer</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">Entry</span><span style="color:#24292E;--shiki-dark:#E06C75;">[] newTable</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> boolean</span><span style="color:#24292E;--shiki-dark:#E06C75;"> rehash) {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // newCapacity l√† dung l∆∞·ª£ng m·ªõi</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newCapacity </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> newTable</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">length</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // Duy·ªát qua m·∫£ng c≈©</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    for</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#24292E;--shiki-dark:#E5C07B;">Entry</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e </span><span style="color:#D73A49;--shiki-dark:#C678DD;">:</span><span style="color:#24292E;--shiki-dark:#E06C75;"> table) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        while</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#005CC5;--shiki-dark:#D19A66;">null</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e) {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">            // Ph∆∞∆°ng ph√°p chu·ªói li√™n k·∫øt, gi√° tr·ªã kh√≥a kh√°c nhau tr√™n c√πng m·ªôt key</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">            Entry</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> next </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">next</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">            // C·∫ßn ph·∫£i t√≠nh l·∫°i hash</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">            if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (rehash) {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">hash</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> ==</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">key</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> ?</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> :</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> hash</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">key</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">            }</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">            // T√≠nh to√°n ch·ªâ s·ªë c·ªßa m·∫£ng d·ª±a tr√™n dung l∆∞·ª£ng l·ªõn v√† hash key c·ªßa ph·∫ßn t·ª≠</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">            int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> i </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> indexFor</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#24292E;--shiki-dark:#E5C07B;">e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">hash</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newCapacity)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">            // Ph·∫ßn t·ª≠ m·ªõi ƒë∆∞·ª£c ch√®n v√†o ƒë·∫ßu danh s√°ch</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">            e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">next</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#24292E;--shiki-dark:#E06C75;"> newTable[i]</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">            // Ch√®n v√†o m·∫£ng m·ªõi</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">            newTable[i] </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">            // Ph·∫ßn t·ª≠ ti·∫øp theo trong danh s√°ch</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">            e </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> next</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ch√∫ √Ω ƒë·∫øn c√°c d√≤ng <code>e.next = newTable[i]</code> v√† <code>newTable[i] = e</code>, hai d√≤ng code n√†y s·∫Ω ƒë·∫∑t ph·∫ßn t·ª≠ m·ªõi v√†o ƒë·∫ßu danh s√°ch li√™n k·∫øt.</p><p>N√≥ tr√¥ng nh∆∞ th·∫ø n√†o tr∆∞·ªõc khi m·ªü r·ªông nh∆∞ sau.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/202406220126917.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Sau ƒë√≥, sau khi m·ªü r·ªông b√¨nh th∆∞·ªùng, n√≥ s·∫Ω tr√¥ng nh∆∞ th·∫ø n√†y.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622021926.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>Gi·∫£ s·ª≠ r·∫±ng c√≥ hai lu·ªìng m·ªü r·ªông c√πng m·ªôt l√∫c. Thread A¬†<code>newTable[i] = e;</code>b·ªã treo khi th·ª±c thi. T·∫°i th·ªùi ƒëi·ªÉm n√†y, Thread A: e=3, next=7, e.next=null.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622021953.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>Thread B b·∫Øt ƒë·∫ßu th·ª±c thi v√† ho√†n th√†nh vi·ªác truy·ªÅn d·ªØ li·ªáu.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622022021.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>T·∫°i th·ªùi ƒëi·ªÉm n√†y, s·ªë ti·∫øp theo c·ªßa 7 l√† 3 v√† s·ªë ti·∫øp theo c·ªßa 3 l√† null.</p><p>Sau ƒë√≥, lu·ªìng A l·∫•y time slice CPU ƒë·ªÉ ti·∫øp t·ª•c th·ª±c thi¬†<code>newTable[i] = e</code>v√† ƒë·∫∑t 3 v√†o v·ªã tr√≠ t∆∞∆°ng ·ª©ng c·ªßa m·∫£ng m·ªõi. Sau khi th·ª±c hi·ªán chu tr√¨nh n√†y, t√¨nh hu·ªëng c·ªßa lu·ªìng A nh∆∞ sau:</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622022101.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>Th·ª±c hi·ªán v√≤ng l·∫∑p ti·∫øp theo, t·∫°i th·ªùi ƒëi·ªÉm n√†y e=7, ban ƒë·∫ßu s·ªë ti·∫øp theo trong s·ªë 7 trong lu·ªìng A l√† 5, nh∆∞ng v√¨ b·∫£ng ƒë∆∞·ª£c chia s·∫ª b·ªüi lu·ªìng A v√† lu·ªìng B v√† sau khi lu·ªìng B ƒë∆∞·ª£c th·ª±c thi th√†nh c√¥ng, s·ªë ti·∫øp theo c·ªßa 7 tr·ªü th√†nh 3, sau ƒë√≥ trong lu·ªìng A, s·ªë ti·∫øp theo c·ªßa 7 c≈©ng l√† 3.</p><p>S·ª≠ d·ª•ng ph∆∞∆°ng ph√°p ch√®n ƒë·∫ßu, n√≥ s·∫Ω nh∆∞ th·∫ø n√†y:</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622022117.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>C√≥ v·∫ª nh∆∞ kh√¥ng c√≥ v·∫•n ƒë·ªÅ g√¨, l√∫c n√†y next = 3, e = 3.</p><p>V√≤ng l·∫∑p ti·∫øp theo ƒë∆∞·ª£c th·ª±c hi·ªán, nh∆∞ng t·∫°i th·ªùi ƒëi·ªÉm n√†y, v√¨ lu·ªìng B thay ƒë·ªïi s·ªë 3 ti·∫øp theo th√†nh null, n√™n v√≤ng l·∫∑p n√†y ph·∫£i l√† v√≤ng cu·ªëi c√πng.</p><p>Ti·∫øp theo, khi qu√° tr√¨nh th·ª±c thi ho√†n t·∫•t¬†<code>e.next=newTable[i]</code>, t·ª©c l√† 3.next=7, 3 v√† 7 ƒë∆∞·ª£c li√™n k·∫øt v·ªõi nhau.¬†<code>newTable[i]=e</code>Sau khi th·ª±c hi·ªán, 3 ƒë∆∞·ª£c ch√®n l·∫°i v√†o danh s√°ch li√™n k·∫øt b·∫±ng ph√©p n·ªôi suy ƒë·∫ßu. h√¨nh d∆∞·ªõi ƒë√¢y:</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20240622022144.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>B·∫Øt ƒë·∫ßu t·ª´ b√∫p b√™ matryoshka, Element 5 ƒë√£ tr·ªü th√†nh m·ªôt ƒë·ª©a b√© b·ªã b·ªè r∆°i, kh·ªën kh·ªï~~~</p><p>Tuy nhi√™n, v·∫•n ƒë·ªÅ n√†y ƒë√£ ƒë∆∞·ª£c kh·∫Øc ph·ª•c trong JDK 8, v√† th·ª© t·ª± ban ƒë·∫ßu c·ªßa danh s√°ch li√™n k·∫øt s·∫Ω ƒë∆∞·ª£c gi·ªØ nguy√™n trong qu√° tr√¨nh m·ªü r·ªông (√†, gi·ªëng nh∆∞ n√≥i l√¢u v√¥ √≠ch v·∫≠y, haha, c√¢u h·ªèi ph·ªèng v·∫•n n√†y ƒë√∫ng l√† nh∆∞ th·∫ø n√†y, r·∫•t l√† hay) ch·∫£y n∆∞·ªõc mi·∫øng, nh∆∞ng m·ªôt s·ªë ng∆∞·ªùi ph·ªèng v·∫•n th·ª±c s·ª± l√† l·ª±c l∆∞·ª£ng ki√™u ng·∫°o).</p><h4 id="_2-khi-put-o-che-ƒëo-ƒëa-luong-se-khien-cac-phan-tu-bi-mat" tabindex="-1"><a class="header-anchor" href="#_2-khi-put-o-che-ƒëo-ƒëa-luong-se-khien-cac-phan-tu-bi-mat"><span>2) Khi put ·ªü ch·∫ø ƒë·ªô ƒëa lu·ªìng s·∫Ω khi·∫øn c√°c ph·∫ßn t·ª≠ b·ªã m·∫•t</span></a></h4><p>Th√¥ng th∆∞·ªùng, khi x·∫£y ra xung ƒë·ªôt bƒÉm, HashMap tr√¥ng nh∆∞ th·∫ø n√†y:</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/collection/hashmap-thread-nosafe-08.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Tuy nhi√™n, khi c√≥ nhi·ªÅu lu·ªìng ƒë·ªìng th·ªùi th·ª±c hi·ªán thao t√°c put, n·∫øu v·ªã tr√≠ ch·ªâ m·ª•c t√≠nh to√°n ƒë∆∞·ª£c l√† gi·ªëng nhau, ƒëi·ªÅu n√†y s·∫Ω d·∫´n ƒë·∫øn kh√≥a key tr∆∞·ªõc b·ªã ghi ƒë√® b·ªüi key sau, d·∫´n ƒë·∫øn m·∫•t m√°t ph·∫ßn t·ª≠.</p><p>M√£ ngu·ªìn put:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">final</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> V</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> putVal</span><span style="color:#24292E;--shiki-dark:#E06C75;">(</span><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> K</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> V</span><span style="color:#24292E;--shiki-dark:#E06C75;"> value</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> boolean</span><span style="color:#24292E;--shiki-dark:#E06C75;"> onlyIfAbsent</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">               boolean</span><span style="color:#24292E;--shiki-dark:#E06C75;"> evict) {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">    Node</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">[] tab</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> Node</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> p</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> n</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> i</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // B∆∞·ªõc ‚ë†: T·∫°o b·∫£ng n·∫øu ch∆∞a t·ªìn t·∫°i</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ((tab </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> table) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> ||</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (n </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> tab</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">length</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        n </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (tab </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> resize</span><span style="color:#24292E;--shiki-dark:#E06C75;">())</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">length</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // B∆∞·ªõc ‚ë°: T√≠nh to√°n ch·ªâ m·ª•c v√† x·ª≠ l√Ω khi gi√° tr·ªã l√† null</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ((p </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> tab[i </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (n </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&amp;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash]) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        tab[i] </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> newNode</span><span style="color:#24292E;--shiki-dark:#E06C75;">(hash</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> value</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    else</span><span style="color:#24292E;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">        Node</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#D73A49;--shiki-dark:#E5C07B;">V</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> K</span><span style="color:#24292E;--shiki-dark:#E06C75;"> k</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">        // B∆∞·ªõc ‚ë¢: Key c·ªßa n√∫t ƒë√£ t·ªìn t·∫°i, ch·ªâ c·∫ßn ghi ƒë√® gi√° tr·ªã</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#24292E;--shiki-dark:#E5C07B;">p</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">hash</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> ==</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&amp;&amp;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">            ((k </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> p</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">key</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">||</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (key </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">equals</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(k)</span><span style="color:#24292E;--shiki-dark:#E06C75;">)))</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">            e </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> p</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">        // B∆∞·ªõc ‚ë£: Ki·ªÉm tra n·∫øu danh s√°ch n√†y l√† c√¢y ƒë·ªè ƒëen</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        else</span><span style="color:#D73A49;--shiki-dark:#C678DD;"> if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (p </span><span style="color:#D73A49;--shiki-dark:#C678DD;">instanceof</span><span style="color:#24292E;--shiki-dark:#E06C75;"> TreeNode)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">            e </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ((</span><span style="color:#24292E;--shiki-dark:#E5C07B;">TreeNode</span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">K</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;">V</span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;">)p)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">putTreeVal</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="color:#005CC5;--shiki-dark:#E5C07B;">this</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">, tab, hash, key, value);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">        // B∆∞·ªõc ‚ë§: Danh s√°ch n√†y l√† danh s√°ch li√™n k·∫øt</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        else</span><span style="color:#24292E;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">            for</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#D73A49;--shiki-dark:#C678DD;">int</span><span style="color:#24292E;--shiki-dark:#E06C75;"> binCount </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="color:#24292E;--shiki-dark:#ABB2BF;"> ;</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;"> ++</span><span style="color:#24292E;--shiki-dark:#E06C75;">binCount) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ((e </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> p</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">next</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                    p</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">next</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> newNode</span><span style="color:#24292E;--shiki-dark:#E06C75;">(hash</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> value</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">                    // N·∫øu chi·ªÅu d√†i danh s√°ch l·ªõn h∆°n 8, chuy·ªÉn th√†nh c√¢y ƒë·ªè ƒëen ƒë·ªÉ x·ª≠ l√Ω</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (binCount </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> TREEIFY_THRESHOLD </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// -1 for 1st</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">                        treeifyBin</span><span style="color:#24292E;--shiki-dark:#E06C75;">(tab</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                    break</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">                // Key ƒë√£ t·ªìn t·∫°i, ch·ªâ c·∫ßn ghi ƒë√® gi√° tr·ªã</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#24292E;--shiki-dark:#E5C07B;">e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">hash</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> ==</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&amp;&amp;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                    ((k </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">key</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">||</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (key </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;">equals</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">(k)</span><span style="color:#24292E;--shiki-dark:#E06C75;">)))</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">                    break</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">                p </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">            }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">        // B∆∞·ªõc ‚ë•: Ghi ƒë√® tr·ª±c ti·∫øp</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (e </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">) { </span><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">// existing mapping for key</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">            V</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldValue </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E5C07B;"> e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">value</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">            if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#D73A49;--shiki-dark:#56B6C2;">!</span><span style="color:#24292E;--shiki-dark:#E06C75;">onlyIfAbsent </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">||</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldValue </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E5C07B;">                e</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="color:#24292E;--shiki-dark:#E5C07B;">value</span><span style="color:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="color:#24292E;--shiki-dark:#E06C75;"> value</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">            afterNodeAccess</span><span style="color:#24292E;--shiki-dark:#E06C75;">(e)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">            return</span><span style="color:#24292E;--shiki-dark:#E06C75;"> oldValue</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">        }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#ABB2BF;">    ++</span><span style="color:#24292E;--shiki-dark:#E06C75;">modCount</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    // B∆∞·ªõc ‚ë¶: Thay ƒë·ªïi k√≠ch th∆∞·ªõc b·∫£ng n·∫øu v∆∞·ª£t qu√° dung l∆∞·ª£ng t·ªëi ƒëa</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (</span><span style="color:#D73A49;--shiki-dark:#ABB2BF;">++</span><span style="color:#24292E;--shiki-dark:#E06C75;">size </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> threshold)</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">        resize</span><span style="color:#24292E;--shiki-dark:#E06C75;">()</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#61AFEF;">    afterNodeInsertion</span><span style="color:#24292E;--shiki-dark:#E06C75;">(evict)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">    return</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>V·∫•n ƒë·ªÅ x·∫£y ra t·∫°i B∆∞·ªõc ‚ë°:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes github-light one-dark-pro vp-code" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#C678DD;">if</span><span style="color:#24292E;--shiki-dark:#E06C75;"> ((p </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> tab[i </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#24292E;--shiki-dark:#E06C75;"> (n </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="color:#24292E;--shiki-dark:#E06C75;">) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">&amp;</span><span style="color:#24292E;--shiki-dark:#E06C75;"> hash]) </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E06C75;">    tab[i] </span><span style="color:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="color:#6F42C1;--shiki-dark:#61AFEF;"> newNode</span><span style="color:#24292E;--shiki-dark:#E06C75;">(hash</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> key</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#24292E;--shiki-dark:#E06C75;"> value</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="color:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="color:#24292E;--shiki-dark:#E06C75;">)</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Hai lu·ªìng ƒë·ªÅu th·ª±c hi·ªán c√¢u l·ªánh if, gi·∫£ s·ª≠ lu·ªìng A th·ª±c hi·ªán <code>tab[i] = newNode(hash, key, value, null)</code> tr∆∞·ªõc, b·∫£ng table s·∫Ω nh∆∞ sau:</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/collection/hashmap-thread-nosafe-09.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Ti·∫øp theo, lu·ªìng B th·ª±c hi·ªán <code>tab[i] = newNode(hash, key, value, null)</code>, b·∫£ng table s·∫Ω nh∆∞ sau:</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/collection/hashmap-thread-nosafe-10.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ƒêi·ªÅu n√†y d·∫´n ƒë·∫øn m·∫•t m√°t d·ªØ li·ªáu c·ªßa ph·∫ßn t·ª≠ 3.</p><h4 id="_3-khi-thuc-hien-ƒëong-thoi-cac-thao-tac-put-va-get-co-the-dan-ƒëen-viec-get-ƒëuoc-gia-tri-null" tabindex="-1"><a class="header-anchor" href="#_3-khi-thuc-hien-ƒëong-thoi-cac-thao-tac-put-va-get-co-the-dan-ƒëen-viec-get-ƒëuoc-gia-tri-null"><span>3) Khi th·ª±c hi·ªán ƒë·ªìng th·ªùi c√°c thao t√°c put v√† get c√≥ th·ªÉ d·∫´n ƒë·∫øn vi·ªác get ƒë∆∞·ª£c gi√° tr·ªã null</span></a></h4><p>Khi Thread 1 th·ª±c hi·ªán thao t√°c put, v√† do s·ªë l∆∞·ª£ng ph·∫ßn t·ª≠ v∆∞·ª£t qu√° ng∆∞·ª°ng n√™n g√¢y ra vi·ªác ph·∫£i m·ªü r·ªông b·∫£ng, l√∫c n√†y Thread 2 ƒëang th·ª±c hi·ªán thao t√°c get, c√≥ th·ªÉ g·∫∑p ph·∫£i v·∫•n ƒë·ªÅ n√†y.</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/collection-20240326085630.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Khi th·ª±c hi·ªán m·ªü r·ªông b·∫£ng, sau khi Thread 1 th·ª±c hi·ªán <code>table = newTab</code>, b·∫£ng <code>table</code> trong Thread 2 c≈©ng ƒë∆∞·ª£c c·∫≠p nh·∫≠t, nh∆∞ng l√∫c n√†y d·ªØ li·ªáu v·∫´n ch∆∞a ho√†n to√†n chuy·ªÉn ƒë·ªïi. V√¨ v·∫≠y, n·∫øu Thread 2 ƒëang th·ª±c hi·ªán thao t√°c get, c√≥ th·ªÉ n√≥ s·∫Ω kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ trong b·∫£ng c≈© v√† tr·∫£ v·ªÅ gi√° tr·ªã null.</p><h4 id="_4-tom-tat" tabindex="-1"><a class="header-anchor" href="#_4-tom-tat"><span>4) T√≥m t·∫Øt</span></a></h4><p>HashMap kh√¥ng an to√†n ƒë·ªëi v·ªõi lu·ªìng ch·ªß y·∫øu l√† do trong qu√° tr√¨nh th√™m, x√≥a v√† m·ªü r·ªông, c√≥ th·ªÉ l√†m thay ƒë·ªïi c·∫•u tr√∫c c·ªßa danh s√°ch li√™n k·∫øt v√† t·ª´ ƒë√≥ l√†m h·ªèng t√≠nh b·∫•t bi·∫øn c·ªßa HashMap. C·ª• th·ªÉ, n·∫øu m·ªôt lu·ªìng ƒëang duy·ªát qua danh s√°ch li√™n k·∫øt c·ªßa HashMap v√† m·ªôt lu·ªìng kh√°c t·∫°i th·ªùi ƒëi·ªÉm ƒë√≥ thay ƒë·ªïi danh s√°ch n√†y (v√≠ d·ª• th√™m m·ªôt n√∫t), s·∫Ω d·∫´n ƒë·∫øn thay ƒë·ªïi c·∫•u tr√∫c c·ªßa danh s√°ch v√† ·∫£nh h∆∞·ªüng ƒë·∫øn vi·ªác duy·ªát c·ªßa lu·ªìng ƒëang th·ª±c hi·ªán, c√≥ th·ªÉ d·∫´n ƒë·∫øn vi·ªác duy·ªát kh√¥ng th√†nh c√¥ng ho·∫∑c v√≤ng l·∫∑p v√¥ h·∫°n v√† c√°c v·∫•n ƒë·ªÅ kh√°c.</p><p>ƒê·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ n√†y, Java cung c·∫•p l·ªõp ConcurrentHashMap l√†m cho HashMap tr·ªü th√†nh an to√†n cho c√°c lu·ªìng. ConcurrentHashMap s·ª≠ d·ª•ng kh√≥a ph√¢n ƒëo·∫°n (Segment) n·ªôi b·ªô, chia to√†n b·ªô Map th√†nh nhi·ªÅu HashMap nh·ªè. M·ªói HashMap nh·ªè c√≥ kh√≥a ri√™ng c·ªßa n√≥, cho ph√©p c√°c lu·ªìng kh√°c nhau truy c·∫≠p c√°c ph·∫ßn kh√°c nhau c·ªßa Map c√πng m·ªôt l√∫c m√† kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn c√°c ph·∫ßn kh√°c. Khi th·ª±c hi·ªán c√°c thao t√°c th√™m, x√≥a v√† m·ªü r·ªông, ch·ªâ c·∫ßn kh√≥a t·ª´ng HashMap nh·ªè, kh√¥ng c·∫ßn kh√≥a to√†n b·ªô ConcurrentHashMap, t·ª´ ƒë√≥ c·∫£i thi·ªán hi·ªáu su·∫•t v√† ƒë·ªô b·ªÅn trong m√¥i tr∆∞·ªùng ƒëa lu·ªìng.</p><p>T√≥m l·∫°i, ƒë·ªÉ s·ª≠ d·ª•ng b·∫£ng bƒÉm an to√†n cho c√°c lu·ªìng, n√™n s·ª≠ d·ª•ng ConcurrentHashMap ho·∫∑c s·ª≠ d·ª•ng ƒë·ªìng b·ªô h√≥a t∆∞·ªùng minh ƒë·ªÉ ƒë·∫£m b·∫£o an to√†n cho c√°c lu·ªìng.</p><h3 id="_05-tom-tat" tabindex="-1"><a class="header-anchor" href="#_05-tom-tat"><span>05. T√≥m t·∫Øt</span></a></h3><p>HashMap l√† m·ªôt trong nh·ªØng c·∫•u tr√∫c d·ªØ li·ªáu ph·ªï bi·∫øn nh·∫•t trong Java, n√≥ l√† m·ªôt c·∫•u tr√∫c l∆∞u tr·ªØ c√°c c·∫∑p kh√≥a - gi√° tr·ªã v√† cho ph√©p truy c·∫≠p nhanh v√†o gi√° tr·ªã d·ª±a tr√™n kh√≥a. D∆∞·ªõi ƒë√¢y l√† t·ªïng k·∫øt v·ªÅ HashMap:</p><ul><li>HashMap s·ª≠ d·ª•ng c·∫•u tr√∫c l∆∞u tr·ªØ m·∫£ng k·∫øt h·ª£p v·ªõi danh s√°ch li√™n k·∫øt ho·∫∑c c√¢y ƒë·ªè ƒëen, cho ph√©p th·ª±c hi·ªán c√°c thao t√°c th√™m, x√≥a, t√¨m ki·∫øm v·ªõi ƒë·ªô ph·ª©c t·∫°p O(1).</li><li>HashMap kh√¥ng an to√†n ƒë·ªëi v·ªõi c√°c lu·ªìng (non-thread-safe), do ƒë√≥ trong m√¥i tr∆∞·ªùng ƒëa lu·ªìng c·∫ßn s·ª≠ d·ª•ng <a href="/programming/java/thread/ConcurrentHashMap">ConcurrentHashMap</a> ƒë·ªÉ ƒë·∫£m b·∫£o an to√†n.</li><li>C∆° ch·∫ø m·ªü r·ªông c·ªßa HashMap th·ª±c hi·ªán b·∫±ng c√°ch tƒÉng k√≠ch th∆∞·ªõc m·∫£ng v√† t√≠nh l·∫°i gi√° tr·ªã hash, d·∫´n ƒë·∫øn vi·ªác m·ªü r·ªông c√≥ th·ªÉ ·∫£nh h∆∞·ªüng ƒë·∫øn hi·ªáu su·∫•t khi c√≥ nhi·ªÅu ph·∫ßn t·ª≠.</li><li>T·ª´ Java 8, HashMap s·ª≠ d·ª•ng ph∆∞∆°ng ph√°p n√©n danh s√°ch v√† c√¢y ƒë·ªÉ t·ªëi ∆∞u h√≥a vi·ªác l∆∞u tr·ªØ m·ªôt l∆∞·ª£ng l·ªõn ph·∫ßn t·ª≠, c·∫£i thi·ªán hi·ªáu su·∫•t.</li><li>Key trong HashMap l√† duy nh·∫•t, n·∫øu c·ªë g·∫Øng l∆∞u tr·ªØ key tr√πng l·∫∑p, gi√° tr·ªã sau s·∫Ω ghi ƒë√® gi√° tr·ªã tr∆∞·ªõc.</li><li>B·∫°n c√≥ th·ªÉ thi·∫øt l·∫≠p k√≠ch th∆∞·ªõc ban ƒë·∫ßu v√† h·ªá s·ªë t·∫£i c·ªßa HashMap, k√≠ch th∆∞·ªõc ban ƒë·∫ßu ch·ªâ ra k√≠ch th∆∞·ªõc ban ƒë·∫ßu c·ªßa m·∫£ng, h·ªá s·ªë t·∫£i ch·ªâ ra t·ª∑ l·ªá m√† m·∫£ng s·∫Ω ƒë∆∞·ª£c ƒëi·ªÅn. N√≥i chung, k√≠ch th∆∞·ªõc ban ƒë·∫ßu l√† 16, h·ªá s·ªë t·∫£i l√† 0.75.</li><li>Khi duy·ªát HashMap, n√≥ kh√¥ng c√≥ th·ª© t·ª±, v√¨ v·∫≠y n·∫øu b·∫°n c·∫ßn duy·ªát theo th·ª© t·ª±, b·∫°n n√™n s·ª≠ d·ª•ng <a href="https://javabebetter.cn/collection/treemap.html" target="_blank" rel="noopener noreferrer">TreeMap</a>.</li></ul><p>T√≥m l·∫°i, HashMap l√† m·ªôt c·∫•u tr√∫c d·ªØ li·ªáu hi·ªáu qu·∫£ v·ªõi kh·∫£ nƒÉng t√¨m ki·∫øm v√† ch√®n nhanh ch√≥ng, nh∆∞ng c·∫ßn ch√∫ √Ω ƒë·∫øn v·∫•n ƒë·ªÅ an to√†n ƒë·ªëi v·ªõi c√°c lu·ªìng v√† hi·ªáu su·∫•t.</p></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/vanhung4499/vanhung4499.github.io/edit/main/src/programming/java/collection/hashmap.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">Last update: </span><!----></div><div class="contributors"><span class="vp-meta-label">Contributors: </span><!--[--><!--[--><span class="vp-meta-info" title="email: vanhung4499@gmail.com">Hung Nguyen Van</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/programming/java/collection/stack.html" aria-label="Java Stack"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->Java Stack</div></a><a class="route-link auto-link next" href="/programming/java/collection/linkedhashmap.html" aria-label="LinkedHashMap"><div class="hint">Next<span class="arrow end"></span></div><div class="link">LinkedHashMap<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright ¬© 2024 Hung Nguyen </div></footer></div><!--]--><!--[--><!----><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-C-_dXKvP.js" defer></script>
  </body>
</html>
