import{_ as t,r as i,o as s,c as e,b as o,d as n}from"./app-BG8AAbz2.js";const c={},h=n(`<h1 id="java-native-method" tabindex="-1"><a class="header-anchor" href="#java-native-method"><span>Java Native Method</span></a></h1><p>Ví dụ như phương thức <code>private native start0()</code> trong lớp Thread;</p><p>Hoặc các phương thức trong lớp Object như getClass(), hashCode(), clone(), với các chữ ký như sau:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> native</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Class</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="color:#C678DD;--shiki-dark:#C678DD;">?</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> getClass</span><span style="color:#E06C75;--shiki-dark:#E06C75;">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> native</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> int</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> hashCode</span><span style="color:#E06C75;--shiki-dark:#E06C75;">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">protected</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> native</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Object</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> clone</span><span style="color:#E06C75;--shiki-dark:#E06C75;">() throws CloneNotSupportedException</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><p>Đây là những phương thức được đánh dấu bằng từ khoá <code>native</code>, và trong hầu hết các trường hợp, chúng không cần phải được thực hiện bằng ngôn ngữ Java.</p><h3 id="_1-jni-java-native-interface" tabindex="-1"><a class="header-anchor" href="#_1-jni-java-native-interface"><span><strong>1. JNI: Java Native Interface</strong></span></a></h3><p>Trước khi chúng ta đi vào việc giải thích native, hãy cùng tìm hiểu về JNI (Java Native Interface).</p><p>Thường thì, chúng ta hoàn toàn có thể viết chương trình bằng ngôn ngữ Java. Tuy nhiên, có những trường hợp mà Java có thể không đáp ứng được yêu cầu, hoặc không thể đáp ứng một cách hiệu quả hơn, ví dụ:</p><ul><li>① Thư viện lớp chuẩn của Java không hỗ trợ.</li><li>② Chúng ta đã viết một thư viện lớp bằng ngôn ngữ khác, chẳng hạn như C/C++, và muốn sử dụng nó trong mã Java.</li><li>③ Một số phương thức được gọi rất nhiều lần, để cải thiện hiệu suất, cần phải viết bằng ngôn ngữ gần với phần cứng (như assembly).</li></ul><p>Ba yêu cầu trên đều liên quan đến cách sử dụng mã Java để gọi mã được viết bằng ngôn ngữ khác. Đây chính là lúc JNI ra đời.</p><p>Từ phiên bản Java 1.1 trở đi, Java Native Interface (JNI) đã trở thành một phần của nền tảng Java, cho phép mã Java tương tác với mã được viết bằng các ngôn ngữ khác.</p><p>Ban đầu, JNI được thiết kế để làm việc với các ngôn ngữ biên dịch sẵn như C và C++, nhưng không ngăn cản bạn sử dụng các ngôn ngữ khác miễn là chúng tuân theo quy ước gọi hàm được hỗ trợ. Việc sử dụng Java để tương tác với mã được biên dịch nội bộ thường dẫn đến việc mất tính di động giữa các nền tảng, tuy nhiên, trong một số trường hợp điều này là chấp nhận được, thậm chí là bắt buộc, chẳng hạn như sử dụng các thư viện cũ, tương tác với phần cứng hoặc hệ điều hành để cải thiện hiệu suất chương trình. JNI ít nhất đảm bảo rằng mã nội bộ có thể hoạt động trên bất kỳ triển khai máy ảo Java nào.</p>`,12),l=n(`<p>Thông qua JNI, chúng ta có thể gọi các hàm thư viện được thực hiện bởi các công nghệ và hệ thống liên quan đến hệ điều hành thông qua chương trình Java (mã). Đồng thời, các công nghệ và hệ thống khác cũng có thể sử dụng các interface nguyên bản cung cấp bởi JNI để gọi các chức năng được triển khai nội bộ trong hệ thống ứng dụng Java.</p><p>&quot;Ba muội, chờ đã, Java không phải là một nền tảng đa nền tảng sao? Nếu sử dụng JNI, liệu chương trình có không còn lợi thế đa nền tảng nữa không?&quot; Câu hỏi của ba muội thực sự làm nổi bật điều này.</p><p>Nhược điểm của JNI:</p><ul><li>① Chương trình không còn đa nền tảng nữa. Để có thể đa nền tảng, bạn phải biên dịch lại phần mã ngoại cảnh trên các hệ thống khác nhau.</li><li>② Chương trình không còn hoàn toàn an toàn nữa, sử dụng mã ngoại cảnh một cách không thích hợp có thể dẫn đến sự cố toàn bộ chương trình. Một nguyên tắc chung là bạn nên giữ các phương pháp ngoại cảnh tập trung trong một số lượng ít các lớp. Điều này giảm thiểu sự ràng buộc giữa Java và C/C++.</li></ul><p>Hiện tại, điểm yếu của JNI so với lợi ích vẫn là chấp nhận được, có lẽ sẽ cần có những phát triển về kỹ thuật Java sau này, khi đó chúng ta có thể không còn cần JNI nữa, nhưng cho đến nay, JDK vẫn tiếp tục hỗ trợ chuẩn JNI.</p><h3 id="_2-viet-phuong-thuc-native-bang-ngon-ngu-c" tabindex="-1"><a class="header-anchor" href="#_2-viet-phuong-thuc-native-bang-ngon-ngu-c"><span><strong>2. Viết phương thức native bằng ngôn ngữ C</strong></span></a></h3><p>&quot;Phần trước chúng ta đã tìm hiểu về JNI, bây giờ hãy cùng viết một ví dụ: làm thế nào để gọi chương trình C từ mã Java.&quot; Tôi quay sang ba muội và nói, &quot;Hãy chú ý xem nhé.&quot;</p><blockquote><p>Tài liệu chính thức có tại: <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/jniTOC.html" target="_blank" rel="noopener noreferrer">https://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/jniTOC.html</a></p></blockquote><p>Các bước thực hiện như sau:</p><p>① Viết lớp Java có phương thức native, tạo tệp .java;</p><p>② Sử dụng lệnh javac để biên dịch lớp Java đã viết, tạo tệp .class;</p><p>③ Sử dụng lệnh javah -jni tên_lớp_java để tạo tệp tiêu đề có phần mở rộng là .h;</p><p>④ Sử dụng C/C++ (hoặc ngôn ngữ lập trình khác) để triển khai phương thức native, tạo tệp .cpp thực hiện các phương thức trong tệp .h;</p><p>⑤ Tạo thư viện liên kết động từ tệp C/C++, tạo tệp .dll.</p><p>Bây giờ, chúng ta sẽ thực hiện các bước này thông qua một chương trình HelloWorld.</p><h4 id="_01-viet-lop-java-co-phuong-thuc-native-hellojni-java" tabindex="-1"><a class="header-anchor" href="#_01-viet-lop-java-co-phuong-thuc-native-hellojni-java"><span>01) Viết lớp Java có phương thức native HelloJNI.java</span></a></h4><p>Tạo tệp HelloJNI.java trong thư mục <code>/Users/itwanger/Documents/Github/javabetter/testjni</code> với nội dung như sau:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> HelloJNI</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    static</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">loadLibrary</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;hello&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> // Tải thư viện liên kết động có tên là libhello.dylib</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // Định nghĩa phương thức native</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> native</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> helloJNI</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> HelloJNI</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">helloJNI</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// Gọi phương thức native</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p><strong>PS: Các lệnh thực thi sau này sẽ được thực hiện trong thư mục testjni</strong>.</p><p>Giải thích đoạn mã này:</p><p><code>private native void helloJNI()</code>: Phương thức được khai báo bằng từ khóa native, thông báo cho JVM rằng phương thức này sẽ được định nghĩa bên ngoài, ở đây chúng ta sẽ sử dụng ngôn ngữ C để triển khai.</p><p><code>System.loadLibrary(&quot;hello&quot;)</code>: Tải thư viện liên kết động, tham số &quot;hello&quot; là tên của thư viện. Chúng ta có thể hiểu rằng: phương thức helloJNI() trong chương trình không có thực hiện, nhưng chúng ta cần gọi phương thức này, vậy làm sao để gọi được?</p><p>Chúng ta cần khởi tạo phương thức này, vì vậy sử dụng khối mã static để khởi tạo, phần này sẽ được giải thích chi tiết sau.</p><h4 id="_02-bien-dich-hellojni-java" tabindex="-1"><a class="header-anchor" href="#_02-bien-dich-hellojni-java"><span>02) Biên dịch HelloJNI.java</span></a></h4><p>Trên dòng lệnh, biên dịch mã nguồn bằng lệnh <code>javac HelloJNI.java</code>.</p><figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/oo/native-method-41e11e7f-31c1-4611-9b85-63ec211ff31b.png" alt="Biên dịch HelloJNI.java" tabindex="0" loading="lazy"><figcaption>Biên dịch HelloJNI.java</figcaption></figure><h4 id="_03-su-dung-javah-jni-hellojni-đe-tao-tep-tieu-đe-co-phan-mo-rong-la-h" tabindex="-1"><a class="header-anchor" href="#_03-su-dung-javah-jni-hellojni-đe-tao-tep-tieu-đe-co-phan-mo-rong-la-h"><span>03) Sử dụng <code>javah -jni HelloJNI</code> để tạo tệp tiêu đề có phần mở rộng là h</span></a></h4><figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/oo/native-method-0b08bf51-7bd9-4d06-a0dc-4262c1a71fd5.png" alt="Tạo tệp tiêu đề .h" tabindex="0" loading="lazy"><figcaption>Tạo tệp tiêu đề .h</figcaption></figure><blockquote><p>PS: Từ Java 9 trở đi, javah đã bị loại bỏ, thay vào đó là sử dụng tùy chọn -h để tạo tệp tiêu đề, ví dụ: <code>javac -h . ClassName.java</code>.</p></blockquote><p>Sau khi thực hiện, sẽ tạo ra tệp tiêu đề tên là HelloJNI.h trong thư mục chứa HelloJNI.java. Mở tệp HelloJNI.h, bạn sẽ thấy mã như sau:</p><figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/oo/native-method-e5c34f63-84df-4a99-96e1-b45ea04929df.png" alt="Mã trong tệp HelloJNI.h" tabindex="0" loading="lazy"><figcaption>Mã trong tệp HelloJNI.h</figcaption></figure><p>Không cần hiểu rõ mã này, chỉ cần biết rằng nó được tạo tự động là được.</p><h4 id="_04-su-dung-ngon-ngu-c-đe-trien-khai-phuong-thuc-goc" tabindex="-1"><a class="header-anchor" href="#_04-su-dung-ngon-ngu-c-đe-trien-khai-phuong-thuc-goc"><span>04) Sử dụng ngôn ngữ C để triển khai phương thức gốc</span></a></h4><p>Tạo một tệp C, HelloJNI.c, để triển khai phương thức gốc sayHello.</p><div class="language-c" data-ext="c" data-title="c"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">#include</span><span style="color:#98C379;--shiki-dark:#98C379;"> &lt;stdio.h&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">#include</span><span style="color:#98C379;--shiki-dark:#98C379;"> &lt;jni.h&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">#include</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;HelloJNI.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">JNIEXPORT </span><span style="color:#C678DD;--shiki-dark:#C678DD;">void</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> JNICALL </span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">Java_HelloJNI_helloJNI</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;">JNIEnv </span><span style="color:#C678DD;--shiki-dark:#C678DD;">*</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">env</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> jobject </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    printf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;Hello, JNI!</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\n</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>Lưu ý, ở đây cần bao gồm tệp tiêu đề JNI và tên phương thức triển khai cần phải nhất quán với tên đã khai báo trong Java (<code>HelloJNI_helloJNI</code>, phương thức helloJNI của lớp HelloJNI).</p><h4 id="_05-viet-kich-ban-bien-dich-compile-sh" tabindex="-1"><a class="header-anchor" href="#_05-viet-kich-ban-bien-dich-compile-sh"><span>05) Viết kịch bản biên dịch <a href="http://compile.sh" target="_blank" rel="noopener noreferrer">compile.sh</a></span></a></h4><div class="language-sh" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"># Biên dịch tệp HelloJNI.c</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">gcc</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -I</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">$JAVA_HOME</span><span style="color:#98C379;--shiki-dark:#98C379;">/include&quot;</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -I</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">$JAVA_HOME</span><span style="color:#98C379;--shiki-dark:#98C379;">/include/darwin&quot;</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -shared</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -o</span><span style="color:#98C379;--shiki-dark:#98C379;"> libhello.dylib</span><span style="color:#98C379;--shiki-dark:#98C379;"> HelloJNI.c</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"># Sao chép tệp libhello.dylib được tạo vào thư mục hiện tại</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">cp</span><span style="color:#98C379;--shiki-dark:#98C379;"> libhello.dylib</span><span style="color:#98C379;--shiki-dark:#98C379;"> .</span></span></code></pre></div><p>Lưu ý:</p><ul><li><code>$JAVA_HOME</code> là đường dẫn cài đặt JDK, cần được thay đổi theo thực tế.</li><li>Trên macOS, phần mở rộng của thư viện liên kết động là .dylib, thay vì .so trên Linux.</li></ul><p>Tùy chọn -I được sử dụng để thông báo cho trình biên dịch về vị trí của tệp tiêu đề, <code>$JAVA_HOME</code> là đường dẫn tới thư mục cài đặt Java.</p><h4 id="_06-thuc-thi-kich-ban-bien-dich" tabindex="-1"><a class="header-anchor" href="#_06-thuc-thi-kich-ban-bien-dich"><span>06) Thực thi kịch bản biên dịch</span></a></h4><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>sh compile.sh</span></span></code></pre></div><p>Sau khi thực thi, một thư viện liên kết động tên là libhello.dylib sẽ được tạo trong thư mục hiện tại.</p><figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/oo/native-method-e93c8fa8-6e33-4374-81da-8bd9360d1bb4.png" alt="Thư viện liên kết động" tabindex="0" loading="lazy"><figcaption>Thư viện liên kết động</figcaption></figure><h4 id="_07-chay-hellojni" tabindex="-1"><a class="header-anchor" href="#_07-chay-hellojni"><span>07) Chạy HelloJNI</span></a></h4><p>Thực thi lệnh <code>java HelloJNI</code> để chạy HelloJNI, nếu mọi thứ đều ổn, dòng chữ &quot;Hello, JNI!&quot; sẽ xuất hiện trên terminal.</p><figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/oo/native-method-34beba0f-8fe8-48d0-aa48-b25c1b504b59.png" alt="Chạy HelloJNI" tabindex="0" loading="lazy"><figcaption>Chạy HelloJNI</figcaption></figure><h3 id="_3-luu-đo-jni-goi-c" tabindex="-1"><a class="header-anchor" href="#_3-luu-đo-jni-goi-c"><span><strong>3. Lưu đồ JNI gọi C</strong></span></a></h3><figure><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/oo/native-method-6673cf73-c4dd-4434-b821-0d705f756a73.png" alt="Lưu đồ JNI" tabindex="0" loading="lazy"><figcaption>Lưu đồ JNI</figcaption></figure><h3 id="_4-tu-khoa-native" tabindex="-1"><a class="header-anchor" href="#_4-tu-khoa-native"><span><strong>4. Từ khóa native</strong></span></a></h3><p>Từ khóa native được sử dụng để khai báo phương thức, các phương thức được khai báo bằng native nghĩa là phương thức này được triển khai bên ngoài, có thể sử dụng bất kỳ ngôn ngữ nào để triển khai nó, ví dụ như C/C++. Nói một cách đơn giản, một phương thức native là một interface để Java gọi mã không phải Java.</p><p>Cú pháp của native:</p><ul><li>①, Từ khóa native phải đứng trước kiểu trả về của phương thức, thứ tự với các từ khóa khác không quan trọng.</li><li>②, Không thể sử dụng từ khóa abstract và không có thân hàm, cũng không có dấu ngoặc nhọn.</li><li>③, Kiểu trả về có thể là bất kỳ kiểu nào.</li></ul>`,54);function p(r,d){const a=i("Mermaid");return s(),e("div",null,[h,o(a,{id:"mermaid-48",code:"eJxLy8kvT85ILCpR8AnictTwSixLVHDOT0nV5HLS8PLz1ORy1nDWd9bWhgpyOSro6topOHE5gWlnLgBTyQ/k"}),l])}const k=t(c,[["render",p],["__file","native-method.html.vue"]]),v=JSON.parse('{"path":"/programming/java/oo/native-method.html","title":"Java Native Method","lang":"en-US","frontmatter":{"title":"Java Native Method","tags":["java"],"categories":["java"],"order":6,"description":"Java Native Method Ví dụ như phương thức private native start0() trong lớp Thread; Hoặc các phương thức trong lớp Object như getClass(), hashCode(), clone(), với các chữ ký như ...","head":[["meta",{"property":"og:url","content":"https://vanhung4499.github.io/programming/java/oo/native-method.html"}],["meta",{"property":"og:site_name","content":"VanHung4499"}],["meta",{"property":"og:title","content":"Java Native Method"}],["meta",{"property":"og:description","content":"Java Native Method Ví dụ như phương thức private native start0() trong lớp Thread; Hoặc các phương thức trong lớp Object như getClass(), hashCode(), clone(), với các chữ ký như ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/oo/native-method-41e11e7f-31c1-4611-9b85-63ec211ff31b.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-07-04T09:37:15.000Z"}],["meta",{"property":"article:author","content":"Hung Nguyen"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:modified_time","content":"2024-07-04T09:37:15.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Java Native Method\\",\\"image\\":[\\"http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/oo/native-method-41e11e7f-31c1-4611-9b85-63ec211ff31b.png\\",\\"http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/oo/native-method-0b08bf51-7bd9-4d06-a0dc-4262c1a71fd5.png\\",\\"http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/oo/native-method-e5c34f63-84df-4a99-96e1-b45ea04929df.png\\",\\"http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/oo/native-method-e93c8fa8-6e33-4374-81da-8bd9360d1bb4.png\\",\\"http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/oo/native-method-34beba0f-8fe8-48d0-aa48-b25c1b504b59.png\\",\\"http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/oo/native-method-6673cf73-c4dd-4434-b821-0d705f756a73.png\\"],\\"dateModified\\":\\"2024-07-04T09:37:15.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hung Nguyen\\",\\"url\\":\\"https://vanhung4499.github.io\\"}]}"]]},"headers":[{"level":3,"title":"1. JNI: Java Native Interface","slug":"_1-jni-java-native-interface","link":"#_1-jni-java-native-interface","children":[]},{"level":3,"title":"2. Viết phương thức native bằng ngôn ngữ C","slug":"_2-viet-phuong-thuc-native-bang-ngon-ngu-c","link":"#_2-viet-phuong-thuc-native-bang-ngon-ngu-c","children":[]},{"level":3,"title":"3. Lưu đồ JNI gọi C","slug":"_3-luu-đo-jni-goi-c","link":"#_3-luu-đo-jni-goi-c","children":[]},{"level":3,"title":"4. Từ khóa native","slug":"_4-tu-khoa-native","link":"#_4-tu-khoa-native","children":[]}],"git":{"createdTime":1719590078000,"updatedTime":1720085835000,"contributors":[{"name":"Hung Nguyen","email":"vanhung4499@gmail.com","commits":2}]},"readingTime":{"minutes":7.09,"words":2126},"filePathRelative":"programming/java/oo/native-method.md","localizedDate":"June 28, 2024","excerpt":"\\n<p>Ví dụ như phương thức <code>private native start0()</code> trong lớp Thread;</p>\\n<p>Hoặc các phương thức trong lớp Object như getClass(), hashCode(), clone(), với các chữ ký như sau:</p>\\n<div class=\\"language-java\\" data-ext=\\"java\\" data-title=\\"java\\"><pre class=\\"shiki shiki-themes one-dark-pro one-dark-pro vp-code\\" style=\\"background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf\\" tabindex=\\"0\\"><code><span class=\\"line\\"><span style=\\"color:#C678DD;--shiki-dark:#C678DD\\">public</span><span style=\\"color:#C678DD;--shiki-dark:#C678DD\\"> final</span><span style=\\"color:#C678DD;--shiki-dark:#C678DD\\"> native</span><span style=\\"color:#E5C07B;--shiki-dark:#E5C07B\\"> Class</span><span style=\\"color:#56B6C2;--shiki-dark:#56B6C2\\">&lt;</span><span style=\\"color:#C678DD;--shiki-dark:#C678DD\\">?</span><span style=\\"color:#56B6C2;--shiki-dark:#56B6C2\\">&gt;</span><span style=\\"color:#61AFEF;--shiki-dark:#61AFEF\\"> getClass</span><span style=\\"color:#E06C75;--shiki-dark:#E06C75\\">()</span><span style=\\"color:#ABB2BF;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"color:#C678DD;--shiki-dark:#C678DD\\">public</span><span style=\\"color:#C678DD;--shiki-dark:#C678DD\\"> native</span><span style=\\"color:#C678DD;--shiki-dark:#C678DD\\"> int</span><span style=\\"color:#61AFEF;--shiki-dark:#61AFEF\\"> hashCode</span><span style=\\"color:#E06C75;--shiki-dark:#E06C75\\">()</span><span style=\\"color:#ABB2BF;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"color:#C678DD;--shiki-dark:#C678DD\\">protected</span><span style=\\"color:#C678DD;--shiki-dark:#C678DD\\"> native</span><span style=\\"color:#E5C07B;--shiki-dark:#E5C07B\\"> Object</span><span style=\\"color:#61AFEF;--shiki-dark:#61AFEF\\"> clone</span><span style=\\"color:#E06C75;--shiki-dark:#E06C75\\">() throws CloneNotSupportedException</span><span style=\\"color:#ABB2BF;--shiki-dark:#ABB2BF\\">;</span></span></code></pre>\\n</div>","autoDesc":true}');export{k as comp,v as data};
