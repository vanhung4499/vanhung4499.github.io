import{_ as e,o as a,c as i,a as n}from"./app-BRTHG7K9.js";const s={},l=n('<h1 id="【交易】门店自提" tabindex="-1"><a class="header-anchor" href="#【交易】门店自提"><span>【交易】门店自提</span></a></h1><p>友情提示：</p><p>uni-app Vue3 版本，门店自提暂未迁移完成，预计 2024 年 Q1 完成。目前缺两部分：</p><ul><li>订单结算页，增加自提门店的选择</li><li>订单详情页，增加自提门店的展示</li></ul><p>如果你着急的话，可以参考 <a href="https://gitee.com/yudaocode/yudao-mall-uniapp/tree/master-vue2/" target="_blank" rel="noopener noreferrer">uni-app Vue2 版本</a> 迁移过来，相关的后端接口都已经完成。</p><p>门店自提，是指用户在下单时，选择自提，然后到指定的门店进行自提（核销）。</p><h2 id="_1-门店信息" tabindex="-1"><a class="header-anchor" href="#_1-门店信息"><span><a href="#_1-%E9%97%A8%E5%BA%97%E4%BF%A1%E6%81%AF">#</a> 1. 门店信息</span></a></h2><p>门店自提时，需要使用门店信息，由 <code>yudao-module-trade-biz</code> 后端模块的 <code>delivery</code> 包的 DeliveryPickUpStoreService 实现。</p><h3 id="_1-1-表结构" tabindex="-1"><a class="header-anchor" href="#_1-1-表结构"><span><a href="#_1-1-%E8%A1%A8%E7%BB%93%E6%9E%84">#</a> 1.1 表结构</span></a></h3><blockquote><p>省略 creator/create_time/updater/update_time/deleted/tenant_id 等通用字段</p></blockquote><div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>CREATE TABLE `trade_delivery_pick_up_store` (</span></span>\n<span class="line"><span>  `id` bigint NOT NULL AUTO_INCREMENT COMMENT &#39;编号&#39;,</span></span>\n<span class="line"><span>  `name` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT &#39;门店名称&#39;,</span></span>\n<span class="line"><span>  `introduction` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT &#39;门店简介&#39;,</span></span>\n<span class="line"><span>  `phone` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT &#39;门店手机&#39;,</span></span>\n<span class="line"><span>  `area_id` int NOT NULL COMMENT &#39;区域编号&#39;,</span></span>\n<span class="line"><span>  `detail_address` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT &#39;门店详细地址&#39;,</span></span>\n<span class="line"><span>  `logo` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT &#39;门店 logo&#39;,</span></span>\n<span class="line"><span>  `opening_time` time NOT NULL COMMENT &#39;营业开始时间&#39;,</span></span>\n<span class="line"><span>  `closing_time` time NOT NULL COMMENT &#39;营业结束时间&#39;,</span></span>\n<span class="line"><span>  `latitude` double NOT NULL COMMENT &#39;纬度&#39;,</span></span>\n<span class="line"><span>  `longitude` double NOT NULL COMMENT &#39;经度&#39;,</span></span>\n<span class="line"><span>  `status` tinyint NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;门店状态&#39;,</span></span>\n<span class="line"><span>  PRIMARY KEY (`id`) USING BTREE</span></span>\n<span class="line"><span>) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT=&#39;自提门店&#39;;</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>比较简单，就是存储下门店的基本信息。</p><h3 id="_1-2-管理后台" tabindex="-1"><a class="header-anchor" href="#_1-2-管理后台"><span><a href="#_1-2-%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0">#</a> 1.2 管理后台</span></a></h3><p>对应 [商城系统 -&gt; 订单中心 -&gt; 配送管理 -&gt; 门店自提 -&gt; 门店管理] 菜单，对应 <code>yudao-ui-admin-vue3</code> 项目的 <code>views/mall/trade/delivery/express</code> 目录。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/商城手册/门店自提/门店信息-管理后台.png" alt="门店信息" tabindex="0" loading="lazy"><figcaption>门店信息</figcaption></figure><h2 id="_2-自提流程" tabindex="-1"><a class="header-anchor" href="#_2-自提流程"><span><a href="#_2-%E8%87%AA%E6%8F%90%E6%B5%81%E7%A8%8B">#</a> 2. 自提流程</span></a></h2><h3 id="_2-1-下单【买家】" tabindex="-1"><a class="header-anchor" href="#_2-1-下单【买家】"><span><a href="#_2-1-%E4%B8%8B%E5%8D%95%E3%80%90%E4%B9%B0%E5%AE%B6%E3%80%91">#</a> 2.1 下单【买家】</span></a></h3><p>① 买家在 uni-app 订单结算页时，选择自提，然后选择自提门店。如下图所示：</p><p>TODO 未开发，后续补图</p><p>注意：商品的配送方式需要支持自提，才会显示自提的选项！！！如果没设置，去“商品管理”里，编辑下相关的商品。</p><p>② 下单并支付完成后，买家在 uni-app 订单详情页时，可以看到自提门店的信息，也包括核销码、核销二维码。如下图所示：</p><p>TODO 未开发，后续补图</p><h3 id="_2-2-核销【卖家】" tabindex="-1"><a class="header-anchor" href="#_2-2-核销【卖家】"><span><a href="#_2-2-%E6%A0%B8%E9%94%80%E3%80%90%E5%8D%96%E5%AE%B6%E3%80%91">#</a> 2.2 核销【卖家】</span></a></h3><p>① 核销订单列表，对应 [商城系统 -&gt; 订单中心 -&gt; 配送管理 -&gt; 门店自提 -&gt; 核销订单] 菜单，对应 <code>yudao-ui-admin-vue3</code> 项目的 <code>views/mall/trade/delivery/pickUpOrder</code> 目录。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/商城手册/门店自提/核销订单列表-管理后台.png" alt="核销订单列表" tabindex="0" loading="lazy"><figcaption>核销订单列表</figcaption></figure><p>② 点击「核销」按钮，输入核销码，查询核销订单的信息。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/商城手册/门店自提/核销订单-管理后台.png" alt="核销订单 - 查询" tabindex="0" loading="lazy"><figcaption>核销订单 - 查询</figcaption></figure><p>后端对应 AppTradeOrderController 的 <code>#getByPickUpVerifyCode(...)</code> 提供的“查询核销码对应的订单”接口，基于 <code>trade_order</code> 表的 <code>pick_up_verify_code</code> 字段查询。</p><p>③ 点击「确认核销」按钮后，即可核销成功。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/商城手册/门店自提/核销订单2-管理后台.png" alt="核销订单 - 确认" tabindex="0" loading="lazy"><figcaption>核销订单 - 确认</figcaption></figure><p>后端对应 AppTradeOrderController 的 <code>#pickUpOrderByVerifyCode(...)</code> 提供的“订单核销”接口。</p><h2 id="_3-配送配置" tabindex="-1"><a class="header-anchor" href="#_3-配送配置"><span><a href="#_3-%E9%85%8D%E9%80%81%E9%85%8D%E7%BD%AE">#</a> 3. 配送配置</span></a></h2><figure><img src="https://cloud.iocoder.cn/img/商城手册/快递发货/配送配置.png" alt="配送配置" tabindex="0" loading="lazy"><figcaption>配送配置</figcaption></figure><ul><li>SQL 对应 <code>trade_config</code> 表的 <code>delivery_</code> 开头的字段。</li><li>前端对应 <code>yudao-ui-admin-vue3</code> 项目的 <code>views/mall/trade/config/index.vue</code> 目录</li><li>后端对应 <code>yudao-module-trade-biz</code> 项目的 TradeConfigController 类</li></ul>',34),d=[l];function c(r,p){return a(),i("div",null,d)}const o=e(s,[["render",c],["__file","trade-delivery-pickup.html.vue"]]),u=JSON.parse('{"path":"/project/yudao-cloud/mall/trade-delivery-pickup.html","title":"【交易】门店自提","lang":"en-US","frontmatter":{"title":"【交易】门店自提","tags":["project","java","spring-boot","spring-cloud"],"categories":["project"],"order":103,"feed":false,"seo":false,"head":[]},"headers":[{"level":2,"title":"# 1. 门店信息","slug":"_1-门店信息","link":"#_1-门店信息","children":[{"level":3,"title":"# 1.1 表结构","slug":"_1-1-表结构","link":"#_1-1-表结构","children":[]},{"level":3,"title":"# 1.2 管理后台","slug":"_1-2-管理后台","link":"#_1-2-管理后台","children":[]}]},{"level":2,"title":"# 2. 自提流程","slug":"_2-自提流程","link":"#_2-自提流程","children":[{"level":3,"title":"# 2.1 下单【买家】","slug":"_2-1-下单【买家】","link":"#_2-1-下单【买家】","children":[]},{"level":3,"title":"# 2.2 核销【卖家】","slug":"_2-2-核销【卖家】","link":"#_2-2-核销【卖家】","children":[]}]},{"level":2,"title":"# 3. 配送配置","slug":"_3-配送配置","link":"#_3-配送配置","children":[]}],"git":{"createdTime":1720365235000,"updatedTime":1720365235000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":3.55,"words":1066},"filePathRelative":"project/yudao-cloud/mall/trade-delivery-pickup.md","localizedDate":"July 7, 2024"}');export{o as comp,u as data};
