import{_ as s,o as a,c as n,a as t}from"./app-5QVbWi7Z.js";const h={};function l(e,i){return a(),n("div",null,i[0]||(i[0]=[t(`<h1 id="thuat-toan-xo-so" tabindex="-1"><a class="header-anchor" href="#thuat-toan-xo-so"><span>Thuật toán xổ số</span></a></h1><h2 id="i-muc-tieu-cua-chuong-nay" tabindex="-1"><a class="header-anchor" href="#i-muc-tieu-cua-chuong-nay"><span><strong>I. Mục Tiêu Của Chương Này</strong></span></a></h2><p>Bắt đầu từ chương này, chúng ta sẽ tiến hành phát triển các yêu cầu thực tế. Đầu tiên, chúng ta sẽ lập ra quy trình kinh doanh, sau đó liên tục triển khai các chức năng của từng module trong quy trình này. Điều này bao gồm việc triển khai chiến lược rút thăm trúng thưởng, trong đó sẽ cần sử dụng đến truy vấn cơ sở dữ liệu, tính toán giá trị chiến lược và lưu trữ dữ liệu trên Redis Map. Trong quá trình này, cách thức triển khai phát triển theo kiến trúc phân lớp DDD cũng sẽ được thể hiện.</p><p><strong>Lưu ý</strong>: Về kiến thức thuật toán rút thăm trúng thưởng.</p><p>Có hai loại thuật toán rút thăm: một là đổi không gian lấy thời gian, hai là đổi thời gian lấy không gian. Trong các phương án, đổi không gian lấy thời gian có nghĩa là tính toán trước phân bố xác suất rút thăm và lưu trữ trên bộ nhớ nội bộ (guava) hoặc Redis, sau đó khi rút thăm, giá trị ngẫu nhiên được tạo ra sẽ xác định kết quả trong không gian này với độ phức tạp là O(1).</p><p>Tuy nhiên, cần lưu ý rằng, bộ nhớ nội bộ nhanh hơn, còn Redis thì chậm hơn một chút nhưng có thể giải quyết vấn đề lưu trữ phân tán. Bộ nhớ nội bộ cần các máy phân tán khác nhau duy trì việc cập nhật dữ liệu đồng bộ, điều này yêu cầu phải có trung tâm cấu hình và các phương pháp kiểm tra định kỳ để xử lý việc tải dữ liệu vào bộ nhớ trước khi ứng dụng khởi động hoặc trong quá trình chạy, khi có thêm hoặc thay đổi hoạt động.</p><p>Loại còn lại là đổi thời gian lấy không gian, tức là việc tính toán rút thăm có thể được thực hiện khi giá trị ngẫu nhiên được tạo ra, sau đó so sánh với phạm vi xác suất trong vòng lặp. Phương pháp này thích hợp cho những trường hợp cần không gian lớn để lưu trữ xác suất rút thăm, không hiệu quả khi sử dụng các phương pháp khác. Trong chương trình, có thể đặt điều kiện rằng khi tổng giá trị xác suất vượt quá 1 triệu, thì không lưu trữ mà chuyển sang so sánh vòng lặp. Tuy nhiên, mọi phương pháp đều phải phù hợp với yêu cầu thực tế.</p><h2 id="ii-gioi-thieu-yeu-cau" tabindex="-1"><a class="header-anchor" href="#ii-gioi-thieu-yeu-cau"><span><strong>II. Giới Thiệu Yêu Cầu</strong></span></a></h2><h3 id="_1-quy-trinh" tabindex="-1"><a class="header-anchor" href="#_1-quy-trinh"><span><strong>1. Quy Trình</strong></span></a></h3><p>Dưới góc nhìn của người dùng, chúng ta sẽ lập ra toàn bộ quy trình. 【Như hình】</p><figure><img src="https://article-images.zsxq.com/FhiurFVHAoOjhR0p7WD39A-HHr4i" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Quá trình này bao gồm: chiến lược xổ số, giải thưởng chiến lược, quy tắc chiến lược, và phát hành giải thưởng. Khi xem hình này, bạn có thể kết hợp với bảng cơ sở dữ liệu để suy nghĩ. Trong phần này, chúng ta sẽ triển khai chiến lược rút thăm để sử dụng trong các lần rút thăm sau này.</p><h3 id="_2-mo-ta-thuat-toan" tabindex="-1"><a class="header-anchor" href="#_2-mo-ta-thuat-toan"><span><strong>2. Mô Tả Thuật Toán</strong></span></a></h3><p>Có hai phương pháp triển khai thuật toán xổ số:</p><figure><img src="https://article-images.zsxq.com/FiJ42JDXPmkMSc19DG1TPl317JXP" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol><li>Dựa trên giá trị xác suất, bạn có thể tạo ra các phạm vi cộng dồn. Ví dụ, A chiếm 10 đơn vị, phạm vi của B sẽ là từ 10+40 đến 50 đơn vị. Khi thực hiện rút thăm, giá trị ngẫu nhiên sẽ được so sánh với các phạm vi này.</li><li>Cách khác là lưu trữ vào Map, đổi không gian lấy thời gian. Khi rút thăm, giá trị ngẫu nhiên sẽ được sử dụng làm chỉ số để lấy kết quả giải thưởng tương ứng. Trong phần này, chúng ta sẽ triển khai phương pháp thứ hai.</li></ol><h2 id="iii-trien-khai-chuc-nang" tabindex="-1"><a class="header-anchor" href="#iii-trien-khai-chuc-nang"><span><strong>III. Triển Khai Chức Năng</strong></span></a></h2><h3 id="_1-cau-truc-du-an" tabindex="-1"><a class="header-anchor" href="#_1-cau-truc-du-an"><span><strong>1. Cấu Trúc Dự Án</strong></span></a></h3><figure><img src="https://article-images.zsxq.com/FqGV0Npd5NzBLARGf0OQRB671ub2" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol><li>Trong phần này, cần mở rộng thêm cấu hình Redis, thao tác trên bảng cơ sở dữ liệu, và triển khai lớp lưu trữ để xử lý việc gọi dữ liệu.</li><li>Redis cần cho phần này đã được cài đặt bằng Docker trong thư mục <code>doc/dev-ops/environment</code>.</li></ol><h3 id="_2-cai-đat-moi-truong" tabindex="-1"><a class="header-anchor" href="#_2-cai-đat-moi-truong"><span><strong>2. Cài Đặt Môi Trường</strong></span></a></h3><p># Lệnh thực thi <code>docker-compose up -d</code></p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;3.9&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">services</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  mysql</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    image</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">mysql:8.0.32</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    container_name</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">mysql</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    command</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">--default-authentication-plugin=mysql_native_password</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    restart</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">always</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    environment</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      TZ</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      MYSQL_ROOT_PASSWORD</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">123456</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    networks</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">my-network</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    ports</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;13306:3306&quot;</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    volumes</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">./mysql/sql:/docker-entrypoint-initdb.d</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    healthcheck</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      test</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: [ </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;CMD&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;mysqladmin&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> ,</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;ping&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;-h&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;localhost&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> ]</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      interval</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">5s</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      timeout</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">10s</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      retries</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">10</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      start_period</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">15s</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    volumes_from</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">mysql-job-dbdata</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  mysql-job-dbdata</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    image</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">alpine:3.18.2</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    container_name</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">mysql-job-dbdata</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    volumes</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">/var/lib/mysql</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  phpmyadmin</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    image</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">phpmyadmin:5.2.1</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    container_name</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">phpmyadmin</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    hostname</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">phpmyadmin</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    ports</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">8899:80</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    environment</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">PMA_HOST=mysql</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">PMA_PORT=3306</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">MYSQL_ROOT_PASSWORD</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">123456</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    networks</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">my-network</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  redis</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    image</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">redis:7.2.0</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    container_name</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">redis</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    restart</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">always</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    hostname</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">redis</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    privileged</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    ports</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">16379:6379</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    volumes</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">./redis/redis.conf:/usr/local/etc/redis/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    command</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">redis-server /usr/local/etc/redis/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    networks</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">my-network</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    healthcheck</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      test</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: [ </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;CMD&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;redis-cli&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;ping&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> ]</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      interval</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">10s</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      timeout</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">5s</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      retries</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  redis-admin</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    image</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">spryker/redis-commander:0.8.0</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    container_name</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">redis-admin</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    hostname</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">redis-commander</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    restart</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">always</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    ports</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">8081:8081</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    environment</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">REDIS_HOSTS=local:redis:6379</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">HTTP_USER=admin</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">HTTP_PASSWORD=admin</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    networks</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">my-network</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">networks</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  my-network</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    driver</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">bridge</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://article-images.zsxq.com/FpgBx5UYU70XNXailuuh6j_GG0ot" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol><li>Lưu ý: Khi thực thi script cài đặt, hãy chú ý các tập tin cấu hình tương ứng. Nếu bạn cài đặt trên server cloud, nhớ tải các tập tin qua FTP.</li><li>Bạn có thể sử dụng giao diện quản lý Portainer để xóa bỏ MySQL đã cài đặt trước đó và cài đặt lại theo script này, đồng thời cài đặt cả Redis.</li></ol><h3 id="_3-logic-cot-loi" tabindex="-1"><a class="header-anchor" href="#_3-logic-cot-loi"><span><strong>3. Logic Cốt Lõi</strong></span></a></h3><p><strong>Mã nguồn</strong>: <a href="http://cn.bugstack.domain.strategy.service.armory.StrategyArmory" target="_blank" rel="noopener noreferrer">cn.bugstack.domain.strategy.service.armory.StrategyArmory</a></p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Slf4j</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> StrategyArmory</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> IStrategyArmory</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Resource</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">  private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> IStrategyRepository</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> repository</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">  public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> assembleLotteryStrategy</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> strategyId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 1. Truy vấn cấu hình chiến lược</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    List</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">StrategyAwardEntity</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">strategyAwardEntities</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> repository</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">queryStrategyAwardList</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(strategyId);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 2. Lấy giá trị xác suất nhỏ nhất</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    BigDecimal</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> minAwardRate</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> strategyAwardEntities</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">stream</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">map</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(StrategyAwardEntity</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">::</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">getAwardRate)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">min</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(BigDecimal</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">::</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">compareTo)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">orElse</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">BigDecimal</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ZERO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 3. Lấy tổng giá trị xác suất</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    BigDecimal</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> totalAwardRate</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> strategyAwardEntities</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">stream</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">map</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(StrategyAwardEntity</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">::</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">getAwardRate)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">reduce</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">BigDecimal</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ZERO</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, BigDecimal</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">::</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">add);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 4. Dùng 1% 0.0001 để lấy phạm vi xác suất</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    BigDecimal</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> rateRange</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> totalAwardRate</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">divide</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(minAwardRate, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RoundingMode</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">CEILING</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 5. Tạo bảng tra cứu xác suất chiến lược</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    List</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">strategyAwardSearchRateTables</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ArrayList</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;&gt;(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">rateRange</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">intValue</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">StrategyAwardEntity</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> strategyAward</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> strategyAwardEntities) {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">      Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> awardId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> strategyAward</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getAwardId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">      BigDecimal</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> awardRate</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> strategyAward</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getAwardRate</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">      for</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> rateRange</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">multiply</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(awardRate).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setScale</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RoundingMode</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">CEILING</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">intValue</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(); i++) {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        strategyAwardSearchRateTables</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(awardId);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">   </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 6. Lưu trữ Redis, đổi không gian lấy thời gian</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> redisKey</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">format</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;lottery_strategy_rate:%s&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, strategyId);</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    repository</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">saveLotteryStrategyRedis</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(redisKey, strategyAwardSearchRateTables);</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    log</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Tạo bảng tra cứu xác suất chiến lược thành công，strategyId：{}&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, strategyId);</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">  public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> drawAwardByRate</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> strategyId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 1. Truy vấn bảng tra cứu xác suất chiến lược</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> redisKey</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">format</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;lottery_strategy_rate:%s&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, strategyId);</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    List</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">strategyAwardSearchRateTables</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> repository</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">queryStrategyAwardRedis</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(redisKey);</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">strategyAwardSearchRateTables</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">isEmpty</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()) </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 2. Lấy ngẫu nhiên</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    int</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> random</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ThreadLocalRandom</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">current</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">nextInt</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">strategyAwardSearchRateTables</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">size</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> strategyAwardSearchRateTables</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(random).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">longValue</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Kho chứa chiến lược (Strategy Armory), chịu trách nhiệm khởi tạo tính toán chiến lược:</strong></p><ol><li>Truy vấn cấu hình chiến lược</li><li>Lấy giá trị xác suất nhỏ nhất</li><li>Lấy tổng giá trị xác suất</li><li>Sử dụng giá trị 1% 0.0001 để tạo ra phạm vi xác suất, bao gồm các mức phần trăm, phần nghìn, phần vạn</li><li>Tạo bảng tra cứu xác suất cho các phần thưởng trong chiến lược (ở đây đề cập đến việc lưu trữ các phần thưởng tương ứng trong danh sách, phần thưởng càng có nhiều vị trí chiếm dụng thì xác suất càng cao)</li><li>Thực hiện thao tác trộn thứ tự các phần thưởng đã lưu trữ để tránh việc các số ngẫu nhiên sinh ra luôn trùng với các phần thưởng cố định ở đầu danh sách.</li><li>Tạo ra tập hợp Map, trong đó key là giá trị xác suất. Thông qua xác suất để lấy được ID phần thưởng tương ứng</li><li>Lưu trữ vào Redis</li></ol><p><strong>Lưu ý</strong>: Ở đây, <code>IStrategyRepository</code> được triển khai bởi tầng kho chứa dữ liệu.</p><h2 id="iv-kiem-tra-va-xac-nhan" tabindex="-1"><a class="header-anchor" href="#iv-kiem-tra-va-xac-nhan"><span><strong>IV. Kiểm tra và xác nhận</strong></span></a></h2><p>Trước khi kiểm tra, cần hoàn thành cài đặt môi trường Docker và đảm bảo rằng MySQL và Redis có thể sử dụng bình thường.</p><p><strong>📢 Lưu ý</strong>: Trong bảng dữ liệu của chương này, chiến lược có ID 100001 có phạm vi xác suất rất lớn, với giá trị nhỏ nhất là 0.0001 (sau dấu thập phân bốn chữ số), điều này sẽ tạo ra một tập hợp dữ liệu map rất lớn (chuyển đổi sang số nguyên). Nếu cấu hình máy tính thấp, có thể chạy không hiệu quả (cũng có thể điều chỉnh cấu hình JVM), bạn có thể thử với chiến lược 100002 hoặc điều chỉnh xác suất của 100001 từ giá trị bốn chữ số 0.0001 thành 0.001 hoặc 0.01. Hãy nhớ rằng tổng xác suất trong chương này phải bằng 1 (trong các chương sau, thuật toán mới sẽ không yêu cầu tổng xác suất bằng 1).</p><h3 id="_1-lap-rap-chien-luoc" tabindex="-1"><a class="header-anchor" href="#_1-lap-rap-chien-luoc"><span><strong>1. Lắp ráp chiến lược</strong></span></a></h3><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">* ID chiến lược: 100001L, 100002L - Lắp ráp khi tạo bảng chiến lược và lưu trữ vào Redis Map</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">*/</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> test_strategyArmory</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    boolean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> success </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> strategyArmory</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">assembleLotteryStrategy</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">100002L</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    log</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Kết quả kiểm tra: {}&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, success);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><ol><li>Địa chỉ: <strong><a href="http://0.0.0.0:8081/" target="_blank" rel="noopener noreferrer">http://0.0.0.0:8081/</a></strong></li><li>Bước này dùng để lắp ráp dữ liệu vào Redis, sau khi hoàn thành, bạn có thể truy cập giao diện quản lý Redis để kiểm tra.</li></ol><h3 id="_2-thuc-hien-rut-tham" tabindex="-1"><a class="header-anchor" href="#_2-thuc-hien-rut-tham"><span><strong>2. Thực hiện rút thăm</strong></span></a></h3><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">* Lấy ngẫu nhiên ID phần thưởng từ chiến lược đã lắp ráp</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">*/</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> test_getAssembleRandomVal</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    log</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Kết quả kiểm tra: {} - ID phần thưởng&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">strategyArmory</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getRandomAwardId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">100002L</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><p><strong>23-12-23.16:53:43.798 [main] INFO StrategyTest</strong> - <strong>Kết quả kiểm tra: 101 - ID phần thưởng</strong></p><h2 id="v-bai-tap-cho-đoc-gia" tabindex="-1"><a class="header-anchor" href="#v-bai-tap-cho-đoc-gia"><span><strong>V. Bài tập cho độc giả</strong></span></a></h2><ol><li>Bài tập đơn giản: Hoàn thành nội dung chương này, hiểu rõ trách nhiệm của các module trong phân lớp DDD và thiết kế, triển khai thuật toán trong chương này.</li><li>Bài tập nâng cao: Có thể suy nghĩ về các phương thức triển khai thuật toán rút thăm khác và viết mã triển khai. Giá trị xác suất trong chương này có sai số, đã được sửa đổi trong các chương sau từ chương 7 trở đi. Nhánh code tại: <a href="https://gitcode.net/KnowledgePlanet/big-market/big-market/-/tree/240121-xfg-strategy-fix" target="_blank" rel="noopener noreferrer">https://gitcode.net/KnowledgePlanet/big-market/big-market/-/tree/240121-xfg-strategy-fix</a> &quot;Khuyến nghị tự kiểm tra và so sánh mã nguồn trước khi tham khảo nhánh này&quot;.</li></ol>`,42)]))}const p=s(h,[["render",l],["__file","05-lottery-strategy.html.vue"]]),r=JSON.parse('{"path":"/project/big-market/05-lottery-strategy.html","title":"Raffle Probability Strategy","lang":"en-US","frontmatter":{"title":"Raffle Probability Strategy","tags":["project"],"categories":["project"],"order":7,"description":"Thuật toán xổ số I. Mục Tiêu Của Chương Này Bắt đầu từ chương này, chúng ta sẽ tiến hành phát triển các yêu cầu thực tế. Đầu tiên, chúng ta sẽ lập ra quy trình kinh doanh, sau đ...","head":[["meta",{"property":"og:url","content":"https://vanhung4499.github.io/project/big-market/05-lottery-strategy.html"}],["meta",{"property":"og:site_name","content":"VanHung4499"}],["meta",{"property":"og:title","content":"Raffle Probability Strategy"}],["meta",{"property":"og:description","content":"Thuật toán xổ số I. Mục Tiêu Của Chương Này Bắt đầu từ chương này, chúng ta sẽ tiến hành phát triển các yêu cầu thực tế. Đầu tiên, chúng ta sẽ lập ra quy trình kinh doanh, sau đ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://article-images.zsxq.com/FhiurFVHAoOjhR0p7WD39A-HHr4i"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-10-02T17:20:50.000Z"}],["meta",{"property":"article:author","content":"Hung Nguyen"}],["meta",{"property":"article:tag","content":"project"}],["meta",{"property":"article:modified_time","content":"2024-10-02T17:20:50.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Raffle Probability Strategy\\",\\"image\\":[\\"https://article-images.zsxq.com/FhiurFVHAoOjhR0p7WD39A-HHr4i\\",\\"https://article-images.zsxq.com/FiJ42JDXPmkMSc19DG1TPl317JXP\\",\\"https://article-images.zsxq.com/FqGV0Npd5NzBLARGf0OQRB671ub2\\",\\"https://article-images.zsxq.com/FpgBx5UYU70XNXailuuh6j_GG0ot\\"],\\"dateModified\\":\\"2024-10-02T17:20:50.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hung Nguyen\\",\\"url\\":\\"https://vanhung4499.github.io\\"}]}"]]},"headers":[{"level":2,"title":"I. Mục Tiêu Của Chương Này","slug":"i-muc-tieu-cua-chuong-nay","link":"#i-muc-tieu-cua-chuong-nay","children":[]},{"level":2,"title":"II. Giới Thiệu Yêu Cầu","slug":"ii-gioi-thieu-yeu-cau","link":"#ii-gioi-thieu-yeu-cau","children":[{"level":3,"title":"1. Quy Trình","slug":"_1-quy-trinh","link":"#_1-quy-trinh","children":[]},{"level":3,"title":"2. Mô Tả Thuật Toán","slug":"_2-mo-ta-thuat-toan","link":"#_2-mo-ta-thuat-toan","children":[]}]},{"level":2,"title":"III. Triển Khai Chức Năng","slug":"iii-trien-khai-chuc-nang","link":"#iii-trien-khai-chuc-nang","children":[{"level":3,"title":"1. Cấu Trúc Dự Án","slug":"_1-cau-truc-du-an","link":"#_1-cau-truc-du-an","children":[]},{"level":3,"title":"2. Cài Đặt Môi Trường","slug":"_2-cai-đat-moi-truong","link":"#_2-cai-đat-moi-truong","children":[]},{"level":3,"title":"3. Logic Cốt Lõi","slug":"_3-logic-cot-loi","link":"#_3-logic-cot-loi","children":[]}]},{"level":2,"title":"IV. Kiểm tra và xác nhận","slug":"iv-kiem-tra-va-xac-nhan","link":"#iv-kiem-tra-va-xac-nhan","children":[{"level":3,"title":"1. Lắp ráp chiến lược","slug":"_1-lap-rap-chien-luoc","link":"#_1-lap-rap-chien-luoc","children":[]},{"level":3,"title":"2. Thực hiện rút thăm","slug":"_2-thuc-hien-rut-tham","link":"#_2-thuc-hien-rut-tham","children":[]}]},{"level":2,"title":"V. Bài tập cho độc giả","slug":"v-bai-tap-cho-đoc-gia","link":"#v-bai-tap-cho-đoc-gia","children":[]}],"git":{"createdTime":1727889650000,"updatedTime":1727889650000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":7.5,"words":2251},"filePathRelative":"project/big-market/05-lottery-strategy.md","localizedDate":"October 2, 2024","excerpt":"\\n<h2><strong>I. Mục Tiêu Của Chương Này</strong></h2>\\n<p>Bắt đầu từ chương này, chúng ta sẽ tiến hành phát triển các yêu cầu thực tế. Đầu tiên, chúng ta sẽ lập ra quy trình kinh doanh, sau đó liên tục triển khai các chức năng của từng module trong quy trình này. Điều này bao gồm việc triển khai chiến lược rút thăm trúng thưởng, trong đó sẽ cần sử dụng đến truy vấn cơ sở dữ liệu, tính toán giá trị chiến lược và lưu trữ dữ liệu trên Redis Map. Trong quá trình này, cách thức triển khai phát triển theo kiến trúc phân lớp DDD cũng sẽ được thể hiện.</p>","autoDesc":true}');export{p as comp,r as data};
