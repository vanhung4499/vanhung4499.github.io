import{_ as n,o as a,c as s,a as i}from"./app-BRTHG7K9.js";const e={},t=i('<h1 id="【营销】限时折扣" tabindex="-1"><a class="header-anchor" href="#【营销】限时折扣"><span>【营销】限时折扣</span></a></h1><p>友情提示：限时折扣的后端 + 管理后台已经实现，uni-app 前端暂未实现，预计 2024 年 Q1 完成。</p><p>限时折扣，指的是在指定时间段内，对指定商品进行折扣。主要由 <code>yudao-module-promotion-biz</code> 后端模块的 <code>discount</code> 实现。</p><h2 id="_1-表结构" tabindex="-1"><a class="header-anchor" href="#_1-表结构"><span><a href="#_1-%E8%A1%A8%E7%BB%93%E6%9E%84">#</a> 1. 表结构</span></a></h2><p>一个限时折扣活动，可以有多个商品参与，所以它有一个 <code>promotion_discount_activity</code> 活动主表，和 <code>promotion_discount_activity_product</code> 活动商品子表。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/商城手册/限时折扣/表关系.png" alt="表关系" tabindex="0" loading="lazy"><figcaption>表关系</figcaption></figure><blockquote><p>省略 creator/create_time/updater/update_time/deleted/tenant_id 等通用字段</p></blockquote><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>CREATE TABLE `promotion_discount_activity` (</span></span>\n<span class="line"><span>  `id` bigint NOT NULL AUTO_INCREMENT COMMENT &#39;活动编号&#39;,</span></span>\n<span class="line"><span>  `name` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT &#39;&#39; COMMENT &#39;活动标题&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `status` tinyint NOT NULL DEFAULT &#39;-1&#39; COMMENT &#39;活动状态&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `start_time` datetime NOT NULL COMMENT &#39;开始时间&#39;,</span></span>\n<span class="line"><span>  `end_time` datetime NOT NULL COMMENT &#39;结束时间&#39;,</span></span>\n<span class="line"><span>  `remark` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT &#39;&#39; COMMENT &#39;备注&#39;,</span></span>\n<span class="line"><span>  PRIMARY KEY (`id`) USING BTREE</span></span>\n<span class="line"><span>) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT=&#39;限时折扣活动&#39;;</span></span></code></pre></div><p>① <code>status</code> 字段：活动状态，由 CommonStatusEnum 枚举，只有开启、禁用两个状态。禁用时，无法参与限时折扣活动。</p><hr><div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>CREATE TABLE `promotion_discount_product` (</span></span>\n<span class="line"><span>  `id` bigint NOT NULL AUTO_INCREMENT COMMENT &#39;编号，主键自增&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `activity_id` bigint NOT NULL COMMENT &#39;活动编号&#39;,</span></span>\n<span class="line"><span>  `activity_status` tinyint NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;秒杀商品状态&#39;,</span></span>\n<span class="line"><span>  `activity_start_time` datetime NOT NULL COMMENT &#39;活动开始时间点&#39;,</span></span>\n<span class="line"><span>  `activity_end_time` datetime NOT NULL COMMENT &#39;活动结束时间点&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `spu_id` bigint NOT NULL DEFAULT &#39;-1&#39; COMMENT &#39;商品 SPU 编号&#39;,</span></span>\n<span class="line"><span>  `sku_id` bigint NOT NULL COMMENT &#39;商品 SKU 编号&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `discount_type` int NOT NULL COMMENT &#39;优惠类型；1-代金卷；2-折扣卷&#39;,</span></span>\n<span class="line"><span>  `discount_percent` tinyint DEFAULT NULL COMMENT &#39;折扣百分比&#39;,</span></span>\n<span class="line"><span>  `discount_price` int DEFAULT NULL COMMENT &#39;优惠金额，单位：分&#39;,</span></span>\n<span class="line"><span>  PRIMARY KEY (`id`) USING BTREE</span></span>\n<span class="line"><span>) ENGINE=InnoDB AUTO_INCREMENT=22 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT=&#39;限时折扣商品\\n&#39;;</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>① <code>activity_id</code> 字段：活动编号，对应 <code>promotion_discount_activity</code> 表的 <code>id</code> 字段。而 <code>activity_</code> 开头字段，是为了方便查询，冗余存储的。</p><p>② <code>spu_id</code>、<code>sku_id</code> 字段：对应的商品 SPU 编号、商品 SKU 编号。</p><p>③ <code>discount_type</code> 字段：优惠类型，由 DiscountTypeEnum 枚举，分成 2 种情况：</p><ul><li>满减：配合 <code>discount_price</code> 字段，表示优惠多少金额</li><li>折扣：配合 <code>discount_percent</code> 字段，表示折扣百分比</li></ul><h2 id="_2-管理后台" tabindex="-1"><a class="header-anchor" href="#_2-管理后台"><span><a href="#_2-%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0">#</a> 2. 管理后台</span></a></h2><p>对应 [商城系统 -&gt; 营销中心 -&gt; 优惠活动 -&gt; 限时折扣] 菜单，对应 <code>yudao-ui-admin-vue3</code> 项目的 <code>src/views/mall/promotion/discountActivity</code> 目录。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/商城手册/限时折扣/管理后台.png" alt="管理后台" tabindex="0" loading="lazy"><figcaption>管理后台</figcaption></figure><h2 id="_3-移动端" tabindex="-1"><a class="header-anchor" href="#_3-移动端"><span><a href="#_3-%E7%A7%BB%E5%8A%A8%E7%AB%AF">#</a> 3. 移动端</span></a></h2><p>TODO TradeDiscountActivityPriceCalculator 类实现</p><p>TODO 前端需要在商品详情上增加一些信息</p>',21),c=[t];function p(d,l){return a(),s("div",null,c)}const r=n(e,[["render",p],["__file","promotion-discount.html.vue"]]),u=JSON.parse('{"path":"/project/yudao-cloud/mall/promotion-discount.html","title":"【营销】限时折扣","lang":"en-US","frontmatter":{"title":"【营销】限时折扣","tags":["project","java","spring-boot","spring-cloud"],"categories":["project"],"order":110,"feed":false,"seo":false,"head":[]},"headers":[{"level":2,"title":"# 1. 表结构","slug":"_1-表结构","link":"#_1-表结构","children":[]},{"level":2,"title":"# 2. 管理后台","slug":"_2-管理后台","link":"#_2-管理后台","children":[]},{"level":2,"title":"# 3. 移动端","slug":"_3-移动端","link":"#_3-移动端","children":[]}],"git":{"createdTime":1720365235000,"updatedTime":1720365235000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":2.26,"words":678},"filePathRelative":"project/yudao-cloud/mall/promotion-discount.md","localizedDate":"July 7, 2024"}');export{r as comp,u as data};
