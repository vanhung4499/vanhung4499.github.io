import{_ as n,g as i,o,c as s,e as p,h as a,f as r,w as l,a as e}from"./app-BRTHG7K9.js";const c={},u=e(`<h1 id="审批接入-流程表单" tabindex="-1"><a class="header-anchor" href="#审批接入-流程表单"><span>审批接入（流程表单）</span></a></h1><p>相关视频：</p><ul><li><p><a href="https://t.zsxq.com/04nun2RRz" target="_blank" rel="noopener noreferrer">02、如何实现动态的流程表单？</a></p></li><li><p><a href="https://t.zsxq.com/04uneeaUb" target="_blank" rel="noopener noreferrer">03、如何实现流程表单的保存？</a></p></li><li><p><a href="https://t.zsxq.com/04jiMrjAm" target="_blank" rel="noopener noreferrer">04、如何实现流程表单的展示？</a><br> 项目基于 Flowable 实现了工作流的功能，提供两种方式接入：</p></li><li><p>① 【流程表单】：在线配置动态表单，无需建表与开发</p></li><li><p>② 【业务表单】：业务需建立独立的数据库表，并开发对应的表单、详情界面</p></li></ul><p>我们以“请假流程”为例子，讲解两种接入方式的差异，整个过程包括：</p><ol><li>定义流程：【管理员】新建流程、设计流程模型、并设置用户任务的审批人，最终发布流程</li><li>发起流程：【员工】选择流程，并发起流程实例</li><li>审批流程：【审批人】接收到流程任务，审批结果为通过或不通过</li></ol><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/示例流程.png" alt="示例流程" tabindex="0" loading="lazy"><figcaption>示例流程</figcaption></figure><p>本文，我们讲解的是「业务接入（流程表单）」的流程，复杂业务接入的流程请查看<a href="/bpm/use-business-form">业务接入（业务表单）</a>。</p><h2 id="_1-业务接入-流程表单" tabindex="-1"><a class="header-anchor" href="#_1-业务接入-流程表单"><span><a href="#_1-%E4%B8%9A%E5%8A%A1%E6%8E%A5%E5%85%A5-%E6%B5%81%E7%A8%8B%E8%A1%A8%E5%8D%95">#</a> 1. 业务接入（流程表单）</span></a></h2><h3 id="_1-1-第一步-定义流程" tabindex="-1"><a class="header-anchor" href="#_1-1-第一步-定义流程"><span><a href="#_1-1-%E7%AC%AC%E4%B8%80%E6%AD%A5-%E5%AE%9A%E4%B9%89%E6%B5%81%E7%A8%8B">#</a> 1.1 第一步：定义流程</span></a></h3><p>登录账号 admin、密码 admin123 的用户，扮演【管理员】的角色，进行流程的定义。</p><h4 id="_1-1-1-新建流程" tabindex="-1"><a class="header-anchor" href="#_1-1-1-新建流程"><span><a href="#_1-1-1-%E6%96%B0%E5%BB%BA%E6%B5%81%E7%A8%8B">#</a> 1.1.1 新建流程</span></a></h4><p>访问 [工作流程 -&gt; 流程管理 -&gt; 流程模型] 菜单，点击「新建流程」按钮，填写流程标识、流程名称。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/新建流程.png" alt="新建流程" tabindex="0" loading="lazy"><figcaption>新建流程</figcaption></figure><ul><li>流程标识：对应 BPMN 流程文件 XML 的 <code>id</code> 属性，不能重复，新建后不可修改。</li><li>流程名称：对应 BPMN 流程文件 XML 的 <code>name</code> 属性。</li></ul><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>&lt;!-- 这是一个 BPMN XML 的示例，主要看 id 和 name 属性 --&gt;</span></span>
<span class="line"><span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span>
<span class="line"><span>&lt;bpmn2:definitions xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:bpmn2=&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot; xmlns:bpmndi=&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot; id=&quot;diagram_Process_1647305370393&quot; targetNamespace=&quot;http://activiti.org/bpmn&quot;&gt;</span></span>
<span class="line"><span>  &lt;bpmn2:process id=&quot;common-form&quot; name=&quot;通用表单流程&quot; isExecutable=&quot;true&quot; /&gt;</span></span>
<span class="line"><span>  &lt;bpmndi:BPMNDiagram id=&quot;BPMNDiagram_1&quot;&gt;</span></span>
<span class="line"><span>    &lt;bpmndi:BPMNPlane id=&quot;common-form_di&quot; bpmnElement=&quot;common-form&quot; /&gt;</span></span>
<span class="line"><span>  &lt;/bpmndi:BPMNDiagram&gt;</span></span>
<span class="line"><span>&lt;/bpmn2:definitions&gt;</span></span></code></pre></div><h4 id="_1-1-2-新建表单" tabindex="-1"><a class="header-anchor" href="#_1-1-2-新建表单"><span><a href="#_1-1-2-%E6%96%B0%E5%BB%BA%E8%A1%A8%E5%8D%95">#</a> 1.1.2 新建表单</span></a></h4><p>① 访问 [工作流程 -&gt; 流程管理 -&gt; 流程表单] 菜单，点击「新增」按钮，新增一个名字为 <code>leave-form</code> 的表单。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/新建表单-设计.png" alt="新建表单 - 设计" tabindex="0" loading="lazy"><figcaption>新建表单 - 设计</figcaption></figure><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/新建表单-保存.png" alt="新建表单 - 保存" tabindex="0" loading="lazy"><figcaption>新建表单 - 保存</figcaption></figure><p>友情提示：如果感觉有点麻烦，随便设计下，保存就 OK 了。</p><p>② 回到 [工作流程 -&gt; 流程管理 -&gt; 流程模型] 菜单，点击「修改流程」按钮，配置表单类型为流程表单，选择名字为 <code>leave-form</code> 的流程表单。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/修改流程表单.png" alt="修改流程表单" tabindex="0" loading="lazy"><figcaption>修改流程表单</figcaption></figure><h4 id="_1-1-3-设计流程" tabindex="-1"><a class="header-anchor" href="#_1-1-3-设计流程"><span><a href="#_1-1-3-%E8%AE%BE%E8%AE%A1%E6%B5%81%E7%A8%8B">#</a> 1.1.3 设计流程</span></a></h4><p>① 点击「设计流程」按钮，在线设计请假流程模型，包含两个用户任务：领导审批、HR 审批。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/设计流程图.png" alt="设计流程" tabindex="0" loading="lazy"><figcaption>设计流程</figcaption></figure><p>② 点击图中的“部门领导审批”，规则类型为“流程表达式”，流程表达式为 <code>\${bpmTaskAssignLeaderExpression.calculateUsers(execution, 1)}</code>。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/设置审批人-部门领导审批.png" alt="设置审批人 - 部门领导审批" tabindex="0" loading="lazy"><figcaption>设置审批人 - 部门领导审批</figcaption></figure><p>友情提示：该流程表达式的作用是，流程发起人的一级领导。</p>`,28),d=e(`<p>点击图中的“HR 审批”，规则类型为“岗位”，指定岗位为“人力资源”。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/设置审批人-HR审批.png" alt="设置审批人 - HR 审批" tabindex="0" loading="lazy"><figcaption>设置审批人 - HR 审批</figcaption></figure><p>之后，点击右上角的「保存模型」按钮，完成流程模型的设计。</p><p>③ 点击「发布流程」按钮，把定义的流程模型部署出去。部署成功后，就可以发起该流程了。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/发布流程.png" alt="发布流程" tabindex="0" loading="lazy"><figcaption>发布流程</figcaption></figure><p>修改流程后，需要重新发布流程吗？</p><p>需要，<strong>必须重新发布</strong>才能生效。每次流程发布后，会生成一个新的流程定义，版本号从 v1 开始递增。</p><p>发布成功后，会部署新版本的流程定义，旧版本的流程定义将被挂起。当然，已经发起的流程不会受到影响，还是走老的流程定义。</p><h3 id="_2-第二步-发起流程" tabindex="-1"><a class="header-anchor" href="#_2-第二步-发起流程"><span><a href="#_2-%E7%AC%AC%E4%BA%8C%E6%AD%A5-%E5%8F%91%E8%B5%B7%E6%B5%81%E7%A8%8B">#</a> 2. 第二步：发起流程</span></a></h3><p>登录账号 admin、密码 admin123 的用户，扮演【员工】的角色，进行流程的发起。</p><h4 id="_2-1-发起流程" tabindex="-1"><a class="header-anchor" href="#_2-1-发起流程"><span><a href="#_2-1-%E5%8F%91%E8%B5%B7%E6%B5%81%E7%A8%8B">#</a> 2.1 发起流程</span></a></h4><p>① 访问 [工作流程 -&gt; 审批中心 -&gt; 发起流程] 菜单，可以看到可以选择的流程定义的列表。</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/发起流程.png" alt="发起流程" tabindex="0" loading="lazy"><figcaption>发起流程</figcaption></figure><p>② 选择名字为“通用表单”的流程定义，发起请假流程。填写请假表单信息如下：</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/填写流程信息.png" alt="填写流程信息" tabindex="0" loading="lazy"><figcaption>填写流程信息</figcaption></figure><p>③ 点击提交成功后，可在 [工作流程 -&gt; 审批中心 -&gt; 我的流程]中，可看到该流程的状态、结果。</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/我的流程.png" alt="我的流程" tabindex="0" loading="lazy"><figcaption>我的流程</figcaption></figure><h4 id="_2-2-查看流程" tabindex="-1"><a class="header-anchor" href="#_2-2-查看流程"><span><a href="#_2-2-%E6%9F%A5%E7%9C%8B%E6%B5%81%E7%A8%8B">#</a> 2.2 查看流程</span></a></h4><p>点击「详情」按钮，可以查看申请的表单信息、审批记录、流程跟踪图。</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/流程详情1.png" alt="流程详情 1" tabindex="0" loading="lazy"><figcaption>流程详情 1</figcaption></figure><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/流程详情2.png" alt="流程详情 2" tabindex="0" loading="lazy"><figcaption>流程详情 2</figcaption></figure><h3 id="_3-第三步-审批流程" tabindex="-1"><a class="header-anchor" href="#_3-第三步-审批流程"><span><a href="#_3-%E7%AC%AC%E4%B8%89%E6%AD%A5-%E5%AE%A1%E6%89%B9%E6%B5%81%E7%A8%8B">#</a> 3. 第三步：审批流程</span></a></h3><h4 id="_3-1-部门领导审批" tabindex="-1"><a class="header-anchor" href="#_3-1-部门领导审批"><span><a href="#_3-1-%E9%83%A8%E9%97%A8%E9%A2%86%E5%AF%BC%E5%AE%A1%E6%89%B9">#</a> 3.1 部门领导审批</span></a></h4><p>登录账号 test、密码 test123 的用户，扮演【审批人】的角色，进行请假流程的【领导审批】任务。</p><p>① 访问 [工作流程 -&gt; 审批中心 -&gt; 待办任务] 菜单，可以查询到需要审批的任务。</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/待办任务.png" alt="待办任务" tabindex="0" loading="lazy"><figcaption>待办任务</figcaption></figure><p>② 点击「办理」按钮，填写审批建议，并点击「通过」按钮，这样任务的审批就完成了。</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/部门领导审批.png" alt="部门领导审批" tabindex="0" loading="lazy"><figcaption>部门领导审批</figcaption></figure><p>③ 访问 [工作流程 -&gt; 审批中心 -&gt; 已办任务] 菜单，可以查询到已经审批的任务。</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/已办任务.png" alt="已办任务" tabindex="0" loading="lazy"><figcaption>已办任务</figcaption></figure><hr><p>此时，使用【员工】的角色，访问 [工作流程 -&gt; 审批中心 -&gt; 我的流程] 菜单，可以看到流程流转到了【HR 审批】任务。</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/部门领导审批后我的流程.png" alt="部门领导审批后我的流程" tabindex="0" loading="lazy"><figcaption>部门领导审批后我的流程</figcaption></figure><h4 id="_3-2-hr-审批" tabindex="-1"><a class="header-anchor" href="#_3-2-hr-审批"><span><a href="#_3-2-hr-%E5%AE%A1%E6%89%B9">#</a> 3.2 HR 审批</span></a></h4><p>登录账号 hrmgr、密码 hr123 的用户，扮演【审批人】的角色，进行请假流程的【HR 审批】任务。</p><p>① 访问 [工作流程 -&gt; 审批中心 -&gt; 待办任务] 菜单，点击「审批」按钮，填写审批建议，并点击「通过」按钮。</p><hr><p>此时，使用【员工】的角色，访问 [工作流程 -&gt; 审批中心 -&gt; 我的流程] 菜单，可以看到流程处理结束，最终审批通过。</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/请假流程最终状态.png" alt="请假流程最终状态" tabindex="0" loading="lazy"><figcaption>请假流程最终状态</figcaption></figure><h2 id="_2-菜单【流程表单】" tabindex="-1"><a class="header-anchor" href="#_2-菜单【流程表单】"><span><a href="#_2-%E8%8F%9C%E5%8D%95%E3%80%90%E6%B5%81%E7%A8%8B%E8%A1%A8%E5%8D%95%E3%80%91">#</a> 2. 菜单【流程表单】</span></a></h2><p>本小节，我们单独讲解的是菜单 [工作流程 -&gt; 流程管理 -&gt; 流程表单] 的功能。</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/流程表单.png" alt="流程表单" tabindex="0" loading="lazy"><figcaption>流程表单</figcaption></figure><p>该菜单主要用于流程表单的配置，不包括最终表单填写后的存储，由 BpmFormController 提供接口。</p><h3 id="_2-1-表结构" tabindex="-1"><a class="header-anchor" href="#_2-1-表结构"><span><a href="#_2-1-%E8%A1%A8%E7%BB%93%E6%9E%84">#</a> 2.1 表结构</span></a></h3><blockquote><p>省略 creator/create_time/updater/update_time/deleted/tenant_id 等通用字段</p></blockquote><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>CREATE TABLE \`bpm_form\` (</span></span>
<span class="line"><span>  \`id\` bigint NOT NULL AUTO_INCREMENT COMMENT &#39;编号&#39;,</span></span>
<span class="line"><span>  \`name\` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT &#39;表单名&#39;,</span></span>
<span class="line"><span>  \`status\` tinyint NOT NULL COMMENT &#39;开启状态&#39;,</span></span>
<span class="line"><span>  \`conf\` varchar(1000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT &#39;表单的配置&#39;,</span></span>
<span class="line"><span>  \`fields\` varchar(5000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT &#39;表单项的数组&#39;,</span></span>
<span class="line"><span>  \`remark\` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT &#39;备注&#39;,</span></span>
<span class="line"><span>  PRIMARY KEY (\`id\`) USING BTREE</span></span>
<span class="line"><span>) ENGINE=InnoDB AUTO_INCREMENT=28 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT=&#39;BPM 表单定义表&#39;;</span></span></code></pre></div><p>关键就 2 个字段：</p><p>① <code>conf</code>：表单的配置，是一个 JSON 字符串，包含表单的基本配置、按钮等。</p><div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>{</span></span>
<span class="line"><span>    &quot;form&quot;: {</span></span>
<span class="line"><span>        &quot;labelPosition&quot;: &quot;right&quot;,</span></span>
<span class="line"><span>        &quot;size&quot;: &quot;default&quot;,</span></span>
<span class="line"><span>        &quot;labelWidth&quot;: &quot;125px&quot;,</span></span>
<span class="line"><span>        &quot;hideRequiredAsterisk&quot;: false,</span></span>
<span class="line"><span>        &quot;showMessage&quot;: true,</span></span>
<span class="line"><span>        &quot;inlineMessage&quot;: false</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    &quot;submitBtn&quot;: {</span></span>
<span class="line"><span>        &quot;show&quot;: true,</span></span>
<span class="line"><span>        &quot;innerText&quot;: &quot;提交&quot;</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    &quot;resetBtn&quot;: {</span></span>
<span class="line"><span>        &quot;show&quot;: false,</span></span>
<span class="line"><span>        &quot;innerText&quot;: &quot;重置&quot;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对应表单设计器的【表单配置】部分。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/表单设计器的表单配置.png" alt="表单配置" tabindex="0" loading="lazy"><figcaption>表单配置</figcaption></figure><p>② <code>fields</code>：表单项的数组，是一个 JSON 字符串，包含表单的所有字段。</p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>[&quot;{\\&quot;type\\&quot;:\\&quot;datePicker\\&quot;,\\&quot;field\\&quot;:\\&quot;startTime\\&quot;,\\&quot;title\\&quot;:\\&quot;开始时间\\&quot;,\\&quot;info\\&quot;:\\&quot;\\&quot;,\\&quot;$required\\&quot;:true,\\&quot;_fc_drag_tag\\&quot;:\\&quot;datePicker\\&quot;,\\&quot;hidden\\&quot;:false,\\&quot;display\\&quot;:true}&quot;,&quot;{\\&quot;type\\&quot;:\\&quot;datePicker\\&quot;,\\&quot;field\\&quot;:\\&quot;Fm9i1onr8v6n68\\&quot;,\\&quot;title\\&quot;:\\&quot;结束时间\\&quot;,\\&quot;info\\&quot;:\\&quot;\\&quot;,\\&quot;$required\\&quot;:true,\\&quot;_fc_drag_tag\\&quot;:\\&quot;datePicker\\&quot;,\\&quot;hidden\\&quot;:false,\\&quot;display\\&quot;:true}&quot;,&quot;{\\&quot;type\\&quot;:\\&quot;select\\&quot;,\\&quot;field\\&quot;:\\&quot;type\\&quot;,\\&quot;title\\&quot;:\\&quot;请假类型\\&quot;,\\&quot;info\\&quot;:\\&quot;\\&quot;,\\&quot;effect\\&quot;:{\\&quot;fetch\\&quot;:\\&quot;\\&quot;},\\&quot;$required\\&quot;:false,\\&quot;options\\&quot;:[{\\&quot;label\\&quot;:\\&quot;事假\\&quot;,\\&quot;value\\&quot;:1},{\\&quot;label\\&quot;:\\&quot;年假\\&quot;,\\&quot;value\\&quot;:2}],\\&quot;_fc_drag_tag\\&quot;:\\&quot;select\\&quot;,\\&quot;hidden\\&quot;:false,\\&quot;display\\&quot;:true}&quot;,&quot;{\\&quot;type\\&quot;:\\&quot;input\\&quot;,\\&quot;field\\&quot;:\\&quot;reason\\&quot;,\\&quot;title\\&quot;:\\&quot;请假原因\\&quot;,\\&quot;info\\&quot;:\\&quot;\\&quot;,\\&quot;$required\\&quot;:false,\\&quot;props\\&quot;:{\\&quot;rows\\&quot;:0,\\&quot;type\\&quot;:\\&quot;textarea\\&quot;},\\&quot;_fc_drag_tag\\&quot;:\\&quot;input\\&quot;,\\&quot;hidden\\&quot;:false,\\&quot;display\\&quot;:true}&quot;]</span></span></code></pre></div><p>对应表单设计器的【组件配置】部分。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/表单设计器的组件配置.png" alt="组件配置" tabindex="0" loading="lazy"><figcaption>组件配置</figcaption></figure><h3 id="_2-2-前端组件" tabindex="-1"><a class="header-anchor" href="#_2-2-前端组件"><span><a href="#_2-2-%E5%89%8D%E7%AB%AF%E7%BB%84%E4%BB%B6">#</a> 2.2 前端组件</span></a></h3><p>基于 <a href="https://github.com/xaboy/form-create" target="_blank" rel="noopener noreferrer">https://github.com/xaboy/form-create</a> 实现，支持 element-plus、ant-design-vue、naive-ui、arco-design、tdesign 等前端组件，还是非常不错的！</p><p>中文文档：<a href="https://www.form-create.com/v3/guide/" target="_blank" rel="noopener noreferrer">https://www.form-create.com/v3/guide/</a></p><h4 id="_2-2-1-表单设计器" tabindex="-1"><a class="header-anchor" href="#_2-2-1-表单设计器"><span><a href="#_2-2-1-%E8%A1%A8%E5%8D%95%E8%AE%BE%E8%AE%A1%E5%99%A8">#</a> 2.2.1 表单设计器</span></a></h4><p>上文看到的“表单设计器”，在 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/bpm/form/editor/index.vue" target="_blank" rel="noopener noreferrer"><code>bpm/form/editor/index.vue</code></a> 实现，使用 <a href="https://github.com/xaboy/form-create-designer" target="_blank" rel="noopener noreferrer">form-create-designer</a> 实现。</p><h4 id="_2-2-2-表单预览" tabindex="-1"><a class="header-anchor" href="#_2-2-2-表单预览"><span><a href="#_2-2-2-%E8%A1%A8%E5%8D%95%E9%A2%84%E8%A7%88">#</a> 2.2.2 表单预览</span></a></h4><p>点击「详情」按钮，可进行表单的预览，如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/表单预览.png" alt="表单预览" tabindex="0" loading="lazy"><figcaption>表单预览</figcaption></figure><p>实现的逻辑，就是读取后端 <code>bpm_form</code> 表的 <code>conf</code> 和 <code>fields</code> 字段，然后使用 <code>form-create</code> 渲染。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/表单预览的代码.png" alt="表单预览的代码" tabindex="0" loading="lazy"><figcaption>表单预览的代码</figcaption></figure><h4 id="_2-2-3-表单填写" tabindex="-1"><a class="header-anchor" href="#_2-2-3-表单填写"><span><a href="#_2-2-3-%E8%A1%A8%E5%8D%95%E5%A1%AB%E5%86%99">#</a> 2.2.3 表单填写</span></a></h4><p>在 [工作流程 -&gt; 审批中心 -&gt; 发起流程] 菜单，点击「填写表单」按钮，可以填写表单。它也是基于 <code>form-create</code> 实现的，只是额外实现了 <code>@submit</code> 事件，用于提交表单。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/表单填写的代码.png" alt="表单填写的代码" tabindex="0" loading="lazy"><figcaption>表单填写的代码</figcaption></figure><p>相比表单预览，它通过 <code>v-model</code> 获取表单的值，可通过 <code>v-model:api</code> 对应的 <code>fApi</code> 对象，进行表单的校验、重置等操作。</p><p>友情提问：使用流程表单时，提交的表单数据是怎么存储的？</p><p>存储到 Flowable 的 ProcessInstance 的 <code>variables</code> 中。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/工作流手册/简单业务接入/流程表单数据存储.png" alt="流程表单数据存储" tabindex="0" loading="lazy"><figcaption>流程表单数据存储</figcaption></figure>`,72);function g(f,h){const t=i("RouteLink");return o(),s("div",null,[u,p("p",null,[a("为什么呢？这块我们在 "),r(t,{to:"/bpm/expression/"},{default:l(()=>[a("《流程表达式》")]),_:1}),a(" 详细讲解。")]),d])}const m=n(c,[["render",g],["__file","use-bpm-form.html.vue"]]),b=JSON.parse('{"path":"/project/yudao-cloud/bpm/use-bpm-form.html","title":"审批接入（流程表单）","lang":"en-US","frontmatter":{"title":"审批接入（流程表单）","tags":["project","java","spring-boot","spring-cloud"],"categories":["project"],"order":67,"feed":false,"seo":false,"head":[]},"headers":[{"level":2,"title":"# 1. 业务接入（流程表单）","slug":"_1-业务接入-流程表单","link":"#_1-业务接入-流程表单","children":[{"level":3,"title":"# 1.1 第一步：定义流程","slug":"_1-1-第一步-定义流程","link":"#_1-1-第一步-定义流程","children":[]},{"level":3,"title":"# 2. 第二步：发起流程","slug":"_2-第二步-发起流程","link":"#_2-第二步-发起流程","children":[]},{"level":3,"title":"# 3. 第三步：审批流程","slug":"_3-第三步-审批流程","link":"#_3-第三步-审批流程","children":[]}]},{"level":2,"title":"# 2. 菜单【流程表单】","slug":"_2-菜单【流程表单】","link":"#_2-菜单【流程表单】","children":[{"level":3,"title":"# 2.1 表结构","slug":"_2-1-表结构","link":"#_2-1-表结构","children":[]},{"level":3,"title":"# 2.2 前端组件","slug":"_2-2-前端组件","link":"#_2-2-前端组件","children":[]}]}],"git":{"createdTime":1720365235000,"updatedTime":1720365235000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":12.36,"words":3709},"filePathRelative":"project/yudao-cloud/bpm/use-bpm-form.md","localizedDate":"July 7, 2024"}');export{m as comp,b as data};
