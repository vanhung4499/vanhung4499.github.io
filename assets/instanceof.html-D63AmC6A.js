import{_ as a,o as s,c as n,d as i}from"./app-DBZfZLYz.js";const t={},o=i(`<h1 id="java-instanceof" tabindex="-1"><a class="header-anchor" href="#java-instanceof"><span>Java instanceOf</span></a></h1><p>Cách sử dụng của từ khoá instanceof rất đơn giản:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">(object) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">instanceof</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> (type)</span></span></code></pre></div><p>Ý nghĩa của nó cũng rất đơn giản, nó được dùng để kiểm tra xem một đối tượng có thuộc về một loại cụ thể không, kết quả trả về là true hoặc false. Trong quá trình giải nén ngược, từ khoá instanceof thường được sử dụng để xác định đối tượng có thuộc về một loại nhất định hay không, nhằm tránh ngoại lệ ClassCastException.</p><p>Trước hết, chúng ta tạo một lớp đơn giản Round:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Round</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>Tiếp theo, chúng ta tạo một lớp mở rộng Ring kế thừa từ Round:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Ring</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Round</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>Bây giờ, chúng ta có thể sử dụng instanceof để kiểm tra xem đối tượng Ring có thuộc về loại Round không:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Ring</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> ring </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> Ring</span><span style="color:#E06C75;--shiki-dark:#E06C75;">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(ring </span><span style="color:#C678DD;--shiki-dark:#C678DD;">instanceof</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> Round);</span></span></code></pre></div><p>Đoạn mã này sẽ in ra true, vì lớp Ring kế thừa từ Round và thỏa mãn quan hệ &quot;là một&quot; (is-a). Từ khoá instanceof dựa trên mối quan hệ kế thừa giữa các lớp và mối quan hệ triển khai giữa lớp và interface để thực hiện việc kiểm tra.</p><p>Tiếp theo, chúng ta tạo một interface Shape:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Shape</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>Sau đó, chúng ta tạo lớp Circle, lớp này triển khai interface Shape và kế thừa từ Round:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Circle</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Round</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Shape</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>Nếu một đối tượng được tạo từ lớp Circle, thì kết quả của instanceof chắc chắn là true:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Circle</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> circle </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> Circle</span><span style="color:#E06C75;--shiki-dark:#E06C75;">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(circle </span><span style="color:#C678DD;--shiki-dark:#C678DD;">instanceof</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> Circle);</span></span></code></pre></div><p>Ví dụ này rất rõ ràng, chức năng của từ khoá instanceof như vậy, dễ hiểu. Tuy nhiên nếu muốn kiểm tra xem một đối tượng có phải là loại của lớp cha không?</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(circle </span><span style="color:#C678DD;--shiki-dark:#C678DD;">instanceof</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> Round);</span></span></code></pre></div><p>Kết quả ở đây cũng là true, vì lớp Circle là lớp con của Round, vẫn thỏa mãn quan hệ &quot;là một&quot; (is-a). Tiếp theo, nếu muốn kiểm tra xem một đối tượng có triển khai một interface nhất định không?</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(circle </span><span style="color:#C678DD;--shiki-dark:#C678DD;">instanceof</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> Shape);</span></span></code></pre></div><p>Kết quả ở đây cũng là true, vì Circle triển khai interface Shape, cũng thỏa mãn quan hệ &quot;là một&quot; (is-a).</p><p>Để chứng minh điều này, chúng ta sẽ tạo một lớp Triangle, triển khai interface Shape nhưng không có mối liên hệ gì đến lớp Circle:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Triangle</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Shape</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>Khi sử dụng instanceof để so sánh, trình biên dịch sẽ báo lỗi:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(circle </span><span style="color:#C678DD;--shiki-dark:#C678DD;">instanceof</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> Triangle);</span></span></code></pre></div><p>Thông báo lỗi sẽ như sau:</p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>Inconvertible types; cannot cast &#39;com.itwanger.twentyfour.instanceof1.Circle&#39; to &#39;com.itwanger.twentyfour.instanceof1.Triangle&#39;</span></span></code></pre></div><p>Điều này có nghĩa là các loại không thể chuyển đổi, không thể ép kiểu từ Circle sang Triangle bằng instanceof.</p><p>Trình biên dịch đã thông minh trước, nó đã cảnh báo rằng Circle không thể chuyển đổi sang Triangle.</p><p>Java là một ngôn ngữ lập trình hướng đối tượng, có nghĩa là ngoài các kiểu dữ liệu cơ bản, tất cả các lớp đều ngầm kế thừa từ lớp Object. Do đó, kết quả dưới đây cũng sẽ in ra true:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Thread</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> thread </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> Thread</span><span style="color:#E06C75;--shiki-dark:#E06C75;">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(thread </span><span style="color:#C678DD;--shiki-dark:#C678DD;">instanceof</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> Object);</span></span></code></pre></div><p>“Vậy nếu đối tượng là null thì sao nhỉ?” tôi chen ngang vào.</p><p>“Đúng là một câu hỏi hay đấy.” Bản thân của toi không thể nhịn được mà ngước lên tưởng vinh ngón tay cái.</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">null</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> instanceof</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> Object);</span></span></code></pre></div><p>Chỉ có đối tượng mới có thể có giá trị null, vì vậy trình biên dịch sẽ không báo lỗi, nhưng kết quả của instanceof với null là false. Bởi vì không thể xác định đối tượng null thuộc về lớp nào.</p><p>Thường thì, chúng ta sử dụng từ khoá instanceof như sau:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// Đầu tiên kiểm tra kiểu dữ liệu</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">if</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> (obj </span><span style="color:#C678DD;--shiki-dark:#C678DD;">instanceof</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> String) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // Sau đó ép kiểu</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> s </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> (String) obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // Và sử dụng</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><p>Đầu tiên sử dụng instanceof để kiểm tra kiểu dữ liệu, sau đó ép kiểu obj sang kiểu dữ liệu mong muốn và sử dụng nó.</p><p>Từ JDK 16, instanceof đã hỗ trợ mẫu phù hợp, điều này làm cho việc sử dụng instanceof trở nên thuận tiện hơn:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">if</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> (obj </span><span style="color:#C678DD;--shiki-dark:#C678DD;">instanceof</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> s) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // Nếu kiểu phù hợp, sẽ sử dụng s ngay lập tức</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><p>Bạn có thể đặt một biến ngay trong điều kiện if để xác định kiểu mà không cần phải ép kiểu hoặc khai báo một biến mới.</p>`,42),e=[o];function r(l,c){return s(),n("div",null,e)}const k=a(t,[["render",r],["__file","instanceof.html.vue"]]),d=JSON.parse('{"path":"/programming/java/oo/instanceof.html","title":"Java instanceOf","lang":"en-US","frontmatter":{"title":"Java instanceOf","tags":["java"],"categories":["java"],"order":18,"description":"Java instanceOf Cách sử dụng của từ khoá instanceof rất đơn giản: Ý nghĩa của nó cũng rất đơn giản, nó được dùng để kiểm tra xem một đối tượng có thuộc về một loại cụ thể không,...","head":[["meta",{"property":"og:url","content":"https://vanhung4499.github.io/programming/java/oo/instanceof.html"}],["meta",{"property":"og:site_name","content":"VanHung4499"}],["meta",{"property":"og:title","content":"Java instanceOf"}],["meta",{"property":"og:description","content":"Java instanceOf Cách sử dụng của từ khoá instanceof rất đơn giản: Ý nghĩa của nó cũng rất đơn giản, nó được dùng để kiểm tra xem một đối tượng có thuộc về một loại cụ thể không,..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-07-04T09:37:15.000Z"}],["meta",{"property":"article:author","content":"Hung Nguyen"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:modified_time","content":"2024-07-04T09:37:15.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Java instanceOf\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-07-04T09:37:15.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hung Nguyen\\",\\"url\\":\\"https://vanhung4499.github.io\\"}]}"]]},"headers":[],"git":{"createdTime":1719590078000,"updatedTime":1720085835000,"contributors":[{"name":"Hung Nguyen","email":"vanhung4499@gmail.com","commits":2}]},"readingTime":{"minutes":3.28,"words":984},"filePathRelative":"programming/java/oo/instanceof.md","localizedDate":"June 28, 2024","excerpt":"\\n<p>Cách sử dụng của từ khoá instanceof rất đơn giản:</p>\\n<div class=\\"language-java\\" data-ext=\\"java\\" data-title=\\"java\\"><pre class=\\"shiki shiki-themes one-dark-pro one-dark-pro vp-code\\" style=\\"background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf\\" tabindex=\\"0\\"><code><span class=\\"line\\"><span style=\\"color:#E06C75;--shiki-dark:#E06C75\\">(object) </span><span style=\\"color:#C678DD;--shiki-dark:#C678DD\\">instanceof</span><span style=\\"color:#E06C75;--shiki-dark:#E06C75\\"> (type)</span></span></code></pre>\\n</div>","autoDesc":true}');export{k as comp,d as data};
