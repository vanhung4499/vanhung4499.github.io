import{_ as s,o as n,c as a,a as t}from"./app-CIGQMwlz.js";const h={};function e(l,i){return n(),a("div",null,i[0]||(i[0]=[t(`<h1 id="ly-thuyet-ve-ddd-05-port-adapter" tabindex="-1"><a class="header-anchor" href="#ly-thuyet-ve-ddd-05-port-adapter"><span>Lý thuyết về DDD 05 - Port &amp; Adapter</span></a></h1><p>Trong ngữ cảnh của Thiết kế theo hướng miền (DDD), Adapter Pattern đóng vai trò vô cùng quan trọng. Adapter cho phép chuyển đổi các interface không tương thích thành một interface mong muốn khác, từ đó giúp các lớp vốn không thể hoạt động cùng nhau do không tương thích interface có thể phối hợp với nhau. Trong DDD, các Adapter thường được kết hợp với khái niệm Port để tạo thành kiến trúc &quot;Ports and Adapters&quot;, còn được gọi là &quot;Hexagonal Architecture&quot;. Phong cách kiến trúc này nhằm mục đích tách biệt logic cốt lõi của ứng dụng khỏi sự tương tác với bên ngoài.</p><h2 id="khai-niem" tabindex="-1"><a class="header-anchor" href="#khai-niem"><span><strong>Khái niệm</strong></span></a></h2><p>Port (Cổng) trong kiến trúc này đại diện cho một điểm đầu vào hoặc đầu ra của ứng dụng. Nó định nghĩa một interface tương tác với bên ngoài nhưng không quan tâm đến chi tiết triển khai cụ thể. Cổng có thể là Driving Ports (cổng điều khiển, thường là cổng đầu vào) hoặc Driven Ports (cổng bị điều khiển, thường là cổng đầu ra).</p><h2 id="đac-điem" tabindex="-1"><a class="header-anchor" href="#đac-điem"><span><strong>Đặc điểm</strong></span></a></h2><ol><li><strong>Tính trừu tượng</strong>: Port cung cấp mô tả trừu tượng về hành vi dịch vụ, xác định rõ chức năng của dịch vụ và sự phụ thuộc bên ngoài.</li><li><strong>Tính độc lập</strong>: Port độc lập với triển khai cụ thể, cho phép thay thế hoặc mở rộng linh hoạt việc triển khai dịch vụ.</li><li><strong>Tính linh hoạt</strong>: Có thể cung cấp các Adapter khác nhau cho cùng một cổng để phù hợp với các môi trường hoạt động hoặc yêu cầu khác nhau.</li></ol><h2 id="ung-dung" tabindex="-1"><a class="header-anchor" href="#ung-dung"><span><strong>Ứng dụng</strong></span></a></h2><ol><li><strong>Định nghĩa tiêu chuẩn</strong>: Port và Adapter định nghĩa hành vi chuẩn của dịch vụ và sự phụ thuộc bên ngoài, tăng tính đọc và bảo trì của mã nguồn.</li><li><strong>Cô lập thay đổi</strong>: Khi hệ thống bên ngoài thay đổi, chỉ cần thay đổi hoặc thay thế Adapter mà không cần thay đổi core business logic.</li><li><strong>Hỗ trợ kiểm thử</strong>: Có thể sử dụng các Adapter mô phỏng để kiểm thử logic cốt lõi mà không phụ thuộc vào hệ thống thực tế bên ngoài.</li></ol><h2 id="trien-khai" tabindex="-1"><a class="header-anchor" href="#trien-khai"><span><strong>Triển khai</strong></span></a></h2><p>Việc triển khai kiến trúc Port và Adapter thường bao gồm các bước sau:</p><ol><li><strong>Định nghĩa Port</strong>: Định nghĩa các interface rõ ràng trong domain layer, đại diện cho các điểm tương tác của ứng dụng với thế giới bên ngoài.</li><li><strong>Tạo Adapter</strong>: Triển khai Adapter trong infrastructure layer hoặc application layer, những Adapter này chịu trách nhiệm chuyển đổi các thao tác trừu tượng của Port thành các lệnh gọi cụ thể bên ngoài.</li><li><strong>Đảo ngược sự phụ thuộc</strong>: Logic cốt lõi của ứng dụng phụ thuộc vào port interface, chứ không phải vào việc triển khai cụ thể của Adapter. Điều này cho phép Adapter có thể thay thế bất cứ lúc nào mà không ảnh hưởng đến logic cốt lõi.</li><li><strong>Cấu hình và kết nối</strong>: Khi ứng dụng khởi động, kết nối Adapter với các Port tương ứng theo yêu cầu.</li></ol><p>Thông qua cách tiếp cận này, Adapter Pattern trong DDD giúp xây dựng một hệ thống linh hoạt, dễ bảo trì và dễ kiểm thử.</p><h2 id="vi-du" tabindex="-1"><a class="header-anchor" href="#vi-du"><span><strong>Ví dụ</strong></span></a></h2><p>Dưới đây là một ví dụ Java đơn giản, minh họa cách triển khai Adapter Pattern trong kiến trúc DDD. Trong ví dụ này, chúng ta sẽ tạo một hệ thống thanh toán đơn giản, bao gồm một cổng thanh toán (payment port) và một bộ chuyển đổi (adapter) chịu trách nhiệm gọi interface của dịch vụ thanh toán bên ngoài (3rd service).</p><p>Trước tiên, chúng ta định nghĩa một cổng thanh toán (Port), đây là một interface mô tả các thao tác mà dịch vụ thanh toán cần cung cấp:</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> PaymentPort</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> processPayment</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">double</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> amount</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>Tiếp theo, chúng ta tạo một bộ chuyển đổi, nó sẽ triển khai cổng thanh toán và chịu trách nhiệm gọi interface của dịch vụ thanh toán bên ngoài:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ExternalPaymentService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> makePayment</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">double</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> amount</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Đây là logic cụ thể để gọi dịch vụ thanh toán bên ngoài</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Gọi dịch vụ thanh toán bên ngoài với số tiền: &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> amount);</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Giả sử thanh toán luôn thành công</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> PaymentAdapter</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> PaymentPort</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ExternalPaymentService</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> externalPaymentService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> PaymentAdapter</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ExternalPaymentService</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> externalPaymentService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">externalPaymentService</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> externalPaymentService;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> processPayment</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">double</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> amount</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Gọi interface của dịch vụ thanh toán bên ngoài</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> externalPaymentService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">makePayment</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(amount);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Bây giờ, chúng ta có thể sử dụng cổng thanh toán trong logic cốt lõi của ứng dụng mà không phụ thuộc vào triển khai cụ thể của adapter. Như vậy, nếu trong tương lai cần thay thế dịch vụ thanh toán bên ngoài, chúng ta chỉ cần cung cấp một triển khai adapter mới là đủ:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> PaymentService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> PaymentPort</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> paymentPort</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> PaymentService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">PaymentPort</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> paymentPort</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">paymentPort</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> paymentPort;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> processUserPayment</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">double</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> amount</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">paymentPort</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">processPayment</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(amount)) {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Thanh toán đã được xử lý thành công.&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Thanh toán thất bại.&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Cuối cùng, chúng ta lắp ráp các thành phần này trong giai đoạn khởi động hoặc cấu hình của ứng dụng:</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Application</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Tạo một instance của dịch vụ thanh toán bên ngoài</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        ExternalPaymentService</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> externalPaymentService</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> ExternalPaymentService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Tạo một instance của adapter, truyền vào dịch vụ thanh toán bên ngoài</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        PaymentAdapter</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> paymentAdapter</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> PaymentAdapter</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(externalPaymentService);</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Tạo một instance của dịch vụ thanh toán, truyền vào adapter</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        PaymentService</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> paymentService</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> PaymentService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(paymentAdapter);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Xử lý thanh toán cho người dùng</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        paymentService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">processUserPayment</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">100.0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>Trong ví dụ này, <strong>PaymentAdapter</strong> chịu trách nhiệm gọi interface thanh toán bên ngoài <strong>ExternalPaymentService.makePayment</strong>. <strong>PaymentService</strong> sử dụng interface <strong>PaymentPort</strong> để tương tác với thế giới bên ngoài, từ đó đạt được sự tách biệt giữa logic miền và dịch vụ bên ngoài. Nếu cần thay đổi nhà cung cấp dịch vụ thanh toán, chúng ta chỉ cần triển khai một <strong>PaymentAdapter</strong> mới mà không cần sửa đổi mã của <strong>PaymentService</strong>.</p>`,23)]))}const p=s(h,[["render",e],["__file","ddd-theory-05.html.vue"]]),r=JSON.parse('{"path":"/design/software-design/ddd/ddd-theory-05.html","title":"DDD Theory 05","lang":"en-US","frontmatter":{"title":"DDD Theory 05","tags":["design","ddd"],"categories":["design"],"order":5,"description":"Lý thuyết về DDD 05 - Port & Adapter Trong ngữ cảnh của Thiết kế theo hướng miền (DDD), Adapter Pattern đóng vai trò vô cùng quan trọng. Adapter cho phép chuyển đổi các interfac...","head":[["meta",{"property":"og:url","content":"https://vanhung4499.github.io/design/software-design/ddd/ddd-theory-05.html"}],["meta",{"property":"og:site_name","content":"VanHung4499"}],["meta",{"property":"og:title","content":"DDD Theory 05"}],["meta",{"property":"og:description","content":"Lý thuyết về DDD 05 - Port & Adapter Trong ngữ cảnh của Thiết kế theo hướng miền (DDD), Adapter Pattern đóng vai trò vô cùng quan trọng. Adapter cho phép chuyển đổi các interfac..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-10-02T17:20:50.000Z"}],["meta",{"property":"article:author","content":"Hung Nguyen"}],["meta",{"property":"article:tag","content":"design"}],["meta",{"property":"article:tag","content":"ddd"}],["meta",{"property":"article:modified_time","content":"2024-10-02T17:20:50.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"DDD Theory 05\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-10-02T17:20:50.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hung Nguyen\\",\\"url\\":\\"https://vanhung4499.github.io\\"}]}"]]},"headers":[{"level":2,"title":"Khái niệm","slug":"khai-niem","link":"#khai-niem","children":[]},{"level":2,"title":"Đặc điểm","slug":"đac-điem","link":"#đac-điem","children":[]},{"level":2,"title":"Ứng dụng","slug":"ung-dung","link":"#ung-dung","children":[]},{"level":2,"title":"Triển khai","slug":"trien-khai","link":"#trien-khai","children":[]},{"level":2,"title":"Ví dụ","slug":"vi-du","link":"#vi-du","children":[]}],"git":{"createdTime":1727889650000,"updatedTime":1727889650000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":4.45,"words":1336},"filePathRelative":"design/software-design/ddd/ddd-theory-05.md","localizedDate":"October 2, 2024","excerpt":"\\n<p>Trong ngữ cảnh của Thiết kế theo hướng miền (DDD), Adapter Pattern đóng vai trò vô cùng quan trọng. Adapter cho phép chuyển đổi các interface không tương thích thành một interface mong muốn khác, từ đó giúp các lớp vốn không thể hoạt động cùng nhau do không tương thích interface có thể phối hợp với nhau. Trong DDD, các Adapter thường được kết hợp với khái niệm Port để tạo thành kiến trúc \\"Ports and Adapters\\", còn được gọi là \\"Hexagonal Architecture\\". Phong cách kiến trúc này nhằm mục đích tách biệt logic cốt lõi của ứng dụng khỏi sự tương tác với bên ngoài.</p>","autoDesc":true}');export{p as comp,r as data};
