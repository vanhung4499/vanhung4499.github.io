import{_ as i,o as n,c as a,d as t}from"./app-DELCaB9c.js";const e={},o=t('<h1 id="vong-đoi-cua-spring-application-context" tabindex="-1"><a class="header-anchor" href="#vong-đoi-cua-spring-application-context"><span>Vòng đời của Spring Application Context</span></a></h1><h2 id="chuan-bi-giai-đoan-khoi-đong-cua-spring-application-context" tabindex="-1"><a class="header-anchor" href="#chuan-bi-giai-đoan-khoi-đong-cua-spring-application-context"><span>Chuẩn bị giai đoạn khởi động của Spring Application Context</span></a></h2><p>Phương thức AbstractApplicationContext#prepareRefresh()</p><ul><li>Thời gian khởi động - startupDate</li><li>Trạng thái - closed(false), active(true)</li><li>Khởi tạo PropertySources - initPropertySources()</li><li>Kiểm tra các thuộc tính bắt buộc trong Environment</li><li>Khởi tạo bộ lắng nghe sự kiện</li><li>Khởi tạo tập hợp sự kiện Spring sớm</li></ul><h2 id="giai-đoan-tao-beanfactory" tabindex="-1"><a class="header-anchor" href="#giai-đoan-tao-beanfactory"><span>Giai đoạn tạo BeanFactory</span></a></h2><p>Phương thức AbstractApplicationContext#obtainFreshBeanFactory()</p><ul><li>Làm mới BeanFactory của Spring Application Context - refreshBeanFactory() <ul><li>Hủy hoặc đóng BeanFactory nếu đã tồn tại</li><li>Tạo BeanFactory - createBeanFactory()</li><li>Thiết lập Id của BeanFactory</li><li>Thiết lập &quot;Cho phép định nghĩa BeanDefinition trùng lặp&quot; - customizeBeanFactory(DefaultListableBeanFactory)</li><li>Thiết lập &quot;Cho phép tham chiếu vòng (phụ thuộc)&quot; - customizeBeanFactory(DefaultListableBeanFactory)</li><li>Tải BeanDefinition - loadBeanDefinitions(DefaultListableBeanFactory) phương thức</li><li>Liên kết BeanFactory mới với Spring Application Context</li></ul></li><li>Trả về BeanFactory của Spring Application Context - getBeanFactory()</li></ul><h2 id="giai-đoan-chuan-bi-beanfactory" tabindex="-1"><a class="header-anchor" href="#giai-đoan-chuan-bi-beanfactory"><span>Giai đoạn chuẩn bị BeanFactory</span></a></h2><p>Phương thức AbstractApplicationContext#prepareBeanFactory(ConfigurableListableBeanFactory)</p><ul><li>Liên kết ClassLoader</li><li>Thiết lập trình xử lý biểu thức Bean</li><li>Thêm PropertyEditorRegistrar - ResourceEditorRegistrar</li><li>Thêm ApplicationContextAwareProcessor - triển khai Aware callback interface BeanPostProcessor</li><li>Bỏ qua Aware callback interface như là giao diện phụ thuộc</li><li>Đăng ký ResolvableDependency - BeanFactory, ResourceLoader, ApplicationEventPublisher và ApplicationContext</li><li>Đăng ký ApplicationListenerDetector</li><li>Đăng ký LoadTimeWeaverAwareProcessor</li><li>Đăng ký đối tượng Singleton - Environment, Java System Properties và biến môi trường OS</li></ul><h2 id="giai-đoan-xu-ly-sau-beanfactory" tabindex="-1"><a class="header-anchor" href="#giai-đoan-xu-ly-sau-beanfactory"><span>Giai đoạn xử lý sau BeanFactory</span></a></h2><ul><li>Phương thức AbstractApplicationContext#postProcessBeanFactory(ConfigurableListableBeanFactory) <ul><li>Được ghi đè bởi lớp con</li></ul></li><li>Phương thức AbstractApplicationContext#invokeBeanFactoryPostProcessors(ConfigurableListableBeanFactory) <ul><li>Gọi các phương thức xử lý sau BeanFactoryPostProcessor hoặc BeanDefinitionRegistry</li><li>Đăng ký LoadTimeWeaverAwareProcessor</li></ul></li></ul><h2 id="giai-đoan-đang-ky-beanpostprocessor-cua-beanfactory" tabindex="-1"><a class="header-anchor" href="#giai-đoan-đang-ky-beanpostprocessor-cua-beanfactory"><span>Giai đoạn đăng ký BeanPostProcessor của BeanFactory</span></a></h2><p>Phương thức AbstractApplicationContext#registerBeanPostProcessors(ConfigurableListableBeanFactory)</p><ul><li>Đăng ký các BeanPostProcessor có thứ tự ưu tiên (PriorityOrdered)</li><li>Đăng ký các BeanPostProcessor có thứ tự (Ordered)</li><li>Đăng ký các BeanPostProcessor thông thường</li><li>Đăng ký MergedBeanDefinitionPostProcessor</li><li>Đăng ký ApplicationListenerDetector</li></ul><h2 id="khoi-tao-bean-tich-hop-san-messagesource" tabindex="-1"><a class="header-anchor" href="#khoi-tao-bean-tich-hop-san-messagesource"><span>Khởi tạo Bean tích hợp sẵn: MessageSource</span></a></h2><p>Phương thức AbstractApplicationContext#initMessageSource()</p><h2 id="khoi-tao-bean-tich-hop-san-trinh-phat-song-su-kien-spring" tabindex="-1"><a class="header-anchor" href="#khoi-tao-bean-tich-hop-san-trinh-phat-song-su-kien-spring"><span>Khởi tạo Bean tích hợp sẵn: Trình phát sóng sự kiện Spring</span></a></h2><p>Phương thức AbstractApplicationContext#initApplicationEventMulticaster()</p><h2 id="giai-đoan-lam-moi-spring-application-context" tabindex="-1"><a class="header-anchor" href="#giai-đoan-lam-moi-spring-application-context"><span>Giai đoạn làm mới Spring Application Context</span></a></h2><p>Phương thức AbstractApplicationContext#onRefresh()</p><p>Được ghi đè bởi các lớp con</p><ul><li>org.springframework.web.context.support.AbstractRefreshableWebApplicationContext#onRefresh()</li><li>org.springframework.web.context.support.GenericWebApplicationContext#onRefresh()</li><li>org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext#onRefresh()</li><li>org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext#onRefresh()</li><li>org.springframework.web.context.support.StaticWebApplicationContext#onRefresh()</li></ul><h2 id="giai-đoan-đang-ky-trinh-lang-nghe-su-kien-spring" tabindex="-1"><a class="header-anchor" href="#giai-đoan-đang-ky-trinh-lang-nghe-su-kien-spring"><span>Giai đoạn đăng ký trình lắng nghe sự kiện Spring</span></a></h2><p>Phương thức AbstractApplicationContext#registerListeners()</p><ul><li>Thêm các đối tượng ApplicationListener liên quan đến ngữ cảnh ứng dụng hiện tại (tập hợp)</li><li>Thêm các Bean ApplicationListener đã đăng ký trong BeanFactory</li><li>Phát sóng sự kiện Spring sớm</li></ul><h2 id="giai-đoan-hoan-thanh-viec-khoi-tao-beanfactory" tabindex="-1"><a class="header-anchor" href="#giai-đoan-hoan-thanh-viec-khoi-tao-beanfactory"><span>Giai đoạn hoàn thành việc khởi tạo BeanFactory</span></a></h2><p>Phương thức AbstractApplicationContext#finishBeanFactoryInitialization(ConfigurableListableBeanFactory)</p><ul><li>Liên kết BeanFactory với Bean ConversionService, nếu có</li><li>Thêm đối tượng StringValueResolver</li><li>Tìm kiếm Bean LoadTimeWeaverAware phụ thuộc</li><li>Đặt ClassLoader tạm thời của BeanFactory thành null</li><li>Đóng băng cấu hình BeanFactory</li><li>Khởi tạo các Bean không trễ đơn lẻ</li></ul><h2 id="giai-đoan-hoan-thanh-viec-lam-moi-spring-application-context" tabindex="-1"><a class="header-anchor" href="#giai-đoan-hoan-thanh-viec-lam-moi-spring-application-context"><span>Giai đoạn hoàn thành việc làm mới Spring Application Context</span></a></h2><p>Phương thức AbstractApplicationContext#finishRefresh()</p><ul><li>Xóa bộ nhớ cache của ResourceLoader - clearResourceCaches() @since 5.0</li><li>Khởi tạo đối tượng LifecycleProcessor - initLifecycleProcessor()</li><li>Gọi phương thức LifecycleProcessor#onRefresh()</li><li>Phát sóng sự kiện ứng dụng ngữ cảnh Spring đã được làm mới - ContextRefreshedEvent</li><li>Quản lý các Bean sống trên MBeanServer</li></ul><h2 id="giai-đoan-khoi-đong-spring-application-context" tabindex="-1"><a class="header-anchor" href="#giai-đoan-khoi-đong-spring-application-context"><span>Giai đoạn khởi động Spring Application Context</span></a></h2><p>Phương thức AbstractApplicationContext#start()</p><ul><li>Khởi động LifecycleProcessor <ul><li>Tìm kiếm các Bean Lifecycle</li><li>Khởi động các Bean Lifecycle</li></ul></li><li>Phát sóng sự kiện ứng dụng ngữ cảnh Spring đã được khởi động - ContextStartedEvent</li></ul><h2 id="giai-đoan-dung-cua-spring-application-context" tabindex="-1"><a class="header-anchor" href="#giai-đoan-dung-cua-spring-application-context"><span>Giai đoạn dừng của Spring Application Context</span></a></h2><p>Phương thức AbstractApplicationContext#stop()</p><ul><li>Dừng LifecycleProcessor <ul><li>Tìm kiếm các Bean Lifecycle</li><li>Dừng các Bean Lifecycle</li></ul></li><li>Phát sóng sự kiện ứng dụng ngữ cảnh Spring đã dừng - ContextStoppedEvent</li></ul><h2 id="giai-đoan-đong-cua-spring-application-context" tabindex="-1"><a class="header-anchor" href="#giai-đoan-đong-cua-spring-application-context"><span>Giai đoạn đóng của Spring Application Context</span></a></h2><p>Phương thức AbstractApplicationContext#close()</p><ul><li>Trạng thái - active(false), closed(true)</li><li>Hủy bỏ việc quản lý Live Beans trên JMX <ul><li>LiveBeansView.unregisterApplicationContext(ConfigurableApplicationContext)</li></ul></li><li>Phát sóng sự kiện ứng dụng ngữ cảnh Spring đã đóng - ContextClosedEvent</li><li>Dừng LifecycleProcessor <ul><li>Tìm kiếm các Bean Lifecycle</li><li>Dừng các Bean Lifecycle</li></ul></li><li>Hủy bỏ các Spring Beans</li><li>Đóng BeanFactory</li><li>Gọi onClose()</li><li>Đăng ký luồng Shutdown Hook (nếu đã đăng ký)</li></ul><h2 id="cau-hoi" tabindex="-1"><a class="header-anchor" href="#cau-hoi"><span>Câu hỏi</span></a></h2><p><strong>Có những giai đoạn nào trong vòng đời của Spring Application Context?</strong></p><ul><li>Giai đoạn làm mới - ConfigurableApplicationContext#refresh()</li><li>Giai đoạn khởi động - ConfigurableApplicationContext#start()</li><li>Giai đoạn dừng - ConfigurableApplicationContext#stop()</li><li>Giai đoạn đóng - ConfigurableApplicationContext#close()</li></ul>',44),c=[o];function l(r,p){return n(),a("div",null,c)}const s=i(e,[["render",l],["__file","application-context-life-cycle.html.vue"]]),g=JSON.parse('{"path":"/framework/spring/core/application-context-life-cycle.html","title":"Spring Application Context Lifecycle","lang":"en-US","frontmatter":{"title":"Spring Application Context Lifecycle","tags":["spring","java","backend"],"categories":["spring","java","backend"],"date created":"2023-07-26T00:00:00.000Z","date modified":"2023-07-26T00:00:00.000Z","order":9,"description":"Vòng đời của Spring Application Context Chuẩn bị giai đoạn khởi động của Spring Application Context Phương thức AbstractApplicationContext#prepareRefresh() Thời gian khởi động -...","head":[["meta",{"property":"og:url","content":"https://vanhung4499.github.io/framework/spring/core/application-context-life-cycle.html"}],["meta",{"property":"og:site_name","content":"VanHung4499"}],["meta",{"property":"og:title","content":"Spring Application Context Lifecycle"}],["meta",{"property":"og:description","content":"Vòng đời của Spring Application Context Chuẩn bị giai đoạn khởi động của Spring Application Context Phương thức AbstractApplicationContext#prepareRefresh() Thời gian khởi động -..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-06-28T15:54:38.000Z"}],["meta",{"property":"article:author","content":"Hung Nguyen"}],["meta",{"property":"article:tag","content":"spring"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:tag","content":"backend"}],["meta",{"property":"article:modified_time","content":"2024-06-28T15:54:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Spring Application Context Lifecycle\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-06-28T15:54:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hung Nguyen\\",\\"url\\":\\"https://vanhung4499.github.io\\"}]}"]]},"headers":[{"level":2,"title":"Chuẩn bị giai đoạn khởi động của Spring Application Context","slug":"chuan-bi-giai-đoan-khoi-đong-cua-spring-application-context","link":"#chuan-bi-giai-đoan-khoi-đong-cua-spring-application-context","children":[]},{"level":2,"title":"Giai đoạn tạo BeanFactory","slug":"giai-đoan-tao-beanfactory","link":"#giai-đoan-tao-beanfactory","children":[]},{"level":2,"title":"Giai đoạn chuẩn bị BeanFactory","slug":"giai-đoan-chuan-bi-beanfactory","link":"#giai-đoan-chuan-bi-beanfactory","children":[]},{"level":2,"title":"Giai đoạn xử lý sau BeanFactory","slug":"giai-đoan-xu-ly-sau-beanfactory","link":"#giai-đoan-xu-ly-sau-beanfactory","children":[]},{"level":2,"title":"Giai đoạn đăng ký BeanPostProcessor của BeanFactory","slug":"giai-đoan-đang-ky-beanpostprocessor-cua-beanfactory","link":"#giai-đoan-đang-ky-beanpostprocessor-cua-beanfactory","children":[]},{"level":2,"title":"Khởi tạo Bean tích hợp sẵn: MessageSource","slug":"khoi-tao-bean-tich-hop-san-messagesource","link":"#khoi-tao-bean-tich-hop-san-messagesource","children":[]},{"level":2,"title":"Khởi tạo Bean tích hợp sẵn: Trình phát sóng sự kiện Spring","slug":"khoi-tao-bean-tich-hop-san-trinh-phat-song-su-kien-spring","link":"#khoi-tao-bean-tich-hop-san-trinh-phat-song-su-kien-spring","children":[]},{"level":2,"title":"Giai đoạn làm mới Spring Application Context","slug":"giai-đoan-lam-moi-spring-application-context","link":"#giai-đoan-lam-moi-spring-application-context","children":[]},{"level":2,"title":"Giai đoạn đăng ký trình lắng nghe sự kiện Spring","slug":"giai-đoan-đang-ky-trinh-lang-nghe-su-kien-spring","link":"#giai-đoan-đang-ky-trinh-lang-nghe-su-kien-spring","children":[]},{"level":2,"title":"Giai đoạn hoàn thành việc khởi tạo BeanFactory","slug":"giai-đoan-hoan-thanh-viec-khoi-tao-beanfactory","link":"#giai-đoan-hoan-thanh-viec-khoi-tao-beanfactory","children":[]},{"level":2,"title":"Giai đoạn hoàn thành việc làm mới Spring Application Context","slug":"giai-đoan-hoan-thanh-viec-lam-moi-spring-application-context","link":"#giai-đoan-hoan-thanh-viec-lam-moi-spring-application-context","children":[]},{"level":2,"title":"Giai đoạn khởi động Spring Application Context","slug":"giai-đoan-khoi-đong-spring-application-context","link":"#giai-đoan-khoi-đong-spring-application-context","children":[]},{"level":2,"title":"Giai đoạn dừng của Spring Application Context","slug":"giai-đoan-dung-cua-spring-application-context","link":"#giai-đoan-dung-cua-spring-application-context","children":[]},{"level":2,"title":"Giai đoạn đóng của Spring Application Context","slug":"giai-đoan-đong-cua-spring-application-context","link":"#giai-đoan-đong-cua-spring-application-context","children":[]},{"level":2,"title":"Câu hỏi","slug":"cau-hoi","link":"#cau-hoi","children":[]}],"git":{"createdTime":1719590078000,"updatedTime":1719590078000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":3,"words":901},"filePathRelative":"framework/spring/core/application-context-life-cycle.md","localizedDate":"June 28, 2024","excerpt":"\\n<h2>Chuẩn bị giai đoạn khởi động của Spring Application Context</h2>\\n<p>Phương thức AbstractApplicationContext#prepareRefresh()</p>\\n<ul>\\n<li>Thời gian khởi động - startupDate</li>\\n<li>Trạng thái - closed(false), active(true)</li>\\n<li>Khởi tạo PropertySources - initPropertySources()</li>\\n<li>Kiểm tra các thuộc tính bắt buộc trong Environment</li>\\n<li>Khởi tạo bộ lắng nghe sự kiện</li>\\n<li>Khởi tạo tập hợp sự kiện Spring sớm</li>\\n</ul>","autoDesc":true}');export{s as comp,g as data};
