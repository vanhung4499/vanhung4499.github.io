import{_ as s,o as a,c as n,d as o}from"./app-DBZfZLYz.js";const l={},i=o(`<h1 id="van-hanh-mongodb" tabindex="-1"><a class="header-anchor" href="#van-hanh-mongodb"><span>Vận hành MongoDB</span></a></h1><h2 id="cai-đat-mongodb" tabindex="-1"><a class="header-anchor" href="#cai-đat-mongodb"><span>Cài đặt MongoDB</span></a></h2><h3 id="windows" tabindex="-1"><a class="header-anchor" href="#windows"><span>Windows</span></a></h3><p>(1) Tải xuống và giải nén</p><p>Truy cập vào trang web chính thức để tải xuống MongoDB và chọn phiên bản phù hợp tại: <a href="https://www.mongodb.com/try/download/community" target="_blank" rel="noopener noreferrer">Download MongoDB Community Server | MongoDB</a></p><p>(2) Tạo thư mục dữ liệu</p><p>MongoDB lưu trữ dữ liệu trong thư mục db. Tuy nhiên, thư mục này không được tự động tạo ra, chúng ta cần tạo nó sau khi cài đặt.</p><p>Ví dụ: <code>D:\\Tools\\Server\\mongodb\\mongodb-4.4.0\\data\\db</code></p><p>(3) Chạy dịch vụ MongoDB</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mongod</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --dbpath</span><span style="color:#98C379;--shiki-dark:#98C379;"> D:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\T</span><span style="color:#98C379;--shiki-dark:#98C379;">ools</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\S</span><span style="color:#98C379;--shiki-dark:#98C379;">erver</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\m</span><span style="color:#98C379;--shiki-dark:#98C379;">ongodb</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\m</span><span style="color:#98C379;--shiki-dark:#98C379;">ongodb-4.4.0</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\d</span><span style="color:#98C379;--shiki-dark:#98C379;">ata</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\d</span><span style="color:#98C379;--shiki-dark:#98C379;">b</span></span></code></pre></div><p>(4) Kết nối với MongoDB từ máy khách</p><p>Bạn có thể kết nối với MongoDB bằng cách chạy lệnh <code>mongo.exe</code> trong cửa sổ dòng lệnh.</p><p>(5) Cấu hình dịch vụ MongoDB</p><h3 id="linux" tabindex="-1"><a class="header-anchor" href="#linux"><span>Linux</span></a></h3><p>(1) Cài đặt bằng gói cài đặt</p><p>Trước khi cài đặt, chúng ta cần cài đặt các gói phụ thuộc cho các nền tảng Linux.</p><p><strong>Red Hat/CentOS:</strong></p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>sudo yum install libcurl openssl</span></span></code></pre></div><p><strong>Ubuntu 18.04 LTS (&quot;Bionic&quot;)/Debian 10 &quot;Buster&quot;:</strong></p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>sudo apt-get install libcurl4 openssl</span></span></code></pre></div><p><strong>Ubuntu 16.04 LTS (&quot;Xenial&quot;)/Debian 9 &quot;Stretch&quot;:</strong></p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>sudo apt-get install libcurl3 openssl</span></span></code></pre></div><p>(2) Tạo thư mục dữ liệu</p><p>Mặc định, MongoDB sẽ khởi tạo hai thư mục sau khi khởi động:</p><ul><li>Thư mục lưu trữ dữ liệu: /var/lib/mongodb</li><li>Thư mục ghi nhật ký: /var/log/mongodb</li></ul><p>Trước khi khởi động, chúng ta có thể tạo hai thư mục này và đặt quyền đọc và ghi cho người dùng hiện tại:</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">sudo</span><span style="color:#98C379;--shiki-dark:#98C379;"> mkdir</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -p</span><span style="color:#98C379;--shiki-dark:#98C379;"> /var/lib/mongo</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">sudo</span><span style="color:#98C379;--shiki-dark:#98C379;"> mkdir</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -p</span><span style="color:#98C379;--shiki-dark:#98C379;"> /var/log/mongodb</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">sudo</span><span style="color:#98C379;--shiki-dark:#98C379;"> chown</span><span style="color:#98C379;--shiki-dark:#98C379;"> \`</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">whoami</span><span style="color:#98C379;--shiki-dark:#98C379;">\`</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> /var/lib/mongo</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">     # Đặt quyền</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">sudo</span><span style="color:#98C379;--shiki-dark:#98C379;"> chown</span><span style="color:#98C379;--shiki-dark:#98C379;"> \`</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">whoami</span><span style="color:#98C379;--shiki-dark:#98C379;">\`</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> /var/log/mongodb</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">   # Đặt quyền</span></span></code></pre></div><p>(3) Chạy dịch vụ MongoDB</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mongod</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --dbpath</span><span style="color:#98C379;--shiki-dark:#98C379;"> /var/lib/mongo</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --logpath</span><span style="color:#98C379;--shiki-dark:#98C379;"> /var/log/mongodb/mongod.log</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --fork</span></span></code></pre></div><p>Mở tệp /var/log/mongodb/mongod.log và kiểm tra thông tin sau, nếu xuất hiện, điều đó có nghĩa là khởi động thành công.</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"># tail -10f /var/log/mongodb/mongod.log</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-07-09T12:20:17.391+0800</span><span style="color:#98C379;--shiki-dark:#98C379;"> I</span><span style="color:#98C379;--shiki-dark:#98C379;">  NETWORK</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  [listener] Listening on /tmp/mongodb-27017.sock</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-07-09T12:20:17.392+0800</span><span style="color:#98C379;--shiki-dark:#98C379;"> I</span><span style="color:#98C379;--shiki-dark:#98C379;">  NETWORK</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  [listener] Listening on 127.0.0.1</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-07-09T12:20:17.392+0800</span><span style="color:#98C379;--shiki-dark:#98C379;"> I</span><span style="color:#98C379;--shiki-dark:#98C379;">  NETWORK</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  [listener] waiting </span><span style="color:#C678DD;--shiki-dark:#C678DD;">for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> connections on port </span><span style="color:#D19A66;--shiki-dark:#D19A66;">27017</span></span></code></pre></div><p>(4) Kết nối với MongoDB từ máy khách</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">cd</span><span style="color:#98C379;--shiki-dark:#98C379;"> /usr/local/mongodb4/bin</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">./mongo</span></span></code></pre></div><h3 id="thiet-lap-ten-nguoi-dung-va-mat-khau" tabindex="-1"><a class="header-anchor" href="#thiet-lap-ten-nguoi-dung-va-mat-khau"><span>Thiết lập tên người dùng và mật khẩu</span></a></h3><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt; use admin</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">chuyển</span><span style="color:#98C379;--shiki-dark:#98C379;"> sang</span><span style="color:#98C379;--shiki-dark:#98C379;"> db</span><span style="color:#98C379;--shiki-dark:#98C379;"> admin</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt; db.createUser({&quot;user&quot;:&quot;root&quot;,&quot;pwd&quot;:&quot;root&quot;,&quot;roles&quot;:[{&quot;role&quot;:&quot;userAdminAnyDatabase&quot;,&quot;db&quot;:&quot;admin&quot;}]})</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">Thêm</span><span style="color:#98C379;--shiki-dark:#98C379;"> người</span><span style="color:#98C379;--shiki-dark:#98C379;"> dùng</span><span style="color:#98C379;--shiki-dark:#98C379;"> thành</span><span style="color:#98C379;--shiki-dark:#98C379;"> công:</span><span style="color:#98C379;--shiki-dark:#98C379;"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        &quot;user&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;"> :</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;root&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        &quot;roles&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;"> :</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">                {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">                        &quot;role&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;"> :</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;userAdminAnyDatabase&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">                        &quot;db&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;"> :</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;admin&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">        ]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre></div><h2 id="sao-luu-va-khoi-phuc-du-lieu" tabindex="-1"><a class="header-anchor" href="#sao-luu-va-khoi-phuc-du-lieu"><span>Sao lưu và khôi phục dữ liệu</span></a></h2><h3 id="sao-luu-du-lieu" tabindex="-1"><a class="header-anchor" href="#sao-luu-du-lieu"><span>Sao lưu dữ liệu</span></a></h3><p>Trong MongoDB, chúng ta sử dụng lệnh <code>mongodump</code> để sao lưu dữ liệu MongoDB. Lệnh này cho phép xuất tất cả dữ liệu vào một thư mục được chỉ định.</p><p>Cú pháp lệnh <code>mongodump</code> như sau:</p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>mongodump -h dbhost -d dbname -o dbdirectory</span></span></code></pre></div><ul><li>-h: Địa chỉ máy chủ MongoDB, ví dụ: 127.0.0.1, cũng có thể chỉ định cổng: 127.0.0.1:27017.</li><li>-d: Tên cơ sở dữ liệu cần sao lưu, ví dụ: test.</li><li>-o: Đường dẫn lưu trữ dữ liệu sao lưu, ví dụ: c:\\data\\dump. Trước khi sao lưu, thư mục này cần được tạo trước. Sau khi sao lưu hoàn tất, MongoDB sẽ tự động tạo một thư mục test trong thư mục dump, chứa dữ liệu sao lưu của cơ sở dữ liệu đó.</li></ul><p>Các tham số tùy chọn cho lệnh <code>mongodump</code> như sau:</p><table><thead><tr><th style="text-align:left;">Cú pháp</th><th style="text-align:left;">Mô tả</th><th style="text-align:left;">Ví dụ</th></tr></thead><tbody><tr><td style="text-align:left;">mongodump --host HOST_NAME --port PORT_NUMBER</td><td style="text-align:left;">Sao lưu toàn bộ dữ liệu MongoDB</td><td style="text-align:left;">mongodump --host <a href="http://runoob.com" target="_blank" rel="noopener noreferrer">runoob.com</a> --port 27017</td></tr><tr><td style="text-align:left;">mongodump --dbpath DB_PATH --out BACKUP_DIRECTORY</td><td style="text-align:left;"></td><td style="text-align:left;">mongodump --dbpath /data/db/ --out /data/backup/</td></tr><tr><td style="text-align:left;">mongodump --collection COLLECTION --db DB_NAME</td><td style="text-align:left;">Sao lưu một bộ sưu tập cụ thể</td><td style="text-align:left;">mongodump --collection mycol --db test</td></tr></tbody></table><p>【Ví dụ】Sao lưu toàn bộ dữ liệu</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">$</span><span style="color:#98C379;--shiki-dark:#98C379;"> mongodump</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -h</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --port</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 27017</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -o</span><span style="color:#98C379;--shiki-dark:#98C379;"> test2</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">...</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:55:58.086+0800</span><span style="color:#98C379;--shiki-dark:#98C379;">    done</span><span style="color:#98C379;--shiki-dark:#98C379;"> dumping</span><span style="color:#98C379;--shiki-dark:#98C379;"> test.company</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (18801 </span><span style="color:#98C379;--shiki-dark:#98C379;">documents</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:56:00.725+0800</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    [#############...........]  test.people  559101/1000000  (</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">55.9%</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:56:03.725+0800</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    [###################.....]  test.people  829496/1000000  (</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">82.9%</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:56:06.725+0800</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    [#####################...]  test.people  884614/1000000  (</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">88.5%</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:56:08.088+0800</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    [########################]  test.people  1000000/1000000  (</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">100.0%</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:56:08.350+0800</span><span style="color:#98C379;--shiki-dark:#98C379;">    done</span><span style="color:#98C379;--shiki-dark:#98C379;"> dumping</span><span style="color:#98C379;--shiki-dark:#98C379;"> test.people</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (1000000 </span><span style="color:#98C379;--shiki-dark:#98C379;">documents</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>【Ví dụ】Sao lưu cơ sở dữ liệu cụ thể</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mongodump</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -h</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --port</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 27017</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -d</span><span style="color:#98C379;--shiki-dark:#98C379;"> admin</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -o</span><span style="color:#98C379;--shiki-dark:#98C379;"> test3</span></span></code></pre></div><h3 id="khoi-phuc-du-lieu" tabindex="-1"><a class="header-anchor" href="#khoi-phuc-du-lieu"><span>Khôi phục dữ liệu</span></a></h3><p>Trong MongoDB, chúng ta sử dụng lệnh <code>mongorestore</code> để khôi phục dữ liệu đã được sao lưu.</p><p>Cú pháp lệnh <code>mongorestore</code> như sau:</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt; mongorestore -h &lt;hostname&gt;&lt;:port&gt; -d dbname &lt;path&gt;</span></span></code></pre></div><ul><li><code>--host &lt;:port&gt;</code>, <code>-h &lt;:port&gt;</code>: Địa chỉ máy chủ MongoDB, mặc định là: localhost:27017.</li><li><code>--db</code>, <code>-d</code>: Cơ sở dữ liệu cần khôi phục, ví dụ: test, tên này cũng có thể khác với tên khi sao lưu, ví dụ: test2.</li><li><code>--drop</code>: Trong quá trình khôi phục, trước tiên xóa dữ liệu hiện tại và sau đó khôi phục dữ liệu đã sao lưu. Điều này có nghĩa là sau khi khôi phục, dữ liệu đã được thêm hoặc sửa đổi sau khi sao lưu sẽ bị xóa, hãy sử dụng cẩn thận!</li><li><code>&lt;path&gt;</code>: Thư mục chứa dữ liệu sao lưu. Bạn không thể chỉ định cùng lúc <code>&lt;path&gt;</code> và tùy chọn <code>--dir</code>, <code>--dir</code> cũng có thể được sử dụng để chỉ định thư mục sao lưu.</li><li><code>--dir</code>: Chỉ định thư mục sao lưu. Bạn không thể chỉ định cùng lúc <code>&lt;path&gt;</code> và tùy chọn <code>--dir</code>.</li></ul><p>【Ví dụ】</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">$</span><span style="color:#98C379;--shiki-dark:#98C379;"> mongorestore</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -h</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --port</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 27017</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -d</span><span style="color:#98C379;--shiki-dark:#98C379;"> test</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --dir</span><span style="color:#98C379;--shiki-dark:#98C379;"> test</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --drop</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">...</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:46:16.053+0800</span><span style="color:#98C379;--shiki-dark:#98C379;">    finished</span><span style="color:#98C379;--shiki-dark:#98C379;"> restoring</span><span style="color:#98C379;--shiki-dark:#98C379;"> test.tweets</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (966 </span><span style="color:#98C379;--shiki-dark:#98C379;">documents,</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="color:#98C379;--shiki-dark:#98C379;"> failures</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:46:18.256+0800</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    [###.....................]  test.people  164MB/1.03GB  (</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">15.6%</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:46:21.255+0800</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    [########................]  test.people  364MB/1.03GB  (</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">34.6%</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:46:24.256+0800</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    [############............]  test.people  558MB/1.03GB  (</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">53.0%</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:46:27.255+0800</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    [###############.........]  test.people  700MB/1.03GB  (</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">66.5%</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:46:30.257+0800</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    [###################.....]  test.people  846MB/1.03GB  (</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">80.3%</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:46:33.255+0800</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    [######################..]  test.people  990MB/1.03GB  (</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">94.0%</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:46:34.542+0800</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    [########################]  test.people  1.03GB/1.03GB  (</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">100.0%</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:46:34.543+0800</span><span style="color:#98C379;--shiki-dark:#98C379;">    no</span><span style="color:#98C379;--shiki-dark:#98C379;"> indexes</span><span style="color:#98C379;--shiki-dark:#98C379;"> to</span><span style="color:#98C379;--shiki-dark:#98C379;"> restore</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:46:34.543+0800</span><span style="color:#98C379;--shiki-dark:#98C379;">    finished</span><span style="color:#98C379;--shiki-dark:#98C379;"> restoring</span><span style="color:#98C379;--shiki-dark:#98C379;"> test.people</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (1000000 </span><span style="color:#98C379;--shiki-dark:#98C379;">documents,</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="color:#98C379;--shiki-dark:#98C379;"> failures</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:46:34.544+0800</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    1000966</span><span style="color:#98C379;--shiki-dark:#98C379;"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">s</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#98C379;--shiki-dark:#98C379;">restored</span><span style="color:#98C379;--shiki-dark:#98C379;"> successfully.</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="color:#98C379;--shiki-dark:#98C379;"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">s</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#98C379;--shiki-dark:#98C379;">failed</span><span style="color:#98C379;--shiki-dark:#98C379;"> to</span><span style="color:#98C379;--shiki-dark:#98C379;"> restore.</span></span></code></pre></div><h2 id="import-va-export" tabindex="-1"><a class="header-anchor" href="#import-va-export"><span>Import và Export</span></a></h2><p>Các công cụ <code>mongoimport</code> và <code>mongoexport</code> không thể đảm bảo lưu trữ tất cả các loại dữ liệu BSON phong phú một cách đáng tin cậy, vì JSON chỉ có thể đại diện cho một phần con của các loại dữ liệu BSON được hỗ trợ. Do đó, việc xuất và nhập dữ liệu có thể dẫn đến mất mát một số độ chính xác.</p><h3 id="thuc-hien-import" tabindex="-1"><a class="header-anchor" href="#thuc-hien-import"><span>Thực hiện Import</span></a></h3><p>Trong MongoDB, chúng ta sử dụng lệnh <code>mongoimport</code> để nhập dữ liệu. Mặc định, <code>mongoimport</code> sẽ nhập dữ liệu vào một MongoDB instance đang chạy trên máy chủ cục bộ và cổng 27017. Để nhập dữ liệu vào một instance MongoDB đang chạy trên máy chủ hoặc cổng khác, hãy chỉ định máy chủ và cổng bằng cách sử dụng các tùy chọn <code>--host</code> và <code>--port</code>. Sử dụng tùy chọn <code>--drop</code> để xóa bộ sưu tập (nếu nó đã tồn tại) trước khi nhập dữ liệu. Điều này đảm bảo rằng bộ sưu tập chỉ chứa dữ liệu bạn muốn nhập.</p><p>Cú pháp lệnh <code>mongoimport</code> như sau:</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mongoimport</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -h</span><span style="color:#98C379;--shiki-dark:#98C379;"> IP</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --port</span><span style="color:#98C379;--shiki-dark:#98C379;"> PORT</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -u</span><span style="color:#98C379;--shiki-dark:#98C379;"> USERNAME</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -p</span><span style="color:#98C379;--shiki-dark:#98C379;"> PASSWORD</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -d</span><span style="color:#98C379;--shiki-dark:#98C379;"> DATABASE</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -c</span><span style="color:#98C379;--shiki-dark:#98C379;"> COLLECTION</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --type</span><span style="color:#98C379;--shiki-dark:#98C379;"> TYPE</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --headerline</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --upsert</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --drop</span><span style="color:#98C379;--shiki-dark:#98C379;"> FILENAME</span></span></code></pre></div><p>【Ví dụ】Nhập dữ liệu vào một bảng</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">$</span><span style="color:#98C379;--shiki-dark:#98C379;"> mongoimport</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -h</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --port</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 27017</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -d</span><span style="color:#98C379;--shiki-dark:#98C379;"> test</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -c</span><span style="color:#98C379;--shiki-dark:#98C379;"> book</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --drop</span><span style="color:#98C379;--shiki-dark:#98C379;"> test/book.dat</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T10:53:56.359+0800</span><span style="color:#98C379;--shiki-dark:#98C379;">    connected</span><span style="color:#98C379;--shiki-dark:#98C379;"> to:</span><span style="color:#98C379;--shiki-dark:#98C379;"> mongodb://127.0.0.1:27017/</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T10:53:56.372+0800</span><span style="color:#98C379;--shiki-dark:#98C379;">    dropping:</span><span style="color:#98C379;--shiki-dark:#98C379;"> test.book</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T10:53:56.628+0800</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    431</span><span style="color:#98C379;--shiki-dark:#98C379;"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">s</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#98C379;--shiki-dark:#98C379;">imported</span><span style="color:#98C379;--shiki-dark:#98C379;"> successfully.</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="color:#98C379;--shiki-dark:#98C379;"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">s</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#98C379;--shiki-dark:#98C379;">failed</span><span style="color:#98C379;--shiki-dark:#98C379;"> to</span><span style="color:#98C379;--shiki-dark:#98C379;"> import.</span></span></code></pre></div><p>【Ví dụ】Nhập dữ liệu từ tệp JSON</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">$</span><span style="color:#98C379;--shiki-dark:#98C379;"> mongoimport</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -h</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --port</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 27017</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -d</span><span style="color:#98C379;--shiki-dark:#98C379;"> test</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -c</span><span style="color:#98C379;--shiki-dark:#98C379;"> student</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --upsert</span><span style="color:#98C379;--shiki-dark:#98C379;"> test/student.json</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:02:55.907+0800</span><span style="color:#98C379;--shiki-dark:#98C379;">    connected</span><span style="color:#98C379;--shiki-dark:#98C379;"> to:</span><span style="color:#98C379;--shiki-dark:#98C379;"> mongodb://127.0.0.1:27017/</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:02:56.068+0800</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    200</span><span style="color:#98C379;--shiki-dark:#98C379;"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">s</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#98C379;--shiki-dark:#98C379;">imported</span><span style="color:#98C379;--shiki-dark:#98C379;"> successfully.</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="color:#98C379;--shiki-dark:#98C379;"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">s</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#98C379;--shiki-dark:#98C379;">failed</span><span style="color:#98C379;--shiki-dark:#98C379;"> to</span><span style="color:#98C379;--shiki-dark:#98C379;"> import.</span></span></code></pre></div><p>【Ví dụ】Nhập dữ liệu từ tệp CSV</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">$</span><span style="color:#98C379;--shiki-dark:#98C379;"> mongoimport</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -h</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --port</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 27017</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -d</span><span style="color:#98C379;--shiki-dark:#98C379;"> test</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -c</span><span style="color:#98C379;--shiki-dark:#98C379;"> product</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --type</span><span style="color:#98C379;--shiki-dark:#98C379;"> csv</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --headerline</span><span style="color:#98C379;--shiki-dark:#98C379;"> test/product.csv</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:07:49.788+0800</span><span style="color:#98C379;--shiki-dark:#98C379;">    connected</span><span style="color:#98C379;--shiki-dark:#98C379;"> to:</span><span style="color:#98C379;--shiki-dark:#98C379;"> mongodb://127.0.0.1:27017/</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:07:51.051+0800</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    11</span><span style="color:#98C379;--shiki-dark:#98C379;"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">s</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#98C379;--shiki-dark:#98C379;">imported</span><span style="color:#98C379;--shiki-dark:#98C379;"> successfully.</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="color:#98C379;--shiki-dark:#98C379;"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">s</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#98C379;--shiki-dark:#98C379;">failed</span><span style="color:#98C379;--shiki-dark:#98C379;"> to</span><span style="color:#98C379;--shiki-dark:#98C379;"> import.</span></span></code></pre></div><p>【Ví dụ】Nhập một phần dữ liệu từ bảng</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">$</span><span style="color:#98C379;--shiki-dark:#98C379;"> mongoimport</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -h</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --port</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 27017</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -d</span><span style="color:#98C379;--shiki-dark:#98C379;"> test</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -c</span><span style="color:#98C379;--shiki-dark:#98C379;"> product</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --type</span><span style="color:#98C379;--shiki-dark:#98C379;"> json</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --upsertFields</span><span style="color:#98C379;--shiki-dark:#98C379;"> name,price</span><span style="color:#98C379;--shiki-dark:#98C379;"> test/product.json</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:14:05.410+0800</span><span style="color:#98C379;--shiki-dark:#98C379;">    connected</span><span style="color:#98C379;--shiki-dark:#98C379;"> to:</span><span style="color:#98C379;--shiki-dark:#98C379;"> mongodb://127.0.0.1:27017/</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T11:14:05.612+0800</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    11</span><span style="color:#98C379;--shiki-dark:#98C379;"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">s</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#98C379;--shiki-dark:#98C379;">imported</span><span style="color:#98C379;--shiki-dark:#98C379;"> successfully.</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="color:#98C379;--shiki-dark:#98C379;"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">s</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#98C379;--shiki-dark:#98C379;">failed</span><span style="color:#98C379;--shiki-dark:#98C379;"> to</span><span style="color:#98C379;--shiki-dark:#98C379;"> import.</span></span></code></pre></div><h3 id="thuc-hien-export" tabindex="-1"><a class="header-anchor" href="#thuc-hien-export"><span>Thực hiện Export</span></a></h3><p>Cú pháp lệnh như sau:</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mongoexport</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -h</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &lt;</span><span style="color:#98C379;--shiki-dark:#98C379;">I</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">P&gt; </span><span style="color:#D19A66;--shiki-dark:#D19A66;">--port</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &lt;</span><span style="color:#98C379;--shiki-dark:#98C379;">POR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">T&gt; </span><span style="color:#D19A66;--shiki-dark:#D19A66;">-u</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &lt;</span><span style="color:#98C379;--shiki-dark:#98C379;">USERNAM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">E&gt; </span><span style="color:#D19A66;--shiki-dark:#D19A66;">-p</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &lt;</span><span style="color:#98C379;--shiki-dark:#98C379;">PASSWOR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">D&gt; </span><span style="color:#D19A66;--shiki-dark:#D19A66;">-d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &lt;</span><span style="color:#98C379;--shiki-dark:#98C379;">DATABAS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">E&gt; </span><span style="color:#D19A66;--shiki-dark:#D19A66;">-c</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &lt;</span><span style="color:#98C379;--shiki-dark:#98C379;">COLLECTIO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">N&gt; </span><span style="color:#D19A66;--shiki-dark:#D19A66;">-f</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &lt;</span><span style="color:#98C379;--shiki-dark:#98C379;">FIELD</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">S&gt; </span><span style="color:#D19A66;--shiki-dark:#D19A66;">-q</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &lt;</span><span style="color:#98C379;--shiki-dark:#98C379;">QUER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">Y&gt; </span><span style="color:#D19A66;--shiki-dark:#D19A66;">--csv</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -o</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &lt;</span><span style="color:#98C379;--shiki-dark:#98C379;">FILENAM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">E&gt;</span></span></code></pre></div><ul><li><code>-f</code>: Chỉ định các trường cần xuất, phân tách bằng dấu phẩy, <code>-f name,email,age</code> chỉ định xuất ba trường name, email, age.</li><li><code>-q</code>: Có thể chỉ định truy vấn để xuất, <code>-q &#39;{ &quot;uid&quot; : &quot;100&quot; }&#39;</code> chỉ định xuất dữ liệu với uid là 100.</li><li><code>--csv</code>: Chỉ định định dạng tệp xuất là csv, điều này hữu ích vì hầu hết các cơ sở dữ liệu quan hệ đều hỗ trợ csv và có điểm chung này.</li></ul><p>【Ví dụ】Xuất toàn bộ bảng</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">$</span><span style="color:#98C379;--shiki-dark:#98C379;"> mongoexport</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -h</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --port</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 27017</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -d</span><span style="color:#98C379;--shiki-dark:#98C379;"> test</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -c</span><span style="color:#98C379;--shiki-dark:#98C379;"> product</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -o</span><span style="color:#98C379;--shiki-dark:#98C379;"> test/product.dat</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T10:44:23.161+0800</span><span style="color:#98C379;--shiki-dark:#98C379;">    connected</span><span style="color:#98C379;--shiki-dark:#98C379;"> to:</span><span style="color:#98C379;--shiki-dark:#98C379;"> mongodb://127.0.0.1:27017/</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T10:44:23.177+0800</span><span style="color:#98C379;--shiki-dark:#98C379;">    exported</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 11</span><span style="color:#98C379;--shiki-dark:#98C379;"> records</span></span></code></pre></div><p>【Ví dụ】Xuất bảng thành tệp JSON</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">$</span><span style="color:#98C379;--shiki-dark:#98C379;"> mongoexport</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -h</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --port</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 27017</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -d</span><span style="color:#98C379;--shiki-dark:#98C379;"> test</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -c</span><span style="color:#98C379;--shiki-dark:#98C379;"> product</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --type</span><span style="color:#98C379;--shiki-dark:#98C379;"> json</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -o</span><span style="color:#98C379;--shiki-dark:#98C379;"> test/product.json</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T10:49:52.735+0800</span><span style="color:#98C379;--shiki-dark:#98C379;">    connected</span><span style="color:#98C379;--shiki-dark:#98C379;"> to:</span><span style="color:#98C379;--shiki-dark:#98C379;"> mongodb://127.0.0.1:27017/</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T10:49:52.750+0800</span><span style="color:#98C379;--shiki-dark:#98C379;">    exported</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 11</span><span style="color:#98C379;--shiki-dark:#98C379;"> records</span></span></code></pre></div><p>【Ví dụ】Xuất một phần trường từ bảng thành tệp CSV</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">$</span><span style="color:#98C379;--shiki-dark:#98C379;"> mongoexport</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -h</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --port</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 27017</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -d</span><span style="color:#98C379;--shiki-dark:#98C379;"> test</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -c</span><span style="color:#98C379;--shiki-dark:#98C379;"> product</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --type</span><span style="color:#98C379;--shiki-dark:#98C379;"> csv</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -f</span><span style="color:#98C379;--shiki-dark:#98C379;"> name,price</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -o</span><span style="color:#98C379;--shiki-dark:#98C379;"> test/product.csv</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T10:47:33.160+0800</span><span style="color:#98C379;--shiki-dark:#98C379;">    connected</span><span style="color:#98C379;--shiki-dark:#98C379;"> to:</span><span style="color:#98C379;--shiki-dark:#98C379;"> mongodb://127.0.0.1:27017/</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2020-09-11T10:47:33.176+0800</span><span style="color:#98C379;--shiki-dark:#98C379;">    exported</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 11</span><span style="color:#98C379;--shiki-dark:#98C379;"> records</span></span></code></pre></div>`,78),p=[i];function r(e,t){return a(),n("div",null,p)}const d=s(l,[["render",r],["__file","operation.html.vue"]]),k=JSON.parse('{"path":"/database/mongodb/operation.html","title":"MongoDB Operation","lang":"en-US","frontmatter":{"title":"MongoDB Operation","tags":["mongodb","nosql"],"categories":["mongodb"],"icon":"devicon:mongodb","date created":"2023-07-24T00:00:00.000Z","date modified":"2023-07-24T00:00:00.000Z","order":12,"description":"Vận hành MongoDB Cài đặt MongoDB Windows (1) Tải xuống và giải nén Truy cập vào trang web chính thức để tải xuống MongoDB và chọn phiên bản phù hợp tại: Download MongoDB Communi...","head":[["meta",{"property":"og:url","content":"https://vanhung4499.github.io/database/mongodb/operation.html"}],["meta",{"property":"og:site_name","content":"VanHung4499"}],["meta",{"property":"og:title","content":"MongoDB Operation"}],["meta",{"property":"og:description","content":"Vận hành MongoDB Cài đặt MongoDB Windows (1) Tải xuống và giải nén Truy cập vào trang web chính thức để tải xuống MongoDB và chọn phiên bản phù hợp tại: Download MongoDB Communi..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-06-28T15:54:38.000Z"}],["meta",{"property":"article:author","content":"Hung Nguyen"}],["meta",{"property":"article:tag","content":"mongodb"}],["meta",{"property":"article:tag","content":"nosql"}],["meta",{"property":"article:modified_time","content":"2024-06-28T15:54:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"MongoDB Operation\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-06-28T15:54:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hung Nguyen\\",\\"url\\":\\"https://vanhung4499.github.io\\"}]}"]]},"headers":[{"level":2,"title":"Cài đặt MongoDB","slug":"cai-đat-mongodb","link":"#cai-đat-mongodb","children":[{"level":3,"title":"Windows","slug":"windows","link":"#windows","children":[]},{"level":3,"title":"Linux","slug":"linux","link":"#linux","children":[]},{"level":3,"title":"Thiết lập tên người dùng và mật khẩu","slug":"thiet-lap-ten-nguoi-dung-va-mat-khau","link":"#thiet-lap-ten-nguoi-dung-va-mat-khau","children":[]}]},{"level":2,"title":"Sao lưu và khôi phục dữ liệu","slug":"sao-luu-va-khoi-phuc-du-lieu","link":"#sao-luu-va-khoi-phuc-du-lieu","children":[{"level":3,"title":"Sao lưu dữ liệu","slug":"sao-luu-du-lieu","link":"#sao-luu-du-lieu","children":[]},{"level":3,"title":"Khôi phục dữ liệu","slug":"khoi-phuc-du-lieu","link":"#khoi-phuc-du-lieu","children":[]}]},{"level":2,"title":"Import và Export","slug":"import-va-export","link":"#import-va-export","children":[{"level":3,"title":"Thực hiện Import","slug":"thuc-hien-import","link":"#thuc-hien-import","children":[]},{"level":3,"title":"Thực hiện Export","slug":"thuc-hien-export","link":"#thuc-hien-export","children":[]}]}],"git":{"createdTime":1719590078000,"updatedTime":1719590078000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":6.63,"words":1988},"filePathRelative":"database/mongodb/operation.md","localizedDate":"June 28, 2024","excerpt":"\\n<h2>Cài đặt MongoDB</h2>\\n<h3>Windows</h3>\\n<p>(1) Tải xuống và giải nén</p>\\n<p>Truy cập vào trang web chính thức để tải xuống MongoDB và chọn phiên bản phù hợp tại: <a href=\\"https://www.mongodb.com/try/download/community\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Download MongoDB Community Server | MongoDB</a></p>","autoDesc":true}');export{d as comp,k as data};
