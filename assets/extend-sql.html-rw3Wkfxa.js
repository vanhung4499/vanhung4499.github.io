import{_ as a,o as s,c as n,d as i}from"./app-BG8AAbz2.js";const l={},e=i(`<h1 id="mo-rong-sql" tabindex="-1"><a class="header-anchor" href="#mo-rong-sql"><span>Mở rộng SQL</span></a></h1><h2 id="co-so-du-lieu" tabindex="-1"><a class="header-anchor" href="#co-so-du-lieu"><span>Cơ sở dữ liệu</span></a></h2><h2 id="bang" tabindex="-1"><a class="header-anchor" href="#bang"><span>Bảng</span></a></h2><h3 id="xem-thong-tin-co-ban-cua-bang" tabindex="-1"><a class="header-anchor" href="#xem-thong-tin-co-ban-cua-bang"><span>Xem thông tin cơ bản của bảng</span></a></h3><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> information_schema</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">tables</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> table_schema </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;test&#39;</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> AND</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> table_name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;user&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><h3 id="xem-thong-tin-cot-cua-bang" tabindex="-1"><a class="header-anchor" href="#xem-thong-tin-cot-cua-bang"><span>Xem thông tin cột của bảng</span></a></h3><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> information_schema</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">columns</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> table_schema </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;test&#39;</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> AND</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> table_name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;user&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><h3 id="lam-the-nao-đe-xoa-mot-luong-lon-du-lieu" tabindex="-1"><a class="header-anchor" href="#lam-the-nao-đe-xoa-mot-luong-lon-du-lieu"><span>Làm thế nào để xóa một lượng lớn dữ liệu</span></a></h3><p>Nếu bạn muốn xóa một lượng lớn dữ liệu dựa trên một khoảng thời gian, câu lệnh đơn giản như sau:</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">DELETE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> orders</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> timestamp</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> &lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> SUBDATE(CURDATE(), INTERVAL </span><span style="color:#D19A66;--shiki-dark:#D19A66;">3</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> month</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><p>Câu lệnh trên có khả năng gây lỗi khi thực thi, báo lỗi xóa không thành công, vì lượng dữ liệu cần xóa quá lớn, vì vậy cần xóa theo từng phần.</p><p>Bạn có thể trước tiên tìm ra ID đơn hàng cũ nhất trong các đơn hàng lịch sử thỏa mãn điều kiện, sau đó chuyển điều kiện xóa thành xóa theo khóa chính.</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> MAX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(id) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> orders</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> timestamp</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> &lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> SUBDATE(CURDATE(), INTERVAL </span><span style="color:#D19A66;--shiki-dark:#D19A66;">3</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> month</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">-- Xóa theo từng phần, ? điền vào giá trị ID lớn nhất tìm được từ câu lệnh trên</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">DELETE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> orders</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&lt;=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ?</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ORDER BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">LIMIT</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><h3 id="thay-đoi-đinh-dang-ma-hoa-cua-bang" tabindex="-1"><a class="header-anchor" href="#thay-đoi-đinh-dang-ma-hoa-cua-bang"><span>Thay đổi định dạng mã hóa của bảng</span></a></h3><p>Mã hóa utf8mb4 là một phiên bản mở rộng của utf8, tương thích với utf8 và có thể lưu trữ các ký tự biểu tượng cảm xúc 4 byte. Nếu mã hóa của bảng được chỉ định là utf8, sẽ xảy ra lỗi khi lưu trữ trường emoji.</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> &lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">tableName</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> CONVERT </span><span style="color:#C678DD;--shiki-dark:#C678DD;">TO</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> CHARACTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> utf8mb4 </span><span style="color:#C678DD;--shiki-dark:#C678DD;">COLLATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> utf8mb4_general_ci;</span></span></code></pre></div><h2 id="khac" tabindex="-1"><a class="header-anchor" href="#khac"><span>Khác</span></a></h2><h3 id="hien-thi-cac-tien-trinh-đang-chay" tabindex="-1"><a class="header-anchor" href="#hien-thi-cac-tien-trinh-đang-chay"><span>Hiển thị các tiến trình đang chạy</span></a></h3><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> show processlist;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">+</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">----+-----------------+-----------------+------+---------+-------+------------------------+------------------+</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">| Id | User            | Host            | db   | Command | </span><span style="color:#C678DD;--shiki-dark:#C678DD;">Time</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  | </span><span style="color:#C678DD;--shiki-dark:#C678DD;">State</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">                  | Info             |</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">+</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">----+-----------------+-----------------+------+---------+-------+------------------------+------------------+</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">|  </span><span style="color:#D19A66;--shiki-dark:#D19A66;">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> | event_scheduler | localhost       | </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> | Daemon  | </span><span style="color:#D19A66;--shiki-dark:#D19A66;">40230</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> | Waiting </span><span style="color:#C678DD;--shiki-dark:#C678DD;">on</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> empty</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> queue</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> | </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">             |</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">| </span><span style="color:#D19A66;--shiki-dark:#D19A66;">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> | </span><span style="color:#C678DD;--shiki-dark:#C678DD;">root</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">            | localhost:</span><span style="color:#D19A66;--shiki-dark:#D19A66;">10120</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> | </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> | Query   |     </span><span style="color:#D19A66;--shiki-dark:#D19A66;">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> | </span><span style="color:#C678DD;--shiki-dark:#C678DD;">init</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">                   | show processlist |</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">+</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">----+-----------------+-----------------+------+---------+-------+------------------------+------------------</span></span></code></pre></div>`,19),t=[e];function o(r,p){return s(),n("div",null,t)}const h=a(l,[["render",o],["__file","extend-sql.html.vue"]]),k=JSON.parse(`{"path":"/database/sql/extend-sql.html","title":"Extend SQL","lang":"en-US","frontmatter":{"title":"Extend SQL","tags":["db","sql"],"categories":["db","sql"],"date created":"2023-07-22T00:00:00.000Z","date modified":"2023-07-22T00:00:00.000Z","icon":"mdi:sql-query","order":8,"description":"Mở rộng SQL Cơ sở dữ liệu Bảng Xem thông tin cơ bản của bảng Xem thông tin cột của bảng Làm thế nào để xóa một lượng lớn dữ liệu Nếu bạn muốn xóa một lượng lớn dữ liệu dựa trên ...","head":[["meta",{"property":"og:url","content":"https://vanhung4499.github.io/database/sql/extend-sql.html"}],["meta",{"property":"og:site_name","content":"VanHung4499"}],["meta",{"property":"og:title","content":"Extend SQL"}],["meta",{"property":"og:description","content":"Mở rộng SQL Cơ sở dữ liệu Bảng Xem thông tin cơ bản của bảng Xem thông tin cột của bảng Làm thế nào để xóa một lượng lớn dữ liệu Nếu bạn muốn xóa một lượng lớn dữ liệu dựa trên ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-06-28T15:54:38.000Z"}],["meta",{"property":"article:author","content":"Hung Nguyen"}],["meta",{"property":"article:tag","content":"db"}],["meta",{"property":"article:tag","content":"sql"}],["meta",{"property":"article:modified_time","content":"2024-06-28T15:54:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Extend SQL\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-06-28T15:54:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hung Nguyen\\",\\"url\\":\\"https://vanhung4499.github.io\\"}]}"]]},"headers":[{"level":2,"title":"Cơ sở dữ liệu","slug":"co-so-du-lieu","link":"#co-so-du-lieu","children":[]},{"level":2,"title":"Bảng","slug":"bang","link":"#bang","children":[{"level":3,"title":"Xem thông tin cơ bản của bảng","slug":"xem-thong-tin-co-ban-cua-bang","link":"#xem-thong-tin-co-ban-cua-bang","children":[]},{"level":3,"title":"Xem thông tin cột của bảng","slug":"xem-thong-tin-cot-cua-bang","link":"#xem-thong-tin-cot-cua-bang","children":[]},{"level":3,"title":"Làm thế nào để xóa một lượng lớn dữ liệu","slug":"lam-the-nao-đe-xoa-mot-luong-lon-du-lieu","link":"#lam-the-nao-đe-xoa-mot-luong-lon-du-lieu","children":[]},{"level":3,"title":"Thay đổi định dạng mã hóa của bảng","slug":"thay-đoi-đinh-dang-ma-hoa-cua-bang","link":"#thay-đoi-đinh-dang-ma-hoa-cua-bang","children":[]}]},{"level":2,"title":"Khác","slug":"khac","link":"#khac","children":[{"level":3,"title":"Hiển thị các tiến trình đang chạy","slug":"hien-thi-cac-tien-trinh-đang-chay","link":"#hien-thi-cac-tien-trinh-đang-chay","children":[]}]}],"git":{"createdTime":1719590078000,"updatedTime":1719590078000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":1.33,"words":400},"filePathRelative":"database/sql/extend-sql.md","localizedDate":"June 28, 2024","excerpt":"\\n<h2>Cơ sở dữ liệu</h2>\\n<h2>Bảng</h2>\\n<h3>Xem thông tin cơ bản của bảng</h3>\\n<div class=\\"language-sql\\" data-ext=\\"sql\\" data-title=\\"sql\\"><pre class=\\"shiki shiki-themes one-dark-pro one-dark-pro vp-code\\" style=\\"background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf\\" tabindex=\\"0\\"><code><span class=\\"line\\"><span style=\\"color:#C678DD;--shiki-dark:#C678DD\\">SELECT</span><span style=\\"color:#ABB2BF;--shiki-dark:#ABB2BF\\"> * </span><span style=\\"color:#C678DD;--shiki-dark:#C678DD\\">FROM</span><span style=\\"color:#D19A66;--shiki-dark:#D19A66\\"> information_schema</span><span style=\\"color:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"color:#D19A66;--shiki-dark:#D19A66\\">tables</span></span>\\n<span class=\\"line\\"><span style=\\"color:#C678DD;--shiki-dark:#C678DD\\">WHERE</span><span style=\\"color:#ABB2BF;--shiki-dark:#ABB2BF\\"> table_schema </span><span style=\\"color:#56B6C2;--shiki-dark:#56B6C2\\">=</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\"> 'test'</span><span style=\\"color:#C678DD;--shiki-dark:#C678DD\\"> AND</span><span style=\\"color:#ABB2BF;--shiki-dark:#ABB2BF\\"> table_name </span><span style=\\"color:#56B6C2;--shiki-dark:#56B6C2\\">=</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\"> 'user'</span><span style=\\"color:#ABB2BF;--shiki-dark:#ABB2BF\\">;</span></span></code></pre>\\n</div>","autoDesc":true}`);export{h as comp,k as data};
