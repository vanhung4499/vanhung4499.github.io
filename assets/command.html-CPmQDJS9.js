import{_ as n,o as s,c as a,d as i}from"./app-fjbxAy1X.js";const l={},t=i(`<h2 id="y-nghia" tabindex="-1"><a class="header-anchor" href="#y-nghia"><span>Ý nghĩa</span></a></h2><p><strong>Command Pattern</strong> là một mẫu thiết kế hành vi, nó chuyển đổi một yêu cầu thành một đối tượng độc lập chứa tất cả thông tin liên quan đến yêu cầu. Quá trình chuyển đổi này cho phép bạn tham số hóa các phương thức, trì hoãn việc thực thi yêu cầu hoặc đưa yêu cầu vào hàng đợi, và cung cấp khả năng hoàn tác yêu cầu.</p><h3 id="tuong-tac-trong-command-pattern" tabindex="-1"><a class="header-anchor" href="#tuong-tac-trong-command-pattern"><span>Tương tác trong Command Pattern</span></a></h3><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200726110040.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ul><li>Client tạo một đối tượng ConcreteCommand và chỉ định đối tượng Receiver của nó.</li><li>Một đối tượng Invoker nào đó lưu trữ đối tượng ConcreteCommand này.</li><li>Invoker gửi yêu cầu bằng cách gọi phương thức Execute của đối tượng Command. Nếu lệnh này có thể hoàn tác, ConcreteCommand sẽ lưu trạng thái hiện tại trước khi thực hiện lệnh.</li><li>Đối tượng ConcreteCommand thực hiện một số hoạt động trên Receiver của nó để thực hiện yêu cầu.</li></ul><h3 id="điem-chinh-cua-command-pattern" tabindex="-1"><a class="header-anchor" href="#điem-chinh-cua-command-pattern"><span>Điểm chính của Command Pattern</span></a></h3><ul><li>Bản chất của Command Pattern là đóng gói lệnh, tách trách nhiệm gửi lệnh và thực thi lệnh.</li><li>Mỗi lệnh là một hoạt động: bên yêu cầu gửi yêu cầu, yêu cầu thực hiện một hoạt động; bên nhận yêu cầu nhận yêu cầu và thực hiện hoạt động.</li><li>Command Pattern cho phép bên yêu cầu và bên nhận yêu cầu hoạt động độc lập, không cần biết về giao diện của bên nhận, cũng không cần biết cách yêu cầu được nhận và hoạt động có được thực hiện, khi nào được thực hiện và cách thức thực hiện.</li><li>Command Pattern biến yêu cầu thành một đối tượng, đối tượng này có thể được lưu trữ và truyền như bất kỳ đối tượng nào khác.</li><li>Điểm quan trọng của Command Pattern là giới thiệu một giao diện lệnh trừu tượng và lập trình bên gửi yêu cầu chỉ dựa trên giao diện lệnh trừu tượng này, chỉ có các lệnh cụ thể đã triển khai giao diện lệnh trừu tượng mới có thể liên quan đến bên nhận.</li></ul><h2 id="cac-truong-hop-su-dung" tabindex="-1"><a class="header-anchor" href="#cac-truong-hop-su-dung"><span>Các trường hợp sử dụng</span></a></h2><ul><li>Nếu bạn cần tham số hóa đối tượng bằng cách sử dụng hoạt động, bạn có thể sử dụng Command Pattern.</li><li>Nếu bạn muốn đưa hoạt động vào hàng đợi, thực hiện hoạt động từ xa hoặc thực hiện hoạt động từ xa, bạn có thể sử dụng Command Pattern.</li><li>Nếu bạn muốn triển khai chức năng hoàn tác, bạn có thể sử dụng Command Pattern.</li></ul><h2 id="cau-truc" tabindex="-1"><a class="header-anchor" href="#cau-truc"><span>Cấu trúc</span></a></h2><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20210519150619.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="giai-thich-cau-truc" tabindex="-1"><a class="header-anchor" href="#giai-thich-cau-truc"><span>Giải thích cấu trúc</span></a></h3><ol><li><p><strong>Người gửi</strong> (Sender) - còn được gọi là &quot;Invoker&quot; - lớp chịu trách nhiệm khởi tạo yêu cầu, trong đó phải chứa một biến thành viên để lưu trữ tham chiếu đến đối tượng lệnh. Người gửi kích hoạt lệnh mà không gửi yêu cầu trực tiếp đến người nhận. Lưu ý rằng người gửi không chịu trách nhiệm tạo đối tượng lệnh: thường là thông qua hàm tạo, người gửi nhận được đối tượng lệnh được tạo trước đó từ khách hàng.</p></li><li><p><strong>Lệnh</strong> (Command) - giao diện thường chỉ khai báo một phương thức để thực hiện lệnh.</p></li><li><p><strong>Lệnh cụ thể</strong> (Concrete Commands) - triển khai các loại yêu cầu khác nhau. Lệnh cụ thể không thực hiện công việc mà nó được ủy quyền cho một đối tượng logic kinh doanh. Tuy nhiên, để đơn giản hóa mã, các lớp này có thể được kết hợp.</p><p>Các tham số cần thiết cho phương thức thực thi của đối tượng nhận có thể được khai báo là các biến thành viên của lệnh cụ thể. Bạn có thể làm cho đối tượng lệnh trở thành không thay đổi và chỉ cho phép khởi tạo các biến thành viên này thông qua hàm tạo.</p></li><li><p><strong>Người nhận</strong> (Receiver) - lớp chứa một số logic kinh doanh. Hầu hết các lệnh chỉ xử lý các chi tiết về cách chuyển giao yêu cầu cho người nhận, người nhận sẽ thực hiện công việc thực tế.</p></li><li><p><strong>Khách hàng</strong> (Client) - tạo và cấu hình các đối tượng lệnh cụ thể. Khách hàng phải chuyển tất cả các tham số yêu cầu, bao gồm cả thực thể người nhận, cho hàm tạo của lệnh. Sau đó, lệnh được tạo ra có thể được liên kết với một hoặc nhiều người gửi.</p></li></ol><h3 id="mau-code" tabindex="-1"><a class="header-anchor" href="#mau-code"><span>Mẫu code</span></a></h3><p><strong>Command</strong>: Được sử dụng để khai báo một giao diện thực hiện hành động.</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">abstract</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Command</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    protected</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Receiver</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> receiver</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> Command</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Receiver</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;"> receiver</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">receiver</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> receiver;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> abstract</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> Execute</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p><strong>ConcreteCommand</strong>: Liên kết một đối tượng Receiver với một hành động, gọi phương thức tương ứng của Receiver để thực hiện Execute.</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> ConcreteCommand</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Command</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> ConcreteCommand</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Receiver</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;"> receiver</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        super</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(receiver);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> Execute</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        receiver</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">Action</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p><strong>Invoker</strong>: Yêu cầu lệnh thực hiện yêu cầu này.</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Invoker</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Command</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> command</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> Invoker</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Command</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;"> command</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">command</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> command;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> ExecuteCommand</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        command</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">Execute</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p><strong>Receiver</strong>: Biết cách thực hiện và thực hiện hành động liên quan đến yêu cầu, bất kỳ lớp nào cũng có thể là một Receiver.</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Receiver</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> Action</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;Thực hiện yêu cầu&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p><strong>Client</strong>: Tạo một đối tượng ConcreteCommand và thiết lập Receiver của nó.</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> CommandPattern</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        Receiver</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> receiver</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> Receiver</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        Command</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> cmd</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> ConcreteCommand</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(receiver);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        Invoker</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> invoker</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> Invoker</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(cmd);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        invoker</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">ExecuteCommand</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h2 id="pseudocode" tabindex="-1"><a class="header-anchor" href="#pseudocode"><span>Pseudocode</span></a></h2><p>Trong ví dụ này, một mẫu <strong>Command</strong> sẽ ghi lại lịch sử các hoạt động đã thực hiện để hoàn tác hoạt động khi cần thiết.</p><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20231006195258.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>Một số lệnh sẽ thay đổi trạng thái của trình soạn thảo (ví dụ: cắt và dán), chúng có thể sao lưu trạng thái của trình soạn thảo trước khi thực hiện các hoạt động liên quan. Sau khi thực hiện lệnh, nó sẽ được đưa vào lịch sử lệnh (ngăn xếp đối tượng lệnh). Sau đó, nếu người dùng cần hoàn tác hoạt động, chương trình có thể lấy lệnh gần nhất từ lịch sử, đọc sao lưu trạng thái trình soạn thảo tương ứng và khôi phục.</p><p>Mã khách hàng (gồm các phần tử GUI và lịch sử lệnh) không phụ thuộc vào các lớp lệnh cụ thể, vì nó sử dụng lệnh thông qua giao diện lệnh. Điều này cho phép bạn thêm lệnh mới vào chương trình mà không cần sửa đổi mã hiện có.</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// Lớp cơ bản của lệnh định nghĩa giao diện chung cho tất cả các lệnh cụ thể.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">abstract</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Command</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> is</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    protected</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> field app: Application</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    protected</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> field editor: Editor</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    protected</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> field backup: text</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    constructor Command(app: Application, editor: Editor) is</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">        this.app = app</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">        this.editor = editor</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // Sao lưu trạng thái của trình soạn thảo.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    method saveBackup() is</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">        backup = editor.text</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // Khôi phục trạng thái của trình soạn thảo.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    method undo() is</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">        editor.text = backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // Phương thức thực thi được khai báo là trừu tượng để buộc tất cả các lệnh cụ thể cung cấp cài đặt riêng của chúng. Phương thức này phải trả về true hoặc false tùy thuộc vào việc lệnh có thay đổi trạng thái của trình soạn thảo hay không.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    abstract</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> method execute()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// Đây là các lệnh cụ thể.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> CopyCommand</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Command</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> is</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // Lệnh sao chép không được lưu trong lịch sử vì nó không thay đổi trạng thái của trình soạn thảo.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    method execute() is</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">        app.clipboard = editor.getSelection()</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">        return false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">class </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">CutCommand</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> extends </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Command</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> is</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // Lệnh cắt thay đổi trạng thái của trình soạn thảo, vì vậy nó phải được lưu trong lịch sử. Nếu phương thức trả về true, nó sẽ được lưu.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    method execute() is</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">        saveBackup()</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">        app.clipboard = editor.getSelection()</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">        editor.deleteSelection()</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">        return true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">class </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">PasteCommand</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> extends </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Command</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> is</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    method execute() is</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">        saveBackup()</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">        editor.replaceSelection(app.clipboard)</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">        return true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// Lệnh hoàn tác cũng là một lệnh.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">class </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">UndoCommand</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> extends </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Command</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> is</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    method execute() is</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">        app.undo()</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">        return false</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// Lịch sử lệnh toàn cục là một ngăn xếp.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">class </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">CommandHistory</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> is</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    private field history: array of </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Command</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // Thêm lệnh vào cuối mảng lịch sử.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    method push(c: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Command</span><span style="color:#E06C75;--shiki-dark:#E06C75;">) is</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">        // ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // Lấy lệnh gần nhất từ lịch sử.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    method pop():</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Command</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> is</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">        // ...</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// Lớp trình soạn thảo chứa các hoạt động chỉnh sửa văn bản thực tế. Nó đóng vai trò của người nhận: cuối cùng, tất cả các lệnh sẽ chuyển công việc thực hiện cho các phương thức của trình soạn thảo.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">class </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Editor</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> is</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    field text: string</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    method getSelection() is</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">        // Trả về văn bản được chọn.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    method deleteSelection() is</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">        // Xóa văn bản được chọn.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    method replaceSelection(text) is</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">        // Chèn nội dung từ clipboard vào vị trí hiện tại.</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// Lớp ứng dụng thiết lập các mối quan hệ giữa các đối tượng. Nó đóng vai trò của người gửi: khi cần hoàn thành một số công việc, nó sẽ tạo và thực thi một đối tượng lệnh.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">class </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Application</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> is</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    field clipboard: string</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    field editors: array of </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Editors</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    field activeEditor: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Editor</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    field history: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">CommandHistory</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // Mã phân phối lệnh cho các đối tượng UI có thể như sau.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    method createUI() is</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">        // ...</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">        copy = function() </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">{</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> executeCommand</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">            new</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;"> CopyCommand</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, activeEditor))</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        copyButton.setCommand</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">copy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        shortcuts.onKeyPress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;Ctrl+C&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">copy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        cut = function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">executeCommand</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> CutCommand</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, activeEditor)) }</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        cutButton.setCommand</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">cut</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        shortcuts.onKeyPress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;Ctrl+X&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">cut</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        paste = function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">executeCommand</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> PasteCommand</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, activeEditor)) }</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        pasteButton.setCommand</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">paste</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        shortcuts.onKeyPress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;Ctrl+V&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">paste</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        undo = function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> { </span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">executeCommand</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> UndoCommand</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, activeEditor)) }</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        undoButton.setCommand</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">undo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        shortcuts.onKeyPress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;Ctrl+Z&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">undo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // Thực thi một lệnh và kiểm tra xem có cần thêm vào lịch sử lệnh hay không.</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    method executeCommand</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">command</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> is</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">command</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">execute</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">            history.push</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">command</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // Lấy lệnh gần nhất từ lịch sử lệnh và chạy phương thức undo (hoàn tác) của nó. Lưu ý rằng bạn không biết lớp mà lệnh thuộc về. Nhưng chúng ta không cần biết vì lệnh tự biết cách hoàn tác hành động của nó.</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    method undo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> is</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        command = history.pop</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">command</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> != </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">            command.undo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="vi-du" tabindex="-1"><a class="header-anchor" href="#vi-du"><span>Ví dụ</span></a></h2><p><strong>Sử dụng ví dụ</strong>: Mẫu Command rất phổ biến trong mã Java. Trong hầu hết các trường hợp, nó được sử dụng để thay thế các hàm gọi lại của các yếu tố giao diện người dùng được tham số hóa bằng hành vi. Ngoài ra, nó cũng được sử dụng để sắp xếp nhiệm vụ và ghi lại lịch sử hoạt động.</p><p>Dưới đây là một số ví dụ trong thư viện Java cốt lõi:</p><ul><li>Tất cả các triển khai của <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html" target="_blank" rel="noopener noreferrer"><code>java.lang.Runnable</code></a></li><li>Tất cả các triển khai của <a href="http://docs.oracle.com/javase/8/docs/api/javax/swing/Action.html" target="_blank" rel="noopener noreferrer"><code>javax.swing.Action</code></a></li></ul><p><strong>Cách nhận biết</strong>: Mẫu Command có thể được nhận biết thông qua phương thức hành vi trong kiểu trừu tượng hoặc giao diện (người gửi), mà gọi một phương thức khác trong kiểu trừu tượng hoặc giao diện khác (người nhận) được thực hiện bởi một triển khai của mẫu Command khi nó được tạo ra. Lớp Command thường chỉ giới hạn trong một số hành vi đặc biệt.</p><h2 id="moi-quan-he-voi-cac-mau-khac" tabindex="-1"><a class="header-anchor" href="#moi-quan-he-voi-cac-mau-khac"><span>Mối quan hệ với các mẫu khác</span></a></h2><ul><li>[[Chain Of Responsibility Pattern]], [[Command Pattern]], [[Mediator Pattern]] và [[Observer Pattern]] được sử dụng để xử lý các kết nối khác nhau giữa người gửi yêu cầu và người nhận: <ul><li>[[Chain Of Responsibility Pattern]] chuyển tiếp yêu cầu động cho một chuỗi các người nhận tiềm năng cho đến khi một trong số họ xử lý yêu cầu.</li><li>[[Command Pattern]] thiết lập một kết nối một chiều giữa người gửi và người nhận yêu cầu.</li><li>[[Mediator Pattern]] loại bỏ kết nối trực tiếp giữa người gửi và người nhận, buộc chúng phải giao tiếp gián tiếp thông qua một đối tượng trung gian.</li><li>[[Observer Pattern]] cho phép người nhận đăng ký hoặc hủy đăng ký động để nhận yêu cầu.</li></ul></li><li>[[Chain Of Responsibility Pattern]] có thể được triển khai bằng cách sử dụng [[Command Pattern]]. Trong trường hợp này, bạn có thể thực hiện nhiều hành động khác nhau trên cùng một đối tượng ngữ cảnh được đại diện bởi yêu cầu.<br> Cách triển khai khác là khi chính yêu cầu là một đối tượng <em>Command</em>. Trong trường hợp này, bạn có thể thực hiện cùng một hành động trên một chuỗi các kết nối ngữ cảnh khác nhau.</li><li>Bạn có thể sử dụng [[Command Pattern]] và [[Memento Pattern]] cùng nhau để triển khai tính năng &quot;Hoàn tác&quot;. Trong trường hợp này, <em>Command</em> được sử dụng để thực hiện các hoạt động trên đối tượng mục tiêu, và <em>Memento</em> được sử dụng để lưu trạng thái của đối tượng trước khi thực hiện lệnh.</li><li>[[Command Pattern]] và [[Strategy Pattern]] có vẻ giống nhau vì cả hai đều cho phép đối tượng được tham số hóa bằng cách sử dụng hành vi. Tuy nhiên, ý định của chúng rất khác nhau. <ul><li>Bạn có thể sử dụng <em>Command</em> để chuyển đổi bất kỳ hoạt động nào thành một đối tượng. Các tham số của hoạt động sẽ trở thành các biến thành viên của đối tượng. Bạn có thể trì hoãn việc thực hiện hoạt động, đặt hoạt động vào hàng đợi, lưu trữ lịch sử lệnh hoặc gửi lệnh đến dịch vụ từ xa và nhiều hơn nữa.</li><li>Trong khi đó, <em>Strategy</em> thường được sử dụng để mô tả các cách khác nhau để thực hiện một công việc, cho phép bạn chuyển đổi giữa các thuật toán trong cùng một lớp ngữ cảnh.</li></ul></li><li>[[Prototype Pattern]] có thể được sử dụng để lưu trữ lịch sử lệnh của <em>Command</em>.</li><li>Bạn có thể coi [[Visitor Pattern]] là một phiên bản nâng cao của [[Command Pattern]], trong đó đối tượng có thể thực hiện các hoạt động trên nhiều đối tượng khác nhau của các lớp khác nhau.</li></ul>`,37),c=[t];function e(o,r){return s(),a("div",null,c)}const h=n(l,[["render",e],["__file","command.html.vue"]]),d=JSON.parse('{"path":"/design/design-pattern/patterns/behavioral/command.html","title":"Command Pattern","lang":"en-US","frontmatter":{"title":"Command Pattern","tags":["design-pattern"],"categories":["design-pattern"],"date created":"2023-10-06T00:00:00.000Z","date modified":"2023-10-06T00:00:00.000Z","description":"Ý nghĩa Command Pattern là một mẫu thiết kế hành vi, nó chuyển đổi một yêu cầu thành một đối tượng độc lập chứa tất cả thông tin liên quan đến yêu cầu. Quá trình chuyển đổi này ...","head":[["meta",{"property":"og:url","content":"https://vanhung4499.github.io/design/design-pattern/patterns/behavioral/command.html"}],["meta",{"property":"og:site_name","content":"VanHung4499"}],["meta",{"property":"og:title","content":"Command Pattern"}],["meta",{"property":"og:description","content":"Ý nghĩa Command Pattern là một mẫu thiết kế hành vi, nó chuyển đổi một yêu cầu thành một đối tượng độc lập chứa tất cả thông tin liên quan đến yêu cầu. Quá trình chuyển đổi này ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200726110040.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-06-28T15:54:38.000Z"}],["meta",{"property":"article:author","content":"Hung Nguyen"}],["meta",{"property":"article:tag","content":"design-pattern"}],["meta",{"property":"article:modified_time","content":"2024-06-28T15:54:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Command Pattern\\",\\"image\\":[\\"https://raw.githubusercontent.com/vanhung4499/images/master/snap/20200726110040.png\\",\\"https://raw.githubusercontent.com/vanhung4499/images/master/snap/20210519150619.png\\",\\"https://raw.githubusercontent.com/vanhung4499/images/master/snap/20231006195258.png\\"],\\"dateModified\\":\\"2024-06-28T15:54:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hung Nguyen\\",\\"url\\":\\"https://vanhung4499.github.io\\"}]}"]]},"headers":[{"level":2,"title":"Ý nghĩa","slug":"y-nghia","link":"#y-nghia","children":[{"level":3,"title":"Tương tác trong Command Pattern","slug":"tuong-tac-trong-command-pattern","link":"#tuong-tac-trong-command-pattern","children":[]},{"level":3,"title":"Điểm chính của Command Pattern","slug":"điem-chinh-cua-command-pattern","link":"#điem-chinh-cua-command-pattern","children":[]}]},{"level":2,"title":"Các trường hợp sử dụng","slug":"cac-truong-hop-su-dung","link":"#cac-truong-hop-su-dung","children":[]},{"level":2,"title":"Cấu trúc","slug":"cau-truc","link":"#cau-truc","children":[{"level":3,"title":"Giải thích cấu trúc","slug":"giai-thich-cau-truc","link":"#giai-thich-cau-truc","children":[]},{"level":3,"title":"Mẫu code","slug":"mau-code","link":"#mau-code","children":[]}]},{"level":2,"title":"Pseudocode","slug":"pseudocode","link":"#pseudocode","children":[]},{"level":2,"title":"Ví dụ","slug":"vi-du","link":"#vi-du","children":[]},{"level":2,"title":"Mối quan hệ với các mẫu khác","slug":"moi-quan-he-voi-cac-mau-khac","link":"#moi-quan-he-voi-cac-mau-khac","children":[]}],"git":{"createdTime":1719590078000,"updatedTime":1719590078000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":10.68,"words":3205},"filePathRelative":"design/design-pattern/patterns/behavioral/command.md","localizedDate":"June 28, 2024","excerpt":"<h2>Ý nghĩa</h2>\\n<p><strong>Command Pattern</strong> là một mẫu thiết kế hành vi, nó chuyển đổi một yêu cầu thành một đối tượng độc lập chứa tất cả thông tin liên quan đến yêu cầu. Quá trình chuyển đổi này cho phép bạn tham số hóa các phương thức, trì hoãn việc thực thi yêu cầu hoặc đưa yêu cầu vào hàng đợi, và cung cấp khả năng hoàn tác yêu cầu.</p>","autoDesc":true}');export{h as comp,d as data};
