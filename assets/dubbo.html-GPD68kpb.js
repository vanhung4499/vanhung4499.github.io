import{_ as a,o as s,c as n,d as i}from"./app-CwNOAUqW.js";const e={},o=i(`<h1 id="tich-hop-dubbo-voi-zookeeper" tabindex="-1"><a class="header-anchor" href="#tich-hop-dubbo-voi-zookeeper"><span>Tích hợp Dubbo với ZooKeeper</span></a></h1><h2 id="zookeeper" tabindex="-1"><a class="header-anchor" href="#zookeeper"><span>ZooKeeper</span></a></h2><p>ZooKeeper có thể được sử dụng như một trung tâm đăng ký cho Dubbo.</p><p>Dubbo không thực hiện bất kỳ sửa đổi nào đối với máy chủ Zookeeper, chỉ cần cài đặt máy chủ Zookeeper gốc. Tất cả logic trung tâm đăng ký được thích ứng khi gọi khách hàng Zookeeper.</p><p><strong>Cài đặt</strong></p><p>Truy cập <a href="http://zookeeper.apache.org/releases.html" target="_blank" rel="noopener noreferrer">Trang phát hành ZooKeeper</a> và tải phiên bản phù hợp, sau đó giải nén vào máy cục bộ.</p><p><strong>Cấu hình</strong></p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>vi conf/zoo.cfg</span></span></code></pre></div><p>Nếu không cần thiết lập cụm, nội dung của <code>zoo.cfg</code> sẽ như sau <a href="https://dubbo.gitbooks.io/dubbo-admin-book/content/install/zookeeper.html#fn_2" target="_blank" rel="noopener noreferrer">2</a>:</p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>tickTime=2000</span></span>
<span class="line"><span>initLimit=10</span></span>
<span class="line"><span>syncLimit=5</span></span>
<span class="line"><span>dataDir=/home/dubbo/zookeeper-3.3.3/data</span></span>
<span class="line"><span>clientPort=2181</span></span></code></pre></div><p>Nếu cần thiết lập cụm, nội dung của <code>zoo.cfg</code> sẽ như sau <a href="https://dubbo.gitbooks.io/dubbo-admin-book/content/install/zookeeper.html#fn_3" target="_blank" rel="noopener noreferrer">3</a>:</p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>tickTime=2000</span></span>
<span class="line"><span>initLimit=10</span></span>
<span class="line"><span>syncLimit=5</span></span>
<span class="line"><span>dataDir=/home/dubbo/zookeeper-3.3.3/data</span></span>
<span class="line"><span>clientPort=2181</span></span>
<span class="line"><span>server.1=10.20.153.10:2555:3555</span></span>
<span class="line"><span>server.2=10.20.153.11:2555:3555</span></span></code></pre></div><p>Sau đó, đặt tệp <code>myid</code> trong thư mục data <a href="https://dubbo.gitbooks.io/dubbo-admin-book/content/install/zookeeper.html#fn_4" target="_blank" rel="noopener noreferrer">4</a>:</p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>mkdir data</span></span>
<span class="line"><span>vi myid</span></span></code></pre></div><p>Tệp <code>myid</code> xác định id của máy chủ, tương ứng với số sau <code>server.</code> trong <code>zoo.cfg</code>. Nội dung của máy chủ đầu tiên là 1, của máy chủ thứ hai là 2, ví dụ:</p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>1</span></span></code></pre></div><p><strong>Khởi động</strong></p><p>Trên Linux, chạy <code>bin/zkServer.sh</code>; trên Windows, chạy <code>bin/zkServer.cmd</code> để khởi động ZooKeeper.</p><p><strong>Dòng lệnh</strong></p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>telnet 127.0.0.1 2181</span></span>
<span class="line"><span>dump</span></span></code></pre></div><p>Hoặc:</p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>echo dump | nc 127.0.0.1 2181</span></span></code></pre></div><p>Sử dụng:</p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>dubbo.registry.address=zookeeper://10.20.153.10:2181?backup=10.20.153.11:2181</span></span></code></pre></div><p>Hoặc:</p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>&lt;dubbo:registry protocol=&quot;zookeeper&quot; address=&quot;10.20.153.10:2181,10.20.153.11:2181&quot; /&gt;</span></span></code></pre></div><blockquote><ol><li>ZooKeeper là một dự án con của Apache Hadoop, có độ tin cậy tương đối cao, được khuyến nghị sử dụng trong môi trường sản xuất.</li><li>Thay đổi thư mục data thành thư mục thực tế của bạn.</li><li>Thay đổi thư mục data và địa chỉ server thành thông tin máy chủ triển khai thực tế của bạn.</li><li><code>dataDir</code> trong <code>zoo.cfg</code> ở trên.</li><li><a href="http://zookeeper.apache.org/doc/r3.3.3/zookeeperAdmin.html" target="_blank" rel="noopener noreferrer">http://zookeeper.apache.org/doc/r3.3.3/zookeeperAdmin.html</a></li></ol></blockquote><h2 id="dubbo" tabindex="-1"><a class="header-anchor" href="#dubbo"><span>Dubbo</span></a></h2><p>Dubbo sử dụng cách cấu hình hoàn toàn bằng Spring, tích hợp một cách minh bạch vào ứng dụng, không có bất kỳ sự xâm nhập API nào vào ứng dụng, chỉ cần sử dụng Spring để tải cấu hình Dubbo là đủ. Dubbo dựa trên mở rộng Schema của Spring để tải.</p><p>Nếu bạn không muốn sử dụng cấu hình Spring, bạn có thể gọi thông qua <a href="https://dubbo.gitbooks.io/configuration/api.md" target="_blank" rel="noopener noreferrer">API</a>.</p><h2 id="nha-cung-cap-dich-vu" tabindex="-1"><a class="header-anchor" href="#nha-cung-cap-dich-vu"><span>Nhà cung cấp dịch vụ</span></a></h2><p>Để biết thêm chi tiết về quy trình cài đặt đầy đủ, vui lòng xem: <a href="https://dubbo.gitbooks.io/dubbo-admin-book/install/provider-demo.html" target="_blank" rel="noopener noreferrer">Cài đặt nhà cung cấp ví dụ</a></p><h3 id="đinh-nghia-interface-dich-vu" tabindex="-1"><a class="header-anchor" href="#đinh-nghia-interface-dich-vu"><span>Định nghĩa interface dịch vụ</span></a></h3><p>DemoService.java <a href="https://dubbo.gitbooks.io/dubbo-user-book/quick-start.html#fn_1" target="_blank" rel="noopener noreferrer">1</a>:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">package</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> com.alibaba.dubbo.demo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> DemoService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">    String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> sayHello</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h3 id="trien-khai-interface-tren-phia-nha-cung-cap" tabindex="-1"><a class="header-anchor" href="#trien-khai-interface-tren-phia-nha-cung-cap"><span>Triển khai interface trên phía nhà cung cấp</span></a></h3><p>DemoServiceImpl.java <a href="https://dubbo.gitbooks.io/dubbo-user-book/quick-start.html#fn_2" target="_blank" rel="noopener noreferrer">2</a>:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">package</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> com.alibaba.dubbo.demo.provider</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> com.alibaba.dubbo.demo.DemoService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> DemoServiceImpl</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> DemoService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> sayHello</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;Hello &quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> name;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h3 id="su-dung-spring-đe-khai-bao-va-tiet-lo-dich-vu" tabindex="-1"><a class="header-anchor" href="#su-dung-spring-đe-khai-bao-va-tiet-lo-dich-vu"><span>Sử dụng Spring để khai báo và tiết lộ dịch vụ</span></a></h3><p>provider.xml:</p><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;?</span><span style="color:#E06C75;--shiki-dark:#E06C75;">xml</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;1.0&quot;</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> encoding</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">?&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">beans</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> xmlns</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;http://www.springframework.org/schema/beans&quot;</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">    xmlns:xsi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">    xmlns:dubbo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;http://code.alibabatech.com/schema/dubbo&quot;</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">    xsi:schemaLocation</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;http://www.springframework.org/schema/beans        http://www.springframework.org/schema/beans/spring-beans.xsd        http://code.alibabatech.com/schema/dubbo        http://code.alibabatech.com/schema/dubbo/dubbo.xsd&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    &lt;!-- Thông tin ứng dụng nhà cung cấp, được sử dụng để tính toán các phụ thuộc --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">dubbo:application</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;hello-world-app&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    &lt;!-- Sử dụng địa chỉ đăng ký trung tâm thông qua multicast --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">dubbo:registry</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> address</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;multicast://224.5.6.7:1234&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    &lt;!-- Tiết lộ dịch vụ trên cổng 20880 bằng giao thức Dubbo --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">dubbo:protocol</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;dubbo&quot;</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> port</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;20880&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    &lt;!-- Khai báo interface dịch vụ cần tiết lộ --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">dubbo:service</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> interface</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;com.alibaba.dubbo.demo.DemoService&quot;</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> ref</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;demoService&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    &lt;!-- Triển khai dịch vụ giống như bean cục bộ --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">bean</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;demoService&quot;</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;com.alibaba.dubbo.demo.provider.DemoServiceImpl&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">beans</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Nếu sử dụng ZooKeeper làm trung tâm đăng ký, bạn có thể thay đổi dubbo:registry thành zookeeper://127.0.0.1:2181</p><h3 id="tai-cau-hinh-spring" tabindex="-1"><a class="header-anchor" href="#tai-cau-hinh-spring"><span>Tải cấu hình Spring</span></a></h3><p>Provider.java:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> org.springframework.context.support.ClassPathXmlApplicationContext</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Provider</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        ClassPathXmlApplicationContext</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> context</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> ClassPathXmlApplicationContext</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[] {</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;http://10.20.160.198/wiki/display/dubbo/provider.xml&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        context</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">start</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">read</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// Nhấn bất kỳ phím nào để thoát</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h2 id="nguoi-tieu-thu-dich-vu" tabindex="-1"><a class="header-anchor" href="#nguoi-tieu-thu-dich-vu"><span>Người tiêu thụ dịch vụ</span></a></h2><p>Để biết thêm chi tiết về quy trình cài đặt đầy đủ, vui lòng xem: <a href="https://dubbo.gitbooks.io/dubbo-admin-book/install/consumer-demo.html" target="_blank" rel="noopener noreferrer">Cài đặt người tiêu thụ mẫu</a></p><h3 id="tham-chieu-dich-vu-tu-xa-bang-cau-hinh-spring" tabindex="-1"><a class="header-anchor" href="#tham-chieu-dich-vu-tu-xa-bang-cau-hinh-spring"><span>Tham chiếu dịch vụ từ xa bằng cấu hình Spring</span></a></h3><p>consumer.xml:</p><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;?</span><span style="color:#E06C75;--shiki-dark:#E06C75;">xml</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;1.0&quot;</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> encoding</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">?&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">beans</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> xmlns</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;http://www.springframework.org/schema/beans&quot;</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">    xmlns:xsi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">    xmlns:dubbo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;http://code.alibabatech.com/schema/dubbo&quot;</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">    xsi:schemaLocation</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;http://www.springframework.org/schema/beans        http://www.springframework.org/schema/beans/spring-beans.xsd        http://code.alibabatech.com/schema/dubbo        http://code.alibabatech.com/schema/dubbo/dubbo.xsd&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    &lt;!-- Tên ứng dụng người tiêu dùng, được sử dụng để tính toán các phụ thuộc, không phải là điều kiện khớp, không nên giống nhà cung cấp --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">dubbo:application</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;consumer-of-helloworld-app&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    &lt;!-- Sử dụng địa chỉ đăng ký trung tâm thông qua multicast --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">dubbo:registry</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> address</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;multicast://224.5.6.7:1234&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    &lt;!-- Tạo proxy dịch vụ từ xa, có thể sử dụng demoService như một bean cục bộ --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">dubbo:reference</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;demoService&quot;</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> interface</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;com.alibaba.dubbo.demo.DemoService&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">beans</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Nếu sử dụng ZooKeeper làm trung tâm đăng ký, bạn có thể thay đổi dubbo:registry thành zookeeper://127.0.0.1:2181</p><h3 id="tai-cau-hinh-spring-va-goi-dich-vu-tu-xa" tabindex="-1"><a class="header-anchor" href="#tai-cau-hinh-spring-va-goi-dich-vu-tu-xa"><span>Tải cấu hình Spring và gọi dịch vụ từ xa</span></a></h3><p>Consumer.java <a href="https://dubbo.gitbooks.io/dubbo-user-book/quick-start.html#fn_3" target="_blank" rel="noopener noreferrer">3</a>:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> org.springframework.context.support.ClassPathXmlApplicationContext</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> com.alibaba.dubbo.demo.DemoService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Consumer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[] </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">args</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        ClassPathXmlApplicationContext</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> context</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> ClassPathXmlApplicationContext</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[] {</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;http://10.20.160.198/wiki/display/dubbo/consumer.xml&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        context</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">start</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        DemoService</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> demoService</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (DemoService)</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">context</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">getBean</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;demoService&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// Lấy proxy dịch vụ từ xa</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> hello</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> demoService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">sayHello</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;world&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// Gọi phương thức từ xa</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">( hello ); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// Hiển thị kết quả gọi</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><blockquote><ol><li>Interface này cần được đóng gói riêng, được chia sẻ giữa nhà cung cấp và người tiêu thụ</li><li>Ẩn triển khai của nhà cung cấp dịch vụ</li><li>Cũng có thể sử dụng IOC để tiêm vào</li></ol></blockquote><h2 id="faq" tabindex="-1"><a class="header-anchor" href="#faq"><span>FAQ</span></a></h2><p>Đề nghị sử dụng phiên bản zookeeper đăng ký trung tâm khách hàng <code>dubbo-2.3.3</code> trở lên.</p><h2 id="tai-lieu-tham-khao" tabindex="-1"><a class="header-anchor" href="#tai-lieu-tham-khao"><span>Tài liệu tham khảo</span></a></h2><p><strong>Dubbo</strong></p><p><a href="https://github.com/alibaba/dubbo" target="_blank" rel="noopener noreferrer">Github</a> | <a href="https://dubbo.gitbooks.io/dubbo-user-book/content/" target="_blank" rel="noopener noreferrer">Hướng dẫn sử dụng</a> | <a href="https://dubbo.gitbooks.io/dubbo-dev-book/content/" target="_blank" rel="noopener noreferrer">Hướng dẫn phát triển</a> | <a href="https://dubbo.gitbooks.io/dubbo-admin-book/content/" target="_blank" rel="noopener noreferrer">Hướng dẫn quản trị</a></p><p><strong>ZooKeeper</strong></p><p><a href="http://zookeeper.apache.org/" target="_blank" rel="noopener noreferrer">Trang chủ</a> | <a href="http://zookeeper.apache.org/doc/trunk/" target="_blank" rel="noopener noreferrer">Tài liệu chính thức</a></p>`,62),r=[o];function l(t,p){return s(),n("div",null,r)}const d=a(e,[["render",l],["__file","dubbo.html.vue"]]),h=JSON.parse('{"path":"/framework/spring/intergration/dubbo.html","title":"Spring Intergate Dubbo","lang":"en-US","frontmatter":{"title":"Spring Intergate Dubbo","tags":["spring","java","backend"],"categories":["spring","java","backend"],"date created":"2023-08-11T00:00:00.000Z","date modified":"2024-02-22T00:00:00.000Z","description":"Tích hợp Dubbo với ZooKeeper ZooKeeper ZooKeeper có thể được sử dụng như một trung tâm đăng ký cho Dubbo. Dubbo không thực hiện bất kỳ sửa đổi nào đối với máy chủ Zookeeper, chỉ...","head":[["meta",{"property":"og:url","content":"https://vanhung4499.github.io/framework/spring/intergration/dubbo.html"}],["meta",{"property":"og:site_name","content":"VanHung4499"}],["meta",{"property":"og:title","content":"Spring Intergate Dubbo"}],["meta",{"property":"og:description","content":"Tích hợp Dubbo với ZooKeeper ZooKeeper ZooKeeper có thể được sử dụng như một trung tâm đăng ký cho Dubbo. Dubbo không thực hiện bất kỳ sửa đổi nào đối với máy chủ Zookeeper, chỉ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-06-28T15:54:38.000Z"}],["meta",{"property":"article:author","content":"Hung Nguyen"}],["meta",{"property":"article:tag","content":"spring"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:tag","content":"backend"}],["meta",{"property":"article:modified_time","content":"2024-06-28T15:54:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Spring Intergate Dubbo\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-06-28T15:54:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hung Nguyen\\",\\"url\\":\\"https://vanhung4499.github.io\\"}]}"]]},"headers":[{"level":2,"title":"ZooKeeper","slug":"zookeeper","link":"#zookeeper","children":[]},{"level":2,"title":"Dubbo","slug":"dubbo","link":"#dubbo","children":[]},{"level":2,"title":"Nhà cung cấp dịch vụ","slug":"nha-cung-cap-dich-vu","link":"#nha-cung-cap-dich-vu","children":[{"level":3,"title":"Định nghĩa interface dịch vụ","slug":"đinh-nghia-interface-dich-vu","link":"#đinh-nghia-interface-dich-vu","children":[]},{"level":3,"title":"Triển khai interface trên phía nhà cung cấp","slug":"trien-khai-interface-tren-phia-nha-cung-cap","link":"#trien-khai-interface-tren-phia-nha-cung-cap","children":[]},{"level":3,"title":"Sử dụng Spring để khai báo và tiết lộ dịch vụ","slug":"su-dung-spring-đe-khai-bao-va-tiet-lo-dich-vu","link":"#su-dung-spring-đe-khai-bao-va-tiet-lo-dich-vu","children":[]},{"level":3,"title":"Tải cấu hình Spring","slug":"tai-cau-hinh-spring","link":"#tai-cau-hinh-spring","children":[]}]},{"level":2,"title":"Người tiêu thụ dịch vụ","slug":"nguoi-tieu-thu-dich-vu","link":"#nguoi-tieu-thu-dich-vu","children":[{"level":3,"title":"Tham chiếu dịch vụ từ xa bằng cấu hình Spring","slug":"tham-chieu-dich-vu-tu-xa-bang-cau-hinh-spring","link":"#tham-chieu-dich-vu-tu-xa-bang-cau-hinh-spring","children":[]},{"level":3,"title":"Tải cấu hình Spring và gọi dịch vụ từ xa","slug":"tai-cau-hinh-spring-va-goi-dich-vu-tu-xa","link":"#tai-cau-hinh-spring-va-goi-dich-vu-tu-xa","children":[]}]},{"level":2,"title":"FAQ","slug":"faq","link":"#faq","children":[]},{"level":2,"title":"Tài liệu tham khảo","slug":"tai-lieu-tham-khao","link":"#tai-lieu-tham-khao","children":[]}],"git":{"createdTime":1719590078000,"updatedTime":1719590078000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":4.22,"words":1266},"filePathRelative":"framework/spring/intergration/dubbo.md","localizedDate":"June 28, 2024","excerpt":"\\n<h2>ZooKeeper</h2>\\n<p>ZooKeeper có thể được sử dụng như một trung tâm đăng ký cho Dubbo.</p>\\n<p>Dubbo không thực hiện bất kỳ sửa đổi nào đối với máy chủ Zookeeper, chỉ cần cài đặt máy chủ Zookeeper gốc. Tất cả logic trung tâm đăng ký được thích ứng khi gọi khách hàng Zookeeper.</p>\\n<p><strong>Cài đặt</strong></p>","autoDesc":true}');export{d as comp,h as data};
