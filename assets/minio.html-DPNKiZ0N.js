import{_ as s,o as a,c as n,a as t}from"./app-CIGQMwlz.js";const l={};function h(e,i){return a(),n("div",null,i[0]||(i[0]=[t(`<h1 id="spring-boot-minio" tabindex="-1"><a class="header-anchor" href="#spring-boot-minio"><span>Spring Boot + MinIO</span></a></h1><blockquote><p>Bài viết này cung cấp một ví dụ mã hoàn chỉnh, có thể xem tại <a href="https://github.com/YunaiV/SpringBoot-Labs" target="_blank" rel="noopener noreferrer">https://github.com/YunaiV/SpringBoot-Labs</a> trong thư mục <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-72-minio" target="_blank" rel="noopener noreferrer">lab-72-minio</a>.</p><p>Bài viết gốc không dễ dàng, hãy cho một <a href="https://github.com/YunaiV/SpringBoot-Labs/stargazers" target="_blank" rel="noopener noreferrer">Star</a> nhé, cùng nhau cố gắng nào!</p></blockquote><h1 id="_1-gioi-thieu-ve-minio" tabindex="-1"><a class="header-anchor" href="#_1-gioi-thieu-ve-minio"><span>1. Giới thiệu về MinIO</span></a></h1><figure><img src="https://min.io/resources/img/logo.svg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>MinIO là một hệ thống lưu trữ đối tượng hiệu suất cao, tương thích với giao thức S3, được phát triển bằng Go. Nó sử dụng giấy phép nguồn mở GNU AGPL v3, với địa chỉ dự án tại <a href="https://github.com/minio/minio" target="_blank" rel="noopener noreferrer">https://github.com/minio/minio</a>, và trang chủ là <a href="https://min.io" target="_blank" rel="noopener noreferrer">https://min.io</a>.</p><p>MinIO phù hợp để lưu trữ lượng lớn dữ liệu phi cấu trúc, chẳng hạn như các tệp phổ biến như hình ảnh, âm thanh, video, dữ liệu sao lưu, container, ảnh máy ảo, v.v. Nó có thể hỗ trợ các tệp từ 1 KB đến 5 TB.</p><p>Các công ty như Alibaba, Tencent, Baidu, Huawei, China Mobile, China Unicom và nhiều doanh nghiệp khác trong nước đang sử dụng MinIO, thậm chí một số công ty thương mại còn phát triển thêm MinIO để cung cấp các sản phẩm lưu trữ đám mây thương mại.</p><blockquote><p>Câu hỏi: Tại sao ngày càng ít người sử dụng FastDFS để triển khai dịch vụ lưu trữ tệp?</p><p>Các lý do bao gồm: triển khai và vận hành phức tạp, không có tài liệu chính thức, thiếu đội ngũ duy trì lâu dài, hiệu suất kém, không cung cấp giải pháp tích hợp Docker &amp; Kubernetes, v.v.</p></blockquote><p>Trong bài viết này, tác giả sẽ hướng dẫn bạn sử dụng MinIO để tự xây dựng một dịch vụ lưu trữ tệp và tải ảnh lên MinIO trong dự án Spring Boot.</p><h1 id="_2-cai-đat-minio-server" tabindex="-1"><a class="header-anchor" href="#_2-cai-đat-minio-server"><span>2. Cài đặt MinIO Server</span></a></h1><p>Vì MinIO được viết bằng Go, nên chỉ cần một chương trình chạy, do đó việc cài đặt và triển khai MinIO rất đơn giản.</p><p>Trong tài liệu <a href="https://min.io/download" target="_blank" rel="noopener noreferrer">https://min.io/download</a>, có sáu phương thức cài đặt bao gồm Windows, Linux, MacOS, Docker, Kubernetes và Source.</p><p>Sau đây, chúng ta sẽ cài đặt MinIO, bạn có thể chọn phương thức phù hợp với mình.</p><h2 id="_2-1-cai-đat-nhanh" tabindex="-1"><a class="header-anchor" href="#_2-1-cai-đat-nhanh"><span>2.1 Cài đặt nhanh</span></a></h2><h3 id="_2-1-1-windows" tabindex="-1"><a class="header-anchor" href="#_2-1-1-windows"><span>2.1.1 Windows</span></a></h3><p>Thực hiện trong <a href="https://docs.microsoft.com/zh-cn/powershell/scripting/windows-powershell/starting-windows-powershell" target="_blank" rel="noopener noreferrer">Windows PowerShell</a>.</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">Invoke-WebRequest</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -Uri</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;https://dl.min.io/server/minio/release/windows-amd64/minio.exe&quot;</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -OutFile</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;C:</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">minio.exe&quot;</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ## Tài nguyên nước ngoài, tải chậm  </span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setx</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> MINIO_ROOT_USER</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> admin</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setx</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> MINIO_ROOT_PASSWORD</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> password</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">C:\\\\minio.exe</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> server</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> F:</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\\\</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">Data</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> --console-address</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;:9001&quot;</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ## F:\\\\Data là thư mục lưu trữ; --console-address là cổng giao diện UI</span></span></code></pre></div><h3 id="_2-1-2-linux" tabindex="-1"><a class="header-anchor" href="#_2-1-2-linux"><span>2.1.2 Linux</span></a></h3><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> https://dl.min.io/server/minio/release/linux-amd64/minio</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ## Tài nguyên nước ngoài, tải chậm  </span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">chmod</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> +x</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> minio</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">MINIO_ROOT_USER</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">admin</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> MINIO_ROOT_PASSWORD</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">password</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> ./minio</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> server</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> /Users/yunai/minio</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> --console-address</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;:9001&quot;</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ## /Users/yunai/minio là thư mục lưu trữ; --console-address là cổng giao diện UI</span></span></code></pre></div><h2 id="_2-1-3-macos" tabindex="-1"><a class="header-anchor" href="#_2-1-3-macos"><span>2.1.3 MacOS</span></a></h2><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> https://dl.min.io/server/minio/release/darwin-amd64/minio</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ## Tài nguyên nước ngoài, tải chậm  </span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">chmod</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> +x</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> minio</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">MINIO_ROOT_USER</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">admin</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> MINIO_ROOT_PASSWORD</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">password</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> ./minio</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> server</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> F:</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\D</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">ata</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> --console-address</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;:9001&quot;</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ## F:\\Data là thư mục lưu trữ; --console-address là cổng giao diện UI</span></span></code></pre></div><h3 id="_2-1-4-docker" tabindex="-1"><a class="header-anchor" href="#_2-1-4-docker"><span>2.1.4 Docker</span></a></h3><p>① Windows:</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> 9000:9000</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> 9001:9001</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -e</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;MINIO_ACCESS_KEY=admin&quot;</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -e</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;MINIO_SECRET_KEY=password&quot;</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> minio/minio</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> server</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> /data</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> --console-address</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;:9001&quot;</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ## /Users/yunai/minio là thư mục lưu trữ; --console-address là cổng giao diện UI</span></span></code></pre></div><p>② Linux hoặc MacOS:</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> 9000:9000</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> 9001:9001</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -e</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;MINIO_ACCESS_KEY=admin&quot;</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -e</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;MINIO_SECRET_KEY=password&quot;</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> minio/minio</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> server</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> /Users/yunai/minio</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> --console-address</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;:9001&quot;</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ## /Users/yunai/minio là thư mục lưu trữ; --console-address là cổng giao diện UI</span></span></code></pre></div><h2 id="_2-2-truy-cap-giao-dien-ui" tabindex="-1"><a class="header-anchor" href="#_2-2-truy-cap-giao-dien-ui"><span>2.2 Truy cập giao diện UI</span></a></h2><p>Sử dụng trình duyệt truy cập địa chỉ <a href="http://127.0.0.1:9001" target="_blank" rel="noopener noreferrer">http://127.0.0.1:9001</a> để vào giao diện UI tích hợp của MinIO.</p><p>Nhập tài khoản là admin và mật khẩu là password để đăng nhập thành công vào trang chủ.</p><figure><img src="https://static.iocoder.cn/images/Spring-Boot/2022-03-18/01.png" alt="Trang chủ UI" tabindex="0" loading="lazy"><figcaption>Trang chủ UI</figcaption></figure><h2 id="_2-3-tao-moi-bucket" tabindex="-1"><a class="header-anchor" href="#_2-3-tao-moi-bucket"><span>2.3 Tạo mới Bucket</span></a></h2><p>Nhấn vào nút [Create Bucket] để tạo một Bucket dùng cho việc tải tệp lên sau này.</p><figure><img src="https://static.iocoder.cn/images/Spring-Boot/2022-03-18/02.png" alt="Tạo Bucket" tabindex="0" loading="lazy"><figcaption>Tạo Bucket</figcaption></figure><h2 id="_2-4-them-quy-tac-truy-cap-readonly" tabindex="-1"><a class="header-anchor" href="#_2-4-them-quy-tac-truy-cap-readonly"><span>2.4 Thêm quy tắc truy cập readonly</span></a></h2><p>Theo cấu hình mặc định, truy cập vào Bucket cần được cấp quyền. Tuy nhiên, trong một số trường hợp thực tế, chúng ta thường muốn cho phép truy cập trực tiếp, và cần thêm một quy tắc truy cập readonly.</p><p>① Nhấn vào biểu tượng [Configure Bucket] ở góc phải phía trên, sau đó chọn menu [Access Rules].</p><figure><img src="https://static.iocoder.cn/images/Spring-Boot/2022-03-18/05.png" alt="Quy tắc truy cập" tabindex="0" loading="lazy"><figcaption>Quy tắc truy cập</figcaption></figure><p>② Nhấn nút [Add Access Rule] và thêm một quy tắc với Prefix là <code>/</code> và Access là <code>readonly</code>.</p><figure><img src="https://static.iocoder.cn/images/Spring-Boot/2022-03-18/06.png" alt="Thêm quy tắc truy cập" tabindex="0" loading="lazy"><figcaption>Thêm quy tắc truy cập</figcaption></figure><h2 id="_2-5-tai-tep-len" tabindex="-1"><a class="header-anchor" href="#_2-5-tai-tep-len"><span>2.5 Tải tệp lên</span></a></h2><p>Nhấn vào nút [Upload], chọn [Upload File], sau đó chọn một hình ảnh để tải lên.</p><figure><img src="https://static.iocoder.cn/images/Spring-Boot/2022-03-18/03.png" alt="Tải tệp lên" tabindex="0" loading="lazy"><figcaption>Tải tệp lên</figcaption></figure><h2 id="_2-6-truy-cap-tep" tabindex="-1"><a class="header-anchor" href="#_2-6-truy-cap-tep"><span>2.6 Truy cập tệp</span></a></h2><p>Địa chỉ truy cập tệp có định dạng <code>&lt;http://127.0.0.1:9000/{bucket}/{name}&gt;</code>, lưu ý rằng cổng là 9000.</p><p>Tệp vừa tải lên có <code>{bucket}</code> là yudaoyuanma và <code>{name}</code> là 822aebded6e6414e912534c6091771a4.jpg, vì vậy đường dẫn truy cập cuối cùng sẽ là <a href="http://127.0.0.1:9000/yudaoyuanma/822aebded6e6414e912534c6091771a4.jpg" target="_blank" rel="noopener noreferrer">http://127.0.0.1:9000/yudaoyuanma/822aebded6e6414e912534c6091771a4.jpg</a>.</p><figure><img src="https://static.iocoder.cn/images/Spring-Boot/2022-03-18/07.png" alt="Truy cập tệp" tabindex="0" loading="lazy"><figcaption>Truy cập tệp</figcaption></figure><h1 id="_3-cong-cu-dong-lenh-minio-client" tabindex="-1"><a class="header-anchor" href="#_3-cong-cu-dong-lenh-minio-client"><span>3. Công cụ dòng lệnh MinIO Client</span></a></h1><p>MinIO Client (mc) là công cụ dòng lệnh do MinIO cung cấp, được sử dụng để truy cập MinIO Server. Thiết kế các lệnh của nó rất tuyệt vời, tương tự như các lệnh Unix như ls, cat, cp, mirror, diff, find, v.v. Các lệnh chính bao gồm:</p><ul><li>ls: liệt kê các tệp và thư mục</li><li>mb: tạo một bucket hoặc thư mục</li><li>cat: hiển thị nội dung của tệp và đối tượng</li><li>pipe: chuyển hướng một STDIN đến một đối tượng, tệp hoặc STDOUT</li><li>share: tạo URL để chia sẻ</li><li>cp: sao chép tệp và đối tượng</li><li>mirror: tạo bản sao lưu cho bucket và thư mục</li><li>find: tìm tệp dựa trên tham số</li><li>diff: so sánh sự khác biệt giữa hai thư mục hoặc bucket</li><li>rm: xóa tệp và đối tượng</li><li>events: quản lý thông báo đối tượng</li><li>watch: theo dõi các sự kiện tệp và đối tượng</li><li>policy: quản lý chính sách truy cập</li><li>session: quản lý phiên lưu cho lệnh cp</li><li>config: quản lý tệp cấu hình mc</li><li>update: kiểm tra bản cập nhật phần mềm</li><li>version: hiển thị thông tin phiên bản</li></ul><p>Ví dụ, sử dụng <code>mc ls</code> để liệt kê các Bucket:</p><figure><img src="https://static.iocoder.cn/images/Spring-Boot/2022-03-18/08.png" alt="mc Ví dụ" tabindex="0" loading="lazy"><figcaption>mc Ví dụ</figcaption></figure><p>Xem xét rằng bạn có thể không quá quan tâm đến MinIO Client, nên tạm thời mình sẽ không đi sâu vào chi tiết. Nếu quan tâm, bạn có thể tham khảo các tài liệu sau:</p><ul><li>Cài đặt MinIO Client: <a href="https://min.io/download" target="_blank" rel="noopener noreferrer">https://min.io/download</a></li><li>Lệnh MinIO Client: <a href="https://docs.min.io/minio/baremetal/reference/minio-mc.html" target="_blank" rel="noopener noreferrer">https://docs.min.io/minio/baremetal/reference/minio-mc.html</a></li></ul><h1 id="_4-thuc-hanh-spring-boot" tabindex="-1"><a class="header-anchor" href="#_4-thuc-hanh-spring-boot"><span>4. Thực hành Spring Boot</span></a></h1><blockquote><p>Mã ví dụ liên quan: <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-72-minio" target="_blank" rel="noopener noreferrer">lab-72-minio</a> .</p></blockquote><p>Tiếp theo, chúng ta sẽ tạo một dự án Spring Boot mới <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-72-minio" target="_blank" rel="noopener noreferrer">lab-72-minio</a>, để thực hiện chức năng tải lên và xóa tệp.</p><h2 id="_4-1-them-phu-thuoc" tabindex="-1"><a class="header-anchor" href="#_4-1-them-phu-thuoc"><span>4.1 Thêm phụ thuộc</span></a></h2><p>Trong tệp <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-72-minio/pom.xml" target="_blank" rel="noopener noreferrer"><code>pom.xml</code></a>, thêm các phụ thuộc liên quan đến MinIO.</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;?</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">xml</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;1.0&quot;</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> encoding</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;UTF-8&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">?&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">project</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> xmlns</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">         xmlns:xsi</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">         xsi:schemaLocation</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">parent</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;spring-boot-starter-parent&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;2.6.4&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">relativePath</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">/&gt; </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&lt;!-- lookup parent from repository --&gt;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">parent</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">modelVersion</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;4.0.0&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">modelVersion</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;lab-72-minio&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependencies</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        &lt;!-- Tự động cấu hình cho Spring MVC --&gt;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;spring-boot-starter-web&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        &lt;!-- MinIO Client --&gt;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;io.minio&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;minio&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;8.2.2&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependencies</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">project</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Lưu ý, nếu bạn thêm phiên bản MinIO quá cao, chẳng hạn như <code>8.3.7</code>, sẽ có lỗi xung đột phụ thuộc:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>2022-03-19 11:29:59.954 ERROR 77692 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   :   </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>*********************************  </span></span>
<span class="line"><span>APPLICATION FAILED TO START  </span></span>
<span class="line"><span>*********************************  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>Description:  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>An attempt was made to call a method that does not exist. The attempt was made from the following location:  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    io.minio.S3Base.&lt;clinit&gt;(S3Base.java:98)  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>The following method did not exist:  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    okhttp3.RequestBody.create([BLokhttp3/MediaType;)Lokhttp3/RequestBody;  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>The calling method&#39;s class, io.minio.S3Base, was loaded from the following location:  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    jar:file:/Users/yunai/.m2/repository/io/minio/minio/8.3.7/minio-8.3.7.jar!/io/minio/S3Base.class  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>The called method&#39;s class, okhttp3.RequestBody, is available from the following locations:  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    jar:file:/Users/yunai/.m2/repository/com/squareup/okhttp3/okhttp/3.14.9/okhttp-3.14.9.jar!/okhttp3/RequestBody.class  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>The called method&#39;s class hierarchy was loaded from the following locations:  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    okhttp3.RequestBody: file:/Users/yunai/.m2/repository/com/squareup/okhttp3/okhttp/3.14.9/okhttp-3.14.9.jar</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Action:</strong> Điều chỉnh classpath của ứng dụng sao cho chứa các phiên bản tương thích của các lớp <code>io.minio.S3Base</code> và <code>okhttp3.RequestBody</code>.</p><h2 id="_4-2-cau-hinh-minio" tabindex="-1"><a class="header-anchor" href="#_4-2-cau-hinh-minio"><span>4.2 Cấu hình MinIO</span></a></h2><p>Tạo lớp cấu hình <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-72-minio/src/main/java/cn/iocoder/springboot/lab72/config/MinIOConfiguration.java" target="_blank" rel="noopener noreferrer">MinIOConfiguration</a>, tạo Bean MinioClient. Mã như sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> cn.iocoder.springboot.lab72.config</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> io.minio.MinioClient</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> org.springframework.context.annotation.*</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> MinIOConfiguration</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> MinioClient</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> minioClient</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Cấu hình Minio. Trong dự án thực tế, cấu hình này sẽ được định nghĩa trong tệp application.yml</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> endpoint</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;http://127.0.0.1:9000&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> accessKey</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;admin&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> secretKey</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;password&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Tạo client Minio</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> MinioClient</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">builder</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">endpoint</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(endpoint)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">credentials</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(accessKey, secretKey)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">build</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-3-filecontroller" tabindex="-1"><a class="header-anchor" href="#_4-3-filecontroller"><span>4.3 FileController</span></a></h2><p>Tạo lớp <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-72-minio/src/main/java/cn/iocoder/springboot/lab72/controller/FileController.java" target="_blank" rel="noopener noreferrer">FileController</a>, triển khai RESTful API để tải lên và xóa tệp. Mã như sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> cn.iocoder.springboot.lab72.controller</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> io.minio.*</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.*</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> org.springframework.web.multipart.MultipartFile</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> javax.annotation.Resource</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> java.util.UUID</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RestController</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RequestMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/file&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> FileController</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Resource</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> MinioClient</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> minioClient</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // Cấu hình Minio. Trong dự án thực tế, cấu hình này sẽ được định nghĩa trong tệp application.yml</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> endpoint </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;http://127.0.0.1:9000&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> bucket </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;yudaoyuanma&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Tải lên tệp</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">PostMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/upload&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> upload</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RequestParam</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;file&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MultipartFile</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> file</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Tải lên</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> path</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UUID</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">randomUUID</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(); </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Tên tệp, sử dụng UUID ngẫu nhiên</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        minioClient</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">putObject</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">PutObjectArgs</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">builder</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">bucket</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(bucket) </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Bucket lưu trữ</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">object</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(path) </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Tên tệp</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">stream</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">file</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getInputStream</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">file</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getSize</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Nội dung tệp</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">contentType</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">file</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getContentType</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()) </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Loại tệp</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">build</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Ghép đường dẫn</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">format</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;%s/%s/%s&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, endpoint, bucket, path);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Xóa tệp</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">DeleteMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;/delete&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> delete</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RequestParam</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;path&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> path</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        minioClient</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">removeObject</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RemoveObjectArgs</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">builder</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">bucket</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(bucket) </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Bucket lưu trữ</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">object</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(path) </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Tên tệp</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">build</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-4-minioapplication" tabindex="-1"><a class="header-anchor" href="#_4-4-minioapplication"><span>4.4 MinIOApplication</span></a></h2><p>Tạo lớp khởi động <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-72-minio/src/main/java/cn/iocoder/springboot/lab72/MinIOApplication.java" target="_blank" rel="noopener noreferrer">MinIOApplication</a>. Mã như sau:</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> cn.iocoder.springboot.lab72</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> org.springframework.boot.SpringApplication</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> org.springframework.boot.autoconfigure.SpringBootApplication</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> MinIOApplication</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        SpringApplication</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MinIOApplication</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, args);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h2 id="_4-5-kiem-thu-đon-gian" tabindex="-1"><a class="header-anchor" href="#_4-5-kiem-thu-đon-gian"><span>4.5 Kiểm thử đơn giản</span></a></h2><ol><li><p>Chạy lớp MinIOApplication để khởi động dự án Spring Boot.</p></li><li><p>Sử dụng Postman để gọi API <code>/file/upload</code> và tải lên tệp.</p></li></ol><figure><img src="https://static.iocoder.cn/images/Spring-Boot/2022-03-18/09.png" alt="Tải lên tệp" tabindex="0" loading="lazy"><figcaption>Tải lên tệp</figcaption></figure><p>Sau khi tải lên thành công, chúng ta nhận được URL để truy cập tệp, có thể dùng trình duyệt để truy cập trực tiếp.</p><figure><img src="https://static.iocoder.cn/images/Spring-Boot/2022-03-18/10.png" alt="Truy cập tệp" tabindex="0" loading="lazy"><figcaption>Truy cập tệp</figcaption></figure><p>Đồng thời trong giao diện quản lý MinIO, cũng có thể thấy tệp đã được tải lên.</p><figure><img src="https://static.iocoder.cn/images/Spring-Boot/2022-03-18/11.png" alt="Tệp" tabindex="0" loading="lazy"><figcaption>Tệp</figcaption></figure><ol start="3"><li>Sử dụng Postman để gọi API <code>/file/delete</code> và xóa tệp.</li></ol><figure><img src="https://static.iocoder.cn/images/Spring-Boot/2022-03-18/12.png" alt="Xóa tệp" tabindex="0" loading="lazy"><figcaption>Xóa tệp</figcaption></figure><h1 id="_666-tong-ket" tabindex="-1"><a class="header-anchor" href="#_666-tong-ket"><span>666. Tổng kết</span></a></h1><p>Tương lai là sự lặp lại của lịch sử, trong thế giới công nghệ cũng vậy.</p><ul><li>Năm 2009, Oracle mua lại Sun, từ đó sở hữu MySQL; cùng năm đó, cha đẻ của MySQL là Widenius rời Sun và phát hành sản phẩm MariaDB.</li><li>Năm 2011, RedHat mua lại Gluster, từ đó sở hữu GlusterFS; năm 2014, người sáng lập Gluster phát hành sản phẩm Minio.</li></ul><p>Cuối cùng, xin giới thiệu mô-đun tệp tin mà mình đã phát triển trong dự án <a href="https://github.com/YunaiV/ruoyi-vue-pro" target="_blank" rel="noopener noreferrer">https://github.com/YunaiV/ruoyi-vue-pro</a>, hỗ trợ nhiều loại bộ nhớ như S3 (MinIO, Alibaba Cloud, Tencent Cloud, Huawei Cloud, Qiniu Cloud, v.v.), đĩa cứng, cơ sở dữ liệu. Nếu bạn quan tâm, hãy xem tài liệu tại <a href="https://doc.iocoder.cn/file" target="_blank" rel="noopener noreferrer">https://doc.iocoder.cn/file</a>.</p>`,84)]))}const k=s(l,[["render",h],["__file","minio.html.vue"]]),r=JSON.parse('{"path":"/framework/spring-boot/minio.html","title":"Spring Boot + MinIO","lang":"en-US","frontmatter":{"title":"Spring Boot + MinIO","tags":["java","spring-boot"],"categories":["spring-boot"],"order":15,"description":"Spring Boot + MinIO Bài viết này cung cấp một ví dụ mã hoàn chỉnh, có thể xem tại https://github.com/YunaiV/SpringBoot-Labs trong thư mục lab-72-minio. Bài viết gốc không dễ dàn...","head":[["meta",{"property":"og:url","content":"https://vanhung4499.github.io/framework/spring-boot/minio.html"}],["meta",{"property":"og:site_name","content":"VanHung4499"}],["meta",{"property":"og:title","content":"Spring Boot + MinIO"}],["meta",{"property":"og:description","content":"Spring Boot + MinIO Bài viết này cung cấp một ví dụ mã hoàn chỉnh, có thể xem tại https://github.com/YunaiV/SpringBoot-Labs trong thư mục lab-72-minio. Bài viết gốc không dễ dàn..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://min.io/resources/img/logo.svg"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-10-02T17:20:50.000Z"}],["meta",{"property":"article:author","content":"Hung Nguyen"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:tag","content":"spring-boot"}],["meta",{"property":"article:modified_time","content":"2024-10-02T17:20:50.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Spring Boot + MinIO\\",\\"image\\":[\\"https://min.io/resources/img/logo.svg\\",\\"https://static.iocoder.cn/images/Spring-Boot/2022-03-18/01.png\\",\\"https://static.iocoder.cn/images/Spring-Boot/2022-03-18/02.png\\",\\"https://static.iocoder.cn/images/Spring-Boot/2022-03-18/05.png\\",\\"https://static.iocoder.cn/images/Spring-Boot/2022-03-18/06.png\\",\\"https://static.iocoder.cn/images/Spring-Boot/2022-03-18/03.png\\",\\"https://static.iocoder.cn/images/Spring-Boot/2022-03-18/07.png\\",\\"https://static.iocoder.cn/images/Spring-Boot/2022-03-18/08.png\\",\\"https://static.iocoder.cn/images/Spring-Boot/2022-03-18/09.png\\",\\"https://static.iocoder.cn/images/Spring-Boot/2022-03-18/10.png\\",\\"https://static.iocoder.cn/images/Spring-Boot/2022-03-18/11.png\\",\\"https://static.iocoder.cn/images/Spring-Boot/2022-03-18/12.png\\"],\\"dateModified\\":\\"2024-10-02T17:20:50.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hung Nguyen\\",\\"url\\":\\"https://vanhung4499.github.io\\"}]}"]]},"headers":[{"level":2,"title":"2.1 Cài đặt nhanh","slug":"_2-1-cai-đat-nhanh","link":"#_2-1-cai-đat-nhanh","children":[{"level":3,"title":"2.1.1 Windows","slug":"_2-1-1-windows","link":"#_2-1-1-windows","children":[]},{"level":3,"title":"2.1.2 Linux","slug":"_2-1-2-linux","link":"#_2-1-2-linux","children":[]}]},{"level":2,"title":"2.1.3 MacOS","slug":"_2-1-3-macos","link":"#_2-1-3-macos","children":[{"level":3,"title":"2.1.4 Docker","slug":"_2-1-4-docker","link":"#_2-1-4-docker","children":[]}]},{"level":2,"title":"2.2 Truy cập giao diện UI","slug":"_2-2-truy-cap-giao-dien-ui","link":"#_2-2-truy-cap-giao-dien-ui","children":[]},{"level":2,"title":"2.3 Tạo mới Bucket","slug":"_2-3-tao-moi-bucket","link":"#_2-3-tao-moi-bucket","children":[]},{"level":2,"title":"2.4 Thêm quy tắc truy cập readonly","slug":"_2-4-them-quy-tac-truy-cap-readonly","link":"#_2-4-them-quy-tac-truy-cap-readonly","children":[]},{"level":2,"title":"2.5 Tải tệp lên","slug":"_2-5-tai-tep-len","link":"#_2-5-tai-tep-len","children":[]},{"level":2,"title":"2.6 Truy cập tệp","slug":"_2-6-truy-cap-tep","link":"#_2-6-truy-cap-tep","children":[]},{"level":2,"title":"4.1 Thêm phụ thuộc","slug":"_4-1-them-phu-thuoc","link":"#_4-1-them-phu-thuoc","children":[]},{"level":2,"title":"4.2 Cấu hình MinIO","slug":"_4-2-cau-hinh-minio","link":"#_4-2-cau-hinh-minio","children":[]},{"level":2,"title":"4.3 FileController","slug":"_4-3-filecontroller","link":"#_4-3-filecontroller","children":[]},{"level":2,"title":"4.4 MinIOApplication","slug":"_4-4-minioapplication","link":"#_4-4-minioapplication","children":[]},{"level":2,"title":"4.5 Kiểm thử đơn giản","slug":"_4-5-kiem-thu-đon-gian","link":"#_4-5-kiem-thu-đon-gian","children":[]}],"git":{"createdTime":1727889650000,"updatedTime":1727889650000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":8.06,"words":2419},"filePathRelative":"framework/spring-boot/minio.md","localizedDate":"October 2, 2024","excerpt":"\\n<blockquote>\\n<p>Bài viết này cung cấp một ví dụ mã hoàn chỉnh, có thể xem tại <a href=\\"https://github.com/YunaiV/SpringBoot-Labs\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/YunaiV/SpringBoot-Labs</a> trong thư mục <a href=\\"https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-72-minio\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">lab-72-minio</a>.</p>\\n<p>Bài viết gốc không dễ dàng, hãy cho một <a href=\\"https://github.com/YunaiV/SpringBoot-Labs/stargazers\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Star</a> nhé, cùng nhau cố gắng nào!</p>\\n</blockquote>","autoDesc":true}');export{k as comp,r as data};
