import{_ as t,o as e,c as i,a}from"./app-5QVbWi7Z.js";const r={};function h(o,n){return e(),i("div",null,n[0]||(n[0]=[a(`<h1 id="spring-bean" tabindex="-1"><a class="header-anchor" href="#spring-bean"><span>Spring Bean</span></a></h1><p>Trong Spring, cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi Spring IoC container vÃ  táº¡o thÃ nh pháº§n chÃ­nh cá»§a á»©ng dá»¥ng Ä‘Æ°á»£c gá»i lÃ  Bean. <strong>Bean lÃ  Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c khá»Ÿi táº¡o, cáº¥u hÃ¬nh vÃ  quáº£n lÃ½ bá»Ÿi Spring IoC container</strong>. Bean vÃ  cÃ¡c má»‘i quan há»‡ phá»¥ thuá»™c giá»¯a chÃºng Ä‘Æ°á»£c pháº£n Ã¡nh trong cÃ¡c siÃªu dá»¯ liá»‡u cáº¥u hÃ¬nh mÃ  container sá»­ dá»¥ng.</p><h2 id="Ä‘inh-nghia-spring-bean" tabindex="-1"><a class="header-anchor" href="#Ä‘inh-nghia-spring-bean"><span>Äá»‹nh nghÄ©a Spring Bean</span></a></h2><h3 id="beandefinition" tabindex="-1"><a class="header-anchor" href="#beandefinition"><span>BeanDefinition</span></a></h3><p>Container cá»§a Spring IoC khÃ´ng thá»ƒ nháº­n dáº¡ng Ä‘Æ°á»£c siÃªu dá»¯ liá»‡u cáº¥u hÃ¬nh. Äá»ƒ lÃ m Ä‘iá»u nÃ y, cÃ¡c thÃ´ng tin cáº¥u hÃ¬nh Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i thÃ nh Ä‘á»‘i tÆ°á»£ng <code>BeanDefinition</code> mÃ  Spring cÃ³ thá»ƒ nháº­n dáº¡ng.</p><p><strong><code>BeanDefinition</code> lÃ  giao diá»‡n thÃ´ng tin cáº¥u hÃ¬nh Ä‘á»‹nh nghÄ©a Bean trong Spring</strong>, nÃ³ bao gá»“m:</p><ul><li>TÃªn lá»›p cá»§a Bean</li><li>CÃ¡c yáº¿u tá»‘ cáº¥u hÃ¬nh hÃ nh vi cá»§a Bean, cháº³ng háº¡n nhÆ° pháº¡m vi, cháº¿ Ä‘á»™ tá»± Ä‘á»™ng liÃªn káº¿t, vÃ²ng Ä‘á»i, v.v.</li><li>CÃ¡c tham chiáº¿u Bean khÃ¡c, cÃ²n Ä‘Æ°á»£c gá»i lÃ  Cá»™ng tÃ¡c viÃªn (Collaborators) hoáº·c Phá»¥ thuá»™c (Dependencies)</li><li>CÃ¡c cÃ i Ä‘áº·t cáº¥u hÃ¬nh, cháº³ng háº¡n nhÆ° thuá»™c tÃ­nh cá»§a Bean</li></ul><h4 id="thong-tin-cau-hinh-beandefinition" tabindex="-1"><a class="header-anchor" href="#thong-tin-cau-hinh-beandefinition"><span>ThÃ´ng tin cáº¥u hÃ¬nh BeanDefinition</span></a></h4><p>ThÃ´ng tin cáº¥u hÃ¬nh BeanDefinition nhÆ° sau:</p><table><thead><tr><th>Thuá»™c tÃ­nh</th><th>MÃ´ táº£</th></tr></thead><tbody><tr><td><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-class" target="_blank" rel="noopener noreferrer">Class</a></td><td>TÃªn Ä‘áº§y Ä‘á»§ cá»§a lá»›p, pháº£i lÃ  lá»›p cá»¥ thá»ƒ, khÃ´ng pháº£i lÃ  lá»›p trá»«u tÆ°á»£ng hoáº·c giao diá»‡n</td></tr><tr><td><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-beanname" target="_blank" rel="noopener noreferrer">Name</a></td><td>TÃªn hoáº·c ID cá»§a Bean</td></tr><tr><td><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes" target="_blank" rel="noopener noreferrer">Scope</a></td><td>Pháº¡m vi cá»§a Bean (vÃ­ dá»¥: <code>singleton</code>, <code>prototype</code>, v.v.)</td></tr><tr><td><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators" target="_blank" rel="noopener noreferrer">Constructor arguments</a></td><td>CÃ¡c Ä‘á»‘i sá»‘ cá»§a Constructor cá»§a Bean (dÃ¹ng cho Dependency Injection)</td></tr><tr><td><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators" target="_blank" rel="noopener noreferrer">Properties</a></td><td>CÃ¡c thuá»™c tÃ­nh cá»§a Bean (dÃ¹ng cho Dependency Injection)</td></tr><tr><td><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-autowire" target="_blank" rel="noopener noreferrer">Autowiring mode</a></td><td>Cháº¿ Ä‘á»™ tá»± Ä‘á»™ng liÃªn káº¿t cá»§a Bean (vÃ­ dá»¥: theo tÃªn byName)</td></tr><tr><td><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-lazy-init" target="_blank" rel="noopener noreferrer">Lazy initialization mode</a></td><td>Cháº¿ Ä‘á»™ khá»Ÿi táº¡o lÆ°á»i (khá»Ÿi táº¡o hoáº·c khÃ´ng khá»Ÿi táº¡o)</td></tr><tr><td><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-lifecycle-initializingbean" target="_blank" rel="noopener noreferrer">Initialization method</a></td><td>TÃªn phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o Bean</td></tr><tr><td><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-lifecycle-disposablebean" target="_blank" rel="noopener noreferrer">Destruction method</a></td><td>TÃªn phÆ°Æ¡ng thá»©c há»§y Bean</td></tr></tbody></table><h4 id="xay-dung-beandefinition" tabindex="-1"><a class="header-anchor" href="#xay-dung-beandefinition"><span>XÃ¢y dá»±ng BeanDefinition</span></a></h4><p>CÃ³ hai cÃ¡ch Ä‘á»ƒ xÃ¢y dá»±ng BeanDefinition:</p><ul><li>Sá»­ dá»¥ng <code>BeanDefinitionBuilder</code></li><li>Sá»­ dá»¥ng <code>AbstractBeanDefinition</code> vÃ  cÃ¡c lá»›p con cá»§a nÃ³</li></ul><blockquote><p>ğŸ’» VÃ­ dá»¥ mÃ£ nguá»“n BeanDefinition: <a href="https://github.com/dunwu/spring-tutorial/blob/master/codes/core/spring-core-ioc/src/test/java/io/github/dunwu/spring/core/bean/BeanDefinitionTests.java" target="_blank" rel="noopener noreferrer">BeanDefinitionTests</a></p></blockquote><h3 id="Ä‘at-ten-cho-spring-bean" tabindex="-1"><a class="header-anchor" href="#Ä‘at-ten-cho-spring-bean"><span>Äáº·t tÃªn cho Spring Bean</span></a></h3><h4 id="quy-tac-Ä‘at-ten-spring-bean" tabindex="-1"><a class="header-anchor" href="#quy-tac-Ä‘at-ten-spring-bean"><span>Quy táº¯c Ä‘áº·t tÃªn Spring Bean</span></a></h4><p>Má»—i Bean cÃ³ má»™t hoáº·c nhiá»u Ä‘á»‹nh danh (identifiers), cÃ¡c Ä‘á»‹nh danh nÃ y pháº£i lÃ  duy nháº¥t trong container chá»©a Bean. ThÃ´ng thÆ°á»ng, má»™t Bean chá»‰ cÃ³ má»™t Ä‘á»‹nh danh, náº¿u cáº§n thÃªm, cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c bÃ­ danh (Alias) Ä‘á»ƒ má»Ÿ rá»™ng.</p><p>Trong cáº¥u hÃ¬nh dá»±a trÃªn XML, báº¡n <strong>cÃ³ thá»ƒ sá»­ dá»¥ng thuá»™c tÃ­nh <code>id</code>, <code>name</code> hoáº·c cáº£ hai Ä‘á»ƒ chá»‰ Ä‘á»‹nh Ä‘á»‹nh danh cho Bean</strong>. ThÃ´ng thÆ°á»ng, Ä‘á»‹nh danh cá»§a Bean bao gá»“m cÃ¡c chá»¯ cÃ¡i vÃ  cho phÃ©p cÃ¡c kÃ½ tá»± Ä‘áº·c biá»‡t. Náº¿u muá»‘n giá»›i thiá»‡u cÃ¡c bÃ­ danh cho Bean, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng dáº¥u pháº©y (&quot;,&quot;) hoáº·c dáº¥u cháº¥m pháº©y (&quot;;&quot;) Ä‘á»ƒ phÃ¢n tÃ¡ch chÃºng trong thuá»™c tÃ­nh <code>name</code>.</p><p>Trong Spring, <strong>viá»‡c chá»‰ Ä‘á»‹nh thuá»™c tÃ­nh <code>id</code> vÃ  <code>name</code> cho Bean khÃ´ng báº¯t buá»™c</strong>. Náº¿u khÃ´ng chá»‰ Ä‘á»‹nh, Spring sáº½ tá»± Ä‘á»™ng gÃ¡n má»™t tÃªn duy nháº¥t cho Bean. Máº·c dÃ¹ tÃªn cá»§a Bean khÃ´ng bá»‹ giá»›i háº¡n, nhÆ°ng <strong>Ä‘á» xuáº¥t sá»­ dá»¥ng kiá»ƒu Ä‘áº·t tÃªn CamelCase cho Bean</strong>.</p><h4 id="trinh-tao-ten-bean-cua-spring" tabindex="-1"><a class="header-anchor" href="#trinh-tao-ten-bean-cua-spring"><span>TrÃ¬nh táº¡o tÃªn Bean cá»§a Spring</span></a></h4><p>Spring cung cáº¥p hai trÃ¬nh táº¡o tÃªn Bean:</p><ul><li><code>DefaultBeanNameGenerator</code>: TrÃ¬nh táº¡o tÃªn Bean máº·c Ä‘á»‹nh vÃ  chung chung.</li><li><code>AnnotationBeanNameGenerator</code>: TrÃ¬nh táº¡o tÃªn Bean dá»±a trÃªn quÃ©t chÃº thÃ­ch.</li></ul><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> BeanNameGenerator</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">   String</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> generateBeanName</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">BeanDefinition</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> definition</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">BeanDefinitionRegistry</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> registry</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h4 id="bi-danh-alias-spring-bean" tabindex="-1"><a class="header-anchor" href="#bi-danh-alias-spring-bean"><span>BÃ­ danh (Alias) Spring Bean</span></a></h4><p>Spring há»— trá»£ sá»­ dá»¥ng thuá»™c tÃ­nh <code>&lt;alias&gt;</code> Ä‘á»ƒ Ä‘áº·t bÃ­ danh cho Bean.</p><p>TÃ¡c dá»¥ng cá»§a bÃ­ danh Bean (Alias):</p><ul><li>TÃ¡i sá»­ dá»¥ng láº¡i <code>BeanDefinition</code> hiá»‡n cÃ³</li><li>Cung cáº¥p cÃ¡c tÃªn phÃ¹ há»£p vá»›i tá»«ng tÃ¬nh huá»‘ng, vÃ­ dá»¥: <ul><li><code>&lt;alias name=&quot;myApp-dataSource&quot; alias=&quot;subsystemA-dataSource&quot;/&gt;</code></li><li><code>&lt;alias name=&quot;myApp-dataSource&quot; alias=&quot;subsystemB-dataSource&quot;/&gt;</code></li></ul></li></ul><div class="language-xml" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">bean</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> id</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;user&quot;</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> class</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;io.github.dunwu.spring.core.bean.entity.person.User&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  &lt;!-- properties omitted --&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">bean</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">alias</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> name</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;user&quot;</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> alias</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;aliasUser&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> /&gt;</span></span></code></pre></div><h2 id="vong-Ä‘oi-cua-spring-bean" tabindex="-1"><a class="header-anchor" href="#vong-Ä‘oi-cua-spring-bean"><span>VÃ²ng Ä‘á»i cá»§a Spring Bean</span></a></h2><figure><img src="https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230725202926.png" alt="bean-lifecycle" tabindex="0" loading="lazy"><figcaption>bean-lifecycle</figcaption></figure><ol><li><p>Spring táº¡o ra má»™t Bean (tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i viá»‡c khá»Ÿi táº¡o má»™t Ä‘á»‘i tÆ°á»£ng má»›i).</p></li><li><p>Spring tiÃªm giÃ¡ trá»‹ vÃ  tham chiáº¿u vÃ o cÃ¡c thuá»™c tÃ­nh tÆ°Æ¡ng á»©ng cá»§a Bean.</p></li><li><p>Náº¿u Bean triá»ƒn khaiÂ <code>BeanNameAware</code>, Spring sáº½ truyá»n ID cá»§a Bean vÃ o phÆ°Æ¡ng thá»©cÂ <code>setBeanName</code>.</p></li><li><p>Náº¿u Bean triá»ƒn khaiÂ <code>BeanFactoryAware</code>, Spring sáº½ gá»i phÆ°Æ¡ng thá»©cÂ <code>setBeanFactory</code>Â vÃ  chuyá»ƒn tham chiáº¿u Ä‘áº¿n Ä‘á»‘i tÆ°á»£ngÂ <code>BeanFactory</code>Â cá»§a container.</p></li><li><p>Náº¿u Bean triá»ƒn khaiÂ <code>ApplicationContextAware</code>, Spring sáº½ gá»i phÆ°Æ¡ng thá»©cÂ <code>setApplicationContext</code>Â vÃ  chuyá»ƒn tham chiáº¿u Ä‘áº¿n Ä‘á»‘i tÆ°á»£ngÂ <code>ApplicationContext</code>Â cá»§a container.</p></li><li><p>Náº¿u Bean triá»ƒn khaiÂ <code>BeanPostProcessor</code>, Spring sáº½ gá»i phÆ°Æ¡ng thá»©cÂ <code>postProcessBeforeInitialization</code>Â Ä‘á»ƒ thá»±c hiá»‡n báº¥t ká»³ xá»­ lÃ½ nÃ o trÆ°á»›c khi Bean Ä‘Æ°á»£c khá»Ÿi táº¡o.</p></li><li><p>Náº¿u Bean triá»ƒn khaiÂ <code>InitializingBean</code>, Spring sáº½ gá»i phÆ°Æ¡ng thá»©cÂ <code>afterPropertiesSet</code>Â sau khi táº¥t cáº£ cÃ¡c thuá»™c tÃ­nh cá»§a Bean Ä‘Æ°á»£c thiáº¿t láº­p.</p></li><li><p>Náº¿u Bean triá»ƒn khaiÂ <code>BeanPostProcessor</code>, Spring sáº½ gá»i phÆ°Æ¡ng thá»©cÂ <code>postProcessAfterInitialization</code>Â Ä‘á»ƒ thá»±c hiá»‡n báº¥t ká»³ xá»­ lÃ½ nÃ o sau khi Bean Ä‘Æ°á»£c khá»Ÿi táº¡o.</p></li><li><p>Sau cÃ¡c bÆ°á»›c trÃªn, Bean sáº½ tá»“n táº¡i trong context vÃ  sáºµn sÃ ng sá»­ dá»¥ng cho á»©ng dá»¥ng cho Ä‘áº¿n khi context bá»‹ há»§y.</p></li><li><p>Náº¿u Bean triá»ƒn khaiÂ <code>DisposableBean</code>, Spring sáº½ gá»i phÆ°Æ¡ng thá»©cÂ <code>destroy</code>Â trÆ°á»›c khi Bean bá»‹ há»§y.</p></li></ol><h2 id="Ä‘ang-ky-spring-bean" tabindex="-1"><a class="header-anchor" href="#Ä‘ang-ky-spring-bean"><span>ÄÄƒng kÃ½ Spring Bean</span></a></h2><p>ÄÄƒng kÃ½ Spring Bean thá»±c cháº¥t lÃ  Ä‘Äƒng kÃ½Â <code>BeanDefinition</code>Â vÃ o container IoC.</p><h3 id="thong-tin-cau-hinh-xml" tabindex="-1"><a class="header-anchor" href="#thong-tin-cau-hinh-xml"><span>ThÃ´ng tin cáº¥u hÃ¬nh XML</span></a></h3><p>ÄÃ¢y lÃ  cÃ¡ch cáº¥u hÃ¬nh truyá»n thá»‘ng cá»§a Spring. ThÃ´ng tin cáº¥u hÃ¬nh Ä‘Æ°á»£c Ä‘áº·t trong tháº»Â <code>&lt;bean&gt;</code>.</p><p>NhÆ°á»£c Ä‘iá»ƒm lÃ  khi cÃ³ quÃ¡ nhiá»u JavaBean, tá»‡p cáº¥u hÃ¬nh sáº½ trá»Ÿ nÃªn rá»‘i máº¯t.</p><h3 id="thong-tin-cau-hinh-bang-annotation" tabindex="-1"><a class="header-anchor" href="#thong-tin-cau-hinh-bang-annotation"><span>ThÃ´ng tin cáº¥u hÃ¬nh báº±ng Annotation</span></a></h3><p>Sá»­ dá»¥ng cÃ¡c Annotation nhÆ°Â <code>@Bean</code>,Â <code>@Component</code>,Â <code>@Import</code>Â Ä‘á»ƒ Ä‘Äƒng kÃ½ Spring Bean.</p><h3 id="thong-tin-cau-hinh-bang-java-api" tabindex="-1"><a class="header-anchor" href="#thong-tin-cau-hinh-bang-java-api"><span>ThÃ´ng tin cáº¥u hÃ¬nh báº±ng Java API</span></a></h3><ul><li>ÄÄƒng kÃ½ theo tÃªn: \`BeanDefinitionRegistry#registerBeanDefinition(String,Bean</li></ul><h2 id="spring-bean-instantiation" tabindex="-1"><a class="header-anchor" href="#spring-bean-instantiation"><span>Spring Bean Instantiation</span></a></h2><p>CÃ¡ch táº¡o instance cá»§a Spring Bean:</p><ul><li>CÃ¡ch thÃ´ng thÆ°á»ng <ul><li>Sá»­ dá»¥ng constructor (thÃ´ng qua cáº¥u hÃ¬nh XML, Java Annotation vÃ  Java API)</li><li>Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c tÄ©nh (thÃ´ng qua cáº¥u hÃ¬nh XML, Java Annotation vÃ  Java API)</li><li>Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c táº¡o Bean cá»§a Bean Factory (thÃ´ng qua cáº¥u hÃ¬nh XML, Java Annotation vÃ  Java API)</li><li>Sá»­ dá»¥ng <code>FactoryBean</code> (thÃ´ng qua cáº¥u hÃ¬nh XML, Java Annotation vÃ  Java API)</li></ul></li><li>CÃ¡ch Ä‘áº·c biá»‡t <ul><li>Sá»­ dá»¥ng <code>ServiceLoaderFactoryBean</code> (thÃ´ng qua cáº¥u hÃ¬nh XML, Java Annotation vÃ  Java API)</li><li>Sá»­ dá»¥ng <code>AutowireCapableBeanFactory#createBean(java.lang.Class, int, boolean)</code></li><li>Sá»­ dá»¥ng <code>BeanDefinitionRegistry#registerBeanDefinition(String,BeanDefinition)</code></li></ul></li></ul><h2 id="spring-bean-initialization-and-destruction" tabindex="-1"><a class="header-anchor" href="#spring-bean-initialization-and-destruction"><span>Spring Bean Initialization and Destruction</span></a></h2><p>CÃ¡ch khá»Ÿi táº¡o vÃ  há»§y Bean trong Spring cÃ³ cÃ¡c phÆ°Æ¡ng thá»©c sau:</p><ol><li>Sá»­ dá»¥ng cÃ¡c Annotation <code>@PostConstruct</code> vÃ  <code>@PreDestroy</code> Ä‘á»ƒ chá»‰ Ä‘á»‹nh phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o vÃ  há»§y Bean tÆ°Æ¡ng á»©ng.</li><li>Implement interface <code>InitializingBean</code> vÃ  sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>afterPropertiesSet()</code> Ä‘á»ƒ viáº¿t phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o; Implement interface <code>DisposableBean</code> vÃ  sá»­ dá»¥ng phÆ°Æ¡ng thá»©c <code>destroy()</code> Ä‘á»ƒ viáº¿t phÆ°Æ¡ng thá»©c há»§y.</li><li>Tá»± Ä‘á»‹nh nghÄ©a phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o vÃ  há»§y <ul><li>Cáº¥u hÃ¬nh XML: <code>&lt;bean init-method=&quot;init&quot; destroy=&quot;destroy&quot; â€¦ /&gt;</code></li><li>Java Annotation: <code>@Bean(initMethod = &quot;init&quot;, destroyMethod = &quot;destroy&quot;)</code></li><li>Java API: <code>AbstractBeanDefinition#setInitMethodName(String)</code> vÃ  <code>AbstractBeanDefinition#setDestroyMethodName(String)</code> Ä‘á»ƒ Ä‘á»‹nh nghÄ©a phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o vÃ  há»§y</li></ul></li></ol><p>LÆ°u Ã½: Náº¿u cÃ¹ng tá»“n táº¡i, thá»© tá»± thá»±c hiá»‡n sáº½ tuÃ¢n theo thá»© tá»± Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a.</p><p>Bean Lazy Initialization</p><ul><li>Cáº¥u hÃ¬nh XML: <code>&lt;bean lazy-init=&quot;true&quot; â€¦ /&gt;</code></li><li>Annotation: <code>@Lazy</code></li></ul><p>Spring cung cáº¥p interface <code>BeanPostProcessor</code> vá»›i hai phÆ°Æ¡ng thá»©c <code>postProcessBeforeInitialization</code> vÃ  <code>postProcessAfterInitialization</code>. <code>postProcessBeforeInitialization</code> Ä‘Æ°á»£c gá»i trÆ°á»›c khi phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o cá»§a Bean Ä‘Æ°á»£c gá»i, <code>postProcessAfterInitialization</code> Ä‘Æ°á»£c gá»i sau khi phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o cá»§a Bean Ä‘Æ°á»£c gá»i. Cáº£ hai phÆ°Æ¡ng thá»©c Ä‘á»u cÃ³ hai tham sá»‘:</p><ul><li><code>bean</code>: Äá»‘i tÆ°á»£ng Bean hiá»‡n táº¡i;</li><li><code>beanName</code>: TÃªn cá»§a Bean trong container.</li></ul><h2 id="spring-bean-garbage-collection" tabindex="-1"><a class="header-anchor" href="#spring-bean-garbage-collection"><span>Spring Bean Garbage Collection</span></a></h2><p>QuÃ¡ trÃ¬nh thu gom rÃ¡c cá»§a Spring Bean:</p><ol><li>ÄÃ³ng Spring container (ApplicationContext).</li><li>Thá»±c hiá»‡n GC (Garbage Collection).</li><li>Gá»i láº¡i phÆ°Æ¡ng thá»©c <code>finalize()</code> cá»§a Bean.</li></ol><h2 id="pham-vi-cua-spring-bean" tabindex="-1"><a class="header-anchor" href="#pham-vi-cua-spring-bean"><span>Pháº¡m vi cá»§a Spring Bean</span></a></h2><table><thead><tr><th style="text-align:left;">Scope</th><th style="text-align:left;">MÃ´ táº£</th></tr></thead><tbody><tr><td style="text-align:left;"><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-singleton" target="_blank" rel="noopener noreferrer">singleton</a></td><td style="text-align:left;">(Máº·c Ä‘á»‹nh) Pháº¡m vi má»™t Ä‘á»‹nh nghÄ©a Bean Ä‘áº¿n má»™t instance duy nháº¥t cho má»—i container Spring IoC.</td></tr><tr><td style="text-align:left;"><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-prototype" target="_blank" rel="noopener noreferrer">prototype</a></td><td style="text-align:left;">Pháº¡m vi má»™t Ä‘á»‹nh nghÄ©a Bean Ä‘áº¿n báº¥t ká»³ sá»‘ lÆ°á»£ng instance nÃ o.</td></tr><tr><td style="text-align:left;"><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-request" target="_blank" rel="noopener noreferrer">request</a></td><td style="text-align:left;">Pháº¡m vi má»™t Ä‘á»‹nh nghÄ©a Bean Ä‘áº¿n vÃ²ng Ä‘á»i cá»§a má»™t HTTP request duy nháº¥t. Tá»©c lÃ , má»—i HTTP request sáº½ cÃ³ má»™t instance riÃªng cá»§a Bean Ä‘Æ°á»£c táº¡o ra tá»« má»™t Ä‘á»‹nh nghÄ©a Bean duy nháº¥t. Chá»‰ há»£p lá»‡ trong ngá»¯ cáº£nh cá»§a má»™t Spring <code>ApplicationContext</code> há»— trá»£ web.</td></tr><tr><td style="text-align:left;"><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-session" target="_blank" rel="noopener noreferrer">session</a></td><td style="text-align:left;">Pháº¡m vi má»™t Ä‘á»‹nh nghÄ©a Bean Ä‘áº¿n vÃ²ng Ä‘á»i cá»§a má»™t HTTP <code>Session</code>. Chá»‰ há»£p lá»‡ trong ngá»¯ cáº£nh cá»§a má»™t Spring <code>ApplicationContext</code> há»— trá»£ web.</td></tr><tr><td style="text-align:left;"><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-application" target="_blank" rel="noopener noreferrer">application</a></td><td style="text-align:left;">Pháº¡m vi má»™t Ä‘á»‹nh nghÄ©a Bean Ä‘áº¿n vÃ²ng Ä‘á»i cá»§a má»™t <code>ServletContext</code>. Chá»‰ há»£p lá»‡ trong ngá»¯ cáº£nh cá»§a má»™t Spring <code>ApplicationContext</code> há»— trá»£ web.</td></tr><tr><td style="text-align:left;"><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#websocket-stomp-websocket-scope" target="_blank" rel="noopener noreferrer">websocket</a></td><td style="text-align:left;">Pháº¡m vi má»™t Ä‘á»‹nh nghÄ©a Bean Ä‘áº¿n vÃ²ng Ä‘á»i cá»§a má»™t <code>WebSocket</code>. Chá»‰ há»£p lá»‡ trong ngá»¯ cáº£nh cá»§a má»™t Spring <code>ApplicationContext</code> há»— trá»£ web.</td></tr></tbody></table>`,56)]))}const s=t(r,[["render",h],["__file","bean.html.vue"]]),l=JSON.parse('{"path":"/framework/spring/core/bean.html","title":"Spring Bean","lang":"en-US","frontmatter":{"title":"Spring Bean","tags":["spring","java","backend"],"categories":["spring","java","backend"],"date created":"2023-07-26T00:00:00.000Z","date modified":"2024-02-21T00:00:00.000Z","order":1,"description":"Spring Bean Trong Spring, cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi Spring IoC container vÃ  táº¡o thÃ nh pháº§n chÃ­nh cá»§a á»©ng dá»¥ng Ä‘Æ°á»£c gá»i lÃ  Bean. Bean lÃ  Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c khá»Ÿi táº¡o, cáº¥u hÃ¬nh vÃ ...","head":[["meta",{"property":"og:url","content":"https://vanhung4499.github.io/framework/spring/core/bean.html"}],["meta",{"property":"og:site_name","content":"VanHung4499"}],["meta",{"property":"og:title","content":"Spring Bean"}],["meta",{"property":"og:description","content":"Spring Bean Trong Spring, cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi Spring IoC container vÃ  táº¡o thÃ nh pháº§n chÃ­nh cá»§a á»©ng dá»¥ng Ä‘Æ°á»£c gá»i lÃ  Bean. Bean lÃ  Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c khá»Ÿi táº¡o, cáº¥u hÃ¬nh vÃ ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230725202926.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-06-28T15:54:38.000Z"}],["meta",{"property":"article:author","content":"Hung Nguyen"}],["meta",{"property":"article:tag","content":"spring"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:tag","content":"backend"}],["meta",{"property":"article:modified_time","content":"2024-06-28T15:54:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Spring Bean\\",\\"image\\":[\\"https://raw.githubusercontent.com/vanhung4499/images/master/snap/20230725202926.png\\"],\\"dateModified\\":\\"2024-06-28T15:54:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hung Nguyen\\",\\"url\\":\\"https://vanhung4499.github.io\\"}]}"]]},"headers":[{"level":2,"title":"Äá»‹nh nghÄ©a Spring Bean","slug":"Ä‘inh-nghia-spring-bean","link":"#Ä‘inh-nghia-spring-bean","children":[{"level":3,"title":"BeanDefinition","slug":"beandefinition","link":"#beandefinition","children":[]},{"level":3,"title":"Äáº·t tÃªn cho Spring Bean","slug":"Ä‘at-ten-cho-spring-bean","link":"#Ä‘at-ten-cho-spring-bean","children":[]}]},{"level":2,"title":"VÃ²ng Ä‘á»i cá»§a Spring Bean","slug":"vong-Ä‘oi-cua-spring-bean","link":"#vong-Ä‘oi-cua-spring-bean","children":[]},{"level":2,"title":"ÄÄƒng kÃ½ Spring Bean","slug":"Ä‘ang-ky-spring-bean","link":"#Ä‘ang-ky-spring-bean","children":[{"level":3,"title":"ThÃ´ng tin cáº¥u hÃ¬nh XML","slug":"thong-tin-cau-hinh-xml","link":"#thong-tin-cau-hinh-xml","children":[]},{"level":3,"title":"ThÃ´ng tin cáº¥u hÃ¬nh báº±ng Annotation","slug":"thong-tin-cau-hinh-bang-annotation","link":"#thong-tin-cau-hinh-bang-annotation","children":[]},{"level":3,"title":"ThÃ´ng tin cáº¥u hÃ¬nh báº±ng Java API","slug":"thong-tin-cau-hinh-bang-java-api","link":"#thong-tin-cau-hinh-bang-java-api","children":[]}]},{"level":2,"title":"Spring Bean Instantiation","slug":"spring-bean-instantiation","link":"#spring-bean-instantiation","children":[]},{"level":2,"title":"Spring Bean Initialization and Destruction","slug":"spring-bean-initialization-and-destruction","link":"#spring-bean-initialization-and-destruction","children":[]},{"level":2,"title":"Spring Bean Garbage Collection","slug":"spring-bean-garbage-collection","link":"#spring-bean-garbage-collection","children":[]},{"level":2,"title":"Pháº¡m vi cá»§a Spring Bean","slug":"pham-vi-cua-spring-bean","link":"#pham-vi-cua-spring-bean","children":[]}],"git":{"createdTime":1719590078000,"updatedTime":1719590078000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":6.85,"words":2054},"filePathRelative":"framework/spring/core/bean.md","localizedDate":"June 28, 2024","excerpt":"\\n<p>Trong Spring, cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi Spring IoC container vÃ  táº¡o thÃ nh pháº§n chÃ­nh cá»§a á»©ng dá»¥ng Ä‘Æ°á»£c gá»i lÃ  Bean. <strong>Bean lÃ  Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c khá»Ÿi táº¡o, cáº¥u hÃ¬nh vÃ  quáº£n lÃ½ bá»Ÿi Spring IoC container</strong>. Bean vÃ  cÃ¡c má»‘i quan há»‡ phá»¥ thuá»™c giá»¯a chÃºng Ä‘Æ°á»£c pháº£n Ã¡nh trong cÃ¡c siÃªu dá»¯ liá»‡u cáº¥u hÃ¬nh mÃ  container sá»­ dá»¥ng.</p>","autoDesc":true}');export{s as comp,l as data};
