import{_ as a,o as n,c as i,a as s}from"./app-5QVbWi7Z.js";const l={};function t(p,e){return n(),i("div",null,e[0]||(e[0]=[s('<h1 id="【营销】满减送" tabindex="-1"><a class="header-anchor" href="#【营销】满减送"><span>【营销】满减送</span></a></h1><p>友情提示：满减送的“减”已经实现，“送”暂未实现，预计 2024 年 Q2 完成。</p><p>满减送活动，主要由 <code>yudao-module-promotion-biz</code> 后端模块的 <code>reward</code> 实现，支持减金额、减运费、送积分、送优惠券等等。</p><h2 id="_1-表结构" tabindex="-1"><a class="header-anchor" href="#_1-表结构"><span><a href="#_1-%E8%A1%A8%E7%BB%93%E6%9E%84">#</a> 1. 表结构</span></a></h2><blockquote><p>省略 creator/create_time/updater/update_time/deleted/tenant_id 等通用字段</p></blockquote><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>CREATE TABLE `promotion_reward_activity` (</span></span>\n<span class="line"><span>  `id` bigint NOT NULL AUTO_INCREMENT COMMENT &#39;活动编号&#39;,</span></span>\n<span class="line"><span>  `name` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT &#39;&#39; COMMENT &#39;活动标题&#39;,</span></span>\n<span class="line"><span>  `start_time` datetime NOT NULL COMMENT &#39;开始时间&#39;,</span></span>\n<span class="line"><span>  `end_time` datetime NOT NULL COMMENT &#39;结束时间&#39;,</span></span>\n<span class="line"><span>  `remark` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT &#39;&#39; COMMENT &#39;备注&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `status` tinyint NOT NULL DEFAULT &#39;-1&#39; COMMENT &#39;活动状态&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `product_scope` tinyint NOT NULL COMMENT &#39;商品范围&#39;,</span></span>\n<span class="line"><span>  `product_spu_ids` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT &#39;商品 SPU 编号的数组&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `condition_type` tinyint NOT NULL DEFAULT &#39;-1&#39; COMMENT &#39;条件类型&#39;,</span></span>\n<span class="line"><span>  `rules` varchar(2000) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT &#39;优惠规则的数组&#39;,</span></span>\n<span class="line"><span>  PRIMARY KEY (`id`) USING BTREE</span></span>\n<span class="line"><span>) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT=&#39;满减送活动&#39;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>① <code>status</code> 字段：活动状态，由 CommonStatusEnum 枚举，只有开启、禁用两个状态。禁用时，无法参与满减送活动。</p><p>② <code>product_scope</code> 字段：商品范围，商品范围，由 PromotionProductScopeEnum 枚举，分成 3 种情况：</p><ul><li>1、通用券：全部商品</li><li>2、商品券：指定商品，由 <code>product_spu_ids</code> 字段指定商品编号的数组</li><li>3、品类券：指定品类，由 <code>product_spu_ids</code> 字段指定品类编号的数组</li></ul><p>③ <code>condition_type</code> 字段：条件类型，由 PromotionConditionTypeEnum 枚举，分成 2 种情况：满 N 元、满 N 件。</p><p><code>rules</code> 字段：优惠规则的数组，支持多层级，可配置优惠金额、包邮、赠送积分、优惠劵。</p><h2 id="_2-管理后台" tabindex="-1"><a class="header-anchor" href="#_2-管理后台"><span><a href="#_2-%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0">#</a> 2. 管理后台</span></a></h2><p>对应 [商城系统 -&gt; 营销中心 -&gt; 优惠活动 -&gt; 满减送] 菜单，对应 <code>yudao-ui-admin-vue3</code> 项目的 <code>src/views/mall/promotion/rewardActivity</code> 目录。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/商城手册/满减送活动/管理后台.png" alt="管理后台" tabindex="0" loading="lazy"><figcaption>管理后台</figcaption></figure><h2 id="_3-移动端" tabindex="-1"><a class="header-anchor" href="#_3-移动端"><span><a href="#_3-%E7%A7%BB%E5%8A%A8%E7%AB%AF">#</a> 3. 移动端</span></a></h2><h3 id="_3-1-商品详情" tabindex="-1"><a class="header-anchor" href="#_3-1-商品详情"><span><a href="#_3-1-%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85">#</a> 3.1 商品详情</span></a></h3><p>在 uni-app 商品详情页，会展示该商品参与的满减送活动。点击后，会弹出满减送的优惠明细，如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/商城手册/满减送活动/商品详情.png" alt="商品详情" tabindex="0" loading="lazy"><figcaption>商品详情</figcaption></figure><p>弹窗由 <code>yudao-mall-uniapp</code> 的 <code>sheep/components/s-activity-pop/s-activity-pop.vue</code> 组件实现。</p><h3 id="_3-2-活动详情" tabindex="-1"><a class="header-anchor" href="#_3-2-活动详情"><span><a href="#_3-2-%E6%B4%BB%E5%8A%A8%E8%AF%A6%E6%83%85">#</a> 3.2 活动详情</span></a></h3><p>继续点击上图的满减送活动，会进入活动详情页，并展示参与该活动的商品列表，对应 <code>yudao-mall-uniapp</code> 的 <code>yudao-mall-uniapp/pages/activity/index.vue</code> 文件。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/商城手册/满减送活动/活动详情.png" alt="活动详情" tabindex="0" loading="lazy"><figcaption>活动详情</figcaption></figure><h3 id="_3-3-价格计算" tabindex="-1"><a class="header-anchor" href="#_3-3-价格计算"><span><a href="#_3-3-%E4%BB%B7%E6%A0%BC%E8%AE%A1%E7%AE%97">#</a> 3.3 价格计算</span></a></h3><p>TODO TradeRewardActivityPriceCalculator 类实现</p><p>TODO 前端的专属展示 /sheep/components/s-discount-list/s-discount-list.vue</p>',25)]))}const c=a(l,[["render",t],["__file","promotion-record.html.vue"]]),o=JSON.parse('{"path":"/project/rouyi-vue-pro/mall/promotion-record.html","title":"【营销】满减送","lang":"en-US","frontmatter":{"title":"【营销】满减送","tags":["project","java","spring-boot","spring-cloud"],"categories":["project"],"order":105,"feed":false,"seo":false,"head":[]},"headers":[{"level":2,"title":"# 1. 表结构","slug":"_1-表结构","link":"#_1-表结构","children":[]},{"level":2,"title":"# 2. 管理后台","slug":"_2-管理后台","link":"#_2-管理后台","children":[]},{"level":2,"title":"# 3. 移动端","slug":"_3-移动端","link":"#_3-移动端","children":[{"level":3,"title":"# 3.1 商品详情","slug":"_3-1-商品详情","link":"#_3-1-商品详情","children":[]},{"level":3,"title":"# 3.2 活动详情","slug":"_3-2-活动详情","link":"#_3-2-活动详情","children":[]},{"level":3,"title":"# 3.3 价格计算","slug":"_3-3-价格计算","link":"#_3-3-价格计算","children":[]}]}],"git":{"createdTime":1720365235000,"updatedTime":1720365235000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":2.51,"words":754},"filePathRelative":"project/rouyi-vue-pro/mall/promotion-record.md","localizedDate":"July 7, 2024"}');export{c as comp,o as data};
