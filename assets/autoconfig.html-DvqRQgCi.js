import{_ as s,o as n,c as a,a as t}from"./app-CIGQMwlz.js";const h={};function e(l,i){return n(),a("div",null,i[0]||(i[0]=[t(`<h1 id="spring-boot-auto-configuration" tabindex="-1"><a class="header-anchor" href="#spring-boot-auto-configuration"><span>Spring Boot Auto Configuration</span></a></h1><blockquote><p>BÃ i viáº¿t nÃ y cung cáº¥p vÃ­ dá»¥ mÃ£ nguá»“n hoÃ n chá»‰nh, cÃ³ thá»ƒ xem táº¡i <a href="https://github.com/YunaiV/SpringBoot-Labs" target="_blank" rel="noopener noreferrer">https://github.com/YunaiV/SpringBoot-Labs</a> trong thÆ° má»¥c <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-47" target="_blank" rel="noopener noreferrer">lab-47</a>.</p><p>Ná»™i dung gá»‘c khÃ´ng dá»… thá»±c hiá»‡n, hÃ£y á»§ng há»™ báº±ng cÃ¡ch nháº¥n <a href="https://github.com/YunaiV/SpringBoot-Labs/stargazers" target="_blank" rel="noopener noreferrer">Star</a> nhÃ©, cÃ¹ng nhau tiáº¿n lÃªn nÃ o!</p></blockquote><h2 id="_1-tong-quan" tabindex="-1"><a class="header-anchor" href="#_1-tong-quan"><span>1. Tá»•ng quan</span></a></h2><blockquote><p>Lá»i khuyÃªn: Bá»Ÿi vÃ¬ bÃ i viáº¿t nÃ y chia sáº» vá» nguyÃªn lÃ½ cá»§a cáº¥u hÃ¬nh tá»± Ä‘á»™ng Spring Boot, nÃªn yÃªu cáº§u ngÆ°á»i Ä‘á»c cÃ³ kinh nghiá»‡m sá»­ dá»¥ng Spring Boot. Náº¿u báº¡n chÆ°a tá»«ng sá»­ dá»¥ng Spring Boot, Ä‘á»«ng lo láº¯ng, hÃ£y Ä‘á»c trÆ°á»›c hai chÆ°Æ¡ng cá»§a bÃ i <a href="./springmvc">Spring Boot SpringMVC</a> Ä‘á»ƒ cáº£m nháº­n sá»± háº¥p dáº«n cá»§a Spring Boot.</p></blockquote><p>Cáº¥u hÃ¬nh tá»± Ä‘á»™ng trong Spring Boot, nhÆ° tÃªn gá»i, lÃ  mong muá»‘n cÃ³ thá»ƒ tá»± Ä‘á»™ng cáº¥u hÃ¬nh Ä‘á»ƒ giáº£i phÃ³ng chÃºng ta khá»i sá»± phiá»n phá»©c cá»§a viá»‡c cáº¥u hÃ¬nh thá»§ cÃ´ng. Äá»ƒ thá»±c hiá»‡n cáº¥u hÃ¬nh tá»± Ä‘á»™ng, nÃ³ cáº§n pháº£i giáº£i quyáº¿t ba cÃ¢u há»i:</p><ul><li>Äiá»u kiá»‡n <strong>nÃ o</strong> Ä‘Æ°á»£c thá»a mÃ£n?</li><li>Táº¡o ra <strong>nhá»¯ng</strong> Bean nÃ o?</li><li>Thuá»™c tÃ­nh <strong>gÃ¬</strong> cá»§a cÃ¡c Bean Ä‘Æ°á»£c táº¡o?</li></ul><p>HÃ£y cÃ¹ng xem vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y Ä‘á»ƒ tráº£ lá»i ba cÃ¢u há»i trÃªn. Khi chÃºng ta thÃªm phá»¥ thuá»™c <a href="https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web" target="_blank" rel="noopener noreferrer"><code>spring-boot-starter-web</code></a>, nÃ³ sáº½ táº¡o ra má»™t Tomcat nhÃºng á»Ÿ cá»•ng 8080, Ä‘á»“ng thá»i cho phÃ©p tÃ¹y chá»‰nh cá»•ng thÃ´ng qua cáº¥u hÃ¬nh <code>server.port</code> trong tá»‡p cáº¥u hÃ¬nh <code>application.yaml</code>. Váº­y cÃ¢u tráº£ lá»i cho ba cÃ¢u há»i lÃ :</p><blockquote><p>LÆ°u Ã½: Äá»ƒ dá»… hiá»ƒu, cÃ¡c cÃ¢u tráº£ lá»i dÆ°á»›i Ä‘Ã¢y chá»‰ mang tÃ­nh táº¡m thá»i vÃ  chÆ°a hoÃ n toÃ n chÃ­nh xÃ¡c.</p></blockquote><ul><li>Äiá»u kiá»‡n <strong>nÃ o</strong> Ä‘Æ°á»£c thá»a mÃ£n? Do chÃºng ta Ä‘Ã£ thÃªm phá»¥ thuá»™c <code>spring-boot-starter-web</code>.</li><li>Táº¡o ra <strong>nhá»¯ng</strong> Bean nÃ o? Táº¡o ra má»™t Bean Tomcat nhÃºng vÃ  khá»Ÿi Ä‘á»™ng nÃ³.</li><li>Thuá»™c tÃ­nh cá»§a Bean lÃ  <strong>gÃ¬</strong>? ThÃ´ng qua cáº¥u hÃ¬nh <code>server.port</code> trong tá»‡p <code>application.yaml</code>, xÃ¡c Ä‘á»‹nh thuá»™c tÃ­nh cá»•ng khá»Ÿi Ä‘á»™ng cá»§a Bean Tomcat vá»›i giÃ¡ trá»‹ máº·c Ä‘á»‹nh lÃ  8080.</li></ul><p>Giá» hÃ£y cÃ¹ng can Ä‘áº£m xem qua lá»›p <a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/embedded/EmbeddedWebServerFactoryCustomizerAutoConfiguration.java" target="_blank" rel="noopener noreferrer">EmbeddedWebServerFactoryCustomizerAutoConfiguration</a>, chá»‹u trÃ¡ch nhiá»‡m táº¡o cáº¥u hÃ¬nh cho cÃ¡c mÃ¡y chá»§ web nhÃºng nhÆ° Tomcat, Jetty. MÃ£ nguá»“n nhÆ° sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Configuration</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // &lt;1.1&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ConditionalOnWebApplication</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // &lt;2.1&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">EnableConfigurationProperties</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServerProperties</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// &lt;3.1&gt;  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> EmbeddedWebServerFactoryCustomizerAutoConfiguration</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Cáº¥u hÃ¬nh bÃªn trong náº¿u Tomcat Ä‘Æ°á»£c sá»­ dá»¥ng.  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Configuration</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // &lt;1.2&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ConditionalOnClass</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">({ </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Tomcat</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UpgradeProtocol</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> })  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> TomcatWebServerFactoryCustomizerConfiguration</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> TomcatWebServerFactoryCustomizer</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> tomcatWebServerFactoryCustomizer</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">                Environment</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> environment</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServerProperties</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> serverProperties</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            // &lt;3.2&gt;  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> TomcatWebServerFactoryCustomizer</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(environment, serverProperties);  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Cáº¥u hÃ¬nh bÃªn trong náº¿u Jetty Ä‘Æ°á»£c sá»­ dá»¥ng.  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Configuration</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // &lt;1.3&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ConditionalOnClass</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">({ </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Server</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Loader</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> WebAppContext</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> })  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> JettyWebServerFactoryCustomizerConfiguration</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> JettyWebServerFactoryCustomizer</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> jettyWebServerFactoryCustomizer</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">                Environment</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> environment</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ServerProperties</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> serverProperties</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">             // &lt;3.3&gt;  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> JettyWebServerFactoryCustomizer</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(environment, serverProperties);  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Cáº¥u hÃ¬nh bÃªn trong náº¿u Undertow Ä‘Æ°á»£c sá»­ dá»¥ng.  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ... Bá» qua mÃ£ nguá»“n cá»§a UndertowWebServerFactoryCustomizerConfiguration  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Cáº¥u hÃ¬nh bÃªn trong náº¿u Netty Ä‘Æ°á»£c sá»­ dá»¥ng.  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ... Bá» qua mÃ£ nguá»“n cá»§a NettyWebServerFactoryCustomizerConfiguration  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>TrÆ°á»›c khi xem mÃ£ nguá»“n, chÃºng ta hÃ£y cÃ¹ng tÃ¬m hiá»ƒu má»™t chÃºt vá» <a href="https://docs.spring.io/spring-javaconfig/docs/1.0.0.M4/reference/html/" target="_blank" rel="noopener noreferrer">Spring JavaConfig</a>. Tá»« Spring 3.0, Spring cung cáº¥p phÆ°Æ¡ng thá»©c JavaConfig, cho phÃ©p chÃºng ta sá»­ dá»¥ng mÃ£ Java Ä‘á»ƒ táº¡o Spring Bean. VÃ­ dá»¥ mÃ£ nguá»“n:</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Configuration</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> DemoConfiguration</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> object</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> Object</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><ul><li>ThÃªm chÃº thÃ­ch <a href="https://docs.spring.io/spring-javaconfig/docs/1.0.0.M4/reference/html/ch02.html#d0e270" target="_blank" rel="noopener noreferrer"><code>@Configuration</code></a> lÃªn <strong>lá»›p</strong>, Ä‘á»ƒ khai bÃ¡o Ä‘Ã¢y lÃ  má»™t lá»›p cáº¥u hÃ¬nh cá»§a Spring.</li><li>ThÃªm chÃº thÃ­ch <a href="https://docs.spring.io/spring-javaconfig/docs/1.0.0.M4/reference/html/ch02s02.html" target="_blank" rel="noopener noreferrer"><code>@Bean</code></a> lÃªn <strong>phÆ°Æ¡ng thá»©c</strong>, Ä‘á»ƒ khai bÃ¡o phÆ°Æ¡ng thá»©c nÃ y táº¡o ra má»™t Spring Bean.</li></ul><p>OK, giá» chÃºng ta quay láº¡i vá»›i mÃ£ nguá»“n EmbeddedWebServerFactoryCustomizerAutoConfiguration, chÃºng ta sáº½ chia thÃ nh ba pháº§n Ä‘á»ƒ giáº£i thÃ­ch, vá»«a hay giáº£i quyáº¿t ba cÃ¢u há»i á»Ÿ trÃªn:</p><ul><li>â‘  Lá»›p cáº¥u hÃ¬nh</li><li>â‘¡ ChÃº thÃ­ch Ä‘iá»u kiá»‡n</li><li>â‘¢ Thuá»™c tÃ­nh cáº¥u hÃ¬nh</li></ul><p><strong>â‘  Lá»›p cáº¥u hÃ¬nh</strong></p><p>Táº¡i vá»‹ trÃ­ <code>&lt;1.1&gt;</code>, thÃªm chÃº thÃ­ch <code>@Configuration</code> vÃ o lá»›p, khai bÃ¡o Ä‘Ã¢y lÃ  má»™t <strong>lá»›p cáº¥u hÃ¬nh</strong>. VÃ¬ má»¥c Ä‘Ã­ch cá»§a nÃ³ lÃ  cáº¥u hÃ¬nh tá»± Ä‘á»™ng, nÃªn tÃªn lá»›p káº¿t thÃºc báº±ng <code>AutoConfiguration</code>.</p><p>Táº¡i vá»‹ trÃ­ <code>&lt;1.2&gt;</code> vÃ  <code>&lt;1.3&gt;</code>, láº§n lÆ°á»£t lÃ  cÃ¡c lá»›p cáº¥u hÃ¬nh Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ khá»Ÿi táº¡o cÃ¡c Bean liÃªn quan Ä‘áº¿n Tomcat vÃ  Jetty.</p><ul><li>Lá»›p cáº¥u hÃ¬nh <code>TomcatWebServerFactoryCustomizerConfiguration</code> chá»‹u trÃ¡ch nhiá»‡m táº¡o Bean <a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/embedded/TomcatWebServerFactoryCustomizer.java" target="_blank" rel="noopener noreferrer">TomcatWebServerFactoryCustomizer</a>, tá»« Ä‘Ã³ khá»Ÿi táº¡o vÃ  cháº¡y Tomcat nhÃºng.</li><li>Lá»›p cáº¥u hÃ¬nh <code>JettyWebServerFactoryCustomizerConfiguration</code> chá»‹u trÃ¡ch nhiá»‡m táº¡o Bean <a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/embedded/JettyWebServerFactoryCustomizer.java" target="_blank" rel="noopener noreferrer">JettyWebServerFactoryCustomizer</a>, tá»« Ä‘Ã³ khá»Ÿi táº¡o vÃ  cháº¡y Jetty nhÃºng.</li></ul><p><strong>Váº­y, chÃºng ta cÃ³ káº¿t luáº­n má»™t: thÃ´ng qua cÃ¡c lá»›p cáº¥u hÃ¬nh Ä‘Æ°á»£c chÃº thÃ­ch báº±ng <code>@Configuration</code>, cÃ³ thá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» &quot;Táº¡o ra nhá»¯ng Bean nÃ o&quot;.</strong></p><p>Thá»±c táº¿, dá»± Ã¡n <a href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-autoconfigure" target="_blank" rel="noopener noreferrer">spring-boot-autoconfigure</a> cá»§a Spring Boot cung cáº¥p ráº¥t nhiá»u lá»›p cáº¥u hÃ¬nh tá»± Ä‘á»™ng cho cÃ¡c framework khÃ¡c nhau, chÃºng ta sáº½ Ä‘i sÃ¢u hÆ¡n vÃ o <a href="#">má»¥c &quot;2. Lá»›p cáº¥u hÃ¬nh tá»± Ä‘á»™ng&quot;</a> sau.</p><p><strong>â‘¡ ChÃº thÃ­ch Ä‘iá»u kiá»‡n</strong></p><p>Táº¡i vá»‹ trÃ­ <code>&lt;2&gt;</code>, thÃªm chÃº thÃ­ch Ä‘iá»u kiá»‡n <a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/condition/ConditionalOnWebApplication.java" target="_blank" rel="noopener noreferrer"><code>@ConditionalOnWebApplication</code></a> vÃ o lá»›p, Ä‘Ã¢y lÃ  má»™t <strong>chÃº thÃ­ch Ä‘iá»u kiá»‡n</strong>, chá»‰ ra ráº±ng lá»›p cáº¥u hÃ¬nh hiá»‡n táº¡i chá»‰ cÃ³ hiá»‡u lá»±c khi dá»± Ã¡n hiá»‡n táº¡i lÃ  má»™t dá»± Ã¡n Web. Trong cÃ¡c dá»± Ã¡n Spring Boot, loáº¡i dá»± Ã¡n Ä‘Æ°á»£c chia thÃ nh dá»± Ã¡n Web (sá»­ dá»¥ng SpringMVC hoáº·c WebFlux) vÃ  dá»± Ã¡n khÃ´ng pháº£i Web. Nhá» váº­y, chÃºng ta dá»… hiá»ƒu táº¡i sao lá»›p cáº¥u hÃ¬nh <code>EmbeddedWebServerFactoryCustomizerAutoConfiguration</code> yÃªu cáº§u loáº¡i dá»± Ã¡n pháº£i lÃ  Web, chá»‰ cÃ³ dá»± Ã¡n Web má»›i cáº§n táº¡o cÃ¡c mÃ¡y chá»§ Web nhÃºng.</p><p>Táº¡i vá»‹ trÃ­ <code>&lt;2.1&gt;</code> vÃ  <code>&lt;2.2&gt;</code>, thÃªm chÃº thÃ­ch Ä‘iá»u kiá»‡n <a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/condition/ConditionalOnClass.java" target="_blank" rel="noopener noreferrer"><code>@ConditionalOnClass</code></a> vÃ o lá»›p, Ä‘Ã¢y lÃ  má»™t <strong>chÃº thÃ­ch Ä‘iá»u kiá»‡n</strong>, chá»‰ ra ráº±ng lá»›p cáº¥u hÃ¬nh hiá»‡n táº¡i chá»‰ cÃ³ hiá»‡u lá»±c khi dá»± Ã¡n hiá»‡n táº¡i cÃ³ cÃ¡c lá»›p Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh.</p><ul><li>Lá»›p cáº¥u hÃ¬nh <code>TomcatWebServerFactoryCustomizerConfiguration</code> yÃªu cáº§u cÃ³ cÃ¡c lá»›p tá»« phá»¥ thuá»™c <a href="https://mvnrepository.com/search?q=tomcat-embed-core" target="_blank" rel="noopener noreferrer"><code>tomcat-embed-core</code></a> nhÆ° Tomcat vÃ  UpgradeProtocol Ä‘á»ƒ cÃ³ thá»ƒ táº¡o mÃ¡y chá»§ Tomcat nhÃºng.</li><li>Lá»›p cáº¥u hÃ¬nh <code>JettyWebServerFactoryCustomizerConfiguration</code> yÃªu cáº§u cÃ³ cÃ¡c lá»›p tá»« phá»¥ thuá»™c <a href="https://mvnrepository.com/artifact/org.eclipse.jetty/jetty-server" target="_blank" rel="noopener noreferrer"><code>jetty-server</code></a> nhÆ° Server, Loader vÃ  WebAppContext Ä‘á»ƒ cÃ³ thá»ƒ táº¡o mÃ¡y chá»§ Jetty nhÃºng.</li></ul><p><strong>Váº­y, chÃºng ta cÃ³ káº¿t luáº­n hai: thÃ´ng qua cÃ¡c chÃº thÃ­ch Ä‘iá»u kiá»‡n, cÃ³ thá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» &quot;Äiá»u kiá»‡n nÃ o Ä‘Æ°á»£c thá»a mÃ£n?&quot;.</strong></p><p>Thá»±c táº¿, gÃ³i <a href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/condition" target="_blank" rel="noopener noreferrer"><code>condition</code></a> cá»§a Spring Boot cung cáº¥p ráº¥t nhiá»u chÃº thÃ­ch Ä‘iá»u kiá»‡n, chÃºng ta sáº½ Ä‘i sÃ¢u hÆ¡n vÃ o <a href="#">má»¥c &quot;2. ChÃº thÃ­ch Ä‘iá»u kiá»‡n&quot;</a> sau.</p><p><strong>â‘¢ Thuá»™c tÃ­nh cáº¥u hÃ¬nh</strong></p><p>Táº¡i vá»‹ trÃ­ <code>&lt;3.1&gt;</code>, sá»­ dá»¥ng chÃº thÃ­ch <a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/context/properties/EnableConfigurationProperties.java" target="_blank" rel="noopener noreferrer"><code>@EnableConfigurationProperties</code></a> Ä‘á»ƒ kÃ­ch hoáº¡t lá»›p <a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/ServerProperties.java" target="_blank" rel="noopener noreferrer">ServerProperties</a> <strong>lá»›p thuá»™c tÃ­nh cáº¥u hÃ¬nh</strong>. Trong Spring Boot, Ä‘Ã£ Ä‘á»‹nh nghÄ©a chÃº thÃ­ch <a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/context/properties/ConfigurationProperties.java" target="_blank" rel="noopener noreferrer"><code>@ConfigurationProperties</code></a> Ä‘á»ƒ khai bÃ¡o lá»›p thuá»™c tÃ­nh cáº¥u hÃ¬nh, cho phÃ©p gÃ¡n cÃ¡c cáº¥u hÃ¬nh cÃ³ tiá»n tá»‘ cá»¥ thá»ƒ vÃ o cÃ¡c trÆ°á»ng trong lá»›p Ä‘Ã³. VÃ­ dá»¥, mÃ£ nguá»“n cá»§a <code>ServerProperties</code> nhÆ° sau:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ConfigurationProperties</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">prefix</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;server&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> ignoreUnknownFields</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ServerProperties</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        implements</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> EmbeddedServletContainerCustomizer</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> EnvironmentAware</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Ordered</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Cá»•ng HTTP cá»§a Server.</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> port</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * ÄÆ°á»ng dáº«n ngá»¯ cáº£nh cá»§a á»©ng dá»¥ng.</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> contextPath</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ... Bá» qua cÃ¡c thuá»™c tÃ­nh khÃ¡c</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ThÃ´ng qua chÃº thÃ­ch <code>@ConfigurationProperties</code>, khai bÃ¡o ráº±ng cÃ¡c cáº¥u hÃ¬nh cÃ³ tiá»n tá»‘ <code>server</code> sáº½ Ä‘Æ°á»£c gÃ¡n vÃ o lá»›p thuá»™c tÃ­nh cáº¥u hÃ¬nh <code>ServerProperties</code>.</li></ul><p>Táº¡i vá»‹ trÃ­ <code>&lt;3.2&gt;</code> vÃ  <code>&lt;3.3&gt;</code>, khi táº¡o cÃ¡c Ä‘á»‘i tÆ°á»£ng <code>TomcatWebServerFactoryCustomizer</code> vÃ  <code>JettyWebServerFactoryCustomizer</code>, Ä‘á»u truyá»n vÃ o <code>ServerProperties</code>, lÃ m cÆ¡ sá»Ÿ cho viá»‡c táº¡o cÃ¡c mÃ¡y chá»§ Web vá»›i cÃ¡c cáº¥u hÃ¬nh tÆ°Æ¡ng á»©ng. NÃ³i cÃ¡ch khÃ¡c, chÃºng ta cÃ³ thá»ƒ tÃ¹y chá»‰nh cáº¥u hÃ¬nh mÃ¡y chá»§ Web báº±ng cÃ¡ch thay Ä‘á»•i cÃ¡c cáº¥u hÃ¬nh trong tá»‡p cáº¥u hÃ¬nh.</p><p><strong>Váº­y, chÃºng ta cÃ³ káº¿t luáº­n ba: thÃ´ng qua cÃ¡c thuá»™c tÃ­nh cáº¥u hÃ¬nh, cÃ³ thá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» &quot;Thuá»™c tÃ­nh cá»§a cÃ¡c Bean Ä‘Æ°á»£c táº¡o lÃ  gÃ¬?&quot;.</strong></p><hr><p>ğŸ¶ Tá»›i Ä‘Ã¢y, chÃºng ta Ä‘Ã£ hiá»ƒu khÃ¡ rÃµ cÃ¡ch Spring Boot giáº£i quyáº¿t ba váº¥n Ä‘á» nÃªu trÃªn, nhÆ°ng váº«n chÆ°a thá»ƒ hiá»‡n Ä‘Æ°á»£c cÃ¡ch thá»±c hiá»‡n cáº¥u hÃ¬nh tá»± Ä‘á»™ng. VÃ­ dá»¥, khi chÃºng ta thÃªm cÃ¡c phá»¥ thuá»™c nhÆ° <code>spring-boot-starter-web</code>, Spring Boot biáº¿t cÃ¡ch quÃ©t cÃ¡c lá»›p cáº¥u hÃ¬nh nÃ o. Tiáº¿p tá»¥c hÃ nh trÃ¬nh cá»§a chÃºng ta, hÃ£y tiáº¿p tá»¥c phÃ¢n tÃ­ch ká»¹ hÆ¡n.</p><h2 id="_2-lop-cau-hinh-tu-Ä‘ong" tabindex="-1"><a class="header-anchor" href="#_2-lop-cau-hinh-tu-Ä‘ong"><span>2. Lá»›p cáº¥u hÃ¬nh tá»± Ä‘á»™ng</span></a></h2><p>Trong dá»± Ã¡n <a href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-autoconfigure" target="_blank" rel="noopener noreferrer">spring-boot-autoconfigure</a> cá»§a Spring Boot, cÃ³ ráº¥t nhiá»u cáº¥u hÃ¬nh tá»± Ä‘á»™ng cho cÃ¡c framework khÃ¡c nhau, nhÆ° hÃ¬nh dÆ°á»›i Ä‘Ã¢y:<br><img src="https://static.iocoder.cn/images/Spring-Boot/2019-02-01/01.png" alt="" loading="lazy"></p><p>Khi chÃºng ta khá»Ÿi Ä‘á»™ng á»©ng dá»¥ng Spring Boot thÃ´ng qua phÆ°Æ¡ng thá»©c <a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/SpringApplication.java#L1218-L1227" target="_blank" rel="noopener noreferrer"><code>SpringApplication#run(Class&lt;?&gt; primarySource, String... args)</code></a>, cÃ³ má»™t thÃ nh pháº§n ráº¥t quan trá»ng lÃ  lá»›p <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-core/src/main/java/org/springframework/core/io/support/SpringFactoriesLoader.java" target="_blank" rel="noopener noreferrer">SpringFactoriesLoader</a>. Lá»›p nÃ y sáº½ Ä‘á»c tá»‡p <code>spring.factories</code> trong thÆ° má»¥c <code>META-INF</code> Ä‘á»ƒ láº¥y danh sÃ¡ch <strong>cÃ¡c lá»›p cáº¥u hÃ¬nh tá»± Ä‘á»™ng cá»§a tá»«ng framework</strong>.</p><p>ChÃºng ta hÃ£y xem má»™t vÃ­ dá»¥ vá» tá»‡p <code>spring.factories</code> trong dá»± Ã¡n <a href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-autoconfigure" target="_blank" rel="noopener noreferrer">spring-boot-autoconfigure</a> cá»§a Spring Boot:<br><img src="https://static.iocoder.cn/images/Spring-Boot/2019-02-01/02.png" alt="" loading="lazy"></p><p>NhÆ° váº­y, cÃ¡c lá»›p cáº¥u hÃ¬nh cÃ³ chÃº thÃ­ch <code>@Configuration</code> sáº½ <strong>nÃ¢ng cáº¥p</strong> thÃ nh cÃ¡c lá»›p cáº¥u hÃ¬nh tá»± Ä‘á»™ng. Khi Spring Boot láº¥y Ä‘Æ°á»£c cÃ¡c lá»›p cáº¥u hÃ¬nh tá»± Ä‘á»™ng nÃ y, nÃ³ sáº½ tá»± Ä‘á»™ng táº¡o ra cÃ¡c Bean tÆ°Æ¡ng á»©ng, hoÃ n thÃ nh chá»©c nÄƒng cáº¥u hÃ¬nh tá»± Ä‘á»™ng.</p><blockquote><p><strong>ChÃº thÃ­ch</strong>: CÃ³ má»™t chá»§ Ä‘á» khÃ¡ thÃº vá»‹ liÃªn quan mÃ  báº¡n cÃ³ thá»ƒ tÃ¬m hiá»ƒu thÃªm. Thá»±c táº¿, chÃºng ta cÃ³ thá»ƒ hiá»ƒu tá»‡p <code>spring.factories</code> nhÆ° má»™t cÆ¡ cháº¿ SPI (Service Provider Interface) cá»§a Spring Boot. Náº¿u báº¡n quan tÃ¢m, cÃ³ thá»ƒ tham kháº£o cÃ¡c bÃ i viáº¿t sau:</p><ul><li><a href="http://www.iocoder.cn/Fight/SPI-mechanism-in-Spring-Boot/?self" target="_blank" rel="noopener noreferrer">CÆ¡ cháº¿ SPI trong Spring Boot</a></li><li><a href="http://www.iocoder.cn/Fight/xuma/spi/?self" target="_blank" rel="noopener noreferrer">CÆ¡ cháº¿ SPI trong Java</a></li><li><a href="http://dubbo.apache.org/zh-cn/docs/dev/SPI.html" target="_blank" rel="noopener noreferrer">CÆ¡ cháº¿ SPI trong Dubbo</a></li></ul><p>Thá»±c táº¿, cáº¥u hÃ¬nh tá»± Ä‘á»™ng chá»‰ lÃ  má»™t trong nhá»¯ng Ä‘iá»ƒm má»Ÿ rá»™ng cá»§a Spring Boot dá»±a trÃªn <code>spring.factories</code>, vá»›i Ä‘iá»ƒm má»Ÿ rá»™ng <code>EnableAutoConfiguration</code>. Tá»« hÃ¬nh trÃªn, chÃºng ta cÅ©ng cÃ³ thá»ƒ tháº¥y cÃ¡c Ä‘iá»ƒm má»Ÿ rá»™ng khÃ¡c nhÆ°:</p><ul><li>ApplicationContextInitializer</li><li>ApplicationListener</li><li>AutoConfigurationImportListener</li><li>AutoConfigurationImportFilter</li><li>FailureAnalyzer</li><li>TemplateAvailabilityProvider</li></ul></blockquote><p>VÃ¬ dá»± Ã¡n spring-boot-autoconfigure cung cáº¥p cáº¥u hÃ¬nh tá»± Ä‘á»™ng cho cÃ¡c framework phá»• biáº¿n, nÃªn cÃ¡c framework khÃ¡c cáº§n tá»± triá»ƒn khai cáº¥u hÃ¬nh tá»± Ä‘á»™ng cho mÃ¬nh. VÃ­ dá»¥, Dubbo cung cáº¥p cáº¥u hÃ¬nh tá»± Ä‘á»™ng thÃ´ng qua dá»± Ã¡n <a href="https://github.com/apache/dubbo-spring-boot-project" target="_blank" rel="noopener noreferrer">dubbo-spring-boot-project</a>, nhÆ° hÃ¬nh dÆ°á»›i Ä‘Ã¢y:<br><img src="https://static.iocoder.cn/images/Spring-Boot/2019-02-01/03.png" alt="" loading="lazy"></p><h2 id="_3-chu-thich-Ä‘ieu-kien" tabindex="-1"><a class="header-anchor" href="#_3-chu-thich-Ä‘ieu-kien"><span>3. ChÃº thÃ­ch Ä‘iá»u kiá»‡n</span></a></h2><p>ChÃº thÃ­ch Ä‘iá»u kiá»‡n khÃ´ng pháº£i lÃ  tÃ­nh nÄƒng riÃªng cá»§a Spring Boot, mÃ  Ä‘Ã£ Ä‘Æ°á»£c giá»›i thiá»‡u trong phiÃªn báº£n Spring 3.1 Ä‘á»ƒ Ä‘Äƒng kÃ½ cÃ¡c Bean khÃ¡c nhau tÃ¹y theo mÃ´i trÆ°á»ng. Khi Ä‘Ã³, chÃº thÃ­ch <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-context/src/main/java/org/springframework/context/annotation/Profile.java" target="_blank" rel="noopener noreferrer"><code>@Profile</code></a> Ä‘Ã£ ra Ä‘á»i. DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Configuration</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> DataSourceConfiguration</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Profile</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;DEV&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> DataSource</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> devDataSource</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ... MySQL Ä‘Æ¡n láº»</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Profile</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;PROD&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> DataSource</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> prodDataSource</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ... MySQL cá»¥m  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Trong mÃ´i trÆ°á»ng phÃ¡t triá»ƒn, chÃºng ta Ä‘Äƒng kÃ½ Bean DataSource cho MySQL Ä‘Æ¡n láº».</li><li>Trong mÃ´i trÆ°á»ng sáº£n xuáº¥t, chÃºng ta Ä‘Äƒng kÃ½ Bean DataSource cho MySQL cá»¥m.</li></ul><p>Trong phiÃªn báº£n Spring 4, chÃº thÃ­ch <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-context/src/main/java/org/springframework/context/annotation/Conditional.java" target="_blank" rel="noopener noreferrer"><code>@Conditional</code></a> Ä‘Ã£ Ä‘Æ°á»£c giá»›i thiá»‡u, cho phÃ©p khai bÃ¡o cÃ¡c Ä‘iá»u kiá»‡n khi cáº¥u hÃ¬nh lá»›p hoáº·c phÆ°Æ¡ng thá»©c Bean. VÃ­ dá»¥:</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Configuration</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> TestConfiguration</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Conditional</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">XXXCondition</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> xxxObject</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> Object</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><ul><li>Trong Ä‘Ã³, <code>XXXCondition</code> cáº§n Ä‘Æ°á»£c chÃºng ta tá»± triá»ƒn khai giao diá»‡n <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-context/src/main/java/org/springframework/context/annotation/Condition.java" target="_blank" rel="noopener noreferrer">Condition</a> vÃ  cung cáº¥p Ä‘iá»u kiá»‡n cá»¥ thá»ƒ.</li></ul><p>RÃµ rÃ ng, chÃº thÃ­ch <code>@Conditional</code> cá»§a Spring 4 khÃ´ng thuáº­n tiá»‡n, yÃªu cáº§u chÃºng ta pháº£i tá»± má»Ÿ rá»™ng. VÃ¬ váº­y, Spring Boot Ä‘Ã£ cáº£i tiáº¿n vÃ  cung cáº¥p má»™t sá»‘ chÃº thÃ­ch Ä‘iá»u kiá»‡n phá»• biáº¿n nhÆ° sau:</p><ul><li><code>@ConditionalOnBean</code>: Khi cÃ³ Bean Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh trong container.</li><li><code>@ConditionalOnMissingBean</code>: Khi khÃ´ng cÃ³ Bean Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh trong container.</li><li><code>@ConditionalOnSingleCandidate</code>: Khi Bean chá»‰ Ä‘á»‹nh lÃ  duy nháº¥t, hoáº·c cÃ³ nhiá»u nhÆ°ng Bean chá»‰ Ä‘á»‹nh lÃ  Æ°u tiÃªn.</li><li><code>@ConditionalOnClass</code>: Khi lá»›p chá»‰ Ä‘á»‹nh cÃ³ trong classpath.</li><li><code>@ConditionalOnMissingClass</code>: Khi lá»›p chá»‰ Ä‘á»‹nh khÃ´ng cÃ³ trong classpath.</li><li><code>@ConditionalOnProperty</code>: Khi thuá»™c tÃ­nh chá»‰ Ä‘á»‹nh cÃ³ giÃ¡ trá»‹ cá»¥ thá»ƒ.</li><li><code>@ConditionalOnResource</code>: Khi tÃ i nguyÃªn chá»‰ Ä‘á»‹nh cÃ³ trong classpath.</li><li><code>@ConditionalOnExpression</code>: Dá»±a trÃªn biá»ƒu thá»©c SpEL lÃ m Ä‘iá»u kiá»‡n.</li><li><code>@ConditionalOnJava</code>: Dá»±a trÃªn phiÃªn báº£n Java lÃ m Ä‘iá»u kiá»‡n.</li><li><code>@ConditionalOnJndi</code>: Khi JNDI tá»“n táº¡i táº¡i vá»‹ trÃ­ chá»‰ Ä‘á»‹nh.</li><li><code>@ConditionalOnNotWebApplication</code>: Khi dá»± Ã¡n hiá»‡n táº¡i khÃ´ng pháº£i lÃ  á»©ng dá»¥ng web.</li><li><code>@ConditionalOnWebApplication</code>: Khi dá»± Ã¡n hiá»‡n táº¡i lÃ  á»©ng dá»¥ng web.</li></ul><h2 id="_4-thuoc-tinh-cau-hinh" tabindex="-1"><a class="header-anchor" href="#_4-thuoc-tinh-cau-hinh"><span>4. Thuá»™c tÃ­nh cáº¥u hÃ¬nh</span></a></h2><p>Spring Boot Ä‘á»c cÃ¡c tá»‡p cáº¥u hÃ¬nh nhÆ° <code>application.yaml</code> hay <code>application.properties</code> Ä‘á»ƒ táº¡o cÃ¡c Bean vá»›i thuá»™c tÃ­nh tÃ¹y chá»‰nh. Tháº­m chÃ­, cÃ³ thá»ƒ káº¿t há»£p vá»›i chÃº thÃ­ch <code>@ConditionalOnProperty</code> Ä‘á»ƒ ngÄƒn cháº·n viá»‡c táº¡o Bean.</p><p>Thá»±c ra pháº§n nÃ y khÃ´ng cÃ³ nhiá»u ná»™i dung Ä‘á»ƒ chia sáº», báº¡n cÃ³ thá»ƒ Ä‘á»c thÃªm bÃ i viáº¿t <a href="http://www.iocoder.cn/Spring-Boot/config-file/?self" target="_blank" rel="noopener noreferrer">Giá»›i thiá»‡u vá» tá»‡p cáº¥u hÃ¬nh Spring Boot</a> Ä‘á»ƒ hiá»ƒu rÃµ hÆ¡n.</p><h2 id="_5-starter-tich-hop" tabindex="-1"><a class="header-anchor" href="#_5-starter-tich-hop"><span>5. Starter tÃ­ch há»£p</span></a></h2><p>Khi sá»­ dá»¥ng Spring Boot, chÃºng ta khÃ´ng trá»±c tiáº¿p thÃªm phá»¥ thuá»™c <a href="https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-autoconfigure" target="_blank" rel="noopener noreferrer"><code>spring-boot-autoconfigure</code></a>, mÃ  thay vÃ o Ä‘Ã³ sá»­ dá»¥ng cÃ¡c phá»¥ thuá»™c Starter tÃ­ch há»£p sáºµn trong Spring Boot. VÃ­ dá»¥, khi muá»‘n sá»­ dá»¥ng SpringMVC, chÃºng ta thÃªm phá»¥ thuá»™c <a href="https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web" target="_blank" rel="noopener noreferrer"><code>spring-boot-starter-web</code></a>. Táº¡i sao láº¡i nhÆ° váº­y?</p><p>VÃ¬ cÃ¡c lá»›p cáº¥u hÃ¬nh tá»± Ä‘á»™ng cá»§a Spring Boot thÆ°á»ng cÃ³ chÃº thÃ­ch Ä‘iá»u kiá»‡n <code>@ConditionalOnClass</code>, xÃ¡c Ä‘á»‹nh ráº±ng náº¿u trong dá»± Ã¡n cÃ³ lá»›p chá»‰ Ä‘á»‹nh, thÃ¬ má»›i táº¡o Bean tÆ°Æ¡ng á»©ng. VÃ  Ä‘á»ƒ cÃ³ cÃ¡c lá»›p nÃ y, chÃºng ta cáº§n thÃªm phá»¥ thuá»™c vÃ o framework tÆ°Æ¡ng á»©ng.</p><p>Do Ä‘Ã³, khi thÃªm phá»¥ thuá»™c <code>spring-boot-starter-web</code>, nÃ³ sáº½ tá»± Ä‘á»™ng thÃªm cÃ¡c phá»¥ thuá»™c cáº§n thiáº¿t, Ä‘áº£m báº£o cÃ¡c lá»›p cáº¥u hÃ¬nh tá»± Ä‘á»™ng cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng vÃ  táº¡o Bean tÆ°Æ¡ng á»©ng. NhÆ° hÃ¬nh dÆ°á»›i Ä‘Ã¢y:<br><img src="https://static.iocoder.cn/images/Spring-Boot/2019-02-01/11.png" alt="" loading="lazy"></p><p>Spring Boot tÃ­ch há»£p ráº¥t nhiá»u Starter, giÃºp chÃºng ta dá»… dÃ ng thÃªm cÃ¡c framework khÃ¡c nhau vÃ  cáº¥u hÃ¬nh tá»± Ä‘á»™ng. NhÆ° hÃ¬nh dÆ°á»›i Ä‘Ã¢y:<br><img src="https://static.iocoder.cn/images/Spring-Boot/2019-02-01/12.png" alt="" loading="lazy"></p><h2 id="_6-tu-tao-starter" tabindex="-1"><a class="header-anchor" href="#_6-tu-tao-starter"><span>6. Tá»± táº¡o Starter</span></a></h2><p>Trong má»™t sá»‘ trÆ°á»ng há»£p, chÃºng ta cáº§n tá»± táº¡o Starter Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c má»¥c tiÃªu tá»± Ä‘á»™ng cáº¥u hÃ¬nh. VÃ­ dá»¥:</p><ul><li>CÃ¡c framework cá»§a bÃªn thá»© ba khÃ´ng cung cáº¥p Starter, cháº³ng háº¡n nhÆ° <a href="https://github.com/swagger-api" target="_blank" rel="noopener noreferrer">Swagger</a>, <a href="https://github.com/xuxueli/xxl-job" target="_blank" rel="noopener noreferrer">XXL-JOB</a>, v.v.</li><li>Starter tÃ­ch há»£p sáºµn cá»§a Spring Boot khÃ´ng Ä‘Ã¡p á»©ng nhu cáº§u cá»§a chÃºng ta, cháº³ng háº¡n nhÆ° <a href="https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-jdbc" target="_blank" rel="noopener noreferrer"><code>spring-boot-starter-jdbc</code></a> khÃ´ng cung cáº¥p cáº¥u hÃ¬nh cho nhiá»u nguá»“n dá»¯ liá»‡u.</li><li>Khi dá»± Ã¡n ngÃ y cÃ ng lá»›n, chÃºng ta cÃ³ thá»ƒ muá»‘n táº¡o Starter riÃªng cho nhÃ³m cá»§a mÃ¬nh Ä‘á»ƒ dá»… dÃ ng cáº¥u hÃ¬nh dá»± Ã¡n, vÃ­ dá»¥ nhÆ° dá»± Ã¡n <a href="https://gitee.com/yhcsx/csx-bsf-all" target="_blank" rel="noopener noreferrer">csx-bsf-all</a> cá»§a Yonghui Caishixian.</li></ul><p>DÆ°á»›i Ä‘Ã¢y, chÃºng ta sáº½ cÃ¹ng táº¡o má»™t Starter tÃ¹y chá»‰nh, giÃºp tá»± Ä‘á»™ng cáº¥u hÃ¬nh má»™t mÃ¡y chá»§ HttpServer tÃ­ch há»£p sáºµn cá»§a Java <a href="https://docs.oracle.com/javase/8/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/HttpServer.html" target="_blank" rel="noopener noreferrer">HttpServer</a>. Cáº¥u trÃºc dá»± Ã¡n cuá»‘i cÃ¹ng sáº½ nhÆ° hÃ¬nh sau:</p><figure><img src="https://static.iocoder.cn/images/Spring-Boot/2019-02-01/21.png" alt="Dá»± Ã¡n cuá»‘i cÃ¹ng" tabindex="0" loading="lazy"><figcaption>Dá»± Ã¡n cuá»‘i cÃ¹ng</figcaption></figure><p>TrÆ°á»›c khi báº¯t Ä‘áº§u, chÃºng ta cáº§n tÃ¬m hiá»ƒu vá» quy táº¯c Ä‘áº·t tÃªn cá»§a Spring Boot Starter Ä‘á»ƒ lÃ m viá»‡c trá»Ÿ nÃªn chuyÃªn nghiá»‡p hÆ¡n. Quy táº¯c Ä‘áº·t tÃªn nhÆ° sau:</p><table><thead><tr><th>TÃ¬nh huá»‘ng</th><th>Quy táº¯c Ä‘áº·t tÃªn</th><th>VÃ­ dá»¥</th></tr></thead><tbody><tr><td><strong>Starter tÃ­ch há»£p sáºµn</strong> cá»§a Spring Boot</td><td><code>spring-boot-starter-{framework}</code></td><td><code>spring-boot-starter-web</code></td></tr><tr><td>Starter <strong>tÃ¹y chá»‰nh</strong> cá»§a framework</td><td><code>{framework}-spring-boot-starter</code></td><td><a href="https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter" target="_blank" rel="noopener noreferrer"><code>mybatis-spring-boot-starter</code></a></td></tr><tr><td>Starter <strong>tÃ¹y chá»‰nh</strong> cá»§a cÃ´ng ty</td><td><code>{company}-spring-boot-starter-{framework}</code></td><td>Hiá»‡n chÆ°a cÃ³, Ä‘Ã¢y chá»‰ lÃ  Ã½ tÆ°á»Ÿng cá»§a tÃ´i</td></tr></tbody></table><h3 id="_6-1-du-an-yunai-server-spring-boot-starter" tabindex="-1"><a class="header-anchor" href="#_6-1-du-an-yunai-server-spring-boot-starter"><span>6.1 Dá»± Ã¡n <code>yunai-server-spring-boot-starter</code></span></a></h3><p>ChÃºng ta sáº½ táº¡o má»™t dá»± Ã¡n <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-47/yunai-server-spring-boot-starter" target="_blank" rel="noopener noreferrer"><code>yunai-server-spring-boot-starter</code></a>, giÃºp tá»± Ä‘á»™ng cáº¥u hÃ¬nh má»™t mÃ¡y chá»§ HttpServer tÃ­ch há»£p sáºµn trong Java. VÃ¬ dá»± Ã¡n khÃ¡ Ä‘Æ¡n giáº£n nÃªn chÃºng ta sáº½ khÃ´ng tÃ¡ch ra thÃ nh hai dá»± Ã¡n nhÆ° <code>spring-boot-autoconfigure</code> vÃ  <code>spring-boot-starter-{framework}</code>.</p><h4 id="_6-1-1-them-phu-thuoc" tabindex="-1"><a class="header-anchor" href="#_6-1-1-them-phu-thuoc"><span>6.1.1 ThÃªm phá»¥ thuá»™c</span></a></h4><p>Trong tá»‡p <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-47/yunai-server-spring-boot-starter/pom.xml" target="_blank" rel="noopener noreferrer"><code>pom.xml</code></a>, thÃªm cÃ¡c phá»¥ thuá»™c cáº§n thiáº¿t.</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;?</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">xml</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;1.0&quot;</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> encoding</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;UTF-8&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">?&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">project</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> xmlns</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">         xmlns:xsi</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">         xsi:schemaLocation</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">parent</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;lab-47&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;cn.iocoder.springboot.labs&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;1.0-SNAPSHOT&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">parent</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">modelVersion</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;4.0.0&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">modelVersion</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;yunai-server-spring-boot-starter&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependencies</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        &lt;!-- ThÃªm thÆ° viá»‡n Spring Boot Starter cÆ¡ báº£n --&gt;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;spring-boot-starter&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;2.2.2.RELEASE&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependencies</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">project</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-1-2-lop-yunaiserverproperties" tabindex="-1"><a class="header-anchor" href="#_6-1-2-lop-yunaiserverproperties"><span>6.1.2 Lá»›p <code>YunaiServerProperties</code></span></a></h4><p>Trong gÃ³i <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-47/yunai-server-spring-boot-starter/src/main/java/cn/iocoder/springboot/lab47/yunaiserver/autoconfigure/" target="_blank" rel="noopener noreferrer"><code>cn.iocoder.springboot.lab47.yunaiserver.autoconfigure</code></a>, táº¡o lá»›p <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-47/yunai-server-spring-boot-starter/src/main/java/cn/iocoder/springboot/lab47/yunaiserver/autoconfigure/YunaiServerProperties.java" target="_blank" rel="noopener noreferrer">YunaiServerProperties</a> Ä‘á»ƒ Ä‘á»c cÃ¡c thuá»™c tÃ­nh cáº¥u hÃ¬nh cÃ³ tiá»n tá»‘ <code>yunai.server</code>. MÃ£ nguá»“n:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ConfigurationProperties</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">prefix</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;yunai.server&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> YunaiServerProperties</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Cá»•ng máº·c Ä‘á»‹nh  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> DEFAULT_PORT </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 8000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * Cá»•ng  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> port </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> DEFAULT_PORT</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> getDefaultPort</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> DEFAULT_PORT;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> getPort</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> port;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> YunaiServerProperties</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> setPort</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> port</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">port</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> port;  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-1-3-lop-yunaiserverautoconfiguration" tabindex="-1"><a class="header-anchor" href="#_6-1-3-lop-yunaiserverautoconfiguration"><span>6.1.3 Lá»›p <code>YunaiServerAutoConfiguration</code></span></a></h4><p>Trong gÃ³i <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-47/yunai-server-spring-boot-starter/src/main/java/cn/iocoder/springboot/lab47/yunaiserver/autoconfigure/" target="_blank" rel="noopener noreferrer"><code>cn.iocoder.springboot.lab47.yunaiserver.autoconfigure</code></a>, táº¡o lá»›p <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-47/yunai-server-spring-boot-starter/src/main/java/cn/iocoder/springboot/lab47/yunaiserver/autoconfigure/YunaiServerAutoConfiguration.java" target="_blank" rel="noopener noreferrer">YunaiServerAutoConfiguration</a> Ä‘á»ƒ tá»± Ä‘á»™ng cáº¥u hÃ¬nh mÃ¡y chá»§ HttpServer khi lá»›p <code>com.sun.net.httpserver.HttpServer</code> cÃ³ sáºµn trong dá»± Ã¡n. MÃ£ nguá»“n:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Configuration</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // Khai bÃ¡o lá»›p cáº¥u hÃ¬nh  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">EnableConfigurationProperties</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">YunaiServerProperties</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// KÃ­ch hoáº¡t lá»›p cáº¥u hÃ¬nh YunaiServerProperties  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> YunaiServerAutoConfiguration</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Logger</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> logger </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getLogger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">YunaiServerAutoConfiguration</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // Khai bÃ¡o táº¡o Bean  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ConditionalOnClass</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HttpServer</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Äiá»u kiá»‡n cÃ³ lá»›p com.sun.net.httpserver.HttpServer. Lá»›p nÃ y cÃ³ sáºµn trong JDK nÃªn Ä‘iá»u kiá»‡n nÃ y luÃ´n Ä‘Ãºng.  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> HttpServer</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> httpServer</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">YunaiServerProperties</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> serverProperties</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Táº¡o Ä‘á»‘i tÆ°á»£ng HttpServer vÃ  khá»Ÿi Ä‘á»™ng  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        HttpServer</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> server</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> HttpServer</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">create</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> InetSocketAddress</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">serverProperties</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getPort</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()), </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        server</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;[httpServer][Khá»Ÿi Ä‘á»™ng thÃ nh cÃ´ng trÃªn cá»•ng: {}]&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">serverProperties</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getPort</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Tráº£ vá» Ä‘á»‘i tÆ°á»£ng server  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> server;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-1-4-tep-spring-factories" tabindex="-1"><a class="header-anchor" href="#_6-1-4-tep-spring-factories"><span>6.1.4 Tá»‡p <code>spring.factories</code></span></a></h4><p>Trong thÆ° má»¥c <code>resources</code>, táº¡o thÆ° má»¥c <code>META-INF</code>, sau Ä‘Ã³ táº¡o tá»‡p <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-47/yunai-server-spring-boot-starter/src/main/resources/META-INF/spring.factories" target="_blank" rel="noopener noreferrer"><code>spring.factories</code></a> trong thÆ° má»¥c nÃ y vÃ  thÃªm lá»›p cáº¥u hÃ¬nh tá»± Ä‘á»™ng <code>YunaiServerAutoConfiguration</code>. Ná»™i dung nhÆ° sau:</p><div class="language-" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>org.springframework.boot.autoconfigure.EnableAutoConfiguration=\\</span></span>
<span class="line"><span>cn.iocoder.springboot.lab47.yunaiserver.autoconfigure.YunaiServerAutoConfiguration</span></span></code></pre></div><p>Äáº¿n Ä‘Ã¢y, chÃºng ta Ä‘Ã£ hoÃ n thÃ nh má»™t Starter tÃ¹y chá»‰nh. Tiáº¿p theo, chÃºng ta sáº½ thÃªm vÃ o dá»± Ã¡n <a href="#">6.2 lab-47-demo</a> Ä‘á»ƒ thá»­ nghiá»‡m.</p><h3 id="_6-2-du-an-lab-47-demo" tabindex="-1"><a class="header-anchor" href="#_6-2-du-an-lab-47-demo"><span>6.2 Dá»± Ã¡n lab-47-demo</span></a></h3><p>Táº¡o dá»± Ã¡n <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-47/lab-47-demo/pom.xml" target="_blank" rel="noopener noreferrer">lab-47-demo</a> vÃ  Ä‘Æ°a vÃ o Starter tÃ¹y chá»‰nh cá»§a chÃºng ta.</p><h3 id="_6-2-1-nhap-phu-thuoc" tabindex="-1"><a class="header-anchor" href="#_6-2-1-nhap-phu-thuoc"><span>6.2.1 Nháº­p phá»¥ thuá»™c</span></a></h3><p>Trong tá»‡p <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-47/lab-47-demo/pom.xml" target="_blank" rel="noopener noreferrer"><code>pom.xml</code></a>, nháº­p cÃ¡c phá»¥ thuá»™c liÃªn quan.</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;?</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">xml</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;1.0&quot;</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> encoding</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;UTF-8&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">?&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">project</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> xmlns</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">         xmlns:xsi</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">         xsi:schemaLocation</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">parent</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;lab-47&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;cn.iocoder.springboot.labs&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;1.0-SNAPSHOT&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">parent</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">modelVersion</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;4.0.0&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">modelVersion</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;lab-47-demo&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependencies</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        &lt;!-- Nháº­p Starter tÃ¹y chá»‰nh --&gt;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;cn.iocoder.springboot.labs&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;yunai-server-spring-boot-starter&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;1.0-SNAPSHOT&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependencies</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">project</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-2-tep-cau-hinh" tabindex="-1"><a class="header-anchor" href="#_6-2-2-tep-cau-hinh"><span>6.2.2 Tá»‡p cáº¥u hÃ¬nh</span></a></h3><p>Trong thÆ° má»¥c <code>resource</code>, táº¡o tá»‡p <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-47/lab-47-demo/src/main/resources/application.yaml" target="_blank" rel="noopener noreferrer"><code>application.yaml</code></a> Ä‘á»ƒ thiáº¿t láº­p thuá»™c tÃ­nh <code>yunai.server.port</code> nháº±m tÃ¹y chá»‰nh cá»•ng HttpServer. Cáº¥u hÃ¬nh nhÆ° sau:</p><div class="language-yaml" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">yunai</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  server</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:  </span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    port</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">8888</span><span style="--shiki-light:#7F848E;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # Cá»•ng HttpServer tÃ¹y chá»‰nh</span></span></code></pre></div><h3 id="_6-2-3-demoapplication" tabindex="-1"><a class="header-anchor" href="#_6-2-3-demoapplication"><span>6.2.3 DemoApplication</span></a></h3><p>Táº¡o lá»›p <a href="https://github.com/YunaiV/SpringBoot-Labs/blob/master/lab-47/lab-47-demo/src/main/java/cn/iocoder/springboot/lab47/demo/DemoApplication.java" target="_blank" rel="noopener noreferrer"><code>DemoApplication.java</code></a>, chá»‰ cáº§n cáº¥u hÃ¬nh chÃº thÃ­ch <code>@SpringBootApplication</code>. MÃ£ nhÆ° sau:</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">SpringBootApplication</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> DemoApplication</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {  </span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        SpringApplication</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">DemoApplication</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, args);  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h3 id="_6-2-4-kiem-tra-Ä‘on-gian" tabindex="-1"><a class="header-anchor" href="#_6-2-4-kiem-tra-Ä‘on-gian"><span>6.2.4 Kiá»ƒm tra Ä‘Æ¡n giáº£n</span></a></h3><p>Thá»±c hiá»‡n phÆ°Æ¡ng thá»©c <code>DemoApplication#main(String[] args)</code> Ä‘á»ƒ khá»Ÿi Ä‘á»™ng á»©ng dá»¥ng Spring Boot. Log in sáº½ hiá»ƒn thá»‹ nhÆ° sau:</p><div class="language-" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>2020-02-02 13:03:12.156  INFO 76469 --- [           main] c.i.s.lab47.demo.DemoApplication         : Starting DemoApplication on MacBook-Pro-8 with PID 76469 (/Users/yunai/Java/SpringBoot-Labs/lab-47/lab-47-demo/target/classes started by yunai in /Users/yunai/Java/SpringBoot-Labs)  </span></span>
<span class="line"><span>2020-02-02 13:03:12.158  INFO 76469 --- [           main] c.i.s.lab47.demo.DemoApplication         : No active profile set, falling back to default profiles: default  </span></span>
<span class="line"><span>2020-02-02 13:03:12.873  INFO 76469 --- [           main] c.i.s.l.y.a.YunaiServerAutoConfiguration : [httpServer][Khá»Ÿi Ä‘á»™ng mÃ¡y chá»§ thÃ nh cÃ´ng, cá»•ng lÃ :8888]  </span></span>
<span class="line"><span>2020-02-02 13:03:12.927  INFO 76469 --- [           main] c.i.s.lab47.demo.DemoApplication         : Started DemoApplication in 1.053 seconds (JVM running for 1.47)</span></span></code></pre></div><ul><li><code>YunaiServerAutoConfiguration</code> Ä‘Ã£ tá»± Ä‘á»™ng cáº¥u hÃ¬nh thÃ nh cÃ´ng bean HttpServer vÃ  khá»Ÿi Ä‘á»™ng mÃ¡y chá»§ nÃ y trÃªn cá»•ng 8888.</li></ul><p>LÃºc nÃ y, khi chÃºng ta sá»­ dá»¥ng trÃ¬nh duyá»‡t truy cáº­p vÃ o Ä‘á»‹a chá»‰ <a href="http://127.0.0.1:8888/" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8888/</a>, káº¿t quáº£ tráº£ vá» lÃ  404 Not Found vÃ¬ chÃºng ta chÆ°a cung cáº¥p Handler tÆ°Æ¡ng á»©ng cho HttpServer.</p><h1 id="_666-tong-ket" tabindex="-1"><a class="header-anchor" href="#_666-tong-ket"><span>666. Tá»•ng káº¿t</span></a></h1><p>Äáº¿n Ä‘Ã¢y, chÃºng ta Ä‘Ã£ hoÃ n thÃ nh viá»‡c há»c vá» nguyÃªn lÃ½ tá»± Ä‘á»™ng cáº¥u hÃ¬nh cá»§a Spring Boot.</p><p>Trong quÃ¡ trÃ¬nh hiá»ƒu nguyÃªn lÃ½ tá»± Ä‘á»™ng cáº¥u hÃ¬nh cá»§a Spring Boot, chÃºng ta sáº½ nháº­n tháº¥y ráº±ng, dÃ¹ lÃ  lá»›p cáº¥u hÃ¬nh hay chÃº thÃ­ch Ä‘iá»u kiá»‡n, thá»±c táº¿ Spring Ä‘Ã£ cung cáº¥p sáºµn. Tháº­m chÃ­, <code>SpringFactoriesLoader</code> cÅ©ng lÃ  má»™t sáº£n pháº©m cá»§a Spring. VÃ¬ váº­y, Spring Boot Ä‘Æ°á»£c xÃ¢y dá»±ng trÃªn ná»n táº£ng cá»§a Spring, thá»±c hiá»‡n má»™t cÆ¡ cháº¿ khá»Ÿi Ä‘á»™ng Boot.</p><p>Má»™t trong nhá»¯ng cá»‘t lÃµi cá»§a Spring lÃ  IOC, chá»‹u trÃ¡ch nhiá»‡m quáº£n lÃ½ vÃ²ng Ä‘á»i cá»§a Bean. CÃ²n Spring Boot thÃ¬ quáº£n lÃ½ vÃ²ng Ä‘á»i cá»§a á»©ng dá»¥ng Java.</p><ul><li>Trong thá»i Ä‘áº¡i cá»§a Spring, chÃºng ta thÆ°á»ng sá»­ dá»¥ng Tomcat nhÆ° má»™t container bÃªn ngoÃ i Ä‘á»ƒ cháº¡y á»©ng dá»¥ng Java, Spring chá»‰ lÃ  má»™t trong nhá»¯ng thÃ nh pháº§n.</li><li>Trong thá»i Ä‘áº¡i cá»§a Spring Boot, chÃºng ta sá»­ dá»¥ng Spring Boot Ä‘á»ƒ quáº£n lÃ½ viá»‡c cháº¡y á»©ng dá»¥ng Java, trong khi Tomcat nhÃºng láº¡i trá»Ÿ thÃ nh má»™t thÃ nh pháº§n trong Ä‘Ã³.</li></ul>`,103)]))}const p=s(h,[["render",e],["__file","autoconfig.html.vue"]]),k=JSON.parse('{"path":"/framework/spring-boot/autoconfig.html","title":"Spring Boot Auto Configuration","lang":"en-US","frontmatter":{"title":"Spring Boot Auto Configuration","tags":["java","spring-boot"],"categories":["spring-boot"],"order":2,"description":"Spring Boot Auto Configuration BÃ i viáº¿t nÃ y cung cáº¥p vÃ­ dá»¥ mÃ£ nguá»“n hoÃ n chá»‰nh, cÃ³ thá»ƒ xem táº¡i https://github.com/YunaiV/SpringBoot-Labs trong thÆ° má»¥c lab-47. Ná»™i dung gá»‘c khÃ´ng...","head":[["meta",{"property":"og:url","content":"https://vanhung4499.github.io/framework/spring-boot/autoconfig.html"}],["meta",{"property":"og:site_name","content":"VanHung4499"}],["meta",{"property":"og:title","content":"Spring Boot Auto Configuration"}],["meta",{"property":"og:description","content":"Spring Boot Auto Configuration BÃ i viáº¿t nÃ y cung cáº¥p vÃ­ dá»¥ mÃ£ nguá»“n hoÃ n chá»‰nh, cÃ³ thá»ƒ xem táº¡i https://github.com/YunaiV/SpringBoot-Labs trong thÆ° má»¥c lab-47. Ná»™i dung gá»‘c khÃ´ng..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://static.iocoder.cn/images/Spring-Boot/2019-02-01/01.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-10-02T17:20:50.000Z"}],["meta",{"property":"article:author","content":"Hung Nguyen"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:tag","content":"spring-boot"}],["meta",{"property":"article:modified_time","content":"2024-10-02T17:20:50.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Spring Boot Auto Configuration\\",\\"image\\":[\\"https://static.iocoder.cn/images/Spring-Boot/2019-02-01/01.png\\",\\"https://static.iocoder.cn/images/Spring-Boot/2019-02-01/02.png\\",\\"https://static.iocoder.cn/images/Spring-Boot/2019-02-01/03.png\\",\\"https://static.iocoder.cn/images/Spring-Boot/2019-02-01/11.png\\",\\"https://static.iocoder.cn/images/Spring-Boot/2019-02-01/12.png\\",\\"https://static.iocoder.cn/images/Spring-Boot/2019-02-01/21.png\\"],\\"dateModified\\":\\"2024-10-02T17:20:50.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hung Nguyen\\",\\"url\\":\\"https://vanhung4499.github.io\\"}]}"]]},"headers":[{"level":2,"title":"1. Tá»•ng quan","slug":"_1-tong-quan","link":"#_1-tong-quan","children":[]},{"level":2,"title":"2. Lá»›p cáº¥u hÃ¬nh tá»± Ä‘á»™ng","slug":"_2-lop-cau-hinh-tu-Ä‘ong","link":"#_2-lop-cau-hinh-tu-Ä‘ong","children":[]},{"level":2,"title":"3. ChÃº thÃ­ch Ä‘iá»u kiá»‡n","slug":"_3-chu-thich-Ä‘ieu-kien","link":"#_3-chu-thich-Ä‘ieu-kien","children":[]},{"level":2,"title":"4. Thuá»™c tÃ­nh cáº¥u hÃ¬nh","slug":"_4-thuoc-tinh-cau-hinh","link":"#_4-thuoc-tinh-cau-hinh","children":[]},{"level":2,"title":"5. Starter tÃ­ch há»£p","slug":"_5-starter-tich-hop","link":"#_5-starter-tich-hop","children":[]},{"level":2,"title":"6. Tá»± táº¡o Starter","slug":"_6-tu-tao-starter","link":"#_6-tu-tao-starter","children":[{"level":3,"title":"6.1 Dá»± Ã¡n yunai-server-spring-boot-starter","slug":"_6-1-du-an-yunai-server-spring-boot-starter","link":"#_6-1-du-an-yunai-server-spring-boot-starter","children":[]},{"level":3,"title":"6.2 Dá»± Ã¡n lab-47-demo","slug":"_6-2-du-an-lab-47-demo","link":"#_6-2-du-an-lab-47-demo","children":[]},{"level":3,"title":"6.2.1 Nháº­p phá»¥ thuá»™c","slug":"_6-2-1-nhap-phu-thuoc","link":"#_6-2-1-nhap-phu-thuoc","children":[]},{"level":3,"title":"6.2.2 Tá»‡p cáº¥u hÃ¬nh","slug":"_6-2-2-tep-cau-hinh","link":"#_6-2-2-tep-cau-hinh","children":[]},{"level":3,"title":"6.2.3 DemoApplication","slug":"_6-2-3-demoapplication","link":"#_6-2-3-demoapplication","children":[]},{"level":3,"title":"6.2.4 Kiá»ƒm tra Ä‘Æ¡n giáº£n","slug":"_6-2-4-kiem-tra-Ä‘on-gian","link":"#_6-2-4-kiem-tra-Ä‘on-gian","children":[]}]}],"git":{"createdTime":1727889650000,"updatedTime":1727889650000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":15.54,"words":4661},"filePathRelative":"framework/spring-boot/autoconfig.md","localizedDate":"October 2, 2024","excerpt":"\\n<blockquote>\\n<p>BÃ i viáº¿t nÃ y cung cáº¥p vÃ­ dá»¥ mÃ£ nguá»“n hoÃ n chá»‰nh, cÃ³ thá»ƒ xem táº¡i <a href=\\"https://github.com/YunaiV/SpringBoot-Labs\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/YunaiV/SpringBoot-Labs</a> trong thÆ° má»¥c <a href=\\"https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-47\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">lab-47</a>.</p>\\n<p>Ná»™i dung gá»‘c khÃ´ng dá»… thá»±c hiá»‡n, hÃ£y á»§ng há»™ báº±ng cÃ¡ch nháº¥n <a href=\\"https://github.com/YunaiV/SpringBoot-Labs/stargazers\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Star</a> nhÃ©, cÃ¹ng nhau tiáº¿n lÃªn nÃ o!</p>\\n</blockquote>","autoDesc":true}');export{p as comp,k as data};
