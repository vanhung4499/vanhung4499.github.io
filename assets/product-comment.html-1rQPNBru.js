import{_ as n,o as a,c as s,a as i}from"./app-5QVbWi7Z.js";const d={};function c(p,e){return a(),s("div",null,e[0]||(e[0]=[i('<h1 id="【商品】商品评价" tabindex="-1"><a class="header-anchor" href="#【商品】商品评价"><span>【商品】商品评价</span></a></h1><h2 id="_1-表结构" tabindex="-1"><a class="header-anchor" href="#_1-表结构"><span><a href="#_1-%E8%A1%A8%E7%BB%93%E6%9E%84">#</a> 1. 表结构</span></a></h2><p>商品评价由 <code>yudao-module-product-biz</code> 后端模块的 <code>comment</code> 包实现，表结构如下：</p><blockquote><p>省略 creator/create_time/updater/update_time/deleted/tenant_id 等通用字段</p></blockquote><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>CREATE TABLE `product_comment` (</span></span>\n<span class="line"><span>  `id` bigint NOT NULL AUTO_INCREMENT COMMENT &#39;评价编号，主键自增&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `user_id` bigint NOT NULL COMMENT &#39;评价人的用户编号，关联 MemberUserDO 的 id 编号&#39;,</span></span>\n<span class="line"><span>  `user_nickname` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT &#39;评价人名称&#39;,</span></span>\n<span class="line"><span>  `user_avatar` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT &#39;评价人头像&#39;,</span></span>\n<span class="line"><span>  `anonymous` bit(1) NOT NULL COMMENT &#39;是否匿名&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `order_id` bigint DEFAULT &#39;0&#39; COMMENT &#39;交易订单编号，关联 TradeOrderDO 的 id 编号&#39;,</span></span>\n<span class="line"><span>  `order_item_id` bigint DEFAULT &#39;0&#39; COMMENT &#39;交易订单项编号，关联 TradeOrderItemDO 的 id 编号&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `spu_id` bigint NOT NULL COMMENT &#39;商品 SPU 编号，关联 ProductSpuDO 的 id&#39;,</span></span>\n<span class="line"><span>  `spu_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT &#39;商品 SPU 名称&#39;,</span></span>\n<span class="line"><span>  `sku_id` bigint NOT NULL COMMENT &#39;商品 SKU 编号，关联 ProductSkuDO 的 id 编号&#39;,</span></span>\n<span class="line"><span>  `sku_pic_url` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT &#39;图片地址&#39;,</span></span>\n<span class="line"><span>  `sku_properties` varchar(512) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT &#39;属性数组，JSON 格式 [{propertId: , valueId: }, {propertId: , valueId: }]&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `scores` tinyint NOT NULL COMMENT &#39;评分星级1-5分&#39;,</span></span>\n<span class="line"><span>  `description_scores` tinyint NOT NULL COMMENT &#39;描述星级 1-5 星&#39;,</span></span>\n<span class="line"><span>  `benefit_scores` tinyint NOT NULL COMMENT &#39;服务星级 1-5 星&#39;,</span></span>\n<span class="line"><span>  `content` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT &#39;评价内容&#39;,</span></span>\n<span class="line"><span>  `pic_urls` varchar(4096) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT &#39;评价图片地址数组&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `visible` bit(1) DEFAULT NULL COMMENT &#39;是否可见，true:显示false:隐藏&#39;,</span></span>\n<span class="line"><span>  `reply_status` bit(1) DEFAULT b&#39;0&#39; COMMENT &#39;商家是否回复&#39;,</span></span>\n<span class="line"><span>  `reply_user_id` bigint DEFAULT NULL COMMENT &#39;回复管理员编号，关联 AdminUserDO 的 id 编号&#39;,</span></span>\n<span class="line"><span>  `reply_content` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT &#39;商家回复内容&#39;,</span></span>\n<span class="line"><span>  `reply_time` datetime DEFAULT NULL COMMENT &#39;商家回复时间&#39;,</span></span>\n<span class="line"><span>  PRIMARY KEY (`id`) USING BTREE</span></span>\n<span class="line"><span>) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT=&#39;商品评价&#39;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>① <code>user_id</code>、<code>user_nickname</code>、<code>user_avatar</code>、<code>anonymous</code> 字段，会员用户相关信息。</p><p>② <code>order_id</code>、<code>order_item_id</code> 字段，交易订单相关信息。下单的每个订单项（商品），都可以评价一次，所以这里可以看到 <code>order_item_id</code> 字段。</p><p>③ <code>spu_id</code>、<code>spu_name</code>、<code>sku_id</code>、<code>sku_pic_url</code>、<code>sku_properties</code> 字段，商品 SPU、SKU 相关信息。通过冗余这些商品字段，可以减少关联查询，提高查询效率。</p><p>④ <code>description_scores</code>、<code>benefit_scores</code>、<code>content</code>、<code>pic_urls</code> 字段，会员用户的评价信息。而 <code>score</code> 字段是 <code>description_scores</code>、<code>benefit_scores</code> 两个字段的平均值。</p><p>⑤ <code>reply_status</code>、<code>reply_user_id</code>、<code>reply_content</code>、<code>reply_time</code> 字段，商家回复相关信息。</p><p><code>visible</code> 字段，控制评价在 uni-app 是否可见，默认为 <code>true</code>，可以通过管理后台修改。</p><h2 id="_2-管理后台" tabindex="-1"><a class="header-anchor" href="#_2-管理后台"><span><a href="#_2-%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0">#</a> 2. 管理后台</span></a></h2><p>对应 [商城系统 -&gt; 商品中心 -&gt; 商品评价] 菜单，对应 <code>yudao-ui-admin-vue3</code> 项目的 <code>@/views/mall/product/comment</code> 目录。</p><figure><img src="https://doc.iocoder.cn/img/商城手册/商品评价/管理后台-评价列表.png" alt="评价列表" tabindex="0" loading="lazy"><figcaption>评价列表</figcaption></figure><p>① 点击「添加虚拟评价」按钮，可以给某个商品添加虚拟评价，用于商品详情页的评价展示。</p><p>② 点击「回复」按钮，可以回复某个评价。</p><p>③ 点击「是否展示」按钮，可以控制评价在 uni-app 是否可见。</p><h2 id="_3-移动端" tabindex="-1"><a class="header-anchor" href="#_3-移动端"><span><a href="#_3-%E7%A7%BB%E5%8A%A8%E7%AB%AF">#</a> 3. 移动端</span></a></h2><h3 id="_3-1-评价列表" tabindex="-1"><a class="header-anchor" href="#_3-1-评价列表"><span><a href="#_3-1-%E8%AF%84%E4%BB%B7%E5%88%97%E8%A1%A8">#</a> 3.1 评价列表</span></a></h3><p>① 商品详情页，展示近 3 条评价，由 <code>yudao-ui-uniapp</code> 项目的 <code>pages/goods/components/detail/detail-comment-card.vue</code> 实现。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/商城手册/商品评价/移动端-商品详情-评价列表.png" alt="商品详情页-评价列表" tabindex="0" loading="lazy"><figcaption>商品详情页-评价列表</figcaption></figure><p>② 点击「查看全部」按钮，进入商品评价列表页，由 <code>yudao-ui-uniapp</code> 项目的 <code>pages/goods/comment/list.vue</code> 实现。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/商城手册/商品评价/移动端-评价列表.png" alt="评价列表" tabindex="0" loading="lazy"><figcaption>评价列表</figcaption></figure><h3 id="_3-2-添加评价" tabindex="-1"><a class="header-anchor" href="#_3-2-添加评价"><span><a href="#_3-2-%E6%B7%BB%E5%8A%A0%E8%AF%84%E4%BB%B7">#</a> 3.2 添加评价</span></a></h3><p>在订单确认售后后，可以对商品进行评价，由 <code>yudao-ui-uniapp</code> 项目的 <code>pages/goods/comment/add.vue</code> 实现。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/商城手册/商品评价/移动端-待评价订单.png" alt="待评价订单" tabindex="0" loading="lazy"><figcaption>待评价订单</figcaption></figure><figure><img src="https://doc.iocoder.cn/img/商城手册/商品评价/移动端-添加评价.png" alt="添加评价" tabindex="0" loading="lazy"><figcaption>添加评价</figcaption></figure>',27)]))}const r=n(d,[["render",c],["__file","product-comment.html.vue"]]),o=JSON.parse('{"path":"/project/rouyi-vue-pro/mall/product-comment.html","title":"【商品】商品评价","lang":"en-US","frontmatter":{"title":"【商品】商品评价","tags":["project","java","spring-boot","spring-cloud"],"categories":["project"],"order":94,"feed":false,"seo":false,"head":[]},"headers":[{"level":2,"title":"# 1. 表结构","slug":"_1-表结构","link":"#_1-表结构","children":[]},{"level":2,"title":"# 2. 管理后台","slug":"_2-管理后台","link":"#_2-管理后台","children":[]},{"level":2,"title":"# 3. 移动端","slug":"_3-移动端","link":"#_3-移动端","children":[{"level":3,"title":"# 3.1 评价列表","slug":"_3-1-评价列表","link":"#_3-1-评价列表","children":[]},{"level":3,"title":"# 3.2 添加评价","slug":"_3-2-添加评价","link":"#_3-2-添加评价","children":[]}]}],"git":{"createdTime":1720365235000,"updatedTime":1720365235000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":3.69,"words":1107},"filePathRelative":"project/rouyi-vue-pro/mall/product-comment.md","localizedDate":"July 7, 2024"}');export{r as comp,o as data};
