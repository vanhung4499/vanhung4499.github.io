import{_ as e,o as i,c as a,a as t}from"./app-BRTHG7K9.js";const c={},o=t('<h1 id="表结构变更-版本升级" tabindex="-1"><a class="header-anchor" href="#表结构变更-版本升级"><span>表结构变更（版本升级）</span></a></h1><p>系统每次发新版本，会伴随着数据库表结构、数据的变更。这个时候，我们可以通过 Navicat 提供的「结构同步」「数据同步」功能，来进行数据库的升级。</p><figure><img src="https://doc.iocoder.cn/img/后端手册/表结构变更/Navicat.png" alt="Navicat" tabindex="0" loading="lazy"><figcaption>Navicat</figcaption></figure><p>友情提示：</p><p>你自己的项目发布上线，如果涉及到数据库表结构的变更，也可以试试 Navicat 的「结构同步」「数据同步」功能。</p><p>我们之前项目，蛮多同学都是这么干的，避免漏字段！</p><h2 id="_1-结构同步" tabindex="-1"><a class="header-anchor" href="#_1-结构同步"><span><a href="#_1-%E7%BB%93%E6%9E%84%E5%90%8C%E6%AD%A5">#</a> 1. 结构同步</span></a></h2><p>本小节，我们以 <code>2.0.0</code> 版本升级到 <code>2.1.0</code> 版本为例。需要先自己初始化对应的两个数据库，如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/后端手册/表结构变更/结构同步的数据库.png" alt="结构同步的数据库" tabindex="0" loading="lazy"><figcaption>结构同步的数据库</figcaption></figure><p>① 点击 Navicat 的 [工具 -&gt; 结构同步] 菜单，配置源数据库是 <code>2.1.0</code>，目标数据库是 <code>2.0.0</code>，因为是将“新”应到“老”数据库。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/后端手册/表结构变更/结构同步的新老数据库.png" alt="结构同步的新老数据库" tabindex="0" loading="lazy"><figcaption>结构同步的新老数据库</figcaption></figure><p>② 点击左下角的 [选项] 按钮，取消掉“比较自动递增值”，因为我们不希望自增值也同步。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/后端手册/表结构变更/结构同步的选项.png" alt="结构同步的选项" tabindex="0" loading="lazy"><figcaption>结构同步的选项</figcaption></figure><p>③ 点击右下角的 [下一步] 按钮，可以看到每个表的表更情况（新增、修改、删除）。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/后端手册/表结构变更/结构同步的表更情况.png" alt="结构同步的表更情况" tabindex="0" loading="lazy"><figcaption>结构同步的表更情况</figcaption></figure><p>此时，如果你只想看部分表的变更，可以点击“源对象”下的选项，取消掉不需要同步的表。</p><p>④ 继续点击右下角的 [下一步] 按钮，可以看到具体的 SQL 变更语句。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/后端手册/表结构变更/结构同步的SQL变更语句.png" alt="结构同步的 SQL 变更语句" tabindex="0" loading="lazy"><figcaption>结构同步的 SQL 变更语句</figcaption></figure><p>注意，不要点击有效的 [开始] 按钮，而是将 SQL 语句复制出来，二次检查后，选择你需要的部分，手动执行变更！</p><p>友情提示：DataGrip 也提供类似功能，后面也可以尝试下。</p><p><a href="https://blog.csdn.net/qq_43780340/article/details/125872609" target="_blank" rel="noopener noreferrer">《使用 datagrip 实现不同数据库表之间的结构同步》</a></p><h2 id="_2-数据同步" tabindex="-1"><a class="header-anchor" href="#_2-数据同步"><span><a href="#_2-%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5">#</a> 2. 数据同步</span></a></h2><p>Navicat 的「数据同步」功能，和「结构同步」同步是一致的，只是在最后一步，会展示数据的变更情况（新增、修改、删除），这里就不重复演示了。</p><figure><img src="https://doc.iocoder.cn/img/后端手册/表结构变更/数据同步.png" alt="数据同步" tabindex="0" loading="lazy"><figcaption>数据同步</figcaption></figure><p>系统绝大多数表的数据变更不用关注，只需要关注偏 <strong>全局配置</strong> 的表，例如说：</p><ul><li>字段相关：<code>system_dict_type</code>、<code>system_dict_data</code></li><li>权限相关：<code>system_menu</code></li><li>邮件相关：<code>system_mail_template</code></li><li>短信相关：<code>system_sms_template</code></li><li>站内信相关：<code>system_notify_template</code></li></ul>',26),n=[o];function p(d,r){return i(),a("div",null,n)}const s=e(c,[["render",p],["__file","sql-update.html.vue"]]),g=JSON.parse('{"path":"/project/rouyi-vue-pro/sql-update.html","title":"表结构变更（版本升级）","lang":"en-US","frontmatter":{"title":"表结构变更（版本升级）","tags":["project","java","spring-boot","spring-cloud"],"categories":["project"],"order":15,"feed":false,"seo":false,"head":[]},"headers":[{"level":2,"title":"# 1. 结构同步","slug":"_1-结构同步","link":"#_1-结构同步","children":[]},{"level":2,"title":"# 2. 数据同步","slug":"_2-数据同步","link":"#_2-数据同步","children":[]}],"git":{"createdTime":1720365235000,"updatedTime":1720365235000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":3.25,"words":974},"filePathRelative":"project/rouyi-vue-pro/sql-update.md","localizedDate":"July 7, 2024"}');export{s as comp,g as data};
