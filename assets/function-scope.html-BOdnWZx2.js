import{_ as s,o as n,c as a,d as i}from"./app-DELCaB9c.js";const t={},o=i(`<h1 id="pham-vi-cua-ham-function-scope" tabindex="-1"><a class="header-anchor" href="#pham-vi-cua-ham-function-scope"><span>Phạm vi của hàm (Function Scope)</span></a></h1><p><strong>Phạm vi của hàm</strong> đề cập đến việc tất cả các biến thuộc về hàm đó có thể được sử dụng và tái sử dụng trong toàn bộ phạm vi của hàm (thậm chí trong các phạm vi lồng nhau). Điều này rất hữu ích và tận dụng được tính động của JavaScript, trong đó biến có thể thay đổi kiểu giá trị theo nhu cầu.</p><h2 id="an-đi-chi-tiet-ben-trong" tabindex="-1"><a class="header-anchor" href="#an-đi-chi-tiet-ben-trong"><span>Ẩn đi chi tiết bên trong</span></a></h2><p>Truyền thống, chúng ta thường khai báo một hàm trước, sau đó thêm mã vào bên trong nó. Nhưng nếu nghĩ theo chiều ngược lại, nó cũng mang lại một số thông tin: chọn một đoạn mã bất kỳ từ mã đã viết, sau đó bọc nó trong một khai báo hàm, thực tế là ẩn đi đoạn mã đó.</p><p>Kết quả thực tế là tạo ra một bong bóng phạm vi xung quanh đoạn mã đó, có nghĩa là bất kỳ khai báo nào (biến hoặc hàm) trong đoạn mã đó sẽ được ràng buộc trong phạm vi của hàm mới được tạo ra, chứ không phải là phạm vi trước đó. Nói cách khác, có thể bọc biến và hàm trong phạm vi của một hàm và sử dụng phạm vi đó để ẩn chúng.</p><p>Có nhiều lý do dẫn đến phương pháp ẩn danh này dựa trên phạm vi. Hầu hết chúng xuất phát từ <a href="https://en.wikipedia.org/wiki/Principle_of_least_privilege" target="_blank" rel="noopener noreferrer">Principle of least privilege</a> trong thiết kế phần mềm.</p><p>Nguyên tắc này đề cập đến việc chỉ tiết lộ nội dung cần thiết nhất trong thiết kế API của một mô-đun hoặc đối tượng. Nguyên tắc này có thể được mở rộng để áp dụng cho cách chọn phạm vi để chứa biến và hàm. Nếu tất cả biến và hàm đều nằm trong phạm vi toàn cục, chúng có thể được truy cập từ bất kỳ phạm vi lồng nhau nào. Tuy nhiên, điều này sẽ vi phạm nguyên tắc tối thiểu quyền, vì có thể tiết lộ quá nhiều biến hoặc hàm mà thực tế nên là riêng tư. Một thiết kế tốt hơn sẽ ẩn các nội dung cụ thể này trong phạm vi của một hàm.</p><p>🌰 <strong>Ví dụ code</strong>:</p><div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> doSomething</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  b</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> a</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> doSomethingElse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;">a</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> *</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">  console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;">b</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> *</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> doSomethingElse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  return</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> a</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">var</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> b</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">doSomething</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// 15</span></span></code></pre></div><p>Trong đoạn mã này, biến <code>b</code> và hàm <code>doSomethingElse</code> nên là các nội dung riêng tư của cài đặt cụ thể bên trong <code>doSomething</code>. Cho phép truy cập từ phạm vi bên ngoài vào <code>b</code> và <code>doSomethingElse</code> không chỉ không cần thiết mà còn có thể nguy hiểm, vì chúng có thể được sử dụng một cách không mong muốn hoặc không đúng. Một thiết kế tốt hơn sẽ ẩn các nội dung cụ thể này trong <code>doSomething</code>.</p><p>🌰 <strong>Ví dụ code</strong>:</p><div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> doSomething</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> doSomethingElse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> a</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  var</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> b</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  b</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> a</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> doSomethingElse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;">a</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> *</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">  console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;">b</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> *</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">doSomething</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// 15</span></span></code></pre></div><p>Bây giờ, <code>b</code> và <code>doSomethingElse</code> không thể truy cập từ bên ngoài và chỉ có thể được kiểm soát bởi <code>doSomething</code>. Chức năng và kết quả cuối cùng không bị ảnh hưởng, nhưng thiết kế đã ẩn đi các nội dung cụ thể, điều này làm cho phần mềm có thiết kế tốt hơn.</p><h2 id="tranh-xung-đot-ten" tabindex="-1"><a class="header-anchor" href="#tranh-xung-đot-ten"><span>Tránh xung đột tên</span></a></h2><p>Biến và hàm trong phạm vi ẩn có thể tránh được xung đột giữa các định danh có cùng tên nhưng có mục đích khác nhau. Hai định danh có thể có cùng tên nhưng lại có mục đích khác nhau, và điều này có thể gây ra xung đột tên không mong muốn. Xung đột có thể dẫn đến việc giá trị của biến bị ghi đè một cách không mong muốn.</p><p>🌰 <strong>Ví dụ</strong>:</p><div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> foo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> bar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // Sửa đổi biến i trong phạm vi vòng lặp for</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">    console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;">a</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> i</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">var</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">; </span><span style="color:#E06C75;--shiki-dark:#E06C75;">i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> &lt;</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">; </span><span style="color:#E06C75;--shiki-dark:#E06C75;">i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">++</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // Lỗi, vòng lặp vô hạn!</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    bar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;">i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> *</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">foo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span></code></pre></div><h3 id="khong-gian-ten-toan-cuc" tabindex="-1"><a class="header-anchor" href="#khong-gian-ten-toan-cuc"><span>Không gian tên toàn cục</span></a></h3><p>Một ví dụ điển hình về xung đột biến tồn tại trong phạm vi toàn cục. Khi chương trình tải nhiều thư viện bên thứ ba, nếu chúng không ẩn các hàm hoặc biến riêng tư bên trong một cách hợp lý, xung đột có thể xảy ra dễ dàng.</p><p>Thường thì các thư viện này sẽ khai báo một biến có tên độc đáo đủ để sử dụng làm không gian tên cho thư viện. Biến này được sử dụng như một không gian tên cho thư viện, tất cả các chức năng cần được tiết lộ cho bên ngoài đều trở thành các thuộc tính của đối tượng này (không gian tên), thay vì tiết lộ các định danh riêng lẻ trong phạm vi từ điển trên cùng.</p><div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> MyReallyCoolLibrary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  awesome</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;stuff&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">  doSomething</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">  doAnotherThing</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">};</span></span></code></pre></div><h3 id="quan-ly-module" tabindex="-1"><a class="header-anchor" href="#quan-ly-module"><span>Quản lý module</span></a></h3><p>Một cách khác để tránh xung đột là sử dụng một trong nhiều công cụ quản lý module hiện đại. Bằng cách sử dụng các công cụ này, thư viện không cần phải thêm các định danh vào phạm vi toàn cục, mà thay vào đó sẽ nhập các định danh của thư viện một cách rõ ràng vào một phạm vi cụ thể khác.</p><p>Rõ ràng là các công cụ này không thể vi phạm quy tắc phạm vi từ điển. Chúng chỉ sử dụng quy tắc phạm vi để buộc tất cả các định danh không được chèn vào phạm vi chia sẻ, mà thay vào đó giữ chúng trong phạm vi riêng tư, không xung đột,</p><p>Vì vậy, nếu bạn muốn, bạn có thể đạt được hiệu quả tránh xung đột mà không cần sử dụng bất kỳ công cụ quản lý phụ thuộc nào.</p><p>Thêm một hàm bao ngoài đoạn mã bất kỳ sẽ &quot;ẩn&quot; các biến và hàm bên trong định nghĩa của nó, và bên ngoài phạm vi không thể truy cập bất kỳ nội dung nào của hàm bao ngoài.</p><div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> a</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> foo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">  // &lt;-- Thêm dòng này</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> a</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">  console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;">a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// 3</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">} </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// &lt;-- Và dòng này</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">foo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// &lt;-- Và dòng này</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;">a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">); </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// 2</span></span></code></pre></div><p>Mặc dù kỹ thuật này có thể giải quyết một số vấn đề, nhưng nó không phải là lựa chọn lý tưởng vì nó gây ra một số vấn đề bổ sung. Trước tiên, phải khai báo một hàm có tên <code>foo()</code>, có nghĩa là tên <code>foo</code> này &quot;lây nhiễm&quot; vào phạm vi chứa nó (trong ví dụ này là phạm vi toàn cục). Thứ hai, phải gọi hàm <code>foo()</code> một cách rõ ràng bằng tên hàm để chạy mã bên trong nó.</p><p>Nếu hàm không cần tên (hoặc ít nhất là tên hàm không làm ô nhiễm phạm vi chứa nó) và có thể tự động chạy, điều này sẽ lý tưởng hơn.</p><h2 id="ham-vo-danh-va-ham-co-ten" tabindex="-1"><a class="header-anchor" href="#ham-vo-danh-va-ham-co-ten"><span>Hàm vô danh và hàm có tên</span></a></h2><p>Cả hàm vô danh và hàm có tên đều áp dụng cho <strong>biểu thức hàm</strong>. Khai báo hàm phải có tên, nếu không sẽ bị lỗi.</p><div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// Khai báo hàm</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> foo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">  // làm gì đó</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>Trong khi đó, biểu thức hàm có thể có hoặc không có tên.</p><p><strong>Biểu thức hàm vô danh:</strong></p><div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">let</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> foo</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">  // làm gì đó</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">foo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E06C75;--shiki-dark:#E06C75;">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// foo</span></span></code></pre></div><p><strong>Biểu thức hàm có tên:</strong></p><div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// Không nên viết như này</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">let</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> bar</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> foobar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">  // làm gì đó</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">bar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E06C75;--shiki-dark:#E06C75;">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// foobar</span></span></code></pre></div><p>Một trong những tình huống mà chúng ta quen thuộc nhất với biểu thức hàm có lẽ là sử dụng chúng như là các tham số callback.</p><div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">setTimeout</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">  console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;Tôi đã chờ 1 giây!&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><p>Đây được gọi là <strong>biểu thức hàm vô danh</strong>, vì <code>function(){}</code> không có tên định danh.</p><p>⚠️ <strong>Lưu ý</strong>: Biểu thức hàm có thể là vô danh, trong khi <strong>khai báo hàm</strong> không thể bỏ qua tên hàm.</p><p>Nhược điểm của biểu thức hàm vô danh:</p><ul><li>Hàm vô danh không hiển thị tên hàm có ý nghĩa trong theo dõi ngăn xếp, làm cho việc gỡ lỗi trở nên khó khăn</li><li>Nếu không có tên hàm, khi hàm cần tham chiếu đến chính nó, chỉ có thể sử dụng tham chiếu <code>arguments.callee</code> đã bị lỗi. Ví dụ, trong đệ quy, một hàm khác cần tham chiếu đến chính nó, ví dụ là khi bộ lắng nghe sự kiện cần hủy bỏ bộ lắng nghe của chính nó</li><li>Hàm vô danh bỏ qua tên hàm, làm mất đi tính dễ đọc / hiểu được của mã. Một tên mô tả có thể làm cho mã trở nên rõ ràng</li></ul><p>Biểu thức hàm có tên rất mạnh mẽ và hữu ích - sự khác biệt giữa vô danh và có tên không ảnh hưởng đến điều này. Đặt tên cho biểu thức hàm có thể giải quyết hiệu quả các vấn đề trên. Luôn đặt tên cho biểu thức hàm là một quy tắc tốt nhất.</p><h2 id="bieu-thuc-ham-thuc-thi-ngay-lap-tuc-iife" tabindex="-1"><a class="header-anchor" href="#bieu-thuc-ham-thuc-thi-ngay-lap-tuc-iife"><span>Biểu thức hàm thực thi ngay lập tức IIFE</span></a></h2><p>Biểu thức hàm thực thi ngay lập tức, còn được gọi là <strong>hàm tự thực thi</strong>, được đặt tên là <strong>IIFE</strong> (Immediately Invoked Function Expression).</p><p>🌰 <strong>Ví dụ</strong>:</p><div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">  // làm gì đó</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">  console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;IIFE&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">})();</span></span></code></pre></div><p>Một ứng dụng tiên tiến khá phổ biến của IIFE là sử dụng chúng như một cuộc gọi hàm và truyền tham số vào.</p><div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">var</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> a</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> IIFE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">global</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  var</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> a</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">  console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;">a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">  // 3</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">  console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">global</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E06C75;--shiki-dark:#E06C75;">a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">  // 2</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">})(</span><span style="color:#E06C75;--shiki-dark:#E06C75;">window</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;">a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// 2</span></span></code></pre></div>`,50),l=[o];function c(p,r){return n(),a("div",null,l)}const e=s(t,[["render",c],["__file","function-scope.html.vue"]]),k=JSON.parse('{"path":"/programming/js/core/excute-and-contexts/compilation/function-scope.html","title":"Function Scope","lang":"en-US","frontmatter":{"title":"Function Scope","tags":["js","programming"],"categories":["js","programming"],"date created":"2023-08-01T00:00:00.000Z","date modified":"2023-08-01T00:00:00.000Z","order":3,"description":"Phạm vi của hàm (Function Scope) Phạm vi của hàm đề cập đến việc tất cả các biến thuộc về hàm đó có thể được sử dụng và tái sử dụng trong toàn bộ phạm vi của hàm (thậm chí trong...","head":[["meta",{"property":"og:url","content":"https://vanhung4499.github.io/programming/js/core/excute-and-contexts/compilation/function-scope.html"}],["meta",{"property":"og:site_name","content":"VanHung4499"}],["meta",{"property":"og:title","content":"Function Scope"}],["meta",{"property":"og:description","content":"Phạm vi của hàm (Function Scope) Phạm vi của hàm đề cập đến việc tất cả các biến thuộc về hàm đó có thể được sử dụng và tái sử dụng trong toàn bộ phạm vi của hàm (thậm chí trong..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-06-28T15:54:38.000Z"}],["meta",{"property":"article:author","content":"Hung Nguyen"}],["meta",{"property":"article:tag","content":"js"}],["meta",{"property":"article:tag","content":"programming"}],["meta",{"property":"article:modified_time","content":"2024-06-28T15:54:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Function Scope\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-06-28T15:54:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hung Nguyen\\",\\"url\\":\\"https://vanhung4499.github.io\\"}]}"]]},"headers":[{"level":2,"title":"Ẩn đi chi tiết bên trong","slug":"an-đi-chi-tiet-ben-trong","link":"#an-đi-chi-tiet-ben-trong","children":[]},{"level":2,"title":"Tránh xung đột tên","slug":"tranh-xung-đot-ten","link":"#tranh-xung-đot-ten","children":[{"level":3,"title":"Không gian tên toàn cục","slug":"khong-gian-ten-toan-cuc","link":"#khong-gian-ten-toan-cuc","children":[]},{"level":3,"title":"Quản lý module","slug":"quan-ly-module","link":"#quan-ly-module","children":[]}]},{"level":2,"title":"Hàm vô danh và hàm có tên","slug":"ham-vo-danh-va-ham-co-ten","link":"#ham-vo-danh-va-ham-co-ten","children":[]},{"level":2,"title":"Biểu thức hàm thực thi ngay lập tức IIFE","slug":"bieu-thuc-ham-thuc-thi-ngay-lap-tuc-iife","link":"#bieu-thuc-ham-thuc-thi-ngay-lap-tuc-iife","children":[]}],"git":{"createdTime":1719590078000,"updatedTime":1719590078000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":6.94,"words":2083},"filePathRelative":"programming/js/core/excute-and-contexts/compilation/function-scope.md","localizedDate":"June 28, 2024","excerpt":"\\n<p><strong>Phạm vi của hàm</strong> đề cập đến việc tất cả các biến thuộc về hàm đó có thể được sử dụng và tái sử dụng trong toàn bộ phạm vi của hàm (thậm chí trong các phạm vi lồng nhau). Điều này rất hữu ích và tận dụng được tính động của JavaScript, trong đó biến có thể thay đổi kiểu giá trị theo nhu cầu.</p>","autoDesc":true}');export{e as comp,k as data};
