import{_ as n,o as a,c as e,a as l}from"./app-5QVbWi7Z.js";const i={};function p(d,s){return a(),e("div",null,s[0]||(s[0]=[l(`<h1 id="crud-组件" tabindex="-1"><a class="header-anchor" href="#crud-组件"><span>CRUD 组件</span></a></h1><p>管理后台的功能，一般就是 CRUD 增删改查，可以拆分 3 个部分：“列表”、“新增/修改”、“详情”，如下图所示：</p><table><thead><tr><th>部分</th><th>组件</th><th>示例</th></tr></thead><tbody><tr><td>列表</td><td>Search + Table</td><td>列表</td></tr><tr><td>新增 / 修改</td><td>Form</td><td>表单</td></tr><tr><td>详情</td><td>Descriptions</td><td>详情</td></tr></tbody></table><h2 id="_1-基础组件" tabindex="-1"><a class="header-anchor" href="#_1-基础组件"><span><a href="#_1-%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6">#</a> 1. 基础组件</span></a></h2><p>涉及到 4 个前端基础组件，如下所示：</p><table><thead><tr><th>组件</th><th>文档</th></tr></thead><tbody><tr><td><a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/Search/src/Search.vue" target="_blank" rel="noopener noreferrer">Search</a></td><td><a href="https://element-plus-admin-doc.cn/components/search.html" target="_blank" rel="noopener noreferrer">查询组件</a></td></tr><tr><td><a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/Table/src/Table.vue" target="_blank" rel="noopener noreferrer">Table</a></td><td><a href="https://element-plus-admin-doc.cn/components/table.html" target="_blank" rel="noopener noreferrer">表格组件</a></td></tr><tr><td><a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/Form/src/Form.vue" target="_blank" rel="noopener noreferrer">Form</a></td><td><a href="https://element-plus-admin-doc.cn/components/form.html" target="_blank" rel="noopener noreferrer">表单组件</a></td></tr><tr><td><a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/Descriptions/src/Descriptions.vue" target="_blank" rel="noopener noreferrer">Descriptions</a></td><td><a href="https://element-plus-admin-doc.cn/components/descriptions.html" target="_blank" rel="noopener noreferrer">描述组件</a></td></tr></tbody></table><h2 id="_2-crud-组件" tabindex="-1"><a class="header-anchor" href="#_2-crud-组件"><span><a href="#_2-crud-%E7%BB%84%E4%BB%B6">#</a> 2. CRUD 组件</span></a></h2><p>由于以上 4 个组件都需要 Schema 或者 <code>columns</code> 的字段，如果每个组件都写一遍的话，会造成大量重复代码，所以提供 useCrudSchemas 来进行统一的数据生成。</p><p>① useCrudSchemas：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/hooks/web/useCrudSchemas.ts" target="_blank" rel="noopener noreferrer">src/hooks/web/useCrudSchemas.ts</a> 内</p><p>② useCrudSchemas 可以理解成一个 JSON 配置，示例如下：</p><p>useCrudSchemas 示例</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>&lt;script setup lang=&quot;ts&quot;&gt;</span></span>
<span class="line"><span>import { CrudSchema, useCrudSchemas } from &#39;@/hooks/web/useCrudSchemas&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const crudSchemas = reactive&lt;CrudSchema[]&gt;([</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        field: &#39;index&#39;,</span></span>
<span class="line"><span>        label: t(&#39;tableDemo.index&#39;),</span></span>
<span class="line"><span>        type: &#39;index&#39;,</span></span>
<span class="line"><span>        form: {</span></span>
<span class="line"><span>            show: false</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        detail: {</span></span>
<span class="line"><span>            show: false</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        field: &#39;title&#39;,</span></span>
<span class="line"><span>        label: t(&#39;tableDemo.title&#39;),</span></span>
<span class="line"><span>        search: {</span></span>
<span class="line"><span>            show: true</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        form: {</span></span>
<span class="line"><span>            colProps: {</span></span>
<span class="line"><span>                span: 24</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        detail: {</span></span>
<span class="line"><span>            span: 24</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        field: &#39;author&#39;,</span></span>
<span class="line"><span>        label: t(&#39;tableDemo.author&#39;)</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        field: &#39;display_time&#39;,</span></span>
<span class="line"><span>        label: t(&#39;tableDemo.displayTime&#39;),</span></span>
<span class="line"><span>        form: {</span></span>
<span class="line"><span>            component: &#39;DatePicker&#39;,</span></span>
<span class="line"><span>            componentProps: {</span></span>
<span class="line"><span>                type: &#39;datetime&#39;,</span></span>
<span class="line"><span>                valueFormat: &#39;YYYY-MM-DD HH:mm:ss&#39;</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        field: &#39;importance&#39;,</span></span>
<span class="line"><span>        label: t(&#39;tableDemo.importance&#39;),</span></span>
<span class="line"><span>        formatter: (_: Recordable, __: TableColumn, cellValue: number) =&gt; {</span></span>
<span class="line"><span>            return h(</span></span>
<span class="line"><span>                ElTag,</span></span>
<span class="line"><span>                {</span></span>
<span class="line"><span>                    type: cellValue === 1 ? &#39;success&#39; : cellValue === 2 ? &#39;warning&#39; : &#39;danger&#39;</span></span>
<span class="line"><span>                },</span></span>
<span class="line"><span>                () =&gt;</span></span>
<span class="line"><span>                    cellValue === 1</span></span>
<span class="line"><span>                        ? t(&#39;tableDemo.important&#39;)</span></span>
<span class="line"><span>                        : cellValue === 2</span></span>
<span class="line"><span>                            ? t(&#39;tableDemo.good&#39;)</span></span>
<span class="line"><span>                            : t(&#39;tableDemo.commonly&#39;)</span></span>
<span class="line"><span>            )</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        form: {</span></span>
<span class="line"><span>            component: &#39;Select&#39;,</span></span>
<span class="line"><span>            componentProps: {</span></span>
<span class="line"><span>                options: [</span></span>
<span class="line"><span>                    {</span></span>
<span class="line"><span>                        label: &#39;重要&#39;,</span></span>
<span class="line"><span>                        value: 3</span></span>
<span class="line"><span>                    },</span></span>
<span class="line"><span>                    {</span></span>
<span class="line"><span>                        label: &#39;良好&#39;,</span></span>
<span class="line"><span>                        value: 2</span></span>
<span class="line"><span>                    },</span></span>
<span class="line"><span>                    {</span></span>
<span class="line"><span>                        label: &#39;一般&#39;,</span></span>
<span class="line"><span>                        value: 1</span></span>
<span class="line"><span>                    }</span></span>
<span class="line"><span>                ]</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        field: &#39;pageviews&#39;,</span></span>
<span class="line"><span>        label: t(&#39;tableDemo.pageviews&#39;),</span></span>
<span class="line"><span>        form: {</span></span>
<span class="line"><span>            component: &#39;InputNumber&#39;,</span></span>
<span class="line"><span>            value: 0</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        field: &#39;content&#39;,</span></span>
<span class="line"><span>        label: t(&#39;exampleDemo.content&#39;),</span></span>
<span class="line"><span>        table: {</span></span>
<span class="line"><span>            show: false</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        form: {</span></span>
<span class="line"><span>            component: &#39;Editor&#39;,</span></span>
<span class="line"><span>            colProps: {</span></span>
<span class="line"><span>                span: 24</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        detail: {</span></span>
<span class="line"><span>            span: 24</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        field: &#39;action&#39;,</span></span>
<span class="line"><span>        width: &#39;260px&#39;,</span></span>
<span class="line"><span>        label: t(&#39;tableDemo.action&#39;),</span></span>
<span class="line"><span>        form: {</span></span>
<span class="line"><span>            show: false</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        detail: {</span></span>
<span class="line"><span>            show: false</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>])</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const { allSchemas } = useCrudSchemas(crudSchemas)</span></span>
<span class="line"><span>&lt;/script&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>③ 字段的详细说明，可见 <a href="https://element-plus-admin-doc.cn/hooks/useCrudSchemas.html" target="_blank" rel="noopener noreferrer">useCrudSchemas 文档</a>。</p><h2 id="_3-实战案例" tabindex="-1"><a class="header-anchor" href="#_3-实战案例"><span><a href="#_3-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B">#</a> 3. 实战案例</span></a></h2><p>项目的 [系统管理 -&gt; 邮箱管理] 相关的功能，都使用 CRUD 实现，你可以自己去学习。</p><table><thead><tr><th>功能</th><th>代码</th></tr></thead><tbody><tr><td>邮箱账号</td><td><a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/system/mail/account/" target="_blank" rel="noopener noreferrer">src/views/system/mail/account</a></td></tr><tr><td>邮箱模版</td><td><a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/system/mail/template/" target="_blank" rel="noopener noreferrer">src/views/system/mail/template</a></td></tr><tr><td>邮箱记录</td><td><a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/system/mail/log/" target="_blank" rel="noopener noreferrer">src/views/system/mail/log</a></td></tr></tbody></table><h2 id="_4-常见问题" tabindex="-1"><a class="header-anchor" href="#_4-常见问题"><span><a href="#_4-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98">#</a> 4. 常见问题</span></a></h2><h3 id="_4-1-如何隐藏某个字段" tabindex="-1"><a class="header-anchor" href="#_4-1-如何隐藏某个字段"><span><a href="#_4-1-%E5%A6%82%E4%BD%95%E9%9A%90%E8%97%8F%E6%9F%90%E4%B8%AA%E5%AD%97%E6%AE%B5">#</a> 4.1 如何隐藏某个字段？</span></a></h3><p>如 <code>formSchema</code> 不需要 <code>field</code> 为 <code>createTime</code> 的字段，可以使用 <code>form: { show: false }</code> 或 <code>isForm: false</code> 进行过滤，其他组件同理。</p><figure><img src="https://doc.iocoder.cn/img/Vue3/CRUD组件/常见问题-如何隐藏某个字段.png" alt="常见问题 - 如何隐藏某个字段" tabindex="0" loading="lazy"><figcaption>常见问题 - 如何隐藏某个字段</figcaption></figure><h3 id="_4-2-如何使用数据字典" tabindex="-1"><a class="header-anchor" href="#_4-2-如何使用数据字典"><span><a href="#_4-2-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8">#</a> 4.2 如何使用数据字典？</span></a></h3><p>设置 <code>dictType</code> 字典的类型，和 <code>dictClass</code> 字典的数据类型。</p><figure><img src="https://doc.iocoder.cn/img/Vue3/CRUD组件/常见问题-如何使用数据字典.png" alt="常见问题 - 如何使用数据字典" tabindex="0" loading="lazy"><figcaption>常见问题 - 如何使用数据字典</figcaption></figure><h3 id="_4-3-如何使用-api-获取数据" tabindex="-1"><a class="header-anchor" href="#_4-3-如何使用-api-获取数据"><span><a href="#_4-3-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-api-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE">#</a> 4.3 如何使用 API 获取数据？</span></a></h3><p>使用 <code>api</code> 来获取接口数据，需要主动 <code>return</code> 数据。</p><figure><img src="https://doc.iocoder.cn/img/Vue3/CRUD组件/常见问题-如何使用API获取数据.png" alt="常见问题 - 如何使用 API 获取数据" tabindex="0" loading="lazy"><figcaption>常见问题 - 如何使用 API 获取数据</figcaption></figure><h3 id="_4-4-如何结合-slot-自定义" tabindex="-1"><a class="header-anchor" href="#_4-4-如何结合-slot-自定义"><span><a href="#_4-4-%E5%A6%82%E4%BD%95%E7%BB%93%E5%90%88-slot-%E8%87%AA%E5%AE%9A%E4%B9%89">#</a> 4.4 如何结合 Slot 自定义？</span></a></h3><p>如果想要自定义，可以结合 Slot 来实现。具体有哪些 Slot，阅读对应基础组件的文档。</p><figure><img src="https://doc.iocoder.cn/img/Vue3/CRUD组件/常见问题-如何结合Slot自定义.png" alt="常见问题 - 如何结合Slot自定义" tabindex="0" loading="lazy"><figcaption>常见问题 - 如何结合Slot自定义</figcaption></figure>`,29)]))}const r=n(i,[["render",p],["__file","crud-schema.html.vue"]]),t=JSON.parse('{"path":"/project/rouyi-vue-pro/vue3/crud-schema.html","title":"CRUD 组件","lang":"en-US","frontmatter":{"title":"CRUD 组件","tags":["project","java","spring-boot","spring-cloud"],"categories":["project"],"order":175,"feed":false,"seo":false,"head":[]},"headers":[{"level":2,"title":"# 1. 基础组件","slug":"_1-基础组件","link":"#_1-基础组件","children":[]},{"level":2,"title":"# 2. CRUD 组件","slug":"_2-crud-组件","link":"#_2-crud-组件","children":[]},{"level":2,"title":"# 3. 实战案例","slug":"_3-实战案例","link":"#_3-实战案例","children":[]},{"level":2,"title":"# 4. 常见问题","slug":"_4-常见问题","link":"#_4-常见问题","children":[{"level":3,"title":"# 4.1 如何隐藏某个字段？","slug":"_4-1-如何隐藏某个字段","link":"#_4-1-如何隐藏某个字段","children":[]},{"level":3,"title":"# 4.2 如何使用数据字典？","slug":"_4-2-如何使用数据字典","link":"#_4-2-如何使用数据字典","children":[]},{"level":3,"title":"# 4.3 如何使用 API 获取数据？","slug":"_4-3-如何使用-api-获取数据","link":"#_4-3-如何使用-api-获取数据","children":[]},{"level":3,"title":"# 4.4 如何结合 Slot 自定义？","slug":"_4-4-如何结合-slot-自定义","link":"#_4-4-如何结合-slot-自定义","children":[]}]}],"git":{"createdTime":1720365235000,"updatedTime":1720365235000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":3.07,"words":920},"filePathRelative":"project/rouyi-vue-pro/vue3/crud-schema.md","localizedDate":"July 7, 2024"}');export{r as comp,t as data};
