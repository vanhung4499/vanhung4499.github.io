import{_ as p,g as d,o as t,c as l,e as s,h as a,f as e,w as i,a as c}from"./app-BRTHG7K9.js";const o={},r=c('<h1 id="【商机】商机管理、商机状态" tabindex="-1"><a class="header-anchor" href="#【商机】商机管理、商机状态"><span>【商机】商机管理、商机状态</span></a></h1><p>CRM 商机，是指 CRM 系统中可能转化为实际销售的潜在业务机会【商机】，这些机会有可能转化为实际的销售【合同】。</p><figure><img src="https://cloud.iocoder.cn/img/CRM手册/商机/商机转换.png" alt="商机转换" tabindex="0" loading="lazy"><figcaption>商机转换</figcaption></figure><p>一个商机，通常需要经过一系列的销售阶段，如挖掘、资格验证、需求分析、价值评估等，最后才能成为一笔实际的交易。因此，整体的表结构如下：</p><figure><img src="https://cloud.iocoder.cn/img/CRM手册/商机/表关系.png" alt="表关系" tabindex="0" loading="lazy"><figcaption>表关系</figcaption></figure><hr><p>商机模块，由 <code>yudao-module-crm-biz</code> 后端模块的 <code>business</code> 包实现，包括两个部分：商机信息、商机状态配置。</p><h2 id="_1-商机状态" tabindex="-1"><a class="header-anchor" href="#_1-商机状态"><span><a href="#_1-%E5%95%86%E6%9C%BA%E7%8A%B6%E6%80%81">#</a> 1. 商机状态</span></a></h2><p>商机状态，由 <code>yudao-module-crm-biz</code> 后端模块的 <code>business</code> 包的 CrmBusinessStatusController 实现。</p><h3 id="_1-1-表结构" tabindex="-1"><a class="header-anchor" href="#_1-1-表结构"><span><a href="#_1-1-%E8%A1%A8%E7%BB%93%E6%9E%84">#</a> 1.1 表结构</span></a></h3><blockquote><p>【商机状态组表】省略 creator/create_time/updater/update_time/deleted/tenant_id 等通用字段</p></blockquote><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>CREATE TABLE `crm_business_status_type` (</span></span>\n<span class="line"><span>  `id` bigint NOT NULL AUTO_INCREMENT COMMENT &#39;主键&#39;,</span></span>\n<span class="line"><span>  `name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT &#39;状态组名&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `dept_ids` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT &#39;使用的部门编号&#39;,</span></span>\n<span class="line"><span>  PRIMARY KEY (`id`) USING BTREE</span></span>\n<span class="line"><span>) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT=&#39;CRM 商机状态组表&#39;;</span></span></code></pre></div><p>为什么需要商机状态组表？因为不同的商机，它的状态流程是不一样的。比如：</p><ul><li>状态组 1：“初步接触”、“需求分析”、“方案制定”、“商务谈判”、“合同签订”、“赢单”、“输单”、“无效”等等</li><li>状态组 2：“功能演示”、“直接付款”、“赢单”、“输单”、“无效”等等。</li></ul><p>当然无论哪种状态组，结束时必然是 CrmBusinessEndStatusEnum 枚举，对应“赢单”、“输单”、“无效”三种。</p><p>① <code>name</code> 字段：状态组名字。</p><p>② <code>dept_ids</code> 字段：哪些部门可以使用该状态组。如果不设置，默认全公司。</p><blockquote><p>【商机状态（阶段）表】省略 creator/create_time/updater/update_time/deleted/tenant_id 等通用字段</p></blockquote><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>CREATE TABLE `crm_business_status` (</span></span>\n<span class="line"><span>  `id` bigint NOT NULL AUTO_INCREMENT COMMENT &#39;主键&#39;,</span></span>\n<span class="line"><span>  `type_id` bigint NOT NULL COMMENT &#39;状态类型编号&#39;,</span></span>\n<span class="line"><span>  `name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT &#39;状态类型名&#39;,</span></span>\n<span class="line"><span>  `percent` decimal(24,6) NOT NULL COMMENT &#39;赢单率&#39;,</span></span>\n<span class="line"><span>  `sort` int NOT NULL DEFAULT &#39;1&#39; COMMENT &#39;排序&#39;,</span></span>\n<span class="line"><span>  PRIMARY KEY (`id`) USING BTREE</span></span>\n<span class="line"><span>) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT=&#39;CRM 商机状态表&#39;;</span></span></code></pre></div><p>① <code>type_id</code> 字段：状态类型（阶段）编号，对应 <code>crm_business_status_type</code> 表的 <code>id</code> 字段。</p><p>② <code>name</code> 字段：状态类型（阶段）名字。<code>percent</code> 字段：赢单率，即该状态下的商机最终成交的概率。</p><p>当然，这 2 个本质也是字段，没什么特殊逻辑。</p><h3 id="_1-2-管理后台" tabindex="-1"><a class="header-anchor" href="#_1-2-管理后台"><span><a href="#_1-2-%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0">#</a> 1.2 管理后台</span></a></h3><p>对应 [CRM 系统 -&gt; 系统配置 -&gt; 商机状态配置] 菜单，对应 <code>yudao-ui-admin-vue3</code> 项目的 <code>@/views/crm/business/status</code> 目录。</p><figure><img src="https://cloud.iocoder.cn/img/CRM手册/商机/商机状态配置.png" alt="商机状态配置" tabindex="0" loading="lazy"><figcaption>商机状态配置</figcaption></figure><p>点击【新增】按钮，可以新增商机状态组，如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/CRM手册/商机/商机状态配置新增.png" alt="新增商机状态组" tabindex="0" loading="lazy"><figcaption>新增商机状态组</figcaption></figure><h2 id="_2-商机" tabindex="-1"><a class="header-anchor" href="#_2-商机"><span><a href="#_2-%E5%95%86%E6%9C%BA">#</a> 2. 商机</span></a></h2><p>商机，由 <code>yudao-module-crm-biz</code> 后端模块的 <code>business</code> 包的 CrmBusinessController 实现。</p><h3 id="_2-1-表结构" tabindex="-1"><a class="header-anchor" href="#_2-1-表结构"><span><a href="#_2-1-%E8%A1%A8%E7%BB%93%E6%9E%84">#</a> 2.1 表结构</span></a></h3><blockquote><p>【商机表】省略 creator/create_time/updater/update_time/deleted/tenant_id 等通用字段</p></blockquote><div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>CREATE TABLE `crm_business` (</span></span>\n<span class="line"><span>  `id` bigint NOT NULL AUTO_INCREMENT COMMENT &#39;编号&#39;,</span></span>\n<span class="line"><span>  `name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT &#39;商机名称&#39;,</span></span>\n<span class="line"><span>  `customer_id` bigint NOT NULL COMMENT &#39;客户编号&#39;,</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>  `owner_user_id` bigint DEFAULT NULL COMMENT &#39;负责人的用户编号&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `follow_up_status` bit(1) DEFAULT b&#39;0&#39; COMMENT &#39;跟进状态&#39;,</span></span>\n<span class="line"><span>  `contact_last_time` datetime DEFAULT NULL COMMENT &#39;最后跟进时间&#39;,</span></span>\n<span class="line"><span>  `contact_next_time` datetime DEFAULT NULL COMMENT &#39;下次联系时间&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `status_type_id` bigint DEFAULT NULL COMMENT &#39;商机状态类型编号&#39;,</span></span>\n<span class="line"><span>  `status_id` bigint DEFAULT NULL COMMENT &#39;商机状态编号&#39;,</span></span>\n<span class="line"><span>  `end_status` tinyint DEFAULT NULL COMMENT &#39;结束状态：1-赢单 2-输单3-无效&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `deal_time` datetime DEFAULT NULL COMMENT &#39;预计成交日期&#39;,</span></span>\n<span class="line"><span>  `remark` varchar(500) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT &#39;备注&#39;,</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>  `total_product_price` decimal(24,6) DEFAULT NULL COMMENT &#39;产品总金额，单位：元&#39;,</span></span>\n<span class="line"><span>  `discount_percent` decimal(24,6) DEFAULT NULL COMMENT &#39;整单折扣，百分比&#39;,</span></span>\n<span class="line"><span>  `total_price` decimal(24,6) DEFAULT NULL COMMENT &#39;商机总金额，单位：元&#39;,</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>  PRIMARY KEY (`id`) USING BTREE</span></span>\n<span class="line"><span>) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT=&#39;CRM 商机表&#39;;</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>① <code>customer_id</code> 字段：客户编号，对应 <code>crm_customer</code> 表的 <code>id</code> 字段，必填。</p>',33),u=s("code",null,"owner_user_id",-1),_=s("code",null,"follow_up_status",-1),E=s("code",null,"contact_next_time",-1),m=c('<p>④ <code>status_type_id</code> 字段：商机状态类型编号，对应 <code>crm_business_status_type</code> 表的 <code>id</code> 字段。<code>status_id</code> 字段：商机状态编号，对应 <code>crm_business_status</code> 表的 <code>id</code> 字段。</p><p>当商机结束时，会记录 <code>end_status</code> 字段，对应 CrmBusinessEndStatusEnum 枚举，最终就是“赢单”、“输单”、“无效”三种。</p><p>⑤ <code>total_product_price</code>、<code>discount_percent</code>、<code>total_price</code> 字段：商机的金额相关，关系是 <code>total_price = total_product_price * discount_percent</code>。</p><p>其中，<code>total_product_price</code> 字段是 <code>crm_business_product</code> 表的 <code>total_price * count</code> 的累加。</p><blockquote><p>【商机产品表】省略 creator/create_time/updater/update_time/deleted/tenant_id 等通用字段</p></blockquote><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>CREATE TABLE `crm_business_product` (</span></span>\n<span class="line"><span>  `id` bigint NOT NULL AUTO_INCREMENT COMMENT &#39;主键&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `business_id` bigint NOT NULL COMMENT &#39;商机编号&#39;,</span></span>\n<span class="line"><span>  `product_id` bigint NOT NULL COMMENT &#39;产品编号&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  `product_price` decimal(24,6) NOT NULL COMMENT &#39;产品单价&#39;,</span></span>\n<span class="line"><span>  `business_price` decimal(24,6) NOT NULL COMMENT &#39;商机价格&#39;,</span></span>\n<span class="line"><span>  `count` decimal(24,6) NOT NULL COMMENT &#39;数量&#39;,</span></span>\n<span class="line"><span>  `total_price` decimal(24,6) NOT NULL COMMENT &#39;总计价格&#39;,</span></span>\n<span class="line"><span>  </span></span>\n<span class="line"><span>  PRIMARY KEY (`id`) USING BTREE</span></span>\n<span class="line"><span>) ENGINE=InnoDB AUTO_INCREMENT=33 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=DYNAMIC COMMENT=&#39;CRM 商机产品关联表&#39;;</span></span></code></pre></div><p>① <code>business_id</code> 字段：商机编号，对应 <code>crm_business</code> 表的 <code>id</code> 字段。</p><p><code>product_id</code> 字段：产品编号，对应 <code>crm_product</code> 表的 <code>id</code> 字段。</p><p>② <code>product_price</code> 字段：产品单价，<strong>冗余</strong>，来自 <code>crm_product</code> 表的 <code>price</code> 字段。目的是，和 <code>business_price</code> 字段比较，看看是否有折扣。</p><p><code>count</code>、<code>total_price</code> 字段：数量、总计价格。</p><h3 id="_2-2-管理后台" tabindex="-1"><a class="header-anchor" href="#_2-2-管理后台"><span><a href="#_2-2-%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0">#</a> 2.2 管理后台</span></a></h3><p>对应 [CRM 系统 -&gt; 商机管理] 菜单，对应 <code>yudao-ui-admin-vue3</code> 项目的 <code>@/views/crm/business</code> 目录。</p><figure><img src="https://cloud.iocoder.cn/img/CRM手册/商机/商机管理.png" alt="商机管理" tabindex="0" loading="lazy"><figcaption>商机管理</figcaption></figure><p>① 点击【新增】按钮，随便填写一些信息，点击「确认」按钮，即可新增一条商机。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/CRM手册/商机/商机新增.png" alt="新增商机" tabindex="0" loading="lazy"><figcaption>新增商机</figcaption></figure><p>② 点击“商机名称”，进入商机详情页，可以查看商机的详细信息，如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/CRM手册/商机/商机详情.png" alt="商机详情" tabindex="0" loading="lazy"><figcaption>商机详情</figcaption></figure><p>③ 点击【变更商机状态】按钮，可以变更商机的状态，如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/CRM手册/商机/商机变更状态.png" alt="变更商机状态" tabindex="0" loading="lazy"><figcaption>变更商机状态</figcaption></figure><p>可以多次变更，直到 <code>end_status</code> 字段有值，即商机结束，即“赢单”、“输单”、“无效”三种。</p><h2 id="_3-联系人与商机的关联" tabindex="-1"><a class="header-anchor" href="#_3-联系人与商机的关联"><span><a href="#_3-%E8%81%94%E7%B3%BB%E4%BA%BA%E4%B8%8E%E5%95%86%E6%9C%BA%E7%9A%84%E5%85%B3%E8%81%94">#</a> 3. 联系人与商机的关联</span></a></h2><p>联系人与商机之间，可以进行关联。这个功能，由 <code>yudao-module-crm-biz</code> 后端模块的 <code>contact</code> 包的 CrmContactController 实现。</p><h3 id="_3-1-表结构" tabindex="-1"><a class="header-anchor" href="#_3-1-表结构"><span><a href="#_3-1-%E8%A1%A8%E7%BB%93%E6%9E%84">#</a> 3.1 表结构</span></a></h3><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>CREATE TABLE `crm_contact_business` (</span></span>\n<span class="line"><span>  `id` int NOT NULL AUTO_INCREMENT COMMENT &#39;主键&#39;,</span></span>\n<span class="line"><span>  `contact_id` int DEFAULT NULL COMMENT &#39;联系人id&#39;,</span></span>\n<span class="line"><span>  `business_id` int DEFAULT NULL COMMENT &#39;商机id&#39;,</span></span>\n<span class="line"><span>  PRIMARY KEY (`id`)</span></span>\n<span class="line"><span>) ENGINE=InnoDB AUTO_INCREMENT=34 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT=&#39;CRM 联系人商机关联表&#39;;</span></span></code></pre></div><p>比较简单，就是 <code>contact_id</code> 字段和 <code>business_id</code> 字段的关联。</p><h3 id="_3-2-管理后台" tabindex="-1"><a class="header-anchor" href="#_3-2-管理后台"><span><a href="#_3-2-%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0">#</a> 3.2 管理后台</span></a></h3><p>① 在联系人详情页，在 [商机] 标签页，可以查看联系人关联的商机，如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/CRM手册/商机/联系人关联的商机.png" alt="联系人关联的商机" tabindex="0" loading="lazy"><figcaption>联系人关联的商机</figcaption></figure><ul><li>点击【创建商机】按钮，可以创建一个新的商机，同时关联到当前联系人</li><li>点击【关联】按钮，可以关联已有的商机到当前联系人。但是要注意，只能关联联系人 <code>customer_id</code> 字段相同的商机</li></ul><p>② 在商机详情页，在 [联系人] 标签页，可以查看商机关联的联系人，如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/CRM手册/商机/商机关联的联系人.png" alt="商机关联的联系人" tabindex="0" loading="lazy"><figcaption>商机关联的联系人</figcaption></figure><ul><li>点击【创建联系人】按钮，可以创建一个新的联系人，同时关联到当前商机</li><li>点击【关联】按钮，可以关联已有的联系人到当前商机。但是要注意，只能关联商机 <code>customer_id</code> 字段相同的联系人</li></ul>',32);function b(T,g){const n=d("RouteLink");return t(),l("div",null,[r,s("p",null,[a("② "),u,a(" 字段：，商机的负责人编号，和线索类似。不重复赘述，详细可见 "),e(n,{to:"/crm/permission/"},{default:i(()=>[a("《【通用】数据权限》")]),_:1}),a(" 文档。")]),s("p",null,[a("③ 从 "),_,a(" 到 "),E,a(" 字段：跟进相关，和线索类似。不重复赘述，详细可见 "),e(n,{to:"/crm/follow-up/"},{default:i(()=>[a("《【通用】跟进记录》")]),_:1}),a(" 文档。")]),m])}const h=p(o,[["render",b],["__file","business.html.vue"]]),C=JSON.parse('{"path":"/project/yudao-cloud/crm/business.html","title":"【商机】商机管理、商机状态","lang":"en-US","frontmatter":{"title":"【商机】商机管理、商机状态","tags":["project","java","spring-boot","spring-cloud"],"categories":["project"],"order":126,"feed":false,"seo":false,"head":[]},"headers":[{"level":2,"title":"# 1. 商机状态","slug":"_1-商机状态","link":"#_1-商机状态","children":[{"level":3,"title":"# 1.1 表结构","slug":"_1-1-表结构","link":"#_1-1-表结构","children":[]},{"level":3,"title":"# 1.2 管理后台","slug":"_1-2-管理后台","link":"#_1-2-管理后台","children":[]}]},{"level":2,"title":"# 2. 商机","slug":"_2-商机","link":"#_2-商机","children":[{"level":3,"title":"# 2.1 表结构","slug":"_2-1-表结构","link":"#_2-1-表结构","children":[]},{"level":3,"title":"# 2.2 管理后台","slug":"_2-2-管理后台","link":"#_2-2-管理后台","children":[]}]},{"level":2,"title":"# 3. 联系人与商机的关联","slug":"_3-联系人与商机的关联","link":"#_3-联系人与商机的关联","children":[{"level":3,"title":"# 3.1 表结构","slug":"_3-1-表结构","link":"#_3-1-表结构","children":[]},{"level":3,"title":"# 3.2 管理后台","slug":"_3-2-管理后台","link":"#_3-2-管理后台","children":[]}]}],"git":{"createdTime":1720365235000,"updatedTime":1720365235000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":7.09,"words":2127},"filePathRelative":"project/yudao-cloud/crm/business.md","localizedDate":"July 7, 2024"}');export{h as comp,C as data};
