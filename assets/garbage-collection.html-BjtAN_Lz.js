import{_ as a,r as i,o as t,c,b as l,d as n}from"./app-BG8AAbz2.js";const h={},o=n(`<h1 id="thu-gom-rac" tabindex="-1"><a class="header-anchor" href="#thu-gom-rac"><span>Thu gom rÃ¡c</span></a></h1><blockquote><p>VÃ¬ chuá»—i, Ä‘á»‘i tÆ°á»£ng vÃ  máº£ng khÃ´ng cÃ³ kÃ­ch thÆ°á»›c cá»‘ Ä‘á»‹nh, nÃªn chá»‰ khi kÃ­ch thÆ°á»›c cá»§a chÃºng Ä‘Æ°á»£c biáº¿t, chÃºng má»›i cÃ³ thá»ƒ Ä‘Æ°á»£c cáº¥p phÃ¡t bá»™ nhá»› Ä‘á»™ng. Má»—i láº§n táº¡o ra má»™t chuá»—i, má»™t máº£ng hoáº·c má»™t Ä‘á»‘i tÆ°á»£ng trong JavaScript, trÃ¬nh thÃ´ng dá»‹ch pháº£i cáº¥p phÃ¡t bá»™ nhá»› Ä‘á»ƒ lÆ°u trá»¯ thá»±c thá»ƒ Ä‘Ã³. Khi bá»™ nhá»› Ä‘Æ°á»£c cáº¥p phÃ¡t Ä‘á»™ng nhÆ° váº­y, nÃ³ pháº£i Ä‘Æ°á»£c giáº£i phÃ³ng Ä‘á»ƒ cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng láº¡i. Náº¿u khÃ´ng, trÃ¬nh thÃ´ng dá»‹ch JavaScript sáº½ tiÃªu thá»¥ háº¿t bá»™ nhá»› cÃ³ sáºµn trong há»‡ thá»‘ng vÃ  gÃ¢y ra sá»± cá»‘ há»‡ thá»‘ng. - &quot;JavaScript: The Definitive Guide&quot;</p></blockquote><p>Trong cÃ¡c ngÃ´n ngá»¯ nhÆ° C vÃ  C++, viá»‡c quáº£n lÃ½ bá»™ nhá»› pháº£i Ä‘Æ°á»£c thá»±c hiá»‡n thá»§ cÃ´ng, Ä‘Ã¢y cÅ©ng lÃ  nguá»“n gá»‘c cá»§a nhiá»u váº¥n Ä‘á» khÃ´ng cáº§n thiáº¿t. May máº¯n thay, khi viáº¿t JavaScript, viá»‡c cáº¥p phÃ¡t vÃ  thu há»“i bá»™ nhá»› Ä‘Ã£ Ä‘Æ°á»£c tá»± Ä‘á»™ng quáº£n lÃ½ hoÃ n toÃ n.</p><p>JavaScript sá»­ dá»¥ng <strong>cÆ¡ cháº¿ thu gom rÃ¡c tá»± Ä‘á»™ng</strong> Ä‘á»ƒ quáº£n lÃ½ bá»™ nhá»›. CÆ¡ cháº¿ thu gom rÃ¡c hoáº¡t Ä‘á»™ng báº±ng cÃ¡ch sá»­ dá»¥ng má»™t bá»™ thu gom rÃ¡c Ä‘á»ƒ Ä‘á»‹nh ká»³ tÃ¬m ra cÃ¡c biáº¿n khÃ´ng cÃ²n cáº§n sá»­ dá»¥ng vÃ  thá»±c hiá»‡n viá»‡c giáº£i phÃ³ng bá»™ nhá»› Ä‘Ã£ chiáº¿m dá»¥ng.</p><blockquote><p>Äiá»u gÃ¬ Ä‘Æ°á»£c coi lÃ  giÃ¡ trá»‹ khÃ´ng cÃ²n cáº§n thiáº¿t?</p></blockquote><p>GiÃ¡ trá»‹ khÃ´ng cÃ²n cáº§n thiáº¿t lÃ  biáº¿n Ä‘Ã£ káº¿t thÃºc vÃ²ng Ä‘á»i cá»§a nÃ³.</p><ul><li><strong>Biáº¿n cá»¥c bá»™</strong>: Trong pháº¡m vi cá»¥c bá»™, khi má»™t hÃ m thá»±c thi xong, biáº¿n cá»¥c bá»™ khÃ´ng cÃ²n cáº§n tá»“n táº¡i (trá»« khi cÃ³ closure), do Ä‘Ã³ trÃ¬nh thu gom rÃ¡c dá»… dÃ ng Ä‘Ã¡nh dáº¥u vÃ  thu há»“i bá»™ nhá»›.</li><li><strong>Biáº¿n toÃ n cá»¥c</strong>: Tuy nhiÃªn, vÃ²ng Ä‘á»i cá»§a biáº¿n toÃ n cá»¥c chá»‰ káº¿t thÃºc khi trÃ¬nh duyá»‡t gá»¡ bá» trang, tá»©c lÃ  <strong>biáº¿n toÃ n cá»¥c khÃ´ng Ä‘Æ°á»£c coi lÃ  biáº¿n rÃ¡c vÃ  khÃ´ng Ä‘Æ°á»£c thu há»“i</strong>. VÃ¬ váº­y, khi khai bÃ¡o má»™t biáº¿n toÃ n cá»¥c, chÃºng ta cáº§n cÃ¢n nháº¯c ká»¹ xem sau khi sá»­ dá»¥ng Ä‘á»‘i tÆ°á»£ng nÃ y, chÃºng ta cÃ²n cáº§n nÃ³ hay khÃ´ng. Náº¿u khÃ´ng cáº§n thiáº¿t ná»¯a, chÃºng ta nÃªn gÃ¡n biáº¿n nÃ y thÃ nh <code>null</code>, Ä‘á»ƒ khi thu gom rÃ¡c cháº¡y láº§n sau, nÃ³ cÃ³ thá»ƒ giáº£i phÃ³ng giÃ¡ trá»‹ trÆ°á»›c Ä‘Ã³ mÃ  biáº¿n nÃ y Ä‘ang trá» tá»›i.</li></ul><h2 id="nguyen-ly" tabindex="-1"><a class="header-anchor" href="#nguyen-ly"><span>NguyÃªn lÃ½</span></a></h2><p>JavaScript cÃ³ hai chiáº¿n lÆ°á»£c Ä‘á»ƒ thá»±c hiá»‡n thu gom rÃ¡c:</p><ul><li><a href="#ph%C6%B0%C6%A1ng-ph%C3%A1p-%C4%91%E1%BA%BFm-tham-chi%E1%BA%BFu">PhÆ°Æ¡ng phÃ¡p Ä‘áº¿m tham chiáº¿u</a></li><li><a href="#ph%C6%B0%C6%A1ng-ph%C3%A1p-%C4%91%C3%A1nh-d%E1%BA%A5u-v%C3%A0-thu-h%E1%BB%93i">PhÆ°Æ¡ng phÃ¡p Ä‘Ã¡nh dáº¥u vÃ  thu há»“i</a></li></ul><h3 id="phuong-phap-Ä‘em-tham-chieu" tabindex="-1"><a class="header-anchor" href="#phuong-phap-Ä‘em-tham-chieu"><span>PhÆ°Æ¡ng phÃ¡p Ä‘áº¿m tham chiáº¿u</span></a></h3><p><strong>PhÆ°Æ¡ng phÃ¡p Ä‘áº¿m tham chiáº¿u</strong>: Theo dÃµi vÃ  ghi nháº­n sá»‘ láº§n tham chiáº¿u cá»§a má»—i giÃ¡ trá»‹, khi má»™t biáº¿n Ä‘Æ°á»£c khai bÃ¡o vÃ  gÃ¡n má»™t giÃ¡ trá»‹ kiá»ƒu tham chiáº¿u, sá»‘ láº§n tham chiáº¿u cá»§a giÃ¡ trá»‹ Ä‘Ã³ lÃ  1, náº¿u giÃ¡ trá»‹ Ä‘Ã³ Ä‘Æ°á»£c gÃ¡n cho má»™t biáº¿n khÃ¡c, sá»‘ láº§n tham chiáº¿u tÄƒng lÃªn 1. NgÆ°á»£c láº¡i, náº¿u biáº¿n chá»©a giÃ¡ trá»‹ Ä‘Ã³ láº¡i Ä‘Æ°á»£c gÃ¡n má»™t giÃ¡ trá»‹ khÃ¡c, sá»‘ láº§n tham chiáº¿u giáº£m Ä‘i 1. Khi sá»‘ láº§n tham chiáº¿u cá»§a má»™t giÃ¡ trá»‹ trá»Ÿ thÃ nh 0, cÃ³ nghÄ©a lÃ  khÃ´ng cÃ²n cÃ¡ch nÃ o Ä‘á»ƒ truy cáº­p Ä‘áº¿n giÃ¡ trá»‹ Ä‘Ã³ ná»¯a, do Ä‘Ã³, bá»™ nhá»› mÃ  giÃ¡ trá»‹ Ä‘Ã³ chiáº¿m giá»¯ cÃ³ thá»ƒ Ä‘Æ°á»£c thu há»“i. Khi thu gom rÃ¡c cháº¡y, nÃ³ sáº½ giáº£i phÃ³ng nhá»¯ng giÃ¡ trá»‹ cÃ³ sá»‘ láº§n tham chiáº¿u lÃ  0.</p><p>PhÆ°Æ¡ng phÃ¡p nÃ y khÃ´ng thá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» vÃ²ng láº·p tham chiáº¿u, tá»©c lÃ  Ä‘á»‘i tÆ°á»£ng <code>a</code> chá»©a má»™t con trá» Ä‘áº¿n <code>b</code>, vÃ  Ä‘á»‘i tÆ°á»£ng <code>b</code> cÅ©ng chá»©a má»™t con trá» Ä‘áº¿n <code>a</code>. Äiá»u nÃ y cÃ³ thá»ƒ dáº«n Ä‘áº¿n viá»‡c khÃ´ng giáº£i phÃ³ng Ä‘Æ°á»£c nhiá»u bá»™ nhá»›, cÅ©ng gá»i lÃ  rÃ² rá»‰ bá»™ nhá»› (memory leak), vÃ¬ sá»‘ láº§n tham chiáº¿u cá»§a chÃºng khÃ´ng bao giá» lÃ  0.</p><p>ğŸŒ° <strong>VÃ­ dá»¥</strong>:</p><div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> problem</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  var</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> a</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> Object</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  var</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> b</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> Object</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">  a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E06C75;--shiki-dark:#E06C75;">ref</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> b</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">  b</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E06C75;--shiki-dark:#E06C75;">ref</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><blockquote><ul><li>KÃ­ch thÆ°á»›c nÃ´ng (shallow size): KÃ­ch thÆ°á»›c cá»§a Ä‘á»‘i tÆ°á»£ng bao gá»“m giÃ¡ trá»‹ nguyÃªn thuá»· vÃ  dá»¯ liá»‡u cáº§n thiáº¿t khÃ¡c.</li><li>KÃ­ch thÆ°á»›c lÆ°u trá»¯ (retained size): Tá»•ng kÃ­ch thÆ°á»›c cá»§a Ä‘á»‘i tÆ°á»£ng bao gá»“m kÃ­ch thÆ°á»›c nÃ´ng cá»§a nÃ³ vÃ  táº¥t cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng mÃ  nÃ³ chi phá»‘i.</li></ul></blockquote><p>PhÆ°Æ¡ng phÃ¡p Ä‘áº¿m tham chiáº¿u khÃ´ng thá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» vÃ²ng láº·p tham chiáº¿u:</p><div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> fn</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  var</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> x</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  var</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> y</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">  x</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E06C75;--shiki-dark:#E06C75;">a</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> y</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">  y</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E06C75;--shiki-dark:#E06C75;">a</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> x</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h3 id="phuong-phap-Ä‘anh-dau-va-xoa" tabindex="-1"><a class="header-anchor" href="#phuong-phap-Ä‘anh-dau-va-xoa"><span>PhÆ°Æ¡ng phÃ¡p Ä‘Ã¡nh dáº¥u vÃ  xÃ³a</span></a></h3><p><strong>PhÆ°Æ¡ng phÃ¡p Ä‘Ã¡nh dáº¥u vÃ  xÃ³a</strong>: Khi chÆ°Æ¡ng trÃ¬nh thá»±c thi vÃ o má»™t hÃ m nÃ o Ä‘Ã³, má»™t ngá»¯ cáº£nh thá»±c thi cá»§a hÃ m Ä‘Ã³ sáº½ Ä‘Æ°á»£c táº¡o ra, vÃ  cÃ¡c biáº¿n trong ngá»¯ cáº£nh thá»±c thi nÃ y sáº½ Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  <strong>Ä‘ang sá»­ dá»¥ng</strong>. LÃ½ thuyáº¿t lÃ , cÃ¡c biáº¿n <strong>Ä‘ang sá»­ dá»¥ng</strong> khÃ´ng thá»ƒ Ä‘Æ°á»£c giáº£i phÃ³ng bá»™ nhá»›. Bá»Ÿi vÃ¬ chá»‰ cáº§n luá»“ng thá»±c thi vÃ o ngá»¯ cáº£nh thá»±c thi tÆ°Æ¡ng á»©ng, cÃ¡c biáº¿n nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng.</p><p>Quy trÃ¬nh cá»§a phÆ°Æ¡ng phÃ¡p Ä‘Ã¡nh dáº¥u vÃ  xÃ³a nhÆ° sau:</p><ul><li>TrÃ¬nh thu gom rÃ¡c sáº½ Ä‘Ã¡nh dáº¥u táº¥t cáº£ cÃ¡c biáº¿n trong bá»™ nhá»›.</li><li>Loáº¡i bá» Ä‘Ã¡nh dáº¥u cá»§a cÃ¡c biáº¿n trong ngá»¯ cáº£nh thá»±c thi vÃ  cÃ¡c biáº¿n Ä‘Æ°á»£c tham chiáº¿u bá»Ÿi mÃ´i trÆ°á»ng.</li><li>CÃ¡c biáº¿n váº«n cÃ²n Ä‘Ã¡nh dáº¥u sáº½ Ä‘Æ°á»£c coi lÃ  <strong>sáºµn sÃ ng Ä‘á»ƒ xÃ³a</strong>.</li><li>Cuá»‘i cÃ¹ng, trÃ¬nh thu gom rÃ¡c hoÃ n thÃ nh cÃ´ng viá»‡c lÃ m sáº¡ch bá»™ nhá»› báº±ng cÃ¡ch há»§y cÃ¡c giÃ¡ trá»‹ Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u vÃ  thu há»“i khÃ´ng gian bá»™ nhá»› mÃ  chÃºng chiáº¿m.</li></ul><p>Giáº£i phÃ³ng bá»™ nhá»› thá»§ cÃ´ng:</p><div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">let</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> a</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">a</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><p><code>a = null</code> thá»±c ra chá»‰ lÃ  má»™t hoáº¡t Ä‘á»™ng giáº£i phÃ³ng tham chiáº¿u, lÃ m cho giÃ¡ trá»‹ mÃ  biáº¿n <code>a</code> trÆ°á»›c Ä‘Ã¢y tham chiáº¿u máº¥t Ä‘i, thoÃ¡t khá»i ngá»¯ cáº£nh thá»±c thi. GiÃ¡ trá»‹ nÃ y sáº½ Ä‘Æ°á»£c tÃ¬m tháº¥y vÃ  giáº£i phÃ³ng trong láº§n cháº¡y tiáº¿p theo cá»§a trÃ¬nh thu gom rÃ¡c. Viá»‡c giáº£i phÃ³ng tham chiáº¿u Ä‘Ãºng thá»i Ä‘iá»ƒm lÃ  má»™t cÃ¡ch quan trá»ng Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c hiá»‡u suáº¥t tá»‘t hÆ¡n cho trang web.</p><p>CÆ¡ cháº¿ thu gom rÃ¡c trong trÃ¬nh thÃ´ng dá»‹ch JavaScript lÃ  phÆ°Æ¡ng phÃ¡p Ä‘Ã¡nh dáº¥u vÃ  xÃ³a, vÃ  tiÃªu chÃ­ Ä‘á»ƒ xÃ¡c Ä‘á»‹nh xem má»™t vÃ¹ng nhá»› cÃ³ thá»ƒ thu há»“i hay khÃ´ng lÃ  kháº£ nÄƒng truy cáº­p. Äiá»u nÃ y lÃ  má»™t cáº£i tiáº¿n so vá»›i phÆ°Æ¡ng phÃ¡p Ä‘áº¿m tham chiáº¿u, vÃ¬ váº¥n Ä‘á» vÃ²ng láº·p tham chiáº¿u giá»¯a cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ´ng gÃ¢y ra váº¥n Ä‘á» thu há»“i, bá»Ÿi vÃ¬ tiÃªu chÃ­ Ä‘á»ƒ xÃ¡c Ä‘á»‹nh xem má»™t vÃ¹ng nhá»› cÃ³ thá»ƒ thu há»“i hay khÃ´ng lÃ  kháº£ nÄƒng truy cáº­p. Thuáº­t toÃ¡n nÃ y cÃ³ má»™t nÃºt gá»‘c, nÃºt nÃ y khÃ´ng bao giá» bá»‹ thu há»“i vÃ  Ä‘Æ°á»£c gá»i lÃ  <strong>GC Root</strong>. VÃ­ dá»¥, Ä‘á»‘i tÆ°á»£ng toÃ n cáº§u cá»§a JavaScript Runtime Ä‘Æ°á»£c gá»i lÃ  <code>window</code>, vÃ  nÃºt gá»‘c cá»§a cÃ¢y DOM cÅ©ng lÃ  má»™t <strong>GC Root</strong>. CÃ¡c Ä‘á»‘i tÆ°á»£ng trong chÆ°Æ¡ng trÃ¬nh táº¡o thÃ nh má»™t Ä‘á»“ thá»‹, vÃ  báº¥t ká»³ Ä‘á»‘i tÆ°á»£ng nÃ o cÃ³ thá»ƒ Ä‘Æ°á»£c truy cáº­p tá»« nÃºt gá»‘c theo cÃ¡c liÃªn káº¿t tham chiáº¿u sáº½ Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  Ä‘á»‘i tÆ°á»£ng hoáº¡t Ä‘á»™ng, trong khi cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ´ láº­p vá»›i nÃºt gá»‘c sáº½ bá»‹ thu há»“i. CÃ³ thá»ƒ tháº¥y ráº±ng cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ³ sá»‘ lÆ°á»£ng tham chiáº¿u báº±ng 0 trong mÃ£ khÃ´ng thá»ƒ truy cáº­p tá»« nÃºt gá»‘c, cÃ³ nghÄ©a lÃ  má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ sá»‘ lÆ°á»£ng tham chiáº¿u báº±ng 0 theo phÆ°Æ¡ng phÃ¡p Ä‘áº¿m tham chiáº¿u cÅ©ng sáº½ bá»‹ thu há»“i bá»Ÿi phÆ°Æ¡ng phÃ¡p Ä‘Ã¡nh dáº¥u vÃ  xÃ³a. VÃ¬ váº­y, phÆ°Æ¡ng phÃ¡p Ä‘Ã¡nh dáº¥u vÃ  xÃ³a cÃ³ thá»ƒ thay tháº¿ phÆ°Æ¡ng phÃ¡p Ä‘áº¿m tham chiáº¿u.</p><h2 id="tran-ngan-xep" tabindex="-1"><a class="header-anchor" href="#tran-ngan-xep"><span>TrÃ n ngÄƒn xáº¿p</span></a></h2><p><strong>TrÃ n ngÄƒn xáº¿p</strong> lÃ  khi khÃ´ng cÃ²n Ä‘á»§ khÃ´ng gian bá»™ nhá»› stack Ä‘á»ƒ cáº¥p phÃ¡t, vÃ  khÃ´ng cÃ²n Ä‘á»§ bá»™ nhá»› Ä‘á»ƒ sá»­ dá»¥ng.</p><h2 id="ro-ri-bo-nho" tabindex="-1"><a class="header-anchor" href="#ro-ri-bo-nho"><span>RÃ² rá»‰ bá»™ nhá»›</span></a></h2><p><strong>RÃ² rá»‰ bá»™ nhá»›</strong> lÃ  khi khÃ´ng giáº£i phÃ³ng hoáº·c há»§y bá» bá»™ nhá»› sau khi sá»­ dá»¥ng, lÃ m chiáº¿m dá»¥ng bá»™ nhá»› trá»‘ng. Náº¿u cÃ³ quÃ¡ nhiá»u rÃ² rá»‰ bá»™ nhá»›, quÃ¡ trÃ¬nh sau Ä‘Ã³ sáº½ khÃ´ng thá»ƒ yÃªu cáº§u Ä‘Æ°á»£c bá»™ nhá»›. Do Ä‘Ã³, rÃ² rá»‰ bá»™ nhá»› cÃ³ thá»ƒ dáº«n Ä‘áº¿n trÃ n bá»™ nhá»› ná»™i bá»™.</p>`,30),r=n(`<p>Trong pháº§n má»m láº­p trÃ¬nh truyá»n thá»‘ng, vÃ­ dá»¥ nhÆ° trong ngÃ´n ngá»¯ C, cáº§n sá»­ dá»¥ng <code>malloc</code> Ä‘á»ƒ cáº¥p phÃ¡t bá»™ nhá»› vÃ  sá»­ dá»¥ng <code>free</code> Ä‘á»ƒ giáº£i phÃ³ng nÃ³, cáº§n pháº£i xÃ³a báº±ng tay. Trong JavaScript, cÃ³ cÆ¡ cháº¿ thu gom rÃ¡c riÃªng, phÆ°Æ¡ng phÃ¡p thu gom rÃ¡c phá»• biáº¿n lÃ  phÆ°Æ¡ng phÃ¡p Ä‘Ã¡nh dáº¥u vÃ  xÃ³a.</p><ul><li>Ngay cáº£ 1 byte bá»™ nhá»› cÅ©ng Ä‘Æ°á»£c gá»i lÃ  rÃ² rá»‰ bá»™ nhá»›, khÃ´ng nháº¥t thiáº¿t pháº£i gÃ¢y ra sá»± sá»¥p Ä‘á»• hoáº·c Ä‘Æ¡ mÃ¡y má»›i gá»i lÃ  rÃ² rá»‰ bá»™ nhá»›.</li><li>ThÃ´ng thÆ°á»ng, rÃ² rá»‰ bá»™ nhá»› xáº£y ra trong vÃ¹ng nhá»› heap, khÃ´ng xáº£y ra trong vÃ¹ng nhá»› ngÄƒn xáº¿p. GiÃ¡ trá»‹ cá»§a cÃ¡c kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n Ä‘Æ°á»£c lÆ°u trá»¯ trong ngÄƒn xáº¿p, trong khi cÃ¡c kiá»ƒu dá»¯ liá»‡u tham chiáº¿u Ä‘Æ°á»£c lÆ°u trá»¯ trong heap. Do Ä‘Ã³, chá»‰ cÃ¡c Ä‘á»‘i tÆ°á»£ng, máº£ng vÃ  cÃ¡c kiá»ƒu dá»¯ liá»‡u tham chiáº¿u khÃ¡c má»›i cÃ³ thá»ƒ gÃ¢y ra rÃ² rá»‰ bá»™ nhá»›.</li></ul><p><strong>NguyÃªn nhÃ¢n phá»• biáº¿n cá»§a rÃ² rá»‰ bá»™ nhá»›</strong>:</p><ul><li>Biáº¿n toÃ n cá»¥c gÃ¢y ra rÃ² rá»‰ bá»™ nhá»›</li><li>Háº¹n giá» khÃ´ng Ä‘Æ°á»£c xÃ³a</li><li>Closure (ÄÃ³ng gÃ³i)</li></ul><p><strong>CÃ¡ch giáº£i quyáº¿t</strong>:</p><ul><li>Giáº£m sá»‘ biáº¿n toÃ n cá»¥c khÃ´ng cáº§n thiáº¿t</li><li>Giáº£m viá»‡c sá»­ dá»¥ng closure (vÃ¬ closure cÃ³ thá»ƒ gÃ¢y rÃ² rá»‰ bá»™ nhá»›)</li><li>TrÃ¡nh xáº£y ra vÃ²ng láº·p vÃ´ háº¡n</li></ul><h3 id="bien-toan-cuc" tabindex="-1"><a class="header-anchor" href="#bien-toan-cuc"><span>Biáº¿n toÃ n cá»¥c</span></a></h3><p>Biáº¿n toÃ n cá»¥c khÃ´ng Ä‘Æ°á»£c coi lÃ  rÃ¡c vÃ  khÃ´ng Ä‘Æ°á»£c thu gom. Trong quÃ¡ trÃ¬nh viáº¿t mÃ£, chÃºng ta nÃªn trÃ¡nh khai bÃ¡o biáº¿n toÃ n cá»¥c.</p><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">body</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">button</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> onclick</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">grow</span><span style="color:#98C379;--shiki-dark:#98C379;">()&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;Global Var&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">script</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;text/javascript&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> LargeObj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">      this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E06C75;--shiki-dark:#E06C75;">largeArr</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> Array</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1000_0000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    var</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> x</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> grow</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">      var</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> o</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> LargeObj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">      x</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">push</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">body</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Khi chÃºng ta sá»­ dá»¥ng [[JS This#RÃ ng buá»™c máº·c Ä‘á»‹nh (Default Binding)|rÃ ng buá»™c máº·c Ä‘á»‹nh]], <code>this</code> sáº½ trá» Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng toÃ n cá»¥c.</p><p>ğŸ”§ <strong>CÃ¡ch giáº£i quyáº¿t</strong>: Sá»­ dá»¥ng cháº¿ Ä‘á»™ nghiÃªm ngáº·t trong hÃ m hoáº·c giáº£i phÃ³ng bá»™ nhá»› cá»§a biáº¿n toÃ n cá»¥c thá»§ cÃ´ng.</p><p><strong>CÃ¡ch gá»¡ lá»—i</strong>: <code>More Tools -&gt; Developer Tools -&gt; Performance/Memory</code>, thÆ°á»ng hiá»‡n táº¡i, báº£ng Ä‘iá»u khiá»ƒn Performance ghi láº¡i biá»ƒu Ä‘á»“ thay Ä‘á»•i bá»™ nhá»› trang theo thá»i gian, giÃºp Ä‘Ã¡nh giÃ¡ rÃ² rá»‰ bá»™ nhá»› má»™t cÃ¡ch trá»±c quan, sau Ä‘Ã³, trong báº£ng Ä‘iá»u khiá»ƒn Memory, xÃ¡c Ä‘á»‹nh vá»‹ trÃ­ xáº£y ra váº¥n Ä‘á».</p><h3 id="tham-chieu-dom-bi-tach-roi" tabindex="-1"><a class="header-anchor" href="#tham-chieu-dom-bi-tach-roi"><span>Tham chiáº¿u DOM bá»‹ tÃ¡ch rá»i</span></a></h3><p>Bá»™ nhá»› cá»§a nÃºt DOM Ä‘Æ°á»£c thu há»“i khi Ä‘Ã¡p á»©ng hai Ä‘iá»u kiá»‡n: nÃºt DOM bá»‹ xÃ³a khá»i cÃ¢y DOM vÃ  khÃ´ng cÃ³ tham chiáº¿u Ä‘áº¿n nÃ³ trong mÃ£. RÃ² rá»‰ bá»™ nhá»› xáº£y ra khi nÃºt bá»‹ xÃ³a khá»i DOM, nhÆ°ng váº«n cÃ²n tham chiáº¿u Ä‘áº¿n nÃ³ trong mÃ£ JavaScript, chÃºng ta gá»i Ä‘iá»u nÃ y lÃ  tham chiáº¿u DOM bá»‹ tÃ¡ch rá»i.</p><p>VÃ­ dá»¥ vá» rÃ² rá»‰ bá»™ nhá»› do tham chiáº¿u DOM bá»‹ tÃ¡ch rá»i:</p><div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">body</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;Remove List&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">ul</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;list&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">li</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;Item 1&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">li</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">ul</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">script</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;text/javascript&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    var</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> button</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">querySelector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;button&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    var</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> list</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">getElementById</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;list&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">    button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">addEventListener</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;click&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#C678DD;--shiki-dark:#C678DD;">function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">      list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">remove</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">body</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre></div><p>ChÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng Heap Snapshot Ä‘á»ƒ gá»¡ lá»—i rÃ² rá»‰ bá»™ nhá»›, báº±ng cÃ¡ch Ä‘iá»u hÆ°á»›ng Ä‘áº¿n <code>Memory -&gt; Heap Snapshot -&gt; Take Snapshot</code>, Heap Snapshot cÃ³ thá»ƒ cho chÃºng ta biáº¿t liá»‡u cÃ³ tá»“n táº¡i tham chiáº¿u DOM bá»‹ tÃ¡ch rá»i hay khÃ´ng, chá»‰ cáº§n nháº­p <code>detached</code> vÃ o Ã´ lá»c trÃªn cÃ¹ng, náº¿u cÃ³ káº¿t quáº£, cÃ³ nghÄ©a lÃ  tá»“n táº¡i tham chiáº¿u DOM bá»‹ tÃ¡ch rá»i.</p><p>Äá»‘i vá»›i vÃ­ dá»¥ trÃªn, chÃºng ta cÃ³ thá»ƒ Ä‘áº·t nÃºt <code>list</code> trong hÃ m xá»­ lÃ½ sá»± kiá»‡n cá»§a nÃºt nháº¥p chuá»™t, Ä‘iá»u nÃ y cÃ³ nghÄ©a lÃ  sau khi hÃ m xá»­ lÃ½ sá»± kiá»‡n tráº£ vá», biáº¿n cá»¥c bá»™ sáº½ bá»‹ há»§y.</p><h3 id="closure-Ä‘ong-goi" tabindex="-1"><a class="header-anchor" href="#closure-Ä‘ong-goi"><span>Closure (ÄÃ³ng gÃ³i)</span></a></h3><p>Closure cÅ©ng cÃ³ thá»ƒ gÃ¢y ra rÃ² rá»‰ bá»™ nhá»› vÃ¬ cÃ¡c con trá» áº©n trÃªn cÃ¡c phiÃªn báº£n hÃ m sáº½ giá»¯ láº¡i Ä‘á»‘i tÆ°á»£ng pháº¡m vi Ä‘Æ°á»£c táº¡o trong mÃ´i trÆ°á»ng táº¡o phiÃªn báº£n.</p><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">body</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">button</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> onclick</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">closure</span><span style="color:#98C379;--shiki-dark:#98C379;">()&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;Closure&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">script</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;text/javascript&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    var</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> funcs</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> outer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">      var</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> someText</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> Array</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1000_0000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">      return</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> inner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> someText</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      };</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> closure</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">      funcs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">push</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">outer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">body</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>LÆ°u Ã½: MÃ£ nÃ y khÃ´ng nháº¥t thiáº¿t pháº£i cÃ³ váº¥n Ä‘á» gÃ¬, chá»‰ lÃ  Ä‘á»ƒ chá»‰ ra ráº±ng closure cÃ³ thá»ƒ chiáº¿m dá»¥ng bá»™ nhá»›, chá»‰ khi cÃ³ sá»± chiáº¿m dá»¥ng bá»™ nhá»› khÃ´ng há»£p lÃ½ má»›i Ä‘Æ°á»£c xem lÃ  rÃ² rá»‰ bá»™ nhá»›.</p><p>CÃ¡ch gá»¡ lá»—i: <code>More Tools -&gt; Developer Tools -&gt; Memory -&gt; Allocation instrumentation on timeline</code>.</p><h3 id="hen-gio" tabindex="-1"><a class="header-anchor" href="#hen-gio"><span>Háº¹n giá»</span></a></h3><p>Khi khÃ´ng cáº§n sá»­ dá»¥ng <code>setInterval</code> hoáº·c <code>setTimeout</code> ná»¯a, náº¿u khÃ´ng xÃ³a bá» háº¹n giá», hÃ m gá»i láº¡i cá»§a háº¹n giá» vÃ  cÃ¡c biáº¿n phá»¥ thuá»™c bÃªn trong nÃ³ sáº½ khÃ´ng thá»ƒ Ä‘Æ°á»£c giáº£i phÃ³ng, gÃ¢y ra rÃ² rá»‰ bá»™ nhá»›.</p><div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> someResource</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> getData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">// node vÃ  someResource lÆ°u trá»¯ má»™t lÆ°á»£ng lá»›n dá»¯ liá»‡u khÃ´ng thá»ƒ giáº£i phÃ³ng</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> timerId</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> setInterval</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> node</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">getElementById</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;Node&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#E06C75;--shiki-dark:#E06C75;">node</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // Háº¹n giá» cÅ©ng khÃ´ng Ä‘Æ°á»£c xÃ³a bá»</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">    node</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E06C75;--shiki-dark:#E06C75;">innerHTML</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> JSON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">stringify</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;">someResource</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">clearInterval</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E06C75;--shiki-dark:#E06C75;">timerId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><p>ğŸ”§ <strong>CÃ¡ch giáº£i quyáº¿t</strong>: XÃ³a bá» háº¹n giá» khi cÃ´ng viá»‡c cá»§a nÃ³ hoÃ n thÃ nh.</p><h3 id="in-ra-console" tabindex="-1"><a class="header-anchor" href="#in-ra-console"><span>In ra console</span></a></h3><p>Viá»‡c sá»­ dá»¥ng cÃ¢u lá»‡nh <code>console.log</code> Ä‘á»ƒ in thÃ´ng tin gá»¡ lá»—i, vÃ¬ console luÃ´n giá»¯ tham chiáº¿u cá»§a chÃºng Ä‘á»ƒ cÃ³ thá»ƒ xem báº¥t ká»³ lÃºc nÃ o, nÃªn bá»™ nhá»› cá»§a chÃºng cÅ©ng khÃ´ng thá»ƒ Ä‘Æ°á»£c giáº£i phÃ³ng. Do Ä‘Ã³, khuyáº¿n nghá»‹ loáº¡i bá» viá»‡c in ra console trong mÃ´i trÆ°á»ng product.</p>`,29);function p(e,B){const s=i("Mermaid");return t(),c("div",null,[o,l(s,{id:"mermaid-136",code:"eJxLy8kvT85ILCpR8AnicowOOrxJoejh7k6FpIe7ZyrkZTzcPTtWQVdXIfnwZoUSIK9ZIeXhrtV5CkcmPty1Pw8oY6fgFB1SdHhBnkJe+pHmPIUKoHhBLBcAqA0ncA=="}),r])}const d=a(h,[["render",p],["__file","garbage-collection.html.vue"]]),g=JSON.parse('{"path":"/programming/js/core/excute-and-contexts/memory-management/garbage-collection.html","title":"Garbage Collection","lang":"en-US","frontmatter":{"title":"Garbage Collection","tags":["js","programming"],"categories":["js","programming"],"date created":"2023-08-02T00:00:00.000Z","date modified":"2023-08-03T00:00:00.000Z","order":3,"description":"Thu gom rÃ¡c VÃ¬ chuá»—i, Ä‘á»‘i tÆ°á»£ng vÃ  máº£ng khÃ´ng cÃ³ kÃ­ch thÆ°á»›c cá»‘ Ä‘á»‹nh, nÃªn chá»‰ khi kÃ­ch thÆ°á»›c cá»§a chÃºng Ä‘Æ°á»£c biáº¿t, chÃºng má»›i cÃ³ thá»ƒ Ä‘Æ°á»£c cáº¥p phÃ¡t bá»™ nhá»› Ä‘á»™ng. Má»—i láº§n táº¡o ra má»™t c...","head":[["meta",{"property":"og:url","content":"https://vanhung4499.github.io/programming/js/core/excute-and-contexts/memory-management/garbage-collection.html"}],["meta",{"property":"og:site_name","content":"VanHung4499"}],["meta",{"property":"og:title","content":"Garbage Collection"}],["meta",{"property":"og:description","content":"Thu gom rÃ¡c VÃ¬ chuá»—i, Ä‘á»‘i tÆ°á»£ng vÃ  máº£ng khÃ´ng cÃ³ kÃ­ch thÆ°á»›c cá»‘ Ä‘á»‹nh, nÃªn chá»‰ khi kÃ­ch thÆ°á»›c cá»§a chÃºng Ä‘Æ°á»£c biáº¿t, chÃºng má»›i cÃ³ thá»ƒ Ä‘Æ°á»£c cáº¥p phÃ¡t bá»™ nhá»› Ä‘á»™ng. Má»—i láº§n táº¡o ra má»™t c..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-06-28T15:54:38.000Z"}],["meta",{"property":"article:author","content":"Hung Nguyen"}],["meta",{"property":"article:tag","content":"js"}],["meta",{"property":"article:tag","content":"programming"}],["meta",{"property":"article:modified_time","content":"2024-06-28T15:54:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Garbage Collection\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-06-28T15:54:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hung Nguyen\\",\\"url\\":\\"https://vanhung4499.github.io\\"}]}"]]},"headers":[{"level":2,"title":"NguyÃªn lÃ½","slug":"nguyen-ly","link":"#nguyen-ly","children":[{"level":3,"title":"PhÆ°Æ¡ng phÃ¡p Ä‘áº¿m tham chiáº¿u","slug":"phuong-phap-Ä‘em-tham-chieu","link":"#phuong-phap-Ä‘em-tham-chieu","children":[]},{"level":3,"title":"PhÆ°Æ¡ng phÃ¡p Ä‘Ã¡nh dáº¥u vÃ  xÃ³a","slug":"phuong-phap-Ä‘anh-dau-va-xoa","link":"#phuong-phap-Ä‘anh-dau-va-xoa","children":[]}]},{"level":2,"title":"TrÃ n ngÄƒn xáº¿p","slug":"tran-ngan-xep","link":"#tran-ngan-xep","children":[]},{"level":2,"title":"RÃ² rá»‰ bá»™ nhá»›","slug":"ro-ri-bo-nho","link":"#ro-ri-bo-nho","children":[{"level":3,"title":"Biáº¿n toÃ n cá»¥c","slug":"bien-toan-cuc","link":"#bien-toan-cuc","children":[]},{"level":3,"title":"Tham chiáº¿u DOM bá»‹ tÃ¡ch rá»i","slug":"tham-chieu-dom-bi-tach-roi","link":"#tham-chieu-dom-bi-tach-roi","children":[]},{"level":3,"title":"Closure (ÄÃ³ng gÃ³i)","slug":"closure-Ä‘ong-goi","link":"#closure-Ä‘ong-goi","children":[]},{"level":3,"title":"Háº¹n giá»","slug":"hen-gio","link":"#hen-gio","children":[]},{"level":3,"title":"In ra console","slug":"in-ra-console","link":"#in-ra-console","children":[]}]}],"git":{"createdTime":1719590078000,"updatedTime":1719590078000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":9.97,"words":2991},"filePathRelative":"programming/js/core/excute-and-contexts/memory-management/garbage-collection.md","localizedDate":"June 28, 2024","excerpt":"\\n<blockquote>\\n<p>VÃ¬ chuá»—i, Ä‘á»‘i tÆ°á»£ng vÃ  máº£ng khÃ´ng cÃ³ kÃ­ch thÆ°á»›c cá»‘ Ä‘á»‹nh, nÃªn chá»‰ khi kÃ­ch thÆ°á»›c cá»§a chÃºng Ä‘Æ°á»£c biáº¿t, chÃºng má»›i cÃ³ thá»ƒ Ä‘Æ°á»£c cáº¥p phÃ¡t bá»™ nhá»› Ä‘á»™ng. Má»—i láº§n táº¡o ra má»™t chuá»—i, má»™t máº£ng hoáº·c má»™t Ä‘á»‘i tÆ°á»£ng trong JavaScript, trÃ¬nh thÃ´ng dá»‹ch pháº£i cáº¥p phÃ¡t bá»™ nhá»› Ä‘á»ƒ lÆ°u trá»¯ thá»±c thá»ƒ Ä‘Ã³. Khi bá»™ nhá»› Ä‘Æ°á»£c cáº¥p phÃ¡t Ä‘á»™ng nhÆ° váº­y, nÃ³ pháº£i Ä‘Æ°á»£c giáº£i phÃ³ng Ä‘á»ƒ cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng láº¡i. Náº¿u khÃ´ng, trÃ¬nh thÃ´ng dá»‹ch JavaScript sáº½ tiÃªu thá»¥ háº¿t bá»™ nhá»› cÃ³ sáºµn trong há»‡ thá»‘ng vÃ  gÃ¢y ra sá»± cá»‘ há»‡ thá»‘ng. - \\"JavaScript: The Definitive Guide\\"</p>\\n</blockquote>","autoDesc":true}');export{d as comp,g as data};
