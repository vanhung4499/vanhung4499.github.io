import{_ as s,o as a,c as n,d as i}from"./app-fjbxAy1X.js";const o={},e=i(`<h1 id="tich-hop-json-trong-spring-boot" tabindex="-1"><a class="header-anchor" href="#tich-hop-json-trong-spring-boot"><span>Tích hợp Json trong Spring Boot</span></a></h1><h2 id="gioi-thieu" tabindex="-1"><a class="header-anchor" href="#gioi-thieu"><span>Giới thiệu</span></a></h2><h3 id="thu-vien-json-đuoc-ho-tro-boi-spring-boot" tabindex="-1"><a class="header-anchor" href="#thu-vien-json-đuoc-ho-tro-boi-spring-boot"><span>Thư viện Json được hỗ trợ bởi Spring Boot</span></a></h3><p>Spring Boot hỗ trợ ba thư viện Json:</p><ul><li>Gson</li><li>Jackson</li><li>JSON-B</li></ul><p><strong>Jackson là thư viện mặc định được Spring Boot khuyến nghị.</strong></p><p>Spring Boot cung cấp cấu hình tự động cho Jackson, Jackson là một phần của <code>spring-boot-starter-json</code>. Khi Jackson có trên classpath, nó sẽ tự động cấu hình bean ObjectMapper.</p><p>Spring Boot cung cấp cấu hình tự động cho Gson. Khi Gson có trên classpath, nó sẽ tự động cấu hình bean Gson. Cung cấp một số thuộc tính cấu hình <code>spring.gson.*</code> để tùy chỉnh cấu hình. Để có sự kiểm soát chi tiết hơn, bạn có thể sử dụng một hoặc nhiều bean <code>GsonBuilderCustomizer</code>.</p><p>Spring Boot cung cấp cấu hình tự động cho JSON-B. Khi API JSON-B có trên classpath, nó sẽ tự động cấu hình bean Jsonb. Apache Johnzon là một thư viện JSON-B được ưu tiên, nó cung cấp quản lý phụ thuộc.</p><h3 id="serialize-va-deserialize-trong-spring-web" tabindex="-1"><a class="header-anchor" href="#serialize-va-deserialize-trong-spring-web"><span>Serialize và Deserialize trong Spring Web</span></a></h3><p>Các chú thích sau đây được cung cấp bởi <code>spring-web</code>.</p><h4 id="responsebody" tabindex="-1"><a class="header-anchor" href="#responsebody"><span><code>@ResponseBody</code></span></a></h4><p>Chú thích <code>@ResponseBody</code> được sử dụng để chuyển đổi đối tượng trả về từ phương thức của Controller thành định dạng tương ứng và ghi vào phần thân của HTTP Response. Thường được sử dụng trong trường hợp lấy dữ liệu bất đồng bộ. Thông thường, sau khi sử dụng <code>@RequestMapping</code>, giá trị trả về sẽ được giải mã thành đường dẫn chuyển hướng, nhưng khi sử dụng <code>@ResponseBody</code>, kết quả trả về sẽ không được giải mã thành đường dẫn chuyển hướng, mà được ghi trực tiếp vào phần thân của HTTP Response.</p><p>Ví dụ:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">ResponseBody</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">RequestMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;/getInfo&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> method</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> RequestMethod</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">GET</span><span style="color:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> InfoDTO</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> getInfo</span><span style="color:#E06C75;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">	return</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> InfoDTO</span><span style="color:#E06C75;--shiki-dark:#E06C75;">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><h4 id="requestbody" tabindex="-1"><a class="header-anchor" href="#requestbody"><span><code>@RequestBody</code></span></a></h4><p>Chú thích <code>@RequestBody</code> được sử dụng để đọc dữ liệu phần thân của HTTP Request, sử dụng <code>HttpMessageConverter</code> mặc định của hệ thống để phân tích cú pháp, sau đó ràng buộc dữ liệu tương ứng vào đối tượng trả về. Sau đó, dữ liệu trả về từ <code>HttpMessageConverter</code> sẽ được ràng buộc vào tham số của phương thức trong Controller.</p><p>Định dạng mã hóa dữ liệu phần thân của yêu cầu được xác định bởi phần tử <code>Content-Type</code> trong phần header.</p><p>Ví dụ:</p><div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">RequestMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;/postInfo&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> method</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> RequestMethod</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">POST</span><span style="color:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> postInfo</span><span style="color:#E06C75;--shiki-dark:#E06C75;">(</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">RequestBody</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> InfoDTO</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> infoDTO) {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><h4 id="restcontroller" tabindex="-1"><a class="header-anchor" href="#restcontroller"><span><code>@RestController</code></span></a></h4><p>Trước Spring 4:</p><p>Nếu muốn trả về một trang cụ thể, cần sử dụng chú thích <code>@Controller</code> kết hợp với trình phân giải view <code>InternalResourceViewResolver</code>.</p><p>Nếu muốn trả về JSON, XML hoặc nội dung mediaType tùy chỉnh đến trang, cần thêm chú thích <code>@ResponseBody</code> vào phương thức tương ứng.</p><p>Sau Spring 4, đã thêm chú thích <code>@RestController</code>:</p><p>Nó tương đương với <code>@Controller</code> + <code>@RequestBody</code>.</p><p>Nếu sử dụng chú thích <code>@RestController</code> trong Controller, các phương thức trong Controller sẽ không thể trả về trang jsp hoặc html, trình phân giải view cấu hình <code>InternalResourceViewResolver</code> sẽ không hoạt động và sẽ trả về nội dung trực tiếp.</p><h2 id="đinh-nghia-serialize-va-deserialize-json-cho-mot-lop-cu-the" tabindex="-1"><a class="header-anchor" href="#đinh-nghia-serialize-va-deserialize-json-cho-mot-lop-cu-the"><span>Định nghĩa Serialize và Deserialize Json cho một lớp cụ thể</span></a></h2><p>Nếu bạn sử dụng Jackson để serialize và deserialize dữ liệu JSON, bạn có thể cần viết các lớp <code>JsonSerializer</code> và <code>JsonDeserializer</code> tùy chỉnh của riêng bạn. Thông thường, việc đăng ký các serializer tùy chỉnh với Jackson được thực hiện thông qua việc đăng ký các module, nhưng Spring Boot cung cấp một cách khác để đăng ký trực tiếp các Spring Bean bằng cách sử dụng chú thích <code>@JsonComponent</code>.</p><p>Bạn có thể sử dụng chú thích <code>@JsonComponent</code> trực tiếp trên lớp <code>JsonSerializer</code> hoặc <code>JsonDeserializer</code>. Bạn cũng có thể sử dụng nó trên lớp chứa serializer/deserializer như một lớp nội bộ, như ví dụ dưới đây:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> com.fasterxml.jackson.core.JsonGenerator</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> com.fasterxml.jackson.databind.JsonSerializer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> com.fasterxml.jackson.databind.SerializerProvider</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> com.fasterxml.jackson.databind.annotation.JsonSerialize</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> com.fasterxml.jackson.databind.annotation.JsonDeserialize</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> org.springframework.boot.jackson.JsonComponent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">JsonComponent</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Example</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">JsonSerialize</span><span style="color:#E06C75;--shiki-dark:#E06C75;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">using</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Serializer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="color:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Serializer</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> JsonSerializer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">SomeObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">        // ...</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">JsonDeserialize</span><span style="color:#E06C75;--shiki-dark:#E06C75;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">using</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Deserializer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="color:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Deserializer</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> JsonDeserializer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">SomeObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">        // ...</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Tất cả các bean <code>@JsonComponent</code> trong <code>ApplicationContext</code> sẽ tự động đăng ký với Jackson. Vì <code>@JsonComponent</code> được chú thích bằng <code>@Component</code>, nên các quy tắc quét thành phần thông thường được áp dụng.</p><p>Spring Boot cũng cung cấp các lớp cơ sở <code>JsonObjectSerializer</code> và <code>JsonObjectDeserializer</code> (<a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/jackson/JsonObjectSerializer.html" target="_blank" rel="noopener noreferrer"><code>JsonObjectSerializer</code></a> và <a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/jackson/JsonObjectDeserializer.html" target="_blank" rel="noopener noreferrer"><code>JsonObjectDeserializer</code></a>) để cung cấp các phương pháp thay thế hữu ích cho phiên bản chuẩn của Jackson khi serialize đối tượng. Để biết thêm thông tin chi tiết, hãy xem Javadoc của <a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/jackson/JsonObjectSerializer.html" target="_blank" rel="noopener noreferrer"><code>JsonObjectSerializer</code></a> và <a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/jackson/JsonObjectDeserializer.html" target="_blank" rel="noopener noreferrer"><code>JsonObjectDeserializer</code></a>.</p><h2 id="jsontest" tabindex="-1"><a class="header-anchor" href="#jsontest"><span>@JsonTest</span></a></h2><p>Sử dụng <code>@JsonTest</code> trong Spring Boot giúp dễ dàng kiểm thử serialize và deserialize.</p><p><code>@JsonTest</code> tương đương với việc sử dụng các cấu hình tự động sau:</p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration org.springframework.boot.test.autoconfigure.json.JsonTestersAutoConfiguration</span></span></code></pre></div><p>Ví dụ sử dụng <code>@JsonTest</code>:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">JsonTest</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">RunWith</span><span style="color:#E06C75;--shiki-dark:#E06C75;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">SpringRunner</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="color:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> SimpleJsonTest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Logger</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> log </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">getLogger</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">getClass</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> JacksonTester</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">InfoDTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> json</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> testSerialize</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        SimpleDateFormat</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> sdf</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> SimpleDateFormat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        InfoDTO</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> infoDTO</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> InfoDTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;JSON Test&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;1.0.0&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">sdf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">parse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;2019-01-01 12:00:00&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        JsonContent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">InfoDTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75;">jsonContent</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> json</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">write</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(infoDTO);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;json content: {}&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">jsonContent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">getJson</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">        // Hoặc sử dụng kiểm tra dựa trên JSON path</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        assertThat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(jsonContent).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">hasJsonPathStringValue</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;@.appName&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        assertThat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(jsonContent).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">extractingJsonPathStringValue</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;@.appName&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">isEqualTo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;JSON Test&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        assertThat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(jsonContent).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">hasJsonPathStringValue</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;@.version&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        assertThat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(jsonContent).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">extractingJsonPathStringValue</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;@.version&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">isEqualTo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;1.0.0&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        assertThat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(jsonContent).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">hasJsonPathStringValue</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;@.date&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        assertThat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(jsonContent).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">extractingJsonPathStringValue</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;@.date&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">isEqualTo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;2019-01-01 12:00:00&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> testDeserialize</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> content</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;{</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;">appName</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;">:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;">JSON Test</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;">,</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;">version</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;">:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;">1.0.0</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;">,</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;">date</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;">:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;">2019-01-01</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;">}&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        InfoDTO</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> actual</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> json</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">parseObject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(content);</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        assertThat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">actual</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">getAppName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">()).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">isEqualTo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;JSON Test&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">        assertThat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">actual</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">getVersion</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">()).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">isEqualTo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;1.0.0&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="cau-hinh-json-trong-spring-boot" tabindex="-1"><a class="header-anchor" href="#cau-hinh-json-trong-spring-boot"><span>Cấu hình json trong Spring Boot</span></a></h2><h3 id="cau-hinh-cho-jackson" tabindex="-1"><a class="header-anchor" href="#cau-hinh-cho-jackson"><span>Cấu hình cho Jackson</span></a></h3><p>Khi sử dụng thư viện json của Jackson trong Spring Boot, bạn có thể sử dụng các thuộc tính cấu hình sau (tương ứng với lớp <a href="https://github.com/spring-projects/spring-boot/tree/v2.1.1.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jackson/JacksonProperties.java" target="_blank" rel="noopener noreferrer"><code>JacksonProperties</code></a>):</p><div class="language-properties" data-ext="properties" data-title="properties"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">spring.jackson.date-format</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> # Date format string or a fully-qualified date format class name. For instance, \`yyyy-MM-dd HH:mm:ss\`.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">spring.jackson.default-property-inclusion</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> # Controls the inclusion of properties during serialization. Configured with one of the values in Jackson&#39;s JsonInclude.Include enumeration.</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">spring.jackson.deserialization.*= </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"># Jackson on/off features that affect the way Java objects are deserialized.</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">spring.jackson.generator.*= </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"># Jackson on/off features for generators.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">spring.jackson.joda-date-time-format</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> # Joda date time format string. If not configured, &quot;date-format&quot; is used as a fallback if it is configured with a format string.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">spring.jackson.locale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> # Locale used for formatting.</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">spring.jackson.mapper.*= </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"># Jackson general purpose on/off features.</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">spring.jackson.parser.*= </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"># Jackson on/off features for parsers.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">spring.jackson.property-naming-strategy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> # One of the constants on Jackson&#39;s PropertyNamingStrategy. Can also be a fully-qualified class name of a PropertyNamingStrategy subclass.</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">spring.jackson.serialization.*= </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"># Jackson on/off features that affect the way Java objects are serialized.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">spring.jackson.time-zone</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> #  Time zone used when formatting dates. For instance, &quot;America/Los_Angeles&quot; or &quot;GMT+10&quot;.</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">spring.jackson.visibility.*= </span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"># Jackson visibility thresholds that can be used to limit which methods (and fields) are auto-detected.</span></span></code></pre></div><h3 id="cau-hinh-cho-gson" tabindex="-1"><a class="header-anchor" href="#cau-hinh-cho-gson"><span>Cấu hình cho Gson</span></a></h3><p>Khi sử dụng thư viện json của Gson trong Spring Boot, bạn có thể sử dụng các thuộc tính cấu hình sau (tương ứng với lớp <a href="https://github.com/spring-projects/spring-boot/tree/v2.1.1.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/gson/GsonProperties.java" target="_blank" rel="noopener noreferrer"><code>GsonProperties</code></a>):</p><div class="language-properties" data-ext="properties" data-title="properties"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">spring.gson.date-format</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> # Format to use when serializing Date objects.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">spring.gson.disable-html-escaping</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> # Whether to disable the escaping of HTML characters such as &#39;&lt;&#39;, &#39;&gt;&#39;, etc.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">spring.gson.disable-inner-class-serialization</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> # Whether to exclude inner classes during serialization.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">spring.gson.enable-complex-map-key-serialization</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> # Whether to enable serialization of complex map keys (i.e. non-primitives).</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">spring.gson.exclude-fields-without-expose-annotation</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> # Whether to exclude all fields from consideration for serialization or deserialization that do not have the &quot;Expose&quot; annotation.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">spring.gson.field-naming-policy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> # Naming policy that should be applied to an object&#39;s field during serialization and deserialization.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">spring.gson.generate-non-executable-json</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> # Whether to generate non executable JSON by prefixing the output with some special text.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">spring.gson.lenient</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> # Whether to be lenient about parsing JSON that doesn&#39;t conform to RFC 4627.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">spring.gson.long-serialization-policy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> # Serialization policy for Long and long types.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">spring.gson.pretty-printing</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> # Whether to output serialized JSON that fits in a page for pretty printing.</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">spring.gson.serialize-nulls</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"> # Whether to serialize null fields.</span></span></code></pre></div><h2 id="su-dung-fastjson-trong-spring-boot" tabindex="-1"><a class="header-anchor" href="#su-dung-fastjson-trong-spring-boot"><span>Sử dụng Fastjson trong Spring Boot</span></a></h2><p>Nhiều lập trình viên Java trong nước thích sử dụng thư viện Fastjson của Alibaba làm thư viện json. Vậy làm thế nào để thay thế thư viện mặc định Jackson bằng Fastjson trong Spring Boot?</p><p>Bạn cần thực hiện các bước sau:</p><p>(1) Thêm dependency của Fastjson vào file pom.xml:</p><div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">	&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;com.alibaba&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">	&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;fastjson&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">	&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;1.2.54&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre></div><p>(2) Triển khai interface WebMvcConfigurer và tùy chỉnh phương thức <code>configureMessageConverters</code>. Ví dụ như sau:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> WebMvcConfig</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> WebMvcConfigurer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> Logger</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> log </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">getLogger</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">getClass</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">     * Tùy chỉnh message converter</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">     * </span><span style="color:#C678DD;--shiki-dark:#C678DD;font-style:italic;--shiki-dark-font-style:italic;">@param</span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;"> converters</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> configureMessageConverters</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">HttpMessageConverter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#C678DD;--shiki-dark:#C678DD;">?</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75;font-style:italic;--shiki-dark-font-style:italic;">converters</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">        // Xóa message converter mặc định của Jackson</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        converters</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">removeIf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(converter </span><span style="color:#C678DD;--shiki-dark:#C678DD;">-&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> converter </span><span style="color:#C678DD;--shiki-dark:#C678DD;">instanceof</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> MappingJackson2HttpMessageConverter);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">        // Cấu hình FastJson</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        FastJsonConfig</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> config</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> FastJsonConfig</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        config</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">setSerializerFeatures</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">SerializerFeature</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">QuoteFieldNames</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">SerializerFeature</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">WriteEnumUsingToString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">            SerializerFeature</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">WriteMapNullValue</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">SerializerFeature</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">WriteDateUseDateFormat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">            SerializerFeature</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">DisableCircularReferenceDetect</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">        // Thêm FastJsonHttpMessageConverter</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        FastJsonHttpMessageConverter</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> fastJsonHttpMessageConverter</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> FastJsonHttpMessageConverter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        fastJsonHttpMessageConverter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">setFastJsonConfig</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(config);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">MediaType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75;">fastMediaTypes</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> ArrayList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        fastMediaTypes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">MediaType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">APPLICATION_JSON_UTF8</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        fastJsonHttpMessageConverter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">setSupportedMediaTypes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(fastMediaTypes);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        converters</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(fastJsonHttpMessageConverter);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">        // Thêm StringHttpMessageConverter, giải quyết vấn đề mã hóa tiếng Việt</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        StringHttpMessageConverter</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> stringHttpMessageConverter</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> StringHttpMessageConverter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Charset</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">forName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B;">        converters</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">add</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(stringHttpMessageConverter);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,53),r=[e];function l(t,p){return a(),n("div",null,r)}const B=s(o,[["render",l],["__file","json.html.vue"]]),k=JSON.parse('{"path":"/framework/spring/io/json.html","title":"SpringBoot JSON","lang":"en-US","frontmatter":{"title":"SpringBoot JSON","tags":["spring","java","backend"],"categories":["spring","java","backend"],"date created":"2023-08-11T00:00:00.000Z","date modified":"2023-08-11T00:00:00.000Z","description":"Tích hợp Json trong Spring Boot Giới thiệu Thư viện Json được hỗ trợ bởi Spring Boot Spring Boot hỗ trợ ba thư viện Json: Gson Jackson JSON-B Jackson là thư viện mặc định được S...","head":[["meta",{"property":"og:url","content":"https://vanhung4499.github.io/framework/spring/io/json.html"}],["meta",{"property":"og:site_name","content":"VanHung4499"}],["meta",{"property":"og:title","content":"SpringBoot JSON"}],["meta",{"property":"og:description","content":"Tích hợp Json trong Spring Boot Giới thiệu Thư viện Json được hỗ trợ bởi Spring Boot Spring Boot hỗ trợ ba thư viện Json: Gson Jackson JSON-B Jackson là thư viện mặc định được S..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-06-28T15:54:38.000Z"}],["meta",{"property":"article:author","content":"Hung Nguyen"}],["meta",{"property":"article:tag","content":"spring"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:tag","content":"backend"}],["meta",{"property":"article:modified_time","content":"2024-06-28T15:54:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"SpringBoot JSON\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-06-28T15:54:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hung Nguyen\\",\\"url\\":\\"https://vanhung4499.github.io\\"}]}"]]},"headers":[{"level":2,"title":"Giới thiệu","slug":"gioi-thieu","link":"#gioi-thieu","children":[{"level":3,"title":"Thư viện Json được hỗ trợ bởi Spring Boot","slug":"thu-vien-json-đuoc-ho-tro-boi-spring-boot","link":"#thu-vien-json-đuoc-ho-tro-boi-spring-boot","children":[]},{"level":3,"title":"Serialize và Deserialize trong Spring Web","slug":"serialize-va-deserialize-trong-spring-web","link":"#serialize-va-deserialize-trong-spring-web","children":[]}]},{"level":2,"title":"Định nghĩa Serialize và Deserialize Json cho một lớp cụ thể","slug":"đinh-nghia-serialize-va-deserialize-json-cho-mot-lop-cu-the","link":"#đinh-nghia-serialize-va-deserialize-json-cho-mot-lop-cu-the","children":[]},{"level":2,"title":"@JsonTest","slug":"jsontest","link":"#jsontest","children":[]},{"level":2,"title":"Cấu hình json trong Spring Boot","slug":"cau-hinh-json-trong-spring-boot","link":"#cau-hinh-json-trong-spring-boot","children":[{"level":3,"title":"Cấu hình cho Jackson","slug":"cau-hinh-cho-jackson","link":"#cau-hinh-cho-jackson","children":[]},{"level":3,"title":"Cấu hình cho Gson","slug":"cau-hinh-cho-gson","link":"#cau-hinh-cho-gson","children":[]}]},{"level":2,"title":"Sử dụng Fastjson trong Spring Boot","slug":"su-dung-fastjson-trong-spring-boot","link":"#su-dung-fastjson-trong-spring-boot","children":[]}],"git":{"createdTime":1719590078000,"updatedTime":1719590078000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":6.13,"words":1840},"filePathRelative":"framework/spring/io/json.md","localizedDate":"June 28, 2024","excerpt":"\\n<h2>Giới thiệu</h2>\\n<h3>Thư viện Json được hỗ trợ bởi Spring Boot</h3>\\n<p>Spring Boot hỗ trợ ba thư viện Json:</p>\\n<ul>\\n<li>Gson</li>\\n<li>Jackson</li>\\n<li>JSON-B</li>\\n</ul>\\n<p><strong>Jackson là thư viện mặc định được Spring Boot khuyến nghị.</strong></p>\\n<p>Spring Boot cung cấp cấu hình tự động cho Jackson, Jackson là một phần của <code>spring-boot-starter-json</code>. Khi Jackson có trên classpath, nó sẽ tự động cấu hình bean ObjectMapper.</p>","autoDesc":true}');export{B as comp,k as data};
