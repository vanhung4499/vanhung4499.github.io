import{_ as s,o as e,c as n,a as r}from"./app-5QVbWi7Z.js";const t={};function l(i,a){return e(),n("div",null,a[0]||(a[0]=[r(`<h1 id="注册中心-nacos" tabindex="-1"><a class="header-anchor" href="#注册中心-nacos"><span>注册中心 Nacos</span></a></h1><p>项目使用 Nacos 作为配置中心，实现服务的注册发现。</p><figure><img src="https://cloud.iocoder.cn/img/注册中心/服务列表.png" alt="服务列表" tabindex="0" loading="lazy"><figcaption>服务列表</figcaption></figure><h2 id="_1-搭建-nacos-server" tabindex="-1"><a class="header-anchor" href="#_1-搭建-nacos-server"><span><a href="#_1-%E6%90%AD%E5%BB%BA-nacos-server">#</a> 1. 搭建 Nacos Server</span></a></h2><p>① 参考<a href="https://www.iocoder.cn/Nacos/install/?qun" target="_blank" rel="noopener noreferrer">《芋道 Nacos 极简入门》</a>文章的「2. 单机部署（最简模式）」或「3. 单机部署（基于 MySQL 数据库）」小节。</p><p>② 点击 Nacos 控制台的 [命名空间] 菜单，创建一个 ID 和名字都为 <code>dev</code> 的命名空间，稍后会使用到。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/注册中心/命名空间.png" alt="命名空间" tabindex="0" loading="lazy"><figcaption>命名空间</figcaption></figure><h2 id="_2-项目接入-nacos" tabindex="-1"><a class="header-anchor" href="#_2-项目接入-nacos"><span><a href="#_2-%E9%A1%B9%E7%9B%AE%E6%8E%A5%E5%85%A5-nacos">#</a> 2. 项目接入 Nacos</span></a></h2><p>友情提示：以 yudao-module-system 服务为例子。</p><h3 id="_2-1-引入依赖" tabindex="-1"><a class="header-anchor" href="#_2-1-引入依赖"><span><a href="#_2-1-%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96">#</a> 2.1 引入依赖</span></a></h3><p>在 <code>yudao-module-system-biz</code> 模块的 <a href="https://github.com/YunaiV/yudao-cloud/blob/master/yudao-module-system/yudao-module-system-biz/pom.xml" target="_blank" rel="noopener noreferrer"><code>pom.xml</code></a> 中，引入 Nacos 对应的依赖。如下所示：</p><div class="language-" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>&lt;!-- Spring Cloud 基础 --&gt;</span></span>
<span class="line"><span>&lt;dependency&gt;</span></span>
<span class="line"><span>    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span></span>
<span class="line"><span>    &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;</span></span>
<span class="line"><span>&lt;/dependency&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;!-- Registry 注册中心相关 --&gt;</span></span>
<span class="line"><span>&lt;dependency&gt;</span></span>
<span class="line"><span>    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span></span>
<span class="line"><span>    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;</span></span>
<span class="line"><span>&lt;/dependency&gt;</span></span></code></pre></div><h3 id="_2-2-添加配置" tabindex="-1"><a class="header-anchor" href="#_2-2-添加配置"><span><a href="#_2-2-%E6%B7%BB%E5%8A%A0%E9%85%8D%E7%BD%AE">#</a> 2.2 添加配置</span></a></h3><p>在 <a href="https://github.com/YunaiV/yudao-cloud/blob/master/yudao-module-system/yudao-module-system-biz/src/main/resources/bootstrap-local.yaml#L12-L23" target="_blank" rel="noopener noreferrer"><code>bootstrap-local.yaml</code></a> 中，添加 <code>nacos.config</code> 配置。如下所示：</p><div class="language-" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>--- #################### 注册中心相关配置 ####################</span></span>
<span class="line"><span></span></span>
<span class="line"><span>spring:</span></span>
<span class="line"><span>  cloud:</span></span>
<span class="line"><span>    nacos:</span></span>
<span class="line"><span>      server-addr: 127.0.0.1:8848</span></span>
<span class="line"><span>      discovery:</span></span>
<span class="line"><span>        namespace: dev # 命名空间。这里使用 dev 开发环境</span></span>
<span class="line"><span>        metadata:</span></span>
<span class="line"><span>          version: 1.0.0 # 服务实例的版本号，可用于灰度发布</span></span></code></pre></div><ul><li><code>spring.cloud.nacos.discovery.namespace</code> 配置项：设置为 <code>dev</code>，就是刚创建的命名空间</li></ul><h3 id="_2-3-启动项目" tabindex="-1"><a class="header-anchor" href="#_2-3-启动项目"><span><a href="#_2-3-%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE">#</a> 2.3 启动项目</span></a></h3><p>运行 SystemServerApplication 类，将 <code>system-server</code> 服务启动。</p><p>然后，在 Nacos 控制台的 [服务管理 -&gt; 服务列表] 菜单，就可以看到该服务实例。如下图所示：</p><figure><img src="https://cloud.iocoder.cn/img/注册中心/system-server服务实例.png" alt="system-server服务实例" tabindex="0" loading="lazy"><figcaption>system-server服务实例</figcaption></figure>`,20)]))}const p=s(t,[["render",l],["__file","registry-center.html.vue"]]),c=JSON.parse('{"path":"/project/yudao-cloud/registry-center.html","title":"注册中心 Nacos","lang":"en-US","frontmatter":{"title":"注册中心 Nacos","tags":["project","java","spring-boot","spring-cloud"],"categories":["project"],"order":51,"feed":false,"seo":false,"head":[]},"headers":[{"level":2,"title":"# 1. 搭建 Nacos Server","slug":"_1-搭建-nacos-server","link":"#_1-搭建-nacos-server","children":[]},{"level":2,"title":"# 2. 项目接入 Nacos","slug":"_2-项目接入-nacos","link":"#_2-项目接入-nacos","children":[{"level":3,"title":"# 2.1 引入依赖","slug":"_2-1-引入依赖","link":"#_2-1-引入依赖","children":[]},{"level":3,"title":"# 2.2 添加配置","slug":"_2-2-添加配置","link":"#_2-2-添加配置","children":[]},{"level":3,"title":"# 2.3 启动项目","slug":"_2-3-启动项目","link":"#_2-3-启动项目","children":[]}]}],"git":{"createdTime":1720365235000,"updatedTime":1720365235000,"contributors":[{"name":"Hung Nguyen Van","email":"vanhung4499@gmail.com","commits":1}]},"readingTime":{"minutes":1.6,"words":481},"filePathRelative":"project/yudao-cloud/registry-center.md","localizedDate":"July 7, 2024"}');export{p as comp,c as data};
